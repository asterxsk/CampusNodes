(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))i(r);new MutationObserver(r=>{for(const s of r)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&i(o)}).observe(document,{childList:!0,subtree:!0});function t(r){const s={};return r.integrity&&(s.integrity=r.integrity),r.referrerPolicy&&(s.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?s.credentials="include":r.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function i(r){if(r.ep)return;r.ep=!0;const s=t(r);fetch(r.href,s)}})();function Tb(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}var s1={exports:{}},Ag={};var IA;function DU(){if(IA)return Ag;IA=1;var n=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function t(i,r,s){var o=null;if(s!==void 0&&(o=""+s),r.key!==void 0&&(o=""+r.key),"key"in r){s={};for(var u in r)u!=="key"&&(s[u]=r[u])}else s=r;return r=s.ref,{$$typeof:n,type:i,key:o,ref:r!==void 0?r:null,props:s}}return Ag.Fragment=e,Ag.jsx=t,Ag.jsxs=t,Ag}var PA;function IU(){return PA||(PA=1,s1.exports=DU()),s1.exports}var V=IU(),a1={exports:{}},gn={};var OA;function PU(){if(OA)return gn;OA=1;var n=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),i=Symbol.for("react.strict_mode"),r=Symbol.for("react.profiler"),s=Symbol.for("react.consumer"),o=Symbol.for("react.context"),u=Symbol.for("react.forward_ref"),f=Symbol.for("react.suspense"),p=Symbol.for("react.memo"),m=Symbol.for("react.lazy"),v=Symbol.for("react.activity"),_=Symbol.iterator;function x(X){return X===null||typeof X!="object"?null:(X=_&&X[_]||X["@@iterator"],typeof X=="function"?X:null)}var S={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},A=Object.assign,E={};function M(X,ce,xe){this.props=X,this.context=ce,this.refs=E,this.updater=xe||S}M.prototype.isReactComponent={},M.prototype.setState=function(X,ce){if(typeof X!="object"&&typeof X!="function"&&X!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,X,ce,"setState")},M.prototype.forceUpdate=function(X){this.updater.enqueueForceUpdate(this,X,"forceUpdate")};function C(){}C.prototype=M.prototype;function N(X,ce,xe){this.props=X,this.context=ce,this.refs=E,this.updater=xe||S}var I=N.prototype=new C;I.constructor=N,A(I,M.prototype),I.isPureReactComponent=!0;var U=Array.isArray;function L(){}var F={H:null,A:null,T:null,S:null},H=Object.prototype.hasOwnProperty;function P(X,ce,xe){var Be=xe.ref;return{$$typeof:n,type:X,key:ce,ref:Be!==void 0?Be:null,props:xe}}function k(X,ce){return P(X.type,ce,X.props)}function Y(X){return typeof X=="object"&&X!==null&&X.$$typeof===n}function ie(X){var ce={"=":"=0",":":"=2"};return"$"+X.replace(/[=:]/g,function(xe){return ce[xe]})}var te=/\/+/g;function le(X,ce){return typeof X=="object"&&X!==null&&X.key!=null?ie(""+X.key):ce.toString(36)}function de(X){switch(X.status){case"fulfilled":return X.value;case"rejected":throw X.reason;default:switch(typeof X.status=="string"?X.then(L,L):(X.status="pending",X.then(function(ce){X.status==="pending"&&(X.status="fulfilled",X.value=ce)},function(ce){X.status==="pending"&&(X.status="rejected",X.reason=ce)})),X.status){case"fulfilled":return X.value;case"rejected":throw X.reason}}throw X}function Z(X,ce,xe,Be,mt){var ge=typeof X;(ge==="undefined"||ge==="boolean")&&(X=null);var Re=!1;if(X===null)Re=!0;else switch(ge){case"bigint":case"string":case"number":Re=!0;break;case"object":switch(X.$$typeof){case n:case e:Re=!0;break;case m:return Re=X._init,Z(Re(X._payload),ce,xe,Be,mt)}}if(Re)return mt=mt(X),Re=Be===""?"."+le(X,0):Be,U(mt)?(xe="",Re!=null&&(xe=Re.replace(te,"$&/")+"/"),Z(mt,ce,xe,"",function(Rt){return Rt})):mt!=null&&(Y(mt)&&(mt=k(mt,xe+(mt.key==null||X&&X.key===mt.key?"":(""+mt.key).replace(te,"$&/")+"/")+Re)),ce.push(mt)),1;Re=0;var rt=Be===""?".":Be+":";if(U(X))for(var xt=0;xt<X.length;xt++)Be=X[xt],ge=rt+le(Be,xt),Re+=Z(Be,ce,xe,ge,mt);else if(xt=x(X),typeof xt=="function")for(X=xt.call(X),xt=0;!(Be=X.next()).done;)Be=Be.value,ge=rt+le(Be,xt++),Re+=Z(Be,ce,xe,ge,mt);else if(ge==="object"){if(typeof X.then=="function")return Z(de(X),ce,xe,Be,mt);throw ce=String(X),Error("Objects are not valid as a React child (found: "+(ce==="[object Object]"?"object with keys {"+Object.keys(X).join(", ")+"}":ce)+"). If you meant to render a collection of children, use an array instead.")}return Re}function Q(X,ce,xe){if(X==null)return X;var Be=[],mt=0;return Z(X,Be,"","",function(ge){return ce.call(xe,ge,mt++)}),Be}function ve(X){if(X._status===-1){var ce=X._result;ce=ce(),ce.then(function(xe){(X._status===0||X._status===-1)&&(X._status=1,X._result=xe)},function(xe){(X._status===0||X._status===-1)&&(X._status=2,X._result=xe)}),X._status===-1&&(X._status=0,X._result=ce)}if(X._status===1)return X._result.default;throw X._result}var Te=typeof reportError=="function"?reportError:function(X){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var ce=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof X=="object"&&X!==null&&typeof X.message=="string"?String(X.message):String(X),error:X});if(!window.dispatchEvent(ce))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",X);return}console.error(X)},we={map:Q,forEach:function(X,ce,xe){Q(X,function(){ce.apply(this,arguments)},xe)},count:function(X){var ce=0;return Q(X,function(){ce++}),ce},toArray:function(X){return Q(X,function(ce){return ce})||[]},only:function(X){if(!Y(X))throw Error("React.Children.only expected to receive a single React element child.");return X}};return gn.Activity=v,gn.Children=we,gn.Component=M,gn.Fragment=t,gn.Profiler=r,gn.PureComponent=N,gn.StrictMode=i,gn.Suspense=f,gn.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=F,gn.__COMPILER_RUNTIME={__proto__:null,c:function(X){return F.H.useMemoCache(X)}},gn.cache=function(X){return function(){return X.apply(null,arguments)}},gn.cacheSignal=function(){return null},gn.cloneElement=function(X,ce,xe){if(X==null)throw Error("The argument must be a React element, but you passed "+X+".");var Be=A({},X.props),mt=X.key;if(ce!=null)for(ge in ce.key!==void 0&&(mt=""+ce.key),ce)!H.call(ce,ge)||ge==="key"||ge==="__self"||ge==="__source"||ge==="ref"&&ce.ref===void 0||(Be[ge]=ce[ge]);var ge=arguments.length-2;if(ge===1)Be.children=xe;else if(1<ge){for(var Re=Array(ge),rt=0;rt<ge;rt++)Re[rt]=arguments[rt+2];Be.children=Re}return P(X.type,mt,Be)},gn.createContext=function(X){return X={$$typeof:o,_currentValue:X,_currentValue2:X,_threadCount:0,Provider:null,Consumer:null},X.Provider=X,X.Consumer={$$typeof:s,_context:X},X},gn.createElement=function(X,ce,xe){var Be,mt={},ge=null;if(ce!=null)for(Be in ce.key!==void 0&&(ge=""+ce.key),ce)H.call(ce,Be)&&Be!=="key"&&Be!=="__self"&&Be!=="__source"&&(mt[Be]=ce[Be]);var Re=arguments.length-2;if(Re===1)mt.children=xe;else if(1<Re){for(var rt=Array(Re),xt=0;xt<Re;xt++)rt[xt]=arguments[xt+2];mt.children=rt}if(X&&X.defaultProps)for(Be in Re=X.defaultProps,Re)mt[Be]===void 0&&(mt[Be]=Re[Be]);return P(X,ge,mt)},gn.createRef=function(){return{current:null}},gn.forwardRef=function(X){return{$$typeof:u,render:X}},gn.isValidElement=Y,gn.lazy=function(X){return{$$typeof:m,_payload:{_status:-1,_result:X},_init:ve}},gn.memo=function(X,ce){return{$$typeof:p,type:X,compare:ce===void 0?null:ce}},gn.startTransition=function(X){var ce=F.T,xe={};F.T=xe;try{var Be=X(),mt=F.S;mt!==null&&mt(xe,Be),typeof Be=="object"&&Be!==null&&typeof Be.then=="function"&&Be.then(L,Te)}catch(ge){Te(ge)}finally{ce!==null&&xe.types!==null&&(ce.types=xe.types),F.T=ce}},gn.unstable_useCacheRefresh=function(){return F.H.useCacheRefresh()},gn.use=function(X){return F.H.use(X)},gn.useActionState=function(X,ce,xe){return F.H.useActionState(X,ce,xe)},gn.useCallback=function(X,ce){return F.H.useCallback(X,ce)},gn.useContext=function(X){return F.H.useContext(X)},gn.useDebugValue=function(){},gn.useDeferredValue=function(X,ce){return F.H.useDeferredValue(X,ce)},gn.useEffect=function(X,ce){return F.H.useEffect(X,ce)},gn.useEffectEvent=function(X){return F.H.useEffectEvent(X)},gn.useId=function(){return F.H.useId()},gn.useImperativeHandle=function(X,ce,xe){return F.H.useImperativeHandle(X,ce,xe)},gn.useInsertionEffect=function(X,ce){return F.H.useInsertionEffect(X,ce)},gn.useLayoutEffect=function(X,ce){return F.H.useLayoutEffect(X,ce)},gn.useMemo=function(X,ce){return F.H.useMemo(X,ce)},gn.useOptimistic=function(X,ce){return F.H.useOptimistic(X,ce)},gn.useReducer=function(X,ce,xe){return F.H.useReducer(X,ce,xe)},gn.useRef=function(X){return F.H.useRef(X)},gn.useState=function(X){return F.H.useState(X)},gn.useSyncExternalStore=function(X,ce,xe){return F.H.useSyncExternalStore(X,ce,xe)},gn.useTransition=function(){return F.H.useTransition()},gn.version="19.2.3",gn}var LA;function Y0(){return LA||(LA=1,a1.exports=PU()),a1.exports}var K=Y0();const so=Tb(K);var o1={exports:{}},Cg={},l1={exports:{}},c1={};var UA;function OU(){return UA||(UA=1,(function(n){function e(Z,Q){var ve=Z.length;Z.push(Q);e:for(;0<ve;){var Te=ve-1>>>1,we=Z[Te];if(0<r(we,Q))Z[Te]=Q,Z[ve]=we,ve=Te;else break e}}function t(Z){return Z.length===0?null:Z[0]}function i(Z){if(Z.length===0)return null;var Q=Z[0],ve=Z.pop();if(ve!==Q){Z[0]=ve;e:for(var Te=0,we=Z.length,X=we>>>1;Te<X;){var ce=2*(Te+1)-1,xe=Z[ce],Be=ce+1,mt=Z[Be];if(0>r(xe,ve))Be<we&&0>r(mt,xe)?(Z[Te]=mt,Z[Be]=ve,Te=Be):(Z[Te]=xe,Z[ce]=ve,Te=ce);else if(Be<we&&0>r(mt,ve))Z[Te]=mt,Z[Be]=ve,Te=Be;else break e}}return Q}function r(Z,Q){var ve=Z.sortIndex-Q.sortIndex;return ve!==0?ve:Z.id-Q.id}if(n.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var s=performance;n.unstable_now=function(){return s.now()}}else{var o=Date,u=o.now();n.unstable_now=function(){return o.now()-u}}var f=[],p=[],m=1,v=null,_=3,x=!1,S=!1,A=!1,E=!1,M=typeof setTimeout=="function"?setTimeout:null,C=typeof clearTimeout=="function"?clearTimeout:null,N=typeof setImmediate<"u"?setImmediate:null;function I(Z){for(var Q=t(p);Q!==null;){if(Q.callback===null)i(p);else if(Q.startTime<=Z)i(p),Q.sortIndex=Q.expirationTime,e(f,Q);else break;Q=t(p)}}function U(Z){if(A=!1,I(Z),!S)if(t(f)!==null)S=!0,L||(L=!0,ie());else{var Q=t(p);Q!==null&&de(U,Q.startTime-Z)}}var L=!1,F=-1,H=5,P=-1;function k(){return E?!0:!(n.unstable_now()-P<H)}function Y(){if(E=!1,L){var Z=n.unstable_now();P=Z;var Q=!0;try{e:{S=!1,A&&(A=!1,C(F),F=-1),x=!0;var ve=_;try{t:{for(I(Z),v=t(f);v!==null&&!(v.expirationTime>Z&&k());){var Te=v.callback;if(typeof Te=="function"){v.callback=null,_=v.priorityLevel;var we=Te(v.expirationTime<=Z);if(Z=n.unstable_now(),typeof we=="function"){v.callback=we,I(Z),Q=!0;break t}v===t(f)&&i(f),I(Z)}else i(f);v=t(f)}if(v!==null)Q=!0;else{var X=t(p);X!==null&&de(U,X.startTime-Z),Q=!1}}break e}finally{v=null,_=ve,x=!1}Q=void 0}}finally{Q?ie():L=!1}}}var ie;if(typeof N=="function")ie=function(){N(Y)};else if(typeof MessageChannel<"u"){var te=new MessageChannel,le=te.port2;te.port1.onmessage=Y,ie=function(){le.postMessage(null)}}else ie=function(){M(Y,0)};function de(Z,Q){F=M(function(){Z(n.unstable_now())},Q)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(Z){Z.callback=null},n.unstable_forceFrameRate=function(Z){0>Z||125<Z?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):H=0<Z?Math.floor(1e3/Z):5},n.unstable_getCurrentPriorityLevel=function(){return _},n.unstable_next=function(Z){switch(_){case 1:case 2:case 3:var Q=3;break;default:Q=_}var ve=_;_=Q;try{return Z()}finally{_=ve}},n.unstable_requestPaint=function(){E=!0},n.unstable_runWithPriority=function(Z,Q){switch(Z){case 1:case 2:case 3:case 4:case 5:break;default:Z=3}var ve=_;_=Z;try{return Q()}finally{_=ve}},n.unstable_scheduleCallback=function(Z,Q,ve){var Te=n.unstable_now();switch(typeof ve=="object"&&ve!==null?(ve=ve.delay,ve=typeof ve=="number"&&0<ve?Te+ve:Te):ve=Te,Z){case 1:var we=-1;break;case 2:we=250;break;case 5:we=1073741823;break;case 4:we=1e4;break;default:we=5e3}return we=ve+we,Z={id:m++,callback:Q,priorityLevel:Z,startTime:ve,expirationTime:we,sortIndex:-1},ve>Te?(Z.sortIndex=ve,e(p,Z),t(f)===null&&Z===t(p)&&(A?(C(F),F=-1):A=!0,de(U,ve-Te))):(Z.sortIndex=we,e(f,Z),S||x||(S=!0,L||(L=!0,ie()))),Z},n.unstable_shouldYield=k,n.unstable_wrapCallback=function(Z){var Q=_;return function(){var ve=_;_=Q;try{return Z.apply(this,arguments)}finally{_=ve}}}})(c1)),c1}var kA;function ON(){return kA||(kA=1,l1.exports=OU()),l1.exports}var u1={exports:{}},gs={};var BA;function LU(){if(BA)return gs;BA=1;var n=Y0();function e(f){var p="https://react.dev/errors/"+f;if(1<arguments.length){p+="?args[]="+encodeURIComponent(arguments[1]);for(var m=2;m<arguments.length;m++)p+="&args[]="+encodeURIComponent(arguments[m])}return"Minified React error #"+f+"; visit "+p+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function t(){}var i={d:{f:t,r:function(){throw Error(e(522))},D:t,C:t,L:t,m:t,X:t,S:t,M:t},p:0,findDOMNode:null},r=Symbol.for("react.portal");function s(f,p,m){var v=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:r,key:v==null?null:""+v,children:f,containerInfo:p,implementation:m}}var o=n.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function u(f,p){if(f==="font")return"";if(typeof p=="string")return p==="use-credentials"?p:""}return gs.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=i,gs.createPortal=function(f,p){var m=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!p||p.nodeType!==1&&p.nodeType!==9&&p.nodeType!==11)throw Error(e(299));return s(f,p,null,m)},gs.flushSync=function(f){var p=o.T,m=i.p;try{if(o.T=null,i.p=2,f)return f()}finally{o.T=p,i.p=m,i.d.f()}},gs.preconnect=function(f,p){typeof f=="string"&&(p?(p=p.crossOrigin,p=typeof p=="string"?p==="use-credentials"?p:"":void 0):p=null,i.d.C(f,p))},gs.prefetchDNS=function(f){typeof f=="string"&&i.d.D(f)},gs.preinit=function(f,p){if(typeof f=="string"&&p&&typeof p.as=="string"){var m=p.as,v=u(m,p.crossOrigin),_=typeof p.integrity=="string"?p.integrity:void 0,x=typeof p.fetchPriority=="string"?p.fetchPriority:void 0;m==="style"?i.d.S(f,typeof p.precedence=="string"?p.precedence:void 0,{crossOrigin:v,integrity:_,fetchPriority:x}):m==="script"&&i.d.X(f,{crossOrigin:v,integrity:_,fetchPriority:x,nonce:typeof p.nonce=="string"?p.nonce:void 0})}},gs.preinitModule=function(f,p){if(typeof f=="string")if(typeof p=="object"&&p!==null){if(p.as==null||p.as==="script"){var m=u(p.as,p.crossOrigin);i.d.M(f,{crossOrigin:m,integrity:typeof p.integrity=="string"?p.integrity:void 0,nonce:typeof p.nonce=="string"?p.nonce:void 0})}}else p==null&&i.d.M(f)},gs.preload=function(f,p){if(typeof f=="string"&&typeof p=="object"&&p!==null&&typeof p.as=="string"){var m=p.as,v=u(m,p.crossOrigin);i.d.L(f,m,{crossOrigin:v,integrity:typeof p.integrity=="string"?p.integrity:void 0,nonce:typeof p.nonce=="string"?p.nonce:void 0,type:typeof p.type=="string"?p.type:void 0,fetchPriority:typeof p.fetchPriority=="string"?p.fetchPriority:void 0,referrerPolicy:typeof p.referrerPolicy=="string"?p.referrerPolicy:void 0,imageSrcSet:typeof p.imageSrcSet=="string"?p.imageSrcSet:void 0,imageSizes:typeof p.imageSizes=="string"?p.imageSizes:void 0,media:typeof p.media=="string"?p.media:void 0})}},gs.preloadModule=function(f,p){if(typeof f=="string")if(p){var m=u(p.as,p.crossOrigin);i.d.m(f,{as:typeof p.as=="string"&&p.as!=="script"?p.as:void 0,crossOrigin:m,integrity:typeof p.integrity=="string"?p.integrity:void 0})}else i.d.m(f)},gs.requestFormReset=function(f){i.d.r(f)},gs.unstable_batchedUpdates=function(f,p){return f(p)},gs.useFormState=function(f,p,m){return o.H.useFormState(f,p,m)},gs.useFormStatus=function(){return o.H.useHostTransitionStatus()},gs.version="19.2.3",gs}var zA;function UU(){if(zA)return u1.exports;zA=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(e){console.error(e)}}return n(),u1.exports=LU(),u1.exports}var FA;function kU(){if(FA)return Cg;FA=1;var n=ON(),e=Y0(),t=UU();function i(a){var l="https://react.dev/errors/"+a;if(1<arguments.length){l+="?args[]="+encodeURIComponent(arguments[1]);for(var d=2;d<arguments.length;d++)l+="&args[]="+encodeURIComponent(arguments[d])}return"Minified React error #"+a+"; visit "+l+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function r(a){return!(!a||a.nodeType!==1&&a.nodeType!==9&&a.nodeType!==11)}function s(a){var l=a,d=a;if(a.alternate)for(;l.return;)l=l.return;else{a=l;do l=a,(l.flags&4098)!==0&&(d=l.return),a=l.return;while(a)}return l.tag===3?d:null}function o(a){if(a.tag===13){var l=a.memoizedState;if(l===null&&(a=a.alternate,a!==null&&(l=a.memoizedState)),l!==null)return l.dehydrated}return null}function u(a){if(a.tag===31){var l=a.memoizedState;if(l===null&&(a=a.alternate,a!==null&&(l=a.memoizedState)),l!==null)return l.dehydrated}return null}function f(a){if(s(a)!==a)throw Error(i(188))}function p(a){var l=a.alternate;if(!l){if(l=s(a),l===null)throw Error(i(188));return l!==a?null:a}for(var d=a,g=l;;){var w=d.return;if(w===null)break;var T=w.alternate;if(T===null){if(g=w.return,g!==null){d=g;continue}break}if(w.child===T.child){for(T=w.child;T;){if(T===d)return f(w),a;if(T===g)return f(w),l;T=T.sibling}throw Error(i(188))}if(d.return!==g.return)d=w,g=T;else{for(var O=!1,W=w.child;W;){if(W===d){O=!0,d=w,g=T;break}if(W===g){O=!0,g=w,d=T;break}W=W.sibling}if(!O){for(W=T.child;W;){if(W===d){O=!0,d=T,g=w;break}if(W===g){O=!0,g=T,d=w;break}W=W.sibling}if(!O)throw Error(i(189))}}if(d.alternate!==g)throw Error(i(190))}if(d.tag!==3)throw Error(i(188));return d.stateNode.current===d?a:l}function m(a){var l=a.tag;if(l===5||l===26||l===27||l===6)return a;for(a=a.child;a!==null;){if(l=m(a),l!==null)return l;a=a.sibling}return null}var v=Object.assign,_=Symbol.for("react.element"),x=Symbol.for("react.transitional.element"),S=Symbol.for("react.portal"),A=Symbol.for("react.fragment"),E=Symbol.for("react.strict_mode"),M=Symbol.for("react.profiler"),C=Symbol.for("react.consumer"),N=Symbol.for("react.context"),I=Symbol.for("react.forward_ref"),U=Symbol.for("react.suspense"),L=Symbol.for("react.suspense_list"),F=Symbol.for("react.memo"),H=Symbol.for("react.lazy"),P=Symbol.for("react.activity"),k=Symbol.for("react.memo_cache_sentinel"),Y=Symbol.iterator;function ie(a){return a===null||typeof a!="object"?null:(a=Y&&a[Y]||a["@@iterator"],typeof a=="function"?a:null)}var te=Symbol.for("react.client.reference");function le(a){if(a==null)return null;if(typeof a=="function")return a.$$typeof===te?null:a.displayName||a.name||null;if(typeof a=="string")return a;switch(a){case A:return"Fragment";case M:return"Profiler";case E:return"StrictMode";case U:return"Suspense";case L:return"SuspenseList";case P:return"Activity"}if(typeof a=="object")switch(a.$$typeof){case S:return"Portal";case N:return a.displayName||"Context";case C:return(a._context.displayName||"Context")+".Consumer";case I:var l=a.render;return a=a.displayName,a||(a=l.displayName||l.name||"",a=a!==""?"ForwardRef("+a+")":"ForwardRef"),a;case F:return l=a.displayName||null,l!==null?l:le(a.type)||"Memo";case H:l=a._payload,a=a._init;try{return le(a(l))}catch{}}return null}var de=Array.isArray,Z=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,Q=t.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,ve={pending:!1,data:null,method:null,action:null},Te=[],we=-1;function X(a){return{current:a}}function ce(a){0>we||(a.current=Te[we],Te[we]=null,we--)}function xe(a,l){we++,Te[we]=a.current,a.current=l}var Be=X(null),mt=X(null),ge=X(null),Re=X(null);function rt(a,l){switch(xe(ge,l),xe(mt,a),xe(Be,null),l.nodeType){case 9:case 11:a=(a=l.documentElement)&&(a=a.namespaceURI)?tA(a):0;break;default:if(a=l.tagName,l=l.namespaceURI)l=tA(l),a=nA(l,a);else switch(a){case"svg":a=1;break;case"math":a=2;break;default:a=0}}ce(Be),xe(Be,a)}function xt(){ce(Be),ce(mt),ce(ge)}function Rt(a){a.memoizedState!==null&&xe(Re,a);var l=Be.current,d=nA(l,a.type);l!==d&&(xe(mt,a),xe(Be,d))}function hn(a){mt.current===a&&(ce(Be),ce(mt)),Re.current===a&&(ce(Re),wg._currentValue=ve)}var En,$t;function ze(a){if(En===void 0)try{throw Error()}catch(d){var l=d.stack.trim().match(/\n( *(at )?)/);En=l&&l[1]||"",$t=-1<d.stack.indexOf(`
    at`)?" (<anonymous>)":-1<d.stack.indexOf("@")?"@unknown:0:0":""}return`
`+En+a+$t}var Je=!1;function He(a,l){if(!a||Je)return"";Je=!0;var d=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var g={DetermineComponentFrameRoot:function(){try{if(l){var qe=function(){throw Error()};if(Object.defineProperty(qe.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(qe,[])}catch(Le){var Ae=Le}Reflect.construct(a,[],qe)}else{try{qe.call()}catch(Le){Ae=Le}a.call(qe.prototype)}}else{try{throw Error()}catch(Le){Ae=Le}(qe=a())&&typeof qe.catch=="function"&&qe.catch(function(){})}}catch(Le){if(Le&&Ae&&typeof Le.stack=="string")return[Le.stack,Ae.stack]}return[null,null]}};g.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var w=Object.getOwnPropertyDescriptor(g.DetermineComponentFrameRoot,"name");w&&w.configurable&&Object.defineProperty(g.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var T=g.DetermineComponentFrameRoot(),O=T[0],W=T[1];if(O&&W){var re=O.split(`
`),Me=W.split(`
`);for(w=g=0;g<re.length&&!re[g].includes("DetermineComponentFrameRoot");)g++;for(;w<Me.length&&!Me[w].includes("DetermineComponentFrameRoot");)w++;if(g===re.length||w===Me.length)for(g=re.length-1,w=Me.length-1;1<=g&&0<=w&&re[g]!==Me[w];)w--;for(;1<=g&&0<=w;g--,w--)if(re[g]!==Me[w]){if(g!==1||w!==1)do if(g--,w--,0>w||re[g]!==Me[w]){var ke=`
`+re[g].replace(" at new "," at ");return a.displayName&&ke.includes("<anonymous>")&&(ke=ke.replace("<anonymous>",a.displayName)),ke}while(1<=g&&0<=w);break}}}finally{Je=!1,Error.prepareStackTrace=d}return(d=a?a.displayName||a.name:"")?ze(d):""}function yt(a,l){switch(a.tag){case 26:case 27:case 5:return ze(a.type);case 16:return ze("Lazy");case 13:return a.child!==l&&l!==null?ze("Suspense Fallback"):ze("Suspense");case 19:return ze("SuspenseList");case 0:case 15:return He(a.type,!1);case 11:return He(a.type.render,!1);case 1:return He(a.type,!0);case 31:return ze("Activity");default:return""}}function ee(a){try{var l="",d=null;do l+=yt(a,d),d=a,a=a.return;while(a);return l}catch(g){return`
Error generating stack: `+g.message+`
`+g.stack}}var Ft=Object.prototype.hasOwnProperty,St=n.unstable_scheduleCallback,Vt=n.unstable_cancelCallback,ot=n.unstable_shouldYield,$=n.unstable_requestPaint,B=n.unstable_now,fe=n.unstable_getCurrentPriorityLevel,Ie=n.unstable_ImmediatePriority,Ge=n.unstable_UserBlockingPriority,De=n.unstable_NormalPriority,Tt=n.unstable_LowPriority,ht=n.unstable_IdlePriority,Lt=n.log,Yt=n.unstable_setDisableYieldValue,Xe=null,$e=null;function Ct(a){if(typeof Lt=="function"&&Yt(a),$e&&typeof $e.setStrictMode=="function")try{$e.setStrictMode(Xe,a)}catch{}}var wt=Math.clz32?Math.clz32:pe,st=Math.log,jt=Math.LN2;function pe(a){return a>>>=0,a===0?32:31-(st(a)/jt|0)|0}var Ce=256,et=262144,Et=4194304;function Qe(a){var l=a&42;if(l!==0)return l;switch(a&-a){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return a&261888;case 262144:case 524288:case 1048576:case 2097152:return a&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return a&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return a}}function Fe(a,l,d){var g=a.pendingLanes;if(g===0)return 0;var w=0,T=a.suspendedLanes,O=a.pingedLanes;a=a.warmLanes;var W=g&134217727;return W!==0?(g=W&~T,g!==0?w=Qe(g):(O&=W,O!==0?w=Qe(O):d||(d=W&~a,d!==0&&(w=Qe(d))))):(W=g&~T,W!==0?w=Qe(W):O!==0?w=Qe(O):d||(d=g&~a,d!==0&&(w=Qe(d)))),w===0?0:l!==0&&l!==w&&(l&T)===0&&(T=w&-w,d=l&-l,T>=d||T===32&&(d&4194048)!==0)?l:w}function gt(a,l){return(a.pendingLanes&~(a.suspendedLanes&~a.pingedLanes)&l)===0}function nn(a,l){switch(a){case 1:case 2:case 4:case 8:case 64:return l+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return l+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Dn(){var a=Et;return Et<<=1,(Et&62914560)===0&&(Et=4194304),a}function Ln(a){for(var l=[],d=0;31>d;d++)l.push(a);return l}function rr(a,l){a.pendingLanes|=l,l!==268435456&&(a.suspendedLanes=0,a.pingedLanes=0,a.warmLanes=0)}function Lr(a,l,d,g,w,T){var O=a.pendingLanes;a.pendingLanes=d,a.suspendedLanes=0,a.pingedLanes=0,a.warmLanes=0,a.expiredLanes&=d,a.entangledLanes&=d,a.errorRecoveryDisabledLanes&=d,a.shellSuspendCounter=0;var W=a.entanglements,re=a.expirationTimes,Me=a.hiddenUpdates;for(d=O&~d;0<d;){var ke=31-wt(d),qe=1<<ke;W[ke]=0,re[ke]=-1;var Ae=Me[ke];if(Ae!==null)for(Me[ke]=null,ke=0;ke<Ae.length;ke++){var Le=Ae[ke];Le!==null&&(Le.lane&=-536870913)}d&=~qe}g!==0&&Ra(a,g,0),T!==0&&w===0&&a.tag!==0&&(a.suspendedLanes|=T&~(O&~l))}function Ra(a,l,d){a.pendingLanes|=l,a.suspendedLanes&=~l;var g=31-wt(l);a.entangledLanes|=l,a.entanglements[g]=a.entanglements[g]|1073741824|d&261930}function Na(a,l){var d=a.entangledLanes|=l;for(a=a.entanglements;d;){var g=31-wt(d),w=1<<g;w&l|a[g]&l&&(a[g]|=l),d&=~w}}function Ws(a,l){var d=l&-l;return d=(d&42)!==0?1:Da(d),(d&(a.suspendedLanes|l))!==0?0:d}function Da(a){switch(a){case 2:a=1;break;case 8:a=4;break;case 32:a=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:a=128;break;case 268435456:a=134217728;break;default:a=0}return a}function jr(a){return a&=-a,2<a?8<a?(a&134217727)!==0?32:268435456:8:2}function Ms(){var a=Q.p;return a!==0?a:(a=window.event,a===void 0?32:EA(a.type))}function Qt(a,l){var d=Q.p;try{return Q.p=a,l()}finally{Q.p=d}}var Ur=Math.random().toString(36).slice(2),di="__reactFiber$"+Ur,z="__reactProps$"+Ur,q="__reactContainer$"+Ur,se="__reactEvents$"+Ur,be="__reactListeners$"+Ur,Oe="__reactHandles$"+Ur,Ue="__reactResources$"+Ur,tt="__reactMarker$"+Ur;function Ze(a){delete a[di],delete a[z],delete a[se],delete a[be],delete a[Oe]}function ft(a){var l=a[di];if(l)return l;for(var d=a.parentNode;d;){if(l=d[q]||d[di]){if(d=l.alternate,l.child!==null||d!==null&&d.child!==null)for(a=cA(a);a!==null;){if(d=a[di])return d;a=cA(a)}return l}a=d,d=a.parentNode}return null}function ct(a){if(a=a[di]||a[q]){var l=a.tag;if(l===5||l===6||l===13||l===31||l===26||l===27||l===3)return a}return null}function vt(a){var l=a.tag;if(l===5||l===26||l===27||l===6)return a.stateNode;throw Error(i(33))}function lt(a){var l=a[Ue];return l||(l=a[Ue]={hoistableStyles:new Map,hoistableScripts:new Map}),l}function G(a){a[tt]=!0}var ne=new Set,he={};function me(a,l){oe(a,l),oe(a+"Capture",l)}function oe(a,l){for(he[a]=l,a=0;a<l.length;a++)ne.add(l[a])}var Ve=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),nt={},je={};function bt(a){return Ft.call(je,a)?!0:Ft.call(nt,a)?!1:Ve.test(a)?je[a]=!0:(nt[a]=!0,!1)}function ut(a,l,d){if(bt(l))if(d===null)a.removeAttribute(l);else{switch(typeof d){case"undefined":case"function":case"symbol":a.removeAttribute(l);return;case"boolean":var g=l.toLowerCase().slice(0,5);if(g!=="data-"&&g!=="aria-"){a.removeAttribute(l);return}}a.setAttribute(l,""+d)}}function Ut(a,l,d){if(d===null)a.removeAttribute(l);else{switch(typeof d){case"undefined":case"function":case"symbol":case"boolean":a.removeAttribute(l);return}a.setAttribute(l,""+d)}}function pt(a,l,d,g){if(g===null)a.removeAttribute(d);else{switch(typeof g){case"undefined":case"function":case"symbol":case"boolean":a.removeAttribute(d);return}a.setAttributeNS(l,d,""+g)}}function Pt(a){switch(typeof a){case"bigint":case"boolean":case"number":case"string":case"undefined":return a;case"object":return a;default:return""}}function fn(a){var l=a.type;return(a=a.nodeName)&&a.toLowerCase()==="input"&&(l==="checkbox"||l==="radio")}function qn(a,l,d){var g=Object.getOwnPropertyDescriptor(a.constructor.prototype,l);if(!a.hasOwnProperty(l)&&typeof g<"u"&&typeof g.get=="function"&&typeof g.set=="function"){var w=g.get,T=g.set;return Object.defineProperty(a,l,{configurable:!0,get:function(){return w.call(this)},set:function(O){d=""+O,T.call(this,O)}}),Object.defineProperty(a,l,{enumerable:g.enumerable}),{getValue:function(){return d},setValue:function(O){d=""+O},stopTracking:function(){a._valueTracker=null,delete a[l]}}}}function yn(a){if(!a._valueTracker){var l=fn(a)?"checked":"value";a._valueTracker=qn(a,l,""+a[l])}}function Dt(a){if(!a)return!1;var l=a._valueTracker;if(!l)return!0;var d=l.getValue(),g="";return a&&(g=fn(a)?a.checked?"true":"false":a.value),a=g,a!==d?(l.setValue(a),!0):!1}function at(a){if(a=a||(typeof document<"u"?document:void 0),typeof a>"u")return null;try{return a.activeElement||a.body}catch{return a.body}}var Ht=/[\n"\\]/g;function Mt(a){return a.replace(Ht,function(l){return"\\"+l.charCodeAt(0).toString(16)+" "})}function Gn(a,l,d,g,w,T,O,W){a.name="",O!=null&&typeof O!="function"&&typeof O!="symbol"&&typeof O!="boolean"?a.type=O:a.removeAttribute("type"),l!=null?O==="number"?(l===0&&a.value===""||a.value!=l)&&(a.value=""+Pt(l)):a.value!==""+Pt(l)&&(a.value=""+Pt(l)):O!=="submit"&&O!=="reset"||a.removeAttribute("value"),l!=null?Tn(a,O,Pt(l)):d!=null?Tn(a,O,Pt(d)):g!=null&&a.removeAttribute("value"),w==null&&T!=null&&(a.defaultChecked=!!T),w!=null&&(a.checked=w&&typeof w!="function"&&typeof w!="symbol"),W!=null&&typeof W!="function"&&typeof W!="symbol"&&typeof W!="boolean"?a.name=""+Pt(W):a.removeAttribute("name")}function sr(a,l,d,g,w,T,O,W){if(T!=null&&typeof T!="function"&&typeof T!="symbol"&&typeof T!="boolean"&&(a.type=T),l!=null||d!=null){if(!(T!=="submit"&&T!=="reset"||l!=null)){yn(a);return}d=d!=null?""+Pt(d):"",l=l!=null?""+Pt(l):d,W||l===a.value||(a.value=l),a.defaultValue=l}g=g??w,g=typeof g!="function"&&typeof g!="symbol"&&!!g,a.checked=W?a.checked:!!g,a.defaultChecked=!!g,O!=null&&typeof O!="function"&&typeof O!="symbol"&&typeof O!="boolean"&&(a.name=O),yn(a)}function Tn(a,l,d){l==="number"&&at(a.ownerDocument)===a||a.defaultValue===""+d||(a.defaultValue=""+d)}function vi(a,l,d,g){if(a=a.options,l){l={};for(var w=0;w<d.length;w++)l["$"+d[w]]=!0;for(d=0;d<a.length;d++)w=l.hasOwnProperty("$"+a[d].value),a[d].selected!==w&&(a[d].selected=w),w&&g&&(a[d].defaultSelected=!0)}else{for(d=""+Pt(d),l=null,w=0;w<a.length;w++){if(a[w].value===d){a[w].selected=!0,g&&(a[w].defaultSelected=!0);return}l!==null||a[w].disabled||(l=a[w])}l!==null&&(l.selected=!0)}}function $n(a,l,d){if(l!=null&&(l=""+Pt(l),l!==a.value&&(a.value=l),d==null)){a.defaultValue!==l&&(a.defaultValue=l);return}a.defaultValue=d!=null?""+Pt(d):""}function ar(a,l,d,g){if(l==null){if(g!=null){if(d!=null)throw Error(i(92));if(de(g)){if(1<g.length)throw Error(i(93));g=g[0]}d=g}d==null&&(d=""),l=d}d=Pt(l),a.defaultValue=d,g=a.textContent,g===d&&g!==""&&g!==null&&(a.value=g),yn(a)}function $i(a,l){if(l){var d=a.firstChild;if(d&&d===a.lastChild&&d.nodeType===3){d.nodeValue=l;return}}a.textContent=l}var mr=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function gr(a,l,d){var g=l.indexOf("--")===0;d==null||typeof d=="boolean"||d===""?g?a.setProperty(l,""):l==="float"?a.cssFloat="":a[l]="":g?a.setProperty(l,d):typeof d!="number"||d===0||mr.has(l)?l==="float"?a.cssFloat=d:a[l]=(""+d).trim():a[l]=d+"px"}function Hl(a,l,d){if(l!=null&&typeof l!="object")throw Error(i(62));if(a=a.style,d!=null){for(var g in d)!d.hasOwnProperty(g)||l!=null&&l.hasOwnProperty(g)||(g.indexOf("--")===0?a.setProperty(g,""):g==="float"?a.cssFloat="":a[g]="");for(var w in l)g=l[w],l.hasOwnProperty(w)&&d[w]!==g&&gr(a,w,g)}else for(var T in l)l.hasOwnProperty(T)&&gr(a,T,l[T])}function qs(a){if(a.indexOf("-")===-1)return!1;switch(a){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var _v=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),im=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function th(a){return im.test(""+a)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":a}function mo(){}var Pf=null;function Of(a){return a=a.target||a.srcElement||window,a.correspondingUseElement&&(a=a.correspondingUseElement),a.nodeType===3?a.parentNode:a}var Gl=null,Jo=null;function rm(a){var l=ct(a);if(l&&(a=l.stateNode)){var d=a[z]||null;e:switch(a=l.stateNode,l.type){case"input":if(Gn(a,d.value,d.defaultValue,d.defaultValue,d.checked,d.defaultChecked,d.type,d.name),l=d.name,d.type==="radio"&&l!=null){for(d=a;d.parentNode;)d=d.parentNode;for(d=d.querySelectorAll('input[name="'+Mt(""+l)+'"][type="radio"]'),l=0;l<d.length;l++){var g=d[l];if(g!==a&&g.form===a.form){var w=g[z]||null;if(!w)throw Error(i(90));Gn(g,w.value,w.defaultValue,w.defaultValue,w.checked,w.defaultChecked,w.type,w.name)}}for(l=0;l<d.length;l++)g=d[l],g.form===a.form&&Dt(g)}break e;case"textarea":$n(a,d.value,d.defaultValue);break e;case"select":l=d.value,l!=null&&vi(a,!!d.multiple,l,!1)}}}var Lf=!1;function sm(a,l,d){if(Lf)return a(l,d);Lf=!0;try{var g=a(l);return g}finally{if(Lf=!1,(Gl!==null||Jo!==null)&&(_a(),Gl&&(l=Gl,a=Jo,Jo=Gl=null,rm(l),a)))for(l=0;l<a.length;l++)rm(a[l])}}function Uc(a,l){var d=a.stateNode;if(d===null)return null;var g=d[z]||null;if(g===null)return null;d=g[l];e:switch(l){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(g=!g.disabled)||(a=a.type,g=!(a==="button"||a==="input"||a==="select"||a==="textarea")),a=!g;break e;default:a=!1}if(a)return null;if(d&&typeof d!="function")throw Error(i(231,l,typeof d));return d}var Ia=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),am=!1;if(Ia)try{var kc={};Object.defineProperty(kc,"passive",{get:function(){am=!0}}),window.addEventListener("test",kc,kc),window.removeEventListener("test",kc,kc)}catch{am=!1}var Es=null,Uf=null,jl=null;function nh(){if(jl)return jl;var a,l=Uf,d=l.length,g,w="value"in Es?Es.value:Es.textContent,T=w.length;for(a=0;a<d&&l[a]===w[a];a++);var O=d-a;for(g=1;g<=O&&l[d-g]===w[T-g];g++);return jl=w.slice(a,1<g?1-g:void 0)}function ih(a){var l=a.keyCode;return"charCode"in a?(a=a.charCode,a===0&&l===13&&(a=13)):a=l,a===10&&(a=13),32<=a||a===13?a:0}function Bc(){return!0}function xv(){return!1}function Wr(a){function l(d,g,w,T,O){this._reactName=d,this._targetInst=w,this.type=g,this.nativeEvent=T,this.target=O,this.currentTarget=null;for(var W in a)a.hasOwnProperty(W)&&(d=a[W],this[W]=d?d(T):T[W]);return this.isDefaultPrevented=(T.defaultPrevented!=null?T.defaultPrevented:T.returnValue===!1)?Bc:xv,this.isPropagationStopped=xv,this}return v(l.prototype,{preventDefault:function(){this.defaultPrevented=!0;var d=this.nativeEvent;d&&(d.preventDefault?d.preventDefault():typeof d.returnValue!="unknown"&&(d.returnValue=!1),this.isDefaultPrevented=Bc)},stopPropagation:function(){var d=this.nativeEvent;d&&(d.stopPropagation?d.stopPropagation():typeof d.cancelBubble!="unknown"&&(d.cancelBubble=!0),this.isPropagationStopped=Bc)},persist:function(){},isPersistent:Bc}),l}var Qo={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(a){return a.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},rh=Wr(Qo),zc=v({},Qo,{view:0,detail:0}),bv=Wr(zc),sh,kf,Fc,Vc=v({},zc,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Vf,button:0,buttons:0,relatedTarget:function(a){return a.relatedTarget===void 0?a.fromElement===a.srcElement?a.toElement:a.fromElement:a.relatedTarget},movementX:function(a){return"movementX"in a?a.movementX:(a!==Fc&&(Fc&&a.type==="mousemove"?(sh=a.screenX-Fc.screenX,kf=a.screenY-Fc.screenY):kf=sh=0,Fc=a),sh)},movementY:function(a){return"movementY"in a?a.movementY:kf}}),om=Wr(Vc),Sv=v({},Vc,{dataTransfer:0}),wv=Wr(Sv),lm=v({},zc,{relatedTarget:0}),Bf=Wr(lm),Mv=v({},Qo,{animationName:0,elapsedTime:0,pseudoElement:0}),ES=Wr(Mv),TS=v({},Qo,{clipboardData:function(a){return"clipboardData"in a?a.clipboardData:window.clipboardData}}),Ev=Wr(TS),ah=v({},Qo,{data:0}),zf=Wr(ah),Ff={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Tv={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Av={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function cm(a){var l=this.nativeEvent;return l.getModifierState?l.getModifierState(a):(a=Av[a])?!!l[a]:!1}function Vf(){return cm}var Cv=v({},zc,{key:function(a){if(a.key){var l=Ff[a.key]||a.key;if(l!=="Unidentified")return l}return a.type==="keypress"?(a=ih(a),a===13?"Enter":String.fromCharCode(a)):a.type==="keydown"||a.type==="keyup"?Tv[a.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Vf,charCode:function(a){return a.type==="keypress"?ih(a):0},keyCode:function(a){return a.type==="keydown"||a.type==="keyup"?a.keyCode:0},which:function(a){return a.type==="keypress"?ih(a):a.type==="keydown"||a.type==="keyup"?a.keyCode:0}}),Wl=Wr(Cv),Hf=v({},Vc,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),um=Wr(Hf),hm=v({},zc,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Vf}),Rv=Wr(hm),Nv=v({},Qo,{propertyName:0,elapsedTime:0,pseudoElement:0}),AS=Wr(Nv),Tr=v({},Vc,{deltaX:function(a){return"deltaX"in a?a.deltaX:"wheelDeltaX"in a?-a.wheelDeltaX:0},deltaY:function(a){return"deltaY"in a?a.deltaY:"wheelDeltaY"in a?-a.wheelDeltaY:"wheelDelta"in a?-a.wheelDelta:0},deltaZ:0,deltaMode:0}),Dv=Wr(Tr),Iv=v({},Qo,{newState:0,oldState:0}),Pv=Wr(Iv),Ov=[9,13,27,32],ql=Ia&&"CompositionEvent"in window,Hc=null;Ia&&"documentMode"in document&&(Hc=document.documentMode);var Gf=Ia&&"TextEvent"in window&&!Hc,fm=Ia&&(!ql||Hc&&8<Hc&&11>=Hc),Lv=" ",oh=!1;function jf(a,l){switch(a){case"keyup":return Ov.indexOf(l.keyCode)!==-1;case"keydown":return l.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function dm(a){return a=a.detail,typeof a=="object"&&"data"in a?a.data:null}var Xl=!1;function Uv(a,l){switch(a){case"compositionend":return dm(l);case"keypress":return l.which!==32?null:(oh=!0,Lv);case"textInput":return a=l.data,a===Lv&&oh?null:a;default:return null}}function pm(a,l){if(Xl)return a==="compositionend"||!ql&&jf(a,l)?(a=nh(),jl=Uf=Es=null,Xl=!1,a):null;switch(a){case"paste":return null;case"keypress":if(!(l.ctrlKey||l.altKey||l.metaKey)||l.ctrlKey&&l.altKey){if(l.char&&1<l.char.length)return l.char;if(l.which)return String.fromCharCode(l.which)}return null;case"compositionend":return fm&&l.locale!=="ko"?null:l.data;default:return null}}var mm={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function gm(a){var l=a&&a.nodeName&&a.nodeName.toLowerCase();return l==="input"?!!mm[a.type]:l==="textarea"}function Wf(a,l,d,g){Gl?Jo?Jo.push(g):Jo=[g]:Gl=g,l=Vy(l,"onChange"),0<l.length&&(d=new rh("onChange","change",null,d,g),a.push({event:d,listeners:l}))}var el=null,$l=null;function kv(a){YT(a,0)}function Gc(a){var l=vt(a);if(Dt(l))return a}function vm(a,l){if(a==="change")return l}var Pa=!1;if(Ia){var lh;if(Ia){var ym="oninput"in document;if(!ym){var _m=document.createElement("div");_m.setAttribute("oninput","return;"),ym=typeof _m.oninput=="function"}lh=ym}else lh=!1;Pa=lh&&(!document.documentMode||9<document.documentMode)}function Xs(){el&&(el.detachEvent("onpropertychange",ch),$l=el=null)}function ch(a){if(a.propertyName==="value"&&Gc($l)){var l=[];Wf(l,$l,a,Of(a)),sm(kv,l)}}function Bv(a,l,d){a==="focusin"?(Xs(),el=l,$l=d,el.attachEvent("onpropertychange",ch)):a==="focusout"&&Xs()}function xm(a){if(a==="selectionchange"||a==="keyup"||a==="keydown")return Gc($l)}function zv(a,l){if(a==="click")return Gc(l)}function Fv(a,l){if(a==="input"||a==="change")return Gc(l)}function bm(a,l){return a===l&&(a!==0||1/a===1/l)||a!==a&&l!==l}var qr=typeof Object.is=="function"?Object.is:bm;function jc(a,l){if(qr(a,l))return!0;if(typeof a!="object"||a===null||typeof l!="object"||l===null)return!1;var d=Object.keys(a),g=Object.keys(l);if(d.length!==g.length)return!1;for(g=0;g<d.length;g++){var w=d[g];if(!Ft.call(l,w)||!qr(a[w],l[w]))return!1}return!0}function uh(a){for(;a&&a.firstChild;)a=a.firstChild;return a}function Wc(a,l){var d=uh(a);a=0;for(var g;d;){if(d.nodeType===3){if(g=a+d.textContent.length,a<=l&&g>=l)return{node:d,offset:l-a};a=g}e:{for(;d;){if(d.nextSibling){d=d.nextSibling;break e}d=d.parentNode}d=void 0}d=uh(d)}}function ai(a,l){return a&&l?a===l?!0:a&&a.nodeType===3?!1:l&&l.nodeType===3?ai(a,l.parentNode):"contains"in a?a.contains(l):a.compareDocumentPosition?!!(a.compareDocumentPosition(l)&16):!1:!1}function Vv(a){a=a!=null&&a.ownerDocument!=null&&a.ownerDocument.defaultView!=null?a.ownerDocument.defaultView:window;for(var l=at(a.document);l instanceof a.HTMLIFrameElement;){try{var d=typeof l.contentWindow.location.href=="string"}catch{d=!1}if(d)a=l.contentWindow;else break;l=at(a.document)}return l}function Sm(a){var l=a&&a.nodeName&&a.nodeName.toLowerCase();return l&&(l==="input"&&(a.type==="text"||a.type==="search"||a.type==="tel"||a.type==="url"||a.type==="password")||l==="textarea"||a.contentEditable==="true")}var Hv=Ia&&"documentMode"in document&&11>=document.documentMode,Oa=null,La=null,qc=null,qf=!1;function Xc(a,l,d){var g=d.window===d?d.document:d.nodeType===9?d:d.ownerDocument;qf||Oa==null||Oa!==at(g)||(g=Oa,"selectionStart"in g&&Sm(g)?g={start:g.selectionStart,end:g.selectionEnd}:(g=(g.ownerDocument&&g.ownerDocument.defaultView||window).getSelection(),g={anchorNode:g.anchorNode,anchorOffset:g.anchorOffset,focusNode:g.focusNode,focusOffset:g.focusOffset}),qc&&jc(qc,g)||(qc=g,g=Vy(La,"onSelect"),0<g.length&&(l=new rh("onSelect","select",null,l,d),a.push({event:l,listeners:g}),l.target=Oa)))}function kr(a,l){var d={};return d[a.toLowerCase()]=l.toLowerCase(),d["Webkit"+a]="webkit"+l,d["Moz"+a]="moz"+l,d}var Yl={animationend:kr("Animation","AnimationEnd"),animationiteration:kr("Animation","AnimationIteration"),animationstart:kr("Animation","AnimationStart"),transitionrun:kr("Transition","TransitionRun"),transitionstart:kr("Transition","TransitionStart"),transitioncancel:kr("Transition","TransitionCancel"),transitionend:kr("Transition","TransitionEnd")},hh={},wm={};Ia&&(wm=document.createElement("div").style,"AnimationEvent"in window||(delete Yl.animationend.animation,delete Yl.animationiteration.animation,delete Yl.animationstart.animation),"TransitionEvent"in window||delete Yl.transitionend.transition);function go(a){if(hh[a])return hh[a];if(!Yl[a])return a;var l=Yl[a],d;for(d in l)if(l.hasOwnProperty(d)&&d in wm)return hh[a]=l[d];return a}var Xf=go("animationend"),fh=go("animationiteration"),Mm=go("animationstart"),Gv=go("transitionrun"),CS=go("transitionstart"),jv=go("transitioncancel"),Em=go("transitionend"),$s=new Map,dh="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");dh.push("scrollEnd");function Ys(a,l){$s.set(a,l),me(l,[a])}var ph=typeof reportError=="function"?reportError:function(a){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var l=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof a=="object"&&a!==null&&typeof a.message=="string"?String(a.message):String(a),error:a});if(!window.dispatchEvent(l))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",a);return}console.error(a)},Zs=[],vo=0,vr=0;function mh(){for(var a=vo,l=vr=vo=0;l<a;){var d=Zs[l];Zs[l++]=null;var g=Zs[l];Zs[l++]=null;var w=Zs[l];Zs[l++]=null;var T=Zs[l];if(Zs[l++]=null,g!==null&&w!==null){var O=g.pending;O===null?w.next=w:(w.next=O.next,O.next=w),g.pending=w}T!==0&&tl(d,w,T)}}function yr(a,l,d,g){Zs[vo++]=a,Zs[vo++]=l,Zs[vo++]=d,Zs[vo++]=g,vr|=g,a.lanes|=g,a=a.alternate,a!==null&&(a.lanes|=g)}function $f(a,l,d,g){return yr(a,l,d,g),Ks(a)}function Xr(a,l){return yr(a,null,null,l),Ks(a)}function tl(a,l,d){a.lanes|=d;var g=a.alternate;g!==null&&(g.lanes|=d);for(var w=!1,T=a.return;T!==null;)T.childLanes|=d,g=T.alternate,g!==null&&(g.childLanes|=d),T.tag===22&&(a=T.stateNode,a===null||a._visibility&1||(w=!0)),a=T,T=T.return;return a.tag===3?(T=a.stateNode,w&&l!==null&&(w=31-wt(d),a=T.hiddenUpdates,g=a[w],g===null?a[w]=[l]:g.push(l),l.lane=d|536870912),T):null}function Ks(a){if(50<xl)throw xl=0,pc=null,Error(i(185));for(var l=a.return;l!==null;)a=l,l=a.return;return a.tag===3?a.stateNode:null}var nl={};function Tm(a,l,d,g){this.tag=a,this.key=d,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=l,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=g,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function wi(a,l,d,g){return new Tm(a,l,d,g)}function Yf(a){return a=a.prototype,!(!a||!a.isReactComponent)}function as(a,l){var d=a.alternate;return d===null?(d=wi(a.tag,l,a.key,a.mode),d.elementType=a.elementType,d.type=a.type,d.stateNode=a.stateNode,d.alternate=a,a.alternate=d):(d.pendingProps=l,d.type=a.type,d.flags=0,d.subtreeFlags=0,d.deletions=null),d.flags=a.flags&65011712,d.childLanes=a.childLanes,d.lanes=a.lanes,d.child=a.child,d.memoizedProps=a.memoizedProps,d.memoizedState=a.memoizedState,d.updateQueue=a.updateQueue,l=a.dependencies,d.dependencies=l===null?null:{lanes:l.lanes,firstContext:l.firstContext},d.sibling=a.sibling,d.index=a.index,d.ref=a.ref,d.refCleanup=a.refCleanup,d}function $c(a,l){a.flags&=65011714;var d=a.alternate;return d===null?(a.childLanes=0,a.lanes=l,a.child=null,a.subtreeFlags=0,a.memoizedProps=null,a.memoizedState=null,a.updateQueue=null,a.dependencies=null,a.stateNode=null):(a.childLanes=d.childLanes,a.lanes=d.lanes,a.child=d.child,a.subtreeFlags=0,a.deletions=null,a.memoizedProps=d.memoizedProps,a.memoizedState=d.memoizedState,a.updateQueue=d.updateQueue,a.type=d.type,l=d.dependencies,a.dependencies=l===null?null:{lanes:l.lanes,firstContext:l.firstContext}),a}function Ua(a,l,d,g,w,T){var O=0;if(g=a,typeof a=="function")Yf(a)&&(O=1);else if(typeof a=="string")O=_U(a,d,Be.current)?26:a==="html"||a==="head"||a==="body"?27:5;else e:switch(a){case P:return a=wi(31,d,l,w),a.elementType=P,a.lanes=T,a;case A:return il(d.children,w,T,l);case E:O=8,w|=24;break;case M:return a=wi(12,d,l,w|2),a.elementType=M,a.lanes=T,a;case U:return a=wi(13,d,l,w),a.elementType=U,a.lanes=T,a;case L:return a=wi(19,d,l,w),a.elementType=L,a.lanes=T,a;default:if(typeof a=="object"&&a!==null)switch(a.$$typeof){case N:O=10;break e;case C:O=9;break e;case I:O=11;break e;case F:O=14;break e;case H:O=16,g=null;break e}O=29,d=Error(i(130,a===null?"null":typeof a,"")),g=null}return l=wi(O,d,l,w),l.elementType=a,l.type=g,l.lanes=T,l}function il(a,l,d,g){return a=wi(7,a,g,l),a.lanes=d,a}function Zf(a,l,d){return a=wi(6,a,null,l),a.lanes=d,a}function Yc(a){var l=wi(18,null,null,0);return l.stateNode=a,l}function Kf(a,l,d){return l=wi(4,a.children!==null?a.children:[],a.key,l),l.lanes=d,l.stateNode={containerInfo:a.containerInfo,pendingChildren:null,implementation:a.implementation},l}var gh=new WeakMap;function Ts(a,l){if(typeof a=="object"&&a!==null){var d=gh.get(a);return d!==void 0?d:(l={value:a,source:l,stack:ee(l)},gh.set(a,l),l)}return{value:a,source:l,stack:ee(l)}}var rl=[],sl=0,Zc=null,Kc=0,os=[],yi=0,yo=null,Mi=1,ma="";function ka(a,l){rl[sl++]=Kc,rl[sl++]=Zc,Zc=a,Kc=l}function Wv(a,l,d){os[yi++]=Mi,os[yi++]=ma,os[yi++]=yo,yo=a;var g=Mi;a=ma;var w=32-wt(g)-1;g&=~(1<<w),d+=1;var T=32-wt(l)+w;if(30<T){var O=w-w%5;T=(g&(1<<O)-1).toString(32),g>>=O,w-=O,Mi=1<<32-wt(l)+w|d<<w|g,ma=T+a}else Mi=1<<T|d<<w|g,ma=a}function Ba(a){a.return!==null&&(ka(a,1),Wv(a,1,0))}function Jf(a){for(;a===Zc;)Zc=rl[--sl],rl[sl]=null,Kc=rl[--sl],rl[sl]=null;for(;a===yo;)yo=os[--yi],os[yi]=null,ma=os[--yi],os[yi]=null,Mi=os[--yi],os[yi]=null}function Qf(a,l){os[yi++]=Mi,os[yi++]=ma,os[yi++]=yo,Mi=l.id,ma=l.overflow,yo=a}var Ii=null,oi=null,Un=!1,_o=null,As=!1,Jc=Error(i(519));function za(a){var l=Error(i(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw Fa(Ts(l,a)),Jc}function qv(a){var l=a.stateNode,d=a.type,g=a.memoizedProps;switch(l[di]=a,l[z]=g,d){case"dialog":zn("cancel",l),zn("close",l);break;case"iframe":case"object":case"embed":zn("load",l);break;case"video":case"audio":for(d=0;d<ua.length;d++)zn(ua[d],l);break;case"source":zn("error",l);break;case"img":case"image":case"link":zn("error",l),zn("load",l);break;case"details":zn("toggle",l);break;case"input":zn("invalid",l),sr(l,g.value,g.defaultValue,g.checked,g.defaultChecked,g.type,g.name,!0);break;case"select":zn("invalid",l);break;case"textarea":zn("invalid",l),ar(l,g.value,g.defaultValue,g.children)}d=g.children,typeof d!="string"&&typeof d!="number"&&typeof d!="bigint"||l.textContent===""+d||g.suppressHydrationWarning===!0||QT(l.textContent,d)?(g.popover!=null&&(zn("beforetoggle",l),zn("toggle",l)),g.onScroll!=null&&zn("scroll",l),g.onScrollEnd!=null&&zn("scrollend",l),g.onClick!=null&&(l.onclick=mo),l=!0):l=!1,l||za(a,!0)}function Xv(a){for(Ii=a.return;Ii;)switch(Ii.tag){case 5:case 31:case 13:As=!1;return;case 27:case 3:As=!0;return;default:Ii=Ii.return}}function Qc(a){if(a!==Ii)return!1;if(!Un)return Xv(a),Un=!0,!1;var l=a.tag,d;if((d=l!==3&&l!==27)&&((d=l===5)&&(d=a.type,d=!(d!=="form"&&d!=="button")||jS(a.type,a.memoizedProps)),d=!d),d&&oi&&za(a),Xv(a),l===13){if(a=a.memoizedState,a=a!==null?a.dehydrated:null,!a)throw Error(i(317));oi=lA(a)}else if(l===31){if(a=a.memoizedState,a=a!==null?a.dehydrated:null,!a)throw Error(i(317));oi=lA(a)}else l===27?(l=oi,_u(a.type)?(a=YS,YS=null,oi=a):oi=l):oi=Ii?eo(a.stateNode.nextSibling):null;return!0}function al(){oi=Ii=null,Un=!1}function ed(){var a=_o;return a!==null&&(Oi===null?Oi=a:Oi.push.apply(Oi,a),_o=null),a}function Fa(a){_o===null?_o=[a]:_o.push(a)}var eu=X(null),ol=null,Va=null;function xo(a,l,d){xe(eu,l._currentValue),l._currentValue=d}function Ha(a){a._currentValue=eu.current,ce(eu)}function td(a,l,d){for(;a!==null;){var g=a.alternate;if((a.childLanes&l)!==l?(a.childLanes|=l,g!==null&&(g.childLanes|=l)):g!==null&&(g.childLanes&l)!==l&&(g.childLanes|=l),a===d)break;a=a.return}}function nd(a,l,d,g){var w=a.child;for(w!==null&&(w.return=a);w!==null;){var T=w.dependencies;if(T!==null){var O=w.child;T=T.firstContext;e:for(;T!==null;){var W=T;T=w;for(var re=0;re<l.length;re++)if(W.context===l[re]){T.lanes|=d,W=T.alternate,W!==null&&(W.lanes|=d),td(T.return,d,a),g||(O=null);break e}T=W.next}}else if(w.tag===18){if(O=w.return,O===null)throw Error(i(341));O.lanes|=d,T=O.alternate,T!==null&&(T.lanes|=d),td(O,d,a),O=null}else O=w.child;if(O!==null)O.return=w;else for(O=w;O!==null;){if(O===a){O=null;break}if(w=O.sibling,w!==null){w.return=O.return,O=w;break}O=O.return}w=O}}function Ga(a,l,d,g){a=null;for(var w=l,T=!1;w!==null;){if(!T){if((w.flags&524288)!==0)T=!0;else if((w.flags&262144)!==0)break}if(w.tag===10){var O=w.alternate;if(O===null)throw Error(i(387));if(O=O.memoizedProps,O!==null){var W=w.type;qr(w.pendingProps.value,O.value)||(a!==null?a.push(W):a=[W])}}else if(w===Re.current){if(O=w.alternate,O===null)throw Error(i(387));O.memoizedState.memoizedState!==w.memoizedState.memoizedState&&(a!==null?a.push(wg):a=[wg])}w=w.return}a!==null&&nd(l,a,d,g),l.flags|=262144}function vh(a){for(a=a.firstContext;a!==null;){if(!qr(a.context._currentValue,a.memoizedValue))return!0;a=a.next}return!1}function ll(a){ol=a,Va=null,a=a.dependencies,a!==null&&(a.firstContext=null)}function sn(a){return $v(ol,a)}function tu(a,l){return ol===null&&ll(a),$v(a,l)}function $v(a,l){var d=l._currentValue;if(l={context:l,memoizedValue:d,next:null},Va===null){if(a===null)throw Error(i(308));Va=l,a.dependencies={lanes:0,firstContext:l},a.flags|=524288}else Va=Va.next=l;return d}var Yv=typeof AbortController<"u"?AbortController:function(){var a=[],l=this.signal={aborted:!1,addEventListener:function(d,g){a.push(g)}};this.abort=function(){l.aborted=!0,a.forEach(function(d){return d()})}},RS=n.unstable_scheduleCallback,NS=n.unstable_NormalPriority,Yi={$$typeof:N,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Am(){return{controller:new Yv,data:new Map,refCount:0}}function Zl(a){a.refCount--,a.refCount===0&&RS(NS,function(){a.controller.abort()})}var Cs=null,id=0,bo=0,Js=null;function Cm(a,l){if(Cs===null){var d=Cs=[];id=0,bo=Ne(),Js={status:"pending",value:void 0,then:function(g){d.push(g)}}}return id++,l.then(Rm,Rm),l}function Rm(){if(--id===0&&Cs!==null){Js!==null&&(Js.status="fulfilled");var a=Cs;Cs=null,bo=0,Js=null;for(var l=0;l<a.length;l++)(0,a[l])()}}function Nm(a,l){var d=[],g={status:"pending",value:null,reason:null,then:function(w){d.push(w)}};return a.then(function(){g.status="fulfilled",g.value=l;for(var w=0;w<d.length;w++)(0,d[w])(l)},function(w){for(g.status="rejected",g.reason=w,w=0;w<d.length;w++)(0,d[w])(void 0)}),g}var Zv=Z.S;Z.S=function(a,l){vg=B(),typeof l=="object"&&l!==null&&typeof l.then=="function"&&Cm(a,l),Zv!==null&&Zv(a,l)};var cl=X(null);function rd(){var a=cl.current;return a!==null?a:cn.pooledCache}function yh(a,l){l===null?xe(cl,cl.current):xe(cl,l.pool)}function Dm(){var a=rd();return a===null?null:{parent:Yi._currentValue,pool:a}}var Kl=Error(i(460)),_h=Error(i(474)),bn=Error(i(542)),sd={then:function(){}};function ls(a){return a=a.status,a==="fulfilled"||a==="rejected"}function ad(a,l,d){switch(d=a[d],d===void 0?a.push(l):d!==l&&(l.then(mo,mo),l=d),l.status){case"fulfilled":return l.value;case"rejected":throw a=l.reason,ec(a),a;default:if(typeof l.status=="string")l.then(mo,mo);else{if(a=cn,a!==null&&100<a.shellSuspendCounter)throw Error(i(482));a=l,a.status="pending",a.then(function(g){if(l.status==="pending"){var w=l;w.status="fulfilled",w.value=g}},function(g){if(l.status==="pending"){var w=l;w.status="rejected",w.reason=g}})}switch(l.status){case"fulfilled":return l.value;case"rejected":throw a=l.reason,ec(a),a}throw ja=l,Kl}}function Jl(a){try{var l=a._init;return l(a._payload)}catch(d){throw d!==null&&typeof d=="object"&&typeof d.then=="function"?(ja=d,Kl):d}}var ja=null;function Ql(){if(ja===null)throw Error(i(459));var a=ja;return ja=null,a}function ec(a){if(a===Kl||a===bn)throw Error(i(483))}var tc=null,nc=0;function xh(a){var l=nc;return nc+=1,tc===null&&(tc=[]),ad(tc,a,l)}function Qs(a,l){l=l.props.ref,a.ref=l!==void 0?l:null}function nu(a,l){throw l.$$typeof===_?Error(i(525)):(a=Object.prototype.toString.call(l),Error(i(31,a==="[object Object]"?"object with keys {"+Object.keys(l).join(", ")+"}":a)))}function od(a){function l(ye,ue){if(a){var Se=ye.deletions;Se===null?(ye.deletions=[ue],ye.flags|=16):Se.push(ue)}}function d(ye,ue){if(!a)return null;for(;ue!==null;)l(ye,ue),ue=ue.sibling;return null}function g(ye){for(var ue=new Map;ye!==null;)ye.key!==null?ue.set(ye.key,ye):ue.set(ye.index,ye),ye=ye.sibling;return ue}function w(ye,ue){return ye=as(ye,ue),ye.index=0,ye.sibling=null,ye}function T(ye,ue,Se){return ye.index=Se,a?(Se=ye.alternate,Se!==null?(Se=Se.index,Se<ue?(ye.flags|=67108866,ue):Se):(ye.flags|=67108866,ue)):(ye.flags|=1048576,ue)}function O(ye){return a&&ye.alternate===null&&(ye.flags|=67108866),ye}function W(ye,ue,Se,We){return ue===null||ue.tag!==6?(ue=Zf(Se,ye.mode,We),ue.return=ye,ue):(ue=w(ue,Se),ue.return=ye,ue)}function re(ye,ue,Se,We){var Kt=Se.type;return Kt===A?ke(ye,ue,Se.props.children,We,Se.key):ue!==null&&(ue.elementType===Kt||typeof Kt=="object"&&Kt!==null&&Kt.$$typeof===H&&Jl(Kt)===ue.type)?(ue=w(ue,Se.props),Qs(ue,Se),ue.return=ye,ue):(ue=Ua(Se.type,Se.key,Se.props,null,ye.mode,We),Qs(ue,Se),ue.return=ye,ue)}function Me(ye,ue,Se,We){return ue===null||ue.tag!==4||ue.stateNode.containerInfo!==Se.containerInfo||ue.stateNode.implementation!==Se.implementation?(ue=Kf(Se,ye.mode,We),ue.return=ye,ue):(ue=w(ue,Se.children||[]),ue.return=ye,ue)}function ke(ye,ue,Se,We,Kt){return ue===null||ue.tag!==7?(ue=il(Se,ye.mode,We,Kt),ue.return=ye,ue):(ue=w(ue,Se),ue.return=ye,ue)}function qe(ye,ue,Se){if(typeof ue=="string"&&ue!==""||typeof ue=="number"||typeof ue=="bigint")return ue=Zf(""+ue,ye.mode,Se),ue.return=ye,ue;if(typeof ue=="object"&&ue!==null){switch(ue.$$typeof){case x:return Se=Ua(ue.type,ue.key,ue.props,null,ye.mode,Se),Qs(Se,ue),Se.return=ye,Se;case S:return ue=Kf(ue,ye.mode,Se),ue.return=ye,ue;case H:return ue=Jl(ue),qe(ye,ue,Se)}if(de(ue)||ie(ue))return ue=il(ue,ye.mode,Se,null),ue.return=ye,ue;if(typeof ue.then=="function")return qe(ye,xh(ue),Se);if(ue.$$typeof===N)return qe(ye,tu(ye,ue),Se);nu(ye,ue)}return null}function Ae(ye,ue,Se,We){var Kt=ue!==null?ue.key:null;if(typeof Se=="string"&&Se!==""||typeof Se=="number"||typeof Se=="bigint")return Kt!==null?null:W(ye,ue,""+Se,We);if(typeof Se=="object"&&Se!==null){switch(Se.$$typeof){case x:return Se.key===Kt?re(ye,ue,Se,We):null;case S:return Se.key===Kt?Me(ye,ue,Se,We):null;case H:return Se=Jl(Se),Ae(ye,ue,Se,We)}if(de(Se)||ie(Se))return Kt!==null?null:ke(ye,ue,Se,We,null);if(typeof Se.then=="function")return Ae(ye,ue,xh(Se),We);if(Se.$$typeof===N)return Ae(ye,ue,tu(ye,Se),We);nu(ye,Se)}return null}function Le(ye,ue,Se,We,Kt){if(typeof We=="string"&&We!==""||typeof We=="number"||typeof We=="bigint")return ye=ye.get(Se)||null,W(ue,ye,""+We,Kt);if(typeof We=="object"&&We!==null){switch(We.$$typeof){case x:return ye=ye.get(We.key===null?Se:We.key)||null,re(ue,ye,We,Kt);case S:return ye=ye.get(We.key===null?Se:We.key)||null,Me(ue,ye,We,Kt);case H:return We=Jl(We),Le(ye,ue,Se,We,Kt)}if(de(We)||ie(We))return ye=ye.get(Se)||null,ke(ue,ye,We,Kt,null);if(typeof We.then=="function")return Le(ye,ue,Se,xh(We),Kt);if(We.$$typeof===N)return Le(ye,ue,Se,tu(ue,We),Kt);nu(ue,We)}return null}function Bt(ye,ue,Se,We){for(var Kt=null,Kn=null,Gt=ue,An=ue=0,Vn=null;Gt!==null&&An<Se.length;An++){Gt.index>An?(Vn=Gt,Gt=null):Vn=Gt.sibling;var Jn=Ae(ye,Gt,Se[An],We);if(Jn===null){Gt===null&&(Gt=Vn);break}a&&Gt&&Jn.alternate===null&&l(ye,Gt),ue=T(Jn,ue,An),Kn===null?Kt=Jn:Kn.sibling=Jn,Kn=Jn,Gt=Vn}if(An===Se.length)return d(ye,Gt),Un&&ka(ye,An),Kt;if(Gt===null){for(;An<Se.length;An++)Gt=qe(ye,Se[An],We),Gt!==null&&(ue=T(Gt,ue,An),Kn===null?Kt=Gt:Kn.sibling=Gt,Kn=Gt);return Un&&ka(ye,An),Kt}for(Gt=g(Gt);An<Se.length;An++)Vn=Le(Gt,ye,An,Se[An],We),Vn!==null&&(a&&Vn.alternate!==null&&Gt.delete(Vn.key===null?An:Vn.key),ue=T(Vn,ue,An),Kn===null?Kt=Vn:Kn.sibling=Vn,Kn=Vn);return a&&Gt.forEach(function(Mu){return l(ye,Mu)}),Un&&ka(ye,An),Kt}function rn(ye,ue,Se,We){if(Se==null)throw Error(i(151));for(var Kt=null,Kn=null,Gt=ue,An=ue=0,Vn=null,Jn=Se.next();Gt!==null&&!Jn.done;An++,Jn=Se.next()){Gt.index>An?(Vn=Gt,Gt=null):Vn=Gt.sibling;var Mu=Ae(ye,Gt,Jn.value,We);if(Mu===null){Gt===null&&(Gt=Vn);break}a&&Gt&&Mu.alternate===null&&l(ye,Gt),ue=T(Mu,ue,An),Kn===null?Kt=Mu:Kn.sibling=Mu,Kn=Mu,Gt=Vn}if(Jn.done)return d(ye,Gt),Un&&ka(ye,An),Kt;if(Gt===null){for(;!Jn.done;An++,Jn=Se.next())Jn=qe(ye,Jn.value,We),Jn!==null&&(ue=T(Jn,ue,An),Kn===null?Kt=Jn:Kn.sibling=Jn,Kn=Jn);return Un&&ka(ye,An),Kt}for(Gt=g(Gt);!Jn.done;An++,Jn=Se.next())Jn=Le(Gt,ye,An,Jn.value,We),Jn!==null&&(a&&Jn.alternate!==null&&Gt.delete(Jn.key===null?An:Jn.key),ue=T(Jn,ue,An),Kn===null?Kt=Jn:Kn.sibling=Jn,Kn=Jn);return a&&Gt.forEach(function(NU){return l(ye,NU)}),Un&&ka(ye,An),Kt}function ui(ye,ue,Se,We){if(typeof Se=="object"&&Se!==null&&Se.type===A&&Se.key===null&&(Se=Se.props.children),typeof Se=="object"&&Se!==null){switch(Se.$$typeof){case x:e:{for(var Kt=Se.key;ue!==null;){if(ue.key===Kt){if(Kt=Se.type,Kt===A){if(ue.tag===7){d(ye,ue.sibling),We=w(ue,Se.props.children),We.return=ye,ye=We;break e}}else if(ue.elementType===Kt||typeof Kt=="object"&&Kt!==null&&Kt.$$typeof===H&&Jl(Kt)===ue.type){d(ye,ue.sibling),We=w(ue,Se.props),Qs(We,Se),We.return=ye,ye=We;break e}d(ye,ue);break}else l(ye,ue);ue=ue.sibling}Se.type===A?(We=il(Se.props.children,ye.mode,We,Se.key),We.return=ye,ye=We):(We=Ua(Se.type,Se.key,Se.props,null,ye.mode,We),Qs(We,Se),We.return=ye,ye=We)}return O(ye);case S:e:{for(Kt=Se.key;ue!==null;){if(ue.key===Kt)if(ue.tag===4&&ue.stateNode.containerInfo===Se.containerInfo&&ue.stateNode.implementation===Se.implementation){d(ye,ue.sibling),We=w(ue,Se.children||[]),We.return=ye,ye=We;break e}else{d(ye,ue);break}else l(ye,ue);ue=ue.sibling}We=Kf(Se,ye.mode,We),We.return=ye,ye=We}return O(ye);case H:return Se=Jl(Se),ui(ye,ue,Se,We)}if(de(Se))return Bt(ye,ue,Se,We);if(ie(Se)){if(Kt=ie(Se),typeof Kt!="function")throw Error(i(150));return Se=Kt.call(Se),rn(ye,ue,Se,We)}if(typeof Se.then=="function")return ui(ye,ue,xh(Se),We);if(Se.$$typeof===N)return ui(ye,ue,tu(ye,Se),We);nu(ye,Se)}return typeof Se=="string"&&Se!==""||typeof Se=="number"||typeof Se=="bigint"?(Se=""+Se,ue!==null&&ue.tag===6?(d(ye,ue.sibling),We=w(ue,Se),We.return=ye,ye=We):(d(ye,ue),We=Zf(Se,ye.mode,We),We.return=ye,ye=We),O(ye)):d(ye,ue)}return function(ye,ue,Se,We){try{nc=0;var Kt=ui(ye,ue,Se,We);return tc=null,Kt}catch(Gt){if(Gt===Kl||Gt===bn)throw Gt;var Kn=wi(29,Gt,null,ye.mode);return Kn.lanes=We,Kn.return=ye,Kn}}}var So=od(!0),ld=od(!1),$r=!1;function bh(a){a.updateQueue={baseState:a.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Im(a,l){a=a.updateQueue,l.updateQueue===a&&(l.updateQueue={baseState:a.baseState,firstBaseUpdate:a.firstBaseUpdate,lastBaseUpdate:a.lastBaseUpdate,shared:a.shared,callbacks:null})}function wo(a){return{lane:a,tag:0,payload:null,callback:null,next:null}}function ul(a,l,d){var g=a.updateQueue;if(g===null)return null;if(g=g.shared,(Wt&2)!==0){var w=g.pending;return w===null?l.next=l:(l.next=w.next,w.next=l),g.pending=l,l=Ks(a),tl(a,null,d),l}return yr(a,g,l,d),Ks(a)}function hl(a,l,d){if(l=l.updateQueue,l!==null&&(l=l.shared,(d&4194048)!==0)){var g=l.lanes;g&=a.pendingLanes,d|=g,l.lanes=d,Na(a,d)}}function Zt(a,l){var d=a.updateQueue,g=a.alternate;if(g!==null&&(g=g.updateQueue,d===g)){var w=null,T=null;if(d=d.firstBaseUpdate,d!==null){do{var O={lane:d.lane,tag:d.tag,payload:d.payload,callback:null,next:null};T===null?w=T=O:T=T.next=O,d=d.next}while(d!==null);T===null?w=T=l:T=T.next=l}else w=T=l;d={baseState:g.baseState,firstBaseUpdate:w,lastBaseUpdate:T,shared:g.shared,callbacks:g.callbacks},a.updateQueue=d;return}a=d.lastBaseUpdate,a===null?d.firstBaseUpdate=l:a.next=l,d.lastBaseUpdate=l}var Pm=!1;function Sh(){if(Pm){var a=Js;if(a!==null)throw a}}function iu(a,l,d,g){Pm=!1;var w=a.updateQueue;$r=!1;var T=w.firstBaseUpdate,O=w.lastBaseUpdate,W=w.shared.pending;if(W!==null){w.shared.pending=null;var re=W,Me=re.next;re.next=null,O===null?T=Me:O.next=Me,O=re;var ke=a.alternate;ke!==null&&(ke=ke.updateQueue,W=ke.lastBaseUpdate,W!==O&&(W===null?ke.firstBaseUpdate=Me:W.next=Me,ke.lastBaseUpdate=re))}if(T!==null){var qe=w.baseState;O=0,ke=Me=re=null,W=T;do{var Ae=W.lane&-536870913,Le=Ae!==W.lane;if(Le?(_n&Ae)===Ae:(g&Ae)===Ae){Ae!==0&&Ae===bo&&(Pm=!0),ke!==null&&(ke=ke.next={lane:0,tag:W.tag,payload:W.payload,callback:null,next:null});e:{var Bt=a,rn=W;Ae=l;var ui=d;switch(rn.tag){case 1:if(Bt=rn.payload,typeof Bt=="function"){qe=Bt.call(ui,qe,Ae);break e}qe=Bt;break e;case 3:Bt.flags=Bt.flags&-65537|128;case 0:if(Bt=rn.payload,Ae=typeof Bt=="function"?Bt.call(ui,qe,Ae):Bt,Ae==null)break e;qe=v({},qe,Ae);break e;case 2:$r=!0}}Ae=W.callback,Ae!==null&&(a.flags|=64,Le&&(a.flags|=8192),Le=w.callbacks,Le===null?w.callbacks=[Ae]:Le.push(Ae))}else Le={lane:Ae,tag:W.tag,payload:W.payload,callback:W.callback,next:null},ke===null?(Me=ke=Le,re=qe):ke=ke.next=Le,O|=Ae;if(W=W.next,W===null){if(W=w.shared.pending,W===null)break;Le=W,W=Le.next,Le.next=null,w.lastBaseUpdate=Le,w.shared.pending=null}}while(!0);ke===null&&(re=qe),w.baseState=re,w.firstBaseUpdate=Me,w.lastBaseUpdate=ke,T===null&&(w.shared.lanes=0),Ka|=O,a.lanes=O,a.memoizedState=qe}}function ru(a,l){if(typeof a!="function")throw Error(i(191,a));a.call(l)}function Kv(a,l){var d=a.callbacks;if(d!==null)for(a.callbacks=null,a=0;a<d.length;a++)ru(d[a],l)}var su=X(null),cd=X(0);function Jv(a,l){a=Is,xe(cd,a),xe(su,l),Is=a|l.baseLanes}function Om(){xe(cd,Is),xe(su,su.current)}function wh(){Is=cd.current,ce(su),ce(cd)}var cs=X(null),Yr=null;function Mo(a){var l=a.alternate;xe(kn,kn.current&1),xe(cs,a),Yr===null&&(l===null||su.current!==null||l.memoizedState!==null)&&(Yr=a)}function Lm(a){xe(kn,kn.current),xe(cs,a),Yr===null&&(Yr=a)}function Qv(a){a.tag===22?(xe(kn,kn.current),xe(cs,a),Yr===null&&(Yr=a)):us()}function us(){xe(kn,kn.current),xe(cs,cs.current)}function Bi(a){ce(cs),Yr===a&&(Yr=null),ce(kn)}var kn=X(0);function Rs(a){for(var l=a;l!==null;){if(l.tag===13){var d=l.memoizedState;if(d!==null&&(d=d.dehydrated,d===null||XS(d)||$S(d)))return l}else if(l.tag===19&&(l.memoizedProps.revealOrder==="forwards"||l.memoizedProps.revealOrder==="backwards"||l.memoizedProps.revealOrder==="unstable_legacy-backwards"||l.memoizedProps.revealOrder==="together")){if((l.flags&128)!==0)return l}else if(l.child!==null){l.child.return=l,l=l.child;continue}if(l===a)break;for(;l.sibling===null;){if(l.return===null||l.return===a)return null;l=l.return}l.sibling.return=l.return,l=l.sibling}return null}var _i=0,pn=null,ni=null,In=null,ea=!1,au=!1,ic=!1,ud=0,Mh=0,ou=null,Um=0;function Ei(){throw Error(i(321))}function km(a,l){if(l===null)return!1;for(var d=0;d<l.length&&d<a.length;d++)if(!qr(a[d],l[d]))return!1;return!0}function hd(a,l,d,g,w,T){return _i=T,pn=l,l.memoizedState=null,l.updateQueue=null,l.lanes=0,Z.H=a===null||a.memoizedState===null?Dy:ig,ic=!1,T=d(g,w),ic=!1,au&&(T=rc(l,d,g,w)),ey(a),T}function ey(a){Z.H=lu;var l=ni!==null&&ni.next!==null;if(_i=0,In=ni=pn=null,ea=!1,Mh=0,ou=null,l)throw Error(i(300));a===null||Zi||(a=a.dependencies,a!==null&&vh(a)&&(Zi=!0))}function rc(a,l,d,g){pn=a;var w=0;do{if(au&&(ou=null),Mh=0,au=!1,25<=w)throw Error(i(301));if(w+=1,In=ni=null,a.updateQueue!=null){var T=a.updateQueue;T.lastEffect=null,T.events=null,T.stores=null,T.memoCache!=null&&(T.memoCache.index=0)}Z.H=ta,T=l(d,g)}while(au);return T}function sc(){var a=Z.H,l=a.useState()[0];return l=typeof l.then=="function"?Eh(l):l,a=a.useState()[0],(ni!==null?ni.memoizedState:null)!==a&&(pn.flags|=1024),l}function Bm(){var a=ud!==0;return ud=0,a}function zm(a,l,d){l.updateQueue=a.updateQueue,l.flags&=-2053,a.lanes&=~d}function Fm(a){if(ea){for(a=a.memoizedState;a!==null;){var l=a.queue;l!==null&&(l.pending=null),a=a.next}ea=!1}_i=0,In=ni=pn=null,au=!1,Mh=ud=0,ou=null}function or(){var a={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return In===null?pn.memoizedState=In=a:In=In.next=a,In}function zi(){if(ni===null){var a=pn.alternate;a=a!==null?a.memoizedState:null}else a=ni.next;var l=In===null?pn.memoizedState:In.next;if(l!==null)In=l,ni=a;else{if(a===null)throw pn.alternate===null?Error(i(467)):Error(i(310));ni=a,a={memoizedState:ni.memoizedState,baseState:ni.baseState,baseQueue:ni.baseQueue,queue:ni.queue,next:null},In===null?pn.memoizedState=In=a:In=In.next=a}return In}function fd(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function Eh(a){var l=Mh;return Mh+=1,ou===null&&(ou=[]),a=ad(ou,a,l),l=pn,(In===null?l.memoizedState:In.next)===null&&(l=l.alternate,Z.H=l===null||l.memoizedState===null?Dy:ig),a}function fl(a){if(a!==null&&typeof a=="object"){if(typeof a.then=="function")return Eh(a);if(a.$$typeof===N)return sn(a)}throw Error(i(438,String(a)))}function Vm(a){var l=null,d=pn.updateQueue;if(d!==null&&(l=d.memoCache),l==null){var g=pn.alternate;g!==null&&(g=g.updateQueue,g!==null&&(g=g.memoCache,g!=null&&(l={data:g.data.map(function(w){return w.slice()}),index:0})))}if(l==null&&(l={data:[],index:0}),d===null&&(d=fd(),pn.updateQueue=d),d.memoCache=l,d=l.data[l.index],d===void 0)for(d=l.data[l.index]=Array(a),g=0;g<a;g++)d[g]=k;return l.index++,d}function Eo(a,l){return typeof l=="function"?l(a):l}function dd(a){var l=zi();return Hm(l,ni,a)}function Hm(a,l,d){var g=a.queue;if(g===null)throw Error(i(311));g.lastRenderedReducer=d;var w=a.baseQueue,T=g.pending;if(T!==null){if(w!==null){var O=w.next;w.next=T.next,T.next=O}l.baseQueue=w=T,g.pending=null}if(T=a.baseState,w===null)a.memoizedState=T;else{l=w.next;var W=O=null,re=null,Me=l,ke=!1;do{var qe=Me.lane&-536870913;if(qe!==Me.lane?(_n&qe)===qe:(_i&qe)===qe){var Ae=Me.revertLane;if(Ae===0)re!==null&&(re=re.next={lane:0,revertLane:0,gesture:null,action:Me.action,hasEagerState:Me.hasEagerState,eagerState:Me.eagerState,next:null}),qe===bo&&(ke=!0);else if((_i&Ae)===Ae){Me=Me.next,Ae===bo&&(ke=!0);continue}else qe={lane:0,revertLane:Me.revertLane,gesture:null,action:Me.action,hasEagerState:Me.hasEagerState,eagerState:Me.eagerState,next:null},re===null?(W=re=qe,O=T):re=re.next=qe,pn.lanes|=Ae,Ka|=Ae;qe=Me.action,ic&&d(T,qe),T=Me.hasEagerState?Me.eagerState:d(T,qe)}else Ae={lane:qe,revertLane:Me.revertLane,gesture:Me.gesture,action:Me.action,hasEagerState:Me.hasEagerState,eagerState:Me.eagerState,next:null},re===null?(W=re=Ae,O=T):re=re.next=Ae,pn.lanes|=qe,Ka|=qe;Me=Me.next}while(Me!==null&&Me!==l);if(re===null?O=T:re.next=W,!qr(T,a.memoizedState)&&(Zi=!0,ke&&(d=Js,d!==null)))throw d;a.memoizedState=T,a.baseState=O,a.baseQueue=re,g.lastRenderedState=T}return w===null&&(g.lanes=0),[a.memoizedState,g.dispatch]}function Gm(a){var l=zi(),d=l.queue;if(d===null)throw Error(i(311));d.lastRenderedReducer=a;var g=d.dispatch,w=d.pending,T=l.memoizedState;if(w!==null){d.pending=null;var O=w=w.next;do T=a(T,O.action),O=O.next;while(O!==w);qr(T,l.memoizedState)||(Zi=!0),l.memoizedState=T,l.baseQueue===null&&(l.baseState=T),d.lastRenderedState=T}return[T,g]}function ty(a,l,d){var g=pn,w=zi(),T=Un;if(T){if(d===void 0)throw Error(i(407));d=d()}else d=l();var O=!qr((ni||w).memoizedState,d);if(O&&(w.memoizedState=d,Zi=!0),w=w.queue,Km(ry.bind(null,g,w,a),[a]),w.getSnapshot!==l||O||In!==null&&In.memoizedState.tag&1){if(g.flags|=2048,dl(9,{destroy:void 0},iy.bind(null,g,w,d,l),null),cn===null)throw Error(i(349));T||(_i&127)!==0||ny(g,l,d)}return d}function ny(a,l,d){a.flags|=16384,a={getSnapshot:l,value:d},l=pn.updateQueue,l===null?(l=fd(),pn.updateQueue=l,l.stores=[a]):(d=l.stores,d===null?l.stores=[a]:d.push(a))}function iy(a,l,d,g){l.value=d,l.getSnapshot=g,sy(l)&&ay(a)}function ry(a,l,d){return d(function(){sy(l)&&ay(a)})}function sy(a){var l=a.getSnapshot;a=a.value;try{var d=l();return!qr(a,d)}catch{return!0}}function ay(a){var l=Xr(a,2);l!==null&&wn(l,a,2)}function jm(a){var l=or();if(typeof a=="function"){var d=a;if(a=d(),ic){Ct(!0);try{d()}finally{Ct(!1)}}}return l.memoizedState=l.baseState=a,l.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Eo,lastRenderedState:a},l}function Wm(a,l,d,g){return a.baseState=d,Hm(a,ni,typeof g=="function"?g:Eo)}function DS(a,l,d,g,w){if(vd(a))throw Error(i(485));if(a=l.action,a!==null){var T={payload:w,action:a,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(O){T.listeners.push(O)}};Z.T!==null?d(!0):T.isTransition=!1,g(T),d=l.pending,d===null?(T.next=l.pending=T,oy(l,T)):(T.next=d.next,l.pending=d.next=T)}}function oy(a,l){var d=l.action,g=l.payload,w=a.state;if(l.isTransition){var T=Z.T,O={};Z.T=O;try{var W=d(w,g),re=Z.S;re!==null&&re(O,W),ly(a,l,W)}catch(Me){qm(a,l,Me)}finally{T!==null&&O.types!==null&&(T.types=O.types),Z.T=T}}else try{T=d(w,g),ly(a,l,T)}catch(Me){qm(a,l,Me)}}function ly(a,l,d){d!==null&&typeof d=="object"&&typeof d.then=="function"?d.then(function(g){cy(a,l,g)},function(g){return qm(a,l,g)}):cy(a,l,d)}function cy(a,l,d){l.status="fulfilled",l.value=d,uy(l),a.state=d,l=a.pending,l!==null&&(d=l.next,d===l?a.pending=null:(d=d.next,l.next=d,oy(a,d)))}function qm(a,l,d){var g=a.pending;if(a.pending=null,g!==null){g=g.next;do l.status="rejected",l.reason=d,uy(l),l=l.next;while(l!==g)}a.action=null}function uy(a){a=a.listeners;for(var l=0;l<a.length;l++)(0,a[l])()}function Xm(a,l){return l}function $m(a,l){if(Un){var d=cn.formState;if(d!==null){e:{var g=pn;if(Un){if(oi){t:{for(var w=oi,T=As;w.nodeType!==8;){if(!T){w=null;break t}if(w=eo(w.nextSibling),w===null){w=null;break t}}T=w.data,w=T==="F!"||T==="F"?w:null}if(w){oi=eo(w.nextSibling),g=w.data==="F!";break e}}za(g)}g=!1}g&&(l=d[0])}}return d=or(),d.memoizedState=d.baseState=l,g={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Xm,lastRenderedState:l},d.queue=g,d=Cy.bind(null,pn,g),g.dispatch=d,g=jm(!1),T=ng.bind(null,pn,!1,g.queue),g=or(),w={state:l,dispatch:null,action:a,pending:null},g.queue=w,d=DS.bind(null,pn,w,T,d),w.dispatch=d,g.memoizedState=a,[l,d,!1]}function hy(a){var l=zi();return Ym(l,ni,a)}function Ym(a,l,d){if(l=Hm(a,l,Xm)[0],a=dd(Eo)[0],typeof l=="object"&&l!==null&&typeof l.then=="function")try{var g=Eh(l)}catch(O){throw O===Kl?bn:O}else g=l;l=zi();var w=l.queue,T=w.dispatch;return d!==l.memoizedState&&(pn.flags|=2048,dl(9,{destroy:void 0},fy.bind(null,w,d),null)),[g,T,a]}function fy(a,l){a.action=l}function Zm(a){var l=zi(),d=ni;if(d!==null)return Ym(l,d,a);zi(),l=l.memoizedState,d=zi();var g=d.queue.dispatch;return d.memoizedState=a,[l,g,!1]}function dl(a,l,d,g){return a={tag:a,create:d,deps:g,inst:l,next:null},l=pn.updateQueue,l===null&&(l=fd(),pn.updateQueue=l),d=l.lastEffect,d===null?l.lastEffect=a.next=a:(g=d.next,d.next=a,a.next=g,l.lastEffect=a),a}function pd(){return zi().memoizedState}function md(a,l,d,g){var w=or();pn.flags|=a,w.memoizedState=dl(1|l,{destroy:void 0},d,g===void 0?null:g)}function gd(a,l,d,g){var w=zi();g=g===void 0?null:g;var T=w.memoizedState.inst;ni!==null&&g!==null&&km(g,ni.memoizedState.deps)?w.memoizedState=dl(l,T,d,g):(pn.flags|=a,w.memoizedState=dl(1|l,T,d,g))}function dy(a,l){md(8390656,8,a,l)}function Km(a,l){gd(2048,8,a,l)}function py(a){pn.flags|=4;var l=pn.updateQueue;if(l===null)l=fd(),pn.updateQueue=l,l.events=[a];else{var d=l.events;d===null?l.events=[a]:d.push(a)}}function my(a){var l=zi().memoizedState;return py({ref:l,nextImpl:a}),function(){if((Wt&2)!==0)throw Error(i(440));return l.impl.apply(void 0,arguments)}}function gy(a,l){return gd(4,2,a,l)}function vy(a,l){return gd(4,4,a,l)}function yy(a,l){if(typeof l=="function"){a=a();var d=l(a);return function(){typeof d=="function"?d():l(null)}}if(l!=null)return a=a(),l.current=a,function(){l.current=null}}function _y(a,l,d){d=d!=null?d.concat([a]):null,gd(4,4,yy.bind(null,l,a),d)}function Jm(){}function xy(a,l){var d=zi();l=l===void 0?null:l;var g=d.memoizedState;return l!==null&&km(l,g[1])?g[0]:(d.memoizedState=[a,l],a)}function by(a,l){var d=zi();l=l===void 0?null:l;var g=d.memoizedState;if(l!==null&&km(l,g[1]))return g[0];if(g=a(),ic){Ct(!0);try{a()}finally{Ct(!1)}}return d.memoizedState=[g,l],g}function Qm(a,l,d){return d===void 0||(_i&1073741824)!==0&&(_n&261930)===0?a.memoizedState=l:(a.memoizedState=d,a=Rn(),pn.lanes|=a,Ka|=a,d)}function Sy(a,l,d,g){return qr(d,l)?d:su.current!==null?(a=Qm(a,d,g),qr(a,l)||(Zi=!0),a):(_i&42)===0||(_i&1073741824)!==0&&(_n&261930)===0?(Zi=!0,a.memoizedState=d):(a=Rn(),pn.lanes|=a,Ka|=a,l)}function wy(a,l,d,g,w){var T=Q.p;Q.p=T!==0&&8>T?T:8;var O=Z.T,W={};Z.T=W,ng(a,!1,l,d);try{var re=w(),Me=Z.S;if(Me!==null&&Me(W,re),re!==null&&typeof re=="object"&&typeof re.then=="function"){var ke=Nm(re,g);Th(a,l,ke,Os(a))}else Th(a,l,g,Os(a))}catch(qe){Th(a,l,{then:function(){},status:"rejected",reason:qe},Os())}finally{Q.p=T,O!==null&&W.types!==null&&(O.types=W.types),Z.T=O}}function IS(){}function eg(a,l,d,g){if(a.tag!==5)throw Error(i(476));var w=My(a).queue;wy(a,w,l,ve,d===null?IS:function(){return Ey(a),d(g)})}function My(a){var l=a.memoizedState;if(l!==null)return l;l={memoizedState:ve,baseState:ve,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Eo,lastRenderedState:ve},next:null};var d={};return l.next={memoizedState:d,baseState:d,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Eo,lastRenderedState:d},next:null},a.memoizedState=l,a=a.alternate,a!==null&&(a.memoizedState=l),l}function Ey(a){var l=My(a);l.next===null&&(l=a.alternate.memoizedState),Th(a,l.next.queue,{},Os())}function tg(){return sn(wg)}function Ty(){return zi().memoizedState}function Ay(){return zi().memoizedState}function PS(a){for(var l=a.return;l!==null;){switch(l.tag){case 24:case 3:var d=Os();a=wo(d);var g=ul(l,a,d);g!==null&&(wn(g,l,d),hl(g,l,d)),l={cache:Am()},a.payload=l;return}l=l.return}}function OS(a,l,d){var g=Os();d={lane:g,revertLane:0,gesture:null,action:d,hasEagerState:!1,eagerState:null,next:null},vd(a)?Ry(l,d):(d=$f(a,l,d,g),d!==null&&(wn(d,a,g),Ny(d,l,g)))}function Cy(a,l,d){var g=Os();Th(a,l,d,g)}function Th(a,l,d,g){var w={lane:g,revertLane:0,gesture:null,action:d,hasEagerState:!1,eagerState:null,next:null};if(vd(a))Ry(l,w);else{var T=a.alternate;if(a.lanes===0&&(T===null||T.lanes===0)&&(T=l.lastRenderedReducer,T!==null))try{var O=l.lastRenderedState,W=T(O,d);if(w.hasEagerState=!0,w.eagerState=W,qr(W,O))return yr(a,l,w,0),cn===null&&mh(),!1}catch{}if(d=$f(a,l,w,g),d!==null)return wn(d,a,g),Ny(d,l,g),!0}return!1}function ng(a,l,d,g){if(g={lane:2,revertLane:Ne(),gesture:null,action:g,hasEagerState:!1,eagerState:null,next:null},vd(a)){if(l)throw Error(i(479))}else l=$f(a,d,g,2),l!==null&&wn(l,a,2)}function vd(a){var l=a.alternate;return a===pn||l!==null&&l===pn}function Ry(a,l){au=ea=!0;var d=a.pending;d===null?l.next=l:(l.next=d.next,d.next=l),a.pending=l}function Ny(a,l,d){if((d&4194048)!==0){var g=l.lanes;g&=a.pendingLanes,d|=g,l.lanes=d,Na(a,d)}}var lu={readContext:sn,use:fl,useCallback:Ei,useContext:Ei,useEffect:Ei,useImperativeHandle:Ei,useLayoutEffect:Ei,useInsertionEffect:Ei,useMemo:Ei,useReducer:Ei,useRef:Ei,useState:Ei,useDebugValue:Ei,useDeferredValue:Ei,useTransition:Ei,useSyncExternalStore:Ei,useId:Ei,useHostTransitionStatus:Ei,useFormState:Ei,useActionState:Ei,useOptimistic:Ei,useMemoCache:Ei,useCacheRefresh:Ei};lu.useEffectEvent=Ei;var Dy={readContext:sn,use:fl,useCallback:function(a,l){return or().memoizedState=[a,l===void 0?null:l],a},useContext:sn,useEffect:dy,useImperativeHandle:function(a,l,d){d=d!=null?d.concat([a]):null,md(4194308,4,yy.bind(null,l,a),d)},useLayoutEffect:function(a,l){return md(4194308,4,a,l)},useInsertionEffect:function(a,l){md(4,2,a,l)},useMemo:function(a,l){var d=or();l=l===void 0?null:l;var g=a();if(ic){Ct(!0);try{a()}finally{Ct(!1)}}return d.memoizedState=[g,l],g},useReducer:function(a,l,d){var g=or();if(d!==void 0){var w=d(l);if(ic){Ct(!0);try{d(l)}finally{Ct(!1)}}}else w=l;return g.memoizedState=g.baseState=w,a={pending:null,lanes:0,dispatch:null,lastRenderedReducer:a,lastRenderedState:w},g.queue=a,a=a.dispatch=OS.bind(null,pn,a),[g.memoizedState,a]},useRef:function(a){var l=or();return a={current:a},l.memoizedState=a},useState:function(a){a=jm(a);var l=a.queue,d=Cy.bind(null,pn,l);return l.dispatch=d,[a.memoizedState,d]},useDebugValue:Jm,useDeferredValue:function(a,l){var d=or();return Qm(d,a,l)},useTransition:function(){var a=jm(!1);return a=wy.bind(null,pn,a.queue,!0,!1),or().memoizedState=a,[!1,a]},useSyncExternalStore:function(a,l,d){var g=pn,w=or();if(Un){if(d===void 0)throw Error(i(407));d=d()}else{if(d=l(),cn===null)throw Error(i(349));(_n&127)!==0||ny(g,l,d)}w.memoizedState=d;var T={value:d,getSnapshot:l};return w.queue=T,dy(ry.bind(null,g,T,a),[a]),g.flags|=2048,dl(9,{destroy:void 0},iy.bind(null,g,T,d,l),null),d},useId:function(){var a=or(),l=cn.identifierPrefix;if(Un){var d=ma,g=Mi;d=(g&~(1<<32-wt(g)-1)).toString(32)+d,l="_"+l+"R_"+d,d=ud++,0<d&&(l+="H"+d.toString(32)),l+="_"}else d=Um++,l="_"+l+"r_"+d.toString(32)+"_";return a.memoizedState=l},useHostTransitionStatus:tg,useFormState:$m,useActionState:$m,useOptimistic:function(a){var l=or();l.memoizedState=l.baseState=a;var d={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return l.queue=d,l=ng.bind(null,pn,!0,d),d.dispatch=l,[a,l]},useMemoCache:Vm,useCacheRefresh:function(){return or().memoizedState=PS.bind(null,pn)},useEffectEvent:function(a){var l=or(),d={impl:a};return l.memoizedState=d,function(){if((Wt&2)!==0)throw Error(i(440));return d.impl.apply(void 0,arguments)}}},ig={readContext:sn,use:fl,useCallback:xy,useContext:sn,useEffect:Km,useImperativeHandle:_y,useInsertionEffect:gy,useLayoutEffect:vy,useMemo:by,useReducer:dd,useRef:pd,useState:function(){return dd(Eo)},useDebugValue:Jm,useDeferredValue:function(a,l){var d=zi();return Sy(d,ni.memoizedState,a,l)},useTransition:function(){var a=dd(Eo)[0],l=zi().memoizedState;return[typeof a=="boolean"?a:Eh(a),l]},useSyncExternalStore:ty,useId:Ty,useHostTransitionStatus:tg,useFormState:hy,useActionState:hy,useOptimistic:function(a,l){var d=zi();return Wm(d,ni,a,l)},useMemoCache:Vm,useCacheRefresh:Ay};ig.useEffectEvent=my;var ta={readContext:sn,use:fl,useCallback:xy,useContext:sn,useEffect:Km,useImperativeHandle:_y,useInsertionEffect:gy,useLayoutEffect:vy,useMemo:by,useReducer:Gm,useRef:pd,useState:function(){return Gm(Eo)},useDebugValue:Jm,useDeferredValue:function(a,l){var d=zi();return ni===null?Qm(d,a,l):Sy(d,ni.memoizedState,a,l)},useTransition:function(){var a=Gm(Eo)[0],l=zi().memoizedState;return[typeof a=="boolean"?a:Eh(a),l]},useSyncExternalStore:ty,useId:Ty,useHostTransitionStatus:tg,useFormState:Zm,useActionState:Zm,useOptimistic:function(a,l){var d=zi();return ni!==null?Wm(d,ni,a,l):(d.baseState=a,[a,d.queue.dispatch])},useMemoCache:Vm,useCacheRefresh:Ay};ta.useEffectEvent=my;function yd(a,l,d,g){l=a.memoizedState,d=d(g,l),d=d==null?l:v({},l,d),a.memoizedState=d,a.lanes===0&&(a.updateQueue.baseState=d)}var Ah={enqueueSetState:function(a,l,d){a=a._reactInternals;var g=Os(),w=wo(g);w.payload=l,d!=null&&(w.callback=d),l=ul(a,w,g),l!==null&&(wn(l,a,g),hl(l,a,g))},enqueueReplaceState:function(a,l,d){a=a._reactInternals;var g=Os(),w=wo(g);w.tag=1,w.payload=l,d!=null&&(w.callback=d),l=ul(a,w,g),l!==null&&(wn(l,a,g),hl(l,a,g))},enqueueForceUpdate:function(a,l){a=a._reactInternals;var d=Os(),g=wo(d);g.tag=2,l!=null&&(g.callback=l),l=ul(a,g,d),l!==null&&(wn(l,a,d),hl(l,a,d))}};function rg(a,l,d,g,w,T,O){return a=a.stateNode,typeof a.shouldComponentUpdate=="function"?a.shouldComponentUpdate(g,T,O):l.prototype&&l.prototype.isPureReactComponent?!jc(d,g)||!jc(w,T):!0}function sg(a,l,d,g){a=l.state,typeof l.componentWillReceiveProps=="function"&&l.componentWillReceiveProps(d,g),typeof l.UNSAFE_componentWillReceiveProps=="function"&&l.UNSAFE_componentWillReceiveProps(d,g),l.state!==a&&Ah.enqueueReplaceState(l,l.state,null)}function pl(a,l){var d=l;if("ref"in l){d={};for(var g in l)g!=="ref"&&(d[g]=l[g])}if(a=a.defaultProps){d===l&&(d=v({},d));for(var w in a)d[w]===void 0&&(d[w]=a[w])}return d}function Iy(a){ph(a)}function ag(a){console.error(a)}function og(a){ph(a)}function _d(a,l){try{var d=a.onUncaughtError;d(l.value,{componentStack:l.stack})}catch(g){setTimeout(function(){throw g})}}function Py(a,l,d){try{var g=a.onCaughtError;g(d.value,{componentStack:d.stack,errorBoundary:l.tag===1?l.stateNode:null})}catch(w){setTimeout(function(){throw w})}}function lg(a,l,d){return d=wo(d),d.tag=3,d.payload={element:null},d.callback=function(){_d(a,l)},d}function cg(a){return a=wo(a),a.tag=3,a}function Oy(a,l,d,g){var w=d.type.getDerivedStateFromError;if(typeof w=="function"){var T=g.value;a.payload=function(){return w(T)},a.callback=function(){Py(l,d,g)}}var O=d.stateNode;O!==null&&typeof O.componentDidCatch=="function"&&(a.callback=function(){Py(l,d,g),typeof w!="function"&&(Hi===null?Hi=new Set([this]):Hi.add(this));var W=g.stack;this.componentDidCatch(g.value,{componentStack:W!==null?W:""})})}function lr(a,l,d,g,w){if(d.flags|=32768,g!==null&&typeof g=="object"&&typeof g.then=="function"){if(l=d.alternate,l!==null&&Ga(l,d,w,!0),d=cs.current,d!==null){switch(d.tag){case 31:case 13:return Yr===null?mu():d.alternate===null&&Ti===0&&(Ti=3),d.flags&=-257,d.flags|=65536,d.lanes=w,g===sd?d.flags|=16384:(l=d.updateQueue,l===null?d.updateQueue=new Set([g]):l.add(g),zh(a,g,w)),!1;case 22:return d.flags|=65536,g===sd?d.flags|=16384:(l=d.updateQueue,l===null?(l={transitions:null,markerInstances:null,retryQueue:new Set([g])},d.updateQueue=l):(d=l.retryQueue,d===null?l.retryQueue=new Set([g]):d.add(g)),zh(a,g,w)),!1}throw Error(i(435,d.tag))}return zh(a,g,w),mu(),!1}if(Un)return l=cs.current,l!==null?((l.flags&65536)===0&&(l.flags|=256),l.flags|=65536,l.lanes=w,g!==Jc&&(a=Error(i(422),{cause:g}),Fa(Ts(a,d)))):(g!==Jc&&(l=Error(i(423),{cause:g}),Fa(Ts(l,d))),a=a.current.alternate,a.flags|=65536,w&=-w,a.lanes|=w,g=Ts(g,d),w=lg(a.stateNode,g,w),Zt(a,w),Ti!==4&&(Ti=2)),!1;var T=Error(i(520),{cause:g});if(T=Ts(T,d),dc===null?dc=[T]:dc.push(T),Ti!==4&&(Ti=2),l===null)return!0;g=Ts(g,d),d=l;do{switch(d.tag){case 3:return d.flags|=65536,a=w&-w,d.lanes|=a,a=lg(d.stateNode,g,a),Zt(d,a),!1;case 1:if(l=d.type,T=d.stateNode,(d.flags&128)===0&&(typeof l.getDerivedStateFromError=="function"||T!==null&&typeof T.componentDidCatch=="function"&&(Hi===null||!Hi.has(T))))return d.flags|=65536,w&=-w,d.lanes|=w,w=cg(w),Oy(w,a,d,g),Zt(d,w),!1}d=d.return}while(d!==null);return!1}var xd=Error(i(461)),Zi=!1;function _r(a,l,d,g){l.child=a===null?ld(l,null,d,g):So(l,a.child,d,g)}function ug(a,l,d,g,w){d=d.render;var T=l.ref;if("ref"in g){var O={};for(var W in g)W!=="ref"&&(O[W]=g[W])}else O=g;return ll(l),g=hd(a,l,d,O,T,w),W=Bm(),a!==null&&!Zi?(zm(a,l,w),Fi(a,l,w)):(Un&&W&&Ba(l),l.flags|=1,_r(a,l,g,w),l.child)}function ac(a,l,d,g,w){if(a===null){var T=d.type;return typeof T=="function"&&!Yf(T)&&T.defaultProps===void 0&&d.compare===null?(l.tag=15,l.type=T,bd(a,l,T,g,w)):(a=Ua(d.type,null,g,l,l.mode,w),a.ref=l.ref,a.return=l,l.child=a)}if(T=a.child,!Ad(a,w)){var O=T.memoizedProps;if(d=d.compare,d=d!==null?d:jc,d(O,g)&&a.ref===l.ref)return Fi(a,l,w)}return l.flags|=1,a=as(T,g),a.ref=l.ref,a.return=l,l.child=a}function bd(a,l,d,g,w){if(a!==null){var T=a.memoizedProps;if(jc(T,g)&&a.ref===l.ref)if(Zi=!1,l.pendingProps=g=T,Ad(a,w))(a.flags&131072)!==0&&(Zi=!0);else return l.lanes=a.lanes,Fi(a,l,w)}return cu(a,l,d,g,w)}function oc(a,l,d,g){var w=g.children,T=a!==null?a.memoizedState:null;if(a===null&&l.stateNode===null&&(l.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),g.mode==="hidden"){if((l.flags&128)!==0){if(T=T!==null?T.baseLanes|d:d,a!==null){for(g=l.child=a.child,w=0;g!==null;)w=w|g.lanes|g.childLanes,g=g.sibling;g=w&~T}else g=0,l.child=null;return hs(a,l,T,d,g)}if((d&536870912)!==0)l.memoizedState={baseLanes:0,cachePool:null},a!==null&&yh(l,T!==null?T.cachePool:null),T!==null?Jv(l,T):Om(),Qv(l);else return g=l.lanes=536870912,hs(a,l,T!==null?T.baseLanes|d:d,d,g)}else T!==null?(yh(l,T.cachePool),Jv(l,T),us(),l.memoizedState=null):(a!==null&&yh(l,null),Om(),us());return _r(a,l,w,d),l.child}function Wa(a,l){return a!==null&&a.tag===22||l.stateNode!==null||(l.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),l.sibling}function hs(a,l,d,g,w){var T=rd();return T=T===null?null:{parent:Yi._currentValue,pool:T},l.memoizedState={baseLanes:d,cachePool:T},a!==null&&yh(l,null),Om(),Qv(l),a!==null&&Ga(a,l,g,!0),l.childLanes=w,null}function Sd(a,l){return l=Td({mode:l.mode,children:l.children},a.mode),l.ref=a.ref,a.child=l,l.return=a,l}function Ly(a,l,d){return So(l,a.child,null,d),a=Sd(l,l.pendingProps),a.flags|=2,Bi(l),l.memoizedState=null,a}function wd(a,l,d){var g=l.pendingProps,w=(l.flags&128)!==0;if(l.flags&=-129,a===null){if(Un){if(g.mode==="hidden")return a=Sd(l,g),l.lanes=536870912,Wa(null,a);if(Lm(l),(a=oi)?(a=oA(a,As),a=a!==null&&a.data==="&"?a:null,a!==null&&(l.memoizedState={dehydrated:a,treeContext:yo!==null?{id:Mi,overflow:ma}:null,retryLane:536870912,hydrationErrors:null},d=Yc(a),d.return=l,l.child=d,Ii=l,oi=null)):a=null,a===null)throw za(l);return l.lanes=536870912,null}return Sd(l,g)}var T=a.memoizedState;if(T!==null){var O=T.dehydrated;if(Lm(l),w)if(l.flags&256)l.flags&=-257,l=Ly(a,l,d);else if(l.memoizedState!==null)l.child=a.child,l.flags|=128,l=null;else throw Error(i(558));else if(Zi||Ga(a,l,d,!1),w=(d&a.childLanes)!==0,Zi||w){if(g=cn,g!==null&&(O=Ws(g,d),O!==0&&O!==T.retryLane))throw T.retryLane=O,Xr(a,O),wn(g,a,O),xd;mu(),l=Ly(a,l,d)}else a=T.treeContext,oi=eo(O.nextSibling),Ii=l,Un=!0,_o=null,As=!1,a!==null&&Qf(l,a),l=Sd(l,g),l.flags|=4096;return l}return a=as(a.child,{mode:g.mode,children:g.children}),a.ref=l.ref,l.child=a,a.return=l,a}function lc(a,l){var d=l.ref;if(d===null)a!==null&&a.ref!==null&&(l.flags|=4194816);else{if(typeof d!="function"&&typeof d!="object")throw Error(i(284));(a===null||a.ref!==d)&&(l.flags|=4194816)}}function cu(a,l,d,g,w){return ll(l),d=hd(a,l,d,g,void 0,w),g=Bm(),a!==null&&!Zi?(zm(a,l,w),Fi(a,l,w)):(Un&&g&&Ba(l),l.flags|=1,_r(a,l,d,w),l.child)}function Ch(a,l,d,g,w,T){return ll(l),l.updateQueue=null,d=rc(l,g,d,w),ey(a),g=Bm(),a!==null&&!Zi?(zm(a,l,T),Fi(a,l,T)):(Un&&g&&Ba(l),l.flags|=1,_r(a,l,d,T),l.child)}function Md(a,l,d,g,w){if(ll(l),l.stateNode===null){var T=nl,O=d.contextType;typeof O=="object"&&O!==null&&(T=sn(O)),T=new d(g,T),l.memoizedState=T.state!==null&&T.state!==void 0?T.state:null,T.updater=Ah,l.stateNode=T,T._reactInternals=l,T=l.stateNode,T.props=g,T.state=l.memoizedState,T.refs={},bh(l),O=d.contextType,T.context=typeof O=="object"&&O!==null?sn(O):nl,T.state=l.memoizedState,O=d.getDerivedStateFromProps,typeof O=="function"&&(yd(l,d,O,g),T.state=l.memoizedState),typeof d.getDerivedStateFromProps=="function"||typeof T.getSnapshotBeforeUpdate=="function"||typeof T.UNSAFE_componentWillMount!="function"&&typeof T.componentWillMount!="function"||(O=T.state,typeof T.componentWillMount=="function"&&T.componentWillMount(),typeof T.UNSAFE_componentWillMount=="function"&&T.UNSAFE_componentWillMount(),O!==T.state&&Ah.enqueueReplaceState(T,T.state,null),iu(l,g,T,w),Sh(),T.state=l.memoizedState),typeof T.componentDidMount=="function"&&(l.flags|=4194308),g=!0}else if(a===null){T=l.stateNode;var W=l.memoizedProps,re=pl(d,W);T.props=re;var Me=T.context,ke=d.contextType;O=nl,typeof ke=="object"&&ke!==null&&(O=sn(ke));var qe=d.getDerivedStateFromProps;ke=typeof qe=="function"||typeof T.getSnapshotBeforeUpdate=="function",W=l.pendingProps!==W,ke||typeof T.UNSAFE_componentWillReceiveProps!="function"&&typeof T.componentWillReceiveProps!="function"||(W||Me!==O)&&sg(l,T,g,O),$r=!1;var Ae=l.memoizedState;T.state=Ae,iu(l,g,T,w),Sh(),Me=l.memoizedState,W||Ae!==Me||$r?(typeof qe=="function"&&(yd(l,d,qe,g),Me=l.memoizedState),(re=$r||rg(l,d,re,g,Ae,Me,O))?(ke||typeof T.UNSAFE_componentWillMount!="function"&&typeof T.componentWillMount!="function"||(typeof T.componentWillMount=="function"&&T.componentWillMount(),typeof T.UNSAFE_componentWillMount=="function"&&T.UNSAFE_componentWillMount()),typeof T.componentDidMount=="function"&&(l.flags|=4194308)):(typeof T.componentDidMount=="function"&&(l.flags|=4194308),l.memoizedProps=g,l.memoizedState=Me),T.props=g,T.state=Me,T.context=O,g=re):(typeof T.componentDidMount=="function"&&(l.flags|=4194308),g=!1)}else{T=l.stateNode,Im(a,l),O=l.memoizedProps,ke=pl(d,O),T.props=ke,qe=l.pendingProps,Ae=T.context,Me=d.contextType,re=nl,typeof Me=="object"&&Me!==null&&(re=sn(Me)),W=d.getDerivedStateFromProps,(Me=typeof W=="function"||typeof T.getSnapshotBeforeUpdate=="function")||typeof T.UNSAFE_componentWillReceiveProps!="function"&&typeof T.componentWillReceiveProps!="function"||(O!==qe||Ae!==re)&&sg(l,T,g,re),$r=!1,Ae=l.memoizedState,T.state=Ae,iu(l,g,T,w),Sh();var Le=l.memoizedState;O!==qe||Ae!==Le||$r||a!==null&&a.dependencies!==null&&vh(a.dependencies)?(typeof W=="function"&&(yd(l,d,W,g),Le=l.memoizedState),(ke=$r||rg(l,d,ke,g,Ae,Le,re)||a!==null&&a.dependencies!==null&&vh(a.dependencies))?(Me||typeof T.UNSAFE_componentWillUpdate!="function"&&typeof T.componentWillUpdate!="function"||(typeof T.componentWillUpdate=="function"&&T.componentWillUpdate(g,Le,re),typeof T.UNSAFE_componentWillUpdate=="function"&&T.UNSAFE_componentWillUpdate(g,Le,re)),typeof T.componentDidUpdate=="function"&&(l.flags|=4),typeof T.getSnapshotBeforeUpdate=="function"&&(l.flags|=1024)):(typeof T.componentDidUpdate!="function"||O===a.memoizedProps&&Ae===a.memoizedState||(l.flags|=4),typeof T.getSnapshotBeforeUpdate!="function"||O===a.memoizedProps&&Ae===a.memoizedState||(l.flags|=1024),l.memoizedProps=g,l.memoizedState=Le),T.props=g,T.state=Le,T.context=re,g=ke):(typeof T.componentDidUpdate!="function"||O===a.memoizedProps&&Ae===a.memoizedState||(l.flags|=4),typeof T.getSnapshotBeforeUpdate!="function"||O===a.memoizedProps&&Ae===a.memoizedState||(l.flags|=1024),g=!1)}return T=g,lc(a,l),g=(l.flags&128)!==0,T||g?(T=l.stateNode,d=g&&typeof d.getDerivedStateFromError!="function"?null:T.render(),l.flags|=1,a!==null&&g?(l.child=So(l,a.child,null,w),l.child=So(l,null,d,w)):_r(a,l,d,w),l.memoizedState=T.state,a=l.child):a=Fi(a,l,w),a}function Uy(a,l,d,g){return al(),l.flags|=256,_r(a,l,d,g),l.child}var hg={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Br(a){return{baseLanes:a,cachePool:Dm()}}function Ed(a,l,d){return a=a!==null?a.childLanes&~d:0,l&&(a|=Jr),a}function ky(a,l,d){var g=l.pendingProps,w=!1,T=(l.flags&128)!==0,O;if((O=T)||(O=a!==null&&a.memoizedState===null?!1:(kn.current&2)!==0),O&&(w=!0,l.flags&=-129),O=(l.flags&32)!==0,l.flags&=-33,a===null){if(Un){if(w?Mo(l):us(),(a=oi)?(a=oA(a,As),a=a!==null&&a.data!=="&"?a:null,a!==null&&(l.memoizedState={dehydrated:a,treeContext:yo!==null?{id:Mi,overflow:ma}:null,retryLane:536870912,hydrationErrors:null},d=Yc(a),d.return=l,l.child=d,Ii=l,oi=null)):a=null,a===null)throw za(l);return $S(a)?l.lanes=32:l.lanes=536870912,null}var W=g.children;return g=g.fallback,w?(us(),w=l.mode,W=Td({mode:"hidden",children:W},w),g=il(g,w,d,null),W.return=l,g.return=l,W.sibling=g,l.child=W,g=l.child,g.memoizedState=Br(d),g.childLanes=Ed(a,O,d),l.memoizedState=hg,Wa(null,g)):(Mo(l),Rh(l,W))}var re=a.memoizedState;if(re!==null&&(W=re.dehydrated,W!==null)){if(T)l.flags&256?(Mo(l),l.flags&=-257,l=fg(a,l,d)):l.memoizedState!==null?(us(),l.child=a.child,l.flags|=128,l=null):(us(),W=g.fallback,w=l.mode,g=Td({mode:"visible",children:g.children},w),W=il(W,w,d,null),W.flags|=2,g.return=l,W.return=l,g.sibling=W,l.child=g,So(l,a.child,null,d),g=l.child,g.memoizedState=Br(d),g.childLanes=Ed(a,O,d),l.memoizedState=hg,l=Wa(null,g));else if(Mo(l),$S(W)){if(O=W.nextSibling&&W.nextSibling.dataset,O)var Me=O.dgst;O=Me,g=Error(i(419)),g.stack="",g.digest=O,Fa({value:g,source:null,stack:null}),l=fg(a,l,d)}else if(Zi||Ga(a,l,d,!1),O=(d&a.childLanes)!==0,Zi||O){if(O=cn,O!==null&&(g=Ws(O,d),g!==0&&g!==re.retryLane))throw re.retryLane=g,Xr(a,g),wn(O,a,g),xd;XS(W)||mu(),l=fg(a,l,d)}else XS(W)?(l.flags|=192,l.child=a.child,l=null):(a=re.treeContext,oi=eo(W.nextSibling),Ii=l,Un=!0,_o=null,As=!1,a!==null&&Qf(l,a),l=Rh(l,g.children),l.flags|=4096);return l}return w?(us(),W=g.fallback,w=l.mode,re=a.child,Me=re.sibling,g=as(re,{mode:"hidden",children:g.children}),g.subtreeFlags=re.subtreeFlags&65011712,Me!==null?W=as(Me,W):(W=il(W,w,d,null),W.flags|=2),W.return=l,g.return=l,g.sibling=W,l.child=g,Wa(null,g),g=l.child,W=a.child.memoizedState,W===null?W=Br(d):(w=W.cachePool,w!==null?(re=Yi._currentValue,w=w.parent!==re?{parent:re,pool:re}:w):w=Dm(),W={baseLanes:W.baseLanes|d,cachePool:w}),g.memoizedState=W,g.childLanes=Ed(a,O,d),l.memoizedState=hg,Wa(a.child,g)):(Mo(l),d=a.child,a=d.sibling,d=as(d,{mode:"visible",children:g.children}),d.return=l,d.sibling=null,a!==null&&(O=l.deletions,O===null?(l.deletions=[a],l.flags|=16):O.push(a)),l.child=d,l.memoizedState=null,d)}function Rh(a,l){return l=Td({mode:"visible",children:l},a.mode),l.return=a,a.child=l}function Td(a,l){return a=wi(22,a,null,l),a.lanes=0,a}function fg(a,l,d){return So(l,a.child,null,d),a=Rh(l,l.pendingProps.children),a.flags|=2,l.memoizedState=null,a}function By(a,l,d){a.lanes|=l;var g=a.alternate;g!==null&&(g.lanes|=l),td(a.return,l,d)}function cc(a,l,d,g,w,T){var O=a.memoizedState;O===null?a.memoizedState={isBackwards:l,rendering:null,renderingStartTime:0,last:g,tail:d,tailMode:w,treeForkCount:T}:(O.isBackwards=l,O.rendering=null,O.renderingStartTime=0,O.last=g,O.tail=d,O.tailMode=w,O.treeForkCount=T)}function fs(a,l,d){var g=l.pendingProps,w=g.revealOrder,T=g.tail;g=g.children;var O=kn.current,W=(O&2)!==0;if(W?(O=O&1|2,l.flags|=128):O&=1,xe(kn,O),_r(a,l,g,d),g=Un?Kc:0,!W&&a!==null&&(a.flags&128)!==0)e:for(a=l.child;a!==null;){if(a.tag===13)a.memoizedState!==null&&By(a,d,l);else if(a.tag===19)By(a,d,l);else if(a.child!==null){a.child.return=a,a=a.child;continue}if(a===l)break e;for(;a.sibling===null;){if(a.return===null||a.return===l)break e;a=a.return}a.sibling.return=a.return,a=a.sibling}switch(w){case"forwards":for(d=l.child,w=null;d!==null;)a=d.alternate,a!==null&&Rs(a)===null&&(w=d),d=d.sibling;d=w,d===null?(w=l.child,l.child=null):(w=d.sibling,d.sibling=null),cc(l,!1,w,d,T,g);break;case"backwards":case"unstable_legacy-backwards":for(d=null,w=l.child,l.child=null;w!==null;){if(a=w.alternate,a!==null&&Rs(a)===null){l.child=w;break}a=w.sibling,w.sibling=d,d=w,w=a}cc(l,!0,d,null,T,g);break;case"together":cc(l,!1,null,null,void 0,g);break;default:l.memoizedState=null}return l.child}function Fi(a,l,d){if(a!==null&&(l.dependencies=a.dependencies),Ka|=l.lanes,(d&l.childLanes)===0)if(a!==null){if(Ga(a,l,d,!1),(d&l.childLanes)===0)return null}else return null;if(a!==null&&l.child!==a.child)throw Error(i(153));if(l.child!==null){for(a=l.child,d=as(a,a.pendingProps),l.child=d,d.return=l;a.sibling!==null;)a=a.sibling,d=d.sibling=as(a,a.pendingProps),d.return=l;d.sibling=null}return l.child}function Ad(a,l){return(a.lanes&l)!==0?!0:(a=a.dependencies,!!(a!==null&&vh(a)))}function LS(a,l,d){switch(l.tag){case 3:rt(l,l.stateNode.containerInfo),xo(l,Yi,a.memoizedState.cache),al();break;case 27:case 5:Rt(l);break;case 4:rt(l,l.stateNode.containerInfo);break;case 10:xo(l,l.type,l.memoizedProps.value);break;case 31:if(l.memoizedState!==null)return l.flags|=128,Lm(l),null;break;case 13:var g=l.memoizedState;if(g!==null)return g.dehydrated!==null?(Mo(l),l.flags|=128,null):(d&l.child.childLanes)!==0?ky(a,l,d):(Mo(l),a=Fi(a,l,d),a!==null?a.sibling:null);Mo(l);break;case 19:var w=(a.flags&128)!==0;if(g=(d&l.childLanes)!==0,g||(Ga(a,l,d,!1),g=(d&l.childLanes)!==0),w){if(g)return fs(a,l,d);l.flags|=128}if(w=l.memoizedState,w!==null&&(w.rendering=null,w.tail=null,w.lastEffect=null),xe(kn,kn.current),g)break;return null;case 22:return l.lanes=0,oc(a,l,d,l.pendingProps);case 24:xo(l,Yi,a.memoizedState.cache)}return Fi(a,l,d)}function Cd(a,l,d){if(a!==null)if(a.memoizedProps!==l.pendingProps)Zi=!0;else{if(!Ad(a,d)&&(l.flags&128)===0)return Zi=!1,LS(a,l,d);Zi=(a.flags&131072)!==0}else Zi=!1,Un&&(l.flags&1048576)!==0&&Wv(l,Kc,l.index);switch(l.lanes=0,l.tag){case 16:e:{var g=l.pendingProps;if(a=Jl(l.elementType),l.type=a,typeof a=="function")Yf(a)?(g=pl(a,g),l.tag=1,l=Md(null,l,a,g,d)):(l.tag=0,l=cu(null,l,a,g,d));else{if(a!=null){var w=a.$$typeof;if(w===I){l.tag=11,l=ug(null,l,a,g,d);break e}else if(w===F){l.tag=14,l=ac(null,l,a,g,d);break e}}throw l=le(a)||a,Error(i(306,l,""))}}return l;case 0:return cu(a,l,l.type,l.pendingProps,d);case 1:return g=l.type,w=pl(g,l.pendingProps),Md(a,l,g,w,d);case 3:e:{if(rt(l,l.stateNode.containerInfo),a===null)throw Error(i(387));g=l.pendingProps;var T=l.memoizedState;w=T.element,Im(a,l),iu(l,g,null,d);var O=l.memoizedState;if(g=O.cache,xo(l,Yi,g),g!==T.cache&&nd(l,[Yi],d,!0),Sh(),g=O.element,T.isDehydrated)if(T={element:g,isDehydrated:!1,cache:O.cache},l.updateQueue.baseState=T,l.memoizedState=T,l.flags&256){l=Uy(a,l,g,d);break e}else if(g!==w){w=Ts(Error(i(424)),l),Fa(w),l=Uy(a,l,g,d);break e}else for(a=l.stateNode.containerInfo,a.nodeType===9?a=a.body:a=a.nodeName==="HTML"?a.ownerDocument.body:a,oi=eo(a.firstChild),Ii=l,Un=!0,_o=null,As=!0,d=ld(l,null,g,d),l.child=d;d;)d.flags=d.flags&-3|4096,d=d.sibling;else{if(al(),g===w){l=Fi(a,l,d);break e}_r(a,l,g,d)}l=l.child}return l;case 26:return lc(a,l),a===null?(d=dA(l.type,null,l.pendingProps,null))?l.memoizedState=d:Un||(d=l.type,a=l.pendingProps,g=Hy(ge.current).createElement(d),g[di]=l,g[z]=a,es(g,d,a),G(g),l.stateNode=g):l.memoizedState=dA(l.type,a.memoizedProps,l.pendingProps,a.memoizedState),null;case 27:return Rt(l),a===null&&Un&&(g=l.stateNode=uA(l.type,l.pendingProps,ge.current),Ii=l,As=!0,w=oi,_u(l.type)?(YS=w,oi=eo(g.firstChild)):oi=w),_r(a,l,l.pendingProps.children,d),lc(a,l),a===null&&(l.flags|=4194304),l.child;case 5:return a===null&&Un&&((w=g=oi)&&(g=aU(g,l.type,l.pendingProps,As),g!==null?(l.stateNode=g,Ii=l,oi=eo(g.firstChild),As=!1,w=!0):w=!1),w||za(l)),Rt(l),w=l.type,T=l.pendingProps,O=a!==null?a.memoizedProps:null,g=T.children,jS(w,T)?g=null:O!==null&&jS(w,O)&&(l.flags|=32),l.memoizedState!==null&&(w=hd(a,l,sc,null,null,d),wg._currentValue=w),lc(a,l),_r(a,l,g,d),l.child;case 6:return a===null&&Un&&((a=d=oi)&&(d=oU(d,l.pendingProps,As),d!==null?(l.stateNode=d,Ii=l,oi=null,a=!0):a=!1),a||za(l)),null;case 13:return ky(a,l,d);case 4:return rt(l,l.stateNode.containerInfo),g=l.pendingProps,a===null?l.child=So(l,null,g,d):_r(a,l,g,d),l.child;case 11:return ug(a,l,l.type,l.pendingProps,d);case 7:return _r(a,l,l.pendingProps,d),l.child;case 8:return _r(a,l,l.pendingProps.children,d),l.child;case 12:return _r(a,l,l.pendingProps.children,d),l.child;case 10:return g=l.pendingProps,xo(l,l.type,g.value),_r(a,l,g.children,d),l.child;case 9:return w=l.type._context,g=l.pendingProps.children,ll(l),w=sn(w),g=g(w),l.flags|=1,_r(a,l,g,d),l.child;case 14:return ac(a,l,l.type,l.pendingProps,d);case 15:return bd(a,l,l.type,l.pendingProps,d);case 19:return fs(a,l,d);case 31:return wd(a,l,d);case 22:return oc(a,l,d,l.pendingProps);case 24:return ll(l),g=sn(Yi),a===null?(w=rd(),w===null&&(w=cn,T=Am(),w.pooledCache=T,T.refCount++,T!==null&&(w.pooledCacheLanes|=d),w=T),l.memoizedState={parent:g,cache:w},bh(l),xo(l,Yi,w)):((a.lanes&d)!==0&&(Im(a,l),iu(l,null,null,d),Sh()),w=a.memoizedState,T=l.memoizedState,w.parent!==g?(w={parent:g,cache:g},l.memoizedState=w,l.lanes===0&&(l.memoizedState=l.updateQueue.baseState=w),xo(l,Yi,g)):(g=T.cache,xo(l,Yi,g),g!==w.cache&&nd(l,[Yi],d,!0))),_r(a,l,l.pendingProps.children,d),l.child;case 29:throw l.pendingProps}throw Error(i(156,l.tag))}function qa(a){a.flags|=4}function Nh(a,l,d,g,w){if((l=(a.mode&32)!==0)&&(l=!1),l){if(a.flags|=16777216,(w&335544128)===w)if(a.stateNode.complete)a.flags|=8192;else if(Ci())a.flags|=8192;else throw ja=sd,_h}else a.flags&=-16777217}function dg(a,l){if(l.type!=="stylesheet"||(l.state.loading&4)!==0)a.flags&=-16777217;else if(a.flags|=16777216,!yA(l))if(Ci())a.flags|=8192;else throw ja=sd,_h}function To(a,l){l!==null&&(a.flags|=4),a.flags&16384&&(l=a.tag!==22?Dn():536870912,a.lanes|=l,pi|=l)}function Xa(a,l){if(!Un)switch(a.tailMode){case"hidden":l=a.tail;for(var d=null;l!==null;)l.alternate!==null&&(d=l),l=l.sibling;d===null?a.tail=null:d.sibling=null;break;case"collapsed":d=a.tail;for(var g=null;d!==null;)d.alternate!==null&&(g=d),d=d.sibling;g===null?l||a.tail===null?a.tail=null:a.tail.sibling=null:g.sibling=null}}function ii(a){var l=a.alternate!==null&&a.alternate.child===a.child,d=0,g=0;if(l)for(var w=a.child;w!==null;)d|=w.lanes|w.childLanes,g|=w.subtreeFlags&65011712,g|=w.flags&65011712,w.return=a,w=w.sibling;else for(w=a.child;w!==null;)d|=w.lanes|w.childLanes,g|=w.subtreeFlags,g|=w.flags,w.return=a,w=w.sibling;return a.subtreeFlags|=g,a.childLanes=d,l}function Dh(a,l,d){var g=l.pendingProps;switch(Jf(l),l.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return ii(l),null;case 1:return ii(l),null;case 3:return d=l.stateNode,g=null,a!==null&&(g=a.memoizedState.cache),l.memoizedState.cache!==g&&(l.flags|=2048),Ha(Yi),xt(),d.pendingContext&&(d.context=d.pendingContext,d.pendingContext=null),(a===null||a.child===null)&&(Qc(l)?qa(l):a===null||a.memoizedState.isDehydrated&&(l.flags&256)===0||(l.flags|=1024,ed())),ii(l),null;case 26:var w=l.type,T=l.memoizedState;return a===null?(qa(l),T!==null?(ii(l),dg(l,T)):(ii(l),Nh(l,w,null,g,d))):T?T!==a.memoizedState?(qa(l),ii(l),dg(l,T)):(ii(l),l.flags&=-16777217):(a=a.memoizedProps,a!==g&&qa(l),ii(l),Nh(l,w,a,g,d)),null;case 27:if(hn(l),d=ge.current,w=l.type,a!==null&&l.stateNode!=null)a.memoizedProps!==g&&qa(l);else{if(!g){if(l.stateNode===null)throw Error(i(166));return ii(l),null}a=Be.current,Qc(l)?qv(l):(a=uA(w,g,d),l.stateNode=a,qa(l))}return ii(l),null;case 5:if(hn(l),w=l.type,a!==null&&l.stateNode!=null)a.memoizedProps!==g&&qa(l);else{if(!g){if(l.stateNode===null)throw Error(i(166));return ii(l),null}if(T=Be.current,Qc(l))qv(l);else{var O=Hy(ge.current);switch(T){case 1:T=O.createElementNS("http://www.w3.org/2000/svg",w);break;case 2:T=O.createElementNS("http://www.w3.org/1998/Math/MathML",w);break;default:switch(w){case"svg":T=O.createElementNS("http://www.w3.org/2000/svg",w);break;case"math":T=O.createElementNS("http://www.w3.org/1998/Math/MathML",w);break;case"script":T=O.createElement("div"),T.innerHTML="<script><\/script>",T=T.removeChild(T.firstChild);break;case"select":T=typeof g.is=="string"?O.createElement("select",{is:g.is}):O.createElement("select"),g.multiple?T.multiple=!0:g.size&&(T.size=g.size);break;default:T=typeof g.is=="string"?O.createElement(w,{is:g.is}):O.createElement(w)}}T[di]=l,T[z]=g;e:for(O=l.child;O!==null;){if(O.tag===5||O.tag===6)T.appendChild(O.stateNode);else if(O.tag!==4&&O.tag!==27&&O.child!==null){O.child.return=O,O=O.child;continue}if(O===l)break e;for(;O.sibling===null;){if(O.return===null||O.return===l)break e;O=O.return}O.sibling.return=O.return,O=O.sibling}l.stateNode=T;e:switch(es(T,w,g),w){case"button":case"input":case"select":case"textarea":g=!!g.autoFocus;break e;case"img":g=!0;break e;default:g=!1}g&&qa(l)}}return ii(l),Nh(l,l.type,a===null?null:a.memoizedProps,l.pendingProps,d),null;case 6:if(a&&l.stateNode!=null)a.memoizedProps!==g&&qa(l);else{if(typeof g!="string"&&l.stateNode===null)throw Error(i(166));if(a=ge.current,Qc(l)){if(a=l.stateNode,d=l.memoizedProps,g=null,w=Ii,w!==null)switch(w.tag){case 27:case 5:g=w.memoizedProps}a[di]=l,a=!!(a.nodeValue===d||g!==null&&g.suppressHydrationWarning===!0||QT(a.nodeValue,d)),a||za(l,!0)}else a=Hy(a).createTextNode(g),a[di]=l,l.stateNode=a}return ii(l),null;case 31:if(d=l.memoizedState,a===null||a.memoizedState!==null){if(g=Qc(l),d!==null){if(a===null){if(!g)throw Error(i(318));if(a=l.memoizedState,a=a!==null?a.dehydrated:null,!a)throw Error(i(557));a[di]=l}else al(),(l.flags&128)===0&&(l.memoizedState=null),l.flags|=4;ii(l),a=!1}else d=ed(),a!==null&&a.memoizedState!==null&&(a.memoizedState.hydrationErrors=d),a=!0;if(!a)return l.flags&256?(Bi(l),l):(Bi(l),null);if((l.flags&128)!==0)throw Error(i(558))}return ii(l),null;case 13:if(g=l.memoizedState,a===null||a.memoizedState!==null&&a.memoizedState.dehydrated!==null){if(w=Qc(l),g!==null&&g.dehydrated!==null){if(a===null){if(!w)throw Error(i(318));if(w=l.memoizedState,w=w!==null?w.dehydrated:null,!w)throw Error(i(317));w[di]=l}else al(),(l.flags&128)===0&&(l.memoizedState=null),l.flags|=4;ii(l),w=!1}else w=ed(),a!==null&&a.memoizedState!==null&&(a.memoizedState.hydrationErrors=w),w=!0;if(!w)return l.flags&256?(Bi(l),l):(Bi(l),null)}return Bi(l),(l.flags&128)!==0?(l.lanes=d,l):(d=g!==null,a=a!==null&&a.memoizedState!==null,d&&(g=l.child,w=null,g.alternate!==null&&g.alternate.memoizedState!==null&&g.alternate.memoizedState.cachePool!==null&&(w=g.alternate.memoizedState.cachePool.pool),T=null,g.memoizedState!==null&&g.memoizedState.cachePool!==null&&(T=g.memoizedState.cachePool.pool),T!==w&&(g.flags|=2048)),d!==a&&d&&(l.child.flags|=8192),To(l,l.updateQueue),ii(l),null);case 4:return xt(),a===null&&zS(l.stateNode.containerInfo),ii(l),null;case 10:return Ha(l.type),ii(l),null;case 19:if(ce(kn),g=l.memoizedState,g===null)return ii(l),null;if(w=(l.flags&128)!==0,T=g.rendering,T===null)if(w)Xa(g,!1);else{if(Ti!==0||a!==null&&(a.flags&128)!==0)for(a=l.child;a!==null;){if(T=Rs(a),T!==null){for(l.flags|=128,Xa(g,!1),a=T.updateQueue,l.updateQueue=a,To(l,a),l.subtreeFlags=0,a=d,d=l.child;d!==null;)$c(d,a),d=d.sibling;return xe(kn,kn.current&1|2),Un&&ka(l,g.treeForkCount),l.child}a=a.sibling}g.tail!==null&&B()>Vi&&(l.flags|=128,w=!0,Xa(g,!1),l.lanes=4194304)}else{if(!w)if(a=Rs(T),a!==null){if(l.flags|=128,w=!0,a=a.updateQueue,l.updateQueue=a,To(l,a),Xa(g,!0),g.tail===null&&g.tailMode==="hidden"&&!T.alternate&&!Un)return ii(l),null}else 2*B()-g.renderingStartTime>Vi&&d!==536870912&&(l.flags|=128,w=!0,Xa(g,!1),l.lanes=4194304);g.isBackwards?(T.sibling=l.child,l.child=T):(a=g.last,a!==null?a.sibling=T:l.child=T,g.last=T)}return g.tail!==null?(a=g.tail,g.rendering=a,g.tail=a.sibling,g.renderingStartTime=B(),a.sibling=null,d=kn.current,xe(kn,w?d&1|2:d&1),Un&&ka(l,g.treeForkCount),a):(ii(l),null);case 22:case 23:return Bi(l),wh(),g=l.memoizedState!==null,a!==null?a.memoizedState!==null!==g&&(l.flags|=8192):g&&(l.flags|=8192),g?(d&536870912)!==0&&(l.flags&128)===0&&(ii(l),l.subtreeFlags&6&&(l.flags|=8192)):ii(l),d=l.updateQueue,d!==null&&To(l,d.retryQueue),d=null,a!==null&&a.memoizedState!==null&&a.memoizedState.cachePool!==null&&(d=a.memoizedState.cachePool.pool),g=null,l.memoizedState!==null&&l.memoizedState.cachePool!==null&&(g=l.memoizedState.cachePool.pool),g!==d&&(l.flags|=2048),a!==null&&ce(cl),null;case 24:return d=null,a!==null&&(d=a.memoizedState.cache),l.memoizedState.cache!==d&&(l.flags|=2048),Ha(Yi),ii(l),null;case 25:return null;case 30:return null}throw Error(i(156,l.tag))}function na(a,l){switch(Jf(l),l.tag){case 1:return a=l.flags,a&65536?(l.flags=a&-65537|128,l):null;case 3:return Ha(Yi),xt(),a=l.flags,(a&65536)!==0&&(a&128)===0?(l.flags=a&-65537|128,l):null;case 26:case 27:case 5:return hn(l),null;case 31:if(l.memoizedState!==null){if(Bi(l),l.alternate===null)throw Error(i(340));al()}return a=l.flags,a&65536?(l.flags=a&-65537|128,l):null;case 13:if(Bi(l),a=l.memoizedState,a!==null&&a.dehydrated!==null){if(l.alternate===null)throw Error(i(340));al()}return a=l.flags,a&65536?(l.flags=a&-65537|128,l):null;case 19:return ce(kn),null;case 4:return xt(),null;case 10:return Ha(l.type),null;case 22:case 23:return Bi(l),wh(),a!==null&&ce(cl),a=l.flags,a&65536?(l.flags=a&-65537|128,l):null;case 24:return Ha(Yi),null;case 25:return null;default:return null}}function Ns(a,l){switch(Jf(l),l.tag){case 3:Ha(Yi),xt();break;case 26:case 27:case 5:hn(l);break;case 4:xt();break;case 31:l.memoizedState!==null&&Bi(l);break;case 13:Bi(l);break;case 19:ce(kn);break;case 10:Ha(l.type);break;case 22:case 23:Bi(l),wh(),a!==null&&ce(cl);break;case 24:Ha(Yi)}}function ia(a,l){try{var d=l.updateQueue,g=d!==null?d.lastEffect:null;if(g!==null){var w=g.next;d=w;do{if((d.tag&a)===a){g=void 0;var T=d.create,O=d.inst;g=T(),O.destroy=g}d=d.next}while(d!==w)}}catch(W){jn(l,l.return,W)}}function Ar(a,l,d){try{var g=l.updateQueue,w=g!==null?g.lastEffect:null;if(w!==null){var T=w.next;g=T;do{if((g.tag&a)===a){var O=g.inst,W=O.destroy;if(W!==void 0){O.destroy=void 0,w=l;var re=d,Me=W;try{Me()}catch(ke){jn(w,re,ke)}}}g=g.next}while(g!==T)}}catch(ke){jn(l,l.return,ke)}}function ga(a){var l=a.updateQueue;if(l!==null){var d=a.stateNode;try{Kv(l,d)}catch(g){jn(a,a.return,g)}}}function xr(a,l,d){d.props=pl(a.type,a.memoizedProps),d.state=a.memoizedState;try{d.componentWillUnmount()}catch(g){jn(a,l,g)}}function Ao(a,l){try{var d=a.ref;if(d!==null){switch(a.tag){case 26:case 27:case 5:var g=a.stateNode;break;case 30:g=a.stateNode;break;default:g=a.stateNode}typeof d=="function"?a.refCleanup=d(g):d.current=g}}catch(w){jn(a,l,w)}}function Cr(a,l){var d=a.ref,g=a.refCleanup;if(d!==null)if(typeof g=="function")try{g()}catch(w){jn(a,l,w)}finally{a.refCleanup=null,a=a.alternate,a!=null&&(a.refCleanup=null)}else if(typeof d=="function")try{d(null)}catch(w){jn(a,l,w)}else d.current=null}function Ih(a){var l=a.type,d=a.memoizedProps,g=a.stateNode;try{e:switch(l){case"button":case"input":case"select":case"textarea":d.autoFocus&&g.focus();break e;case"img":d.src?g.src=d.src:d.srcSet&&(g.srcset=d.srcSet)}}catch(w){jn(a,a.return,w)}}function cr(a,l,d){try{var g=a.stateNode;eU(g,a.type,d,l),g[z]=l}catch(w){jn(a,a.return,w)}}function xi(a){return a.tag===5||a.tag===3||a.tag===26||a.tag===27&&_u(a.type)||a.tag===4}function Pn(a){e:for(;;){for(;a.sibling===null;){if(a.return===null||xi(a.return))return null;a=a.return}for(a.sibling.return=a.return,a=a.sibling;a.tag!==5&&a.tag!==6&&a.tag!==18;){if(a.tag===27&&_u(a.type)||a.flags&2||a.child===null||a.tag===4)continue e;a.child.return=a,a=a.child}if(!(a.flags&2))return a.stateNode}}function $a(a,l,d){var g=a.tag;if(g===5||g===6)a=a.stateNode,l?(d.nodeType===9?d.body:d.nodeName==="HTML"?d.ownerDocument.body:d).insertBefore(a,l):(l=d.nodeType===9?d.body:d.nodeName==="HTML"?d.ownerDocument.body:d,l.appendChild(a),d=d._reactRootContainer,d!=null||l.onclick!==null||(l.onclick=mo));else if(g!==4&&(g===27&&_u(a.type)&&(d=a.stateNode,l=null),a=a.child,a!==null))for($a(a,l,d),a=a.sibling;a!==null;)$a(a,l,d),a=a.sibling}function Zr(a,l,d){var g=a.tag;if(g===5||g===6)a=a.stateNode,l?d.insertBefore(a,l):d.appendChild(a);else if(g!==4&&(g===27&&_u(a.type)&&(d=a.stateNode),a=a.child,a!==null))for(Zr(a,l,d),a=a.sibling;a!==null;)Zr(a,l,d),a=a.sibling}function Rd(a){var l=a.stateNode,d=a.memoizedProps;try{for(var g=a.type,w=l.attributes;w.length;)l.removeAttributeNode(w[0]);es(l,g,d),l[di]=a,l[z]=d}catch(T){jn(a,a.return,T)}}var ra=!1,li=!1,va=!1,zy=typeof WeakSet=="function"?WeakSet:Set,br=null;function US(a,l){if(a=a.containerInfo,HS=Yy,a=Vv(a),Sm(a)){if("selectionStart"in a)var d={start:a.selectionStart,end:a.selectionEnd};else e:{d=(d=a.ownerDocument)&&d.defaultView||window;var g=d.getSelection&&d.getSelection();if(g&&g.rangeCount!==0){d=g.anchorNode;var w=g.anchorOffset,T=g.focusNode;g=g.focusOffset;try{d.nodeType,T.nodeType}catch{d=null;break e}var O=0,W=-1,re=-1,Me=0,ke=0,qe=a,Ae=null;t:for(;;){for(var Le;qe!==d||w!==0&&qe.nodeType!==3||(W=O+w),qe!==T||g!==0&&qe.nodeType!==3||(re=O+g),qe.nodeType===3&&(O+=qe.nodeValue.length),(Le=qe.firstChild)!==null;)Ae=qe,qe=Le;for(;;){if(qe===a)break t;if(Ae===d&&++Me===w&&(W=O),Ae===T&&++ke===g&&(re=O),(Le=qe.nextSibling)!==null)break;qe=Ae,Ae=qe.parentNode}qe=Le}d=W===-1||re===-1?null:{start:W,end:re}}else d=null}d=d||{start:0,end:0}}else d=null;for(GS={focusedElem:a,selectionRange:d},Yy=!1,br=l;br!==null;)if(l=br,a=l.child,(l.subtreeFlags&1028)!==0&&a!==null)a.return=l,br=a;else for(;br!==null;){switch(l=br,T=l.alternate,a=l.flags,l.tag){case 0:if((a&4)!==0&&(a=l.updateQueue,a=a!==null?a.events:null,a!==null))for(d=0;d<a.length;d++)w=a[d],w.ref.impl=w.nextImpl;break;case 11:case 15:break;case 1:if((a&1024)!==0&&T!==null){a=void 0,d=l,w=T.memoizedProps,T=T.memoizedState,g=d.stateNode;try{var Bt=pl(d.type,w);a=g.getSnapshotBeforeUpdate(Bt,T),g.__reactInternalSnapshotBeforeUpdate=a}catch(rn){jn(d,d.return,rn)}}break;case 3:if((a&1024)!==0){if(a=l.stateNode.containerInfo,d=a.nodeType,d===9)qS(a);else if(d===1)switch(a.nodeName){case"HEAD":case"HTML":case"BODY":qS(a);break;default:a.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((a&1024)!==0)throw Error(i(163))}if(a=l.sibling,a!==null){a.return=l.return,br=a;break}br=l.return}}function bi(a,l,d){var g=d.flags;switch(d.tag){case 0:case 11:case 15:oa(a,d),g&4&&ia(5,d);break;case 1:if(oa(a,d),g&4)if(a=d.stateNode,l===null)try{a.componentDidMount()}catch(O){jn(d,d.return,O)}else{var w=pl(d.type,l.memoizedProps);l=l.memoizedState;try{a.componentDidUpdate(w,l,a.__reactInternalSnapshotBeforeUpdate)}catch(O){jn(d,d.return,O)}}g&64&&ga(d),g&512&&Ao(d,d.return);break;case 3:if(oa(a,d),g&64&&(a=d.updateQueue,a!==null)){if(l=null,d.child!==null)switch(d.child.tag){case 27:case 5:l=d.child.stateNode;break;case 1:l=d.child.stateNode}try{Kv(a,l)}catch(O){jn(d,d.return,O)}}break;case 27:l===null&&g&4&&Rd(d);case 26:case 5:oa(a,d),l===null&&g&4&&Ih(d),g&512&&Ao(d,d.return);break;case 12:oa(a,d);break;case 31:oa(a,d),g&4&&ml(a,d);break;case 13:oa(a,d),g&4&&uu(a,d),g&64&&(a=d.memoizedState,a!==null&&(a=a.dehydrated,a!==null&&(d=y.bind(null,d),lU(a,d))));break;case 22:if(g=d.memoizedState!==null||ra,!g){l=l!==null&&l.memoizedState!==null||li,w=ra;var T=li;ra=g,(li=l)&&!T?Kr(a,d,(d.subtreeFlags&8772)!==0):oa(a,d),ra=w,li=T}break;case 30:break;default:oa(a,d)}}function Ph(a){var l=a.alternate;l!==null&&(a.alternate=null,Ph(l)),a.child=null,a.deletions=null,a.sibling=null,a.tag===5&&(l=a.stateNode,l!==null&&Ze(l)),a.stateNode=null,a.return=null,a.dependencies=null,a.memoizedProps=null,a.memoizedState=null,a.pendingProps=null,a.stateNode=null,a.updateQueue=null}var Qn=null,zr=!1;function sa(a,l,d){for(d=d.child;d!==null;)Nd(a,l,d),d=d.sibling}function Nd(a,l,d){if($e&&typeof $e.onCommitFiberUnmount=="function")try{$e.onCommitFiberUnmount(Xe,d)}catch{}switch(d.tag){case 26:li||Cr(d,l),sa(a,l,d),d.memoizedState?d.memoizedState.count--:d.stateNode&&(d=d.stateNode,d.parentNode.removeChild(d));break;case 27:li||Cr(d,l);var g=Qn,w=zr;_u(d.type)&&(Qn=d.stateNode,zr=!1),sa(a,l,d),xg(d.stateNode),Qn=g,zr=w;break;case 5:li||Cr(d,l);case 6:if(g=Qn,w=zr,Qn=null,sa(a,l,d),Qn=g,zr=w,Qn!==null)if(zr)try{(Qn.nodeType===9?Qn.body:Qn.nodeName==="HTML"?Qn.ownerDocument.body:Qn).removeChild(d.stateNode)}catch(T){jn(d,l,T)}else try{Qn.removeChild(d.stateNode)}catch(T){jn(d,l,T)}break;case 18:Qn!==null&&(zr?(a=Qn,sA(a.nodeType===9?a.body:a.nodeName==="HTML"?a.ownerDocument.body:a,d.stateNode),Bd(a)):sA(Qn,d.stateNode));break;case 4:g=Qn,w=zr,Qn=d.stateNode.containerInfo,zr=!0,sa(a,l,d),Qn=g,zr=w;break;case 0:case 11:case 14:case 15:Ar(2,d,l),li||Ar(4,d,l),sa(a,l,d);break;case 1:li||(Cr(d,l),g=d.stateNode,typeof g.componentWillUnmount=="function"&&xr(d,l,g)),sa(a,l,d);break;case 21:sa(a,l,d);break;case 22:li=(g=li)||d.memoizedState!==null,sa(a,l,d),li=g;break;default:sa(a,l,d)}}function ml(a,l){if(l.memoizedState===null&&(a=l.alternate,a!==null&&(a=a.memoizedState,a!==null))){a=a.dehydrated;try{Bd(a)}catch(d){jn(l,l.return,d)}}}function uu(a,l){if(l.memoizedState===null&&(a=l.alternate,a!==null&&(a=a.memoizedState,a!==null&&(a=a.dehydrated,a!==null))))try{Bd(a)}catch(d){jn(l,l.return,d)}}function pg(a){switch(a.tag){case 31:case 13:case 19:var l=a.stateNode;return l===null&&(l=a.stateNode=new zy),l;case 22:return a=a.stateNode,l=a._retryCache,l===null&&(l=a._retryCache=new zy),l;default:throw Error(i(435,a.tag))}}function Co(a,l){var d=pg(a);l.forEach(function(g){if(!d.has(g)){d.add(g);var w=b.bind(null,a,g);g.then(w,w)}})}function ur(a,l){var d=l.deletions;if(d!==null)for(var g=0;g<d.length;g++){var w=d[g],T=a,O=l,W=O;e:for(;W!==null;){switch(W.tag){case 27:if(_u(W.type)){Qn=W.stateNode,zr=!1;break e}break;case 5:Qn=W.stateNode,zr=!1;break e;case 3:case 4:Qn=W.stateNode.containerInfo,zr=!0;break e}W=W.return}if(Qn===null)throw Error(i(160));Nd(T,O,w),Qn=null,zr=!1,T=w.alternate,T!==null&&(T.return=null),w.return=null}if(l.subtreeFlags&13886)for(l=l.child;l!==null;)gl(l,a),l=l.sibling}var aa=null;function gl(a,l){var d=a.alternate,g=a.flags;switch(a.tag){case 0:case 11:case 14:case 15:ur(l,a),hr(a),g&4&&(Ar(3,a,a.return),ia(3,a),Ar(5,a,a.return));break;case 1:ur(l,a),hr(a),g&512&&(li||d===null||Cr(d,d.return)),g&64&&ra&&(a=a.updateQueue,a!==null&&(g=a.callbacks,g!==null&&(d=a.shared.hiddenCallbacks,a.shared.hiddenCallbacks=d===null?g:d.concat(g))));break;case 26:var w=aa;if(ur(l,a),hr(a),g&512&&(li||d===null||Cr(d,d.return)),g&4){var T=d!==null?d.memoizedState:null;if(g=a.memoizedState,d===null)if(g===null)if(a.stateNode===null){e:{g=a.type,d=a.memoizedProps,w=w.ownerDocument||w;t:switch(g){case"title":T=w.getElementsByTagName("title")[0],(!T||T[tt]||T[di]||T.namespaceURI==="http://www.w3.org/2000/svg"||T.hasAttribute("itemprop"))&&(T=w.createElement(g),w.head.insertBefore(T,w.querySelector("head > title"))),es(T,g,d),T[di]=a,G(T),g=T;break e;case"link":var O=gA("link","href",w).get(g+(d.href||""));if(O){for(var W=0;W<O.length;W++)if(T=O[W],T.getAttribute("href")===(d.href==null||d.href===""?null:d.href)&&T.getAttribute("rel")===(d.rel==null?null:d.rel)&&T.getAttribute("title")===(d.title==null?null:d.title)&&T.getAttribute("crossorigin")===(d.crossOrigin==null?null:d.crossOrigin)){O.splice(W,1);break t}}T=w.createElement(g),es(T,g,d),w.head.appendChild(T);break;case"meta":if(O=gA("meta","content",w).get(g+(d.content||""))){for(W=0;W<O.length;W++)if(T=O[W],T.getAttribute("content")===(d.content==null?null:""+d.content)&&T.getAttribute("name")===(d.name==null?null:d.name)&&T.getAttribute("property")===(d.property==null?null:d.property)&&T.getAttribute("http-equiv")===(d.httpEquiv==null?null:d.httpEquiv)&&T.getAttribute("charset")===(d.charSet==null?null:d.charSet)){O.splice(W,1);break t}}T=w.createElement(g),es(T,g,d),w.head.appendChild(T);break;default:throw Error(i(468,g))}T[di]=a,G(T),g=T}a.stateNode=g}else vA(w,a.type,a.stateNode);else a.stateNode=mA(w,g,a.memoizedProps);else T!==g?(T===null?d.stateNode!==null&&(d=d.stateNode,d.parentNode.removeChild(d)):T.count--,g===null?vA(w,a.type,a.stateNode):mA(w,g,a.memoizedProps)):g===null&&a.stateNode!==null&&cr(a,a.memoizedProps,d.memoizedProps)}break;case 27:ur(l,a),hr(a),g&512&&(li||d===null||Cr(d,d.return)),d!==null&&g&4&&cr(a,a.memoizedProps,d.memoizedProps);break;case 5:if(ur(l,a),hr(a),g&512&&(li||d===null||Cr(d,d.return)),a.flags&32){w=a.stateNode;try{$i(w,"")}catch(Bt){jn(a,a.return,Bt)}}g&4&&a.stateNode!=null&&(w=a.memoizedProps,cr(a,w,d!==null?d.memoizedProps:w)),g&1024&&(va=!0);break;case 6:if(ur(l,a),hr(a),g&4){if(a.stateNode===null)throw Error(i(162));g=a.memoizedProps,d=a.stateNode;try{d.nodeValue=g}catch(Bt){jn(a,a.return,Bt)}}break;case 3:if(Wy=null,w=aa,aa=Gy(l.containerInfo),ur(l,a),aa=w,hr(a),g&4&&d!==null&&d.memoizedState.isDehydrated)try{Bd(l.containerInfo)}catch(Bt){jn(a,a.return,Bt)}va&&(va=!1,Dd(a));break;case 4:g=aa,aa=Gy(a.stateNode.containerInfo),ur(l,a),hr(a),aa=g;break;case 12:ur(l,a),hr(a);break;case 31:ur(l,a),hr(a),g&4&&(g=a.updateQueue,g!==null&&(a.updateQueue=null,Co(a,g)));break;case 13:ur(l,a),hr(a),a.child.flags&8192&&a.memoizedState!==null!=(d!==null&&d.memoizedState!==null)&&(hu=B()),g&4&&(g=a.updateQueue,g!==null&&(a.updateQueue=null,Co(a,g)));break;case 22:w=a.memoizedState!==null;var re=d!==null&&d.memoizedState!==null,Me=ra,ke=li;if(ra=Me||w,li=ke||re,ur(l,a),li=ke,ra=Me,hr(a),g&8192)e:for(l=a.stateNode,l._visibility=w?l._visibility&-2:l._visibility|1,w&&(d===null||re||ra||li||Ya(a)),d=null,l=a;;){if(l.tag===5||l.tag===26){if(d===null){re=d=l;try{if(T=re.stateNode,w)O=T.style,typeof O.setProperty=="function"?O.setProperty("display","none","important"):O.display="none";else{W=re.stateNode;var qe=re.memoizedProps.style,Ae=qe!=null&&qe.hasOwnProperty("display")?qe.display:null;W.style.display=Ae==null||typeof Ae=="boolean"?"":(""+Ae).trim()}}catch(Bt){jn(re,re.return,Bt)}}}else if(l.tag===6){if(d===null){re=l;try{re.stateNode.nodeValue=w?"":re.memoizedProps}catch(Bt){jn(re,re.return,Bt)}}}else if(l.tag===18){if(d===null){re=l;try{var Le=re.stateNode;w?aA(Le,!0):aA(re.stateNode,!1)}catch(Bt){jn(re,re.return,Bt)}}}else if((l.tag!==22&&l.tag!==23||l.memoizedState===null||l===a)&&l.child!==null){l.child.return=l,l=l.child;continue}if(l===a)break e;for(;l.sibling===null;){if(l.return===null||l.return===a)break e;d===l&&(d=null),l=l.return}d===l&&(d=null),l.sibling.return=l.return,l=l.sibling}g&4&&(g=a.updateQueue,g!==null&&(d=g.retryQueue,d!==null&&(g.retryQueue=null,Co(a,d))));break;case 19:ur(l,a),hr(a),g&4&&(g=a.updateQueue,g!==null&&(a.updateQueue=null,Co(a,g)));break;case 30:break;case 21:break;default:ur(l,a),hr(a)}}function hr(a){var l=a.flags;if(l&2){try{for(var d,g=a.return;g!==null;){if(xi(g)){d=g;break}g=g.return}if(d==null)throw Error(i(160));switch(d.tag){case 27:var w=d.stateNode,T=Pn(a);Zr(a,T,w);break;case 5:var O=d.stateNode;d.flags&32&&($i(O,""),d.flags&=-33);var W=Pn(a);Zr(a,W,O);break;case 3:case 4:var re=d.stateNode.containerInfo,Me=Pn(a);$a(a,Me,re);break;default:throw Error(i(161))}}catch(ke){jn(a,a.return,ke)}a.flags&=-3}l&4096&&(a.flags&=-4097)}function Dd(a){if(a.subtreeFlags&1024)for(a=a.child;a!==null;){var l=a;Dd(l),l.tag===5&&l.flags&1024&&l.stateNode.reset(),a=a.sibling}}function oa(a,l){if(l.subtreeFlags&8772)for(l=l.child;l!==null;)bi(a,l.alternate,l),l=l.sibling}function Ya(a){for(a=a.child;a!==null;){var l=a;switch(l.tag){case 0:case 11:case 14:case 15:Ar(4,l,l.return),Ya(l);break;case 1:Cr(l,l.return);var d=l.stateNode;typeof d.componentWillUnmount=="function"&&xr(l,l.return,d),Ya(l);break;case 27:xg(l.stateNode);case 26:case 5:Cr(l,l.return),Ya(l);break;case 22:l.memoizedState===null&&Ya(l);break;case 30:Ya(l);break;default:Ya(l)}a=a.sibling}}function Kr(a,l,d){for(d=d&&(l.subtreeFlags&8772)!==0,l=l.child;l!==null;){var g=l.alternate,w=a,T=l,O=T.flags;switch(T.tag){case 0:case 11:case 15:Kr(w,T,d),ia(4,T);break;case 1:if(Kr(w,T,d),g=T,w=g.stateNode,typeof w.componentDidMount=="function")try{w.componentDidMount()}catch(Me){jn(g,g.return,Me)}if(g=T,w=g.updateQueue,w!==null){var W=g.stateNode;try{var re=w.shared.hiddenCallbacks;if(re!==null)for(w.shared.hiddenCallbacks=null,w=0;w<re.length;w++)ru(re[w],W)}catch(Me){jn(g,g.return,Me)}}d&&O&64&&ga(T),Ao(T,T.return);break;case 27:Rd(T);case 26:case 5:Kr(w,T,d),d&&g===null&&O&4&&Ih(T),Ao(T,T.return);break;case 12:Kr(w,T,d);break;case 31:Kr(w,T,d),d&&O&4&&ml(w,T);break;case 13:Kr(w,T,d),d&&O&4&&uu(w,T);break;case 22:T.memoizedState===null&&Kr(w,T,d),Ao(T,T.return);break;case 30:break;default:Kr(w,T,d)}l=l.sibling}}function vl(a,l){var d=null;a!==null&&a.memoizedState!==null&&a.memoizedState.cachePool!==null&&(d=a.memoizedState.cachePool.pool),a=null,l.memoizedState!==null&&l.memoizedState.cachePool!==null&&(a=l.memoizedState.cachePool.pool),a!==d&&(a!=null&&a.refCount++,d!=null&&Zl(d))}function uc(a,l){a=null,l.alternate!==null&&(a=l.alternate.memoizedState.cache),l=l.memoizedState.cache,l!==a&&(l.refCount++,a!=null&&Zl(a))}function Rr(a,l,d,g){if(l.subtreeFlags&10256)for(l=l.child;l!==null;)mg(a,l,d,g),l=l.sibling}function mg(a,l,d,g){var w=l.flags;switch(l.tag){case 0:case 11:case 15:Rr(a,l,d,g),w&2048&&ia(9,l);break;case 1:Rr(a,l,d,g);break;case 3:Rr(a,l,d,g),w&2048&&(a=null,l.alternate!==null&&(a=l.alternate.memoizedState.cache),l=l.memoizedState.cache,l!==a&&(l.refCount++,a!=null&&Zl(a)));break;case 12:if(w&2048){Rr(a,l,d,g),a=l.stateNode;try{var T=l.memoizedProps,O=T.id,W=T.onPostCommit;typeof W=="function"&&W(O,l.alternate===null?"mount":"update",a.passiveEffectDuration,-0)}catch(re){jn(l,l.return,re)}}else Rr(a,l,d,g);break;case 31:Rr(a,l,d,g);break;case 13:Rr(a,l,d,g);break;case 23:break;case 22:T=l.stateNode,O=l.alternate,l.memoizedState!==null?T._visibility&2?Rr(a,l,d,g):Za(a,l):T._visibility&2?Rr(a,l,d,g):(T._visibility|=2,Nr(a,l,d,g,(l.subtreeFlags&10256)!==0||!1)),w&2048&&vl(O,l);break;case 24:Rr(a,l,d,g),w&2048&&uc(l.alternate,l);break;default:Rr(a,l,d,g)}}function Nr(a,l,d,g,w){for(w=w&&((l.subtreeFlags&10256)!==0||!1),l=l.child;l!==null;){var T=a,O=l,W=d,re=g,Me=O.flags;switch(O.tag){case 0:case 11:case 15:Nr(T,O,W,re,w),ia(8,O);break;case 23:break;case 22:var ke=O.stateNode;O.memoizedState!==null?ke._visibility&2?Nr(T,O,W,re,w):Za(T,O):(ke._visibility|=2,Nr(T,O,W,re,w)),w&&Me&2048&&vl(O.alternate,O);break;case 24:Nr(T,O,W,re,w),w&&Me&2048&&uc(O.alternate,O);break;default:Nr(T,O,W,re,w)}l=l.sibling}}function Za(a,l){if(l.subtreeFlags&10256)for(l=l.child;l!==null;){var d=a,g=l,w=g.flags;switch(g.tag){case 22:Za(d,g),w&2048&&vl(g.alternate,g);break;case 24:Za(d,g),w&2048&&uc(g.alternate,g);break;default:Za(d,g)}l=l.sibling}}var hc=8192;function Ds(a,l,d){if(a.subtreeFlags&hc)for(a=a.child;a!==null;)Id(a,l,d),a=a.sibling}function Id(a,l,d){switch(a.tag){case 26:Ds(a,l,d),a.flags&hc&&a.memoizedState!==null&&xU(d,aa,a.memoizedState,a.memoizedProps);break;case 5:Ds(a,l,d);break;case 3:case 4:var g=aa;aa=Gy(a.stateNode.containerInfo),Ds(a,l,d),aa=g;break;case 22:a.memoizedState===null&&(g=a.alternate,g!==null&&g.memoizedState!==null?(g=hc,hc=16777216,Ds(a,l,d),hc=g):Ds(a,l,d));break;default:Ds(a,l,d)}}function fc(a){var l=a.alternate;if(l!==null&&(a=l.child,a!==null)){l.child=null;do l=a.sibling,a.sibling=null,a=l;while(a!==null)}}function yl(a){var l=a.deletions;if((a.flags&16)!==0){if(l!==null)for(var d=0;d<l.length;d++){var g=l[d];br=g,Pi(g,a)}fc(a)}if(a.subtreeFlags&10256)for(a=a.child;a!==null;)ds(a),a=a.sibling}function ds(a){switch(a.tag){case 0:case 11:case 15:yl(a),a.flags&2048&&Ar(9,a,a.return);break;case 3:yl(a);break;case 12:yl(a);break;case 22:var l=a.stateNode;a.memoizedState!==null&&l._visibility&2&&(a.return===null||a.return.tag!==13)?(l._visibility&=-3,ps(a)):yl(a);break;default:yl(a)}}function ps(a){var l=a.deletions;if((a.flags&16)!==0){if(l!==null)for(var d=0;d<l.length;d++){var g=l[d];br=g,Pi(g,a)}fc(a)}for(a=a.child;a!==null;){switch(l=a,l.tag){case 0:case 11:case 15:Ar(8,l,l.return),ps(l);break;case 22:d=l.stateNode,d._visibility&2&&(d._visibility&=-3,ps(l));break;default:ps(l)}a=a.sibling}}function Pi(a,l){for(;br!==null;){var d=br;switch(d.tag){case 0:case 11:case 15:Ar(8,d,l);break;case 23:case 22:if(d.memoizedState!==null&&d.memoizedState.cachePool!==null){var g=d.memoizedState.cachePool.pool;g!=null&&g.refCount++}break;case 24:Zl(d.memoizedState.cache)}if(g=d.child,g!==null)g.return=d,br=g;else e:for(d=a;br!==null;){g=br;var w=g.sibling,T=g.return;if(Ph(g),g===d){br=null;break e}if(w!==null){w.return=T,br=w;break e}br=T}}}var Ro={getCacheForType:function(a){var l=sn(Yi),d=l.data.get(a);return d===void 0&&(d=a(),l.data.set(a,d)),d},cacheSignal:function(){return sn(Yi).controller.signal}},mn=typeof WeakMap=="function"?WeakMap:Map,Wt=0,cn=null,Sn=null,_n=0,Bn=0,Fr=null,la=!1,ya=!1,gg=!1,Is=0,Ti=0,Ka=0,_l=0,Oh=0,Jr=0,pi=0,dc=null,Oi=null,Li=!1,hu=0,vg=0,Vi=1/0,Ai=null,Hi=null,ei=0,Ps=null,fu=null,ca=0,du=0,pu=null,Lh=null,xl=0,pc=null;function Os(){return(Wt&2)!==0&&_n!==0?_n&-_n:Z.T!==null?Ne():Ms()}function Rn(){if(Jr===0)if((_n&536870912)===0||Un){var a=et;et<<=1,(et&3932160)===0&&(et=262144),Jr=a}else Jr=536870912;return a=cs.current,a!==null&&(a.flags|=32),Jr}function wn(a,l,d){(a===cn&&(Bn===2||Bn===9)||a.cancelPendingCommit!==null)&&(Sl(a,0),Ki(a,_n,Jr,!1)),rr(a,d),((Wt&2)===0||a!==cn)&&(a===cn&&((Wt&2)===0&&(_l|=d),Ti===4&&Ki(a,_n,Jr,!1)),it(a))}function Nn(a,l,d){if((Wt&6)!==0)throw Error(i(327));var g=!d&&(l&127)===0&&(l&a.expiredLanes)===0||gt(a,l),w=g?Uh(a,l):Qr(a,l,!0),T=g;do{if(w===0){ya&&!g&&Ki(a,l,0,!1);break}else{if(d=a.current.alternate,T&&!ti(d)){w=Qr(a,l,!1),T=!1;continue}if(w===2){if(T=l,a.errorRecoveryDisabledLanes&T)var O=0;else O=a.pendingLanes&-536870913,O=O!==0?O:O&536870912?536870912:0;if(O!==0){l=O;e:{var W=a;w=dc;var re=W.current.memoizedState.isDehydrated;if(re&&(Sl(W,O).flags|=256),O=Qr(W,O,!1),O!==2){if(gg&&!re){W.errorRecoveryDisabledLanes|=T,_l|=T,w=4;break e}T=Oi,Oi=w,T!==null&&(Oi===null?Oi=T:Oi.push.apply(Oi,T))}w=O}if(T=!1,w!==2)continue}}if(w===1){Sl(a,0),Ki(a,l,0,!0);break}e:{switch(g=a,T=w,T){case 0:case 1:throw Error(i(345));case 4:if((l&4194048)!==l)break;case 6:Ki(g,l,Jr,!la);break e;case 2:Oi=null;break;case 3:case 5:break;default:throw Error(i(329))}if((l&62914560)===l&&(w=hu+300-B(),10<w)){if(Ki(g,l,Jr,!la),Fe(g,0,!0)!==0)break e;ca=l,g.timeoutHandle=iA(On.bind(null,g,d,Oi,Ai,Li,l,Jr,_l,pi,la,T,"Throttled",-0,0),w);break e}On(g,d,Oi,Ai,Li,l,Jr,_l,pi,la,T,null,-0,0)}}break}while(!0);it(a)}function On(a,l,d,g,w,T,O,W,re,Me,ke,qe,Ae,Le){if(a.timeoutHandle=-1,qe=l.subtreeFlags,qe&8192||(qe&16785408)===16785408){qe={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:mo},Id(l,T,qe);var Bt=(T&62914560)===T?hu-B():(T&4194048)===T?vg-B():0;if(Bt=bU(qe,Bt),Bt!==null){ca=T,a.cancelPendingCommit=Bt(Do.bind(null,a,l,T,d,g,w,O,W,re,ke,qe,null,Ae,Le)),Ki(a,T,O,!Me);return}}Do(a,l,T,d,g,w,O,W,re)}function ti(a){for(var l=a;;){var d=l.tag;if((d===0||d===11||d===15)&&l.flags&16384&&(d=l.updateQueue,d!==null&&(d=d.stores,d!==null)))for(var g=0;g<d.length;g++){var w=d[g],T=w.getSnapshot;w=w.value;try{if(!qr(T(),w))return!1}catch{return!1}}if(d=l.child,l.subtreeFlags&16384&&d!==null)d.return=l,l=d;else{if(l===a)break;for(;l.sibling===null;){if(l.return===null||l.return===a)return!0;l=l.return}l.sibling.return=l.return,l=l.sibling}}return!0}function Ki(a,l,d,g){l&=~Oh,l&=~_l,a.suspendedLanes|=l,a.pingedLanes&=~l,g&&(a.warmLanes|=l),g=a.expirationTimes;for(var w=l;0<w;){var T=31-wt(w),O=1<<T;g[T]=-1,w&=~O}d!==0&&Ra(a,d,l)}function _a(){return(Wt&6)===0?(It(0),!1):!0}function bl(){if(Sn!==null){if(Bn===0)var a=Sn.return;else a=Sn,Va=ol=null,Fm(a),tc=null,nc=0,a=Sn;for(;a!==null;)Ns(a.alternate,a),a=a.return;Sn=null}}function Sl(a,l){var d=a.timeoutHandle;d!==-1&&(a.timeoutHandle=-1,iU(d)),d=a.cancelPendingCommit,d!==null&&(a.cancelPendingCommit=null,d()),ca=0,bl(),cn=a,Sn=d=as(a.current,null),_n=l,Bn=0,Fr=null,la=!1,ya=gt(a,l),gg=!1,pi=Jr=Oh=_l=Ka=Ti=0,Oi=dc=null,Li=!1,(l&8)!==0&&(l|=l&32);var g=a.entangledLanes;if(g!==0)for(a=a.entanglements,g&=l;0<g;){var w=31-wt(g),T=1<<w;l|=a[w],g&=~T}return Is=l,mh(),d}function Ja(a,l){pn=null,Z.H=lu,l===Kl||l===bn?(l=Ql(),Bn=3):l===_h?(l=Ql(),Bn=4):Bn=l===xd?8:l!==null&&typeof l=="object"&&typeof l.then=="function"?6:1,Fr=l,Sn===null&&(Ti=1,_d(a,Ts(l,a.current)))}function Ci(){var a=cs.current;return a===null?!0:(_n&4194048)===_n?Yr===null:(_n&62914560)===_n||(_n&536870912)!==0?a===Yr:!1}function No(){var a=Z.H;return Z.H=lu,a===null?lu:a}function wl(){var a=Z.A;return Z.A=Ro,a}function mu(){Ti=4,la||(_n&4194048)!==_n&&cs.current!==null||(ya=!0),(Ka&134217727)===0&&(_l&134217727)===0||cn===null||Ki(cn,_n,Jr,!1)}function Qr(a,l,d){var g=Wt;Wt|=2;var w=No(),T=wl();(cn!==a||_n!==l)&&(Ai=null,Sl(a,l)),l=!1;var O=Ti;e:do try{if(Bn!==0&&Sn!==null){var W=Sn,re=Fr;switch(Bn){case 8:bl(),O=6;break e;case 3:case 2:case 9:case 6:cs.current===null&&(l=!0);var Me=Bn;if(Bn=0,Fr=null,mc(a,W,re,Me),d&&ya){O=0;break e}break;default:Me=Bn,Bn=0,Fr=null,mc(a,W,re,Me)}}gu(),O=Ti;break}catch(ke){Ja(a,ke)}while(!0);return l&&a.shellSuspendCounter++,Va=ol=null,Wt=g,Z.H=w,Z.A=T,Sn===null&&(cn=null,_n=0,mh()),O}function gu(){for(;Sn!==null;)Pd(Sn)}function Uh(a,l){var d=Wt;Wt|=2;var g=No(),w=wl();cn!==a||_n!==l?(Ai=null,Vi=B()+500,Sl(a,l)):ya=gt(a,l);e:do try{if(Bn!==0&&Sn!==null){l=Sn;var T=Fr;t:switch(Bn){case 1:Bn=0,Fr=null,mc(a,l,T,1);break;case 2:case 9:if(ls(T)){Bn=0,Fr=null,kh(l);break}l=function(){Bn!==2&&Bn!==9||cn!==a||(Bn=7),it(a)},T.then(l,l);break e;case 3:Bn=7;break e;case 4:Bn=5;break e;case 7:ls(T)?(Bn=0,Fr=null,kh(l)):(Bn=0,Fr=null,mc(a,l,T,7));break;case 5:var O=null;switch(Sn.tag){case 26:O=Sn.memoizedState;case 5:case 27:var W=Sn;if(O?yA(O):W.stateNode.complete){Bn=0,Fr=null;var re=W.sibling;if(re!==null)Sn=re;else{var Me=W.return;Me!==null?(Sn=Me,Ml(Me)):Sn=null}break t}}Bn=0,Fr=null,mc(a,l,T,5);break;case 6:Bn=0,Fr=null,mc(a,l,T,6);break;case 8:bl(),Ti=6;break e;default:throw Error(i(462))}}ms();break}catch(ke){Ja(a,ke)}while(!0);return Va=ol=null,Z.H=g,Z.A=w,Wt=d,Sn!==null?0:(cn=null,_n=0,mh(),Ti)}function ms(){for(;Sn!==null&&!ot();)Pd(Sn)}function Pd(a){var l=Cd(a.alternate,a,Is);a.memoizedProps=a.pendingProps,l===null?Ml(a):Sn=l}function kh(a){var l=a,d=l.alternate;switch(l.tag){case 15:case 0:l=Ch(d,l,l.pendingProps,l.type,void 0,_n);break;case 11:l=Ch(d,l,l.pendingProps,l.type.render,l.ref,_n);break;case 5:Fm(l);default:Ns(d,l),l=Sn=$c(l,Is),l=Cd(d,l,Is)}a.memoizedProps=a.pendingProps,l===null?Ml(a):Sn=l}function mc(a,l,d,g){Va=ol=null,Fm(l),tc=null,nc=0;var w=l.return;try{if(lr(a,w,l,d,_n)){Ti=1,_d(a,Ts(d,a.current)),Sn=null;return}}catch(T){if(w!==null)throw Sn=w,T;Ti=1,_d(a,Ts(d,a.current)),Sn=null;return}l.flags&32768?(Un||g===1?a=!0:ya||(_n&536870912)!==0?a=!1:(la=a=!0,(g===2||g===9||g===3||g===6)&&(g=cs.current,g!==null&&g.tag===13&&(g.flags|=16384))),Bh(l,a)):Ml(l)}function Ml(a){var l=a;do{if((l.flags&32768)!==0){Bh(l,la);return}a=l.return;var d=Dh(l.alternate,l,Is);if(d!==null){Sn=d;return}if(l=l.sibling,l!==null){Sn=l;return}Sn=l=a}while(l!==null);Ti===0&&(Ti=5)}function Bh(a,l){do{var d=na(a.alternate,a);if(d!==null){d.flags&=32767,Sn=d;return}if(d=a.return,d!==null&&(d.flags|=32768,d.subtreeFlags=0,d.deletions=null),!l&&(a=a.sibling,a!==null)){Sn=a;return}Sn=a=d}while(a!==null);Ti=6,Sn=null}function Do(a,l,d,g,w,T,O,W,re){a.cancelPendingCommit=null;do vu();while(ei!==0);if((Wt&6)!==0)throw Error(i(327));if(l!==null){if(l===a.current)throw Error(i(177));if(T=l.lanes|l.childLanes,T|=vr,Lr(a,d,T,O,W,re),a===cn&&(Sn=cn=null,_n=0),fu=l,Ps=a,ca=d,du=T,pu=w,Lh=g,(l.subtreeFlags&10256)!==0||(l.flags&10256)!==0?(a.callbackNode=null,a.callbackPriority=0,R(De,function(){return Od(),null})):(a.callbackNode=null,a.callbackPriority=0),g=(l.flags&13878)!==0,(l.subtreeFlags&13878)!==0||g){g=Z.T,Z.T=null,w=Q.p,Q.p=2,O=Wt,Wt|=4;try{US(a,l,d)}finally{Wt=O,Q.p=w,Z.T=g}}ei=1,Ji(),Io(),gc()}}function Ji(){if(ei===1){ei=0;var a=Ps,l=fu,d=(l.flags&13878)!==0;if((l.subtreeFlags&13878)!==0||d){d=Z.T,Z.T=null;var g=Q.p;Q.p=2;var w=Wt;Wt|=4;try{gl(l,a);var T=GS,O=Vv(a.containerInfo),W=T.focusedElem,re=T.selectionRange;if(O!==W&&W&&W.ownerDocument&&ai(W.ownerDocument.documentElement,W)){if(re!==null&&Sm(W)){var Me=re.start,ke=re.end;if(ke===void 0&&(ke=Me),"selectionStart"in W)W.selectionStart=Me,W.selectionEnd=Math.min(ke,W.value.length);else{var qe=W.ownerDocument||document,Ae=qe&&qe.defaultView||window;if(Ae.getSelection){var Le=Ae.getSelection(),Bt=W.textContent.length,rn=Math.min(re.start,Bt),ui=re.end===void 0?rn:Math.min(re.end,Bt);!Le.extend&&rn>ui&&(O=ui,ui=rn,rn=O);var ye=Wc(W,rn),ue=Wc(W,ui);if(ye&&ue&&(Le.rangeCount!==1||Le.anchorNode!==ye.node||Le.anchorOffset!==ye.offset||Le.focusNode!==ue.node||Le.focusOffset!==ue.offset)){var Se=qe.createRange();Se.setStart(ye.node,ye.offset),Le.removeAllRanges(),rn>ui?(Le.addRange(Se),Le.extend(ue.node,ue.offset)):(Se.setEnd(ue.node,ue.offset),Le.addRange(Se))}}}}for(qe=[],Le=W;Le=Le.parentNode;)Le.nodeType===1&&qe.push({element:Le,left:Le.scrollLeft,top:Le.scrollTop});for(typeof W.focus=="function"&&W.focus(),W=0;W<qe.length;W++){var We=qe[W];We.element.scrollLeft=We.left,We.element.scrollTop=We.top}}Yy=!!HS,GS=HS=null}finally{Wt=w,Q.p=g,Z.T=d}}a.current=l,ei=2}}function Io(){if(ei===2){ei=0;var a=Ps,l=fu,d=(l.flags&8772)!==0;if((l.subtreeFlags&8772)!==0||d){d=Z.T,Z.T=null;var g=Q.p;Q.p=2;var w=Wt;Wt|=4;try{bi(a,l.alternate,l)}finally{Wt=w,Q.p=g,Z.T=d}}ei=3}}function gc(){if(ei===4||ei===3){ei=0,$();var a=Ps,l=fu,d=ca,g=Lh;(l.subtreeFlags&10256)!==0||(l.flags&10256)!==0?ei=5:(ei=0,fu=Ps=null,Qa(a,a.pendingLanes));var w=a.pendingLanes;if(w===0&&(Hi=null),jr(d),l=l.stateNode,$e&&typeof $e.onCommitFiberRoot=="function")try{$e.onCommitFiberRoot(Xe,l,void 0,(l.current.flags&128)===128)}catch{}if(g!==null){l=Z.T,w=Q.p,Q.p=2,Z.T=null;try{for(var T=a.onRecoverableError,O=0;O<g.length;O++){var W=g[O];T(W.value,{componentStack:W.stack})}}finally{Z.T=l,Q.p=w}}(ca&3)!==0&&vu(),it(a),w=a.pendingLanes,(d&261930)!==0&&(w&42)!==0?a===pc?xl++:(xl=0,pc=a):xl=0,It(0)}}function Qa(a,l){(a.pooledCacheLanes&=l)===0&&(l=a.pooledCache,l!=null&&(a.pooledCache=null,Zl(l)))}function vu(){return Ji(),Io(),gc(),Od()}function Od(){if(ei!==5)return!1;var a=Ps,l=du;du=0;var d=jr(ca),g=Z.T,w=Q.p;try{Q.p=32>d?32:d,Z.T=null,d=pu,pu=null;var T=Ps,O=ca;if(ei=0,fu=Ps=null,ca=0,(Wt&6)!==0)throw Error(i(331));var W=Wt;if(Wt|=4,ds(T.current),mg(T,T.current,O,d),Wt=W,It(0,!1),$e&&typeof $e.onPostCommitFiberRoot=="function")try{$e.onPostCommitFiberRoot(Xe,T)}catch{}return!0}finally{Q.p=w,Z.T=g,Qa(a,l)}}function yg(a,l,d){l=Ts(d,l),l=lg(a.stateNode,l,2),a=ul(a,l,2),a!==null&&(rr(a,2),it(a))}function jn(a,l,d){if(a.tag===3)yg(a,a,d);else for(;l!==null;){if(l.tag===3){yg(l,a,d);break}else if(l.tag===1){var g=l.stateNode;if(typeof l.type.getDerivedStateFromError=="function"||typeof g.componentDidCatch=="function"&&(Hi===null||!Hi.has(g))){a=Ts(d,a),d=cg(2),g=ul(l,d,2),g!==null&&(Oy(d,g,l,a),rr(g,2),it(g));break}}l=l.return}}function zh(a,l,d){var g=a.pingCache;if(g===null){g=a.pingCache=new mn;var w=new Set;g.set(l,w)}else w=g.get(l),w===void 0&&(w=new Set,g.set(l,w));w.has(d)||(gg=!0,w.add(d),a=c.bind(null,a,l,d),l.then(a,a))}function c(a,l,d){var g=a.pingCache;g!==null&&g.delete(l),a.pingedLanes|=a.suspendedLanes&d,a.warmLanes&=~d,cn===a&&(_n&d)===d&&(Ti===4||Ti===3&&(_n&62914560)===_n&&300>B()-hu?(Wt&2)===0&&Sl(a,0):Oh|=d,pi===_n&&(pi=0)),it(a)}function h(a,l){l===0&&(l=Dn()),a=Xr(a,l),a!==null&&(rr(a,l),it(a))}function y(a){var l=a.memoizedState,d=0;l!==null&&(d=l.retryLane),h(a,d)}function b(a,l){var d=0;switch(a.tag){case 31:case 13:var g=a.stateNode,w=a.memoizedState;w!==null&&(d=w.retryLane);break;case 19:g=a.stateNode;break;case 22:g=a.stateNode._retryCache;break;default:throw Error(i(314))}g!==null&&g.delete(l),h(a,d)}function R(a,l){return St(a,l)}var D=null,j=null,ae=!1,Pe=!1,Ke=!1,_t=0;function it(a){a!==j&&a.next===null&&(j===null?D=j=a:j=j.next=a),Pe=!0,ae||(ae=!0,_e())}function It(a,l){if(!Ke&&Pe){Ke=!0;do for(var d=!1,g=D;g!==null;){if(a!==0){var w=g.pendingLanes;if(w===0)var T=0;else{var O=g.suspendedLanes,W=g.pingedLanes;T=(1<<31-wt(42|a)+1)-1,T&=w&~(O&~W),T=T&201326741?T&201326741|1:T?T|2:0}T!==0&&(d=!0,Ee(g,T))}else T=_n,T=Fe(g,g===cn?T:0,g.cancelPendingCommit!==null||g.timeoutHandle!==-1),(T&3)===0||gt(g,T)||(d=!0,Ee(g,T));g=g.next}while(d);Ke=!1}}function dn(){Gi()}function Gi(){Pe=ae=!1;var a=0;_t!==0&&nU()&&(a=_t);for(var l=B(),d=null,g=D;g!==null;){var w=g.next,T=yu(g,l);T===0?(g.next=null,d===null?D=w:d.next=w,w===null&&(j=d)):(d=g,(a!==0||(T&3)!==0)&&(Pe=!0)),g=w}ei!==0&&ei!==5||It(a),_t!==0&&(_t=0)}function yu(a,l){for(var d=a.suspendedLanes,g=a.pingedLanes,w=a.expirationTimes,T=a.pendingLanes&-62914561;0<T;){var O=31-wt(T),W=1<<O,re=w[O];re===-1?((W&d)===0||(W&g)!==0)&&(w[O]=nn(W,l)):re<=l&&(a.expiredLanes|=W),T&=~W}if(l=cn,d=_n,d=Fe(a,a===l?d:0,a.cancelPendingCommit!==null||a.timeoutHandle!==-1),g=a.callbackNode,d===0||a===l&&(Bn===2||Bn===9)||a.cancelPendingCommit!==null)return g!==null&&g!==null&&Vt(g),a.callbackNode=null,a.callbackPriority=0;if((d&3)===0||gt(a,d)){if(l=d&-d,l===a.callbackPriority)return l;switch(g!==null&&Vt(g),jr(d)){case 2:case 8:d=Ge;break;case 32:d=De;break;case 268435456:d=ht;break;default:d=De}return g=El.bind(null,a),d=St(d,g),a.callbackPriority=l,a.callbackNode=d,l}return g!==null&&g!==null&&Vt(g),a.callbackPriority=2,a.callbackNode=null,2}function El(a,l){if(ei!==0&&ei!==5)return a.callbackNode=null,a.callbackPriority=0,null;var d=a.callbackNode;if(vu()&&a.callbackNode!==d)return null;var g=_n;return g=Fe(a,a===cn?g:0,a.cancelPendingCommit!==null||a.timeoutHandle!==-1),g===0?null:(Nn(a,g,l),yu(a,B()),a.callbackNode!=null&&a.callbackNode===d?El.bind(null,a):null)}function Ee(a,l){if(vu())return null;Nn(a,l,!0)}function _e(){rU(function(){(Wt&6)!==0?St(Ie,dn):Gi()})}function Ne(){if(_t===0){var a=bo;a===0&&(a=Ce,Ce<<=1,(Ce&261888)===0&&(Ce=256)),_t=a}return _t}function dt(a){return a==null||typeof a=="symbol"||typeof a=="boolean"?null:typeof a=="function"?a:th(""+a)}function en(a,l){var d=l.ownerDocument.createElement("input");return d.name=l.name,d.value=l.value,a.id&&d.setAttribute("form",a.id),l.parentNode.insertBefore(d,l),a=new FormData(a),d.parentNode.removeChild(d),a}function Ri(a,l,d,g,w){if(l==="submit"&&d&&d.stateNode===w){var T=dt((w[z]||null).action),O=g.submitter;O&&(l=(l=O[z]||null)?dt(l.formAction):O.getAttribute("formAction"),l!==null&&(T=l,O=null));var W=new rh("action","action",null,g,w);a.push({event:W,listeners:[{instance:null,listener:function(){if(g.defaultPrevented){if(_t!==0){var re=O?en(w,O):new FormData(w);eg(d,{pending:!0,data:re,method:w.method,action:T},null,re)}}else typeof T=="function"&&(W.preventDefault(),re=O?en(w,O):new FormData(w),eg(d,{pending:!0,data:re,method:w.method,action:T},T,re))},currentTarget:w}]})}}for(var tn=0;tn<dh.length;tn++){var Fn=dh[tn],Sr=Fn.toLowerCase(),Xn=Fn[0].toUpperCase()+Fn.slice(1);Ys(Sr,"on"+Xn)}Ys(Xf,"onAnimationEnd"),Ys(fh,"onAnimationIteration"),Ys(Mm,"onAnimationStart"),Ys("dblclick","onDoubleClick"),Ys("focusin","onFocus"),Ys("focusout","onBlur"),Ys(Gv,"onTransitionRun"),Ys(CS,"onTransitionStart"),Ys(jv,"onTransitionCancel"),Ys(Em,"onTransitionEnd"),oe("onMouseEnter",["mouseout","mouseover"]),oe("onMouseLeave",["mouseout","mouseover"]),oe("onPointerEnter",["pointerout","pointerover"]),oe("onPointerLeave",["pointerout","pointerover"]),me("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),me("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),me("onBeforeInput",["compositionend","keypress","textInput","paste"]),me("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),me("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),me("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var ua="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),kS=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(ua));function YT(a,l){l=(l&4)!==0;for(var d=0;d<a.length;d++){var g=a[d],w=g.event;g=g.listeners;e:{var T=void 0;if(l)for(var O=g.length-1;0<=O;O--){var W=g[O],re=W.instance,Me=W.currentTarget;if(W=W.listener,re!==T&&w.isPropagationStopped())break e;T=W,w.currentTarget=Me;try{T(w)}catch(ke){ph(ke)}w.currentTarget=null,T=re}else for(O=0;O<g.length;O++){if(W=g[O],re=W.instance,Me=W.currentTarget,W=W.listener,re!==T&&w.isPropagationStopped())break e;T=W,w.currentTarget=Me;try{T(w)}catch(ke){ph(ke)}w.currentTarget=null,T=re}}}}function zn(a,l){var d=l[se];d===void 0&&(d=l[se]=new Set);var g=a+"__bubble";d.has(g)||(ZT(l,a,2,!1),d.add(g))}function BS(a,l,d){var g=0;l&&(g|=4),ZT(d,a,g,l)}var Fy="_reactListening"+Math.random().toString(36).slice(2);function zS(a){if(!a[Fy]){a[Fy]=!0,ne.forEach(function(d){d!=="selectionchange"&&(kS.has(d)||BS(d,!1,a),BS(d,!0,a))});var l=a.nodeType===9?a:a.ownerDocument;l===null||l[Fy]||(l[Fy]=!0,BS("selectionchange",!1,l))}}function ZT(a,l,d,g){switch(EA(l)){case 2:var w=MU;break;case 8:w=EU;break;default:w=e1}d=w.bind(null,l,d,a),w=void 0,!am||l!=="touchstart"&&l!=="touchmove"&&l!=="wheel"||(w=!0),g?w!==void 0?a.addEventListener(l,d,{capture:!0,passive:w}):a.addEventListener(l,d,!0):w!==void 0?a.addEventListener(l,d,{passive:w}):a.addEventListener(l,d,!1)}function FS(a,l,d,g,w){var T=g;if((l&1)===0&&(l&2)===0&&g!==null)e:for(;;){if(g===null)return;var O=g.tag;if(O===3||O===4){var W=g.stateNode.containerInfo;if(W===w)break;if(O===4)for(O=g.return;O!==null;){var re=O.tag;if((re===3||re===4)&&O.stateNode.containerInfo===w)return;O=O.return}for(;W!==null;){if(O=ft(W),O===null)return;if(re=O.tag,re===5||re===6||re===26||re===27){g=T=O;continue e}W=W.parentNode}}g=g.return}sm(function(){var Me=T,ke=Of(d),qe=[];e:{var Ae=$s.get(a);if(Ae!==void 0){var Le=rh,Bt=a;switch(a){case"keypress":if(ih(d)===0)break e;case"keydown":case"keyup":Le=Wl;break;case"focusin":Bt="focus",Le=Bf;break;case"focusout":Bt="blur",Le=Bf;break;case"beforeblur":case"afterblur":Le=Bf;break;case"click":if(d.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":Le=om;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":Le=wv;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":Le=Rv;break;case Xf:case fh:case Mm:Le=ES;break;case Em:Le=AS;break;case"scroll":case"scrollend":Le=bv;break;case"wheel":Le=Dv;break;case"copy":case"cut":case"paste":Le=Ev;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":Le=um;break;case"toggle":case"beforetoggle":Le=Pv}var rn=(l&4)!==0,ui=!rn&&(a==="scroll"||a==="scrollend"),ye=rn?Ae!==null?Ae+"Capture":null:Ae;rn=[];for(var ue=Me,Se;ue!==null;){var We=ue;if(Se=We.stateNode,We=We.tag,We!==5&&We!==26&&We!==27||Se===null||ye===null||(We=Uc(ue,ye),We!=null&&rn.push(_g(ue,We,Se))),ui)break;ue=ue.return}0<rn.length&&(Ae=new Le(Ae,Bt,null,d,ke),qe.push({event:Ae,listeners:rn}))}}if((l&7)===0){e:{if(Ae=a==="mouseover"||a==="pointerover",Le=a==="mouseout"||a==="pointerout",Ae&&d!==Pf&&(Bt=d.relatedTarget||d.fromElement)&&(ft(Bt)||Bt[q]))break e;if((Le||Ae)&&(Ae=ke.window===ke?ke:(Ae=ke.ownerDocument)?Ae.defaultView||Ae.parentWindow:window,Le?(Bt=d.relatedTarget||d.toElement,Le=Me,Bt=Bt?ft(Bt):null,Bt!==null&&(ui=s(Bt),rn=Bt.tag,Bt!==ui||rn!==5&&rn!==27&&rn!==6)&&(Bt=null)):(Le=null,Bt=Me),Le!==Bt)){if(rn=om,We="onMouseLeave",ye="onMouseEnter",ue="mouse",(a==="pointerout"||a==="pointerover")&&(rn=um,We="onPointerLeave",ye="onPointerEnter",ue="pointer"),ui=Le==null?Ae:vt(Le),Se=Bt==null?Ae:vt(Bt),Ae=new rn(We,ue+"leave",Le,d,ke),Ae.target=ui,Ae.relatedTarget=Se,We=null,ft(ke)===Me&&(rn=new rn(ye,ue+"enter",Bt,d,ke),rn.target=Se,rn.relatedTarget=ui,We=rn),ui=We,Le&&Bt)t:{for(rn=KL,ye=Le,ue=Bt,Se=0,We=ye;We;We=rn(We))Se++;We=0;for(var Kt=ue;Kt;Kt=rn(Kt))We++;for(;0<Se-We;)ye=rn(ye),Se--;for(;0<We-Se;)ue=rn(ue),We--;for(;Se--;){if(ye===ue||ue!==null&&ye===ue.alternate){rn=ye;break t}ye=rn(ye),ue=rn(ue)}rn=null}else rn=null;Le!==null&&KT(qe,Ae,Le,rn,!1),Bt!==null&&ui!==null&&KT(qe,ui,Bt,rn,!0)}}e:{if(Ae=Me?vt(Me):window,Le=Ae.nodeName&&Ae.nodeName.toLowerCase(),Le==="select"||Le==="input"&&Ae.type==="file")var Kn=vm;else if(gm(Ae))if(Pa)Kn=Fv;else{Kn=xm;var Gt=Bv}else Le=Ae.nodeName,!Le||Le.toLowerCase()!=="input"||Ae.type!=="checkbox"&&Ae.type!=="radio"?Me&&qs(Me.elementType)&&(Kn=vm):Kn=zv;if(Kn&&(Kn=Kn(a,Me))){Wf(qe,Kn,d,ke);break e}Gt&&Gt(a,Ae,Me),a==="focusout"&&Me&&Ae.type==="number"&&Me.memoizedProps.value!=null&&Tn(Ae,"number",Ae.value)}switch(Gt=Me?vt(Me):window,a){case"focusin":(gm(Gt)||Gt.contentEditable==="true")&&(Oa=Gt,La=Me,qc=null);break;case"focusout":qc=La=Oa=null;break;case"mousedown":qf=!0;break;case"contextmenu":case"mouseup":case"dragend":qf=!1,Xc(qe,d,ke);break;case"selectionchange":if(Hv)break;case"keydown":case"keyup":Xc(qe,d,ke)}var An;if(ql)e:{switch(a){case"compositionstart":var Vn="onCompositionStart";break e;case"compositionend":Vn="onCompositionEnd";break e;case"compositionupdate":Vn="onCompositionUpdate";break e}Vn=void 0}else Xl?jf(a,d)&&(Vn="onCompositionEnd"):a==="keydown"&&d.keyCode===229&&(Vn="onCompositionStart");Vn&&(fm&&d.locale!=="ko"&&(Xl||Vn!=="onCompositionStart"?Vn==="onCompositionEnd"&&Xl&&(An=nh()):(Es=ke,Uf="value"in Es?Es.value:Es.textContent,Xl=!0)),Gt=Vy(Me,Vn),0<Gt.length&&(Vn=new zf(Vn,a,null,d,ke),qe.push({event:Vn,listeners:Gt}),An?Vn.data=An:(An=dm(d),An!==null&&(Vn.data=An)))),(An=Gf?Uv(a,d):pm(a,d))&&(Vn=Vy(Me,"onBeforeInput"),0<Vn.length&&(Gt=new zf("onBeforeInput","beforeinput",null,d,ke),qe.push({event:Gt,listeners:Vn}),Gt.data=An)),Ri(qe,a,Me,d,ke)}YT(qe,l)})}function _g(a,l,d){return{instance:a,listener:l,currentTarget:d}}function Vy(a,l){for(var d=l+"Capture",g=[];a!==null;){var w=a,T=w.stateNode;if(w=w.tag,w!==5&&w!==26&&w!==27||T===null||(w=Uc(a,d),w!=null&&g.unshift(_g(a,w,T)),w=Uc(a,l),w!=null&&g.push(_g(a,w,T))),a.tag===3)return g;a=a.return}return[]}function KL(a){if(a===null)return null;do a=a.return;while(a&&a.tag!==5&&a.tag!==27);return a||null}function KT(a,l,d,g,w){for(var T=l._reactName,O=[];d!==null&&d!==g;){var W=d,re=W.alternate,Me=W.stateNode;if(W=W.tag,re!==null&&re===g)break;W!==5&&W!==26&&W!==27||Me===null||(re=Me,w?(Me=Uc(d,T),Me!=null&&O.unshift(_g(d,Me,re))):w||(Me=Uc(d,T),Me!=null&&O.push(_g(d,Me,re)))),d=d.return}O.length!==0&&a.push({event:l,listeners:O})}var JL=/\r\n?/g,QL=/\u0000|\uFFFD/g;function JT(a){return(typeof a=="string"?a:""+a).replace(JL,`
`).replace(QL,"")}function QT(a,l){return l=JT(l),JT(a)===l}function ci(a,l,d,g,w,T){switch(d){case"children":typeof g=="string"?l==="body"||l==="textarea"&&g===""||$i(a,g):(typeof g=="number"||typeof g=="bigint")&&l!=="body"&&$i(a,""+g);break;case"className":Ut(a,"class",g);break;case"tabIndex":Ut(a,"tabindex",g);break;case"dir":case"role":case"viewBox":case"width":case"height":Ut(a,d,g);break;case"style":Hl(a,g,T);break;case"data":if(l!=="object"){Ut(a,"data",g);break}case"src":case"href":if(g===""&&(l!=="a"||d!=="href")){a.removeAttribute(d);break}if(g==null||typeof g=="function"||typeof g=="symbol"||typeof g=="boolean"){a.removeAttribute(d);break}g=th(""+g),a.setAttribute(d,g);break;case"action":case"formAction":if(typeof g=="function"){a.setAttribute(d,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof T=="function"&&(d==="formAction"?(l!=="input"&&ci(a,l,"name",w.name,w,null),ci(a,l,"formEncType",w.formEncType,w,null),ci(a,l,"formMethod",w.formMethod,w,null),ci(a,l,"formTarget",w.formTarget,w,null)):(ci(a,l,"encType",w.encType,w,null),ci(a,l,"method",w.method,w,null),ci(a,l,"target",w.target,w,null)));if(g==null||typeof g=="symbol"||typeof g=="boolean"){a.removeAttribute(d);break}g=th(""+g),a.setAttribute(d,g);break;case"onClick":g!=null&&(a.onclick=mo);break;case"onScroll":g!=null&&zn("scroll",a);break;case"onScrollEnd":g!=null&&zn("scrollend",a);break;case"dangerouslySetInnerHTML":if(g!=null){if(typeof g!="object"||!("__html"in g))throw Error(i(61));if(d=g.__html,d!=null){if(w.children!=null)throw Error(i(60));a.innerHTML=d}}break;case"multiple":a.multiple=g&&typeof g!="function"&&typeof g!="symbol";break;case"muted":a.muted=g&&typeof g!="function"&&typeof g!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(g==null||typeof g=="function"||typeof g=="boolean"||typeof g=="symbol"){a.removeAttribute("xlink:href");break}d=th(""+g),a.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",d);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":g!=null&&typeof g!="function"&&typeof g!="symbol"?a.setAttribute(d,""+g):a.removeAttribute(d);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":g&&typeof g!="function"&&typeof g!="symbol"?a.setAttribute(d,""):a.removeAttribute(d);break;case"capture":case"download":g===!0?a.setAttribute(d,""):g!==!1&&g!=null&&typeof g!="function"&&typeof g!="symbol"?a.setAttribute(d,g):a.removeAttribute(d);break;case"cols":case"rows":case"size":case"span":g!=null&&typeof g!="function"&&typeof g!="symbol"&&!isNaN(g)&&1<=g?a.setAttribute(d,g):a.removeAttribute(d);break;case"rowSpan":case"start":g==null||typeof g=="function"||typeof g=="symbol"||isNaN(g)?a.removeAttribute(d):a.setAttribute(d,g);break;case"popover":zn("beforetoggle",a),zn("toggle",a),ut(a,"popover",g);break;case"xlinkActuate":pt(a,"http://www.w3.org/1999/xlink","xlink:actuate",g);break;case"xlinkArcrole":pt(a,"http://www.w3.org/1999/xlink","xlink:arcrole",g);break;case"xlinkRole":pt(a,"http://www.w3.org/1999/xlink","xlink:role",g);break;case"xlinkShow":pt(a,"http://www.w3.org/1999/xlink","xlink:show",g);break;case"xlinkTitle":pt(a,"http://www.w3.org/1999/xlink","xlink:title",g);break;case"xlinkType":pt(a,"http://www.w3.org/1999/xlink","xlink:type",g);break;case"xmlBase":pt(a,"http://www.w3.org/XML/1998/namespace","xml:base",g);break;case"xmlLang":pt(a,"http://www.w3.org/XML/1998/namespace","xml:lang",g);break;case"xmlSpace":pt(a,"http://www.w3.org/XML/1998/namespace","xml:space",g);break;case"is":ut(a,"is",g);break;case"innerText":case"textContent":break;default:(!(2<d.length)||d[0]!=="o"&&d[0]!=="O"||d[1]!=="n"&&d[1]!=="N")&&(d=_v.get(d)||d,ut(a,d,g))}}function VS(a,l,d,g,w,T){switch(d){case"style":Hl(a,g,T);break;case"dangerouslySetInnerHTML":if(g!=null){if(typeof g!="object"||!("__html"in g))throw Error(i(61));if(d=g.__html,d!=null){if(w.children!=null)throw Error(i(60));a.innerHTML=d}}break;case"children":typeof g=="string"?$i(a,g):(typeof g=="number"||typeof g=="bigint")&&$i(a,""+g);break;case"onScroll":g!=null&&zn("scroll",a);break;case"onScrollEnd":g!=null&&zn("scrollend",a);break;case"onClick":g!=null&&(a.onclick=mo);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!he.hasOwnProperty(d))e:{if(d[0]==="o"&&d[1]==="n"&&(w=d.endsWith("Capture"),l=d.slice(2,w?d.length-7:void 0),T=a[z]||null,T=T!=null?T[d]:null,typeof T=="function"&&a.removeEventListener(l,T,w),typeof g=="function")){typeof T!="function"&&T!==null&&(d in a?a[d]=null:a.hasAttribute(d)&&a.removeAttribute(d)),a.addEventListener(l,g,w);break e}d in a?a[d]=g:g===!0?a.setAttribute(d,""):ut(a,d,g)}}}function es(a,l,d){switch(l){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":zn("error",a),zn("load",a);var g=!1,w=!1,T;for(T in d)if(d.hasOwnProperty(T)){var O=d[T];if(O!=null)switch(T){case"src":g=!0;break;case"srcSet":w=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(i(137,l));default:ci(a,l,T,O,d,null)}}w&&ci(a,l,"srcSet",d.srcSet,d,null),g&&ci(a,l,"src",d.src,d,null);return;case"input":zn("invalid",a);var W=T=O=w=null,re=null,Me=null;for(g in d)if(d.hasOwnProperty(g)){var ke=d[g];if(ke!=null)switch(g){case"name":w=ke;break;case"type":O=ke;break;case"checked":re=ke;break;case"defaultChecked":Me=ke;break;case"value":T=ke;break;case"defaultValue":W=ke;break;case"children":case"dangerouslySetInnerHTML":if(ke!=null)throw Error(i(137,l));break;default:ci(a,l,g,ke,d,null)}}sr(a,T,W,re,Me,O,w,!1);return;case"select":zn("invalid",a),g=O=T=null;for(w in d)if(d.hasOwnProperty(w)&&(W=d[w],W!=null))switch(w){case"value":T=W;break;case"defaultValue":O=W;break;case"multiple":g=W;default:ci(a,l,w,W,d,null)}l=T,d=O,a.multiple=!!g,l!=null?vi(a,!!g,l,!1):d!=null&&vi(a,!!g,d,!0);return;case"textarea":zn("invalid",a),T=w=g=null;for(O in d)if(d.hasOwnProperty(O)&&(W=d[O],W!=null))switch(O){case"value":g=W;break;case"defaultValue":w=W;break;case"children":T=W;break;case"dangerouslySetInnerHTML":if(W!=null)throw Error(i(91));break;default:ci(a,l,O,W,d,null)}ar(a,g,w,T);return;case"option":for(re in d)d.hasOwnProperty(re)&&(g=d[re],g!=null)&&(re==="selected"?a.selected=g&&typeof g!="function"&&typeof g!="symbol":ci(a,l,re,g,d,null));return;case"dialog":zn("beforetoggle",a),zn("toggle",a),zn("cancel",a),zn("close",a);break;case"iframe":case"object":zn("load",a);break;case"video":case"audio":for(g=0;g<ua.length;g++)zn(ua[g],a);break;case"image":zn("error",a),zn("load",a);break;case"details":zn("toggle",a);break;case"embed":case"source":case"link":zn("error",a),zn("load",a);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(Me in d)if(d.hasOwnProperty(Me)&&(g=d[Me],g!=null))switch(Me){case"children":case"dangerouslySetInnerHTML":throw Error(i(137,l));default:ci(a,l,Me,g,d,null)}return;default:if(qs(l)){for(ke in d)d.hasOwnProperty(ke)&&(g=d[ke],g!==void 0&&VS(a,l,ke,g,d,void 0));return}}for(W in d)d.hasOwnProperty(W)&&(g=d[W],g!=null&&ci(a,l,W,g,d,null))}function eU(a,l,d,g){switch(l){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var w=null,T=null,O=null,W=null,re=null,Me=null,ke=null;for(Le in d){var qe=d[Le];if(d.hasOwnProperty(Le)&&qe!=null)switch(Le){case"checked":break;case"value":break;case"defaultValue":re=qe;default:g.hasOwnProperty(Le)||ci(a,l,Le,null,g,qe)}}for(var Ae in g){var Le=g[Ae];if(qe=d[Ae],g.hasOwnProperty(Ae)&&(Le!=null||qe!=null))switch(Ae){case"type":T=Le;break;case"name":w=Le;break;case"checked":Me=Le;break;case"defaultChecked":ke=Le;break;case"value":O=Le;break;case"defaultValue":W=Le;break;case"children":case"dangerouslySetInnerHTML":if(Le!=null)throw Error(i(137,l));break;default:Le!==qe&&ci(a,l,Ae,Le,g,qe)}}Gn(a,O,W,re,Me,ke,T,w);return;case"select":Le=O=W=Ae=null;for(T in d)if(re=d[T],d.hasOwnProperty(T)&&re!=null)switch(T){case"value":break;case"multiple":Le=re;default:g.hasOwnProperty(T)||ci(a,l,T,null,g,re)}for(w in g)if(T=g[w],re=d[w],g.hasOwnProperty(w)&&(T!=null||re!=null))switch(w){case"value":Ae=T;break;case"defaultValue":W=T;break;case"multiple":O=T;default:T!==re&&ci(a,l,w,T,g,re)}l=W,d=O,g=Le,Ae!=null?vi(a,!!d,Ae,!1):!!g!=!!d&&(l!=null?vi(a,!!d,l,!0):vi(a,!!d,d?[]:"",!1));return;case"textarea":Le=Ae=null;for(W in d)if(w=d[W],d.hasOwnProperty(W)&&w!=null&&!g.hasOwnProperty(W))switch(W){case"value":break;case"children":break;default:ci(a,l,W,null,g,w)}for(O in g)if(w=g[O],T=d[O],g.hasOwnProperty(O)&&(w!=null||T!=null))switch(O){case"value":Ae=w;break;case"defaultValue":Le=w;break;case"children":break;case"dangerouslySetInnerHTML":if(w!=null)throw Error(i(91));break;default:w!==T&&ci(a,l,O,w,g,T)}$n(a,Ae,Le);return;case"option":for(var Bt in d)Ae=d[Bt],d.hasOwnProperty(Bt)&&Ae!=null&&!g.hasOwnProperty(Bt)&&(Bt==="selected"?a.selected=!1:ci(a,l,Bt,null,g,Ae));for(re in g)Ae=g[re],Le=d[re],g.hasOwnProperty(re)&&Ae!==Le&&(Ae!=null||Le!=null)&&(re==="selected"?a.selected=Ae&&typeof Ae!="function"&&typeof Ae!="symbol":ci(a,l,re,Ae,g,Le));return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var rn in d)Ae=d[rn],d.hasOwnProperty(rn)&&Ae!=null&&!g.hasOwnProperty(rn)&&ci(a,l,rn,null,g,Ae);for(Me in g)if(Ae=g[Me],Le=d[Me],g.hasOwnProperty(Me)&&Ae!==Le&&(Ae!=null||Le!=null))switch(Me){case"children":case"dangerouslySetInnerHTML":if(Ae!=null)throw Error(i(137,l));break;default:ci(a,l,Me,Ae,g,Le)}return;default:if(qs(l)){for(var ui in d)Ae=d[ui],d.hasOwnProperty(ui)&&Ae!==void 0&&!g.hasOwnProperty(ui)&&VS(a,l,ui,void 0,g,Ae);for(ke in g)Ae=g[ke],Le=d[ke],!g.hasOwnProperty(ke)||Ae===Le||Ae===void 0&&Le===void 0||VS(a,l,ke,Ae,g,Le);return}}for(var ye in d)Ae=d[ye],d.hasOwnProperty(ye)&&Ae!=null&&!g.hasOwnProperty(ye)&&ci(a,l,ye,null,g,Ae);for(qe in g)Ae=g[qe],Le=d[qe],!g.hasOwnProperty(qe)||Ae===Le||Ae==null&&Le==null||ci(a,l,qe,Ae,g,Le)}function eA(a){switch(a){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function tU(){if(typeof performance.getEntriesByType=="function"){for(var a=0,l=0,d=performance.getEntriesByType("resource"),g=0;g<d.length;g++){var w=d[g],T=w.transferSize,O=w.initiatorType,W=w.duration;if(T&&W&&eA(O)){for(O=0,W=w.responseEnd,g+=1;g<d.length;g++){var re=d[g],Me=re.startTime;if(Me>W)break;var ke=re.transferSize,qe=re.initiatorType;ke&&eA(qe)&&(re=re.responseEnd,O+=ke*(re<W?1:(W-Me)/(re-Me)))}if(--g,l+=8*(T+O)/(w.duration/1e3),a++,10<a)break}}if(0<a)return l/a/1e6}return navigator.connection&&(a=navigator.connection.downlink,typeof a=="number")?a:5}var HS=null,GS=null;function Hy(a){return a.nodeType===9?a:a.ownerDocument}function tA(a){switch(a){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function nA(a,l){if(a===0)switch(l){case"svg":return 1;case"math":return 2;default:return 0}return a===1&&l==="foreignObject"?0:a}function jS(a,l){return a==="textarea"||a==="noscript"||typeof l.children=="string"||typeof l.children=="number"||typeof l.children=="bigint"||typeof l.dangerouslySetInnerHTML=="object"&&l.dangerouslySetInnerHTML!==null&&l.dangerouslySetInnerHTML.__html!=null}var WS=null;function nU(){var a=window.event;return a&&a.type==="popstate"?a===WS?!1:(WS=a,!0):(WS=null,!1)}var iA=typeof setTimeout=="function"?setTimeout:void 0,iU=typeof clearTimeout=="function"?clearTimeout:void 0,rA=typeof Promise=="function"?Promise:void 0,rU=typeof queueMicrotask=="function"?queueMicrotask:typeof rA<"u"?function(a){return rA.resolve(null).then(a).catch(sU)}:iA;function sU(a){setTimeout(function(){throw a})}function _u(a){return a==="head"}function sA(a,l){var d=l,g=0;do{var w=d.nextSibling;if(a.removeChild(d),w&&w.nodeType===8)if(d=w.data,d==="/$"||d==="/&"){if(g===0){a.removeChild(w),Bd(l);return}g--}else if(d==="$"||d==="$?"||d==="$~"||d==="$!"||d==="&")g++;else if(d==="html")xg(a.ownerDocument.documentElement);else if(d==="head"){d=a.ownerDocument.head,xg(d);for(var T=d.firstChild;T;){var O=T.nextSibling,W=T.nodeName;T[tt]||W==="SCRIPT"||W==="STYLE"||W==="LINK"&&T.rel.toLowerCase()==="stylesheet"||d.removeChild(T),T=O}}else d==="body"&&xg(a.ownerDocument.body);d=w}while(d);Bd(l)}function aA(a,l){var d=a;a=0;do{var g=d.nextSibling;if(d.nodeType===1?l?(d._stashedDisplay=d.style.display,d.style.display="none"):(d.style.display=d._stashedDisplay||"",d.getAttribute("style")===""&&d.removeAttribute("style")):d.nodeType===3&&(l?(d._stashedText=d.nodeValue,d.nodeValue=""):d.nodeValue=d._stashedText||""),g&&g.nodeType===8)if(d=g.data,d==="/$"){if(a===0)break;a--}else d!=="$"&&d!=="$?"&&d!=="$~"&&d!=="$!"||a++;d=g}while(d)}function qS(a){var l=a.firstChild;for(l&&l.nodeType===10&&(l=l.nextSibling);l;){var d=l;switch(l=l.nextSibling,d.nodeName){case"HTML":case"HEAD":case"BODY":qS(d),Ze(d);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(d.rel.toLowerCase()==="stylesheet")continue}a.removeChild(d)}}function aU(a,l,d,g){for(;a.nodeType===1;){var w=d;if(a.nodeName.toLowerCase()!==l.toLowerCase()){if(!g&&(a.nodeName!=="INPUT"||a.type!=="hidden"))break}else if(g){if(!a[tt])switch(l){case"meta":if(!a.hasAttribute("itemprop"))break;return a;case"link":if(T=a.getAttribute("rel"),T==="stylesheet"&&a.hasAttribute("data-precedence"))break;if(T!==w.rel||a.getAttribute("href")!==(w.href==null||w.href===""?null:w.href)||a.getAttribute("crossorigin")!==(w.crossOrigin==null?null:w.crossOrigin)||a.getAttribute("title")!==(w.title==null?null:w.title))break;return a;case"style":if(a.hasAttribute("data-precedence"))break;return a;case"script":if(T=a.getAttribute("src"),(T!==(w.src==null?null:w.src)||a.getAttribute("type")!==(w.type==null?null:w.type)||a.getAttribute("crossorigin")!==(w.crossOrigin==null?null:w.crossOrigin))&&T&&a.hasAttribute("async")&&!a.hasAttribute("itemprop"))break;return a;default:return a}}else if(l==="input"&&a.type==="hidden"){var T=w.name==null?null:""+w.name;if(w.type==="hidden"&&a.getAttribute("name")===T)return a}else return a;if(a=eo(a.nextSibling),a===null)break}return null}function oU(a,l,d){if(l==="")return null;for(;a.nodeType!==3;)if((a.nodeType!==1||a.nodeName!=="INPUT"||a.type!=="hidden")&&!d||(a=eo(a.nextSibling),a===null))return null;return a}function oA(a,l){for(;a.nodeType!==8;)if((a.nodeType!==1||a.nodeName!=="INPUT"||a.type!=="hidden")&&!l||(a=eo(a.nextSibling),a===null))return null;return a}function XS(a){return a.data==="$?"||a.data==="$~"}function $S(a){return a.data==="$!"||a.data==="$?"&&a.ownerDocument.readyState!=="loading"}function lU(a,l){var d=a.ownerDocument;if(a.data==="$~")a._reactRetry=l;else if(a.data!=="$?"||d.readyState!=="loading")l();else{var g=function(){l(),d.removeEventListener("DOMContentLoaded",g)};d.addEventListener("DOMContentLoaded",g),a._reactRetry=g}}function eo(a){for(;a!=null;a=a.nextSibling){var l=a.nodeType;if(l===1||l===3)break;if(l===8){if(l=a.data,l==="$"||l==="$!"||l==="$?"||l==="$~"||l==="&"||l==="F!"||l==="F")break;if(l==="/$"||l==="/&")return null}}return a}var YS=null;function lA(a){a=a.nextSibling;for(var l=0;a;){if(a.nodeType===8){var d=a.data;if(d==="/$"||d==="/&"){if(l===0)return eo(a.nextSibling);l--}else d!=="$"&&d!=="$!"&&d!=="$?"&&d!=="$~"&&d!=="&"||l++}a=a.nextSibling}return null}function cA(a){a=a.previousSibling;for(var l=0;a;){if(a.nodeType===8){var d=a.data;if(d==="$"||d==="$!"||d==="$?"||d==="$~"||d==="&"){if(l===0)return a;l--}else d!=="/$"&&d!=="/&"||l++}a=a.previousSibling}return null}function uA(a,l,d){switch(l=Hy(d),a){case"html":if(a=l.documentElement,!a)throw Error(i(452));return a;case"head":if(a=l.head,!a)throw Error(i(453));return a;case"body":if(a=l.body,!a)throw Error(i(454));return a;default:throw Error(i(451))}}function xg(a){for(var l=a.attributes;l.length;)a.removeAttributeNode(l[0]);Ze(a)}var to=new Map,hA=new Set;function Gy(a){return typeof a.getRootNode=="function"?a.getRootNode():a.nodeType===9?a:a.ownerDocument}var vc=Q.d;Q.d={f:cU,r:uU,D:hU,C:fU,L:dU,m:pU,X:gU,S:mU,M:vU};function cU(){var a=vc.f(),l=_a();return a||l}function uU(a){var l=ct(a);l!==null&&l.tag===5&&l.type==="form"?Ey(l):vc.r(a)}var Ld=typeof document>"u"?null:document;function fA(a,l,d){var g=Ld;if(g&&typeof l=="string"&&l){var w=Mt(l);w='link[rel="'+a+'"][href="'+w+'"]',typeof d=="string"&&(w+='[crossorigin="'+d+'"]'),hA.has(w)||(hA.add(w),a={rel:a,crossOrigin:d,href:l},g.querySelector(w)===null&&(l=g.createElement("link"),es(l,"link",a),G(l),g.head.appendChild(l)))}}function hU(a){vc.D(a),fA("dns-prefetch",a,null)}function fU(a,l){vc.C(a,l),fA("preconnect",a,l)}function dU(a,l,d){vc.L(a,l,d);var g=Ld;if(g&&a&&l){var w='link[rel="preload"][as="'+Mt(l)+'"]';l==="image"&&d&&d.imageSrcSet?(w+='[imagesrcset="'+Mt(d.imageSrcSet)+'"]',typeof d.imageSizes=="string"&&(w+='[imagesizes="'+Mt(d.imageSizes)+'"]')):w+='[href="'+Mt(a)+'"]';var T=w;switch(l){case"style":T=Ud(a);break;case"script":T=kd(a)}to.has(T)||(a=v({rel:"preload",href:l==="image"&&d&&d.imageSrcSet?void 0:a,as:l},d),to.set(T,a),g.querySelector(w)!==null||l==="style"&&g.querySelector(bg(T))||l==="script"&&g.querySelector(Sg(T))||(l=g.createElement("link"),es(l,"link",a),G(l),g.head.appendChild(l)))}}function pU(a,l){vc.m(a,l);var d=Ld;if(d&&a){var g=l&&typeof l.as=="string"?l.as:"script",w='link[rel="modulepreload"][as="'+Mt(g)+'"][href="'+Mt(a)+'"]',T=w;switch(g){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":T=kd(a)}if(!to.has(T)&&(a=v({rel:"modulepreload",href:a},l),to.set(T,a),d.querySelector(w)===null)){switch(g){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(d.querySelector(Sg(T)))return}g=d.createElement("link"),es(g,"link",a),G(g),d.head.appendChild(g)}}}function mU(a,l,d){vc.S(a,l,d);var g=Ld;if(g&&a){var w=lt(g).hoistableStyles,T=Ud(a);l=l||"default";var O=w.get(T);if(!O){var W={loading:0,preload:null};if(O=g.querySelector(bg(T)))W.loading=5;else{a=v({rel:"stylesheet",href:a,"data-precedence":l},d),(d=to.get(T))&&ZS(a,d);var re=O=g.createElement("link");G(re),es(re,"link",a),re._p=new Promise(function(Me,ke){re.onload=Me,re.onerror=ke}),re.addEventListener("load",function(){W.loading|=1}),re.addEventListener("error",function(){W.loading|=2}),W.loading|=4,jy(O,l,g)}O={type:"stylesheet",instance:O,count:1,state:W},w.set(T,O)}}}function gU(a,l){vc.X(a,l);var d=Ld;if(d&&a){var g=lt(d).hoistableScripts,w=kd(a),T=g.get(w);T||(T=d.querySelector(Sg(w)),T||(a=v({src:a,async:!0},l),(l=to.get(w))&&KS(a,l),T=d.createElement("script"),G(T),es(T,"link",a),d.head.appendChild(T)),T={type:"script",instance:T,count:1,state:null},g.set(w,T))}}function vU(a,l){vc.M(a,l);var d=Ld;if(d&&a){var g=lt(d).hoistableScripts,w=kd(a),T=g.get(w);T||(T=d.querySelector(Sg(w)),T||(a=v({src:a,async:!0,type:"module"},l),(l=to.get(w))&&KS(a,l),T=d.createElement("script"),G(T),es(T,"link",a),d.head.appendChild(T)),T={type:"script",instance:T,count:1,state:null},g.set(w,T))}}function dA(a,l,d,g){var w=(w=ge.current)?Gy(w):null;if(!w)throw Error(i(446));switch(a){case"meta":case"title":return null;case"style":return typeof d.precedence=="string"&&typeof d.href=="string"?(l=Ud(d.href),d=lt(w).hoistableStyles,g=d.get(l),g||(g={type:"style",instance:null,count:0,state:null},d.set(l,g)),g):{type:"void",instance:null,count:0,state:null};case"link":if(d.rel==="stylesheet"&&typeof d.href=="string"&&typeof d.precedence=="string"){a=Ud(d.href);var T=lt(w).hoistableStyles,O=T.get(a);if(O||(w=w.ownerDocument||w,O={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},T.set(a,O),(T=w.querySelector(bg(a)))&&!T._p&&(O.instance=T,O.state.loading=5),to.has(a)||(d={rel:"preload",as:"style",href:d.href,crossOrigin:d.crossOrigin,integrity:d.integrity,media:d.media,hrefLang:d.hrefLang,referrerPolicy:d.referrerPolicy},to.set(a,d),T||yU(w,a,d,O.state))),l&&g===null)throw Error(i(528,""));return O}if(l&&g!==null)throw Error(i(529,""));return null;case"script":return l=d.async,d=d.src,typeof d=="string"&&l&&typeof l!="function"&&typeof l!="symbol"?(l=kd(d),d=lt(w).hoistableScripts,g=d.get(l),g||(g={type:"script",instance:null,count:0,state:null},d.set(l,g)),g):{type:"void",instance:null,count:0,state:null};default:throw Error(i(444,a))}}function Ud(a){return'href="'+Mt(a)+'"'}function bg(a){return'link[rel="stylesheet"]['+a+"]"}function pA(a){return v({},a,{"data-precedence":a.precedence,precedence:null})}function yU(a,l,d,g){a.querySelector('link[rel="preload"][as="style"]['+l+"]")?g.loading=1:(l=a.createElement("link"),g.preload=l,l.addEventListener("load",function(){return g.loading|=1}),l.addEventListener("error",function(){return g.loading|=2}),es(l,"link",d),G(l),a.head.appendChild(l))}function kd(a){return'[src="'+Mt(a)+'"]'}function Sg(a){return"script[async]"+a}function mA(a,l,d){if(l.count++,l.instance===null)switch(l.type){case"style":var g=a.querySelector('style[data-href~="'+Mt(d.href)+'"]');if(g)return l.instance=g,G(g),g;var w=v({},d,{"data-href":d.href,"data-precedence":d.precedence,href:null,precedence:null});return g=(a.ownerDocument||a).createElement("style"),G(g),es(g,"style",w),jy(g,d.precedence,a),l.instance=g;case"stylesheet":w=Ud(d.href);var T=a.querySelector(bg(w));if(T)return l.state.loading|=4,l.instance=T,G(T),T;g=pA(d),(w=to.get(w))&&ZS(g,w),T=(a.ownerDocument||a).createElement("link"),G(T);var O=T;return O._p=new Promise(function(W,re){O.onload=W,O.onerror=re}),es(T,"link",g),l.state.loading|=4,jy(T,d.precedence,a),l.instance=T;case"script":return T=kd(d.src),(w=a.querySelector(Sg(T)))?(l.instance=w,G(w),w):(g=d,(w=to.get(T))&&(g=v({},d),KS(g,w)),a=a.ownerDocument||a,w=a.createElement("script"),G(w),es(w,"link",g),a.head.appendChild(w),l.instance=w);case"void":return null;default:throw Error(i(443,l.type))}else l.type==="stylesheet"&&(l.state.loading&4)===0&&(g=l.instance,l.state.loading|=4,jy(g,d.precedence,a));return l.instance}function jy(a,l,d){for(var g=d.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),w=g.length?g[g.length-1]:null,T=w,O=0;O<g.length;O++){var W=g[O];if(W.dataset.precedence===l)T=W;else if(T!==w)break}T?T.parentNode.insertBefore(a,T.nextSibling):(l=d.nodeType===9?d.head:d,l.insertBefore(a,l.firstChild))}function ZS(a,l){a.crossOrigin==null&&(a.crossOrigin=l.crossOrigin),a.referrerPolicy==null&&(a.referrerPolicy=l.referrerPolicy),a.title==null&&(a.title=l.title)}function KS(a,l){a.crossOrigin==null&&(a.crossOrigin=l.crossOrigin),a.referrerPolicy==null&&(a.referrerPolicy=l.referrerPolicy),a.integrity==null&&(a.integrity=l.integrity)}var Wy=null;function gA(a,l,d){if(Wy===null){var g=new Map,w=Wy=new Map;w.set(d,g)}else w=Wy,g=w.get(d),g||(g=new Map,w.set(d,g));if(g.has(a))return g;for(g.set(a,null),d=d.getElementsByTagName(a),w=0;w<d.length;w++){var T=d[w];if(!(T[tt]||T[di]||a==="link"&&T.getAttribute("rel")==="stylesheet")&&T.namespaceURI!=="http://www.w3.org/2000/svg"){var O=T.getAttribute(l)||"";O=a+O;var W=g.get(O);W?W.push(T):g.set(O,[T])}}return g}function vA(a,l,d){a=a.ownerDocument||a,a.head.insertBefore(d,l==="title"?a.querySelector("head > title"):null)}function _U(a,l,d){if(d===1||l.itemProp!=null)return!1;switch(a){case"meta":case"title":return!0;case"style":if(typeof l.precedence!="string"||typeof l.href!="string"||l.href==="")break;return!0;case"link":if(typeof l.rel!="string"||typeof l.href!="string"||l.href===""||l.onLoad||l.onError)break;return l.rel==="stylesheet"?(a=l.disabled,typeof l.precedence=="string"&&a==null):!0;case"script":if(l.async&&typeof l.async!="function"&&typeof l.async!="symbol"&&!l.onLoad&&!l.onError&&l.src&&typeof l.src=="string")return!0}return!1}function yA(a){return!(a.type==="stylesheet"&&(a.state.loading&3)===0)}function xU(a,l,d,g){if(d.type==="stylesheet"&&(typeof g.media!="string"||matchMedia(g.media).matches!==!1)&&(d.state.loading&4)===0){if(d.instance===null){var w=Ud(g.href),T=l.querySelector(bg(w));if(T){l=T._p,l!==null&&typeof l=="object"&&typeof l.then=="function"&&(a.count++,a=qy.bind(a),l.then(a,a)),d.state.loading|=4,d.instance=T,G(T);return}T=l.ownerDocument||l,g=pA(g),(w=to.get(w))&&ZS(g,w),T=T.createElement("link"),G(T);var O=T;O._p=new Promise(function(W,re){O.onload=W,O.onerror=re}),es(T,"link",g),d.instance=T}a.stylesheets===null&&(a.stylesheets=new Map),a.stylesheets.set(d,l),(l=d.state.preload)&&(d.state.loading&3)===0&&(a.count++,d=qy.bind(a),l.addEventListener("load",d),l.addEventListener("error",d))}}var JS=0;function bU(a,l){return a.stylesheets&&a.count===0&&$y(a,a.stylesheets),0<a.count||0<a.imgCount?function(d){var g=setTimeout(function(){if(a.stylesheets&&$y(a,a.stylesheets),a.unsuspend){var T=a.unsuspend;a.unsuspend=null,T()}},6e4+l);0<a.imgBytes&&JS===0&&(JS=62500*tU());var w=setTimeout(function(){if(a.waitingForImages=!1,a.count===0&&(a.stylesheets&&$y(a,a.stylesheets),a.unsuspend)){var T=a.unsuspend;a.unsuspend=null,T()}},(a.imgBytes>JS?50:800)+l);return a.unsuspend=d,function(){a.unsuspend=null,clearTimeout(g),clearTimeout(w)}}:null}function qy(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)$y(this,this.stylesheets);else if(this.unsuspend){var a=this.unsuspend;this.unsuspend=null,a()}}}var Xy=null;function $y(a,l){a.stylesheets=null,a.unsuspend!==null&&(a.count++,Xy=new Map,l.forEach(SU,a),Xy=null,qy.call(a))}function SU(a,l){if(!(l.state.loading&4)){var d=Xy.get(a);if(d)var g=d.get(null);else{d=new Map,Xy.set(a,d);for(var w=a.querySelectorAll("link[data-precedence],style[data-precedence]"),T=0;T<w.length;T++){var O=w[T];(O.nodeName==="LINK"||O.getAttribute("media")!=="not all")&&(d.set(O.dataset.precedence,O),g=O)}g&&d.set(null,g)}w=l.instance,O=w.getAttribute("data-precedence"),T=d.get(O)||g,T===g&&d.set(null,w),d.set(O,w),this.count++,g=qy.bind(this),w.addEventListener("load",g),w.addEventListener("error",g),T?T.parentNode.insertBefore(w,T.nextSibling):(a=a.nodeType===9?a.head:a,a.insertBefore(w,a.firstChild)),l.state.loading|=4}}var wg={$$typeof:N,Provider:null,Consumer:null,_currentValue:ve,_currentValue2:ve,_threadCount:0};function wU(a,l,d,g,w,T,O,W,re){this.tag=1,this.containerInfo=a,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Ln(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Ln(0),this.hiddenUpdates=Ln(null),this.identifierPrefix=g,this.onUncaughtError=w,this.onCaughtError=T,this.onRecoverableError=O,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=re,this.incompleteTransitions=new Map}function _A(a,l,d,g,w,T,O,W,re,Me,ke,qe){return a=new wU(a,l,d,O,re,Me,ke,qe,W),l=1,T===!0&&(l|=24),T=wi(3,null,null,l),a.current=T,T.stateNode=a,l=Am(),l.refCount++,a.pooledCache=l,l.refCount++,T.memoizedState={element:g,isDehydrated:d,cache:l},bh(T),a}function xA(a){return a?(a=nl,a):nl}function bA(a,l,d,g,w,T){w=xA(w),g.context===null?g.context=w:g.pendingContext=w,g=wo(l),g.payload={element:d},T=T===void 0?null:T,T!==null&&(g.callback=T),d=ul(a,g,l),d!==null&&(wn(d,a,l),hl(d,a,l))}function SA(a,l){if(a=a.memoizedState,a!==null&&a.dehydrated!==null){var d=a.retryLane;a.retryLane=d!==0&&d<l?d:l}}function QS(a,l){SA(a,l),(a=a.alternate)&&SA(a,l)}function wA(a){if(a.tag===13||a.tag===31){var l=Xr(a,67108864);l!==null&&wn(l,a,67108864),QS(a,67108864)}}function MA(a){if(a.tag===13||a.tag===31){var l=Os();l=Da(l);var d=Xr(a,l);d!==null&&wn(d,a,l),QS(a,l)}}var Yy=!0;function MU(a,l,d,g){var w=Z.T;Z.T=null;var T=Q.p;try{Q.p=2,e1(a,l,d,g)}finally{Q.p=T,Z.T=w}}function EU(a,l,d,g){var w=Z.T;Z.T=null;var T=Q.p;try{Q.p=8,e1(a,l,d,g)}finally{Q.p=T,Z.T=w}}function e1(a,l,d,g){if(Yy){var w=t1(g);if(w===null)FS(a,l,g,Zy,d),TA(a,g);else if(AU(w,a,l,d,g))g.stopPropagation();else if(TA(a,g),l&4&&-1<TU.indexOf(a)){for(;w!==null;){var T=ct(w);if(T!==null)switch(T.tag){case 3:if(T=T.stateNode,T.current.memoizedState.isDehydrated){var O=Qe(T.pendingLanes);if(O!==0){var W=T;for(W.pendingLanes|=2,W.entangledLanes|=2;O;){var re=1<<31-wt(O);W.entanglements[1]|=re,O&=~re}it(T),(Wt&6)===0&&(Vi=B()+500,It(0))}}break;case 31:case 13:W=Xr(T,2),W!==null&&wn(W,T,2),_a(),QS(T,2)}if(T=t1(g),T===null&&FS(a,l,g,Zy,d),T===w)break;w=T}w!==null&&g.stopPropagation()}else FS(a,l,g,null,d)}}function t1(a){return a=Of(a),n1(a)}var Zy=null;function n1(a){if(Zy=null,a=ft(a),a!==null){var l=s(a);if(l===null)a=null;else{var d=l.tag;if(d===13){if(a=o(l),a!==null)return a;a=null}else if(d===31){if(a=u(l),a!==null)return a;a=null}else if(d===3){if(l.stateNode.current.memoizedState.isDehydrated)return l.tag===3?l.stateNode.containerInfo:null;a=null}else l!==a&&(a=null)}}return Zy=a,null}function EA(a){switch(a){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(fe()){case Ie:return 2;case Ge:return 8;case De:case Tt:return 32;case ht:return 268435456;default:return 32}default:return 32}}var i1=!1,xu=null,bu=null,Su=null,Mg=new Map,Eg=new Map,wu=[],TU="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function TA(a,l){switch(a){case"focusin":case"focusout":xu=null;break;case"dragenter":case"dragleave":bu=null;break;case"mouseover":case"mouseout":Su=null;break;case"pointerover":case"pointerout":Mg.delete(l.pointerId);break;case"gotpointercapture":case"lostpointercapture":Eg.delete(l.pointerId)}}function Tg(a,l,d,g,w,T){return a===null||a.nativeEvent!==T?(a={blockedOn:l,domEventName:d,eventSystemFlags:g,nativeEvent:T,targetContainers:[w]},l!==null&&(l=ct(l),l!==null&&wA(l)),a):(a.eventSystemFlags|=g,l=a.targetContainers,w!==null&&l.indexOf(w)===-1&&l.push(w),a)}function AU(a,l,d,g,w){switch(l){case"focusin":return xu=Tg(xu,a,l,d,g,w),!0;case"dragenter":return bu=Tg(bu,a,l,d,g,w),!0;case"mouseover":return Su=Tg(Su,a,l,d,g,w),!0;case"pointerover":var T=w.pointerId;return Mg.set(T,Tg(Mg.get(T)||null,a,l,d,g,w)),!0;case"gotpointercapture":return T=w.pointerId,Eg.set(T,Tg(Eg.get(T)||null,a,l,d,g,w)),!0}return!1}function AA(a){var l=ft(a.target);if(l!==null){var d=s(l);if(d!==null){if(l=d.tag,l===13){if(l=o(d),l!==null){a.blockedOn=l,Qt(a.priority,function(){MA(d)});return}}else if(l===31){if(l=u(d),l!==null){a.blockedOn=l,Qt(a.priority,function(){MA(d)});return}}else if(l===3&&d.stateNode.current.memoizedState.isDehydrated){a.blockedOn=d.tag===3?d.stateNode.containerInfo:null;return}}}a.blockedOn=null}function Ky(a){if(a.blockedOn!==null)return!1;for(var l=a.targetContainers;0<l.length;){var d=t1(a.nativeEvent);if(d===null){d=a.nativeEvent;var g=new d.constructor(d.type,d);Pf=g,d.target.dispatchEvent(g),Pf=null}else return l=ct(d),l!==null&&wA(l),a.blockedOn=d,!1;l.shift()}return!0}function CA(a,l,d){Ky(a)&&d.delete(l)}function CU(){i1=!1,xu!==null&&Ky(xu)&&(xu=null),bu!==null&&Ky(bu)&&(bu=null),Su!==null&&Ky(Su)&&(Su=null),Mg.forEach(CA),Eg.forEach(CA)}function Jy(a,l){a.blockedOn===l&&(a.blockedOn=null,i1||(i1=!0,n.unstable_scheduleCallback(n.unstable_NormalPriority,CU)))}var Qy=null;function RA(a){Qy!==a&&(Qy=a,n.unstable_scheduleCallback(n.unstable_NormalPriority,function(){Qy===a&&(Qy=null);for(var l=0;l<a.length;l+=3){var d=a[l],g=a[l+1],w=a[l+2];if(typeof g!="function"){if(n1(g||d)===null)continue;break}var T=ct(d);T!==null&&(a.splice(l,3),l-=3,eg(T,{pending:!0,data:w,method:d.method,action:g},g,w))}}))}function Bd(a){function l(re){return Jy(re,a)}xu!==null&&Jy(xu,a),bu!==null&&Jy(bu,a),Su!==null&&Jy(Su,a),Mg.forEach(l),Eg.forEach(l);for(var d=0;d<wu.length;d++){var g=wu[d];g.blockedOn===a&&(g.blockedOn=null)}for(;0<wu.length&&(d=wu[0],d.blockedOn===null);)AA(d),d.blockedOn===null&&wu.shift();if(d=(a.ownerDocument||a).$$reactFormReplay,d!=null)for(g=0;g<d.length;g+=3){var w=d[g],T=d[g+1],O=w[z]||null;if(typeof T=="function")O||RA(d);else if(O){var W=null;if(T&&T.hasAttribute("formAction")){if(w=T,O=T[z]||null)W=O.formAction;else if(n1(w)!==null)continue}else W=O.action;typeof W=="function"?d[g+1]=W:(d.splice(g,3),g-=3),RA(d)}}}function NA(){function a(T){T.canIntercept&&T.info==="react-transition"&&T.intercept({handler:function(){return new Promise(function(O){return w=O})},focusReset:"manual",scroll:"manual"})}function l(){w!==null&&(w(),w=null),g||setTimeout(d,20)}function d(){if(!g&&!navigation.transition){var T=navigation.currentEntry;T&&T.url!=null&&navigation.navigate(T.url,{state:T.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var g=!1,w=null;return navigation.addEventListener("navigate",a),navigation.addEventListener("navigatesuccess",l),navigation.addEventListener("navigateerror",l),setTimeout(d,100),function(){g=!0,navigation.removeEventListener("navigate",a),navigation.removeEventListener("navigatesuccess",l),navigation.removeEventListener("navigateerror",l),w!==null&&(w(),w=null)}}}function r1(a){this._internalRoot=a}e_.prototype.render=r1.prototype.render=function(a){var l=this._internalRoot;if(l===null)throw Error(i(409));var d=l.current,g=Os();bA(d,g,a,l,null,null)},e_.prototype.unmount=r1.prototype.unmount=function(){var a=this._internalRoot;if(a!==null){this._internalRoot=null;var l=a.containerInfo;bA(a.current,2,null,a,null,null),_a(),l[q]=null}};function e_(a){this._internalRoot=a}e_.prototype.unstable_scheduleHydration=function(a){if(a){var l=Ms();a={blockedOn:null,target:a,priority:l};for(var d=0;d<wu.length&&l!==0&&l<wu[d].priority;d++);wu.splice(d,0,a),d===0&&AA(a)}};var DA=e.version;if(DA!=="19.2.3")throw Error(i(527,DA,"19.2.3"));Q.findDOMNode=function(a){var l=a._reactInternals;if(l===void 0)throw typeof a.render=="function"?Error(i(188)):(a=Object.keys(a).join(","),Error(i(268,a)));return a=p(l),a=a!==null?m(a):null,a=a===null?null:a.stateNode,a};var RU={bundleType:0,version:"19.2.3",rendererPackageName:"react-dom",currentDispatcherRef:Z,reconcilerVersion:"19.2.3"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var t_=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!t_.isDisabled&&t_.supportsFiber)try{Xe=t_.inject(RU),$e=t_}catch{}}return Cg.createRoot=function(a,l){if(!r(a))throw Error(i(299));var d=!1,g="",w=Iy,T=ag,O=og;return l!=null&&(l.unstable_strictMode===!0&&(d=!0),l.identifierPrefix!==void 0&&(g=l.identifierPrefix),l.onUncaughtError!==void 0&&(w=l.onUncaughtError),l.onCaughtError!==void 0&&(T=l.onCaughtError),l.onRecoverableError!==void 0&&(O=l.onRecoverableError)),l=_A(a,1,!1,null,null,d,g,null,w,T,O,NA),a[q]=l.current,zS(a),new r1(l)},Cg.hydrateRoot=function(a,l,d){if(!r(a))throw Error(i(299));var g=!1,w="",T=Iy,O=ag,W=og,re=null;return d!=null&&(d.unstable_strictMode===!0&&(g=!0),d.identifierPrefix!==void 0&&(w=d.identifierPrefix),d.onUncaughtError!==void 0&&(T=d.onUncaughtError),d.onCaughtError!==void 0&&(O=d.onCaughtError),d.onRecoverableError!==void 0&&(W=d.onRecoverableError),d.formState!==void 0&&(re=d.formState)),l=_A(a,1,!0,l,d??null,g,w,re,T,O,W,NA),l.context=xA(null),d=l.current,g=Os(),g=Da(g),w=wo(g),w.callback=null,ul(d,w,g),d=g,l.current.lanes=d,rr(l,d),it(l),a[q]=l.current,zS(a),new e_(l)},Cg.version="19.2.3",Cg}var VA;function BU(){if(VA)return o1.exports;VA=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(e){console.error(e)}}return n(),o1.exports=kU(),o1.exports}var zU=BU();const FU=Tb(zU);function Ab(n,e){var t={};for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&e.indexOf(i)<0&&(t[i]=n[i]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,i=Object.getOwnPropertySymbols(n);r<i.length;r++)e.indexOf(i[r])<0&&Object.prototype.propertyIsEnumerable.call(n,i[r])&&(t[i[r]]=n[i[r]]);return t}function VU(n,e,t,i){function r(s){return s instanceof t?s:new t(function(o){o(s)})}return new(t||(t=Promise))(function(s,o){function u(m){try{p(i.next(m))}catch(v){o(v)}}function f(m){try{p(i.throw(m))}catch(v){o(v)}}function p(m){m.done?s(m.value):r(m.value).then(u,f)}p((i=i.apply(n,e||[])).next())})}const HU=n=>n?(...e)=>n(...e):(...e)=>fetch(...e);class ZM extends Error{constructor(e,t="FunctionsError",i){super(e),this.name=t,this.context=i}}class GU extends ZM{constructor(e){super("Failed to send a request to the Edge Function","FunctionsFetchError",e)}}class HA extends ZM{constructor(e){super("Relay Error invoking the Edge Function","FunctionsRelayError",e)}}class GA extends ZM{constructor(e){super("Edge Function returned a non-2xx status code","FunctionsHttpError",e)}}var Fw;(function(n){n.Any="any",n.ApNortheast1="ap-northeast-1",n.ApNortheast2="ap-northeast-2",n.ApSouth1="ap-south-1",n.ApSoutheast1="ap-southeast-1",n.ApSoutheast2="ap-southeast-2",n.CaCentral1="ca-central-1",n.EuCentral1="eu-central-1",n.EuWest1="eu-west-1",n.EuWest2="eu-west-2",n.EuWest3="eu-west-3",n.SaEast1="sa-east-1",n.UsEast1="us-east-1",n.UsWest1="us-west-1",n.UsWest2="us-west-2"})(Fw||(Fw={}));class jU{constructor(e,{headers:t={},customFetch:i,region:r=Fw.Any}={}){this.url=e,this.headers=t,this.region=r,this.fetch=HU(i)}setAuth(e){this.headers.Authorization=`Bearer ${e}`}invoke(e){return VU(this,arguments,void 0,function*(t,i={}){var r;let s,o;try{const{headers:u,method:f,body:p,signal:m,timeout:v}=i;let _={},{region:x}=i;x||(x=this.region);const S=new URL(`${this.url}/${t}`);x&&x!=="any"&&(_["x-region"]=x,S.searchParams.set("forceFunctionRegion",x));let A;p&&(u&&!Object.prototype.hasOwnProperty.call(u,"Content-Type")||!u)?typeof Blob<"u"&&p instanceof Blob||p instanceof ArrayBuffer?(_["Content-Type"]="application/octet-stream",A=p):typeof p=="string"?(_["Content-Type"]="text/plain",A=p):typeof FormData<"u"&&p instanceof FormData?A=p:(_["Content-Type"]="application/json",A=JSON.stringify(p)):p&&typeof p!="string"&&!(typeof Blob<"u"&&p instanceof Blob)&&!(p instanceof ArrayBuffer)&&!(typeof FormData<"u"&&p instanceof FormData)?A=JSON.stringify(p):A=p;let E=m;v&&(o=new AbortController,s=setTimeout(()=>o.abort(),v),m?(E=o.signal,m.addEventListener("abort",()=>o.abort())):E=o.signal);const M=yield this.fetch(S.toString(),{method:f||"POST",headers:Object.assign(Object.assign(Object.assign({},_),this.headers),u),body:A,signal:E}).catch(U=>{throw new GU(U)}),C=M.headers.get("x-relay-error");if(C&&C==="true")throw new HA(M);if(!M.ok)throw new GA(M);let N=((r=M.headers.get("Content-Type"))!==null&&r!==void 0?r:"text/plain").split(";")[0].trim(),I;return N==="application/json"?I=yield M.json():N==="application/octet-stream"||N==="application/pdf"?I=yield M.blob():N==="text/event-stream"?I=M:N==="multipart/form-data"?I=yield M.formData():I=yield M.text(),{data:I,error:null,response:M}}catch(u){return{data:null,error:u,response:u instanceof GA||u instanceof HA?u.context:void 0}}finally{s&&clearTimeout(s)}})}}var WU=class extends Error{constructor(n){super(n.message),this.name="PostgrestError",this.details=n.details,this.hint=n.hint,this.code=n.code}},qU=class{constructor(n){var e,t;this.shouldThrowOnError=!1,this.method=n.method,this.url=n.url,this.headers=new Headers(n.headers),this.schema=n.schema,this.body=n.body,this.shouldThrowOnError=(e=n.shouldThrowOnError)!==null&&e!==void 0?e:!1,this.signal=n.signal,this.isMaybeSingle=(t=n.isMaybeSingle)!==null&&t!==void 0?t:!1,n.fetch?this.fetch=n.fetch:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(n,e){return this.headers=new Headers(this.headers),this.headers.set(n,e),this}then(n,e){var t=this;this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers.set("Accept-Profile",this.schema):this.headers.set("Content-Profile",this.schema)),this.method!=="GET"&&this.method!=="HEAD"&&this.headers.set("Content-Type","application/json");const i=this.fetch;let r=i(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async s=>{let o=null,u=null,f=null,p=s.status,m=s.statusText;if(s.ok){var v,_;if(t.method!=="HEAD"){var x;const M=await s.text();M===""||(t.headers.get("Accept")==="text/csv"||t.headers.get("Accept")&&(!((x=t.headers.get("Accept"))===null||x===void 0)&&x.includes("application/vnd.pgrst.plan+text"))?u=M:u=JSON.parse(M))}const A=(v=t.headers.get("Prefer"))===null||v===void 0?void 0:v.match(/count=(exact|planned|estimated)/),E=(_=s.headers.get("content-range"))===null||_===void 0?void 0:_.split("/");A&&E&&E.length>1&&(f=parseInt(E[1])),t.isMaybeSingle&&t.method==="GET"&&Array.isArray(u)&&(u.length>1?(o={code:"PGRST116",details:`Results contain ${u.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},u=null,f=null,p=406,m="Not Acceptable"):u.length===1?u=u[0]:u=null)}else{var S;const A=await s.text();try{o=JSON.parse(A),Array.isArray(o)&&s.status===404&&(u=[],o=null,p=200,m="OK")}catch{s.status===404&&A===""?(p=204,m="No Content"):o={message:A}}if(o&&t.isMaybeSingle&&(!(o==null||(S=o.details)===null||S===void 0)&&S.includes("0 rows"))&&(o=null,p=200,m="OK"),o&&t.shouldThrowOnError)throw new WU(o)}return{error:o,data:u,count:f,status:p,statusText:m}});return this.shouldThrowOnError||(r=r.catch(s=>{var o;let u="";const f=s?.cause;if(f){var p,m,v,_;const S=(p=f?.message)!==null&&p!==void 0?p:"",A=(m=f?.code)!==null&&m!==void 0?m:"";u=`${(v=s?.name)!==null&&v!==void 0?v:"FetchError"}: ${s?.message}`,u+=`

Caused by: ${(_=f?.name)!==null&&_!==void 0?_:"Error"}: ${S}`,A&&(u+=` (${A})`),f?.stack&&(u+=`
${f.stack}`)}else{var x;u=(x=s?.stack)!==null&&x!==void 0?x:""}return{error:{message:`${(o=s?.name)!==null&&o!==void 0?o:"FetchError"}: ${s?.message}`,details:u,hint:"",code:""},data:null,count:null,status:0,statusText:""}})),r.then(n,e)}returns(){return this}overrideTypes(){return this}},XU=class extends qU{select(n){let e=!1;const t=(n??"*").split("").map(i=>/\s/.test(i)&&!e?"":(i==='"'&&(e=!e),i)).join("");return this.url.searchParams.set("select",t),this.headers.append("Prefer","return=representation"),this}order(n,{ascending:e=!0,nullsFirst:t,foreignTable:i,referencedTable:r=i}={}){const s=r?`${r}.order`:"order",o=this.url.searchParams.get(s);return this.url.searchParams.set(s,`${o?`${o},`:""}${n}.${e?"asc":"desc"}${t===void 0?"":t?".nullsfirst":".nullslast"}`),this}limit(n,{foreignTable:e,referencedTable:t=e}={}){const i=typeof t>"u"?"limit":`${t}.limit`;return this.url.searchParams.set(i,`${n}`),this}range(n,e,{foreignTable:t,referencedTable:i=t}={}){const r=typeof i>"u"?"offset":`${i}.offset`,s=typeof i>"u"?"limit":`${i}.limit`;return this.url.searchParams.set(r,`${n}`),this.url.searchParams.set(s,`${e-n+1}`),this}abortSignal(n){return this.signal=n,this}single(){return this.headers.set("Accept","application/vnd.pgrst.object+json"),this}maybeSingle(){return this.method==="GET"?this.headers.set("Accept","application/json"):this.headers.set("Accept","application/vnd.pgrst.object+json"),this.isMaybeSingle=!0,this}csv(){return this.headers.set("Accept","text/csv"),this}geojson(){return this.headers.set("Accept","application/geo+json"),this}explain({analyze:n=!1,verbose:e=!1,settings:t=!1,buffers:i=!1,wal:r=!1,format:s="text"}={}){var o;const u=[n?"analyze":null,e?"verbose":null,t?"settings":null,i?"buffers":null,r?"wal":null].filter(Boolean).join("|"),f=(o=this.headers.get("Accept"))!==null&&o!==void 0?o:"application/json";return this.headers.set("Accept",`application/vnd.pgrst.plan+${s}; for="${f}"; options=${u};`),s==="json"?this:this}rollback(){return this.headers.append("Prefer","tx=rollback"),this}returns(){return this}maxAffected(n){return this.headers.append("Prefer","handling=strict"),this.headers.append("Prefer",`max-affected=${n}`),this}};const jA=new RegExp("[,()]");var mp=class extends XU{eq(n,e){return this.url.searchParams.append(n,`eq.${e}`),this}neq(n,e){return this.url.searchParams.append(n,`neq.${e}`),this}gt(n,e){return this.url.searchParams.append(n,`gt.${e}`),this}gte(n,e){return this.url.searchParams.append(n,`gte.${e}`),this}lt(n,e){return this.url.searchParams.append(n,`lt.${e}`),this}lte(n,e){return this.url.searchParams.append(n,`lte.${e}`),this}like(n,e){return this.url.searchParams.append(n,`like.${e}`),this}likeAllOf(n,e){return this.url.searchParams.append(n,`like(all).{${e.join(",")}}`),this}likeAnyOf(n,e){return this.url.searchParams.append(n,`like(any).{${e.join(",")}}`),this}ilike(n,e){return this.url.searchParams.append(n,`ilike.${e}`),this}ilikeAllOf(n,e){return this.url.searchParams.append(n,`ilike(all).{${e.join(",")}}`),this}ilikeAnyOf(n,e){return this.url.searchParams.append(n,`ilike(any).{${e.join(",")}}`),this}regexMatch(n,e){return this.url.searchParams.append(n,`match.${e}`),this}regexIMatch(n,e){return this.url.searchParams.append(n,`imatch.${e}`),this}is(n,e){return this.url.searchParams.append(n,`is.${e}`),this}isDistinct(n,e){return this.url.searchParams.append(n,`isdistinct.${e}`),this}in(n,e){const t=Array.from(new Set(e)).map(i=>typeof i=="string"&&jA.test(i)?`"${i}"`:`${i}`).join(",");return this.url.searchParams.append(n,`in.(${t})`),this}notIn(n,e){const t=Array.from(new Set(e)).map(i=>typeof i=="string"&&jA.test(i)?`"${i}"`:`${i}`).join(",");return this.url.searchParams.append(n,`not.in.(${t})`),this}contains(n,e){return typeof e=="string"?this.url.searchParams.append(n,`cs.${e}`):Array.isArray(e)?this.url.searchParams.append(n,`cs.{${e.join(",")}}`):this.url.searchParams.append(n,`cs.${JSON.stringify(e)}`),this}containedBy(n,e){return typeof e=="string"?this.url.searchParams.append(n,`cd.${e}`):Array.isArray(e)?this.url.searchParams.append(n,`cd.{${e.join(",")}}`):this.url.searchParams.append(n,`cd.${JSON.stringify(e)}`),this}rangeGt(n,e){return this.url.searchParams.append(n,`sr.${e}`),this}rangeGte(n,e){return this.url.searchParams.append(n,`nxl.${e}`),this}rangeLt(n,e){return this.url.searchParams.append(n,`sl.${e}`),this}rangeLte(n,e){return this.url.searchParams.append(n,`nxr.${e}`),this}rangeAdjacent(n,e){return this.url.searchParams.append(n,`adj.${e}`),this}overlaps(n,e){return typeof e=="string"?this.url.searchParams.append(n,`ov.${e}`):this.url.searchParams.append(n,`ov.{${e.join(",")}}`),this}textSearch(n,e,{config:t,type:i}={}){let r="";i==="plain"?r="pl":i==="phrase"?r="ph":i==="websearch"&&(r="w");const s=t===void 0?"":`(${t})`;return this.url.searchParams.append(n,`${r}fts${s}.${e}`),this}match(n){return Object.entries(n).forEach(([e,t])=>{this.url.searchParams.append(e,`eq.${t}`)}),this}not(n,e,t){return this.url.searchParams.append(n,`not.${e}.${t}`),this}or(n,{foreignTable:e,referencedTable:t=e}={}){const i=t?`${t}.or`:"or";return this.url.searchParams.append(i,`(${n})`),this}filter(n,e,t){return this.url.searchParams.append(n,`${e}.${t}`),this}},$U=class{constructor(n,{headers:e={},schema:t,fetch:i}){this.url=n,this.headers=new Headers(e),this.schema=t,this.fetch=i}cloneRequestState(){return{url:new URL(this.url.toString()),headers:new Headers(this.headers)}}select(n,e){const{head:t=!1,count:i}=e??{},r=t?"HEAD":"GET";let s=!1;const o=(n??"*").split("").map(p=>/\s/.test(p)&&!s?"":(p==='"'&&(s=!s),p)).join(""),{url:u,headers:f}=this.cloneRequestState();return u.searchParams.set("select",o),i&&f.append("Prefer",`count=${i}`),new mp({method:r,url:u,headers:f,schema:this.schema,fetch:this.fetch})}insert(n,{count:e,defaultToNull:t=!0}={}){var i;const r="POST",{url:s,headers:o}=this.cloneRequestState();if(e&&o.append("Prefer",`count=${e}`),t||o.append("Prefer","missing=default"),Array.isArray(n)){const u=n.reduce((f,p)=>f.concat(Object.keys(p)),[]);if(u.length>0){const f=[...new Set(u)].map(p=>`"${p}"`);s.searchParams.set("columns",f.join(","))}}return new mp({method:r,url:s,headers:o,schema:this.schema,body:n,fetch:(i=this.fetch)!==null&&i!==void 0?i:fetch})}upsert(n,{onConflict:e,ignoreDuplicates:t=!1,count:i,defaultToNull:r=!0}={}){var s;const o="POST",{url:u,headers:f}=this.cloneRequestState();if(f.append("Prefer",`resolution=${t?"ignore":"merge"}-duplicates`),e!==void 0&&u.searchParams.set("on_conflict",e),i&&f.append("Prefer",`count=${i}`),r||f.append("Prefer","missing=default"),Array.isArray(n)){const p=n.reduce((m,v)=>m.concat(Object.keys(v)),[]);if(p.length>0){const m=[...new Set(p)].map(v=>`"${v}"`);u.searchParams.set("columns",m.join(","))}}return new mp({method:o,url:u,headers:f,schema:this.schema,body:n,fetch:(s=this.fetch)!==null&&s!==void 0?s:fetch})}update(n,{count:e}={}){var t;const i="PATCH",{url:r,headers:s}=this.cloneRequestState();return e&&s.append("Prefer",`count=${e}`),new mp({method:i,url:r,headers:s,schema:this.schema,body:n,fetch:(t=this.fetch)!==null&&t!==void 0?t:fetch})}delete({count:n}={}){var e;const t="DELETE",{url:i,headers:r}=this.cloneRequestState();return n&&r.append("Prefer",`count=${n}`),new mp({method:t,url:i,headers:r,schema:this.schema,fetch:(e=this.fetch)!==null&&e!==void 0?e:fetch})}},YU=class LN{constructor(e,{headers:t={},schema:i,fetch:r}={}){this.url=e,this.headers=new Headers(t),this.schemaName=i,this.fetch=r}from(e){if(!e||typeof e!="string"||e.trim()==="")throw new Error("Invalid relation name: relation must be a non-empty string.");return new $U(new URL(`${this.url}/${e}`),{headers:new Headers(this.headers),schema:this.schemaName,fetch:this.fetch})}schema(e){return new LN(this.url,{headers:this.headers,schema:e,fetch:this.fetch})}rpc(e,t={},{head:i=!1,get:r=!1,count:s}={}){var o;let u;const f=new URL(`${this.url}/rpc/${e}`);let p;const m=x=>x!==null&&typeof x=="object"&&(!Array.isArray(x)||x.some(m)),v=i&&Object.values(t).some(m);v?(u="POST",p=t):i||r?(u=i?"HEAD":"GET",Object.entries(t).filter(([x,S])=>S!==void 0).map(([x,S])=>[x,Array.isArray(S)?`{${S.join(",")}}`:`${S}`]).forEach(([x,S])=>{f.searchParams.append(x,S)})):(u="POST",p=t);const _=new Headers(this.headers);return v?_.set("Prefer",s?`count=${s},return=minimal`:"return=minimal"):s&&_.set("Prefer",`count=${s}`),new mp({method:u,url:f,headers:_,schema:this.schemaName,body:p,fetch:(o=this.fetch)!==null&&o!==void 0?o:fetch})}};class ZU{constructor(){}static detectEnvironment(){var e;if(typeof WebSocket<"u")return{type:"native",constructor:WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocket<"u")return{type:"native",constructor:globalThis.WebSocket};if(typeof global<"u"&&typeof global.WebSocket<"u")return{type:"native",constructor:global.WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocketPair<"u"&&typeof globalThis.WebSocket>"u")return{type:"cloudflare",error:"Cloudflare Workers detected. WebSocket clients are not supported in Cloudflare Workers.",workaround:"Use Cloudflare Workers WebSocket API for server-side WebSocket handling, or deploy to a different runtime."};if(typeof globalThis<"u"&&globalThis.EdgeRuntime||typeof navigator<"u"&&(!((e=navigator.userAgent)===null||e===void 0)&&e.includes("Vercel-Edge")))return{type:"unsupported",error:"Edge runtime detected (Vercel Edge/Netlify Edge). WebSockets are not supported in edge functions.",workaround:"Use serverless functions or a different deployment target for WebSocket functionality."};const t=globalThis.process;if(t){const i=t.versions;if(i&&i.node){const r=i.node,s=parseInt(r.replace(/^v/,"").split(".")[0]);return s>=22?typeof globalThis.WebSocket<"u"?{type:"native",constructor:globalThis.WebSocket}:{type:"unsupported",error:`Node.js ${s} detected but native WebSocket not found.`,workaround:"Provide a WebSocket implementation via the transport option."}:{type:"unsupported",error:`Node.js ${s} detected without native WebSocket support.`,workaround:`For Node.js < 22, install "ws" package and provide it via the transport option:
import ws from "ws"
new RealtimeClient(url, { transport: ws })`}}}return{type:"unsupported",error:"Unknown JavaScript runtime without WebSocket support.",workaround:"Ensure you're running in a supported environment (browser, Node.js, Deno) or provide a custom WebSocket implementation."}}static getWebSocketConstructor(){const e=this.detectEnvironment();if(e.constructor)return e.constructor;let t=e.error||"WebSocket not supported in this environment.";throw e.workaround&&(t+=`

Suggested solution: ${e.workaround}`),new Error(t)}static createWebSocket(e,t){const i=this.getWebSocketConstructor();return new i(e,t)}static isWebSocketSupported(){try{const e=this.detectEnvironment();return e.type==="native"||e.type==="ws"}catch{return!1}}}const KU="2.93.3",JU=`realtime-js/${KU}`,QU="1.0.0",UN="2.0.0",WA=UN,Vw=1e4,ek=1e3,tk=100;var Lu;(function(n){n[n.connecting=0]="connecting",n[n.open=1]="open",n[n.closing=2]="closing",n[n.closed=3]="closed"})(Lu||(Lu={}));var Dr;(function(n){n.closed="closed",n.errored="errored",n.joined="joined",n.joining="joining",n.leaving="leaving"})(Dr||(Dr={}));var Ho;(function(n){n.close="phx_close",n.error="phx_error",n.join="phx_join",n.reply="phx_reply",n.leave="phx_leave",n.access_token="access_token"})(Ho||(Ho={}));var Hw;(function(n){n.websocket="websocket"})(Hw||(Hw={}));var of;(function(n){n.Connecting="connecting",n.Open="open",n.Closing="closing",n.Closed="closed"})(of||(of={}));class nk{constructor(e){this.HEADER_LENGTH=1,this.USER_BROADCAST_PUSH_META_LENGTH=6,this.KINDS={userBroadcastPush:3,userBroadcast:4},this.BINARY_ENCODING=0,this.JSON_ENCODING=1,this.BROADCAST_EVENT="broadcast",this.allowedMetadataKeys=[],this.allowedMetadataKeys=e??[]}encode(e,t){if(e.event===this.BROADCAST_EVENT&&!(e.payload instanceof ArrayBuffer)&&typeof e.payload.event=="string")return t(this._binaryEncodeUserBroadcastPush(e));let i=[e.join_ref,e.ref,e.topic,e.event,e.payload];return t(JSON.stringify(i))}_binaryEncodeUserBroadcastPush(e){var t;return this._isArrayBuffer((t=e.payload)===null||t===void 0?void 0:t.payload)?this._encodeBinaryUserBroadcastPush(e):this._encodeJsonUserBroadcastPush(e)}_encodeBinaryUserBroadcastPush(e){var t,i;const r=(i=(t=e.payload)===null||t===void 0?void 0:t.payload)!==null&&i!==void 0?i:new ArrayBuffer(0);return this._encodeUserBroadcastPush(e,this.BINARY_ENCODING,r)}_encodeJsonUserBroadcastPush(e){var t,i;const r=(i=(t=e.payload)===null||t===void 0?void 0:t.payload)!==null&&i!==void 0?i:{},o=new TextEncoder().encode(JSON.stringify(r)).buffer;return this._encodeUserBroadcastPush(e,this.JSON_ENCODING,o)}_encodeUserBroadcastPush(e,t,i){var r,s;const o=e.topic,u=(r=e.ref)!==null&&r!==void 0?r:"",f=(s=e.join_ref)!==null&&s!==void 0?s:"",p=e.payload.event,m=this.allowedMetadataKeys?this._pick(e.payload,this.allowedMetadataKeys):{},v=Object.keys(m).length===0?"":JSON.stringify(m);if(f.length>255)throw new Error(`joinRef length ${f.length} exceeds maximum of 255`);if(u.length>255)throw new Error(`ref length ${u.length} exceeds maximum of 255`);if(o.length>255)throw new Error(`topic length ${o.length} exceeds maximum of 255`);if(p.length>255)throw new Error(`userEvent length ${p.length} exceeds maximum of 255`);if(v.length>255)throw new Error(`metadata length ${v.length} exceeds maximum of 255`);const _=this.USER_BROADCAST_PUSH_META_LENGTH+f.length+u.length+o.length+p.length+v.length,x=new ArrayBuffer(this.HEADER_LENGTH+_);let S=new DataView(x),A=0;S.setUint8(A++,this.KINDS.userBroadcastPush),S.setUint8(A++,f.length),S.setUint8(A++,u.length),S.setUint8(A++,o.length),S.setUint8(A++,p.length),S.setUint8(A++,v.length),S.setUint8(A++,t),Array.from(f,M=>S.setUint8(A++,M.charCodeAt(0))),Array.from(u,M=>S.setUint8(A++,M.charCodeAt(0))),Array.from(o,M=>S.setUint8(A++,M.charCodeAt(0))),Array.from(p,M=>S.setUint8(A++,M.charCodeAt(0))),Array.from(v,M=>S.setUint8(A++,M.charCodeAt(0)));var E=new Uint8Array(x.byteLength+i.byteLength);return E.set(new Uint8Array(x),0),E.set(new Uint8Array(i),x.byteLength),E.buffer}decode(e,t){if(this._isArrayBuffer(e)){let i=this._binaryDecode(e);return t(i)}if(typeof e=="string"){const i=JSON.parse(e),[r,s,o,u,f]=i;return t({join_ref:r,ref:s,topic:o,event:u,payload:f})}return t({})}_binaryDecode(e){const t=new DataView(e),i=t.getUint8(0),r=new TextDecoder;if(i===this.KINDS.userBroadcast)return this._decodeUserBroadcast(e,t,r)}_decodeUserBroadcast(e,t,i){const r=t.getUint8(1),s=t.getUint8(2),o=t.getUint8(3),u=t.getUint8(4);let f=this.HEADER_LENGTH+4;const p=i.decode(e.slice(f,f+r));f=f+r;const m=i.decode(e.slice(f,f+s));f=f+s;const v=i.decode(e.slice(f,f+o));f=f+o;const _=e.slice(f,e.byteLength),x=u===this.JSON_ENCODING?JSON.parse(i.decode(_)):_,S={type:this.BROADCAST_EVENT,event:m,payload:x};return o>0&&(S.meta=JSON.parse(v)),{join_ref:null,ref:null,topic:p,event:this.BROADCAST_EVENT,payload:S}}_isArrayBuffer(e){var t;return e instanceof ArrayBuffer||((t=e?.constructor)===null||t===void 0?void 0:t.name)==="ArrayBuffer"}_pick(e,t){return!e||typeof e!="object"?{}:Object.fromEntries(Object.entries(e).filter(([i])=>t.includes(i)))}}let kN=class{constructor(e,t){this.callback=e,this.timerCalc=t,this.timer=void 0,this.tries=0,this.callback=e,this.timerCalc=t}reset(){this.tries=0,clearTimeout(this.timer),this.timer=void 0}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}};var Si;(function(n){n.abstime="abstime",n.bool="bool",n.date="date",n.daterange="daterange",n.float4="float4",n.float8="float8",n.int2="int2",n.int4="int4",n.int4range="int4range",n.int8="int8",n.int8range="int8range",n.json="json",n.jsonb="jsonb",n.money="money",n.numeric="numeric",n.oid="oid",n.reltime="reltime",n.text="text",n.time="time",n.timestamp="timestamp",n.timestamptz="timestamptz",n.timetz="timetz",n.tsrange="tsrange",n.tstzrange="tstzrange"})(Si||(Si={}));const qA=(n,e,t={})=>{var i;const r=(i=t.skipTypes)!==null&&i!==void 0?i:[];return e?Object.keys(e).reduce((s,o)=>(s[o]=ik(o,n,e,r),s),{}):{}},ik=(n,e,t,i)=>{const r=e.find(u=>u.name===n),s=r?.type,o=t[n];return s&&!i.includes(s)?BN(s,o):Gw(o)},BN=(n,e)=>{if(n.charAt(0)==="_"){const t=n.slice(1,n.length);return ok(e,t)}switch(n){case Si.bool:return rk(e);case Si.float4:case Si.float8:case Si.int2:case Si.int4:case Si.int8:case Si.numeric:case Si.oid:return sk(e);case Si.json:case Si.jsonb:return ak(e);case Si.timestamp:return lk(e);case Si.abstime:case Si.date:case Si.daterange:case Si.int4range:case Si.int8range:case Si.money:case Si.reltime:case Si.text:case Si.time:case Si.timestamptz:case Si.timetz:case Si.tsrange:case Si.tstzrange:return Gw(e);default:return Gw(e)}},Gw=n=>n,rk=n=>{switch(n){case"t":return!0;case"f":return!1;default:return n}},sk=n=>{if(typeof n=="string"){const e=parseFloat(n);if(!Number.isNaN(e))return e}return n},ak=n=>{if(typeof n=="string")try{return JSON.parse(n)}catch{return n}return n},ok=(n,e)=>{if(typeof n!="string")return n;const t=n.length-1,i=n[t];if(n[0]==="{"&&i==="}"){let s;const o=n.slice(1,t);try{s=JSON.parse("["+o+"]")}catch{s=o?o.split(","):[]}return s.map(u=>BN(e,u))}return n},lk=n=>typeof n=="string"?n.replace(" ","T"):n,zN=n=>{const e=new URL(n);return e.protocol=e.protocol.replace(/^ws/i,"http"),e.pathname=e.pathname.replace(/\/+$/,"").replace(/\/socket\/websocket$/i,"").replace(/\/socket$/i,"").replace(/\/websocket$/i,""),e.pathname===""||e.pathname==="/"?e.pathname="/api/broadcast":e.pathname=e.pathname+"/api/broadcast",e.href};class h1{constructor(e,t,i={},r=Vw){this.channel=e,this.event=t,this.payload=i,this.timeout=r,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(e){this.timeout=e,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(e){this.payload=Object.assign(Object.assign({},this.payload),e)}receive(e,t){var i;return this._hasReceived(e)&&t((i=this.receivedResp)===null||i===void 0?void 0:i.response),this.recHooks.push({status:e,callback:t}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const e=t=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=t,this._matchReceive(t)};this.channel._on(this.refEvent,{},e),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(e,t){this.refEvent&&this.channel._trigger(this.refEvent,{status:e,response:t})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:e,response:t}){this.recHooks.filter(i=>i.status===e).forEach(i=>i.callback(t))}_hasReceived(e){return this.receivedResp&&this.receivedResp.status===e}}var XA;(function(n){n.SYNC="sync",n.JOIN="join",n.LEAVE="leave"})(XA||(XA={}));class e0{constructor(e,t){this.channel=e,this.state={},this.pendingDiffs=[],this.joinRef=null,this.enabled=!1,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const i=t?.events||{state:"presence_state",diff:"presence_diff"};this.channel._on(i.state,{},r=>{const{onJoin:s,onLeave:o,onSync:u}=this.caller;this.joinRef=this.channel._joinRef(),this.state=e0.syncState(this.state,r,s,o),this.pendingDiffs.forEach(f=>{this.state=e0.syncDiff(this.state,f,s,o)}),this.pendingDiffs=[],u()}),this.channel._on(i.diff,{},r=>{const{onJoin:s,onLeave:o,onSync:u}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(r):(this.state=e0.syncDiff(this.state,r,s,o),u())}),this.onJoin((r,s,o)=>{this.channel._trigger("presence",{event:"join",key:r,currentPresences:s,newPresences:o})}),this.onLeave((r,s,o)=>{this.channel._trigger("presence",{event:"leave",key:r,currentPresences:s,leftPresences:o})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(e,t,i,r){const s=this.cloneDeep(e),o=this.transformState(t),u={},f={};return this.map(s,(p,m)=>{o[p]||(f[p]=m)}),this.map(o,(p,m)=>{const v=s[p];if(v){const _=m.map(E=>E.presence_ref),x=v.map(E=>E.presence_ref),S=m.filter(E=>x.indexOf(E.presence_ref)<0),A=v.filter(E=>_.indexOf(E.presence_ref)<0);S.length>0&&(u[p]=S),A.length>0&&(f[p]=A)}else u[p]=m}),this.syncDiff(s,{joins:u,leaves:f},i,r)}static syncDiff(e,t,i,r){const{joins:s,leaves:o}={joins:this.transformState(t.joins),leaves:this.transformState(t.leaves)};return i||(i=()=>{}),r||(r=()=>{}),this.map(s,(u,f)=>{var p;const m=(p=e[u])!==null&&p!==void 0?p:[];if(e[u]=this.cloneDeep(f),m.length>0){const v=e[u].map(x=>x.presence_ref),_=m.filter(x=>v.indexOf(x.presence_ref)<0);e[u].unshift(..._)}i(u,m,f)}),this.map(o,(u,f)=>{let p=e[u];if(!p)return;const m=f.map(v=>v.presence_ref);p=p.filter(v=>m.indexOf(v.presence_ref)<0),e[u]=p,r(u,p,f),p.length===0&&delete e[u]}),e}static map(e,t){return Object.getOwnPropertyNames(e).map(i=>t(i,e[i]))}static transformState(e){return e=this.cloneDeep(e),Object.getOwnPropertyNames(e).reduce((t,i)=>{const r=e[i];return"metas"in r?t[i]=r.metas.map(s=>(s.presence_ref=s.phx_ref,delete s.phx_ref,delete s.phx_ref_prev,s)):t[i]=r,t},{})}static cloneDeep(e){return JSON.parse(JSON.stringify(e))}onJoin(e){this.caller.onJoin=e}onLeave(e){this.caller.onLeave=e}onSync(e){this.caller.onSync=e}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var $A;(function(n){n.ALL="*",n.INSERT="INSERT",n.UPDATE="UPDATE",n.DELETE="DELETE"})($A||($A={}));var t0;(function(n){n.BROADCAST="broadcast",n.PRESENCE="presence",n.POSTGRES_CHANGES="postgres_changes",n.SYSTEM="system"})(t0||(t0={}));var Mc;(function(n){n.SUBSCRIBED="SUBSCRIBED",n.TIMED_OUT="TIMED_OUT",n.CLOSED="CLOSED",n.CHANNEL_ERROR="CHANNEL_ERROR"})(Mc||(Mc={}));class yp{constructor(e,t={config:{}},i){var r,s;if(this.topic=e,this.params=t,this.socket=i,this.bindings={},this.state=Dr.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=e.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:"",enabled:!1},private:!1},t.config),this.timeout=this.socket.timeout,this.joinPush=new h1(this,Ho.join,this.params,this.timeout),this.rejoinTimer=new kN(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=Dr.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(o=>o.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=Dr.closed,this.socket._remove(this)}),this._onError(o=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,o),this.state=Dr.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=Dr.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("error",o=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,o),this.state=Dr.errored,this.rejoinTimer.scheduleTimeout())}),this._on(Ho.reply,{},(o,u)=>{this._trigger(this._replyEventName(u),o)}),this.presence=new e0(this),this.broadcastEndpointURL=zN(this.socket.endPoint),this.private=this.params.config.private||!1,!this.private&&(!((s=(r=this.params.config)===null||r===void 0?void 0:r.broadcast)===null||s===void 0)&&s.replay))throw`tried to use replay on public channel '${this.topic}'. It must be a private channel.`}subscribe(e,t=this.timeout){var i,r,s;if(this.socket.isConnected()||this.socket.connect(),this.state==Dr.closed){const{config:{broadcast:o,presence:u,private:f}}=this.params,p=(r=(i=this.bindings.postgres_changes)===null||i===void 0?void 0:i.map(x=>x.filter))!==null&&r!==void 0?r:[],m=!!this.bindings[t0.PRESENCE]&&this.bindings[t0.PRESENCE].length>0||((s=this.params.config.presence)===null||s===void 0?void 0:s.enabled)===!0,v={},_={broadcast:o,presence:Object.assign(Object.assign({},u),{enabled:m}),postgres_changes:p,private:f};this.socket.accessTokenValue&&(v.access_token=this.socket.accessTokenValue),this._onError(x=>e?.(Mc.CHANNEL_ERROR,x)),this._onClose(()=>e?.(Mc.CLOSED)),this.updateJoinPayload(Object.assign({config:_},v)),this.joinedOnce=!0,this._rejoin(t),this.joinPush.receive("ok",async({postgres_changes:x})=>{var S;if(this.socket._isManualToken()||this.socket.setAuth(),x===void 0){e?.(Mc.SUBSCRIBED);return}else{const A=this.bindings.postgres_changes,E=(S=A?.length)!==null&&S!==void 0?S:0,M=[];for(let C=0;C<E;C++){const N=A[C],{filter:{event:I,schema:U,table:L,filter:F}}=N,H=x&&x[C];if(H&&H.event===I&&yp.isFilterValueEqual(H.schema,U)&&yp.isFilterValueEqual(H.table,L)&&yp.isFilterValueEqual(H.filter,F))M.push(Object.assign(Object.assign({},N),{id:H.id}));else{this.unsubscribe(),this.state=Dr.errored,e?.(Mc.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=M,e&&e(Mc.SUBSCRIBED);return}}).receive("error",x=>{this.state=Dr.errored,e?.(Mc.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(x).join(", ")||"error")))}).receive("timeout",()=>{e?.(Mc.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(e,t={}){return await this.send({type:"presence",event:"track",payload:e},t.timeout||this.timeout)}async untrack(e={}){return await this.send({type:"presence",event:"untrack"},e)}on(e,t,i){return this.state===Dr.joined&&e===t0.PRESENCE&&(this.socket.log("channel",`resubscribe to ${this.topic} due to change in presence callbacks on joined channel`),this.unsubscribe().then(async()=>await this.subscribe())),this._on(e,t,i)}async httpSend(e,t,i={}){var r;if(t==null)return Promise.reject("Payload is required for httpSend()");const s={apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"};this.socket.accessTokenValue&&(s.Authorization=`Bearer ${this.socket.accessTokenValue}`);const o={method:"POST",headers:s,body:JSON.stringify({messages:[{topic:this.subTopic,event:e,payload:t,private:this.private}]})},u=await this._fetchWithTimeout(this.broadcastEndpointURL,o,(r=i.timeout)!==null&&r!==void 0?r:this.timeout);if(u.status===202)return{success:!0};let f=u.statusText;try{const p=await u.json();f=p.error||p.message||f}catch{}return Promise.reject(new Error(f))}async send(e,t={}){var i,r;if(!this._canPush()&&e.type==="broadcast"){console.warn("Realtime send() is automatically falling back to REST API. This behavior will be deprecated in the future. Please use httpSend() explicitly for REST delivery.");const{event:s,payload:o}=e,u={apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"};this.socket.accessTokenValue&&(u.Authorization=`Bearer ${this.socket.accessTokenValue}`);const f={method:"POST",headers:u,body:JSON.stringify({messages:[{topic:this.subTopic,event:s,payload:o,private:this.private}]})};try{const p=await this._fetchWithTimeout(this.broadcastEndpointURL,f,(i=t.timeout)!==null&&i!==void 0?i:this.timeout);return await((r=p.body)===null||r===void 0?void 0:r.cancel()),p.ok?"ok":"error"}catch(p){return p.name==="AbortError"?"timed out":"error"}}else return new Promise(s=>{var o,u,f;const p=this._push(e.type,e,t.timeout||this.timeout);e.type==="broadcast"&&!(!((f=(u=(o=this.params)===null||o===void 0?void 0:o.config)===null||u===void 0?void 0:u.broadcast)===null||f===void 0)&&f.ack)&&s("ok"),p.receive("ok",()=>s("ok")),p.receive("error",()=>s("error")),p.receive("timeout",()=>s("timed out"))})}updateJoinPayload(e){this.joinPush.updatePayload(e)}unsubscribe(e=this.timeout){this.state=Dr.leaving;const t=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(Ho.close,"leave",this._joinRef())};this.joinPush.destroy();let i=null;return new Promise(r=>{i=new h1(this,Ho.leave,{},e),i.receive("ok",()=>{t(),r("ok")}).receive("timeout",()=>{t(),r("timed out")}).receive("error",()=>{r("error")}),i.send(),this._canPush()||i.trigger("ok",{})}).finally(()=>{i?.destroy()})}teardown(){this.pushBuffer.forEach(e=>e.destroy()),this.pushBuffer=[],this.rejoinTimer.reset(),this.joinPush.destroy(),this.state=Dr.closed,this.bindings={}}async _fetchWithTimeout(e,t,i){const r=new AbortController,s=setTimeout(()=>r.abort(),i),o=await this.socket.fetch(e,Object.assign(Object.assign({},t),{signal:r.signal}));return clearTimeout(s),o}_push(e,t,i=this.timeout){if(!this.joinedOnce)throw`tried to push '${e}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let r=new h1(this,e,t,i);return this._canPush()?r.send():this._addToPushBuffer(r),r}_addToPushBuffer(e){if(e.startTimeout(),this.pushBuffer.push(e),this.pushBuffer.length>tk){const t=this.pushBuffer.shift();t&&(t.destroy(),this.socket.log("channel",`discarded push due to buffer overflow: ${t.event}`,t.payload))}}_onMessage(e,t,i){return t}_isMember(e){return this.topic===e}_joinRef(){return this.joinPush.ref}_trigger(e,t,i){var r,s;const o=e.toLocaleLowerCase(),{close:u,error:f,leave:p,join:m}=Ho;if(i&&[u,f,p,m].indexOf(o)>=0&&i!==this._joinRef())return;let _=this._onMessage(o,t,i);if(t&&!_)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(o)?(r=this.bindings.postgres_changes)===null||r===void 0||r.filter(x=>{var S,A,E;return((S=x.filter)===null||S===void 0?void 0:S.event)==="*"||((E=(A=x.filter)===null||A===void 0?void 0:A.event)===null||E===void 0?void 0:E.toLocaleLowerCase())===o}).map(x=>x.callback(_,i)):(s=this.bindings[o])===null||s===void 0||s.filter(x=>{var S,A,E,M,C,N;if(["broadcast","presence","postgres_changes"].includes(o))if("id"in x){const I=x.id,U=(S=x.filter)===null||S===void 0?void 0:S.event;return I&&((A=t.ids)===null||A===void 0?void 0:A.includes(I))&&(U==="*"||U?.toLocaleLowerCase()===((E=t.data)===null||E===void 0?void 0:E.type.toLocaleLowerCase()))}else{const I=(C=(M=x?.filter)===null||M===void 0?void 0:M.event)===null||C===void 0?void 0:C.toLocaleLowerCase();return I==="*"||I===((N=t?.event)===null||N===void 0?void 0:N.toLocaleLowerCase())}else return x.type.toLocaleLowerCase()===o}).map(x=>{if(typeof _=="object"&&"ids"in _){const S=_.data,{schema:A,table:E,commit_timestamp:M,type:C,errors:N}=S;_=Object.assign(Object.assign({},{schema:A,table:E,commit_timestamp:M,eventType:C,new:{},old:{},errors:N}),this._getPayloadRecords(S))}x.callback(_,i)})}_isClosed(){return this.state===Dr.closed}_isJoined(){return this.state===Dr.joined}_isJoining(){return this.state===Dr.joining}_isLeaving(){return this.state===Dr.leaving}_replyEventName(e){return`chan_reply_${e}`}_on(e,t,i){const r=e.toLocaleLowerCase(),s={type:r,filter:t,callback:i};return this.bindings[r]?this.bindings[r].push(s):this.bindings[r]=[s],this}_off(e,t){const i=e.toLocaleLowerCase();return this.bindings[i]&&(this.bindings[i]=this.bindings[i].filter(r=>{var s;return!(((s=r.type)===null||s===void 0?void 0:s.toLocaleLowerCase())===i&&yp.isEqual(r.filter,t))})),this}static isEqual(e,t){if(Object.keys(e).length!==Object.keys(t).length)return!1;for(const i in e)if(e[i]!==t[i])return!1;return!0}static isFilterValueEqual(e,t){return(e??void 0)===(t??void 0)}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(e){this._on(Ho.close,{},e)}_onError(e){this._on(Ho.error,{},t=>e(t))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(e=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=Dr.joining,this.joinPush.resend(e))}_getPayloadRecords(e){const t={new:{},old:{}};return(e.type==="INSERT"||e.type==="UPDATE")&&(t.new=qA(e.columns,e.record)),(e.type==="UPDATE"||e.type==="DELETE")&&(t.old=qA(e.columns,e.old_record)),t}}const f1=()=>{},n_={HEARTBEAT_INTERVAL:25e3,RECONNECT_DELAY:10,HEARTBEAT_TIMEOUT_FALLBACK:100},ck=[1e3,2e3,5e3,1e4],uk=1e4,hk=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;class fk{constructor(e,t){var i;if(this.accessTokenValue=null,this.apiKey=null,this._manuallySetToken=!1,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers={},this.params={},this.timeout=Vw,this.transport=null,this.heartbeatIntervalMs=n_.HEARTBEAT_INTERVAL,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=f1,this.ref=0,this.reconnectTimer=null,this.vsn=WA,this.logger=f1,this.conn=null,this.sendBuffer=[],this.serializer=new nk,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._connectionState="disconnected",this._wasManualDisconnect=!1,this._authPromise=null,this._heartbeatSentAt=null,this._resolveFetch=r=>r?(...s)=>r(...s):(...s)=>fetch(...s),!(!((i=t?.params)===null||i===void 0)&&i.apikey))throw new Error("API key is required to connect to Realtime");this.apiKey=t.params.apikey,this.endPoint=`${e}/${Hw.websocket}`,this.httpEndpoint=zN(e),this._initializeOptions(t),this._setupReconnectionTimer(),this.fetch=this._resolveFetch(t?.fetch)}connect(){if(!(this.isConnecting()||this.isDisconnecting()||this.conn!==null&&this.isConnected())){if(this._setConnectionState("connecting"),this.accessToken&&!this._authPromise&&this._setAuthSafely("connect"),this.transport)this.conn=new this.transport(this.endpointURL());else try{this.conn=ZU.createWebSocket(this.endpointURL())}catch(e){this._setConnectionState("disconnected");const t=e.message;throw t.includes("Node.js")?new Error(`${t}

To use Realtime in Node.js, you need to provide a WebSocket implementation:

Option 1: Use Node.js 22+ which has native WebSocket support
Option 2: Install and provide the "ws" package:

  npm install ws

  import ws from "ws"
  const client = new RealtimeClient(url, {
    ...options,
    transport: ws
  })`):new Error(`WebSocket not available: ${t}`)}this._setupConnectionHandlers()}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:this.vsn}))}disconnect(e,t){if(!this.isDisconnecting())if(this._setConnectionState("disconnecting",!0),this.conn){const i=setTimeout(()=>{this._setConnectionState("disconnected")},100);this.conn.onclose=()=>{clearTimeout(i),this._setConnectionState("disconnected")},typeof this.conn.close=="function"&&(e?this.conn.close(e,t??""):this.conn.close()),this._teardownConnection()}else this._setConnectionState("disconnected")}getChannels(){return this.channels}async removeChannel(e){const t=await e.unsubscribe();return this.channels.length===0&&this.disconnect(),t}async removeAllChannels(){const e=await Promise.all(this.channels.map(t=>t.unsubscribe()));return this.channels=[],this.disconnect(),e}log(e,t,i){this.logger(e,t,i)}connectionState(){switch(this.conn&&this.conn.readyState){case Lu.connecting:return of.Connecting;case Lu.open:return of.Open;case Lu.closing:return of.Closing;default:return of.Closed}}isConnected(){return this.connectionState()===of.Open}isConnecting(){return this._connectionState==="connecting"}isDisconnecting(){return this._connectionState==="disconnecting"}channel(e,t={config:{}}){const i=`realtime:${e}`,r=this.getChannels().find(s=>s.topic===i);if(r)return r;{const s=new yp(`realtime:${e}`,t,this);return this.channels.push(s),s}}push(e){const{topic:t,event:i,payload:r,ref:s}=e,o=()=>{this.encode(e,u=>{var f;(f=this.conn)===null||f===void 0||f.send(u)})};this.log("push",`${t} ${i} (${s})`,r),this.isConnected()?o():this.sendBuffer.push(o)}async setAuth(e=null){this._authPromise=this._performAuth(e);try{await this._authPromise}finally{this._authPromise=null}}_isManualToken(){return this._manuallySetToken}async sendHeartbeat(){var e;if(!this.isConnected()){try{this.heartbeatCallback("disconnected")}catch(t){this.log("error","error in heartbeat callback",t)}return}if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this._heartbeatSentAt=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection");try{this.heartbeatCallback("timeout")}catch(t){this.log("error","error in heartbeat callback",t)}this._wasManualDisconnect=!1,(e=this.conn)===null||e===void 0||e.close(ek,"heartbeat timeout"),setTimeout(()=>{var t;this.isConnected()||(t=this.reconnectTimer)===null||t===void 0||t.scheduleTimeout()},n_.HEARTBEAT_TIMEOUT_FALLBACK);return}this._heartbeatSentAt=Date.now(),this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef});try{this.heartbeatCallback("sent")}catch(t){this.log("error","error in heartbeat callback",t)}this._setAuthSafely("heartbeat")}onHeartbeat(e){this.heartbeatCallback=e}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(e=>e()),this.sendBuffer=[])}_makeRef(){let e=this.ref+1;return e===this.ref?this.ref=0:this.ref=e,this.ref.toString()}_leaveOpenTopic(e){let t=this.channels.find(i=>i.topic===e&&(i._isJoined()||i._isJoining()));t&&(this.log("transport",`leaving duplicate topic "${e}"`),t.unsubscribe())}_remove(e){this.channels=this.channels.filter(t=>t.topic!==e.topic)}_onConnMessage(e){this.decode(e.data,t=>{if(t.topic==="phoenix"&&t.event==="phx_reply"&&t.ref&&t.ref===this.pendingHeartbeatRef){const p=this._heartbeatSentAt?Date.now()-this._heartbeatSentAt:void 0;try{this.heartbeatCallback(t.payload.status==="ok"?"ok":"error",p)}catch(m){this.log("error","error in heartbeat callback",m)}this._heartbeatSentAt=null,this.pendingHeartbeatRef=null}const{topic:i,event:r,payload:s,ref:o}=t,u=o?`(${o})`:"",f=s.status||"";this.log("receive",`${f} ${i} ${r} ${u}`.trim(),s),this.channels.filter(p=>p._isMember(i)).forEach(p=>p._trigger(r,s,o)),this._triggerStateCallbacks("message",t)})}_clearTimer(e){var t;e==="heartbeat"&&this.heartbeatTimer?(clearInterval(this.heartbeatTimer),this.heartbeatTimer=void 0):e==="reconnect"&&((t=this.reconnectTimer)===null||t===void 0||t.reset())}_clearAllTimers(){this._clearTimer("heartbeat"),this._clearTimer("reconnect")}_setupConnectionHandlers(){this.conn&&("binaryType"in this.conn&&(this.conn.binaryType="arraybuffer"),this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=e=>this._onConnError(e),this.conn.onmessage=e=>this._onConnMessage(e),this.conn.onclose=e=>this._onConnClose(e),this.conn.readyState===Lu.open&&this._onConnOpen())}_teardownConnection(){if(this.conn){if(this.conn.readyState===Lu.open||this.conn.readyState===Lu.connecting)try{this.conn.close()}catch(e){this.log("error","Error closing connection",e)}this.conn.onopen=null,this.conn.onerror=null,this.conn.onmessage=null,this.conn.onclose=null,this.conn=null}this._clearAllTimers(),this._terminateWorker(),this.channels.forEach(e=>e.teardown())}_onConnOpen(){this._setConnectionState("connected"),this.log("transport",`connected to ${this.endpointURL()}`),(this._authPromise||(this.accessToken&&!this.accessTokenValue?this.setAuth():Promise.resolve())).then(()=>{this.flushSendBuffer()}).catch(t=>{this.log("error","error waiting for auth on connect",t),this.flushSendBuffer()}),this._clearTimer("reconnect"),this.worker?this.workerRef||this._startWorkerHeartbeat():this._startHeartbeat(),this._triggerStateCallbacks("open")}_startHeartbeat(){this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs)}_startWorkerHeartbeat(){this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const e=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(e),this.workerRef.onerror=t=>{this.log("worker","worker error",t.message),this._terminateWorker()},this.workerRef.onmessage=t=>{t.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}_terminateWorker(){this.workerRef&&(this.log("worker","terminating worker"),this.workerRef.terminate(),this.workerRef=void 0)}_onConnClose(e){var t;this._setConnectionState("disconnected"),this.log("transport","close",e),this._triggerChanError(),this._clearTimer("heartbeat"),this._wasManualDisconnect||(t=this.reconnectTimer)===null||t===void 0||t.scheduleTimeout(),this._triggerStateCallbacks("close",e)}_onConnError(e){this._setConnectionState("disconnected"),this.log("transport",`${e}`),this._triggerChanError(),this._triggerStateCallbacks("error",e);try{this.heartbeatCallback("error")}catch(t){this.log("error","error in heartbeat callback",t)}}_triggerChanError(){this.channels.forEach(e=>e._trigger(Ho.error))}_appendParams(e,t){if(Object.keys(t).length===0)return e;const i=e.match(/\?/)?"&":"?",r=new URLSearchParams(t);return`${e}${i}${r}`}_workerObjectUrl(e){let t;if(e)t=e;else{const i=new Blob([hk],{type:"application/javascript"});t=URL.createObjectURL(i)}return t}_setConnectionState(e,t=!1){this._connectionState=e,e==="connecting"?this._wasManualDisconnect=!1:e==="disconnecting"&&(this._wasManualDisconnect=t)}async _performAuth(e=null){let t,i=!1;if(e)t=e,i=!0;else if(this.accessToken)try{t=await this.accessToken()}catch(r){this.log("error","Error fetching access token from callback",r),t=this.accessTokenValue}else t=this.accessTokenValue;i?this._manuallySetToken=!0:this.accessToken&&(this._manuallySetToken=!1),this.accessTokenValue!=t&&(this.accessTokenValue=t,this.channels.forEach(r=>{const s={access_token:t,version:JU};t&&r.updateJoinPayload(s),r.joinedOnce&&r._isJoined()&&r._push(Ho.access_token,{access_token:t})}))}async _waitForAuthIfNeeded(){this._authPromise&&await this._authPromise}_setAuthSafely(e="general"){this._isManualToken()||this.setAuth().catch(t=>{this.log("error",`Error setting auth in ${e}`,t)})}_triggerStateCallbacks(e,t){try{this.stateChangeCallbacks[e].forEach(i=>{try{i(t)}catch(r){this.log("error",`error in ${e} callback`,r)}})}catch(i){this.log("error",`error triggering ${e} callbacks`,i)}}_setupReconnectionTimer(){this.reconnectTimer=new kN(async()=>{setTimeout(async()=>{await this._waitForAuthIfNeeded(),this.isConnected()||this.connect()},n_.RECONNECT_DELAY)},this.reconnectAfterMs)}_initializeOptions(e){var t,i,r,s,o,u,f,p,m,v,_,x;switch(this.transport=(t=e?.transport)!==null&&t!==void 0?t:null,this.timeout=(i=e?.timeout)!==null&&i!==void 0?i:Vw,this.heartbeatIntervalMs=(r=e?.heartbeatIntervalMs)!==null&&r!==void 0?r:n_.HEARTBEAT_INTERVAL,this.worker=(s=e?.worker)!==null&&s!==void 0?s:!1,this.accessToken=(o=e?.accessToken)!==null&&o!==void 0?o:null,this.heartbeatCallback=(u=e?.heartbeatCallback)!==null&&u!==void 0?u:f1,this.vsn=(f=e?.vsn)!==null&&f!==void 0?f:WA,e?.params&&(this.params=e.params),e?.logger&&(this.logger=e.logger),(e?.logLevel||e?.log_level)&&(this.logLevel=e.logLevel||e.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),this.reconnectAfterMs=(p=e?.reconnectAfterMs)!==null&&p!==void 0?p:(S=>ck[S-1]||uk),this.vsn){case QU:this.encode=(m=e?.encode)!==null&&m!==void 0?m:((S,A)=>A(JSON.stringify(S))),this.decode=(v=e?.decode)!==null&&v!==void 0?v:((S,A)=>A(JSON.parse(S)));break;case UN:this.encode=(_=e?.encode)!==null&&_!==void 0?_:this.serializer.encode.bind(this.serializer),this.decode=(x=e?.decode)!==null&&x!==void 0?x:this.serializer.decode.bind(this.serializer);break;default:throw new Error(`Unsupported serializer version: ${this.vsn}`)}if(this.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.workerUrl=e?.workerUrl}}}var y0=class extends Error{constructor(n,e){super(n),this.name="IcebergError",this.status=e.status,this.icebergType=e.icebergType,this.icebergCode=e.icebergCode,this.details=e.details,this.isCommitStateUnknown=e.icebergType==="CommitStateUnknownException"||[500,502,504].includes(e.status)&&e.icebergType?.includes("CommitState")===!0}isNotFound(){return this.status===404}isConflict(){return this.status===409}isAuthenticationTimeout(){return this.status===419}};function dk(n,e,t){const i=new URL(e,n);if(t)for(const[r,s]of Object.entries(t))s!==void 0&&i.searchParams.set(r,s);return i.toString()}async function pk(n){return!n||n.type==="none"?{}:n.type==="bearer"?{Authorization:`Bearer ${n.token}`}:n.type==="header"?{[n.name]:n.value}:n.type==="custom"?await n.getHeaders():{}}function mk(n){const e=n.fetchImpl??globalThis.fetch;return{async request({method:t,path:i,query:r,body:s,headers:o}){const u=dk(n.baseUrl,i,r),f=await pk(n.auth),p=await e(u,{method:t,headers:{...s?{"Content-Type":"application/json"}:{},...f,...o},body:s?JSON.stringify(s):void 0}),m=await p.text(),v=(p.headers.get("content-type")||"").includes("application/json"),_=v&&m?JSON.parse(m):m;if(!p.ok){const x=v?_:void 0,S=x?.error;throw new y0(S?.message??`Request failed with status ${p.status}`,{status:p.status,icebergType:S?.type,icebergCode:S?.code,details:x})}return{status:p.status,headers:p.headers,data:_}}}}function i_(n){return n.join("")}var gk=class{constructor(n,e=""){this.client=n,this.prefix=e}async listNamespaces(n){const e=n?{parent:i_(n.namespace)}:void 0;return(await this.client.request({method:"GET",path:`${this.prefix}/namespaces`,query:e})).data.namespaces.map(i=>({namespace:i}))}async createNamespace(n,e){const t={namespace:n.namespace,properties:e?.properties};return(await this.client.request({method:"POST",path:`${this.prefix}/namespaces`,body:t})).data}async dropNamespace(n){await this.client.request({method:"DELETE",path:`${this.prefix}/namespaces/${i_(n.namespace)}`})}async loadNamespaceMetadata(n){return{properties:(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${i_(n.namespace)}`})).data.properties}}async namespaceExists(n){try{return await this.client.request({method:"HEAD",path:`${this.prefix}/namespaces/${i_(n.namespace)}`}),!0}catch(e){if(e instanceof y0&&e.status===404)return!1;throw e}}async createNamespaceIfNotExists(n,e){try{return await this.createNamespace(n,e)}catch(t){if(t instanceof y0&&t.status===409)return;throw t}}};function zd(n){return n.join("")}var vk=class{constructor(n,e="",t){this.client=n,this.prefix=e,this.accessDelegation=t}async listTables(n){return(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${zd(n.namespace)}/tables`})).data.identifiers}async createTable(n,e){const t={};return this.accessDelegation&&(t["X-Iceberg-Access-Delegation"]=this.accessDelegation),(await this.client.request({method:"POST",path:`${this.prefix}/namespaces/${zd(n.namespace)}/tables`,body:e,headers:t})).data.metadata}async updateTable(n,e){const t=await this.client.request({method:"POST",path:`${this.prefix}/namespaces/${zd(n.namespace)}/tables/${n.name}`,body:e});return{"metadata-location":t.data["metadata-location"],metadata:t.data.metadata}}async dropTable(n,e){await this.client.request({method:"DELETE",path:`${this.prefix}/namespaces/${zd(n.namespace)}/tables/${n.name}`,query:{purgeRequested:String(e?.purge??!1)}})}async loadTable(n){const e={};return this.accessDelegation&&(e["X-Iceberg-Access-Delegation"]=this.accessDelegation),(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${zd(n.namespace)}/tables/${n.name}`,headers:e})).data.metadata}async tableExists(n){const e={};this.accessDelegation&&(e["X-Iceberg-Access-Delegation"]=this.accessDelegation);try{return await this.client.request({method:"HEAD",path:`${this.prefix}/namespaces/${zd(n.namespace)}/tables/${n.name}`,headers:e}),!0}catch(t){if(t instanceof y0&&t.status===404)return!1;throw t}}async createTableIfNotExists(n,e){try{return await this.createTable(n,e)}catch(t){if(t instanceof y0&&t.status===409)return await this.loadTable({namespace:n.namespace,name:e.name});throw t}}},yk=class{constructor(n){let e="v1";n.catalogName&&(e+=`/${n.catalogName}`);const t=n.baseUrl.endsWith("/")?n.baseUrl:`${n.baseUrl}/`;this.client=mk({baseUrl:t,auth:n.auth,fetchImpl:n.fetch}),this.accessDelegation=n.accessDelegation?.join(","),this.namespaceOps=new gk(this.client,e),this.tableOps=new vk(this.client,e,this.accessDelegation)}async listNamespaces(n){return this.namespaceOps.listNamespaces(n)}async createNamespace(n,e){return this.namespaceOps.createNamespace(n,e)}async dropNamespace(n){await this.namespaceOps.dropNamespace(n)}async loadNamespaceMetadata(n){return this.namespaceOps.loadNamespaceMetadata(n)}async listTables(n){return this.tableOps.listTables(n)}async createTable(n,e){return this.tableOps.createTable(n,e)}async updateTable(n,e){return this.tableOps.updateTable(n,e)}async dropTable(n,e){await this.tableOps.dropTable(n,e)}async loadTable(n){return this.tableOps.loadTable(n)}async namespaceExists(n){return this.namespaceOps.namespaceExists(n)}async tableExists(n){return this.tableOps.tableExists(n)}async createNamespaceIfNotExists(n,e){return this.namespaceOps.createNamespaceIfNotExists(n,e)}async createTableIfNotExists(n,e){return this.tableOps.createTableIfNotExists(n,e)}},Cb=class extends Error{constructor(n,e="storage",t,i){super(n),this.__isStorageError=!0,this.namespace=e,this.name=e==="vectors"?"StorageVectorsError":"StorageError",this.status=t,this.statusCode=i}};function Rb(n){return typeof n=="object"&&n!==null&&"__isStorageError"in n}var r_=class extends Cb{constructor(n,e,t,i="storage"){super(n,i,e,t),this.name=i==="vectors"?"StorageVectorsApiError":"StorageApiError",this.status=e,this.statusCode=t}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}},FN=class extends Cb{constructor(n,e,t="storage"){super(n,t),this.name=t==="vectors"?"StorageVectorsUnknownError":"StorageUnknownError",this.originalError=e}};const _k=n=>n?(...e)=>n(...e):(...e)=>fetch(...e),xk=n=>{if(typeof n!="object"||n===null)return!1;const e=Object.getPrototypeOf(n);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(Symbol.toStringTag in n)&&!(Symbol.iterator in n)},jw=n=>{if(Array.isArray(n))return n.map(t=>jw(t));if(typeof n=="function"||n!==Object(n))return n;const e={};return Object.entries(n).forEach(([t,i])=>{const r=t.replace(/([-_][a-z])/gi,s=>s.toUpperCase().replace(/[-_]/g,""));e[r]=jw(i)}),e},bk=n=>!n||typeof n!="string"||n.length===0||n.length>100||n.trim()!==n||n.includes("/")||n.includes("\\")?!1:/^[\w!.\*'() &$@=;:+,?-]+$/.test(n);function _0(n){"@babel/helpers - typeof";return _0=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},_0(n)}function Sk(n,e){if(_0(n)!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var i=t.call(n,e);if(_0(i)!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}function wk(n){var e=Sk(n,"string");return _0(e)=="symbol"?e:e+""}function Mk(n,e,t){return(e=wk(e))in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function YA(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(n);e&&(i=i.filter(function(r){return Object.getOwnPropertyDescriptor(n,r).enumerable})),t.push.apply(t,i)}return t}function on(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?YA(Object(t),!0).forEach(function(i){Mk(n,i,t[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):YA(Object(t)).forEach(function(i){Object.defineProperty(n,i,Object.getOwnPropertyDescriptor(t,i))})}return n}const ZA=n=>{var e;return n.msg||n.message||n.error_description||(typeof n.error=="string"?n.error:(e=n.error)===null||e===void 0?void 0:e.message)||JSON.stringify(n)},Ek=async(n,e,t,i)=>{if(n&&typeof n=="object"&&"status"in n&&"ok"in n&&typeof n.status=="number"&&!t?.noResolveJson){const r=n,s=r.status||500;if(typeof r.json=="function")r.json().then(o=>{const u=o?.statusCode||o?.code||s+"";e(new r_(ZA(o),s,u,i))}).catch(()=>{if(i==="vectors"){const o=s+"";e(new r_(r.statusText||`HTTP ${s} error`,s,o,i))}else{const o=s+"";e(new r_(r.statusText||`HTTP ${s} error`,s,o,i))}});else{const o=s+"";e(new r_(r.statusText||`HTTP ${s} error`,s,o,i))}}else e(new FN(ZA(n),n,i))},Tk=(n,e,t,i)=>{const r={method:n,headers:e?.headers||{}};return n==="GET"||n==="HEAD"||!i?on(on({},r),t):(xk(i)?(r.headers=on({"Content-Type":"application/json"},e?.headers),r.body=JSON.stringify(i)):r.body=i,e?.duplex&&(r.duplex=e.duplex),on(on({},r),t))};async function Rg(n,e,t,i,r,s,o){return new Promise((u,f)=>{n(t,Tk(e,i,r,s)).then(p=>{if(!p.ok)throw p;if(i?.noResolveJson)return p;if(o==="vectors"){const m=p.headers.get("content-type");if(p.headers.get("content-length")==="0"||p.status===204)return{};if(!m||!m.includes("application/json"))return{}}return p.json()}).then(p=>u(p)).catch(p=>Ek(p,f,i,o))})}function VN(n="storage"){return{get:async(e,t,i,r)=>Rg(e,"GET",t,i,r,void 0,n),post:async(e,t,i,r,s)=>Rg(e,"POST",t,r,s,i,n),put:async(e,t,i,r,s)=>Rg(e,"PUT",t,r,s,i,n),head:async(e,t,i,r)=>Rg(e,"HEAD",t,on(on({},i),{},{noResolveJson:!0}),r,void 0,n),remove:async(e,t,i,r,s)=>Rg(e,"DELETE",t,r,s,i,n)}}const Ak=VN("storage"),{get:x0,post:Vo,put:Ww,head:Ck,remove:KM}=Ak,wa=VN("vectors");var qp=class{constructor(n,e={},t,i="storage"){this.shouldThrowOnError=!1,this.url=n,this.headers=e,this.fetch=_k(t),this.namespace=i}throwOnError(){return this.shouldThrowOnError=!0,this}async handleOperation(n){var e=this;try{return{data:await n(),error:null}}catch(t){if(e.shouldThrowOnError)throw t;if(Rb(t))return{data:null,error:t};throw t}}},Rk=class{constructor(n,e){this.downloadFn=n,this.shouldThrowOnError=e}then(n,e){return this.execute().then(n,e)}async execute(){var n=this;try{return{data:(await n.downloadFn()).body,error:null}}catch(e){if(n.shouldThrowOnError)throw e;if(Rb(e))return{data:null,error:e};throw e}}};let HN;HN=Symbol.toStringTag;var Nk=class{constructor(n,e){this.downloadFn=n,this.shouldThrowOnError=e,this[HN]="BlobDownloadBuilder",this.promise=null}asStream(){return new Rk(this.downloadFn,this.shouldThrowOnError)}then(n,e){return this.getPromise().then(n,e)}catch(n){return this.getPromise().catch(n)}finally(n){return this.getPromise().finally(n)}getPromise(){return this.promise||(this.promise=this.execute()),this.promise}async execute(){var n=this;try{return{data:await(await n.downloadFn()).blob(),error:null}}catch(e){if(n.shouldThrowOnError)throw e;if(Rb(e))return{data:null,error:e};throw e}}};const Dk={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},KA={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};var Ik=class extends qp{constructor(n,e={},t,i){super(n,e,i,"storage"),this.bucketId=t}async uploadOrUpdate(n,e,t,i){var r=this;return r.handleOperation(async()=>{let s;const o=on(on({},KA),i);let u=on(on({},r.headers),n==="POST"&&{"x-upsert":String(o.upsert)});const f=o.metadata;typeof Blob<"u"&&t instanceof Blob?(s=new FormData,s.append("cacheControl",o.cacheControl),f&&s.append("metadata",r.encodeMetadata(f)),s.append("",t)):typeof FormData<"u"&&t instanceof FormData?(s=t,s.has("cacheControl")||s.append("cacheControl",o.cacheControl),f&&!s.has("metadata")&&s.append("metadata",r.encodeMetadata(f))):(s=t,u["cache-control"]=`max-age=${o.cacheControl}`,u["content-type"]=o.contentType,f&&(u["x-metadata"]=r.toBase64(r.encodeMetadata(f))),(typeof ReadableStream<"u"&&s instanceof ReadableStream||s&&typeof s=="object"&&"pipe"in s&&typeof s.pipe=="function")&&!o.duplex&&(o.duplex="half")),i?.headers&&(u=on(on({},u),i.headers));const p=r._removeEmptyFolders(e),m=r._getFinalPath(p),v=await(n=="PUT"?Ww:Vo)(r.fetch,`${r.url}/object/${m}`,s,on({headers:u},o?.duplex?{duplex:o.duplex}:{}));return{path:p,id:v.Id,fullPath:v.Key}})}async upload(n,e,t){return this.uploadOrUpdate("POST",n,e,t)}async uploadToSignedUrl(n,e,t,i){var r=this;const s=r._removeEmptyFolders(n),o=r._getFinalPath(s),u=new URL(r.url+`/object/upload/sign/${o}`);return u.searchParams.set("token",e),r.handleOperation(async()=>{let f;const p=on({upsert:KA.upsert},i),m=on(on({},r.headers),{"x-upsert":String(p.upsert)});return typeof Blob<"u"&&t instanceof Blob?(f=new FormData,f.append("cacheControl",p.cacheControl),f.append("",t)):typeof FormData<"u"&&t instanceof FormData?(f=t,f.append("cacheControl",p.cacheControl)):(f=t,m["cache-control"]=`max-age=${p.cacheControl}`,m["content-type"]=p.contentType),{path:s,fullPath:(await Ww(r.fetch,u.toString(),f,{headers:m})).Key}})}async createSignedUploadUrl(n,e){var t=this;return t.handleOperation(async()=>{let i=t._getFinalPath(n);const r=on({},t.headers);e?.upsert&&(r["x-upsert"]="true");const s=await Vo(t.fetch,`${t.url}/object/upload/sign/${i}`,{},{headers:r}),o=new URL(t.url+s.url),u=o.searchParams.get("token");if(!u)throw new Cb("No token returned by API");return{signedUrl:o.toString(),path:n,token:u}})}async update(n,e,t){return this.uploadOrUpdate("PUT",n,e,t)}async move(n,e,t){var i=this;return i.handleOperation(async()=>await Vo(i.fetch,`${i.url}/object/move`,{bucketId:i.bucketId,sourceKey:n,destinationKey:e,destinationBucket:t?.destinationBucket},{headers:i.headers}))}async copy(n,e,t){var i=this;return i.handleOperation(async()=>({path:(await Vo(i.fetch,`${i.url}/object/copy`,{bucketId:i.bucketId,sourceKey:n,destinationKey:e,destinationBucket:t?.destinationBucket},{headers:i.headers})).Key}))}async createSignedUrl(n,e,t){var i=this;return i.handleOperation(async()=>{let r=i._getFinalPath(n),s=await Vo(i.fetch,`${i.url}/object/sign/${r}`,on({expiresIn:e},t?.transform?{transform:t.transform}:{}),{headers:i.headers});const o=t?.download?`&download=${t.download===!0?"":t.download}`:"";return{signedUrl:encodeURI(`${i.url}${s.signedURL}${o}`)}})}async createSignedUrls(n,e,t){var i=this;return i.handleOperation(async()=>{const r=await Vo(i.fetch,`${i.url}/object/sign/${i.bucketId}`,{expiresIn:e,paths:n},{headers:i.headers}),s=t?.download?`&download=${t.download===!0?"":t.download}`:"";return r.map(o=>on(on({},o),{},{signedUrl:o.signedURL?encodeURI(`${i.url}${o.signedURL}${s}`):null}))})}download(n,e){const t=typeof e?.transform<"u"?"render/image/authenticated":"object",i=this.transformOptsToQueryString(e?.transform||{}),r=i?`?${i}`:"",s=this._getFinalPath(n),o=()=>x0(this.fetch,`${this.url}/${t}/${s}${r}`,{headers:this.headers,noResolveJson:!0});return new Nk(o,this.shouldThrowOnError)}async info(n){var e=this;const t=e._getFinalPath(n);return e.handleOperation(async()=>jw(await x0(e.fetch,`${e.url}/object/info/${t}`,{headers:e.headers})))}async exists(n){var e=this;const t=e._getFinalPath(n);try{return await Ck(e.fetch,`${e.url}/object/${t}`,{headers:e.headers}),{data:!0,error:null}}catch(i){if(e.shouldThrowOnError)throw i;if(Rb(i)&&i instanceof FN){const r=i.originalError;if([400,404].includes(r?.status))return{data:!1,error:i}}throw i}}getPublicUrl(n,e){const t=this._getFinalPath(n),i=[],r=e?.download?`download=${e.download===!0?"":e.download}`:"";r!==""&&i.push(r);const s=typeof e?.transform<"u"?"render/image":"object",o=this.transformOptsToQueryString(e?.transform||{});o!==""&&i.push(o);let u=i.join("&");return u!==""&&(u=`?${u}`),{data:{publicUrl:encodeURI(`${this.url}/${s}/public/${t}${u}`)}}}async remove(n){var e=this;return e.handleOperation(async()=>await KM(e.fetch,`${e.url}/object/${e.bucketId}`,{prefixes:n},{headers:e.headers}))}async list(n,e,t){var i=this;return i.handleOperation(async()=>{const r=on(on(on({},Dk),e),{},{prefix:n||""});return await Vo(i.fetch,`${i.url}/object/list/${i.bucketId}`,r,{headers:i.headers},t)})}async listV2(n,e){var t=this;return t.handleOperation(async()=>{const i=on({},n);return await Vo(t.fetch,`${t.url}/object/list-v2/${t.bucketId}`,i,{headers:t.headers},e)})}encodeMetadata(n){return JSON.stringify(n)}toBase64(n){return typeof Buffer<"u"?Buffer.from(n).toString("base64"):btoa(n)}_getFinalPath(n){return`${this.bucketId}/${n.replace(/^\/+/,"")}`}_removeEmptyFolders(n){return n.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(n){const e=[];return n.width&&e.push(`width=${n.width}`),n.height&&e.push(`height=${n.height}`),n.resize&&e.push(`resize=${n.resize}`),n.format&&e.push(`format=${n.format}`),n.quality&&e.push(`quality=${n.quality}`),e.join("&")}};const Pk="2.93.3",Z0={"X-Client-Info":`storage-js/${Pk}`};var Ok=class extends qp{constructor(n,e={},t,i){const r=new URL(n);i?.useNewHostname&&/supabase\.(co|in|red)$/.test(r.hostname)&&!r.hostname.includes("storage.supabase.")&&(r.hostname=r.hostname.replace("supabase.","storage.supabase."));const s=r.href.replace(/\/$/,""),o=on(on({},Z0),e);super(s,o,t,"storage")}async listBuckets(n){var e=this;return e.handleOperation(async()=>{const t=e.listBucketOptionsToQueryString(n);return await x0(e.fetch,`${e.url}/bucket${t}`,{headers:e.headers})})}async getBucket(n){var e=this;return e.handleOperation(async()=>await x0(e.fetch,`${e.url}/bucket/${n}`,{headers:e.headers}))}async createBucket(n,e={public:!1}){var t=this;return t.handleOperation(async()=>await Vo(t.fetch,`${t.url}/bucket`,{id:n,name:n,type:e.type,public:e.public,file_size_limit:e.fileSizeLimit,allowed_mime_types:e.allowedMimeTypes},{headers:t.headers}))}async updateBucket(n,e){var t=this;return t.handleOperation(async()=>await Ww(t.fetch,`${t.url}/bucket/${n}`,{id:n,name:n,public:e.public,file_size_limit:e.fileSizeLimit,allowed_mime_types:e.allowedMimeTypes},{headers:t.headers}))}async emptyBucket(n){var e=this;return e.handleOperation(async()=>await Vo(e.fetch,`${e.url}/bucket/${n}/empty`,{},{headers:e.headers}))}async deleteBucket(n){var e=this;return e.handleOperation(async()=>await KM(e.fetch,`${e.url}/bucket/${n}`,{},{headers:e.headers}))}listBucketOptionsToQueryString(n){const e={};return n&&("limit"in n&&(e.limit=String(n.limit)),"offset"in n&&(e.offset=String(n.offset)),n.search&&(e.search=n.search),n.sortColumn&&(e.sortColumn=n.sortColumn),n.sortOrder&&(e.sortOrder=n.sortOrder)),Object.keys(e).length>0?"?"+new URLSearchParams(e).toString():""}},Lk=class extends qp{constructor(n,e={},t){const i=n.replace(/\/$/,""),r=on(on({},Z0),e);super(i,r,t,"storage")}async createBucket(n){var e=this;return e.handleOperation(async()=>await Vo(e.fetch,`${e.url}/bucket`,{name:n},{headers:e.headers}))}async listBuckets(n){var e=this;return e.handleOperation(async()=>{const t=new URLSearchParams;n?.limit!==void 0&&t.set("limit",n.limit.toString()),n?.offset!==void 0&&t.set("offset",n.offset.toString()),n?.sortColumn&&t.set("sortColumn",n.sortColumn),n?.sortOrder&&t.set("sortOrder",n.sortOrder),n?.search&&t.set("search",n.search);const i=t.toString(),r=i?`${e.url}/bucket?${i}`:`${e.url}/bucket`;return await x0(e.fetch,r,{headers:e.headers})})}async deleteBucket(n){var e=this;return e.handleOperation(async()=>await KM(e.fetch,`${e.url}/bucket/${n}`,{},{headers:e.headers}))}from(n){var e=this;if(!bk(n))throw new Cb("Invalid bucket name: File, folder, and bucket names must follow AWS object key naming guidelines and should avoid the use of any other characters.");const t=new yk({baseUrl:this.url,catalogName:n,auth:{type:"custom",getHeaders:async()=>e.headers},fetch:this.fetch}),i=this.shouldThrowOnError;return new Proxy(t,{get(r,s){const o=r[s];return typeof o!="function"?o:async(...u)=>{try{return{data:await o.apply(r,u),error:null}}catch(f){if(i)throw f;return{data:null,error:f}}}}})}},Uk=class extends qp{constructor(n,e={},t){const i=n.replace(/\/$/,""),r=on(on({},Z0),{},{"Content-Type":"application/json"},e);super(i,r,t,"vectors")}async createIndex(n){var e=this;return e.handleOperation(async()=>await wa.post(e.fetch,`${e.url}/CreateIndex`,n,{headers:e.headers})||{})}async getIndex(n,e){var t=this;return t.handleOperation(async()=>await wa.post(t.fetch,`${t.url}/GetIndex`,{vectorBucketName:n,indexName:e},{headers:t.headers}))}async listIndexes(n){var e=this;return e.handleOperation(async()=>await wa.post(e.fetch,`${e.url}/ListIndexes`,n,{headers:e.headers}))}async deleteIndex(n,e){var t=this;return t.handleOperation(async()=>await wa.post(t.fetch,`${t.url}/DeleteIndex`,{vectorBucketName:n,indexName:e},{headers:t.headers})||{})}},kk=class extends qp{constructor(n,e={},t){const i=n.replace(/\/$/,""),r=on(on({},Z0),{},{"Content-Type":"application/json"},e);super(i,r,t,"vectors")}async putVectors(n){var e=this;if(n.vectors.length<1||n.vectors.length>500)throw new Error("Vector batch size must be between 1 and 500 items");return e.handleOperation(async()=>await wa.post(e.fetch,`${e.url}/PutVectors`,n,{headers:e.headers})||{})}async getVectors(n){var e=this;return e.handleOperation(async()=>await wa.post(e.fetch,`${e.url}/GetVectors`,n,{headers:e.headers}))}async listVectors(n){var e=this;if(n.segmentCount!==void 0){if(n.segmentCount<1||n.segmentCount>16)throw new Error("segmentCount must be between 1 and 16");if(n.segmentIndex!==void 0&&(n.segmentIndex<0||n.segmentIndex>=n.segmentCount))throw new Error(`segmentIndex must be between 0 and ${n.segmentCount-1}`)}return e.handleOperation(async()=>await wa.post(e.fetch,`${e.url}/ListVectors`,n,{headers:e.headers}))}async queryVectors(n){var e=this;return e.handleOperation(async()=>await wa.post(e.fetch,`${e.url}/QueryVectors`,n,{headers:e.headers}))}async deleteVectors(n){var e=this;if(n.keys.length<1||n.keys.length>500)throw new Error("Keys batch size must be between 1 and 500 items");return e.handleOperation(async()=>await wa.post(e.fetch,`${e.url}/DeleteVectors`,n,{headers:e.headers})||{})}},Bk=class extends qp{constructor(n,e={},t){const i=n.replace(/\/$/,""),r=on(on({},Z0),{},{"Content-Type":"application/json"},e);super(i,r,t,"vectors")}async createBucket(n){var e=this;return e.handleOperation(async()=>await wa.post(e.fetch,`${e.url}/CreateVectorBucket`,{vectorBucketName:n},{headers:e.headers})||{})}async getBucket(n){var e=this;return e.handleOperation(async()=>await wa.post(e.fetch,`${e.url}/GetVectorBucket`,{vectorBucketName:n},{headers:e.headers}))}async listBuckets(n={}){var e=this;return e.handleOperation(async()=>await wa.post(e.fetch,`${e.url}/ListVectorBuckets`,n,{headers:e.headers}))}async deleteBucket(n){var e=this;return e.handleOperation(async()=>await wa.post(e.fetch,`${e.url}/DeleteVectorBucket`,{vectorBucketName:n},{headers:e.headers})||{})}},zk=class extends Bk{constructor(n,e={}){super(n,e.headers||{},e.fetch)}from(n){return new Fk(this.url,this.headers,n,this.fetch)}async createBucket(n){var e=()=>super.createBucket,t=this;return e().call(t,n)}async getBucket(n){var e=()=>super.getBucket,t=this;return e().call(t,n)}async listBuckets(n={}){var e=()=>super.listBuckets,t=this;return e().call(t,n)}async deleteBucket(n){var e=()=>super.deleteBucket,t=this;return e().call(t,n)}},Fk=class extends Uk{constructor(n,e,t,i){super(n,e,i),this.vectorBucketName=t}async createIndex(n){var e=()=>super.createIndex,t=this;return e().call(t,on(on({},n),{},{vectorBucketName:t.vectorBucketName}))}async listIndexes(n={}){var e=()=>super.listIndexes,t=this;return e().call(t,on(on({},n),{},{vectorBucketName:t.vectorBucketName}))}async getIndex(n){var e=()=>super.getIndex,t=this;return e().call(t,t.vectorBucketName,n)}async deleteIndex(n){var e=()=>super.deleteIndex,t=this;return e().call(t,t.vectorBucketName,n)}index(n){return new Vk(this.url,this.headers,this.vectorBucketName,n,this.fetch)}},Vk=class extends kk{constructor(n,e,t,i,r){super(n,e,r),this.vectorBucketName=t,this.indexName=i}async putVectors(n){var e=()=>super.putVectors,t=this;return e().call(t,on(on({},n),{},{vectorBucketName:t.vectorBucketName,indexName:t.indexName}))}async getVectors(n){var e=()=>super.getVectors,t=this;return e().call(t,on(on({},n),{},{vectorBucketName:t.vectorBucketName,indexName:t.indexName}))}async listVectors(n={}){var e=()=>super.listVectors,t=this;return e().call(t,on(on({},n),{},{vectorBucketName:t.vectorBucketName,indexName:t.indexName}))}async queryVectors(n){var e=()=>super.queryVectors,t=this;return e().call(t,on(on({},n),{},{vectorBucketName:t.vectorBucketName,indexName:t.indexName}))}async deleteVectors(n){var e=()=>super.deleteVectors,t=this;return e().call(t,on(on({},n),{},{vectorBucketName:t.vectorBucketName,indexName:t.indexName}))}},Hk=class extends Ok{constructor(n,e={},t,i){super(n,e,t,i)}from(n){return new Ik(this.url,this.headers,n,this.fetch)}get vectors(){return new zk(this.url+"/vector",{headers:this.headers,fetch:this.fetch})}get analytics(){return new Lk(this.url+"/iceberg",this.headers,this.fetch)}};const GN="2.93.3",gp=30*1e3,qw=3,d1=qw*gp,Gk="http://localhost:9999",jk="supabase.auth.token",Wk={"X-Client-Info":`gotrue-js/${GN}`},Xw="X-Supabase-Api-Version",jN={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},qk=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i,Xk=600*1e3;class b0 extends Error{constructor(e,t,i){super(e),this.__isAuthError=!0,this.name="AuthError",this.status=t,this.code=i}}function qt(n){return typeof n=="object"&&n!==null&&"__isAuthError"in n}class $k extends b0{constructor(e,t,i){super(e,t,i),this.name="AuthApiError",this.status=t,this.code=i}}function Yk(n){return qt(n)&&n.name==="AuthApiError"}class lf extends b0{constructor(e,t){super(e),this.name="AuthUnknownError",this.originalError=t}}class Oc extends b0{constructor(e,t,i,r){super(e,i,r),this.name=t,this.status=i}}class Sa extends Oc{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}function p1(n){return qt(n)&&n.name==="AuthSessionMissingError"}class Fd extends Oc{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class s_ extends Oc{constructor(e){super(e,"AuthInvalidCredentialsError",400,void 0)}}class a_ extends Oc{constructor(e,t=null){super(e,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=t}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}function Zk(n){return qt(n)&&n.name==="AuthImplicitGrantRedirectError"}class JA extends Oc{constructor(e,t=null){super(e,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=t}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class Kk extends Oc{constructor(){super("PKCE code verifier not found in storage. This can happen if the auth flow was initiated in a different browser or device, or if the storage was cleared. For SSR frameworks (Next.js, SvelteKit, etc.), use @supabase/ssr on both the server and client to store the code verifier in cookies.","AuthPKCECodeVerifierMissingError",400,"pkce_code_verifier_not_found")}}class $w extends Oc{constructor(e,t){super(e,"AuthRetryableFetchError",t,void 0)}}function m1(n){return qt(n)&&n.name==="AuthRetryableFetchError"}class QA extends Oc{constructor(e,t,i){super(e,"AuthWeakPasswordError",t,"weak_password"),this.reasons=i}}class Yw extends Oc{constructor(e){super(e,"AuthInvalidJwtError",400,"invalid_jwt")}}const gx="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),eC=` 	
\r=`.split(""),Jk=(()=>{const n=new Array(128);for(let e=0;e<n.length;e+=1)n[e]=-1;for(let e=0;e<eC.length;e+=1)n[eC[e].charCodeAt(0)]=-2;for(let e=0;e<gx.length;e+=1)n[gx[e].charCodeAt(0)]=e;return n})();function tC(n,e,t){if(n!==null)for(e.queue=e.queue<<8|n,e.queuedBits+=8;e.queuedBits>=6;){const i=e.queue>>e.queuedBits-6&63;t(gx[i]),e.queuedBits-=6}else if(e.queuedBits>0)for(e.queue=e.queue<<6-e.queuedBits,e.queuedBits=6;e.queuedBits>=6;){const i=e.queue>>e.queuedBits-6&63;t(gx[i]),e.queuedBits-=6}}function WN(n,e,t){const i=Jk[n];if(i>-1)for(e.queue=e.queue<<6|i,e.queuedBits+=6;e.queuedBits>=8;)t(e.queue>>e.queuedBits-8&255),e.queuedBits-=8;else{if(i===-2)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(n)}"`)}}function nC(n){const e=[],t=o=>{e.push(String.fromCodePoint(o))},i={utf8seq:0,codepoint:0},r={queue:0,queuedBits:0},s=o=>{tB(o,i,t)};for(let o=0;o<n.length;o+=1)WN(n.charCodeAt(o),r,s);return e.join("")}function Qk(n,e){if(n<=127){e(n);return}else if(n<=2047){e(192|n>>6),e(128|n&63);return}else if(n<=65535){e(224|n>>12),e(128|n>>6&63),e(128|n&63);return}else if(n<=1114111){e(240|n>>18),e(128|n>>12&63),e(128|n>>6&63),e(128|n&63);return}throw new Error(`Unrecognized Unicode codepoint: ${n.toString(16)}`)}function eB(n,e){for(let t=0;t<n.length;t+=1){let i=n.charCodeAt(t);if(i>55295&&i<=56319){const r=(i-55296)*1024&65535;i=(n.charCodeAt(t+1)-56320&65535|r)+65536,t+=1}Qk(i,e)}}function tB(n,e,t){if(e.utf8seq===0){if(n<=127){t(n);return}for(let i=1;i<6;i+=1)if((n>>7-i&1)===0){e.utf8seq=i;break}if(e.utf8seq===2)e.codepoint=n&31;else if(e.utf8seq===3)e.codepoint=n&15;else if(e.utf8seq===4)e.codepoint=n&7;else throw new Error("Invalid UTF-8 sequence");e.utf8seq-=1}else if(e.utf8seq>0){if(n<=127)throw new Error("Invalid UTF-8 sequence");e.codepoint=e.codepoint<<6|n&63,e.utf8seq-=1,e.utf8seq===0&&t(e.codepoint)}}function Ap(n){const e=[],t={queue:0,queuedBits:0},i=r=>{e.push(r)};for(let r=0;r<n.length;r+=1)WN(n.charCodeAt(r),t,i);return new Uint8Array(e)}function nB(n){const e=[];return eB(n,t=>e.push(t)),new Uint8Array(e)}function uf(n){const e=[],t={queue:0,queuedBits:0},i=r=>{e.push(r)};return n.forEach(r=>tC(r,t,i)),tC(null,t,i),e.join("")}function iB(n){return Math.round(Date.now()/1e3)+n}function rB(){return Symbol("auth-callback")}const ns=()=>typeof window<"u"&&typeof document<"u",Fh={tested:!1,writable:!1},qN=()=>{if(!ns())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(Fh.tested)return Fh.writable;const n=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(n,n),globalThis.localStorage.removeItem(n),Fh.tested=!0,Fh.writable=!0}catch{Fh.tested=!0,Fh.writable=!1}return Fh.writable};function sB(n){const e={},t=new URL(n);if(t.hash&&t.hash[0]==="#")try{new URLSearchParams(t.hash.substring(1)).forEach((r,s)=>{e[s]=r})}catch{}return t.searchParams.forEach((i,r)=>{e[r]=i}),e}const XN=n=>n?(...e)=>n(...e):(...e)=>fetch(...e),aB=n=>typeof n=="object"&&n!==null&&"status"in n&&"ok"in n&&"json"in n&&typeof n.json=="function",vp=async(n,e,t)=>{await n.setItem(e,JSON.stringify(t))},Vh=async(n,e)=>{const t=await n.getItem(e);if(!t)return null;try{return JSON.parse(t)}catch{return t}},ts=async(n,e)=>{await n.removeItem(e)};class Nb{constructor(){this.promise=new Nb.promiseConstructor((e,t)=>{this.resolve=e,this.reject=t})}}Nb.promiseConstructor=Promise;function o_(n){const e=n.split(".");if(e.length!==3)throw new Yw("Invalid JWT structure");for(let i=0;i<e.length;i++)if(!qk.test(e[i]))throw new Yw("JWT not in base64url format");return{header:JSON.parse(nC(e[0])),payload:JSON.parse(nC(e[1])),signature:Ap(e[2]),raw:{header:e[0],payload:e[1]}}}async function oB(n){return await new Promise(e=>{setTimeout(()=>e(null),n)})}function lB(n,e){return new Promise((i,r)=>{(async()=>{for(let s=0;s<1/0;s++)try{const o=await n(s);if(!e(s,null,o)){i(o);return}}catch(o){if(!e(s,o)){r(o);return}}})()})}function cB(n){return("0"+n.toString(16)).substr(-2)}function uB(){const e=new Uint32Array(56);if(typeof crypto>"u"){const t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",i=t.length;let r="";for(let s=0;s<56;s++)r+=t.charAt(Math.floor(Math.random()*i));return r}return crypto.getRandomValues(e),Array.from(e,cB).join("")}async function hB(n){const t=new TextEncoder().encode(n),i=await crypto.subtle.digest("SHA-256",t),r=new Uint8Array(i);return Array.from(r).map(s=>String.fromCharCode(s)).join("")}async function fB(n){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),n;const t=await hB(n);return btoa(t).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function Vd(n,e,t=!1){const i=uB();let r=i;t&&(r+="/PASSWORD_RECOVERY"),await vp(n,`${e}-code-verifier`,r);const s=await fB(i);return[s,i===s?"plain":"s256"]}const dB=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function pB(n){const e=n.headers.get(Xw);if(!e||!e.match(dB))return null;try{return new Date(`${e}T00:00:00.0Z`)}catch{return null}}function mB(n){if(!n)throw new Error("Missing exp claim");const e=Math.floor(Date.now()/1e3);if(n<=e)throw new Error("JWT has expired")}function gB(n){switch(n){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}const vB=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function Hd(n){if(!vB.test(n))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}function g1(){const n={};return new Proxy(n,{get:(e,t)=>{if(t==="__isUserNotAvailableProxy")return!0;if(typeof t=="symbol"){const i=t.toString();if(i==="Symbol(Symbol.toPrimitive)"||i==="Symbol(Symbol.toStringTag)"||i==="Symbol(util.inspect.custom)")return}throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Accessing the "${t}" property of the session object is not supported. Please use getUser() instead.`)},set:(e,t)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Setting the "${t}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)},deleteProperty:(e,t)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Deleting the "${t}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)}})}function yB(n,e){return new Proxy(n,{get:(t,i,r)=>{if(i==="__isInsecureUserWarningProxy")return!0;if(typeof i=="symbol"){const s=i.toString();if(s==="Symbol(Symbol.toPrimitive)"||s==="Symbol(Symbol.toStringTag)"||s==="Symbol(util.inspect.custom)"||s==="Symbol(nodejs.util.inspect.custom)")return Reflect.get(t,i,r)}return!e.value&&typeof i=="string"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),e.value=!0),Reflect.get(t,i,r)}})}function iC(n){return JSON.parse(JSON.stringify(n))}const rf=n=>n.msg||n.message||n.error_description||n.error||JSON.stringify(n),_B=[502,503,504];async function rC(n){var e;if(!aB(n))throw new $w(rf(n),0);if(_B.includes(n.status))throw new $w(rf(n),n.status);let t;try{t=await n.json()}catch(s){throw new lf(rf(s),s)}let i;const r=pB(n);if(r&&r.getTime()>=jN["2024-01-01"].timestamp&&typeof t=="object"&&t&&typeof t.code=="string"?i=t.code:typeof t=="object"&&t&&typeof t.error_code=="string"&&(i=t.error_code),i){if(i==="weak_password")throw new QA(rf(t),n.status,((e=t.weak_password)===null||e===void 0?void 0:e.reasons)||[]);if(i==="session_not_found")throw new Sa}else if(typeof t=="object"&&t&&typeof t.weak_password=="object"&&t.weak_password&&Array.isArray(t.weak_password.reasons)&&t.weak_password.reasons.length&&t.weak_password.reasons.reduce((s,o)=>s&&typeof o=="string",!0))throw new QA(rf(t),n.status,t.weak_password.reasons);throw new $k(rf(t),n.status||500,i)}const xB=(n,e,t,i)=>{const r={method:n,headers:e?.headers||{}};return n==="GET"?r:(r.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},e?.headers),r.body=JSON.stringify(i),Object.assign(Object.assign({},r),t))};async function an(n,e,t,i){var r;const s=Object.assign({},i?.headers);s[Xw]||(s[Xw]=jN["2024-01-01"].name),i?.jwt&&(s.Authorization=`Bearer ${i.jwt}`);const o=(r=i?.query)!==null&&r!==void 0?r:{};i?.redirectTo&&(o.redirect_to=i.redirectTo);const u=Object.keys(o).length?"?"+new URLSearchParams(o).toString():"",f=await bB(n,e,t+u,{headers:s,noResolveJson:i?.noResolveJson},{},i?.body);return i?.xform?i?.xform(f):{data:Object.assign({},f),error:null}}async function bB(n,e,t,i,r,s){const o=xB(e,i,r,s);let u;try{u=await n(t,Object.assign({},o))}catch(f){throw console.error(f),new $w(rf(f),0)}if(u.ok||await rC(u),i?.noResolveJson)return u;try{return await u.json()}catch(f){await rC(f)}}function Bo(n){var e;let t=null;MB(n)&&(t=Object.assign({},n),n.expires_at||(t.expires_at=iB(n.expires_in)));const i=(e=n.user)!==null&&e!==void 0?e:n;return{data:{session:t,user:i},error:null}}function sC(n){const e=Bo(n);return!e.error&&n.weak_password&&typeof n.weak_password=="object"&&Array.isArray(n.weak_password.reasons)&&n.weak_password.reasons.length&&n.weak_password.message&&typeof n.weak_password.message=="string"&&n.weak_password.reasons.reduce((t,i)=>t&&typeof i=="string",!0)&&(e.data.weak_password=n.weak_password),e}function ku(n){var e;return{data:{user:(e=n.user)!==null&&e!==void 0?e:n},error:null}}function SB(n){return{data:n,error:null}}function wB(n){const{action_link:e,email_otp:t,hashed_token:i,redirect_to:r,verification_type:s}=n,o=Ab(n,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),u={action_link:e,email_otp:t,hashed_token:i,redirect_to:r,verification_type:s},f=Object.assign({},o);return{data:{properties:u,user:f},error:null}}function aC(n){return n}function MB(n){return n.access_token&&n.refresh_token&&n.expires_in}const v1=["global","local","others"];class EB{constructor({url:e="",headers:t={},fetch:i}){this.url=e,this.headers=t,this.fetch=XN(i),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)},this.oauth={listClients:this._listOAuthClients.bind(this),createClient:this._createOAuthClient.bind(this),getClient:this._getOAuthClient.bind(this),updateClient:this._updateOAuthClient.bind(this),deleteClient:this._deleteOAuthClient.bind(this),regenerateClientSecret:this._regenerateOAuthClientSecret.bind(this)}}async signOut(e,t=v1[0]){if(v1.indexOf(t)<0)throw new Error(`@supabase/auth-js: Parameter scope must be one of ${v1.join(", ")}`);try{return await an(this.fetch,"POST",`${this.url}/logout?scope=${t}`,{headers:this.headers,jwt:e,noResolveJson:!0}),{data:null,error:null}}catch(i){if(qt(i))return{data:null,error:i};throw i}}async inviteUserByEmail(e,t={}){try{return await an(this.fetch,"POST",`${this.url}/invite`,{body:{email:e,data:t.data},headers:this.headers,redirectTo:t.redirectTo,xform:ku})}catch(i){if(qt(i))return{data:{user:null},error:i};throw i}}async generateLink(e){try{const{options:t}=e,i=Ab(e,["options"]),r=Object.assign(Object.assign({},i),t);return"newEmail"in i&&(r.new_email=i?.newEmail,delete r.newEmail),await an(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:r,headers:this.headers,xform:wB,redirectTo:t?.redirectTo})}catch(t){if(qt(t))return{data:{properties:null,user:null},error:t};throw t}}async createUser(e){try{return await an(this.fetch,"POST",`${this.url}/admin/users`,{body:e,headers:this.headers,xform:ku})}catch(t){if(qt(t))return{data:{user:null},error:t};throw t}}async listUsers(e){var t,i,r,s,o,u,f;try{const p={nextPage:null,lastPage:0,total:0},m=await an(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(i=(t=e?.page)===null||t===void 0?void 0:t.toString())!==null&&i!==void 0?i:"",per_page:(s=(r=e?.perPage)===null||r===void 0?void 0:r.toString())!==null&&s!==void 0?s:""},xform:aC});if(m.error)throw m.error;const v=await m.json(),_=(o=m.headers.get("x-total-count"))!==null&&o!==void 0?o:0,x=(f=(u=m.headers.get("link"))===null||u===void 0?void 0:u.split(","))!==null&&f!==void 0?f:[];return x.length>0&&(x.forEach(S=>{const A=parseInt(S.split(";")[0].split("=")[1].substring(0,1)),E=JSON.parse(S.split(";")[1].split("=")[1]);p[`${E}Page`]=A}),p.total=parseInt(_)),{data:Object.assign(Object.assign({},v),p),error:null}}catch(p){if(qt(p))return{data:{users:[]},error:p};throw p}}async getUserById(e){Hd(e);try{return await an(this.fetch,"GET",`${this.url}/admin/users/${e}`,{headers:this.headers,xform:ku})}catch(t){if(qt(t))return{data:{user:null},error:t};throw t}}async updateUserById(e,t){Hd(e);try{return await an(this.fetch,"PUT",`${this.url}/admin/users/${e}`,{body:t,headers:this.headers,xform:ku})}catch(i){if(qt(i))return{data:{user:null},error:i};throw i}}async deleteUser(e,t=!1){Hd(e);try{return await an(this.fetch,"DELETE",`${this.url}/admin/users/${e}`,{headers:this.headers,body:{should_soft_delete:t},xform:ku})}catch(i){if(qt(i))return{data:{user:null},error:i};throw i}}async _listFactors(e){Hd(e.userId);try{const{data:t,error:i}=await an(this.fetch,"GET",`${this.url}/admin/users/${e.userId}/factors`,{headers:this.headers,xform:r=>({data:{factors:r},error:null})});return{data:t,error:i}}catch(t){if(qt(t))return{data:null,error:t};throw t}}async _deleteFactor(e){Hd(e.userId),Hd(e.id);try{return{data:await an(this.fetch,"DELETE",`${this.url}/admin/users/${e.userId}/factors/${e.id}`,{headers:this.headers}),error:null}}catch(t){if(qt(t))return{data:null,error:t};throw t}}async _listOAuthClients(e){var t,i,r,s,o,u,f;try{const p={nextPage:null,lastPage:0,total:0},m=await an(this.fetch,"GET",`${this.url}/admin/oauth/clients`,{headers:this.headers,noResolveJson:!0,query:{page:(i=(t=e?.page)===null||t===void 0?void 0:t.toString())!==null&&i!==void 0?i:"",per_page:(s=(r=e?.perPage)===null||r===void 0?void 0:r.toString())!==null&&s!==void 0?s:""},xform:aC});if(m.error)throw m.error;const v=await m.json(),_=(o=m.headers.get("x-total-count"))!==null&&o!==void 0?o:0,x=(f=(u=m.headers.get("link"))===null||u===void 0?void 0:u.split(","))!==null&&f!==void 0?f:[];return x.length>0&&(x.forEach(S=>{const A=parseInt(S.split(";")[0].split("=")[1].substring(0,1)),E=JSON.parse(S.split(";")[1].split("=")[1]);p[`${E}Page`]=A}),p.total=parseInt(_)),{data:Object.assign(Object.assign({},v),p),error:null}}catch(p){if(qt(p))return{data:{clients:[]},error:p};throw p}}async _createOAuthClient(e){try{return await an(this.fetch,"POST",`${this.url}/admin/oauth/clients`,{body:e,headers:this.headers,xform:t=>({data:t,error:null})})}catch(t){if(qt(t))return{data:null,error:t};throw t}}async _getOAuthClient(e){try{return await an(this.fetch,"GET",`${this.url}/admin/oauth/clients/${e}`,{headers:this.headers,xform:t=>({data:t,error:null})})}catch(t){if(qt(t))return{data:null,error:t};throw t}}async _updateOAuthClient(e,t){try{return await an(this.fetch,"PUT",`${this.url}/admin/oauth/clients/${e}`,{body:t,headers:this.headers,xform:i=>({data:i,error:null})})}catch(i){if(qt(i))return{data:null,error:i};throw i}}async _deleteOAuthClient(e){try{return await an(this.fetch,"DELETE",`${this.url}/admin/oauth/clients/${e}`,{headers:this.headers,noResolveJson:!0}),{data:null,error:null}}catch(t){if(qt(t))return{data:null,error:t};throw t}}async _regenerateOAuthClientSecret(e){try{return await an(this.fetch,"POST",`${this.url}/admin/oauth/clients/${e}/regenerate_secret`,{headers:this.headers,xform:t=>({data:t,error:null})})}catch(t){if(qt(t))return{data:null,error:t};throw t}}}function oC(n={}){return{getItem:e=>n[e]||null,setItem:(e,t)=>{n[e]=t},removeItem:e=>{delete n[e]}}}const Gd={debug:!!(globalThis&&qN()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class $N extends Error{constructor(e){super(e),this.isAcquireTimeout=!0}}class TB extends $N{}async function AB(n,e,t){Gd.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",n,e);const i=new globalThis.AbortController;return e>0&&setTimeout(()=>{i.abort(),Gd.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",n)},e),await Promise.resolve().then(()=>globalThis.navigator.locks.request(n,e===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:i.signal},async r=>{if(r){Gd.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",n,r.name);try{return await t()}finally{Gd.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",n,r.name)}}else{if(e===0)throw Gd.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",n),new TB(`Acquiring an exclusive Navigator LockManager lock "${n}" immediately failed`);if(Gd.debug)try{const s=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(s,null,"  "))}catch(s){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",s)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await t()}}))}function CB(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}function YN(n){if(!/^0x[a-fA-F0-9]{40}$/.test(n))throw new Error(`@supabase/auth-js: Address "${n}" is invalid.`);return n.toLowerCase()}function RB(n){return parseInt(n,16)}function NB(n){const e=new TextEncoder().encode(n);return"0x"+Array.from(e,i=>i.toString(16).padStart(2,"0")).join("")}function DB(n){var e;const{chainId:t,domain:i,expirationTime:r,issuedAt:s=new Date,nonce:o,notBefore:u,requestId:f,resources:p,scheme:m,uri:v,version:_}=n;{if(!Number.isInteger(t))throw new Error(`@supabase/auth-js: Invalid SIWE message field "chainId". Chain ID must be a EIP-155 chain ID. Provided value: ${t}`);if(!i)throw new Error('@supabase/auth-js: Invalid SIWE message field "domain". Domain must be provided.');if(o&&o.length<8)throw new Error(`@supabase/auth-js: Invalid SIWE message field "nonce". Nonce must be at least 8 characters. Provided value: ${o}`);if(!v)throw new Error('@supabase/auth-js: Invalid SIWE message field "uri". URI must be provided.');if(_!=="1")throw new Error(`@supabase/auth-js: Invalid SIWE message field "version". Version must be '1'. Provided value: ${_}`);if(!((e=n.statement)===null||e===void 0)&&e.includes(`
`))throw new Error(`@supabase/auth-js: Invalid SIWE message field "statement". Statement must not include '\\n'. Provided value: ${n.statement}`)}const x=YN(n.address),S=m?`${m}://${i}`:i,A=n.statement?`${n.statement}
`:"",E=`${S} wants you to sign in with your Ethereum account:
${x}

${A}`;let M=`URI: ${v}
Version: ${_}
Chain ID: ${t}${o?`
Nonce: ${o}`:""}
Issued At: ${s.toISOString()}`;if(r&&(M+=`
Expiration Time: ${r.toISOString()}`),u&&(M+=`
Not Before: ${u.toISOString()}`),f&&(M+=`
Request ID: ${f}`),p){let C=`
Resources:`;for(const N of p){if(!N||typeof N!="string")throw new Error(`@supabase/auth-js: Invalid SIWE message field "resources". Every resource must be a valid string. Provided value: ${N}`);C+=`
- ${N}`}M+=C}return`${E}
${M}`}class Mr extends Error{constructor({message:e,code:t,cause:i,name:r}){var s;super(e,{cause:i}),this.__isWebAuthnError=!0,this.name=(s=r??(i instanceof Error?i.name:void 0))!==null&&s!==void 0?s:"Unknown Error",this.code=t}}class vx extends Mr{constructor(e,t){super({code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:t,message:e}),this.name="WebAuthnUnknownError",this.originalError=t}}function IB({error:n,options:e}){var t,i,r;const{publicKey:s}=e;if(!s)throw Error("options was missing required publicKey property");if(n.name==="AbortError"){if(e.signal instanceof AbortSignal)return new Mr({message:"Registration ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:n})}else if(n.name==="ConstraintError"){if(((t=s.authenticatorSelection)===null||t===void 0?void 0:t.requireResidentKey)===!0)return new Mr({message:"Discoverable credentials were required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_DISCOVERABLE_CREDENTIAL_SUPPORT",cause:n});if(e.mediation==="conditional"&&((i=s.authenticatorSelection)===null||i===void 0?void 0:i.userVerification)==="required")return new Mr({message:"User verification was required during automatic registration but it could not be performed",code:"ERROR_AUTO_REGISTER_USER_VERIFICATION_FAILURE",cause:n});if(((r=s.authenticatorSelection)===null||r===void 0?void 0:r.userVerification)==="required")return new Mr({message:"User verification was required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_USER_VERIFICATION_SUPPORT",cause:n})}else{if(n.name==="InvalidStateError")return new Mr({message:"The authenticator was previously registered",code:"ERROR_AUTHENTICATOR_PREVIOUSLY_REGISTERED",cause:n});if(n.name==="NotAllowedError")return new Mr({message:n.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:n});if(n.name==="NotSupportedError")return s.pubKeyCredParams.filter(u=>u.type==="public-key").length===0?new Mr({message:'No entry in pubKeyCredParams was of type "public-key"',code:"ERROR_MALFORMED_PUBKEYCREDPARAMS",cause:n}):new Mr({message:"No available authenticator supported any of the specified pubKeyCredParams algorithms",code:"ERROR_AUTHENTICATOR_NO_SUPPORTED_PUBKEYCREDPARAMS_ALG",cause:n});if(n.name==="SecurityError"){const o=window.location.hostname;if(ZN(o)){if(s.rp.id!==o)return new Mr({message:`The RP ID "${s.rp.id}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:n})}else return new Mr({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:n})}else if(n.name==="TypeError"){if(s.user.id.byteLength<1||s.user.id.byteLength>64)return new Mr({message:"User ID was not between 1 and 64 characters",code:"ERROR_INVALID_USER_ID_LENGTH",cause:n})}else if(n.name==="UnknownError")return new Mr({message:"The authenticator was unable to process the specified options, or could not create a new credential",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:n})}return new Mr({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:n})}function PB({error:n,options:e}){const{publicKey:t}=e;if(!t)throw Error("options was missing required publicKey property");if(n.name==="AbortError"){if(e.signal instanceof AbortSignal)return new Mr({message:"Authentication ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:n})}else{if(n.name==="NotAllowedError")return new Mr({message:n.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:n});if(n.name==="SecurityError"){const i=window.location.hostname;if(ZN(i)){if(t.rpId!==i)return new Mr({message:`The RP ID "${t.rpId}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:n})}else return new Mr({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:n})}else if(n.name==="UnknownError")return new Mr({message:"The authenticator was unable to process the specified options, or could not create a new assertion signature",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:n})}return new Mr({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:n})}class OB{createNewAbortSignal(){if(this.controller){const t=new Error("Cancelling existing WebAuthn API call for new one");t.name="AbortError",this.controller.abort(t)}const e=new AbortController;return this.controller=e,e.signal}cancelCeremony(){if(this.controller){const e=new Error("Manually cancelling existing WebAuthn API call");e.name="AbortError",this.controller.abort(e),this.controller=void 0}}}const LB=new OB;function UB(n){if(!n)throw new Error("Credential creation options are required");if(typeof PublicKeyCredential<"u"&&"parseCreationOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseCreationOptionsFromJSON=="function")return PublicKeyCredential.parseCreationOptionsFromJSON(n);const{challenge:e,user:t,excludeCredentials:i}=n,r=Ab(n,["challenge","user","excludeCredentials"]),s=Ap(e).buffer,o=Object.assign(Object.assign({},t),{id:Ap(t.id).buffer}),u=Object.assign(Object.assign({},r),{challenge:s,user:o});if(i&&i.length>0){u.excludeCredentials=new Array(i.length);for(let f=0;f<i.length;f++){const p=i[f];u.excludeCredentials[f]=Object.assign(Object.assign({},p),{id:Ap(p.id).buffer,type:p.type||"public-key",transports:p.transports})}}return u}function kB(n){if(!n)throw new Error("Credential request options are required");if(typeof PublicKeyCredential<"u"&&"parseRequestOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseRequestOptionsFromJSON=="function")return PublicKeyCredential.parseRequestOptionsFromJSON(n);const{challenge:e,allowCredentials:t}=n,i=Ab(n,["challenge","allowCredentials"]),r=Ap(e).buffer,s=Object.assign(Object.assign({},i),{challenge:r});if(t&&t.length>0){s.allowCredentials=new Array(t.length);for(let o=0;o<t.length;o++){const u=t[o];s.allowCredentials[o]=Object.assign(Object.assign({},u),{id:Ap(u.id).buffer,type:u.type||"public-key",transports:u.transports})}}return s}function BB(n){var e;if("toJSON"in n&&typeof n.toJSON=="function")return n.toJSON();const t=n;return{id:n.id,rawId:n.id,response:{attestationObject:uf(new Uint8Array(n.response.attestationObject)),clientDataJSON:uf(new Uint8Array(n.response.clientDataJSON))},type:"public-key",clientExtensionResults:n.getClientExtensionResults(),authenticatorAttachment:(e=t.authenticatorAttachment)!==null&&e!==void 0?e:void 0}}function zB(n){var e;if("toJSON"in n&&typeof n.toJSON=="function")return n.toJSON();const t=n,i=n.getClientExtensionResults(),r=n.response;return{id:n.id,rawId:n.id,response:{authenticatorData:uf(new Uint8Array(r.authenticatorData)),clientDataJSON:uf(new Uint8Array(r.clientDataJSON)),signature:uf(new Uint8Array(r.signature)),userHandle:r.userHandle?uf(new Uint8Array(r.userHandle)):void 0},type:"public-key",clientExtensionResults:i,authenticatorAttachment:(e=t.authenticatorAttachment)!==null&&e!==void 0?e:void 0}}function ZN(n){return n==="localhost"||/^([a-z0-9]+(-[a-z0-9]+)*\.)+[a-z]{2,}$/i.test(n)}function lC(){var n,e;return!!(ns()&&"PublicKeyCredential"in window&&window.PublicKeyCredential&&"credentials"in navigator&&typeof((n=navigator?.credentials)===null||n===void 0?void 0:n.create)=="function"&&typeof((e=navigator?.credentials)===null||e===void 0?void 0:e.get)=="function")}async function FB(n){try{const e=await navigator.credentials.create(n);return e?e instanceof PublicKeyCredential?{data:e,error:null}:{data:null,error:new vx("Browser returned unexpected credential type",e)}:{data:null,error:new vx("Empty credential response",e)}}catch(e){return{data:null,error:IB({error:e,options:n})}}}async function VB(n){try{const e=await navigator.credentials.get(n);return e?e instanceof PublicKeyCredential?{data:e,error:null}:{data:null,error:new vx("Browser returned unexpected credential type",e)}:{data:null,error:new vx("Empty credential response",e)}}catch(e){return{data:null,error:PB({error:e,options:n})}}}const HB={hints:["security-key"],authenticatorSelection:{authenticatorAttachment:"cross-platform",requireResidentKey:!1,userVerification:"preferred",residentKey:"discouraged"},attestation:"direct"},GB={userVerification:"preferred",hints:["security-key"],attestation:"direct"};function yx(...n){const e=r=>r!==null&&typeof r=="object"&&!Array.isArray(r),t=r=>r instanceof ArrayBuffer||ArrayBuffer.isView(r),i={};for(const r of n)if(r)for(const s in r){const o=r[s];if(o!==void 0)if(Array.isArray(o))i[s]=o;else if(t(o))i[s]=o;else if(e(o)){const u=i[s];e(u)?i[s]=yx(u,o):i[s]=yx(o)}else i[s]=o}return i}function jB(n,e){return yx(HB,n,e||{})}function WB(n,e){return yx(GB,n,e||{})}class qB{constructor(e){this.client=e,this.enroll=this._enroll.bind(this),this.challenge=this._challenge.bind(this),this.verify=this._verify.bind(this),this.authenticate=this._authenticate.bind(this),this.register=this._register.bind(this)}async _enroll(e){return this.client.mfa.enroll(Object.assign(Object.assign({},e),{factorType:"webauthn"}))}async _challenge({factorId:e,webauthn:t,friendlyName:i,signal:r},s){var o;try{const{data:u,error:f}=await this.client.mfa.challenge({factorId:e,webauthn:t});if(!u)return{data:null,error:f};const p=r??LB.createNewAbortSignal();if(u.webauthn.type==="create"){const{user:m}=u.webauthn.credential_options.publicKey;if(!m.name){const v=i;if(v)m.name=`${m.id}:${v}`;else{const x=(await this.client.getUser()).data.user,S=((o=x?.user_metadata)===null||o===void 0?void 0:o.name)||x?.email||x?.id||"User";m.name=`${m.id}:${S}`}}m.displayName||(m.displayName=m.name)}switch(u.webauthn.type){case"create":{const m=jB(u.webauthn.credential_options.publicKey,s?.create),{data:v,error:_}=await FB({publicKey:m,signal:p});return v?{data:{factorId:e,challengeId:u.id,webauthn:{type:u.webauthn.type,credential_response:v}},error:null}:{data:null,error:_}}case"request":{const m=WB(u.webauthn.credential_options.publicKey,s?.request),{data:v,error:_}=await VB(Object.assign(Object.assign({},u.webauthn.credential_options),{publicKey:m,signal:p}));return v?{data:{factorId:e,challengeId:u.id,webauthn:{type:u.webauthn.type,credential_response:v}},error:null}:{data:null,error:_}}}}catch(u){return qt(u)?{data:null,error:u}:{data:null,error:new lf("Unexpected error in challenge",u)}}}async _verify({challengeId:e,factorId:t,webauthn:i}){return this.client.mfa.verify({factorId:t,challengeId:e,webauthn:i})}async _authenticate({factorId:e,webauthn:{rpId:t=typeof window<"u"?window.location.hostname:void 0,rpOrigins:i=typeof window<"u"?[window.location.origin]:void 0,signal:r}={}},s){if(!t)return{data:null,error:new b0("rpId is required for WebAuthn authentication")};try{if(!lC())return{data:null,error:new lf("Browser does not support WebAuthn",null)};const{data:o,error:u}=await this.challenge({factorId:e,webauthn:{rpId:t,rpOrigins:i},signal:r},{request:s});if(!o)return{data:null,error:u};const{webauthn:f}=o;return this._verify({factorId:e,challengeId:o.challengeId,webauthn:{type:f.type,rpId:t,rpOrigins:i,credential_response:f.credential_response}})}catch(o){return qt(o)?{data:null,error:o}:{data:null,error:new lf("Unexpected error in authenticate",o)}}}async _register({friendlyName:e,webauthn:{rpId:t=typeof window<"u"?window.location.hostname:void 0,rpOrigins:i=typeof window<"u"?[window.location.origin]:void 0,signal:r}={}},s){if(!t)return{data:null,error:new b0("rpId is required for WebAuthn registration")};try{if(!lC())return{data:null,error:new lf("Browser does not support WebAuthn",null)};const{data:o,error:u}=await this._enroll({friendlyName:e});if(!o)return await this.client.mfa.listFactors().then(m=>{var v;return(v=m.data)===null||v===void 0?void 0:v.all.find(_=>_.factor_type==="webauthn"&&_.friendly_name===e&&_.status!=="unverified")}).then(m=>m?this.client.mfa.unenroll({factorId:m?.id}):void 0),{data:null,error:u};const{data:f,error:p}=await this._challenge({factorId:o.id,friendlyName:o.friendly_name,webauthn:{rpId:t,rpOrigins:i},signal:r},{create:s});return f?this._verify({factorId:o.id,challengeId:f.challengeId,webauthn:{rpId:t,rpOrigins:i,type:f.webauthn.type,credential_response:f.webauthn.credential_response}}):{data:null,error:p}}catch(o){return qt(o)?{data:null,error:o}:{data:null,error:new lf("Unexpected error in register",o)}}}}CB();const XB={url:Gk,storageKey:jk,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:Wk,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1,throwOnError:!1,lockAcquireTimeout:1e4};async function cC(n,e,t){return await t()}const jd={};class S0{get jwks(){var e,t;return(t=(e=jd[this.storageKey])===null||e===void 0?void 0:e.jwks)!==null&&t!==void 0?t:{keys:[]}}set jwks(e){jd[this.storageKey]=Object.assign(Object.assign({},jd[this.storageKey]),{jwks:e})}get jwks_cached_at(){var e,t;return(t=(e=jd[this.storageKey])===null||e===void 0?void 0:e.cachedAt)!==null&&t!==void 0?t:Number.MIN_SAFE_INTEGER}set jwks_cached_at(e){jd[this.storageKey]=Object.assign(Object.assign({},jd[this.storageKey]),{cachedAt:e})}constructor(e){var t,i,r;this.userStorage=null,this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.autoRefreshTickTimeout=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log;const s=Object.assign(Object.assign({},XB),e);if(this.storageKey=s.storageKey,this.instanceID=(t=S0.nextInstanceID[this.storageKey])!==null&&t!==void 0?t:0,S0.nextInstanceID[this.storageKey]=this.instanceID+1,this.logDebugMessages=!!s.debug,typeof s.debug=="function"&&(this.logger=s.debug),this.instanceID>0&&ns()){const o=`${this._logPrefix()} Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.`;console.warn(o),this.logDebugMessages&&console.trace(o)}if(this.persistSession=s.persistSession,this.autoRefreshToken=s.autoRefreshToken,this.admin=new EB({url:s.url,headers:s.headers,fetch:s.fetch}),this.url=s.url,this.headers=s.headers,this.fetch=XN(s.fetch),this.lock=s.lock||cC,this.detectSessionInUrl=s.detectSessionInUrl,this.flowType=s.flowType,this.hasCustomAuthorizationHeader=s.hasCustomAuthorizationHeader,this.throwOnError=s.throwOnError,this.lockAcquireTimeout=s.lockAcquireTimeout,s.lock?this.lock=s.lock:this.persistSession&&ns()&&(!((i=globalThis?.navigator)===null||i===void 0)&&i.locks)?this.lock=AB:this.lock=cC,this.jwks||(this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER),this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this),webauthn:new qB(this)},this.oauth={getAuthorizationDetails:this._getAuthorizationDetails.bind(this),approveAuthorization:this._approveAuthorization.bind(this),denyAuthorization:this._denyAuthorization.bind(this),listGrants:this._listOAuthGrants.bind(this),revokeGrant:this._revokeOAuthGrant.bind(this)},this.persistSession?(s.storage?this.storage=s.storage:qN()?this.storage=globalThis.localStorage:(this.memoryStorage={},this.storage=oC(this.memoryStorage)),s.userStorage&&(this.userStorage=s.userStorage)):(this.memoryStorage={},this.storage=oC(this.memoryStorage)),ns()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(o){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",o)}(r=this.broadcastChannel)===null||r===void 0||r.addEventListener("message",async o=>{this._debug("received broadcast notification from other tab or client",o);try{await this._notifyAllSubscribers(o.data.event,o.data.session,!1)}catch(u){this._debug("#broadcastChannel","error",u)}})}this.initialize().catch(o=>{this._debug("#initialize()","error",o)})}isThrowOnErrorEnabled(){return this.throwOnError}_returnResult(e){if(this.throwOnError&&e&&e.error)throw e.error;return e}_logPrefix(){return`GoTrueClient@${this.storageKey}:${this.instanceID} (${GN}) ${new Date().toISOString()}`}_debug(...e){return this.logDebugMessages&&this.logger(this._logPrefix(),...e),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(this.lockAcquireTimeout,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var e;try{let t={},i="none";if(ns()&&(t=sB(window.location.href),this._isImplicitGrantCallback(t)?i="implicit":await this._isPKCECallback(t)&&(i="pkce")),ns()&&this.detectSessionInUrl&&i!=="none"){const{data:r,error:s}=await this._getSessionFromURL(t,i);if(s){if(this._debug("#_initialize()","error detecting session from URL",s),Zk(s)){const f=(e=s.details)===null||e===void 0?void 0:e.code;if(f==="identity_already_exists"||f==="identity_not_found"||f==="single_identity_not_deletable")return{error:s}}return{error:s}}const{session:o,redirectType:u}=r;return this._debug("#_initialize()","detected session in URL",o,"redirect type",u),await this._saveSession(o),setTimeout(async()=>{u==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",o):await this._notifyAllSubscribers("SIGNED_IN",o)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(t){return qt(t)?this._returnResult({error:t}):this._returnResult({error:new lf("Unexpected error during initialization",t)})}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(e){var t,i,r;try{const s=await an(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(i=(t=e?.options)===null||t===void 0?void 0:t.data)!==null&&i!==void 0?i:{},gotrue_meta_security:{captcha_token:(r=e?.options)===null||r===void 0?void 0:r.captchaToken}},xform:Bo}),{data:o,error:u}=s;if(u||!o)return this._returnResult({data:{user:null,session:null},error:u});const f=o.session,p=o.user;return o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers("SIGNED_IN",f)),this._returnResult({data:{user:p,session:f},error:null})}catch(s){if(qt(s))return this._returnResult({data:{user:null,session:null},error:s});throw s}}async signUp(e){var t,i,r;try{let s;if("email"in e){const{email:m,password:v,options:_}=e;let x=null,S=null;this.flowType==="pkce"&&([x,S]=await Vd(this.storage,this.storageKey)),s=await an(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:_?.emailRedirectTo,body:{email:m,password:v,data:(t=_?.data)!==null&&t!==void 0?t:{},gotrue_meta_security:{captcha_token:_?.captchaToken},code_challenge:x,code_challenge_method:S},xform:Bo})}else if("phone"in e){const{phone:m,password:v,options:_}=e;s=await an(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:m,password:v,data:(i=_?.data)!==null&&i!==void 0?i:{},channel:(r=_?.channel)!==null&&r!==void 0?r:"sms",gotrue_meta_security:{captcha_token:_?.captchaToken}},xform:Bo})}else throw new s_("You must provide either an email or phone number and a password");const{data:o,error:u}=s;if(u||!o)return await ts(this.storage,`${this.storageKey}-code-verifier`),this._returnResult({data:{user:null,session:null},error:u});const f=o.session,p=o.user;return o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers("SIGNED_IN",f)),this._returnResult({data:{user:p,session:f},error:null})}catch(s){if(await ts(this.storage,`${this.storageKey}-code-verifier`),qt(s))return this._returnResult({data:{user:null,session:null},error:s});throw s}}async signInWithPassword(e){try{let t;if("email"in e){const{email:s,password:o,options:u}=e;t=await an(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:s,password:o,gotrue_meta_security:{captcha_token:u?.captchaToken}},xform:sC})}else if("phone"in e){const{phone:s,password:o,options:u}=e;t=await an(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:s,password:o,gotrue_meta_security:{captcha_token:u?.captchaToken}},xform:sC})}else throw new s_("You must provide either an email or phone number and a password");const{data:i,error:r}=t;if(r)return this._returnResult({data:{user:null,session:null},error:r});if(!i||!i.session||!i.user){const s=new Fd;return this._returnResult({data:{user:null,session:null},error:s})}return i.session&&(await this._saveSession(i.session),await this._notifyAllSubscribers("SIGNED_IN",i.session)),this._returnResult({data:Object.assign({user:i.user,session:i.session},i.weak_password?{weakPassword:i.weak_password}:null),error:r})}catch(t){if(qt(t))return this._returnResult({data:{user:null,session:null},error:t});throw t}}async signInWithOAuth(e){var t,i,r,s;return await this._handleProviderSignIn(e.provider,{redirectTo:(t=e.options)===null||t===void 0?void 0:t.redirectTo,scopes:(i=e.options)===null||i===void 0?void 0:i.scopes,queryParams:(r=e.options)===null||r===void 0?void 0:r.queryParams,skipBrowserRedirect:(s=e.options)===null||s===void 0?void 0:s.skipBrowserRedirect})}async exchangeCodeForSession(e){return await this.initializePromise,this._acquireLock(this.lockAcquireTimeout,async()=>this._exchangeCodeForSession(e))}async signInWithWeb3(e){const{chain:t}=e;switch(t){case"ethereum":return await this.signInWithEthereum(e);case"solana":return await this.signInWithSolana(e);default:throw new Error(`@supabase/auth-js: Unsupported chain "${t}"`)}}async signInWithEthereum(e){var t,i,r,s,o,u,f,p,m,v,_;let x,S;if("message"in e)x=e.message,S=e.signature;else{const{chain:A,wallet:E,statement:M,options:C}=e;let N;if(ns())if(typeof E=="object")N=E;else{const P=window;if("ethereum"in P&&typeof P.ethereum=="object"&&"request"in P.ethereum&&typeof P.ethereum.request=="function")N=P.ethereum;else throw new Error("@supabase/auth-js: No compatible Ethereum wallet interface on the window object (window.ethereum) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'ethereum', wallet: resolvedUserWallet }) instead.")}else{if(typeof E!="object"||!C?.url)throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");N=E}const I=new URL((t=C?.url)!==null&&t!==void 0?t:window.location.href),U=await N.request({method:"eth_requestAccounts"}).then(P=>P).catch(()=>{throw new Error("@supabase/auth-js: Wallet method eth_requestAccounts is missing or invalid")});if(!U||U.length===0)throw new Error("@supabase/auth-js: No accounts available. Please ensure the wallet is connected.");const L=YN(U[0]);let F=(i=C?.signInWithEthereum)===null||i===void 0?void 0:i.chainId;if(!F){const P=await N.request({method:"eth_chainId"});F=RB(P)}const H={domain:I.host,address:L,statement:M,uri:I.href,version:"1",chainId:F,nonce:(r=C?.signInWithEthereum)===null||r===void 0?void 0:r.nonce,issuedAt:(o=(s=C?.signInWithEthereum)===null||s===void 0?void 0:s.issuedAt)!==null&&o!==void 0?o:new Date,expirationTime:(u=C?.signInWithEthereum)===null||u===void 0?void 0:u.expirationTime,notBefore:(f=C?.signInWithEthereum)===null||f===void 0?void 0:f.notBefore,requestId:(p=C?.signInWithEthereum)===null||p===void 0?void 0:p.requestId,resources:(m=C?.signInWithEthereum)===null||m===void 0?void 0:m.resources};x=DB(H),S=await N.request({method:"personal_sign",params:[NB(x),L]})}try{const{data:A,error:E}=await an(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"ethereum",message:x,signature:S},!((v=e.options)===null||v===void 0)&&v.captchaToken?{gotrue_meta_security:{captcha_token:(_=e.options)===null||_===void 0?void 0:_.captchaToken}}:null),xform:Bo});if(E)throw E;if(!A||!A.session||!A.user){const M=new Fd;return this._returnResult({data:{user:null,session:null},error:M})}return A.session&&(await this._saveSession(A.session),await this._notifyAllSubscribers("SIGNED_IN",A.session)),this._returnResult({data:Object.assign({},A),error:E})}catch(A){if(qt(A))return this._returnResult({data:{user:null,session:null},error:A});throw A}}async signInWithSolana(e){var t,i,r,s,o,u,f,p,m,v,_,x;let S,A;if("message"in e)S=e.message,A=e.signature;else{const{chain:E,wallet:M,statement:C,options:N}=e;let I;if(ns())if(typeof M=="object")I=M;else{const L=window;if("solana"in L&&typeof L.solana=="object"&&("signIn"in L.solana&&typeof L.solana.signIn=="function"||"signMessage"in L.solana&&typeof L.solana.signMessage=="function"))I=L.solana;else throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.")}else{if(typeof M!="object"||!N?.url)throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");I=M}const U=new URL((t=N?.url)!==null&&t!==void 0?t:window.location.href);if("signIn"in I&&I.signIn){const L=await I.signIn(Object.assign(Object.assign(Object.assign({issuedAt:new Date().toISOString()},N?.signInWithSolana),{version:"1",domain:U.host,uri:U.href}),C?{statement:C}:null));let F;if(Array.isArray(L)&&L[0]&&typeof L[0]=="object")F=L[0];else if(L&&typeof L=="object"&&"signedMessage"in L&&"signature"in L)F=L;else throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");if("signedMessage"in F&&"signature"in F&&(typeof F.signedMessage=="string"||F.signedMessage instanceof Uint8Array)&&F.signature instanceof Uint8Array)S=typeof F.signedMessage=="string"?F.signedMessage:new TextDecoder().decode(F.signedMessage),A=F.signature;else throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields")}else{if(!("signMessage"in I)||typeof I.signMessage!="function"||!("publicKey"in I)||typeof I!="object"||!I.publicKey||!("toBase58"in I.publicKey)||typeof I.publicKey.toBase58!="function")throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");S=[`${U.host} wants you to sign in with your Solana account:`,I.publicKey.toBase58(),...C?["",C,""]:[""],"Version: 1",`URI: ${U.href}`,`Issued At: ${(r=(i=N?.signInWithSolana)===null||i===void 0?void 0:i.issuedAt)!==null&&r!==void 0?r:new Date().toISOString()}`,...!((s=N?.signInWithSolana)===null||s===void 0)&&s.notBefore?[`Not Before: ${N.signInWithSolana.notBefore}`]:[],...!((o=N?.signInWithSolana)===null||o===void 0)&&o.expirationTime?[`Expiration Time: ${N.signInWithSolana.expirationTime}`]:[],...!((u=N?.signInWithSolana)===null||u===void 0)&&u.chainId?[`Chain ID: ${N.signInWithSolana.chainId}`]:[],...!((f=N?.signInWithSolana)===null||f===void 0)&&f.nonce?[`Nonce: ${N.signInWithSolana.nonce}`]:[],...!((p=N?.signInWithSolana)===null||p===void 0)&&p.requestId?[`Request ID: ${N.signInWithSolana.requestId}`]:[],...!((v=(m=N?.signInWithSolana)===null||m===void 0?void 0:m.resources)===null||v===void 0)&&v.length?["Resources",...N.signInWithSolana.resources.map(F=>`- ${F}`)]:[]].join(`
`);const L=await I.signMessage(new TextEncoder().encode(S),"utf8");if(!L||!(L instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");A=L}}try{const{data:E,error:M}=await an(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"solana",message:S,signature:uf(A)},!((_=e.options)===null||_===void 0)&&_.captchaToken?{gotrue_meta_security:{captcha_token:(x=e.options)===null||x===void 0?void 0:x.captchaToken}}:null),xform:Bo});if(M)throw M;if(!E||!E.session||!E.user){const C=new Fd;return this._returnResult({data:{user:null,session:null},error:C})}return E.session&&(await this._saveSession(E.session),await this._notifyAllSubscribers("SIGNED_IN",E.session)),this._returnResult({data:Object.assign({},E),error:M})}catch(E){if(qt(E))return this._returnResult({data:{user:null,session:null},error:E});throw E}}async _exchangeCodeForSession(e){const t=await Vh(this.storage,`${this.storageKey}-code-verifier`),[i,r]=(t??"").split("/");try{if(!i&&this.flowType==="pkce")throw new Kk;const{data:s,error:o}=await an(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:e,code_verifier:i},xform:Bo});if(await ts(this.storage,`${this.storageKey}-code-verifier`),o)throw o;if(!s||!s.session||!s.user){const u=new Fd;return this._returnResult({data:{user:null,session:null,redirectType:null},error:u})}return s.session&&(await this._saveSession(s.session),await this._notifyAllSubscribers("SIGNED_IN",s.session)),this._returnResult({data:Object.assign(Object.assign({},s),{redirectType:r??null}),error:o})}catch(s){if(await ts(this.storage,`${this.storageKey}-code-verifier`),qt(s))return this._returnResult({data:{user:null,session:null,redirectType:null},error:s});throw s}}async signInWithIdToken(e){try{const{options:t,provider:i,token:r,access_token:s,nonce:o}=e,u=await an(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:i,id_token:r,access_token:s,nonce:o,gotrue_meta_security:{captcha_token:t?.captchaToken}},xform:Bo}),{data:f,error:p}=u;if(p)return this._returnResult({data:{user:null,session:null},error:p});if(!f||!f.session||!f.user){const m=new Fd;return this._returnResult({data:{user:null,session:null},error:m})}return f.session&&(await this._saveSession(f.session),await this._notifyAllSubscribers("SIGNED_IN",f.session)),this._returnResult({data:f,error:p})}catch(t){if(qt(t))return this._returnResult({data:{user:null,session:null},error:t});throw t}}async signInWithOtp(e){var t,i,r,s,o;try{if("email"in e){const{email:u,options:f}=e;let p=null,m=null;this.flowType==="pkce"&&([p,m]=await Vd(this.storage,this.storageKey));const{error:v}=await an(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:u,data:(t=f?.data)!==null&&t!==void 0?t:{},create_user:(i=f?.shouldCreateUser)!==null&&i!==void 0?i:!0,gotrue_meta_security:{captcha_token:f?.captchaToken},code_challenge:p,code_challenge_method:m},redirectTo:f?.emailRedirectTo});return this._returnResult({data:{user:null,session:null},error:v})}if("phone"in e){const{phone:u,options:f}=e,{data:p,error:m}=await an(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:u,data:(r=f?.data)!==null&&r!==void 0?r:{},create_user:(s=f?.shouldCreateUser)!==null&&s!==void 0?s:!0,gotrue_meta_security:{captcha_token:f?.captchaToken},channel:(o=f?.channel)!==null&&o!==void 0?o:"sms"}});return this._returnResult({data:{user:null,session:null,messageId:p?.message_id},error:m})}throw new s_("You must provide either an email or phone number.")}catch(u){if(await ts(this.storage,`${this.storageKey}-code-verifier`),qt(u))return this._returnResult({data:{user:null,session:null},error:u});throw u}}async verifyOtp(e){var t,i;try{let r,s;"options"in e&&(r=(t=e.options)===null||t===void 0?void 0:t.redirectTo,s=(i=e.options)===null||i===void 0?void 0:i.captchaToken);const{data:o,error:u}=await an(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},e),{gotrue_meta_security:{captcha_token:s}}),redirectTo:r,xform:Bo});if(u)throw u;if(!o)throw new Error("An error occurred on token verification.");const f=o.session,p=o.user;return f?.access_token&&(await this._saveSession(f),await this._notifyAllSubscribers(e.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",f)),this._returnResult({data:{user:p,session:f},error:null})}catch(r){if(qt(r))return this._returnResult({data:{user:null,session:null},error:r});throw r}}async signInWithSSO(e){var t,i,r,s,o;try{let u=null,f=null;this.flowType==="pkce"&&([u,f]=await Vd(this.storage,this.storageKey));const p=await an(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in e?{provider_id:e.providerId}:null),"domain"in e?{domain:e.domain}:null),{redirect_to:(i=(t=e.options)===null||t===void 0?void 0:t.redirectTo)!==null&&i!==void 0?i:void 0}),!((r=e?.options)===null||r===void 0)&&r.captchaToken?{gotrue_meta_security:{captcha_token:e.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:u,code_challenge_method:f}),headers:this.headers,xform:SB});return!((s=p.data)===null||s===void 0)&&s.url&&ns()&&!(!((o=e.options)===null||o===void 0)&&o.skipBrowserRedirect)&&window.location.assign(p.data.url),this._returnResult(p)}catch(u){if(await ts(this.storage,`${this.storageKey}-code-verifier`),qt(u))return this._returnResult({data:null,error:u});throw u}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async e=>{const{data:{session:t},error:i}=e;if(i)throw i;if(!t)throw new Sa;const{error:r}=await an(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:t.access_token});return this._returnResult({data:{user:null,session:null},error:r})})}catch(e){if(qt(e))return this._returnResult({data:{user:null,session:null},error:e});throw e}}async resend(e){try{const t=`${this.url}/resend`;if("email"in e){const{email:i,type:r,options:s}=e,{error:o}=await an(this.fetch,"POST",t,{headers:this.headers,body:{email:i,type:r,gotrue_meta_security:{captcha_token:s?.captchaToken}},redirectTo:s?.emailRedirectTo});return this._returnResult({data:{user:null,session:null},error:o})}else if("phone"in e){const{phone:i,type:r,options:s}=e,{data:o,error:u}=await an(this.fetch,"POST",t,{headers:this.headers,body:{phone:i,type:r,gotrue_meta_security:{captcha_token:s?.captchaToken}}});return this._returnResult({data:{user:null,session:null,messageId:o?.message_id},error:u})}throw new s_("You must provide either an email or phone number and a type")}catch(t){if(qt(t))return this._returnResult({data:{user:null,session:null},error:t});throw t}}async getSession(){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>this._useSession(async t=>t))}async _acquireLock(e,t){this._debug("#_acquireLock","begin",e);try{if(this.lockAcquired){const i=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),r=(async()=>(await i,await t()))();return this.pendingInLock.push((async()=>{try{await r}catch{}})()),r}return await this.lock(`lock:${this.storageKey}`,e,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const i=t();for(this.pendingInLock.push((async()=>{try{await i}catch{}})()),await i;this.pendingInLock.length;){const r=[...this.pendingInLock];await Promise.all(r),this.pendingInLock.splice(0,r.length)}return await i}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(e){this._debug("#_useSession","begin");try{const t=await this.__loadSession();return await e(t)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let e=null;const t=await Vh(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",t),t!==null&&(this._isValidSession(t)?e=t:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!e)return{data:{session:null},error:null};const i=e.expires_at?e.expires_at*1e3-Date.now()<d1:!1;if(this._debug("#__loadSession()",`session has${i?"":" not"} expired`,"expires_at",e.expires_at),!i){if(this.userStorage){const o=await Vh(this.userStorage,this.storageKey+"-user");o?.user?e.user=o.user:e.user=g1()}if(this.storage.isServer&&e.user&&!e.user.__isUserNotAvailableProxy){const o={value:this.suppressGetSessionWarning};e.user=yB(e.user,o),o.value&&(this.suppressGetSessionWarning=!0)}return{data:{session:e},error:null}}const{data:r,error:s}=await this._callRefreshToken(e.refresh_token);return s?this._returnResult({data:{session:null},error:s}):this._returnResult({data:{session:r},error:null})}finally{this._debug("#__loadSession()","end")}}async getUser(e){if(e)return await this._getUser(e);await this.initializePromise;const t=await this._acquireLock(this.lockAcquireTimeout,async()=>await this._getUser());return t.data.user&&(this.suppressGetSessionWarning=!0),t}async _getUser(e){try{return e?await an(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:e,xform:ku}):await this._useSession(async t=>{var i,r,s;const{data:o,error:u}=t;if(u)throw u;return!(!((i=o.session)===null||i===void 0)&&i.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new Sa}:await an(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(s=(r=o.session)===null||r===void 0?void 0:r.access_token)!==null&&s!==void 0?s:void 0,xform:ku})})}catch(t){if(qt(t))return p1(t)&&(await this._removeSession(),await ts(this.storage,`${this.storageKey}-code-verifier`)),this._returnResult({data:{user:null},error:t});throw t}}async updateUser(e,t={}){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>await this._updateUser(e,t))}async _updateUser(e,t={}){try{return await this._useSession(async i=>{const{data:r,error:s}=i;if(s)throw s;if(!r.session)throw new Sa;const o=r.session;let u=null,f=null;this.flowType==="pkce"&&e.email!=null&&([u,f]=await Vd(this.storage,this.storageKey));const{data:p,error:m}=await an(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:t?.emailRedirectTo,body:Object.assign(Object.assign({},e),{code_challenge:u,code_challenge_method:f}),jwt:o.access_token,xform:ku});if(m)throw m;return o.user=p.user,await this._saveSession(o),await this._notifyAllSubscribers("USER_UPDATED",o),this._returnResult({data:{user:o.user},error:null})})}catch(i){if(await ts(this.storage,`${this.storageKey}-code-verifier`),qt(i))return this._returnResult({data:{user:null},error:i});throw i}}async setSession(e){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>await this._setSession(e))}async _setSession(e){try{if(!e.access_token||!e.refresh_token)throw new Sa;const t=Date.now()/1e3;let i=t,r=!0,s=null;const{payload:o}=o_(e.access_token);if(o.exp&&(i=o.exp,r=i<=t),r){const{data:u,error:f}=await this._callRefreshToken(e.refresh_token);if(f)return this._returnResult({data:{user:null,session:null},error:f});if(!u)return{data:{user:null,session:null},error:null};s=u}else{const{data:u,error:f}=await this._getUser(e.access_token);if(f)return this._returnResult({data:{user:null,session:null},error:f});s={access_token:e.access_token,refresh_token:e.refresh_token,user:u.user,token_type:"bearer",expires_in:i-t,expires_at:i},await this._saveSession(s),await this._notifyAllSubscribers("SIGNED_IN",s)}return this._returnResult({data:{user:s.user,session:s},error:null})}catch(t){if(qt(t))return this._returnResult({data:{session:null,user:null},error:t});throw t}}async refreshSession(e){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>await this._refreshSession(e))}async _refreshSession(e){try{return await this._useSession(async t=>{var i;if(!e){const{data:o,error:u}=t;if(u)throw u;e=(i=o.session)!==null&&i!==void 0?i:void 0}if(!e?.refresh_token)throw new Sa;const{data:r,error:s}=await this._callRefreshToken(e.refresh_token);return s?this._returnResult({data:{user:null,session:null},error:s}):r?this._returnResult({data:{user:r.user,session:r},error:null}):this._returnResult({data:{user:null,session:null},error:null})})}catch(t){if(qt(t))return this._returnResult({data:{user:null,session:null},error:t});throw t}}async _getSessionFromURL(e,t){try{if(!ns())throw new a_("No browser detected.");if(e.error||e.error_description||e.error_code)throw new a_(e.error_description||"Error in URL with unspecified error_description",{error:e.error||"unspecified_error",code:e.error_code||"unspecified_code"});switch(t){case"implicit":if(this.flowType==="pkce")throw new JA("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new a_("Not a valid implicit grant flow url.");break;default:}if(t==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!e.code)throw new JA("No code detected.");const{data:C,error:N}=await this._exchangeCodeForSession(e.code);if(N)throw N;const I=new URL(window.location.href);return I.searchParams.delete("code"),window.history.replaceState(window.history.state,"",I.toString()),{data:{session:C.session,redirectType:null},error:null}}const{provider_token:i,provider_refresh_token:r,access_token:s,refresh_token:o,expires_in:u,expires_at:f,token_type:p}=e;if(!s||!u||!o||!p)throw new a_("No session defined in URL");const m=Math.round(Date.now()/1e3),v=parseInt(u);let _=m+v;f&&(_=parseInt(f));const x=_-m;x*1e3<=gp&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${x}s, should have been closer to ${v}s`);const S=_-v;m-S>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",S,_,m):m-S<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",S,_,m);const{data:A,error:E}=await this._getUser(s);if(E)throw E;const M={provider_token:i,provider_refresh_token:r,access_token:s,expires_in:v,expires_at:_,refresh_token:o,token_type:p,user:A.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),this._returnResult({data:{session:M,redirectType:e.type},error:null})}catch(i){if(qt(i))return this._returnResult({data:{session:null,redirectType:null},error:i});throw i}}_isImplicitGrantCallback(e){return typeof this.detectSessionInUrl=="function"?this.detectSessionInUrl(new URL(window.location.href),e):!!(e.access_token||e.error_description)}async _isPKCECallback(e){const t=await Vh(this.storage,`${this.storageKey}-code-verifier`);return!!(e.code&&t)}async signOut(e={scope:"global"}){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>await this._signOut(e))}async _signOut({scope:e}={scope:"global"}){return await this._useSession(async t=>{var i;const{data:r,error:s}=t;if(s&&!p1(s))return this._returnResult({error:s});const o=(i=r.session)===null||i===void 0?void 0:i.access_token;if(o){const{error:u}=await this.admin.signOut(o,e);if(u&&!(Yk(u)&&(u.status===404||u.status===401||u.status===403)||p1(u)))return this._returnResult({error:u})}return e!=="others"&&(await this._removeSession(),await ts(this.storage,`${this.storageKey}-code-verifier`)),this._returnResult({error:null})})}onAuthStateChange(e){const t=rB(),i={id:t,callback:e,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",t),this.stateChangeEmitters.delete(t)}};return this._debug("#onAuthStateChange()","registered callback with id",t),this.stateChangeEmitters.set(t,i),(async()=>(await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>{this._emitInitialSession(t)})))(),{data:{subscription:i}}}async _emitInitialSession(e){return await this._useSession(async t=>{var i,r;try{const{data:{session:s},error:o}=t;if(o)throw o;await((i=this.stateChangeEmitters.get(e))===null||i===void 0?void 0:i.callback("INITIAL_SESSION",s)),this._debug("INITIAL_SESSION","callback id",e,"session",s)}catch(s){await((r=this.stateChangeEmitters.get(e))===null||r===void 0?void 0:r.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",e,"error",s),console.error(s)}})}async resetPasswordForEmail(e,t={}){let i=null,r=null;this.flowType==="pkce"&&([i,r]=await Vd(this.storage,this.storageKey,!0));try{return await an(this.fetch,"POST",`${this.url}/recover`,{body:{email:e,code_challenge:i,code_challenge_method:r,gotrue_meta_security:{captcha_token:t.captchaToken}},headers:this.headers,redirectTo:t.redirectTo})}catch(s){if(await ts(this.storage,`${this.storageKey}-code-verifier`),qt(s))return this._returnResult({data:null,error:s});throw s}}async getUserIdentities(){var e;try{const{data:t,error:i}=await this.getUser();if(i)throw i;return this._returnResult({data:{identities:(e=t.user.identities)!==null&&e!==void 0?e:[]},error:null})}catch(t){if(qt(t))return this._returnResult({data:null,error:t});throw t}}async linkIdentity(e){return"token"in e?this.linkIdentityIdToken(e):this.linkIdentityOAuth(e)}async linkIdentityOAuth(e){var t;try{const{data:i,error:r}=await this._useSession(async s=>{var o,u,f,p,m;const{data:v,error:_}=s;if(_)throw _;const x=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,e.provider,{redirectTo:(o=e.options)===null||o===void 0?void 0:o.redirectTo,scopes:(u=e.options)===null||u===void 0?void 0:u.scopes,queryParams:(f=e.options)===null||f===void 0?void 0:f.queryParams,skipBrowserRedirect:!0});return await an(this.fetch,"GET",x,{headers:this.headers,jwt:(m=(p=v.session)===null||p===void 0?void 0:p.access_token)!==null&&m!==void 0?m:void 0})});if(r)throw r;return ns()&&!(!((t=e.options)===null||t===void 0)&&t.skipBrowserRedirect)&&window.location.assign(i?.url),this._returnResult({data:{provider:e.provider,url:i?.url},error:null})}catch(i){if(qt(i))return this._returnResult({data:{provider:e.provider,url:null},error:i});throw i}}async linkIdentityIdToken(e){return await this._useSession(async t=>{var i;try{const{error:r,data:{session:s}}=t;if(r)throw r;const{options:o,provider:u,token:f,access_token:p,nonce:m}=e,v=await an(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,jwt:(i=s?.access_token)!==null&&i!==void 0?i:void 0,body:{provider:u,id_token:f,access_token:p,nonce:m,link_identity:!0,gotrue_meta_security:{captcha_token:o?.captchaToken}},xform:Bo}),{data:_,error:x}=v;return x?this._returnResult({data:{user:null,session:null},error:x}):!_||!_.session||!_.user?this._returnResult({data:{user:null,session:null},error:new Fd}):(_.session&&(await this._saveSession(_.session),await this._notifyAllSubscribers("USER_UPDATED",_.session)),this._returnResult({data:_,error:x}))}catch(r){if(await ts(this.storage,`${this.storageKey}-code-verifier`),qt(r))return this._returnResult({data:{user:null,session:null},error:r});throw r}})}async unlinkIdentity(e){try{return await this._useSession(async t=>{var i,r;const{data:s,error:o}=t;if(o)throw o;return await an(this.fetch,"DELETE",`${this.url}/user/identities/${e.identity_id}`,{headers:this.headers,jwt:(r=(i=s.session)===null||i===void 0?void 0:i.access_token)!==null&&r!==void 0?r:void 0})})}catch(t){if(qt(t))return this._returnResult({data:null,error:t});throw t}}async _refreshAccessToken(e){const t=`#_refreshAccessToken(${e.substring(0,5)}...)`;this._debug(t,"begin");try{const i=Date.now();return await lB(async r=>(r>0&&await oB(200*Math.pow(2,r-1)),this._debug(t,"refreshing attempt",r),await an(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:e},headers:this.headers,xform:Bo})),(r,s)=>{const o=200*Math.pow(2,r);return s&&m1(s)&&Date.now()+o-i<gp})}catch(i){if(this._debug(t,"error",i),qt(i))return this._returnResult({data:{session:null,user:null},error:i});throw i}finally{this._debug(t,"end")}}_isValidSession(e){return typeof e=="object"&&e!==null&&"access_token"in e&&"refresh_token"in e&&"expires_at"in e}async _handleProviderSignIn(e,t){const i=await this._getUrlForProvider(`${this.url}/authorize`,e,{redirectTo:t.redirectTo,scopes:t.scopes,queryParams:t.queryParams});return this._debug("#_handleProviderSignIn()","provider",e,"options",t,"url",i),ns()&&!t.skipBrowserRedirect&&window.location.assign(i),{data:{provider:e,url:i},error:null}}async _recoverAndRefresh(){var e,t;const i="#_recoverAndRefresh()";this._debug(i,"begin");try{const r=await Vh(this.storage,this.storageKey);if(r&&this.userStorage){let o=await Vh(this.userStorage,this.storageKey+"-user");!this.storage.isServer&&Object.is(this.storage,this.userStorage)&&!o&&(o={user:r.user},await vp(this.userStorage,this.storageKey+"-user",o)),r.user=(e=o?.user)!==null&&e!==void 0?e:g1()}else if(r&&!r.user&&!r.user){const o=await Vh(this.storage,this.storageKey+"-user");o&&o?.user?(r.user=o.user,await ts(this.storage,this.storageKey+"-user"),await vp(this.storage,this.storageKey,r)):r.user=g1()}if(this._debug(i,"session from storage",r),!this._isValidSession(r)){this._debug(i,"session is not valid"),r!==null&&await this._removeSession();return}const s=((t=r.expires_at)!==null&&t!==void 0?t:1/0)*1e3-Date.now()<d1;if(this._debug(i,`session has${s?"":" not"} expired with margin of ${d1}s`),s){if(this.autoRefreshToken&&r.refresh_token){const{error:o}=await this._callRefreshToken(r.refresh_token);o&&(console.error(o),m1(o)||(this._debug(i,"refresh failed with a non-retryable error, removing the session",o),await this._removeSession()))}}else if(r.user&&r.user.__isUserNotAvailableProxy===!0)try{const{data:o,error:u}=await this._getUser(r.access_token);!u&&o?.user?(r.user=o.user,await this._saveSession(r),await this._notifyAllSubscribers("SIGNED_IN",r)):this._debug(i,"could not get user data, skipping SIGNED_IN notification")}catch(o){console.error("Error getting user data:",o),this._debug(i,"error getting user data, skipping SIGNED_IN notification",o)}else await this._notifyAllSubscribers("SIGNED_IN",r)}catch(r){this._debug(i,"error",r),console.error(r);return}finally{this._debug(i,"end")}}async _callRefreshToken(e){var t,i;if(!e)throw new Sa;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const r=`#_callRefreshToken(${e.substring(0,5)}...)`;this._debug(r,"begin");try{this.refreshingDeferred=new Nb;const{data:s,error:o}=await this._refreshAccessToken(e);if(o)throw o;if(!s.session)throw new Sa;await this._saveSession(s.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",s.session);const u={data:s.session,error:null};return this.refreshingDeferred.resolve(u),u}catch(s){if(this._debug(r,"error",s),qt(s)){const o={data:null,error:s};return m1(s)||await this._removeSession(),(t=this.refreshingDeferred)===null||t===void 0||t.resolve(o),o}throw(i=this.refreshingDeferred)===null||i===void 0||i.reject(s),s}finally{this.refreshingDeferred=null,this._debug(r,"end")}}async _notifyAllSubscribers(e,t,i=!0){const r=`#_notifyAllSubscribers(${e})`;this._debug(r,"begin",t,`broadcast = ${i}`);try{this.broadcastChannel&&i&&this.broadcastChannel.postMessage({event:e,session:t});const s=[],o=Array.from(this.stateChangeEmitters.values()).map(async u=>{try{await u.callback(e,t)}catch(f){s.push(f)}});if(await Promise.all(o),s.length>0){for(let u=0;u<s.length;u+=1)console.error(s[u]);throw s[0]}}finally{this._debug(r,"end")}}async _saveSession(e){this._debug("#_saveSession()",e),this.suppressGetSessionWarning=!0,await ts(this.storage,`${this.storageKey}-code-verifier`);const t=Object.assign({},e),i=t.user&&t.user.__isUserNotAvailableProxy===!0;if(this.userStorage){!i&&t.user&&await vp(this.userStorage,this.storageKey+"-user",{user:t.user});const r=Object.assign({},t);delete r.user;const s=iC(r);await vp(this.storage,this.storageKey,s)}else{const r=iC(t);await vp(this.storage,this.storageKey,r)}}async _removeSession(){this._debug("#_removeSession()"),this.suppressGetSessionWarning=!1,await ts(this.storage,this.storageKey),await ts(this.storage,this.storageKey+"-code-verifier"),await ts(this.storage,this.storageKey+"-user"),this.userStorage&&await ts(this.userStorage,this.storageKey+"-user"),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const e=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{e&&ns()&&window?.removeEventListener&&window.removeEventListener("visibilitychange",e)}catch(t){console.error("removing visibilitychange callback failed",t)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const e=setInterval(()=>this._autoRefreshTokenTick(),gp);this.autoRefreshTicker=e,e&&typeof e=="object"&&typeof e.unref=="function"?e.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(e);const t=setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0);this.autoRefreshTickTimeout=t,t&&typeof t=="object"&&typeof t.unref=="function"?t.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(t)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const e=this.autoRefreshTicker;this.autoRefreshTicker=null,e&&clearInterval(e);const t=this.autoRefreshTickTimeout;this.autoRefreshTickTimeout=null,t&&clearTimeout(t)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const e=Date.now();try{return await this._useSession(async t=>{const{data:{session:i}}=t;if(!i||!i.refresh_token||!i.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const r=Math.floor((i.expires_at*1e3-e)/gp);this._debug("#_autoRefreshTokenTick()",`access token expires in ${r} ticks, a tick lasts ${gp}ms, refresh threshold is ${qw} ticks`),r<=qw&&await this._callRefreshToken(i.refresh_token)})}catch(t){console.error("Auto refresh tick failed with error. This is likely a transient error.",t)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(e){if(e.isAcquireTimeout||e instanceof $N)this._debug("auto refresh token tick lock not available");else throw e}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!ns()||!window?.addEventListener)return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>{try{await this._onVisibilityChanged(!1)}catch(e){this._debug("#visibilityChangedCallback","error",e)}},window?.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(e){console.error("_handleVisibilityChange",e)}}async _onVisibilityChanged(e){const t=`#_onVisibilityChanged(${e})`;this._debug(t,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),e||(await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>{if(document.visibilityState!=="visible"){this._debug(t,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(e,t,i){const r=[`provider=${encodeURIComponent(t)}`];if(i?.redirectTo&&r.push(`redirect_to=${encodeURIComponent(i.redirectTo)}`),i?.scopes&&r.push(`scopes=${encodeURIComponent(i.scopes)}`),this.flowType==="pkce"){const[s,o]=await Vd(this.storage,this.storageKey),u=new URLSearchParams({code_challenge:`${encodeURIComponent(s)}`,code_challenge_method:`${encodeURIComponent(o)}`});r.push(u.toString())}if(i?.queryParams){const s=new URLSearchParams(i.queryParams);r.push(s.toString())}return i?.skipBrowserRedirect&&r.push(`skip_http_redirect=${i.skipBrowserRedirect}`),`${e}?${r.join("&")}`}async _unenroll(e){try{return await this._useSession(async t=>{var i;const{data:r,error:s}=t;return s?this._returnResult({data:null,error:s}):await an(this.fetch,"DELETE",`${this.url}/factors/${e.factorId}`,{headers:this.headers,jwt:(i=r?.session)===null||i===void 0?void 0:i.access_token})})}catch(t){if(qt(t))return this._returnResult({data:null,error:t});throw t}}async _enroll(e){try{return await this._useSession(async t=>{var i,r;const{data:s,error:o}=t;if(o)return this._returnResult({data:null,error:o});const u=Object.assign({friendly_name:e.friendlyName,factor_type:e.factorType},e.factorType==="phone"?{phone:e.phone}:e.factorType==="totp"?{issuer:e.issuer}:{}),{data:f,error:p}=await an(this.fetch,"POST",`${this.url}/factors`,{body:u,headers:this.headers,jwt:(i=s?.session)===null||i===void 0?void 0:i.access_token});return p?this._returnResult({data:null,error:p}):(e.factorType==="totp"&&f.type==="totp"&&(!((r=f?.totp)===null||r===void 0)&&r.qr_code)&&(f.totp.qr_code=`data:image/svg+xml;utf-8,${f.totp.qr_code}`),this._returnResult({data:f,error:null}))})}catch(t){if(qt(t))return this._returnResult({data:null,error:t});throw t}}async _verify(e){return this._acquireLock(this.lockAcquireTimeout,async()=>{try{return await this._useSession(async t=>{var i;const{data:r,error:s}=t;if(s)return this._returnResult({data:null,error:s});const o=Object.assign({challenge_id:e.challengeId},"webauthn"in e?{webauthn:Object.assign(Object.assign({},e.webauthn),{credential_response:e.webauthn.type==="create"?BB(e.webauthn.credential_response):zB(e.webauthn.credential_response)})}:{code:e.code}),{data:u,error:f}=await an(this.fetch,"POST",`${this.url}/factors/${e.factorId}/verify`,{body:o,headers:this.headers,jwt:(i=r?.session)===null||i===void 0?void 0:i.access_token});return f?this._returnResult({data:null,error:f}):(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+u.expires_in},u)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",u),this._returnResult({data:u,error:f}))})}catch(t){if(qt(t))return this._returnResult({data:null,error:t});throw t}})}async _challenge(e){return this._acquireLock(this.lockAcquireTimeout,async()=>{try{return await this._useSession(async t=>{var i;const{data:r,error:s}=t;if(s)return this._returnResult({data:null,error:s});const o=await an(this.fetch,"POST",`${this.url}/factors/${e.factorId}/challenge`,{body:e,headers:this.headers,jwt:(i=r?.session)===null||i===void 0?void 0:i.access_token});if(o.error)return o;const{data:u}=o;if(u.type!=="webauthn")return{data:u,error:null};switch(u.webauthn.type){case"create":return{data:Object.assign(Object.assign({},u),{webauthn:Object.assign(Object.assign({},u.webauthn),{credential_options:Object.assign(Object.assign({},u.webauthn.credential_options),{publicKey:UB(u.webauthn.credential_options.publicKey)})})}),error:null};case"request":return{data:Object.assign(Object.assign({},u),{webauthn:Object.assign(Object.assign({},u.webauthn),{credential_options:Object.assign(Object.assign({},u.webauthn.credential_options),{publicKey:kB(u.webauthn.credential_options.publicKey)})})}),error:null}}})}catch(t){if(qt(t))return this._returnResult({data:null,error:t});throw t}})}async _challengeAndVerify(e){const{data:t,error:i}=await this._challenge({factorId:e.factorId});return i?this._returnResult({data:null,error:i}):await this._verify({factorId:e.factorId,challengeId:t.id,code:e.code})}async _listFactors(){var e;const{data:{user:t},error:i}=await this.getUser();if(i)return{data:null,error:i};const r={all:[],phone:[],totp:[],webauthn:[]};for(const s of(e=t?.factors)!==null&&e!==void 0?e:[])r.all.push(s),s.status==="verified"&&r[s.factor_type].push(s);return{data:r,error:null}}async _getAuthenticatorAssuranceLevel(e){var t,i,r,s;if(e)try{const{payload:x}=o_(e);let S=null;x.aal&&(S=x.aal);let A=S;const{data:{user:E},error:M}=await this.getUser(e);if(M)return this._returnResult({data:null,error:M});((i=(t=E?.factors)===null||t===void 0?void 0:t.filter(I=>I.status==="verified"))!==null&&i!==void 0?i:[]).length>0&&(A="aal2");const N=x.amr||[];return{data:{currentLevel:S,nextLevel:A,currentAuthenticationMethods:N},error:null}}catch(x){if(qt(x))return this._returnResult({data:null,error:x});throw x}const{data:{session:o},error:u}=await this.getSession();if(u)return this._returnResult({data:null,error:u});if(!o)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:f}=o_(o.access_token);let p=null;f.aal&&(p=f.aal);let m=p;((s=(r=o.user.factors)===null||r===void 0?void 0:r.filter(x=>x.status==="verified"))!==null&&s!==void 0?s:[]).length>0&&(m="aal2");const _=f.amr||[];return{data:{currentLevel:p,nextLevel:m,currentAuthenticationMethods:_},error:null}}async _getAuthorizationDetails(e){try{return await this._useSession(async t=>{const{data:{session:i},error:r}=t;return r?this._returnResult({data:null,error:r}):i?await an(this.fetch,"GET",`${this.url}/oauth/authorizations/${e}`,{headers:this.headers,jwt:i.access_token,xform:s=>({data:s,error:null})}):this._returnResult({data:null,error:new Sa})})}catch(t){if(qt(t))return this._returnResult({data:null,error:t});throw t}}async _approveAuthorization(e,t){try{return await this._useSession(async i=>{const{data:{session:r},error:s}=i;if(s)return this._returnResult({data:null,error:s});if(!r)return this._returnResult({data:null,error:new Sa});const o=await an(this.fetch,"POST",`${this.url}/oauth/authorizations/${e}/consent`,{headers:this.headers,jwt:r.access_token,body:{action:"approve"},xform:u=>({data:u,error:null})});return o.data&&o.data.redirect_url&&ns()&&!t?.skipBrowserRedirect&&window.location.assign(o.data.redirect_url),o})}catch(i){if(qt(i))return this._returnResult({data:null,error:i});throw i}}async _denyAuthorization(e,t){try{return await this._useSession(async i=>{const{data:{session:r},error:s}=i;if(s)return this._returnResult({data:null,error:s});if(!r)return this._returnResult({data:null,error:new Sa});const o=await an(this.fetch,"POST",`${this.url}/oauth/authorizations/${e}/consent`,{headers:this.headers,jwt:r.access_token,body:{action:"deny"},xform:u=>({data:u,error:null})});return o.data&&o.data.redirect_url&&ns()&&!t?.skipBrowserRedirect&&window.location.assign(o.data.redirect_url),o})}catch(i){if(qt(i))return this._returnResult({data:null,error:i});throw i}}async _listOAuthGrants(){try{return await this._useSession(async e=>{const{data:{session:t},error:i}=e;return i?this._returnResult({data:null,error:i}):t?await an(this.fetch,"GET",`${this.url}/user/oauth/grants`,{headers:this.headers,jwt:t.access_token,xform:r=>({data:r,error:null})}):this._returnResult({data:null,error:new Sa})})}catch(e){if(qt(e))return this._returnResult({data:null,error:e});throw e}}async _revokeOAuthGrant(e){try{return await this._useSession(async t=>{const{data:{session:i},error:r}=t;return r?this._returnResult({data:null,error:r}):i?(await an(this.fetch,"DELETE",`${this.url}/user/oauth/grants`,{headers:this.headers,jwt:i.access_token,query:{client_id:e.clientId},noResolveJson:!0}),{data:{},error:null}):this._returnResult({data:null,error:new Sa})})}catch(t){if(qt(t))return this._returnResult({data:null,error:t});throw t}}async fetchJwk(e,t={keys:[]}){let i=t.keys.find(u=>u.kid===e);if(i)return i;const r=Date.now();if(i=this.jwks.keys.find(u=>u.kid===e),i&&this.jwks_cached_at+Xk>r)return i;const{data:s,error:o}=await an(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(o)throw o;return!s.keys||s.keys.length===0||(this.jwks=s,this.jwks_cached_at=r,i=s.keys.find(u=>u.kid===e),!i)?null:i}async getClaims(e,t={}){try{let i=e;if(!i){const{data:x,error:S}=await this.getSession();if(S||!x.session)return this._returnResult({data:null,error:S});i=x.session.access_token}const{header:r,payload:s,signature:o,raw:{header:u,payload:f}}=o_(i);t?.allowExpired||mB(s.exp);const p=!r.alg||r.alg.startsWith("HS")||!r.kid||!("crypto"in globalThis&&"subtle"in globalThis.crypto)?null:await this.fetchJwk(r.kid,t?.keys?{keys:t.keys}:t?.jwks);if(!p){const{error:x}=await this.getUser(i);if(x)throw x;return{data:{claims:s,header:r,signature:o},error:null}}const m=gB(r.alg),v=await crypto.subtle.importKey("jwk",p,m,!0,["verify"]);if(!await crypto.subtle.verify(m,v,o,nB(`${u}.${f}`)))throw new Yw("Invalid JWT signature");return{data:{claims:s,header:r,signature:o},error:null}}catch(i){if(qt(i))return this._returnResult({data:null,error:i});throw i}}}S0.nextInstanceID={};const $B=S0,YB="2.93.3";let $g="";typeof Deno<"u"?$g="deno":typeof document<"u"?$g="web":typeof navigator<"u"&&navigator.product==="ReactNative"?$g="react-native":$g="node";const ZB={"X-Client-Info":`supabase-js-${$g}/${YB}`},KB={headers:ZB},JB={schema:"public"},QB={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},e4={};function w0(n){"@babel/helpers - typeof";return w0=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},w0(n)}function t4(n,e){if(w0(n)!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var i=t.call(n,e);if(w0(i)!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}function n4(n){var e=t4(n,"string");return w0(e)=="symbol"?e:e+""}function i4(n,e,t){return(e=n4(e))in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function uC(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(n);e&&(i=i.filter(function(r){return Object.getOwnPropertyDescriptor(n,r).enumerable})),t.push.apply(t,i)}return t}function er(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?uC(Object(t),!0).forEach(function(i){i4(n,i,t[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):uC(Object(t)).forEach(function(i){Object.defineProperty(n,i,Object.getOwnPropertyDescriptor(t,i))})}return n}const r4=n=>n?(...e)=>n(...e):(...e)=>fetch(...e),s4=()=>Headers,a4=(n,e,t)=>{const i=r4(t),r=s4();return async(s,o)=>{var u;const f=(u=await e())!==null&&u!==void 0?u:n;let p=new r(o?.headers);return p.has("apikey")||p.set("apikey",n),p.has("Authorization")||p.set("Authorization",`Bearer ${f}`),i(s,er(er({},o),{},{headers:p}))}};function o4(n){return n.endsWith("/")?n:n+"/"}function l4(n,e){var t,i;const{db:r,auth:s,realtime:o,global:u}=n,{db:f,auth:p,realtime:m,global:v}=e,_={db:er(er({},f),r),auth:er(er({},p),s),realtime:er(er({},m),o),storage:{},global:er(er(er({},v),u),{},{headers:er(er({},(t=v?.headers)!==null&&t!==void 0?t:{}),(i=u?.headers)!==null&&i!==void 0?i:{})}),accessToken:async()=>""};return n.accessToken?_.accessToken=n.accessToken:delete _.accessToken,_}function c4(n){const e=n?.trim();if(!e)throw new Error("supabaseUrl is required.");if(!e.match(/^https?:\/\//i))throw new Error("Invalid supabaseUrl: Must be a valid HTTP or HTTPS URL.");try{return new URL(o4(e))}catch{throw Error("Invalid supabaseUrl: Provided URL is malformed.")}}var u4=class extends $B{constructor(n){super(n)}},h4=class{constructor(n,e,t){var i,r;this.supabaseUrl=n,this.supabaseKey=e;const s=c4(n);if(!e)throw new Error("supabaseKey is required.");this.realtimeUrl=new URL("realtime/v1",s),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",s),this.storageUrl=new URL("storage/v1",s),this.functionsUrl=new URL("functions/v1",s);const o=`sb-${s.hostname.split(".")[0]}-auth-token`,u={db:JB,realtime:e4,auth:er(er({},QB),{},{storageKey:o}),global:KB},f=l4(t??{},u);if(this.storageKey=(i=f.auth.storageKey)!==null&&i!==void 0?i:"",this.headers=(r=f.global.headers)!==null&&r!==void 0?r:{},f.accessToken)this.accessToken=f.accessToken,this.auth=new Proxy({},{get:(m,v)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(v)} is not possible`)}});else{var p;this.auth=this._initSupabaseAuthClient((p=f.auth)!==null&&p!==void 0?p:{},this.headers,f.global.fetch)}this.fetch=a4(e,this._getAccessToken.bind(this),f.global.fetch),this.realtime=this._initRealtimeClient(er({headers:this.headers,accessToken:this._getAccessToken.bind(this)},f.realtime)),this.accessToken&&Promise.resolve(this.accessToken()).then(m=>this.realtime.setAuth(m)).catch(m=>console.warn("Failed to set initial Realtime auth token:",m)),this.rest=new YU(new URL("rest/v1",s).href,{headers:this.headers,schema:f.db.schema,fetch:this.fetch}),this.storage=new Hk(this.storageUrl.href,this.headers,this.fetch,t?.storage),f.accessToken||this._listenForAuthEvents()}get functions(){return new jU(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}from(n){return this.rest.from(n)}schema(n){return this.rest.schema(n)}rpc(n,e={},t={head:!1,get:!1,count:void 0}){return this.rest.rpc(n,e,t)}channel(n,e={config:{}}){return this.realtime.channel(n,e)}getChannels(){return this.realtime.getChannels()}removeChannel(n){return this.realtime.removeChannel(n)}removeAllChannels(){return this.realtime.removeAllChannels()}async _getAccessToken(){var n=this,e,t;if(n.accessToken)return await n.accessToken();const{data:i}=await n.auth.getSession();return(e=(t=i.session)===null||t===void 0?void 0:t.access_token)!==null&&e!==void 0?e:n.supabaseKey}_initSupabaseAuthClient({autoRefreshToken:n,persistSession:e,detectSessionInUrl:t,storage:i,userStorage:r,storageKey:s,flowType:o,lock:u,debug:f,throwOnError:p},m,v){const _={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new u4({url:this.authUrl.href,headers:er(er({},_),m),storageKey:s,autoRefreshToken:n,persistSession:e,detectSessionInUrl:t,storage:i,userStorage:r,flowType:o,lock:u,debug:f,throwOnError:p,fetch:v,hasCustomAuthorizationHeader:Object.keys(this.headers).some(x=>x.toLowerCase()==="authorization")})}_initRealtimeClient(n){return new fk(this.realtimeUrl.href,er(er({},n),{},{params:er(er({},{apikey:this.supabaseKey}),n?.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((n,e)=>{this._handleTokenChanged(n,"CLIENT",e?.access_token)})}_handleTokenChanged(n,e,t){(n==="TOKEN_REFRESHED"||n==="SIGNED_IN")&&this.changedAccessToken!==t?(this.changedAccessToken=t,this.realtime.setAuth(t)):n==="SIGNED_OUT"&&(this.realtime.setAuth(),e=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}};const f4=(n,e,t)=>new h4(n,e,t);function d4(){if(typeof window<"u")return!1;const n=globalThis.process;if(!n)return!1;const e=n.version;if(e==null)return!1;const t=e.match(/^v(\d+)\./);return t?parseInt(t[1],10)<=18:!1}d4()&&console.warn("  Node.js 18 and below are deprecated and will no longer be supported in future versions of @supabase/supabase-js. Please upgrade to Node.js 20 or later. For more information, visit: https://github.com/orgs/supabase/discussions/37217");const p4="https://bvmcchnxpcvifcblbisa.supabase.co",m4="sb_publishable_lfQTIS91bkBxwjrVzI-x6w_JE45Bmzg",Rl=f4(p4,m4),KN=K.createContext({}),JM=()=>K.useContext(KN),g4=({children:n})=>{const[e,t]=K.useState(null),[i,r]=K.useState(!0);K.useEffect(()=>{(async()=>{const{data:{session:f}}=await Rl.auth.getSession();t(f?.user??null),r(!1)})();const{data:{subscription:u}}=Rl.auth.onAuthStateChange((f,p)=>{t(p?.user??null),r(!1)});return()=>u.unsubscribe()},[]);const s=async()=>{await Rl.auth.signOut()};return V.jsx(KN.Provider,{value:{user:e,loading:i,signOut:s},children:!i&&n})},JN=K.createContext(),v4=({children:n})=>{const[e,t]=K.useState([]),i=s=>{t(o=>[...o,s])},r=s=>{t(o=>o.filter(u=>u.id!==s))};return V.jsx(JN.Provider,{value:{cartItems:e,addToCart:i,removeFromCart:r},children:n})},y4=()=>K.useContext(JN);var hC="popstate";function _4(n={}){function e(r,s){let{pathname:o="/",search:u="",hash:f=""}=Cf(r.location.hash.substring(1));return!o.startsWith("/")&&!o.startsWith(".")&&(o="/"+o),Zw("",{pathname:o,search:u,hash:f},s.state&&s.state.usr||null,s.state&&s.state.key||"default")}function t(r,s){let o=r.document.querySelector("base"),u="";if(o&&o.getAttribute("href")){let f=r.location.href,p=f.indexOf("#");u=p===-1?f:f.slice(0,p)}return u+"#"+(typeof s=="string"?s:M0(s))}function i(r,s){uo(r.pathname.charAt(0)==="/",`relative pathnames are not supported in hash history.push(${JSON.stringify(s)})`)}return b4(e,t,i,n)}function qi(n,e){if(n===!1||n===null||typeof n>"u")throw new Error(e)}function uo(n,e){if(!n){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function x4(){return Math.random().toString(36).substring(2,10)}function fC(n,e){return{usr:n.state,key:n.key,idx:e}}function Zw(n,e,t=null,i){return{pathname:typeof n=="string"?n:n.pathname,search:"",hash:"",...typeof e=="string"?Cf(e):e,state:t,key:e&&e.key||i||x4()}}function M0({pathname:n="/",search:e="",hash:t=""}){return e&&e!=="?"&&(n+=e.charAt(0)==="?"?e:"?"+e),t&&t!=="#"&&(n+=t.charAt(0)==="#"?t:"#"+t),n}function Cf(n){let e={};if(n){let t=n.indexOf("#");t>=0&&(e.hash=n.substring(t),n=n.substring(0,t));let i=n.indexOf("?");i>=0&&(e.search=n.substring(i),n=n.substring(0,i)),n&&(e.pathname=n)}return e}function b4(n,e,t,i={}){let{window:r=document.defaultView,v5Compat:s=!1}=i,o=r.history,u="POP",f=null,p=m();p==null&&(p=0,o.replaceState({...o.state,idx:p},""));function m(){return(o.state||{idx:null}).idx}function v(){u="POP";let E=m(),M=E==null?null:E-p;p=E,f&&f({action:u,location:A.location,delta:M})}function _(E,M){u="PUSH";let C=Zw(A.location,E,M);t&&t(C,E),p=m()+1;let N=fC(C,p),I=A.createHref(C);try{o.pushState(N,"",I)}catch(U){if(U instanceof DOMException&&U.name==="DataCloneError")throw U;r.location.assign(I)}s&&f&&f({action:u,location:A.location,delta:1})}function x(E,M){u="REPLACE";let C=Zw(A.location,E,M);t&&t(C,E),p=m();let N=fC(C,p),I=A.createHref(C);o.replaceState(N,"",I),s&&f&&f({action:u,location:A.location,delta:0})}function S(E){return S4(E)}let A={get action(){return u},get location(){return n(r,o)},listen(E){if(f)throw new Error("A history only accepts one active listener");return r.addEventListener(hC,v),f=E,()=>{r.removeEventListener(hC,v),f=null}},createHref(E){return e(r,E)},createURL:S,encodeLocation(E){let M=S(E);return{pathname:M.pathname,search:M.search,hash:M.hash}},push:_,replace:x,go(E){return o.go(E)}};return A}function S4(n,e=!1){let t="http://localhost";typeof window<"u"&&(t=window.location.origin!=="null"?window.location.origin:window.location.href),qi(t,"No window.location.(origin|href) available to create URL");let i=typeof n=="string"?n:M0(n);return i=i.replace(/ $/,"%20"),!e&&i.startsWith("//")&&(i=t+i),new URL(i,t)}function QN(n,e,t="/"){return w4(n,e,t,!1)}function w4(n,e,t,i){let r=typeof e=="string"?Cf(e):e,s=Dc(r.pathname||"/",t);if(s==null)return null;let o=eD(n);M4(o);let u=null;for(let f=0;u==null&&f<o.length;++f){let p=L4(s);u=P4(o[f],p,i)}return u}function eD(n,e=[],t=[],i="",r=!1){let s=(o,u,f=r,p)=>{let m={relativePath:p===void 0?o.path||"":p,caseSensitive:o.caseSensitive===!0,childrenIndex:u,route:o};if(m.relativePath.startsWith("/")){if(!m.relativePath.startsWith(i)&&f)return;qi(m.relativePath.startsWith(i),`Absolute route path "${m.relativePath}" nested under path "${i}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),m.relativePath=m.relativePath.slice(i.length)}let v=Ac([i,m.relativePath]),_=t.concat(m);o.children&&o.children.length>0&&(qi(o.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${v}".`),eD(o.children,e,_,v,f)),!(o.path==null&&!o.index)&&e.push({path:v,score:D4(v,o.index),routesMeta:_})};return n.forEach((o,u)=>{if(o.path===""||!o.path?.includes("?"))s(o,u);else for(let f of tD(o.path))s(o,u,!0,f)}),e}function tD(n){let e=n.split("/");if(e.length===0)return[];let[t,...i]=e,r=t.endsWith("?"),s=t.replace(/\?$/,"");if(i.length===0)return r?[s,""]:[s];let o=tD(i.join("/")),u=[];return u.push(...o.map(f=>f===""?s:[s,f].join("/"))),r&&u.push(...o),u.map(f=>n.startsWith("/")&&f===""?"/":f)}function M4(n){n.sort((e,t)=>e.score!==t.score?t.score-e.score:I4(e.routesMeta.map(i=>i.childrenIndex),t.routesMeta.map(i=>i.childrenIndex)))}var E4=/^:[\w-]+$/,T4=3,A4=2,C4=1,R4=10,N4=-2,dC=n=>n==="*";function D4(n,e){let t=n.split("/"),i=t.length;return t.some(dC)&&(i+=N4),e&&(i+=A4),t.filter(r=>!dC(r)).reduce((r,s)=>r+(E4.test(s)?T4:s===""?C4:R4),i)}function I4(n,e){return n.length===e.length&&n.slice(0,-1).every((i,r)=>i===e[r])?n[n.length-1]-e[e.length-1]:0}function P4(n,e,t=!1){let{routesMeta:i}=n,r={},s="/",o=[];for(let u=0;u<i.length;++u){let f=i[u],p=u===i.length-1,m=s==="/"?e:e.slice(s.length)||"/",v=_x({path:f.relativePath,caseSensitive:f.caseSensitive,end:p},m),_=f.route;if(!v&&p&&t&&!i[i.length-1].route.index&&(v=_x({path:f.relativePath,caseSensitive:f.caseSensitive,end:!1},m)),!v)return null;Object.assign(r,v.params),o.push({params:r,pathname:Ac([s,v.pathname]),pathnameBase:z4(Ac([s,v.pathnameBase])),route:_}),v.pathnameBase!=="/"&&(s=Ac([s,v.pathnameBase]))}return o}function _x(n,e){typeof n=="string"&&(n={path:n,caseSensitive:!1,end:!0});let[t,i]=O4(n.path,n.caseSensitive,n.end),r=e.match(t);if(!r)return null;let s=r[0],o=s.replace(/(.)\/+$/,"$1"),u=r.slice(1);return{params:i.reduce((p,{paramName:m,isOptional:v},_)=>{if(m==="*"){let S=u[_]||"";o=s.slice(0,s.length-S.length).replace(/(.)\/+$/,"$1")}const x=u[_];return v&&!x?p[m]=void 0:p[m]=(x||"").replace(/%2F/g,"/"),p},{}),pathname:s,pathnameBase:o,pattern:n}}function O4(n,e=!1,t=!0){uo(n==="*"||!n.endsWith("*")||n.endsWith("/*"),`Route path "${n}" will be treated as if it were "${n.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${n.replace(/\*$/,"/*")}".`);let i=[],r="^"+n.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(o,u,f)=>(i.push({paramName:u,isOptional:f!=null}),f?"/?([^\\/]+)?":"/([^\\/]+)")).replace(/\/([\w-]+)\?(\/|$)/g,"(/$1)?$2");return n.endsWith("*")?(i.push({paramName:"*"}),r+=n==="*"||n==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):t?r+="\\/*$":n!==""&&n!=="/"&&(r+="(?:(?=\\/|$))"),[new RegExp(r,e?void 0:"i"),i]}function L4(n){try{return n.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return uo(!1,`The URL path "${n}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${e}).`),n}}function Dc(n,e){if(e==="/")return n;if(!n.toLowerCase().startsWith(e.toLowerCase()))return null;let t=e.endsWith("/")?e.length-1:e.length,i=n.charAt(t);return i&&i!=="/"?null:n.slice(t)||"/"}var nD=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,U4=n=>nD.test(n);function k4(n,e="/"){let{pathname:t,search:i="",hash:r=""}=typeof n=="string"?Cf(n):n,s;if(t)if(U4(t))s=t;else{if(t.includes("//")){let o=t;t=t.replace(/\/\/+/g,"/"),uo(!1,`Pathnames cannot have embedded double slashes - normalizing ${o} -> ${t}`)}t.startsWith("/")?s=pC(t.substring(1),"/"):s=pC(t,e)}else s=e;return{pathname:s,search:F4(i),hash:V4(r)}}function pC(n,e){let t=e.replace(/\/+$/,"").split("/");return n.split("/").forEach(r=>{r===".."?t.length>1&&t.pop():r!=="."&&t.push(r)}),t.length>1?t.join("/"):"/"}function y1(n,e,t,i){return`Cannot include a '${n}' character in a manually specified \`to.${e}\` field [${JSON.stringify(i)}].  Please separate it out to the \`to.${t}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function B4(n){return n.filter((e,t)=>t===0||e.route.path&&e.route.path.length>0)}function iD(n){let e=B4(n);return e.map((t,i)=>i===e.length-1?t.pathname:t.pathnameBase)}function rD(n,e,t,i=!1){let r;typeof n=="string"?r=Cf(n):(r={...n},qi(!r.pathname||!r.pathname.includes("?"),y1("?","pathname","search",r)),qi(!r.pathname||!r.pathname.includes("#"),y1("#","pathname","hash",r)),qi(!r.search||!r.search.includes("#"),y1("#","search","hash",r)));let s=n===""||r.pathname==="",o=s?"/":r.pathname,u;if(o==null)u=t;else{let v=e.length-1;if(!i&&o.startsWith("..")){let _=o.split("/");for(;_[0]==="..";)_.shift(),v-=1;r.pathname=_.join("/")}u=v>=0?e[v]:"/"}let f=k4(r,u),p=o&&o!=="/"&&o.endsWith("/"),m=(s||o===".")&&t.endsWith("/");return!f.pathname.endsWith("/")&&(p||m)&&(f.pathname+="/"),f}var Ac=n=>n.join("/").replace(/\/\/+/g,"/"),z4=n=>n.replace(/\/+$/,"").replace(/^\/*/,"/"),F4=n=>!n||n==="?"?"":n.startsWith("?")?n:"?"+n,V4=n=>!n||n==="#"?"":n.startsWith("#")?n:"#"+n,H4=class{constructor(n,e,t,i=!1){this.status=n,this.statusText=e||"",this.internal=i,t instanceof Error?(this.data=t.toString(),this.error=t):this.data=t}};function G4(n){return n!=null&&typeof n.status=="number"&&typeof n.statusText=="string"&&typeof n.internal=="boolean"&&"data"in n}function j4(n){return n.map(e=>e.route.path).filter(Boolean).join("/").replace(/\/\/*/g,"/")||"/"}var sD=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";function aD(n,e){let t=n;if(typeof t!="string"||!nD.test(t))return{absoluteURL:void 0,isExternal:!1,to:t};let i=t,r=!1;if(sD)try{let s=new URL(window.location.href),o=t.startsWith("//")?new URL(s.protocol+t):new URL(t),u=Dc(o.pathname,e);o.origin===s.origin&&u!=null?t=u+o.search+o.hash:r=!0}catch{uo(!1,`<Link to="${t}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}return{absoluteURL:i,isExternal:r,to:t}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");var oD=["POST","PUT","PATCH","DELETE"];new Set(oD);var W4=["GET",...oD];new Set(W4);var Xp=K.createContext(null);Xp.displayName="DataRouter";var Db=K.createContext(null);Db.displayName="DataRouterState";var q4=K.createContext(!1),lD=K.createContext({isTransitioning:!1});lD.displayName="ViewTransition";var X4=K.createContext(new Map);X4.displayName="Fetchers";var $4=K.createContext(null);$4.displayName="Await";var ho=K.createContext(null);ho.displayName="Navigation";var K0=K.createContext(null);K0.displayName="Location";var zl=K.createContext({outlet:null,matches:[],isDataRoute:!1});zl.displayName="Route";var QM=K.createContext(null);QM.displayName="RouteError";var cD="REACT_ROUTER_ERROR",Y4="REDIRECT",Z4="ROUTE_ERROR_RESPONSE";function K4(n){if(n.startsWith(`${cD}:${Y4}:{`))try{let e=JSON.parse(n.slice(28));if(typeof e=="object"&&e&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.location=="string"&&typeof e.reloadDocument=="boolean"&&typeof e.replace=="boolean")return e}catch{}}function J4(n){if(n.startsWith(`${cD}:${Z4}:{`))try{let e=JSON.parse(n.slice(40));if(typeof e=="object"&&e&&typeof e.status=="number"&&typeof e.statusText=="string")return new H4(e.status,e.statusText,e.data)}catch{}}function Q4(n,{relative:e}={}){qi(J0(),"useHref() may be used only in the context of a <Router> component.");let{basename:t,navigator:i}=K.useContext(ho),{hash:r,pathname:s,search:o}=Q0(n,{relative:e}),u=s;return t!=="/"&&(u=s==="/"?t:Ac([t,s])),i.createHref({pathname:u,search:o,hash:r})}function J0(){return K.useContext(K0)!=null}function fo(){return qi(J0(),"useLocation() may be used only in the context of a <Router> component."),K.useContext(K0).location}var uD="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function hD(n){K.useContext(ho).static||K.useLayoutEffect(n)}function Ib(){let{isDataRoute:n}=K.useContext(zl);return n?dz():ez()}function ez(){qi(J0(),"useNavigate() may be used only in the context of a <Router> component.");let n=K.useContext(Xp),{basename:e,navigator:t}=K.useContext(ho),{matches:i}=K.useContext(zl),{pathname:r}=fo(),s=JSON.stringify(iD(i)),o=K.useRef(!1);return hD(()=>{o.current=!0}),K.useCallback((f,p={})=>{if(uo(o.current,uD),!o.current)return;if(typeof f=="number"){t.go(f);return}let m=rD(f,JSON.parse(s),r,p.relative==="path");n==null&&e!=="/"&&(m.pathname=m.pathname==="/"?e:Ac([e,m.pathname])),(p.replace?t.replace:t.push)(m,p.state,p)},[e,t,s,r,n])}K.createContext(null);function tz(){let{matches:n}=K.useContext(zl),e=n[n.length-1];return e?e.params:{}}function Q0(n,{relative:e}={}){let{matches:t}=K.useContext(zl),{pathname:i}=fo(),r=JSON.stringify(iD(t));return K.useMemo(()=>rD(n,JSON.parse(r),i,e==="path"),[n,r,i,e])}function nz(n,e){return fD(n,e)}function fD(n,e,t,i,r){qi(J0(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:s}=K.useContext(ho),{matches:o}=K.useContext(zl),u=o[o.length-1],f=u?u.params:{},p=u?u.pathname:"/",m=u?u.pathnameBase:"/",v=u&&u.route;{let C=v&&v.path||"";pD(p,!v||C.endsWith("*")||C.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${p}" (under <Route path="${C}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${C}"> to <Route path="${C==="/"?"*":`${C}/*`}">.`)}let _=fo(),x;if(e){let C=typeof e=="string"?Cf(e):e;qi(m==="/"||C.pathname?.startsWith(m),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${m}" but pathname "${C.pathname}" was given in the \`location\` prop.`),x=C}else x=_;let S=x.pathname||"/",A=S;if(m!=="/"){let C=m.replace(/^\//,"").split("/");A="/"+S.replace(/^\//,"").split("/").slice(C.length).join("/")}let E=QN(n,{pathname:A});uo(v||E!=null,`No routes matched location "${x.pathname}${x.search}${x.hash}" `),uo(E==null||E[E.length-1].route.element!==void 0||E[E.length-1].route.Component!==void 0||E[E.length-1].route.lazy!==void 0,`Matched leaf route at location "${x.pathname}${x.search}${x.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let M=oz(E&&E.map(C=>Object.assign({},C,{params:Object.assign({},f,C.params),pathname:Ac([m,s.encodeLocation?s.encodeLocation(C.pathname.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:C.pathname]),pathnameBase:C.pathnameBase==="/"?m:Ac([m,s.encodeLocation?s.encodeLocation(C.pathnameBase.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:C.pathnameBase])})),o,t,i,r);return e&&M?K.createElement(K0.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...x},navigationType:"POP"}},M):M}function iz(){let n=fz(),e=G4(n)?`${n.status} ${n.statusText}`:n instanceof Error?n.message:JSON.stringify(n),t=n instanceof Error?n.stack:null,i="rgba(200,200,200, 0.5)",r={padding:"0.5rem",backgroundColor:i},s={padding:"2px 4px",backgroundColor:i},o=null;return console.error("Error handled by React Router default ErrorBoundary:",n),o=K.createElement(K.Fragment,null,K.createElement("p",null," Hey developer "),K.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",K.createElement("code",{style:s},"ErrorBoundary")," or"," ",K.createElement("code",{style:s},"errorElement")," prop on your route.")),K.createElement(K.Fragment,null,K.createElement("h2",null,"Unexpected Application Error!"),K.createElement("h3",{style:{fontStyle:"italic"}},e),t?K.createElement("pre",{style:r},t):null,o)}var rz=K.createElement(iz,null),dD=class extends K.Component{constructor(n){super(n),this.state={location:n.location,revalidation:n.revalidation,error:n.error}}static getDerivedStateFromError(n){return{error:n}}static getDerivedStateFromProps(n,e){return e.location!==n.location||e.revalidation!=="idle"&&n.revalidation==="idle"?{error:n.error,location:n.location,revalidation:n.revalidation}:{error:n.error!==void 0?n.error:e.error,location:e.location,revalidation:n.revalidation||e.revalidation}}componentDidCatch(n,e){this.props.onError?this.props.onError(n,e):console.error("React Router caught the following error during render",n)}render(){let n=this.state.error;if(this.context&&typeof n=="object"&&n&&"digest"in n&&typeof n.digest=="string"){const t=J4(n.digest);t&&(n=t)}let e=n!==void 0?K.createElement(zl.Provider,{value:this.props.routeContext},K.createElement(QM.Provider,{value:n,children:this.props.component})):this.props.children;return this.context?K.createElement(sz,{error:n},e):e}};dD.contextType=q4;var _1=new WeakMap;function sz({children:n,error:e}){let{basename:t}=K.useContext(ho);if(typeof e=="object"&&e&&"digest"in e&&typeof e.digest=="string"){let i=K4(e.digest);if(i){let r=_1.get(e);if(r)throw r;let s=aD(i.location,t);if(sD&&!_1.get(e))if(s.isExternal||i.reloadDocument)window.location.href=s.absoluteURL||s.to;else{const o=Promise.resolve().then(()=>window.__reactRouterDataRouter.navigate(s.to,{replace:i.replace}));throw _1.set(e,o),o}return K.createElement("meta",{httpEquiv:"refresh",content:`0;url=${s.absoluteURL||s.to}`})}}return n}function az({routeContext:n,match:e,children:t}){let i=K.useContext(Xp);return i&&i.static&&i.staticContext&&(e.route.errorElement||e.route.ErrorBoundary)&&(i.staticContext._deepestRenderedBoundaryId=e.route.id),K.createElement(zl.Provider,{value:n},t)}function oz(n,e=[],t=null,i=null,r=null){if(n==null){if(!t)return null;if(t.errors)n=t.matches;else if(e.length===0&&!t.initialized&&t.matches.length>0)n=t.matches;else return null}let s=n,o=t?.errors;if(o!=null){let m=s.findIndex(v=>v.route.id&&o?.[v.route.id]!==void 0);qi(m>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(o).join(",")}`),s=s.slice(0,Math.min(s.length,m+1))}let u=!1,f=-1;if(t)for(let m=0;m<s.length;m++){let v=s[m];if((v.route.HydrateFallback||v.route.hydrateFallbackElement)&&(f=m),v.route.id){let{loaderData:_,errors:x}=t,S=v.route.loader&&!_.hasOwnProperty(v.route.id)&&(!x||x[v.route.id]===void 0);if(v.route.lazy||S){u=!0,f>=0?s=s.slice(0,f+1):s=[s[0]];break}}}let p=t&&i?(m,v)=>{i(m,{location:t.location,params:t.matches?.[0]?.params??{},unstable_pattern:j4(t.matches),errorInfo:v})}:void 0;return s.reduceRight((m,v,_)=>{let x,S=!1,A=null,E=null;t&&(x=o&&v.route.id?o[v.route.id]:void 0,A=v.route.errorElement||rz,u&&(f<0&&_===0?(pD("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),S=!0,E=null):f===_&&(S=!0,E=v.route.hydrateFallbackElement||null)));let M=e.concat(s.slice(0,_+1)),C=()=>{let N;return x?N=A:S?N=E:v.route.Component?N=K.createElement(v.route.Component,null):v.route.element?N=v.route.element:N=m,K.createElement(az,{match:v,routeContext:{outlet:m,matches:M,isDataRoute:t!=null},children:N})};return t&&(v.route.ErrorBoundary||v.route.errorElement||_===0)?K.createElement(dD,{location:t.location,revalidation:t.revalidation,component:A,error:x,children:C(),routeContext:{outlet:null,matches:M,isDataRoute:!0},onError:p}):C()},null)}function eE(n){return`${n} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function lz(n){let e=K.useContext(Xp);return qi(e,eE(n)),e}function cz(n){let e=K.useContext(Db);return qi(e,eE(n)),e}function uz(n){let e=K.useContext(zl);return qi(e,eE(n)),e}function tE(n){let e=uz(n),t=e.matches[e.matches.length-1];return qi(t.route.id,`${n} can only be used on routes that contain a unique "id"`),t.route.id}function hz(){return tE("useRouteId")}function fz(){let n=K.useContext(QM),e=cz("useRouteError"),t=tE("useRouteError");return n!==void 0?n:e.errors?.[t]}function dz(){let{router:n}=lz("useNavigate"),e=tE("useNavigate"),t=K.useRef(!1);return hD(()=>{t.current=!0}),K.useCallback(async(r,s={})=>{uo(t.current,uD),t.current&&(typeof r=="number"?await n.navigate(r):await n.navigate(r,{fromRouteId:e,...s}))},[n,e])}var mC={};function pD(n,e,t){!e&&!mC[n]&&(mC[n]=!0,uo(!1,t))}K.memo(pz);function pz({routes:n,future:e,state:t,onError:i}){return fD(n,void 0,t,i,e)}function zo(n){qi(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function mz({basename:n="/",children:e=null,location:t,navigationType:i="POP",navigator:r,static:s=!1,unstable_useTransitions:o}){qi(!J0(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let u=n.replace(/^\/*/,"/"),f=K.useMemo(()=>({basename:u,navigator:r,static:s,unstable_useTransitions:o,future:{}}),[u,r,s,o]);typeof t=="string"&&(t=Cf(t));let{pathname:p="/",search:m="",hash:v="",state:_=null,key:x="default"}=t,S=K.useMemo(()=>{let A=Dc(p,u);return A==null?null:{location:{pathname:A,search:m,hash:v,state:_,key:x},navigationType:i}},[u,p,m,v,_,x,i]);return uo(S!=null,`<Router basename="${u}"> is not able to match the URL "${p}${m}${v}" because it does not start with the basename, so the <Router> won't render anything.`),S==null?null:K.createElement(ho.Provider,{value:f},K.createElement(K0.Provider,{children:e,value:S}))}function gz({children:n,location:e}){return nz(Kw(n),e)}function Kw(n,e=[]){let t=[];return K.Children.forEach(n,(i,r)=>{if(!K.isValidElement(i))return;let s=[...e,r];if(i.type===K.Fragment){t.push.apply(t,Kw(i.props.children,s));return}qi(i.type===zo,`[${typeof i.type=="string"?i.type:i.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),qi(!i.props.index||!i.props.children,"An index route cannot have child routes.");let o={id:i.props.id||s.join("-"),caseSensitive:i.props.caseSensitive,element:i.props.element,Component:i.props.Component,index:i.props.index,path:i.props.path,middleware:i.props.middleware,loader:i.props.loader,action:i.props.action,hydrateFallbackElement:i.props.hydrateFallbackElement,HydrateFallback:i.props.HydrateFallback,errorElement:i.props.errorElement,ErrorBoundary:i.props.ErrorBoundary,hasErrorBoundary:i.props.hasErrorBoundary===!0||i.props.ErrorBoundary!=null||i.props.errorElement!=null,shouldRevalidate:i.props.shouldRevalidate,handle:i.props.handle,lazy:i.props.lazy};i.props.children&&(o.children=Kw(i.props.children,s)),t.push(o)}),t}var ax="get",ox="application/x-www-form-urlencoded";function Pb(n){return typeof HTMLElement<"u"&&n instanceof HTMLElement}function vz(n){return Pb(n)&&n.tagName.toLowerCase()==="button"}function yz(n){return Pb(n)&&n.tagName.toLowerCase()==="form"}function _z(n){return Pb(n)&&n.tagName.toLowerCase()==="input"}function xz(n){return!!(n.metaKey||n.altKey||n.ctrlKey||n.shiftKey)}function bz(n,e){return n.button===0&&(!e||e==="_self")&&!xz(n)}var l_=null;function Sz(){if(l_===null)try{new FormData(document.createElement("form"),0),l_=!1}catch{l_=!0}return l_}var wz=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function x1(n){return n!=null&&!wz.has(n)?(uo(!1,`"${n}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${ox}"`),null):n}function Mz(n,e){let t,i,r,s,o;if(yz(n)){let u=n.getAttribute("action");i=u?Dc(u,e):null,t=n.getAttribute("method")||ax,r=x1(n.getAttribute("enctype"))||ox,s=new FormData(n)}else if(vz(n)||_z(n)&&(n.type==="submit"||n.type==="image")){let u=n.form;if(u==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let f=n.getAttribute("formaction")||u.getAttribute("action");if(i=f?Dc(f,e):null,t=n.getAttribute("formmethod")||u.getAttribute("method")||ax,r=x1(n.getAttribute("formenctype"))||x1(u.getAttribute("enctype"))||ox,s=new FormData(u,n),!Sz()){let{name:p,type:m,value:v}=n;if(m==="image"){let _=p?`${p}.`:"";s.append(`${_}x`,"0"),s.append(`${_}y`,"0")}else p&&s.append(p,v)}}else{if(Pb(n))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');t=ax,i=null,r=ox,o=n}return s&&r==="text/plain"&&(o=s,s=void 0),{action:i,method:t.toLowerCase(),encType:r,formData:s,body:o}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");function nE(n,e){if(n===!1||n===null||typeof n>"u")throw new Error(e)}function Ez(n,e,t,i){let r=typeof n=="string"?new URL(n,typeof window>"u"?"server://singlefetch/":window.location.origin):n;return t?r.pathname.endsWith("/")?r.pathname=`${r.pathname}_.${i}`:r.pathname=`${r.pathname}.${i}`:r.pathname==="/"?r.pathname=`_root.${i}`:e&&Dc(r.pathname,e)==="/"?r.pathname=`${e.replace(/\/$/,"")}/_root.${i}`:r.pathname=`${r.pathname.replace(/\/$/,"")}.${i}`,r}async function Tz(n,e){if(n.id in e)return e[n.id];try{let t=await import(n.module);return e[n.id]=t,t}catch(t){return console.error(`Error loading route module \`${n.module}\`, reloading page...`),console.error(t),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function Az(n){return n==null?!1:n.href==null?n.rel==="preload"&&typeof n.imageSrcSet=="string"&&typeof n.imageSizes=="string":typeof n.rel=="string"&&typeof n.href=="string"}async function Cz(n,e,t){let i=await Promise.all(n.map(async r=>{let s=e.routes[r.route.id];if(s){let o=await Tz(s,t);return o.links?o.links():[]}return[]}));return Iz(i.flat(1).filter(Az).filter(r=>r.rel==="stylesheet"||r.rel==="preload").map(r=>r.rel==="stylesheet"?{...r,rel:"prefetch",as:"style"}:{...r,rel:"prefetch"}))}function gC(n,e,t,i,r,s){let o=(f,p)=>t[p]?f.route.id!==t[p].route.id:!0,u=(f,p)=>t[p].pathname!==f.pathname||t[p].route.path?.endsWith("*")&&t[p].params["*"]!==f.params["*"];return s==="assets"?e.filter((f,p)=>o(f,p)||u(f,p)):s==="data"?e.filter((f,p)=>{let m=i.routes[f.route.id];if(!m||!m.hasLoader)return!1;if(o(f,p)||u(f,p))return!0;if(f.route.shouldRevalidate){let v=f.route.shouldRevalidate({currentUrl:new URL(r.pathname+r.search+r.hash,window.origin),currentParams:t[0]?.params||{},nextUrl:new URL(n,window.origin),nextParams:f.params,defaultShouldRevalidate:!0});if(typeof v=="boolean")return v}return!0}):[]}function Rz(n,e,{includeHydrateFallback:t}={}){return Nz(n.map(i=>{let r=e.routes[i.route.id];if(!r)return[];let s=[r.module];return r.clientActionModule&&(s=s.concat(r.clientActionModule)),r.clientLoaderModule&&(s=s.concat(r.clientLoaderModule)),t&&r.hydrateFallbackModule&&(s=s.concat(r.hydrateFallbackModule)),r.imports&&(s=s.concat(r.imports)),s}).flat(1))}function Nz(n){return[...new Set(n)]}function Dz(n){let e={},t=Object.keys(n).sort();for(let i of t)e[i]=n[i];return e}function Iz(n,e){let t=new Set;return new Set(e),n.reduce((i,r)=>{let s=JSON.stringify(Dz(r));return t.has(s)||(t.add(s),i.push({key:s,link:r})),i},[])}function mD(){let n=K.useContext(Xp);return nE(n,"You must render this element inside a <DataRouterContext.Provider> element"),n}function Pz(){let n=K.useContext(Db);return nE(n,"You must render this element inside a <DataRouterStateContext.Provider> element"),n}var iE=K.createContext(void 0);iE.displayName="FrameworkContext";function gD(){let n=K.useContext(iE);return nE(n,"You must render this element inside a <HydratedRouter> element"),n}function Oz(n,e){let t=K.useContext(iE),[i,r]=K.useState(!1),[s,o]=K.useState(!1),{onFocus:u,onBlur:f,onMouseEnter:p,onMouseLeave:m,onTouchStart:v}=e,_=K.useRef(null);K.useEffect(()=>{if(n==="render"&&o(!0),n==="viewport"){let A=M=>{M.forEach(C=>{o(C.isIntersecting)})},E=new IntersectionObserver(A,{threshold:.5});return _.current&&E.observe(_.current),()=>{E.disconnect()}}},[n]),K.useEffect(()=>{if(i){let A=setTimeout(()=>{o(!0)},100);return()=>{clearTimeout(A)}}},[i]);let x=()=>{r(!0)},S=()=>{r(!1),o(!1)};return t?n!=="intent"?[s,_,{}]:[s,_,{onFocus:Ng(u,x),onBlur:Ng(f,S),onMouseEnter:Ng(p,x),onMouseLeave:Ng(m,S),onTouchStart:Ng(v,x)}]:[!1,_,{}]}function Ng(n,e){return t=>{n&&n(t),t.defaultPrevented||e(t)}}function Lz({page:n,...e}){let{router:t}=mD(),i=K.useMemo(()=>QN(t.routes,n,t.basename),[t.routes,n,t.basename]);return i?K.createElement(kz,{page:n,matches:i,...e}):null}function Uz(n){let{manifest:e,routeModules:t}=gD(),[i,r]=K.useState([]);return K.useEffect(()=>{let s=!1;return Cz(n,e,t).then(o=>{s||r(o)}),()=>{s=!0}},[n,e,t]),i}function kz({page:n,matches:e,...t}){let i=fo(),{future:r,manifest:s,routeModules:o}=gD(),{basename:u}=mD(),{loaderData:f,matches:p}=Pz(),m=K.useMemo(()=>gC(n,e,p,s,i,"data"),[n,e,p,s,i]),v=K.useMemo(()=>gC(n,e,p,s,i,"assets"),[n,e,p,s,i]),_=K.useMemo(()=>{if(n===i.pathname+i.search+i.hash)return[];let A=new Set,E=!1;if(e.forEach(C=>{let N=s.routes[C.route.id];!N||!N.hasLoader||(!m.some(I=>I.route.id===C.route.id)&&C.route.id in f&&o[C.route.id]?.shouldRevalidate||N.hasClientLoader?E=!0:A.add(C.route.id))}),A.size===0)return[];let M=Ez(n,u,r.unstable_trailingSlashAwareDataRequests,"data");return E&&A.size>0&&M.searchParams.set("_routes",e.filter(C=>A.has(C.route.id)).map(C=>C.route.id).join(",")),[M.pathname+M.search]},[u,r.unstable_trailingSlashAwareDataRequests,f,i,s,m,e,n,o]),x=K.useMemo(()=>Rz(v,s),[v,s]),S=Uz(v);return K.createElement(K.Fragment,null,_.map(A=>K.createElement("link",{key:A,rel:"prefetch",as:"fetch",href:A,...t})),x.map(A=>K.createElement("link",{key:A,rel:"modulepreload",href:A,...t})),S.map(({key:A,link:E})=>K.createElement("link",{key:A,nonce:t.nonce,...E})))}function Bz(...n){return e=>{n.forEach(t=>{typeof t=="function"?t(e):t!=null&&(t.current=e)})}}var zz=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{zz&&(window.__reactRouterVersion="7.12.0")}catch{}function Fz({basename:n,children:e,unstable_useTransitions:t,window:i}){let r=K.useRef();r.current==null&&(r.current=_4({window:i,v5Compat:!0}));let s=r.current,[o,u]=K.useState({action:s.action,location:s.location}),f=K.useCallback(p=>{t===!1?u(p):K.startTransition(()=>u(p))},[t]);return K.useLayoutEffect(()=>s.listen(f),[s,f]),K.createElement(mz,{basename:n,children:e,location:o.location,navigationType:o.action,navigator:s,unstable_useTransitions:t})}var vD=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Dl=K.forwardRef(function({onClick:e,discover:t="render",prefetch:i="none",relative:r,reloadDocument:s,replace:o,state:u,target:f,to:p,preventScrollReset:m,viewTransition:v,unstable_defaultShouldRevalidate:_,...x},S){let{basename:A,unstable_useTransitions:E}=K.useContext(ho),M=typeof p=="string"&&vD.test(p),C=aD(p,A);p=C.to;let N=Q4(p,{relative:r}),[I,U,L]=Oz(i,x),F=jz(p,{replace:o,state:u,target:f,preventScrollReset:m,relative:r,viewTransition:v,unstable_defaultShouldRevalidate:_,unstable_useTransitions:E});function H(k){e&&e(k),k.defaultPrevented||F(k)}let P=K.createElement("a",{...x,...L,href:C.absoluteURL||N,onClick:C.isExternal||s?e:H,ref:Bz(S,U),target:f,"data-discover":!M&&t==="render"?"true":void 0});return I&&!M?K.createElement(K.Fragment,null,P,K.createElement(Lz,{page:N})):P});Dl.displayName="Link";var Vz=K.forwardRef(function({"aria-current":e="page",caseSensitive:t=!1,className:i="",end:r=!1,style:s,to:o,viewTransition:u,children:f,...p},m){let v=Q0(o,{relative:p.relative}),_=fo(),x=K.useContext(Db),{navigator:S,basename:A}=K.useContext(ho),E=x!=null&&Yz(v)&&u===!0,M=S.encodeLocation?S.encodeLocation(v).pathname:v.pathname,C=_.pathname,N=x&&x.navigation&&x.navigation.location?x.navigation.location.pathname:null;t||(C=C.toLowerCase(),N=N?N.toLowerCase():null,M=M.toLowerCase()),N&&A&&(N=Dc(N,A)||N);const I=M!=="/"&&M.endsWith("/")?M.length-1:M.length;let U=C===M||!r&&C.startsWith(M)&&C.charAt(I)==="/",L=N!=null&&(N===M||!r&&N.startsWith(M)&&N.charAt(M.length)==="/"),F={isActive:U,isPending:L,isTransitioning:E},H=U?e:void 0,P;typeof i=="function"?P=i(F):P=[i,U?"active":null,L?"pending":null,E?"transitioning":null].filter(Boolean).join(" ");let k=typeof s=="function"?s(F):s;return K.createElement(Dl,{...p,"aria-current":H,className:P,ref:m,style:k,to:o,viewTransition:u},typeof f=="function"?f(F):f)});Vz.displayName="NavLink";var Hz=K.forwardRef(({discover:n="render",fetcherKey:e,navigate:t,reloadDocument:i,replace:r,state:s,method:o=ax,action:u,onSubmit:f,relative:p,preventScrollReset:m,viewTransition:v,unstable_defaultShouldRevalidate:_,...x},S)=>{let{unstable_useTransitions:A}=K.useContext(ho),E=Xz(),M=$z(u,{relative:p}),C=o.toLowerCase()==="get"?"get":"post",N=typeof u=="string"&&vD.test(u),I=U=>{if(f&&f(U),U.defaultPrevented)return;U.preventDefault();let L=U.nativeEvent.submitter,F=L?.getAttribute("formmethod")||o,H=()=>E(L||U.currentTarget,{fetcherKey:e,method:F,navigate:t,replace:r,state:s,relative:p,preventScrollReset:m,viewTransition:v,unstable_defaultShouldRevalidate:_});A&&t!==!1?K.startTransition(()=>H()):H()};return K.createElement("form",{ref:S,method:C,action:M,onSubmit:i?f:I,...x,"data-discover":!N&&n==="render"?"true":void 0})});Hz.displayName="Form";function Gz(n){return`${n} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function yD(n){let e=K.useContext(Xp);return qi(e,Gz(n)),e}function jz(n,{target:e,replace:t,state:i,preventScrollReset:r,relative:s,viewTransition:o,unstable_defaultShouldRevalidate:u,unstable_useTransitions:f}={}){let p=Ib(),m=fo(),v=Q0(n,{relative:s});return K.useCallback(_=>{if(bz(_,e)){_.preventDefault();let x=t!==void 0?t:M0(m)===M0(v),S=()=>p(n,{replace:x,state:i,preventScrollReset:r,relative:s,viewTransition:o,unstable_defaultShouldRevalidate:u});f?K.startTransition(()=>S()):S()}},[m,p,v,t,i,e,n,r,s,o,u,f])}var Wz=0,qz=()=>`__${String(++Wz)}__`;function Xz(){let{router:n}=yD("useSubmit"),{basename:e}=K.useContext(ho),t=hz(),i=n.fetch,r=n.navigate;return K.useCallback(async(s,o={})=>{let{action:u,method:f,encType:p,formData:m,body:v}=Mz(s,e);if(o.navigate===!1){let _=o.fetcherKey||qz();await i(_,t,o.action||u,{unstable_defaultShouldRevalidate:o.unstable_defaultShouldRevalidate,preventScrollReset:o.preventScrollReset,formData:m,body:v,formMethod:o.method||f,formEncType:o.encType||p,flushSync:o.flushSync})}else await r(o.action||u,{unstable_defaultShouldRevalidate:o.unstable_defaultShouldRevalidate,preventScrollReset:o.preventScrollReset,formData:m,body:v,formMethod:o.method||f,formEncType:o.encType||p,replace:o.replace,state:o.state,fromRouteId:t,flushSync:o.flushSync,viewTransition:o.viewTransition})},[i,r,e,t])}function $z(n,{relative:e}={}){let{basename:t}=K.useContext(ho),i=K.useContext(zl);qi(i,"useFormAction must be used inside a RouteContext");let[r]=i.matches.slice(-1),s={...Q0(n||".",{relative:e})},o=fo();if(n==null){s.search=o.search;let u=new URLSearchParams(s.search),f=u.getAll("index");if(f.some(m=>m==="")){u.delete("index"),f.filter(v=>v).forEach(v=>u.append("index",v));let m=u.toString();s.search=m?`?${m}`:""}}return(!n||n===".")&&r.route.index&&(s.search=s.search?s.search.replace(/^\?/,"?index&"):"?index"),t!=="/"&&(s.pathname=s.pathname==="/"?t:Ac([t,s.pathname])),M0(s)}function Yz(n,{relative:e}={}){let t=K.useContext(lD);qi(t!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:i}=yD("useViewTransitionState"),r=Q0(n,{relative:e});if(!t.isTransitioning)return!1;let s=Dc(t.currentLocation.pathname,i)||t.currentLocation.pathname,o=Dc(t.nextLocation.pathname,i)||t.nextLocation.pathname;return _x(r.pathname,o)!=null||_x(r.pathname,s)!=null}const Zz=n=>n.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),Kz=n=>n.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,t,i)=>i?i.toUpperCase():t.toLowerCase()),vC=n=>{const e=Kz(n);return e.charAt(0).toUpperCase()+e.slice(1)},_D=(...n)=>n.filter((e,t,i)=>!!e&&e.trim()!==""&&i.indexOf(e)===t).join(" ").trim(),Jz=n=>{for(const e in n)if(e.startsWith("aria-")||e==="role"||e==="title")return!0};var Qz={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};const eF=K.forwardRef(({color:n="currentColor",size:e=24,strokeWidth:t=2,absoluteStrokeWidth:i,className:r="",children:s,iconNode:o,...u},f)=>K.createElement("svg",{ref:f,...Qz,width:e,height:e,stroke:n,strokeWidth:i?Number(t)*24/Number(e):t,className:_D("lucide",r),...!s&&!Jz(u)&&{"aria-hidden":"true"},...u},[...o.map(([p,m])=>K.createElement(p,m)),...Array.isArray(s)?s:[s]]));const si=(n,e)=>{const t=K.forwardRef(({className:i,...r},s)=>K.createElement(eF,{ref:s,iconNode:e,className:_D(`lucide-${Zz(vC(n))}`,`lucide-${n}`,i),...r}));return t.displayName=vC(n),t};const tF=[["path",{d:"M12 5v14",key:"s699le"}],["path",{d:"m19 12-7 7-7-7",key:"1idqje"}]],yC=si("arrow-down",tF);const nF=[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]],xD=si("arrow-left",nF);const iF=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]],bD=si("arrow-right",iF);const rF=[["path",{d:"M12 7v14",key:"1akyts"}],["path",{d:"M3 18a1 1 0 0 1-1-1V4a1 1 0 0 1 1-1h5a4 4 0 0 1 4 4 4 4 0 0 1 4-4h5a1 1 0 0 1 1 1v13a1 1 0 0 1-1 1h-6a3 3 0 0 0-3 3 3 3 0 0 0-3-3z",key:"ruj8y"}]],SD=si("book-open",rF);const sF=[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]],aF=si("calendar",sF);const oF=[["path",{d:"M13.997 4a2 2 0 0 1 1.76 1.05l.486.9A2 2 0 0 0 18.003 7H20a2 2 0 0 1 2 2v9a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V9a2 2 0 0 1 2-2h1.997a2 2 0 0 0 1.759-1.048l.489-.904A2 2 0 0 1 10.004 4z",key:"18u6gg"}],["circle",{cx:"12",cy:"13",r:"3",key:"1vg3eu"}]],wD=si("camera",oF);const lF=[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]],cF=si("chevron-left",lF);const uF=[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]],hF=si("chevron-right",uF);const fF=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m12 8-4 4 4 4",key:"15vm53"}],["path",{d:"M16 12H8",key:"1fr5h0"}]],dF=si("circle-arrow-left",fF);const pF=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m12 16 4-4-4-4",key:"1i9zcv"}],["path",{d:"M8 12h8",key:"1wcyev"}]],mF=si("circle-arrow-right",pF);const gF=[["path",{d:"m16 18 6-6-6-6",key:"eg8j8"}],["path",{d:"m8 6-6 6 6 6",key:"ppft3o"}]],vF=si("code",gF);const yF=[["rect",{width:"20",height:"14",x:"2",y:"5",rx:"2",key:"ynyp8z"}],["line",{x1:"2",x2:"22",y1:"10",y2:"10",key:"1b3vmo"}]],_F=si("credit-card",yF);const xF=[["path",{d:"M21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16z",key:"yt0hxn"}]],bF=si("hexagon",xF);const SF=[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]],wF=si("loader-circle",SF);const MF=[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}]],EF=si("pen",MF);const TF=[["path",{d:"M6 18H4a2 2 0 0 1-2-2v-5a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2v5a2 2 0 0 1-2 2h-2",key:"143wyd"}],["path",{d:"M6 9V3a1 1 0 0 1 1-1h10a1 1 0 0 1 1 1v6",key:"1itne7"}],["rect",{x:"6",y:"14",width:"12",height:"8",rx:"1",key:"1ue0tg"}]],AF=si("printer",TF);const CF=[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]],RF=si("save",CF);const NF=[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]],MD=si("shield",NF);const DF=[["path",{d:"M16 10a4 4 0 0 1-8 0",key:"1ltviw"}],["path",{d:"M3.103 6.034h17.794",key:"awc11p"}],["path",{d:"M3.4 5.467a2 2 0 0 0-.4 1.2V20a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2V6.667a2 2 0 0 0-.4-1.2l-2-2.667A2 2 0 0 0 17 2H7a2 2 0 0 0-1.6.8z",key:"o988cm"}]],IF=si("shopping-bag",DF);const PF=[["circle",{cx:"8",cy:"21",r:"1",key:"jimo8o"}],["circle",{cx:"19",cy:"21",r:"1",key:"13723u"}],["path",{d:"M2.05 2.05h2l2.66 12.42a2 2 0 0 0 2 1.58h9.78a2 2 0 0 0 1.95-1.57l1.65-7.43H5.12",key:"9zh506"}]],OF=si("shopping-cart",PF);const LF=[["path",{d:"M11.017 2.814a1 1 0 0 1 1.966 0l1.051 5.558a2 2 0 0 0 1.594 1.594l5.558 1.051a1 1 0 0 1 0 1.966l-5.558 1.051a2 2 0 0 0-1.594 1.594l-1.051 5.558a1 1 0 0 1-1.966 0l-1.051-5.558a2 2 0 0 0-1.594-1.594l-5.558-1.051a1 1 0 0 1 0-1.966l5.558-1.051a2 2 0 0 0 1.594-1.594z",key:"1s2grr"}],["path",{d:"M20 2v4",key:"1rf3ol"}],["path",{d:"M22 4h-4",key:"gwowj6"}],["circle",{cx:"4",cy:"20",r:"2",key:"6kqj1y"}]],UF=si("sparkles",LF);const kF=[["path",{d:"M11.525 2.295a.53.53 0 0 1 .95 0l2.31 4.679a2.123 2.123 0 0 0 1.595 1.16l5.166.756a.53.53 0 0 1 .294.904l-3.736 3.638a2.123 2.123 0 0 0-.611 1.878l.882 5.14a.53.53 0 0 1-.771.56l-4.618-2.428a2.122 2.122 0 0 0-1.973 0L6.396 21.01a.53.53 0 0 1-.77-.56l.881-5.139a2.122 2.122 0 0 0-.611-1.879L2.16 9.795a.53.53 0 0 1 .294-.906l5.165-.755a2.122 2.122 0 0 0 1.597-1.16z",key:"r04s7s"}]],rE=si("star",kF);const BF=[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]],zF=si("trash-2",BF);const FF=[["path",{d:"M13.73 4a2 2 0 0 0-3.46 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3Z",key:"14u9p9"}]],VF=si("triangle",FF);const HF=[["path",{d:"M10 14.66v1.626a2 2 0 0 1-.976 1.696A5 5 0 0 0 7 21.978",key:"1n3hpd"}],["path",{d:"M14 14.66v1.626a2 2 0 0 0 .976 1.696A5 5 0 0 1 17 21.978",key:"rfe1zi"}],["path",{d:"M18 9h1.5a1 1 0 0 0 0-5H18",key:"7xy6bh"}],["path",{d:"M4 22h16",key:"57wxv0"}],["path",{d:"M6 9a6 6 0 0 0 12 0V3a1 1 0 0 0-1-1H7a1 1 0 0 0-1 1z",key:"1mhfuq"}],["path",{d:"M6 9H4.5a1 1 0 0 1 0-5H6",key:"tex48p"}]],GF=si("trophy",HF);const jF=[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]],WF=si("user",jF);const qF=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["path",{d:"M16 3.128a4 4 0 0 1 0 7.744",key:"16gr8j"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]],XF=si("users",qF);const $F=[["path",{d:"M14.7 6.3a1 1 0 0 0 0 1.4l1.6 1.6a1 1 0 0 0 1.4 0l3.106-3.105c.32-.322.863-.22.983.218a6 6 0 0 1-8.259 7.057l-7.91 7.91a1 1 0 0 1-2.999-3l7.91-7.91a6 6 0 0 1 7.057-8.259c.438.12.54.662.219.984z",key:"1ngwbx"}]],ED=si("wrench",$F);const YF=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],TD=si("x",YF);const ZF=[["path",{d:"M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z",key:"1xq2db"}]],KF=si("zap",ZF),sE=({className:n="w-10 h-10"})=>V.jsxs("svg",{viewBox:"0 0 100 100",fill:"none",xmlns:"http://www.w3.org/2000/svg",className:n,children:[V.jsx("path",{d:"M 80 30 C 70 10, 30 10, 20 50 C 10 90, 70 90, 80 70",stroke:"white",strokeWidth:"4",strokeLinecap:"round"}),V.jsx("circle",{cx:"80",cy:"30",r:"6",fill:"white"}),V.jsx("circle",{cx:"20",cy:"50",r:"6",fill:"white"}),V.jsx("circle",{cx:"80",cy:"70",r:"6",fill:"white"}),V.jsx("line",{x1:"80",y1:"30",x2:"50",y2:"20",stroke:"white",strokeWidth:"2",opacity:"0.5"}),V.jsx("line",{x1:"50",y1:"20",x2:"20",y2:"50",stroke:"white",strokeWidth:"2",opacity:"0.5"}),V.jsx("line",{x1:"20",y1:"50",x2:"50",y2:"80",stroke:"white",strokeWidth:"2",opacity:"0.5"}),V.jsx("line",{x1:"50",y1:"80",x2:"80",y2:"70",stroke:"white",strokeWidth:"2",opacity:"0.5"}),V.jsx("circle",{cx:"50",cy:"20",r:"4",fill:"white"}),V.jsx("circle",{cx:"50",cy:"80",r:"4",fill:"white"})]}),AD=K.createContext({});function JF(n){const e=K.useRef(null);return e.current===null&&(e.current=n()),e.current}const CD=typeof window<"u",QF=CD?K.useLayoutEffect:K.useEffect,aE=K.createContext(null);function oE(n,e){n.indexOf(e)===-1&&n.push(e)}function lE(n,e){const t=n.indexOf(e);t>-1&&n.splice(t,1)}const kl=(n,e,t)=>t>e?e:t<n?n:t;let cE=()=>{};const Ic={},RD=n=>/^-?(?:\d+(?:\.\d+)?|\.\d+)$/u.test(n);function ND(n){return typeof n=="object"&&n!==null}const DD=n=>/^0[^.\s]+$/u.test(n);function uE(n){let e;return()=>(e===void 0&&(e=n()),e)}const oo=n=>n,e5=(n,e)=>t=>e(n(t)),ev=(...n)=>n.reduce(e5),E0=(n,e,t)=>{const i=e-n;return i===0?1:(t-n)/i};class hE{constructor(){this.subscriptions=[]}add(e){return oE(this.subscriptions,e),()=>lE(this.subscriptions,e)}notify(e,t,i){const r=this.subscriptions.length;if(r)if(r===1)this.subscriptions[0](e,t,i);else for(let s=0;s<r;s++){const o=this.subscriptions[s];o&&o(e,t,i)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}const Cc=n=>n*1e3,ao=n=>n/1e3;function ID(n,e){return e?n*(1e3/e):0}const PD=(n,e,t)=>(((1-3*t+3*e)*n+(3*t-6*e))*n+3*e)*n,t5=1e-7,n5=12;function i5(n,e,t,i,r){let s,o,u=0;do o=e+(t-e)/2,s=PD(o,i,r)-n,s>0?t=o:e=o;while(Math.abs(s)>t5&&++u<n5);return o}function tv(n,e,t,i){if(n===e&&t===i)return oo;const r=s=>i5(s,0,1,n,t);return s=>s===0||s===1?s:PD(r(s),e,i)}const OD=n=>e=>e<=.5?n(2*e)/2:(2-n(2*(1-e)))/2,LD=n=>e=>1-n(1-e),UD=tv(.33,1.53,.69,.99),fE=LD(UD),kD=OD(fE),BD=n=>(n*=2)<1?.5*fE(n):.5*(2-Math.pow(2,-10*(n-1))),dE=n=>1-Math.sin(Math.acos(n)),zD=LD(dE),FD=OD(dE),r5=tv(.42,0,1,1),s5=tv(0,0,.58,1),VD=tv(.42,0,.58,1),a5=n=>Array.isArray(n)&&typeof n[0]!="number",HD=n=>Array.isArray(n)&&typeof n[0]=="number",o5={linear:oo,easeIn:r5,easeInOut:VD,easeOut:s5,circIn:dE,circInOut:FD,circOut:zD,backIn:fE,backInOut:kD,backOut:UD,anticipate:BD},l5=n=>typeof n=="string",_C=n=>{if(HD(n)){cE(n.length===4);const[e,t,i,r]=n;return tv(e,t,i,r)}else if(l5(n))return o5[n];return n},c_=["setup","read","resolveKeyframes","preUpdate","update","preRender","render","postRender"];function c5(n,e){let t=new Set,i=new Set,r=!1,s=!1;const o=new WeakSet;let u={delta:0,timestamp:0,isProcessing:!1};function f(m){o.has(m)&&(p.schedule(m),n()),m(u)}const p={schedule:(m,v=!1,_=!1)=>{const S=_&&r?t:i;return v&&o.add(m),S.has(m)||S.add(m),m},cancel:m=>{i.delete(m),o.delete(m)},process:m=>{if(u=m,r){s=!0;return}r=!0,[t,i]=[i,t],t.forEach(f),t.clear(),r=!1,s&&(s=!1,p.process(m))}};return p}const u5=40;function GD(n,e){let t=!1,i=!0;const r={delta:0,timestamp:0,isProcessing:!1},s=()=>t=!0,o=c_.reduce((N,I)=>(N[I]=c5(s),N),{}),{setup:u,read:f,resolveKeyframes:p,preUpdate:m,update:v,preRender:_,render:x,postRender:S}=o,A=()=>{const N=Ic.useManualTiming?r.timestamp:performance.now();t=!1,Ic.useManualTiming||(r.delta=i?1e3/60:Math.max(Math.min(N-r.timestamp,u5),1)),r.timestamp=N,r.isProcessing=!0,u.process(r),f.process(r),p.process(r),m.process(r),v.process(r),_.process(r),x.process(r),S.process(r),r.isProcessing=!1,t&&e&&(i=!1,n(A))},E=()=>{t=!0,i=!0,r.isProcessing||n(A)};return{schedule:c_.reduce((N,I)=>{const U=o[I];return N[I]=(L,F=!1,H=!1)=>(t||E(),U.schedule(L,F,H)),N},{}),cancel:N=>{for(let I=0;I<c_.length;I++)o[c_[I]].cancel(N)},state:r,steps:o}}const{schedule:Di,cancel:ju,state:is,steps:b1}=GD(typeof requestAnimationFrame<"u"?requestAnimationFrame:oo,!0);let lx;function h5(){lx=void 0}const zs={now:()=>(lx===void 0&&zs.set(is.isProcessing||Ic.useManualTiming?is.timestamp:performance.now()),lx),set:n=>{lx=n,queueMicrotask(h5)}},jD=n=>e=>typeof e=="string"&&e.startsWith(n),WD=jD("--"),f5=jD("var(--"),pE=n=>f5(n)?d5.test(n.split("/*")[0].trim()):!1,d5=/var\(--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)$/iu;function xC(n){return typeof n!="string"?!1:n.split("/*")[0].includes("var(--")}const $p={test:n=>typeof n=="number",parse:parseFloat,transform:n=>n},T0={...$p,transform:n=>kl(0,1,n)},u_={...$p,default:1},n0=n=>Math.round(n*1e5)/1e5,mE=/-?(?:\d+(?:\.\d+)?|\.\d+)/gu;function p5(n){return n==null}const m5=/^(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))$/iu,gE=(n,e)=>t=>!!(typeof t=="string"&&m5.test(t)&&t.startsWith(n)||e&&!p5(t)&&Object.prototype.hasOwnProperty.call(t,e)),qD=(n,e,t)=>i=>{if(typeof i!="string")return i;const[r,s,o,u]=i.match(mE);return{[n]:parseFloat(r),[e]:parseFloat(s),[t]:parseFloat(o),alpha:u!==void 0?parseFloat(u):1}},g5=n=>kl(0,255,n),S1={...$p,transform:n=>Math.round(g5(n))},hf={test:gE("rgb","red"),parse:qD("red","green","blue"),transform:({red:n,green:e,blue:t,alpha:i=1})=>"rgba("+S1.transform(n)+", "+S1.transform(e)+", "+S1.transform(t)+", "+n0(T0.transform(i))+")"};function v5(n){let e="",t="",i="",r="";return n.length>5?(e=n.substring(1,3),t=n.substring(3,5),i=n.substring(5,7),r=n.substring(7,9)):(e=n.substring(1,2),t=n.substring(2,3),i=n.substring(3,4),r=n.substring(4,5),e+=e,t+=t,i+=i,r+=r),{red:parseInt(e,16),green:parseInt(t,16),blue:parseInt(i,16),alpha:r?parseInt(r,16)/255:1}}const Jw={test:gE("#"),parse:v5,transform:hf.transform},nv=n=>({test:e=>typeof e=="string"&&e.endsWith(n)&&e.split(" ").length===1,parse:parseFloat,transform:e=>`${e}${n}`}),Ou=nv("deg"),Ul=nv("%"),zt=nv("px"),y5=nv("vh"),_5=nv("vw"),bC={...Ul,parse:n=>Ul.parse(n)/100,transform:n=>Ul.transform(n*100)},_p={test:gE("hsl","hue"),parse:qD("hue","saturation","lightness"),transform:({hue:n,saturation:e,lightness:t,alpha:i=1})=>"hsla("+Math.round(n)+", "+Ul.transform(n0(e))+", "+Ul.transform(n0(t))+", "+n0(T0.transform(i))+")"},Er={test:n=>hf.test(n)||Jw.test(n)||_p.test(n),parse:n=>hf.test(n)?hf.parse(n):_p.test(n)?_p.parse(n):Jw.parse(n),transform:n=>typeof n=="string"?n:n.hasOwnProperty("red")?hf.transform(n):_p.transform(n),getAnimatableNone:n=>{const e=Er.parse(n);return e.alpha=0,Er.transform(e)}},x5=/(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))/giu;function b5(n){return isNaN(n)&&typeof n=="string"&&(n.match(mE)?.length||0)+(n.match(x5)?.length||0)>0}const XD="number",$D="color",S5="var",w5="var(",SC="${}",M5=/var\s*\(\s*--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)|#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\)|-?(?:\d+(?:\.\d+)?|\.\d+)/giu;function A0(n){const e=n.toString(),t=[],i={color:[],number:[],var:[]},r=[];let s=0;const u=e.replace(M5,f=>(Er.test(f)?(i.color.push(s),r.push($D),t.push(Er.parse(f))):f.startsWith(w5)?(i.var.push(s),r.push(S5),t.push(f)):(i.number.push(s),r.push(XD),t.push(parseFloat(f))),++s,SC)).split(SC);return{values:t,split:u,indexes:i,types:r}}function YD(n){return A0(n).values}function ZD(n){const{split:e,types:t}=A0(n),i=e.length;return r=>{let s="";for(let o=0;o<i;o++)if(s+=e[o],r[o]!==void 0){const u=t[o];u===XD?s+=n0(r[o]):u===$D?s+=Er.transform(r[o]):s+=r[o]}return s}}const E5=n=>typeof n=="number"?0:Er.test(n)?Er.getAnimatableNone(n):n;function T5(n){const e=YD(n);return ZD(n)(e.map(E5))}const Wu={test:b5,parse:YD,createTransformer:ZD,getAnimatableNone:T5};function w1(n,e,t){return t<0&&(t+=1),t>1&&(t-=1),t<1/6?n+(e-n)*6*t:t<1/2?e:t<2/3?n+(e-n)*(2/3-t)*6:n}function A5({hue:n,saturation:e,lightness:t,alpha:i}){n/=360,e/=100,t/=100;let r=0,s=0,o=0;if(!e)r=s=o=t;else{const u=t<.5?t*(1+e):t+e-t*e,f=2*t-u;r=w1(f,u,n+1/3),s=w1(f,u,n),o=w1(f,u,n-1/3)}return{red:Math.round(r*255),green:Math.round(s*255),blue:Math.round(o*255),alpha:i}}function xx(n,e){return t=>t>0?e:n}const ji=(n,e,t)=>n+(e-n)*t,M1=(n,e,t)=>{const i=n*n,r=t*(e*e-i)+i;return r<0?0:Math.sqrt(r)},C5=[Jw,hf,_p],R5=n=>C5.find(e=>e.test(n));function wC(n){const e=R5(n);if(!e)return!1;let t=e.parse(n);return e===_p&&(t=A5(t)),t}const MC=(n,e)=>{const t=wC(n),i=wC(e);if(!t||!i)return xx(n,e);const r={...t};return s=>(r.red=M1(t.red,i.red,s),r.green=M1(t.green,i.green,s),r.blue=M1(t.blue,i.blue,s),r.alpha=ji(t.alpha,i.alpha,s),hf.transform(r))},Qw=new Set(["none","hidden"]);function N5(n,e){return Qw.has(n)?t=>t<=0?n:e:t=>t>=1?e:n}function D5(n,e){return t=>ji(n,e,t)}function vE(n){return typeof n=="number"?D5:typeof n=="string"?pE(n)?xx:Er.test(n)?MC:O5:Array.isArray(n)?KD:typeof n=="object"?Er.test(n)?MC:I5:xx}function KD(n,e){const t=[...n],i=t.length,r=n.map((s,o)=>vE(s)(s,e[o]));return s=>{for(let o=0;o<i;o++)t[o]=r[o](s);return t}}function I5(n,e){const t={...n,...e},i={};for(const r in t)n[r]!==void 0&&e[r]!==void 0&&(i[r]=vE(n[r])(n[r],e[r]));return r=>{for(const s in i)t[s]=i[s](r);return t}}function P5(n,e){const t=[],i={color:0,var:0,number:0};for(let r=0;r<e.values.length;r++){const s=e.types[r],o=n.indexes[s][i[s]],u=n.values[o]??0;t[r]=u,i[s]++}return t}const O5=(n,e)=>{const t=Wu.createTransformer(e),i=A0(n),r=A0(e);return i.indexes.var.length===r.indexes.var.length&&i.indexes.color.length===r.indexes.color.length&&i.indexes.number.length>=r.indexes.number.length?Qw.has(n)&&!r.values.length||Qw.has(e)&&!i.values.length?N5(n,e):ev(KD(P5(i,r),r.values),t):xx(n,e)};function JD(n,e,t){return typeof n=="number"&&typeof e=="number"&&typeof t=="number"?ji(n,e,t):vE(n)(n,e)}const L5=n=>{const e=({timestamp:t})=>n(t);return{start:(t=!0)=>Di.update(e,t),stop:()=>ju(e),now:()=>is.isProcessing?is.timestamp:zs.now()}},QD=(n,e,t=10)=>{let i="";const r=Math.max(Math.round(e/t),2);for(let s=0;s<r;s++)i+=Math.round(n(s/(r-1))*1e4)/1e4+", ";return`linear(${i.substring(0,i.length-2)})`},bx=2e4;function yE(n){let e=0;const t=50;let i=n.next(e);for(;!i.done&&e<bx;)e+=t,i=n.next(e);return e>=bx?1/0:e}function U5(n,e=100,t){const i=t({...n,keyframes:[0,e]}),r=Math.min(yE(i),bx);return{type:"keyframes",ease:s=>i.next(r*s).value/e,duration:ao(r)}}const k5=5;function eI(n,e,t){const i=Math.max(e-k5,0);return ID(t-n(i),e-i)}const tr={stiffness:100,damping:10,mass:1,velocity:0,duration:800,bounce:.3,visualDuration:.3,restSpeed:{granular:.01,default:2},restDelta:{granular:.005,default:.5},minDuration:.01,maxDuration:10,minDamping:.05,maxDamping:1},E1=.001;function B5({duration:n=tr.duration,bounce:e=tr.bounce,velocity:t=tr.velocity,mass:i=tr.mass}){let r,s,o=1-e;o=kl(tr.minDamping,tr.maxDamping,o),n=kl(tr.minDuration,tr.maxDuration,ao(n)),o<1?(r=p=>{const m=p*o,v=m*n,_=m-t,x=eM(p,o),S=Math.exp(-v);return E1-_/x*S},s=p=>{const v=p*o*n,_=v*t+t,x=Math.pow(o,2)*Math.pow(p,2)*n,S=Math.exp(-v),A=eM(Math.pow(p,2),o);return(-r(p)+E1>0?-1:1)*((_-x)*S)/A}):(r=p=>{const m=Math.exp(-p*n),v=(p-t)*n+1;return-E1+m*v},s=p=>{const m=Math.exp(-p*n),v=(t-p)*(n*n);return m*v});const u=5/n,f=F5(r,s,u);if(n=Cc(n),isNaN(f))return{stiffness:tr.stiffness,damping:tr.damping,duration:n};{const p=Math.pow(f,2)*i;return{stiffness:p,damping:o*2*Math.sqrt(i*p),duration:n}}}const z5=12;function F5(n,e,t){let i=t;for(let r=1;r<z5;r++)i=i-n(i)/e(i);return i}function eM(n,e){return n*Math.sqrt(1-e*e)}const V5=["duration","bounce"],H5=["stiffness","damping","mass"];function EC(n,e){return e.some(t=>n[t]!==void 0)}function G5(n){let e={velocity:tr.velocity,stiffness:tr.stiffness,damping:tr.damping,mass:tr.mass,isResolvedFromDuration:!1,...n};if(!EC(n,H5)&&EC(n,V5))if(n.visualDuration){const t=n.visualDuration,i=2*Math.PI/(t*1.2),r=i*i,s=2*kl(.05,1,1-(n.bounce||0))*Math.sqrt(r);e={...e,mass:tr.mass,stiffness:r,damping:s}}else{const t=B5(n);e={...e,...t,mass:tr.mass},e.isResolvedFromDuration=!0}return e}function Sx(n=tr.visualDuration,e=tr.bounce){const t=typeof n!="object"?{visualDuration:n,keyframes:[0,1],bounce:e}:n;let{restSpeed:i,restDelta:r}=t;const s=t.keyframes[0],o=t.keyframes[t.keyframes.length-1],u={done:!1,value:s},{stiffness:f,damping:p,mass:m,duration:v,velocity:_,isResolvedFromDuration:x}=G5({...t,velocity:-ao(t.velocity||0)}),S=_||0,A=p/(2*Math.sqrt(f*m)),E=o-s,M=ao(Math.sqrt(f/m)),C=Math.abs(E)<5;i||(i=C?tr.restSpeed.granular:tr.restSpeed.default),r||(r=C?tr.restDelta.granular:tr.restDelta.default);let N;if(A<1){const U=eM(M,A);N=L=>{const F=Math.exp(-A*M*L);return o-F*((S+A*M*E)/U*Math.sin(U*L)+E*Math.cos(U*L))}}else if(A===1)N=U=>o-Math.exp(-M*U)*(E+(S+M*E)*U);else{const U=M*Math.sqrt(A*A-1);N=L=>{const F=Math.exp(-A*M*L),H=Math.min(U*L,300);return o-F*((S+A*M*E)*Math.sinh(H)+U*E*Math.cosh(H))/U}}const I={calculatedDuration:x&&v||null,next:U=>{const L=N(U);if(x)u.done=U>=v;else{let F=U===0?S:0;A<1&&(F=U===0?Cc(S):eI(N,U,L));const H=Math.abs(F)<=i,P=Math.abs(o-L)<=r;u.done=H&&P}return u.value=u.done?o:L,u},toString:()=>{const U=Math.min(yE(I),bx),L=QD(F=>I.next(U*F).value,U,30);return U+"ms "+L},toTransition:()=>{}};return I}Sx.applyToOptions=n=>{const e=U5(n,100,Sx);return n.ease=e.ease,n.duration=Cc(e.duration),n.type="keyframes",n};function tM({keyframes:n,velocity:e=0,power:t=.8,timeConstant:i=325,bounceDamping:r=10,bounceStiffness:s=500,modifyTarget:o,min:u,max:f,restDelta:p=.5,restSpeed:m}){const v=n[0],_={done:!1,value:v},x=H=>u!==void 0&&H<u||f!==void 0&&H>f,S=H=>u===void 0?f:f===void 0||Math.abs(u-H)<Math.abs(f-H)?u:f;let A=t*e;const E=v+A,M=o===void 0?E:o(E);M!==E&&(A=M-v);const C=H=>-A*Math.exp(-H/i),N=H=>M+C(H),I=H=>{const P=C(H),k=N(H);_.done=Math.abs(P)<=p,_.value=_.done?M:k};let U,L;const F=H=>{x(_.value)&&(U=H,L=Sx({keyframes:[_.value,S(_.value)],velocity:eI(N,H,_.value),damping:r,stiffness:s,restDelta:p,restSpeed:m}))};return F(0),{calculatedDuration:null,next:H=>{let P=!1;return!L&&U===void 0&&(P=!0,I(H),F(H)),U!==void 0&&H>=U?L.next(H-U):(!P&&I(H),_)}}}function j5(n,e,t){const i=[],r=t||Ic.mix||JD,s=n.length-1;for(let o=0;o<s;o++){let u=r(n[o],n[o+1]);if(e){const f=Array.isArray(e)?e[o]||oo:e;u=ev(f,u)}i.push(u)}return i}function W5(n,e,{clamp:t=!0,ease:i,mixer:r}={}){const s=n.length;if(cE(s===e.length),s===1)return()=>e[0];if(s===2&&e[0]===e[1])return()=>e[1];const o=n[0]===n[1];n[0]>n[s-1]&&(n=[...n].reverse(),e=[...e].reverse());const u=j5(e,i,r),f=u.length,p=m=>{if(o&&m<n[0])return e[0];let v=0;if(f>1)for(;v<n.length-2&&!(m<n[v+1]);v++);const _=E0(n[v],n[v+1],m);return u[v](_)};return t?m=>p(kl(n[0],n[s-1],m)):p}function q5(n,e){const t=n[n.length-1];for(let i=1;i<=e;i++){const r=E0(0,e,i);n.push(ji(t,1,r))}}function X5(n){const e=[0];return q5(e,n.length-1),e}function $5(n,e){return n.map(t=>t*e)}function Y5(n,e){return n.map(()=>e||VD).splice(0,n.length-1)}function i0({duration:n=300,keyframes:e,times:t,ease:i="easeInOut"}){const r=a5(i)?i.map(_C):_C(i),s={done:!1,value:e[0]},o=$5(t&&t.length===e.length?t:X5(e),n),u=W5(o,e,{ease:Array.isArray(r)?r:Y5(e,r)});return{calculatedDuration:n,next:f=>(s.value=u(f),s.done=f>=n,s)}}const Z5=n=>n!==null;function _E(n,{repeat:e,repeatType:t="loop"},i,r=1){const s=n.filter(Z5),u=r<0||e&&t!=="loop"&&e%2===1?0:s.length-1;return!u||i===void 0?s[u]:i}const K5={decay:tM,inertia:tM,tween:i0,keyframes:i0,spring:Sx};function tI(n){typeof n.type=="string"&&(n.type=K5[n.type])}class xE{constructor(){this.updateFinished()}get finished(){return this._finished}updateFinished(){this._finished=new Promise(e=>{this.resolve=e})}notifyFinished(){this.resolve()}then(e,t){return this.finished.then(e,t)}}const J5=n=>n/100;class bE extends xE{constructor(e){super(),this.state="idle",this.startTime=null,this.isStopped=!1,this.currentTime=0,this.holdTime=null,this.playbackSpeed=1,this.stop=()=>{const{motionValue:t}=this.options;t&&t.updatedAt!==zs.now()&&this.tick(zs.now()),this.isStopped=!0,this.state!=="idle"&&(this.teardown(),this.options.onStop?.())},this.options=e,this.initAnimation(),this.play(),e.autoplay===!1&&this.pause()}initAnimation(){const{options:e}=this;tI(e);const{type:t=i0,repeat:i=0,repeatDelay:r=0,repeatType:s,velocity:o=0}=e;let{keyframes:u}=e;const f=t||i0;f!==i0&&typeof u[0]!="number"&&(this.mixKeyframes=ev(J5,JD(u[0],u[1])),u=[0,100]);const p=f({...e,keyframes:u});s==="mirror"&&(this.mirroredGenerator=f({...e,keyframes:[...u].reverse(),velocity:-o})),p.calculatedDuration===null&&(p.calculatedDuration=yE(p));const{calculatedDuration:m}=p;this.calculatedDuration=m,this.resolvedDuration=m+r,this.totalDuration=this.resolvedDuration*(i+1)-r,this.generator=p}updateTime(e){const t=Math.round(e-this.startTime)*this.playbackSpeed;this.holdTime!==null?this.currentTime=this.holdTime:this.currentTime=t}tick(e,t=!1){const{generator:i,totalDuration:r,mixKeyframes:s,mirroredGenerator:o,resolvedDuration:u,calculatedDuration:f}=this;if(this.startTime===null)return i.next(0);const{delay:p=0,keyframes:m,repeat:v,repeatType:_,repeatDelay:x,type:S,onUpdate:A,finalKeyframe:E}=this.options;this.speed>0?this.startTime=Math.min(this.startTime,e):this.speed<0&&(this.startTime=Math.min(e-r/this.speed,this.startTime)),t?this.currentTime=e:this.updateTime(e);const M=this.currentTime-p*(this.playbackSpeed>=0?1:-1),C=this.playbackSpeed>=0?M<0:M>r;this.currentTime=Math.max(M,0),this.state==="finished"&&this.holdTime===null&&(this.currentTime=r);let N=this.currentTime,I=i;if(v){const H=Math.min(this.currentTime,r)/u;let P=Math.floor(H),k=H%1;!k&&H>=1&&(k=1),k===1&&P--,P=Math.min(P,v+1),P%2&&(_==="reverse"?(k=1-k,x&&(k-=x/u)):_==="mirror"&&(I=o)),N=kl(0,1,k)*u}const U=C?{done:!1,value:m[0]}:I.next(N);s&&(U.value=s(U.value));let{done:L}=U;!C&&f!==null&&(L=this.playbackSpeed>=0?this.currentTime>=r:this.currentTime<=0);const F=this.holdTime===null&&(this.state==="finished"||this.state==="running"&&L);return F&&S!==tM&&(U.value=_E(m,this.options,E,this.speed)),A&&A(U.value),F&&this.finish(),U}then(e,t){return this.finished.then(e,t)}get duration(){return ao(this.calculatedDuration)}get iterationDuration(){const{delay:e=0}=this.options||{};return this.duration+ao(e)}get time(){return ao(this.currentTime)}set time(e){e=Cc(e),this.currentTime=e,this.startTime===null||this.holdTime!==null||this.playbackSpeed===0?this.holdTime=e:this.driver&&(this.startTime=this.driver.now()-e/this.playbackSpeed),this.driver?.start(!1)}get speed(){return this.playbackSpeed}set speed(e){this.updateTime(zs.now());const t=this.playbackSpeed!==e;this.playbackSpeed=e,t&&(this.time=ao(this.currentTime))}play(){if(this.isStopped)return;const{driver:e=L5,startTime:t}=this.options;this.driver||(this.driver=e(r=>this.tick(r))),this.options.onPlay?.();const i=this.driver.now();this.state==="finished"?(this.updateFinished(),this.startTime=i):this.holdTime!==null?this.startTime=i-this.holdTime:this.startTime||(this.startTime=t??i),this.state==="finished"&&this.speed<0&&(this.startTime+=this.calculatedDuration),this.holdTime=null,this.state="running",this.driver.start()}pause(){this.state="paused",this.updateTime(zs.now()),this.holdTime=this.currentTime}complete(){this.state!=="running"&&this.play(),this.state="finished",this.holdTime=null}finish(){this.notifyFinished(),this.teardown(),this.state="finished",this.options.onComplete?.()}cancel(){this.holdTime=null,this.startTime=0,this.tick(0),this.teardown(),this.options.onCancel?.()}teardown(){this.state="idle",this.stopDriver(),this.startTime=this.holdTime=null}stopDriver(){this.driver&&(this.driver.stop(),this.driver=void 0)}sample(e){return this.startTime=0,this.tick(e,!0)}attachTimeline(e){return this.options.allowFlatten&&(this.options.type="keyframes",this.options.ease="linear",this.initAnimation()),this.driver?.stop(),e.observe(this)}}function Q5(n){for(let e=1;e<n.length;e++)n[e]??(n[e]=n[e-1])}const ff=n=>n*180/Math.PI,nM=n=>{const e=ff(Math.atan2(n[1],n[0]));return iM(e)},eV={x:4,y:5,translateX:4,translateY:5,scaleX:0,scaleY:3,scale:n=>(Math.abs(n[0])+Math.abs(n[3]))/2,rotate:nM,rotateZ:nM,skewX:n=>ff(Math.atan(n[1])),skewY:n=>ff(Math.atan(n[2])),skew:n=>(Math.abs(n[1])+Math.abs(n[2]))/2},iM=n=>(n=n%360,n<0&&(n+=360),n),TC=nM,AC=n=>Math.sqrt(n[0]*n[0]+n[1]*n[1]),CC=n=>Math.sqrt(n[4]*n[4]+n[5]*n[5]),tV={x:12,y:13,z:14,translateX:12,translateY:13,translateZ:14,scaleX:AC,scaleY:CC,scale:n=>(AC(n)+CC(n))/2,rotateX:n=>iM(ff(Math.atan2(n[6],n[5]))),rotateY:n=>iM(ff(Math.atan2(-n[2],n[0]))),rotateZ:TC,rotate:TC,skewX:n=>ff(Math.atan(n[4])),skewY:n=>ff(Math.atan(n[1])),skew:n=>(Math.abs(n[1])+Math.abs(n[4]))/2};function rM(n){return n.includes("scale")?1:0}function sM(n,e){if(!n||n==="none")return rM(e);const t=n.match(/^matrix3d\(([-\d.e\s,]+)\)$/u);let i,r;if(t)i=tV,r=t;else{const u=n.match(/^matrix\(([-\d.e\s,]+)\)$/u);i=eV,r=u}if(!r)return rM(e);const s=i[e],o=r[1].split(",").map(iV);return typeof s=="function"?s(o):o[s]}const nV=(n,e)=>{const{transform:t="none"}=getComputedStyle(n);return sM(t,e)};function iV(n){return parseFloat(n.trim())}const Yp=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],Zp=new Set(Yp),RC=n=>n===$p||n===zt,rV=new Set(["x","y","z"]),sV=Yp.filter(n=>!rV.has(n));function aV(n){const e=[];return sV.forEach(t=>{const i=n.getValue(t);i!==void 0&&(e.push([t,i.get()]),i.set(t.startsWith("scale")?1:0))}),e}const zu={width:({x:n},{paddingLeft:e="0",paddingRight:t="0"})=>n.max-n.min-parseFloat(e)-parseFloat(t),height:({y:n},{paddingTop:e="0",paddingBottom:t="0"})=>n.max-n.min-parseFloat(e)-parseFloat(t),top:(n,{top:e})=>parseFloat(e),left:(n,{left:e})=>parseFloat(e),bottom:({y:n},{top:e})=>parseFloat(e)+(n.max-n.min),right:({x:n},{left:e})=>parseFloat(e)+(n.max-n.min),x:(n,{transform:e})=>sM(e,"x"),y:(n,{transform:e})=>sM(e,"y")};zu.translateX=zu.x;zu.translateY=zu.y;const _f=new Set;let aM=!1,oM=!1,lM=!1;function nI(){if(oM){const n=Array.from(_f).filter(i=>i.needsMeasurement),e=new Set(n.map(i=>i.element)),t=new Map;e.forEach(i=>{const r=aV(i);r.length&&(t.set(i,r),i.render())}),n.forEach(i=>i.measureInitialState()),e.forEach(i=>{i.render();const r=t.get(i);r&&r.forEach(([s,o])=>{i.getValue(s)?.set(o)})}),n.forEach(i=>i.measureEndState()),n.forEach(i=>{i.suspendedScrollY!==void 0&&window.scrollTo(0,i.suspendedScrollY)})}oM=!1,aM=!1,_f.forEach(n=>n.complete(lM)),_f.clear()}function iI(){_f.forEach(n=>{n.readKeyframes(),n.needsMeasurement&&(oM=!0)})}function oV(){lM=!0,iI(),nI(),lM=!1}class SE{constructor(e,t,i,r,s,o=!1){this.state="pending",this.isAsync=!1,this.needsMeasurement=!1,this.unresolvedKeyframes=[...e],this.onComplete=t,this.name=i,this.motionValue=r,this.element=s,this.isAsync=o}scheduleResolve(){this.state="scheduled",this.isAsync?(_f.add(this),aM||(aM=!0,Di.read(iI),Di.resolveKeyframes(nI))):(this.readKeyframes(),this.complete())}readKeyframes(){const{unresolvedKeyframes:e,name:t,element:i,motionValue:r}=this;if(e[0]===null){const s=r?.get(),o=e[e.length-1];if(s!==void 0)e[0]=s;else if(i&&t){const u=i.readValue(t,o);u!=null&&(e[0]=u)}e[0]===void 0&&(e[0]=o),r&&s===void 0&&r.set(e[0])}Q5(e)}setFinalKeyframe(){}measureInitialState(){}renderEndStyles(){}measureEndState(){}complete(e=!1){this.state="complete",this.onComplete(this.unresolvedKeyframes,this.finalKeyframe,e),_f.delete(this)}cancel(){this.state==="scheduled"&&(_f.delete(this),this.state="pending")}resume(){this.state==="pending"&&this.scheduleResolve()}}const lV=n=>n.startsWith("--");function cV(n,e,t){lV(e)?n.style.setProperty(e,t):n.style[e]=t}const uV=uE(()=>window.ScrollTimeline!==void 0),hV={};function fV(n,e){const t=uE(n);return()=>hV[e]??t()}const rI=fV(()=>{try{document.createElement("div").animate({opacity:0},{easing:"linear(0, 1)"})}catch{return!1}return!0},"linearEasing"),Yg=([n,e,t,i])=>`cubic-bezier(${n}, ${e}, ${t}, ${i})`,NC={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:Yg([0,.65,.55,1]),circOut:Yg([.55,0,1,.45]),backIn:Yg([.31,.01,.66,-.59]),backOut:Yg([.33,1.53,.69,.99])};function sI(n,e){if(n)return typeof n=="function"?rI()?QD(n,e):"ease-out":HD(n)?Yg(n):Array.isArray(n)?n.map(t=>sI(t,e)||NC.easeOut):NC[n]}function dV(n,e,t,{delay:i=0,duration:r=300,repeat:s=0,repeatType:o="loop",ease:u="easeOut",times:f}={},p=void 0){const m={[e]:t};f&&(m.offset=f);const v=sI(u,r);Array.isArray(v)&&(m.easing=v);const _={delay:i,duration:r,easing:Array.isArray(v)?"linear":v,fill:"both",iterations:s+1,direction:o==="reverse"?"alternate":"normal"};return p&&(_.pseudoElement=p),n.animate(m,_)}function aI(n){return typeof n=="function"&&"applyToOptions"in n}function pV({type:n,...e}){return aI(n)&&rI()?n.applyToOptions(e):(e.duration??(e.duration=300),e.ease??(e.ease="easeOut"),e)}class mV extends xE{constructor(e){if(super(),this.finishedTime=null,this.isStopped=!1,this.manualStartTime=null,!e)return;const{element:t,name:i,keyframes:r,pseudoElement:s,allowFlatten:o=!1,finalKeyframe:u,onComplete:f}=e;this.isPseudoElement=!!s,this.allowFlatten=o,this.options=e,cE(typeof e.type!="string");const p=pV(e);this.animation=dV(t,i,r,p,s),p.autoplay===!1&&this.animation.pause(),this.animation.onfinish=()=>{if(this.finishedTime=this.time,!s){const m=_E(r,this.options,u,this.speed);this.updateMotionValue?this.updateMotionValue(m):cV(t,i,m),this.animation.cancel()}f?.(),this.notifyFinished()}}play(){this.isStopped||(this.manualStartTime=null,this.animation.play(),this.state==="finished"&&this.updateFinished())}pause(){this.animation.pause()}complete(){this.animation.finish?.()}cancel(){try{this.animation.cancel()}catch{}}stop(){if(this.isStopped)return;this.isStopped=!0;const{state:e}=this;e==="idle"||e==="finished"||(this.updateMotionValue?this.updateMotionValue():this.commitStyles(),this.isPseudoElement||this.cancel())}commitStyles(){this.isPseudoElement||this.animation.commitStyles?.()}get duration(){const e=this.animation.effect?.getComputedTiming?.().duration||0;return ao(Number(e))}get iterationDuration(){const{delay:e=0}=this.options||{};return this.duration+ao(e)}get time(){return ao(Number(this.animation.currentTime)||0)}set time(e){this.manualStartTime=null,this.finishedTime=null,this.animation.currentTime=Cc(e)}get speed(){return this.animation.playbackRate}set speed(e){e<0&&(this.finishedTime=null),this.animation.playbackRate=e}get state(){return this.finishedTime!==null?"finished":this.animation.playState}get startTime(){return this.manualStartTime??Number(this.animation.startTime)}set startTime(e){this.manualStartTime=this.animation.startTime=e}attachTimeline({timeline:e,observe:t}){return this.allowFlatten&&this.animation.effect?.updateTiming({easing:"linear"}),this.animation.onfinish=null,e&&uV()?(this.animation.timeline=e,oo):t(this)}}const oI={anticipate:BD,backInOut:kD,circInOut:FD};function gV(n){return n in oI}function vV(n){typeof n.ease=="string"&&gV(n.ease)&&(n.ease=oI[n.ease])}const T1=10;class yV extends mV{constructor(e){vV(e),tI(e),super(e),e.startTime!==void 0&&(this.startTime=e.startTime),this.options=e}updateMotionValue(e){const{motionValue:t,onUpdate:i,onComplete:r,element:s,...o}=this.options;if(!t)return;if(e!==void 0){t.set(e);return}const u=new bE({...o,autoplay:!1}),f=Math.max(T1,zs.now()-this.startTime),p=kl(0,T1,f-T1);t.setWithVelocity(u.sample(Math.max(0,f-p)).value,u.sample(f).value,p),u.stop()}}const DC=(n,e)=>e==="zIndex"?!1:!!(typeof n=="number"||Array.isArray(n)||typeof n=="string"&&(Wu.test(n)||n==="0")&&!n.startsWith("url("));function _V(n){const e=n[0];if(n.length===1)return!0;for(let t=0;t<n.length;t++)if(n[t]!==e)return!0}function xV(n,e,t,i){const r=n[0];if(r===null)return!1;if(e==="display"||e==="visibility")return!0;const s=n[n.length-1],o=DC(r,e),u=DC(s,e);return!o||!u?!1:_V(n)||(t==="spring"||aI(t))&&i}function cM(n){n.duration=0,n.type="keyframes"}const bV=new Set(["opacity","clipPath","filter","transform"]),SV=uE(()=>Object.hasOwnProperty.call(Element.prototype,"animate"));function wV(n){const{motionValue:e,name:t,repeatDelay:i,repeatType:r,damping:s,type:o}=n;if(!(e?.owner?.current instanceof HTMLElement))return!1;const{onUpdate:f,transformTemplate:p}=e.owner.getProps();return SV()&&t&&bV.has(t)&&(t!=="transform"||!p)&&!f&&!i&&r!=="mirror"&&s!==0&&o!=="inertia"}const MV=40;class EV extends xE{constructor({autoplay:e=!0,delay:t=0,type:i="keyframes",repeat:r=0,repeatDelay:s=0,repeatType:o="loop",keyframes:u,name:f,motionValue:p,element:m,...v}){super(),this.stop=()=>{this._animation&&(this._animation.stop(),this.stopTimeline?.()),this.keyframeResolver?.cancel()},this.createdAt=zs.now();const _={autoplay:e,delay:t,type:i,repeat:r,repeatDelay:s,repeatType:o,name:f,motionValue:p,element:m,...v},x=m?.KeyframeResolver||SE;this.keyframeResolver=new x(u,(S,A,E)=>this.onKeyframesResolved(S,A,_,!E),f,p,m),this.keyframeResolver?.scheduleResolve()}onKeyframesResolved(e,t,i,r){this.keyframeResolver=void 0;const{name:s,type:o,velocity:u,delay:f,isHandoff:p,onUpdate:m}=i;this.resolvedAt=zs.now(),xV(e,s,o,u)||((Ic.instantAnimations||!f)&&m?.(_E(e,i,t)),e[0]=e[e.length-1],cM(i),i.repeat=0);const _={startTime:r?this.resolvedAt?this.resolvedAt-this.createdAt>MV?this.resolvedAt:this.createdAt:this.createdAt:void 0,finalKeyframe:t,...i,keyframes:e},x=!p&&wV(_),S=_.motionValue?.owner?.current,A=x?new yV({..._,element:S}):new bE(_);A.finished.then(()=>{this.notifyFinished()}).catch(oo),this.pendingTimeline&&(this.stopTimeline=A.attachTimeline(this.pendingTimeline),this.pendingTimeline=void 0),this._animation=A}get finished(){return this._animation?this.animation.finished:this._finished}then(e,t){return this.finished.finally(e).then(()=>{})}get animation(){return this._animation||(this.keyframeResolver?.resume(),oV()),this._animation}get duration(){return this.animation.duration}get iterationDuration(){return this.animation.iterationDuration}get time(){return this.animation.time}set time(e){this.animation.time=e}get speed(){return this.animation.speed}get state(){return this.animation.state}set speed(e){this.animation.speed=e}get startTime(){return this.animation.startTime}attachTimeline(e){return this._animation?this.stopTimeline=this.animation.attachTimeline(e):this.pendingTimeline=e,()=>this.stop()}play(){this.animation.play()}pause(){this.animation.pause()}complete(){this.animation.complete()}cancel(){this._animation&&this.animation.cancel(),this.keyframeResolver?.cancel()}}function lI(n,e,t,i=0,r=1){const s=Array.from(n).sort((p,m)=>p.sortNodePosition(m)).indexOf(e),o=n.size,u=(o-1)*i;return typeof t=="function"?t(s,o):r===1?s*i:u-s*i}const TV=/^var\(--(?:([\w-]+)|([\w-]+), ?([a-zA-Z\d ()%#.,-]+))\)/u;function AV(n){const e=TV.exec(n);if(!e)return[,];const[,t,i,r]=e;return[`--${t??i}`,r]}function cI(n,e,t=1){const[i,r]=AV(n);if(!i)return;const s=window.getComputedStyle(e).getPropertyValue(i);if(s){const o=s.trim();return RD(o)?parseFloat(o):o}return pE(r)?cI(r,e,t+1):r}const CV={type:"spring",stiffness:500,damping:25,restSpeed:10},RV=n=>({type:"spring",stiffness:550,damping:n===0?2*Math.sqrt(550):30,restSpeed:10}),NV={type:"keyframes",duration:.8},DV={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},IV=(n,{keyframes:e})=>e.length>2?NV:Zp.has(n)?n.startsWith("scale")?RV(e[1]):CV:DV,PV=n=>n!==null;function OV(n,{repeat:e,repeatType:t="loop"},i){const r=n.filter(PV),s=e&&t!=="loop"&&e%2===1?0:r.length-1;return r[s]}function wE(n,e){return n?.[e]??n?.default??n}function LV({when:n,delay:e,delayChildren:t,staggerChildren:i,staggerDirection:r,repeat:s,repeatType:o,repeatDelay:u,from:f,elapsed:p,...m}){return!!Object.keys(m).length}const ME=(n,e,t,i={},r,s)=>o=>{const u=wE(i,n)||{},f=u.delay||i.delay||0;let{elapsed:p=0}=i;p=p-Cc(f);const m={keyframes:Array.isArray(t)?t:[null,t],ease:"easeOut",velocity:e.getVelocity(),...u,delay:-p,onUpdate:_=>{e.set(_),u.onUpdate&&u.onUpdate(_)},onComplete:()=>{o(),u.onComplete&&u.onComplete()},name:n,motionValue:e,element:s?void 0:r};LV(u)||Object.assign(m,IV(n,m)),m.duration&&(m.duration=Cc(m.duration)),m.repeatDelay&&(m.repeatDelay=Cc(m.repeatDelay)),m.from!==void 0&&(m.keyframes[0]=m.from);let v=!1;if((m.type===!1||m.duration===0&&!m.repeatDelay)&&(cM(m),m.delay===0&&(v=!0)),(Ic.instantAnimations||Ic.skipAnimations)&&(v=!0,cM(m),m.delay=0),m.allowFlatten=!u.type&&!u.ease,v&&!s&&e.get()!==void 0){const _=OV(m.keyframes,u);if(_!==void 0){Di.update(()=>{m.onUpdate(_),m.onComplete()});return}}return u.isSync?new bE(m):new EV(m)};function IC(n){const e=[{},{}];return n?.values.forEach((t,i)=>{e[0][i]=t.get(),e[1][i]=t.getVelocity()}),e}function EE(n,e,t,i){if(typeof e=="function"){const[r,s]=IC(i);e=e(t!==void 0?t:n.custom,r,s)}if(typeof e=="string"&&(e=n.variants&&n.variants[e]),typeof e=="function"){const[r,s]=IC(i);e=e(t!==void 0?t:n.custom,r,s)}return e}function Cp(n,e,t){const i=n.getProps();return EE(i,e,t!==void 0?t:i.custom,n)}const uI=new Set(["width","height","top","left","right","bottom",...Yp]),PC=30,UV=n=>!isNaN(parseFloat(n));class kV{constructor(e,t={}){this.canTrackVelocity=null,this.events={},this.updateAndNotify=i=>{const r=zs.now();if(this.updatedAt!==r&&this.setPrevFrameValue(),this.prev=this.current,this.setCurrent(i),this.current!==this.prev&&(this.events.change?.notify(this.current),this.dependents))for(const s of this.dependents)s.dirty()},this.hasAnimated=!1,this.setCurrent(e),this.owner=t.owner}setCurrent(e){this.current=e,this.updatedAt=zs.now(),this.canTrackVelocity===null&&e!==void 0&&(this.canTrackVelocity=UV(this.current))}setPrevFrameValue(e=this.current){this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt}onChange(e){return this.on("change",e)}on(e,t){this.events[e]||(this.events[e]=new hE);const i=this.events[e].add(t);return e==="change"?()=>{i(),Di.read(()=>{this.events.change.getSize()||this.stop()})}:i}clearListeners(){for(const e in this.events)this.events[e].clear()}attach(e,t){this.passiveEffect=e,this.stopPassiveEffect=t}set(e){this.passiveEffect?this.passiveEffect(e,this.updateAndNotify):this.updateAndNotify(e)}setWithVelocity(e,t,i){this.set(t),this.prev=void 0,this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt-i}jump(e,t=!0){this.updateAndNotify(e),this.prev=e,this.prevUpdatedAt=this.prevFrameValue=void 0,t&&this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}dirty(){this.events.change?.notify(this.current)}addDependent(e){this.dependents||(this.dependents=new Set),this.dependents.add(e)}removeDependent(e){this.dependents&&this.dependents.delete(e)}get(){return this.current}getPrevious(){return this.prev}getVelocity(){const e=zs.now();if(!this.canTrackVelocity||this.prevFrameValue===void 0||e-this.updatedAt>PC)return 0;const t=Math.min(this.updatedAt-this.prevUpdatedAt,PC);return ID(parseFloat(this.current)-parseFloat(this.prevFrameValue),t)}start(e){return this.stop(),new Promise(t=>{this.hasAnimated=!0,this.animation=e(t),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){this.dependents?.clear(),this.events.destroy?.notify(),this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function Ip(n,e){return new kV(n,e)}const uM=n=>Array.isArray(n);function BV(n,e,t){n.hasValue(e)?n.getValue(e).set(t):n.addValue(e,Ip(t))}function zV(n){return uM(n)?n[n.length-1]||0:n}function FV(n,e){const t=Cp(n,e);let{transitionEnd:i={},transition:r={},...s}=t||{};s={...s,...i};for(const o in s){const u=zV(s[o]);BV(n,o,u)}}const xs=n=>!!(n&&n.getVelocity);function VV(n){return!!(xs(n)&&n.add)}function hM(n,e){const t=n.getValue("willChange");if(VV(t))return t.add(e);if(!t&&Ic.WillChange){const i=new Ic.WillChange("auto");n.addValue("willChange",i),i.add(e)}}function TE(n){return n.replace(/([A-Z])/g,e=>`-${e.toLowerCase()}`)}const HV="framerAppearId",hI="data-"+TE(HV);function fI(n){return n.props[hI]}function GV({protectedKeys:n,needsAnimating:e},t){const i=n.hasOwnProperty(t)&&e[t]!==!0;return e[t]=!1,i}function dI(n,e,{delay:t=0,transitionOverride:i,type:r}={}){let{transition:s=n.getDefaultTransition(),transitionEnd:o,...u}=e;const f=s?.reduceMotion;i&&(s=i);const p=[],m=r&&n.animationState&&n.animationState.getState()[r];for(const v in u){const _=n.getValue(v,n.latestValues[v]??null),x=u[v];if(x===void 0||m&&GV(m,v))continue;const S={delay:t,...wE(s||{},v)},A=_.get();if(A!==void 0&&!_.isAnimating&&!Array.isArray(x)&&x===A&&!S.velocity)continue;let E=!1;if(window.MotionHandoffAnimation){const N=fI(n);if(N){const I=window.MotionHandoffAnimation(N,v,Di);I!==null&&(S.startTime=I,E=!0)}}hM(n,v);const M=f??n.shouldReduceMotion;_.start(ME(v,_,x,M&&uI.has(v)?{type:!1}:S,n,E));const C=_.animation;C&&p.push(C)}return o&&Promise.all(p).then(()=>{Di.update(()=>{o&&FV(n,o)})}),p}function fM(n,e,t={}){const i=Cp(n,e,t.type==="exit"?n.presenceContext?.custom:void 0);let{transition:r=n.getDefaultTransition()||{}}=i||{};t.transitionOverride&&(r=t.transitionOverride);const s=i?()=>Promise.all(dI(n,i,t)):()=>Promise.resolve(),o=n.variantChildren&&n.variantChildren.size?(f=0)=>{const{delayChildren:p=0,staggerChildren:m,staggerDirection:v}=r;return jV(n,e,f,p,m,v,t)}:()=>Promise.resolve(),{when:u}=r;if(u){const[f,p]=u==="beforeChildren"?[s,o]:[o,s];return f().then(()=>p())}else return Promise.all([s(),o(t.delay)])}function jV(n,e,t=0,i=0,r=0,s=1,o){const u=[];for(const f of n.variantChildren)f.notify("AnimationStart",e),u.push(fM(f,e,{...o,delay:t+(typeof i=="function"?0:i)+lI(n.variantChildren,f,i,r,s)}).then(()=>f.notify("AnimationComplete",e)));return Promise.all(u)}function WV(n,e,t={}){n.notify("AnimationStart",e);let i;if(Array.isArray(e)){const r=e.map(s=>fM(n,s,t));i=Promise.all(r)}else if(typeof e=="string")i=fM(n,e,t);else{const r=typeof e=="function"?Cp(n,e,t.custom):e;i=Promise.all(dI(n,r,t))}return i.then(()=>{n.notify("AnimationComplete",e)})}const qV={test:n=>n==="auto",parse:n=>n},pI=n=>e=>e.test(n),mI=[$p,zt,Ul,Ou,_5,y5,qV],OC=n=>mI.find(pI(n));function XV(n){return typeof n=="number"?n===0:n!==null?n==="none"||n==="0"||DD(n):!0}const $V=new Set(["brightness","contrast","saturate","opacity"]);function YV(n){const[e,t]=n.slice(0,-1).split("(");if(e==="drop-shadow")return n;const[i]=t.match(mE)||[];if(!i)return n;const r=t.replace(i,"");let s=$V.has(e)?1:0;return i!==t&&(s*=100),e+"("+s+r+")"}const ZV=/\b([a-z-]*)\(.*?\)/gu,dM={...Wu,getAnimatableNone:n=>{const e=n.match(ZV);return e?e.map(YV).join(" "):n}},LC={...$p,transform:Math.round},KV={rotate:Ou,rotateX:Ou,rotateY:Ou,rotateZ:Ou,scale:u_,scaleX:u_,scaleY:u_,scaleZ:u_,skew:Ou,skewX:Ou,skewY:Ou,distance:zt,translateX:zt,translateY:zt,translateZ:zt,x:zt,y:zt,z:zt,perspective:zt,transformPerspective:zt,opacity:T0,originX:bC,originY:bC,originZ:zt},AE={borderWidth:zt,borderTopWidth:zt,borderRightWidth:zt,borderBottomWidth:zt,borderLeftWidth:zt,borderRadius:zt,borderTopLeftRadius:zt,borderTopRightRadius:zt,borderBottomRightRadius:zt,borderBottomLeftRadius:zt,width:zt,maxWidth:zt,height:zt,maxHeight:zt,top:zt,right:zt,bottom:zt,left:zt,inset:zt,insetBlock:zt,insetBlockStart:zt,insetBlockEnd:zt,insetInline:zt,insetInlineStart:zt,insetInlineEnd:zt,padding:zt,paddingTop:zt,paddingRight:zt,paddingBottom:zt,paddingLeft:zt,paddingBlock:zt,paddingBlockStart:zt,paddingBlockEnd:zt,paddingInline:zt,paddingInlineStart:zt,paddingInlineEnd:zt,margin:zt,marginTop:zt,marginRight:zt,marginBottom:zt,marginLeft:zt,marginBlock:zt,marginBlockStart:zt,marginBlockEnd:zt,marginInline:zt,marginInlineStart:zt,marginInlineEnd:zt,fontSize:zt,backgroundPositionX:zt,backgroundPositionY:zt,...KV,zIndex:LC,fillOpacity:T0,strokeOpacity:T0,numOctaves:LC},JV={...AE,color:Er,backgroundColor:Er,outlineColor:Er,fill:Er,stroke:Er,borderColor:Er,borderTopColor:Er,borderRightColor:Er,borderBottomColor:Er,borderLeftColor:Er,filter:dM,WebkitFilter:dM},gI=n=>JV[n];function vI(n,e){let t=gI(n);return t!==dM&&(t=Wu),t.getAnimatableNone?t.getAnimatableNone(e):void 0}const QV=new Set(["auto","none","0"]);function e6(n,e,t){let i=0,r;for(;i<n.length&&!r;){const s=n[i];typeof s=="string"&&!QV.has(s)&&A0(s).values.length&&(r=n[i]),i++}if(r&&t)for(const s of e)n[s]=vI(t,r)}class t6 extends SE{constructor(e,t,i,r,s){super(e,t,i,r,s,!0)}readKeyframes(){const{unresolvedKeyframes:e,element:t,name:i}=this;if(!t||!t.current)return;super.readKeyframes();for(let m=0;m<e.length;m++){let v=e[m];if(typeof v=="string"&&(v=v.trim(),pE(v))){const _=cI(v,t.current);_!==void 0&&(e[m]=_),m===e.length-1&&(this.finalKeyframe=v)}}if(this.resolveNoneKeyframes(),!uI.has(i)||e.length!==2)return;const[r,s]=e,o=OC(r),u=OC(s),f=xC(r),p=xC(s);if(f!==p&&zu[i]){this.needsMeasurement=!0;return}if(o!==u)if(RC(o)&&RC(u))for(let m=0;m<e.length;m++){const v=e[m];typeof v=="string"&&(e[m]=parseFloat(v))}else zu[i]&&(this.needsMeasurement=!0)}resolveNoneKeyframes(){const{unresolvedKeyframes:e,name:t}=this,i=[];for(let r=0;r<e.length;r++)(e[r]===null||XV(e[r]))&&i.push(r);i.length&&e6(e,i,t)}measureInitialState(){const{element:e,unresolvedKeyframes:t,name:i}=this;if(!e||!e.current)return;i==="height"&&(this.suspendedScrollY=window.pageYOffset),this.measuredOrigin=zu[i](e.measureViewportBox(),window.getComputedStyle(e.current)),t[0]=this.measuredOrigin;const r=t[t.length-1];r!==void 0&&e.getValue(i,r).jump(r,!1)}measureEndState(){const{element:e,name:t,unresolvedKeyframes:i}=this;if(!e||!e.current)return;const r=e.getValue(t);r&&r.jump(this.measuredOrigin,!1);const s=i.length-1,o=i[s];i[s]=zu[t](e.measureViewportBox(),window.getComputedStyle(e.current)),o!==null&&this.finalKeyframe===void 0&&(this.finalKeyframe=o),this.removedTransforms?.length&&this.removedTransforms.forEach(([u,f])=>{e.getValue(u).set(f)}),this.resolveNoneKeyframes()}}function n6(n,e,t){if(n==null)return[];if(n instanceof EventTarget)return[n];if(typeof n=="string"){let i=document;const r=t?.[n]??i.querySelectorAll(n);return r?Array.from(r):[]}return Array.from(n).filter(i=>i!=null)}const yI=(n,e)=>e&&typeof n=="number"?e.transform(n):n;function i6(n){return ND(n)&&"offsetHeight"in n}const{schedule:CE}=GD(queueMicrotask,!1),Fo={x:!1,y:!1};function _I(){return Fo.x||Fo.y}function r6(n){return n==="x"||n==="y"?Fo[n]?null:(Fo[n]=!0,()=>{Fo[n]=!1}):Fo.x||Fo.y?null:(Fo.x=Fo.y=!0,()=>{Fo.x=Fo.y=!1})}function xI(n,e){const t=n6(n),i=new AbortController,r={passive:!0,...e,signal:i.signal};return[t,r,()=>i.abort()]}function UC(n){return!(n.pointerType==="touch"||_I())}function s6(n,e,t={}){const[i,r,s]=xI(n,t),o=u=>{if(!UC(u))return;const{target:f}=u,p=e(f,u);if(typeof p!="function"||!f)return;const m=v=>{UC(v)&&(p(v),f.removeEventListener("pointerleave",m))};f.addEventListener("pointerleave",m,r)};return i.forEach(u=>{u.addEventListener("pointerenter",o,r)}),s}const bI=(n,e)=>e?n===e?!0:bI(n,e.parentElement):!1,RE=n=>n.pointerType==="mouse"?typeof n.button!="number"||n.button<=0:n.isPrimary!==!1,a6=new Set(["BUTTON","INPUT","SELECT","TEXTAREA","A"]);function SI(n){return a6.has(n.tagName)||n.isContentEditable===!0}const cx=new WeakSet;function kC(n){return e=>{e.key==="Enter"&&n(e)}}function A1(n,e){n.dispatchEvent(new PointerEvent("pointer"+e,{isPrimary:!0,bubbles:!0}))}const o6=(n,e)=>{const t=n.currentTarget;if(!t)return;const i=kC(()=>{if(cx.has(t))return;A1(t,"down");const r=kC(()=>{A1(t,"up")}),s=()=>A1(t,"cancel");t.addEventListener("keyup",r,e),t.addEventListener("blur",s,e)});t.addEventListener("keydown",i,e),t.addEventListener("blur",()=>t.removeEventListener("keydown",i),e)};function BC(n){return RE(n)&&!_I()}function l6(n,e,t={}){const[i,r,s]=xI(n,t),o=u=>{const f=u.currentTarget;if(!BC(u))return;cx.add(f);const p=e(f,u),m=(x,S)=>{window.removeEventListener("pointerup",v),window.removeEventListener("pointercancel",_),cx.has(f)&&cx.delete(f),BC(x)&&typeof p=="function"&&p(x,{success:S})},v=x=>{m(x,f===window||f===document||t.useGlobalTarget||bI(f,x.target))},_=x=>{m(x,!1)};window.addEventListener("pointerup",v,r),window.addEventListener("pointercancel",_,r)};return i.forEach(u=>{(t.useGlobalTarget?window:u).addEventListener("pointerdown",o,r),i6(u)&&(u.addEventListener("focus",p=>o6(p,r)),!SI(u)&&!u.hasAttribute("tabindex")&&(u.tabIndex=0))}),s}function wI(n){return ND(n)&&"ownerSVGElement"in n}function c6(n){return wI(n)&&n.tagName==="svg"}const u6=[...mI,Er,Wu],h6=n=>u6.find(pI(n)),zC=()=>({translate:0,scale:1,origin:0,originPoint:0}),xp=()=>({x:zC(),y:zC()}),FC=()=>({min:0,max:0}),Ir=()=>({x:FC(),y:FC()}),pM={current:null},MI={current:!1},f6=typeof window<"u";function d6(){if(MI.current=!0,!!f6)if(window.matchMedia){const n=window.matchMedia("(prefers-reduced-motion)"),e=()=>pM.current=n.matches;n.addEventListener("change",e),e()}else pM.current=!1}const p6=new WeakMap;function Ob(n){return n!==null&&typeof n=="object"&&typeof n.start=="function"}function C0(n){return typeof n=="string"||Array.isArray(n)}const NE=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],DE=["initial",...NE];function Lb(n){return Ob(n.animate)||DE.some(e=>C0(n[e]))}function EI(n){return!!(Lb(n)||n.variants)}function m6(n,e,t){for(const i in e){const r=e[i],s=t[i];if(xs(r))n.addValue(i,r);else if(xs(s))n.addValue(i,Ip(r,{owner:n}));else if(s!==r)if(n.hasValue(i)){const o=n.getValue(i);o.liveStyle===!0?o.jump(r):o.hasAnimated||o.set(r)}else{const o=n.getStaticValue(i);n.addValue(i,Ip(o!==void 0?o:r,{owner:n}))}}for(const i in t)e[i]===void 0&&n.removeValue(i);return e}const VC=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"];let wx={};function TI(n){wx=n}function g6(){return wx}class v6{scrapeMotionValuesFromProps(e,t,i){return{}}constructor({parent:e,props:t,presenceContext:i,reducedMotionConfig:r,blockInitialAnimation:s,visualState:o},u={}){this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.KeyframeResolver=SE,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.renderScheduledAt=0,this.scheduleRender=()=>{const _=zs.now();this.renderScheduledAt<_&&(this.renderScheduledAt=_,Di.render(this.render,!1,!0))};const{latestValues:f,renderState:p}=o;this.latestValues=f,this.baseTarget={...f},this.initialValues=t.initial?{...f}:{},this.renderState=p,this.parent=e,this.props=t,this.presenceContext=i,this.depth=e?e.depth+1:0,this.reducedMotionConfig=r,this.options=u,this.blockInitialAnimation=!!s,this.isControllingVariants=Lb(t),this.isVariantNode=EI(t),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=!!(e&&e.current);const{willChange:m,...v}=this.scrapeMotionValuesFromProps(t,{},this);for(const _ in v){const x=v[_];f[_]!==void 0&&xs(x)&&x.set(f[_])}}mount(e){this.current=e,p6.set(e,this),this.projection&&!this.projection.instance&&this.projection.mount(e),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((t,i)=>this.bindToMotionValue(i,t)),this.reducedMotionConfig==="never"?this.shouldReduceMotion=!1:this.reducedMotionConfig==="always"?this.shouldReduceMotion=!0:(MI.current||d6(),this.shouldReduceMotion=pM.current),this.parent?.addChild(this),this.update(this.props,this.presenceContext)}unmount(){this.projection&&this.projection.unmount(),ju(this.notifyUpdate),ju(this.render),this.valueSubscriptions.forEach(e=>e()),this.valueSubscriptions.clear(),this.removeFromVariantTree&&this.removeFromVariantTree(),this.parent?.removeChild(this);for(const e in this.events)this.events[e].clear();for(const e in this.features){const t=this.features[e];t&&(t.unmount(),t.isMounted=!1)}this.current=null}addChild(e){this.children.add(e),this.enteringChildren??(this.enteringChildren=new Set),this.enteringChildren.add(e)}removeChild(e){this.children.delete(e),this.enteringChildren&&this.enteringChildren.delete(e)}bindToMotionValue(e,t){this.valueSubscriptions.has(e)&&this.valueSubscriptions.get(e)();const i=Zp.has(e);i&&this.onBindTransform&&this.onBindTransform();const r=t.on("change",o=>{this.latestValues[e]=o,this.props.onUpdate&&Di.preRender(this.notifyUpdate),i&&this.projection&&(this.projection.isTransformDirty=!0),this.scheduleRender()});let s;typeof window<"u"&&window.MotionCheckAppearSync&&(s=window.MotionCheckAppearSync(this,e,t)),this.valueSubscriptions.set(e,()=>{r(),s&&s(),t.owner&&t.stop()})}sortNodePosition(e){return!this.current||!this.sortInstanceNodePosition||this.type!==e.type?0:this.sortInstanceNodePosition(this.current,e.current)}updateFeatures(){let e="animation";for(e in wx){const t=wx[e];if(!t)continue;const{isEnabled:i,Feature:r}=t;if(!this.features[e]&&r&&i(this.props)&&(this.features[e]=new r(this)),this.features[e]){const s=this.features[e];s.isMounted?s.update():(s.mount(),s.isMounted=!0)}}}triggerBuild(){this.build(this.renderState,this.latestValues,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):Ir()}getStaticValue(e){return this.latestValues[e]}setStaticValue(e,t){this.latestValues[e]=t}update(e,t){(e.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=e,this.prevPresenceContext=this.presenceContext,this.presenceContext=t;for(let i=0;i<VC.length;i++){const r=VC[i];this.propEventSubscriptions[r]&&(this.propEventSubscriptions[r](),delete this.propEventSubscriptions[r]);const s="on"+r,o=e[s];o&&(this.propEventSubscriptions[r]=this.on(r,o))}this.prevMotionValues=m6(this,this.scrapeMotionValuesFromProps(e,this.prevProps||{},this),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue()}getProps(){return this.props}getVariant(e){return this.props.variants?this.props.variants[e]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}addVariantChild(e){const t=this.getClosestVariantNode();if(t)return t.variantChildren&&t.variantChildren.add(e),()=>t.variantChildren.delete(e)}addValue(e,t){const i=this.values.get(e);t!==i&&(i&&this.removeValue(e),this.bindToMotionValue(e,t),this.values.set(e,t),this.latestValues[e]=t.get())}removeValue(e){this.values.delete(e);const t=this.valueSubscriptions.get(e);t&&(t(),this.valueSubscriptions.delete(e)),delete this.latestValues[e],this.removeValueFromRenderState(e,this.renderState)}hasValue(e){return this.values.has(e)}getValue(e,t){if(this.props.values&&this.props.values[e])return this.props.values[e];let i=this.values.get(e);return i===void 0&&t!==void 0&&(i=Ip(t===null?void 0:t,{owner:this}),this.addValue(e,i)),i}readValue(e,t){let i=this.latestValues[e]!==void 0||!this.current?this.latestValues[e]:this.getBaseTargetFromProps(this.props,e)??this.readValueFromInstance(this.current,e,this.options);return i!=null&&(typeof i=="string"&&(RD(i)||DD(i))?i=parseFloat(i):!h6(i)&&Wu.test(t)&&(i=vI(e,t)),this.setBaseTarget(e,xs(i)?i.get():i)),xs(i)?i.get():i}setBaseTarget(e,t){this.baseTarget[e]=t}getBaseTarget(e){const{initial:t}=this.props;let i;if(typeof t=="string"||typeof t=="object"){const s=EE(this.props,t,this.presenceContext?.custom);s&&(i=s[e])}if(t&&i!==void 0)return i;const r=this.getBaseTargetFromProps(this.props,e);return r!==void 0&&!xs(r)?r:this.initialValues[e]!==void 0&&i===void 0?void 0:this.baseTarget[e]}on(e,t){return this.events[e]||(this.events[e]=new hE),this.events[e].add(t)}notify(e,...t){this.events[e]&&this.events[e].notify(...t)}scheduleRenderMicrotask(){CE.render(this.render)}}class AI extends v6{constructor(){super(...arguments),this.KeyframeResolver=t6}sortInstanceNodePosition(e,t){return e.compareDocumentPosition(t)&2?1:-1}getBaseTargetFromProps(e,t){const i=e.style;return i?i[t]:void 0}removeValueFromRenderState(e,{vars:t,style:i}){delete t[e],delete i[e]}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:e}=this.props;xs(e)&&(this.childSubscription=e.on("change",t=>{this.current&&(this.current.textContent=`${t}`)}))}}class Zu{constructor(e){this.isMounted=!1,this.node=e}update(){}}function CI({top:n,left:e,right:t,bottom:i}){return{x:{min:e,max:t},y:{min:n,max:i}}}function y6({x:n,y:e}){return{top:e.min,right:n.max,bottom:e.max,left:n.min}}function _6(n,e){if(!e)return n;const t=e({x:n.left,y:n.top}),i=e({x:n.right,y:n.bottom});return{top:t.y,left:t.x,bottom:i.y,right:i.x}}function C1(n){return n===void 0||n===1}function mM({scale:n,scaleX:e,scaleY:t}){return!C1(n)||!C1(e)||!C1(t)}function sf(n){return mM(n)||RI(n)||n.z||n.rotate||n.rotateX||n.rotateY||n.skewX||n.skewY}function RI(n){return HC(n.x)||HC(n.y)}function HC(n){return n&&n!=="0%"}function Mx(n,e,t){const i=n-t,r=e*i;return t+r}function GC(n,e,t,i,r){return r!==void 0&&(n=Mx(n,r,i)),Mx(n,t,i)+e}function gM(n,e=0,t=1,i,r){n.min=GC(n.min,e,t,i,r),n.max=GC(n.max,e,t,i,r)}function NI(n,{x:e,y:t}){gM(n.x,e.translate,e.scale,e.originPoint),gM(n.y,t.translate,t.scale,t.originPoint)}const jC=.999999999999,WC=1.0000000000001;function x6(n,e,t,i=!1){const r=t.length;if(!r)return;e.x=e.y=1;let s,o;for(let u=0;u<r;u++){s=t[u],o=s.projectionDelta;const{visualElement:f}=s.options;f&&f.props.style&&f.props.style.display==="contents"||(i&&s.options.layoutScroll&&s.scroll&&s!==s.root&&Sp(n,{x:-s.scroll.offset.x,y:-s.scroll.offset.y}),o&&(e.x*=o.x.scale,e.y*=o.y.scale,NI(n,o)),i&&sf(s.latestValues)&&Sp(n,s.latestValues))}e.x<WC&&e.x>jC&&(e.x=1),e.y<WC&&e.y>jC&&(e.y=1)}function bp(n,e){n.min=n.min+e,n.max=n.max+e}function qC(n,e,t,i,r=.5){const s=ji(n.min,n.max,r);gM(n,e,t,s,i)}function Sp(n,e){qC(n.x,e.x,e.scaleX,e.scale,e.originX),qC(n.y,e.y,e.scaleY,e.scale,e.originY)}function DI(n,e){return CI(_6(n.getBoundingClientRect(),e))}function b6(n,e,t){const i=DI(n,t),{scroll:r}=e;return r&&(bp(i.x,r.offset.x),bp(i.y,r.offset.y)),i}const S6={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},w6=Yp.length;function M6(n,e,t){let i="",r=!0;for(let s=0;s<w6;s++){const o=Yp[s],u=n[o];if(u===void 0)continue;let f=!0;if(typeof u=="number")f=u===(o.startsWith("scale")?1:0);else{const p=parseFloat(u);f=o.startsWith("scale")?p===1:p===0}if(!f||t){const p=yI(u,AE[o]);if(!f){r=!1;const m=S6[o]||o;i+=`${m}(${p}) `}t&&(e[o]=p)}}return i=i.trim(),t?i=t(e,r?"":i):r&&(i="none"),i}function IE(n,e,t){const{style:i,vars:r,transformOrigin:s}=n;let o=!1,u=!1;for(const f in e){const p=e[f];if(Zp.has(f)){o=!0;continue}else if(WD(f)){r[f]=p;continue}else{const m=yI(p,AE[f]);f.startsWith("origin")?(u=!0,s[f]=m):i[f]=m}}if(e.transform||(o||t?i.transform=M6(e,n.transform,t):i.transform&&(i.transform="none")),u){const{originX:f="50%",originY:p="50%",originZ:m=0}=s;i.transformOrigin=`${f} ${p} ${m}`}}function II(n,{style:e,vars:t},i,r){const s=n.style;let o;for(o in e)s[o]=e[o];r?.applyProjectionStyles(s,i);for(o in t)s.setProperty(o,t[o])}function XC(n,e){return e.max===e.min?0:n/(e.max-e.min)*100}const Dg={correct:(n,e)=>{if(!e.target)return n;if(typeof n=="string")if(zt.test(n))n=parseFloat(n);else return n;const t=XC(n,e.target.x),i=XC(n,e.target.y);return`${t}% ${i}%`}},E6={correct:(n,{treeScale:e,projectionDelta:t})=>{const i=n,r=Wu.parse(n);if(r.length>5)return i;const s=Wu.createTransformer(n),o=typeof r[0]!="number"?1:0,u=t.x.scale*e.x,f=t.y.scale*e.y;r[0+o]/=u,r[1+o]/=f;const p=ji(u,f,.5);return typeof r[2+o]=="number"&&(r[2+o]/=p),typeof r[3+o]=="number"&&(r[3+o]/=p),s(r)}},vM={borderRadius:{...Dg,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:Dg,borderTopRightRadius:Dg,borderBottomLeftRadius:Dg,borderBottomRightRadius:Dg,boxShadow:E6};function PI(n,{layout:e,layoutId:t}){return Zp.has(n)||n.startsWith("origin")||(e||t!==void 0)&&(!!vM[n]||n==="opacity")}function PE(n,e,t){const i=n.style,r=e?.style,s={};if(!i)return s;for(const o in i)(xs(i[o])||r&&xs(r[o])||PI(o,n)||t?.getValue(o)?.liveStyle!==void 0)&&(s[o]=i[o]);return s}function T6(n){return window.getComputedStyle(n)}class A6 extends AI{constructor(){super(...arguments),this.type="html",this.renderInstance=II}readValueFromInstance(e,t){if(Zp.has(t))return this.projection?.isProjecting?rM(t):nV(e,t);{const i=T6(e),r=(WD(t)?i.getPropertyValue(t):i[t])||0;return typeof r=="string"?r.trim():r}}measureInstanceViewportBox(e,{transformPagePoint:t}){return DI(e,t)}build(e,t,i){IE(e,t,i.transformTemplate)}scrapeMotionValuesFromProps(e,t,i){return PE(e,t,i)}}const C6={offset:"stroke-dashoffset",array:"stroke-dasharray"},R6={offset:"strokeDashoffset",array:"strokeDasharray"};function N6(n,e,t=1,i=0,r=!0){n.pathLength=1;const s=r?C6:R6;n[s.offset]=`${-i}`,n[s.array]=`${e} ${t}`}const D6=["offsetDistance","offsetPath","offsetRotate","offsetAnchor"];function OI(n,{attrX:e,attrY:t,attrScale:i,pathLength:r,pathSpacing:s=1,pathOffset:o=0,...u},f,p,m){if(IE(n,u,p),f){n.style.viewBox&&(n.attrs.viewBox=n.style.viewBox);return}n.attrs=n.style,n.style={};const{attrs:v,style:_}=n;v.transform&&(_.transform=v.transform,delete v.transform),(_.transform||v.transformOrigin)&&(_.transformOrigin=v.transformOrigin??"50% 50%",delete v.transformOrigin),_.transform&&(_.transformBox=m?.transformBox??"fill-box",delete v.transformBox);for(const x of D6)v[x]!==void 0&&(_[x]=v[x],delete v[x]);e!==void 0&&(v.x=e),t!==void 0&&(v.y=t),i!==void 0&&(v.scale=i),r!==void 0&&N6(v,r,s,o,!1)}const LI=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]),UI=n=>typeof n=="string"&&n.toLowerCase()==="svg";function I6(n,e,t,i){II(n,e,void 0,i);for(const r in e.attrs)n.setAttribute(LI.has(r)?r:TE(r),e.attrs[r])}function kI(n,e,t){const i=PE(n,e,t);for(const r in n)if(xs(n[r])||xs(e[r])){const s=Yp.indexOf(r)!==-1?"attr"+r.charAt(0).toUpperCase()+r.substring(1):r;i[s]=n[r]}return i}class P6 extends AI{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1,this.measureInstanceViewportBox=Ir}getBaseTargetFromProps(e,t){return e[t]}readValueFromInstance(e,t){if(Zp.has(t)){const i=gI(t);return i&&i.default||0}return t=LI.has(t)?t:TE(t),e.getAttribute(t)}scrapeMotionValuesFromProps(e,t,i){return kI(e,t,i)}build(e,t,i){OI(e,t,this.isSVGTag,i.transformTemplate,i.style)}renderInstance(e,t,i,r){I6(e,t,i,r)}mount(e){this.isSVGTag=UI(e.tagName),super.mount(e)}}const O6=DE.length;function BI(n){if(!n)return;if(!n.isControllingVariants){const t=n.parent?BI(n.parent)||{}:{};return n.props.initial!==void 0&&(t.initial=n.props.initial),t}const e={};for(let t=0;t<O6;t++){const i=DE[t],r=n.props[i];(C0(r)||r===!1)&&(e[i]=r)}return e}function zI(n,e){if(!Array.isArray(e))return!1;const t=e.length;if(t!==n.length)return!1;for(let i=0;i<t;i++)if(e[i]!==n[i])return!1;return!0}const L6=[...NE].reverse(),U6=NE.length;function k6(n){return e=>Promise.all(e.map(({animation:t,options:i})=>WV(n,t,i)))}function B6(n){let e=k6(n),t=$C(),i=!0;const r=f=>(p,m)=>{const v=Cp(n,m,f==="exit"?n.presenceContext?.custom:void 0);if(v){const{transition:_,transitionEnd:x,...S}=v;p={...p,...S,...x}}return p};function s(f){e=f(n)}function o(f){const{props:p}=n,m=BI(n.parent)||{},v=[],_=new Set;let x={},S=1/0;for(let E=0;E<U6;E++){const M=L6[E],C=t[M],N=p[M]!==void 0?p[M]:m[M],I=C0(N),U=M===f?C.isActive:null;U===!1&&(S=E);let L=N===m[M]&&N!==p[M]&&I;if(L&&i&&n.manuallyAnimateOnMount&&(L=!1),C.protectedKeys={...x},!C.isActive&&U===null||!N&&!C.prevProp||Ob(N)||typeof N=="boolean")continue;const F=z6(C.prevProp,N);let H=F||M===f&&C.isActive&&!L&&I||E>S&&I,P=!1;const k=Array.isArray(N)?N:[N];let Y=k.reduce(r(M),{});U===!1&&(Y={});const{prevResolvedValues:ie={}}=C,te={...ie,...Y},le=Q=>{H=!0,_.has(Q)&&(P=!0,_.delete(Q)),C.needsAnimating[Q]=!0;const ve=n.getValue(Q);ve&&(ve.liveStyle=!1)};for(const Q in te){const ve=Y[Q],Te=ie[Q];if(x.hasOwnProperty(Q))continue;let we=!1;uM(ve)&&uM(Te)?we=!zI(ve,Te):we=ve!==Te,we?ve!=null?le(Q):_.add(Q):ve!==void 0&&_.has(Q)?le(Q):C.protectedKeys[Q]=!0}C.prevProp=N,C.prevResolvedValues=Y,C.isActive&&(x={...x,...Y}),i&&n.blockInitialAnimation&&(H=!1);const de=L&&F;H&&(!de||P)&&v.push(...k.map(Q=>{const ve={type:M};if(typeof Q=="string"&&i&&!de&&n.manuallyAnimateOnMount&&n.parent){const{parent:Te}=n,we=Cp(Te,Q);if(Te.enteringChildren&&we){const{delayChildren:X}=we.transition||{};ve.delay=lI(Te.enteringChildren,n,X)}}return{animation:Q,options:ve}}))}if(_.size){const E={};if(typeof p.initial!="boolean"){const M=Cp(n,Array.isArray(p.initial)?p.initial[0]:p.initial);M&&M.transition&&(E.transition=M.transition)}_.forEach(M=>{const C=n.getBaseTarget(M),N=n.getValue(M);N&&(N.liveStyle=!0),E[M]=C??null}),v.push({animation:E})}let A=!!v.length;return i&&(p.initial===!1||p.initial===p.animate)&&!n.manuallyAnimateOnMount&&(A=!1),i=!1,A?e(v):Promise.resolve()}function u(f,p){if(t[f].isActive===p)return Promise.resolve();n.variantChildren?.forEach(v=>v.animationState?.setActive(f,p)),t[f].isActive=p;const m=o(f);for(const v in t)t[v].protectedKeys={};return m}return{animateChanges:o,setActive:u,setAnimateFunction:s,getState:()=>t,reset:()=>{t=$C()}}}function z6(n,e){return typeof e=="string"?e!==n:Array.isArray(e)?!zI(e,n):!1}function Hh(n=!1){return{isActive:n,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function $C(){return{animate:Hh(!0),whileInView:Hh(),whileHover:Hh(),whileTap:Hh(),whileDrag:Hh(),whileFocus:Hh(),exit:Hh()}}function YC(n,e){n.min=e.min,n.max=e.max}function Po(n,e){YC(n.x,e.x),YC(n.y,e.y)}function ZC(n,e){n.translate=e.translate,n.scale=e.scale,n.originPoint=e.originPoint,n.origin=e.origin}const FI=1e-4,F6=1-FI,V6=1+FI,VI=.01,H6=0-VI,G6=0+VI;function Fs(n){return n.max-n.min}function j6(n,e,t){return Math.abs(n-e)<=t}function KC(n,e,t,i=.5){n.origin=i,n.originPoint=ji(e.min,e.max,n.origin),n.scale=Fs(t)/Fs(e),n.translate=ji(t.min,t.max,n.origin)-n.originPoint,(n.scale>=F6&&n.scale<=V6||isNaN(n.scale))&&(n.scale=1),(n.translate>=H6&&n.translate<=G6||isNaN(n.translate))&&(n.translate=0)}function r0(n,e,t,i){KC(n.x,e.x,t.x,i?i.originX:void 0),KC(n.y,e.y,t.y,i?i.originY:void 0)}function JC(n,e,t){n.min=t.min+e.min,n.max=n.min+Fs(e)}function W6(n,e,t){JC(n.x,e.x,t.x),JC(n.y,e.y,t.y)}function QC(n,e,t){n.min=e.min-t.min,n.max=n.min+Fs(e)}function Ex(n,e,t){QC(n.x,e.x,t.x),QC(n.y,e.y,t.y)}function eR(n,e,t,i,r){return n-=e,n=Mx(n,1/t,i),r!==void 0&&(n=Mx(n,1/r,i)),n}function q6(n,e=0,t=1,i=.5,r,s=n,o=n){if(Ul.test(e)&&(e=parseFloat(e),e=ji(o.min,o.max,e/100)-o.min),typeof e!="number")return;let u=ji(s.min,s.max,i);n===s&&(u-=e),n.min=eR(n.min,e,t,u,r),n.max=eR(n.max,e,t,u,r)}function tR(n,e,[t,i,r],s,o){q6(n,e[t],e[i],e[r],e.scale,s,o)}const X6=["x","scaleX","originX"],$6=["y","scaleY","originY"];function nR(n,e,t,i){tR(n.x,e,X6,t?t.x:void 0,i?i.x:void 0),tR(n.y,e,$6,t?t.y:void 0,i?i.y:void 0)}function iR(n){return n.translate===0&&n.scale===1}function HI(n){return iR(n.x)&&iR(n.y)}function rR(n,e){return n.min===e.min&&n.max===e.max}function Y6(n,e){return rR(n.x,e.x)&&rR(n.y,e.y)}function sR(n,e){return Math.round(n.min)===Math.round(e.min)&&Math.round(n.max)===Math.round(e.max)}function GI(n,e){return sR(n.x,e.x)&&sR(n.y,e.y)}function aR(n){return Fs(n.x)/Fs(n.y)}function oR(n,e){return n.translate===e.translate&&n.scale===e.scale&&n.originPoint===e.originPoint}function io(n){return[n("x"),n("y")]}function Z6(n,e,t){let i="";const r=n.x.translate/e.x,s=n.y.translate/e.y,o=t?.z||0;if((r||s||o)&&(i=`translate3d(${r}px, ${s}px, ${o}px) `),(e.x!==1||e.y!==1)&&(i+=`scale(${1/e.x}, ${1/e.y}) `),t){const{transformPerspective:p,rotate:m,rotateX:v,rotateY:_,skewX:x,skewY:S}=t;p&&(i=`perspective(${p}px) ${i}`),m&&(i+=`rotate(${m}deg) `),v&&(i+=`rotateX(${v}deg) `),_&&(i+=`rotateY(${_}deg) `),x&&(i+=`skewX(${x}deg) `),S&&(i+=`skewY(${S}deg) `)}const u=n.x.scale*e.x,f=n.y.scale*e.y;return(u!==1||f!==1)&&(i+=`scale(${u}, ${f})`),i||"none"}const jI=["TopLeft","TopRight","BottomLeft","BottomRight"],K6=jI.length,lR=n=>typeof n=="string"?parseFloat(n):n,cR=n=>typeof n=="number"||zt.test(n);function J6(n,e,t,i,r,s){r?(n.opacity=ji(0,t.opacity??1,Q6(i)),n.opacityExit=ji(e.opacity??1,0,e8(i))):s&&(n.opacity=ji(e.opacity??1,t.opacity??1,i));for(let o=0;o<K6;o++){const u=`border${jI[o]}Radius`;let f=uR(e,u),p=uR(t,u);if(f===void 0&&p===void 0)continue;f||(f=0),p||(p=0),f===0||p===0||cR(f)===cR(p)?(n[u]=Math.max(ji(lR(f),lR(p),i),0),(Ul.test(p)||Ul.test(f))&&(n[u]+="%")):n[u]=p}(e.rotate||t.rotate)&&(n.rotate=ji(e.rotate||0,t.rotate||0,i))}function uR(n,e){return n[e]!==void 0?n[e]:n.borderRadius}const Q6=WI(0,.5,zD),e8=WI(.5,.95,oo);function WI(n,e,t){return i=>i<n?0:i>e?1:t(E0(n,e,i))}function t8(n,e,t){const i=xs(n)?n:Ip(n);return i.start(ME("",i,e,t)),i.animation}function R0(n,e,t,i={passive:!0}){return n.addEventListener(e,t,i),()=>n.removeEventListener(e,t)}const n8=(n,e)=>n.depth-e.depth;class i8{constructor(){this.children=[],this.isDirty=!1}add(e){oE(this.children,e),this.isDirty=!0}remove(e){lE(this.children,e),this.isDirty=!0}forEach(e){this.isDirty&&this.children.sort(n8),this.isDirty=!1,this.children.forEach(e)}}function r8(n,e){const t=zs.now(),i=({timestamp:r})=>{const s=r-t;s>=e&&(ju(i),n(s-e))};return Di.setup(i,!0),()=>ju(i)}function ux(n){return xs(n)?n.get():n}class s8{constructor(){this.members=[]}add(e){oE(this.members,e),e.scheduleRender()}remove(e){if(lE(this.members,e),e===this.prevLead&&(this.prevLead=void 0),e===this.lead){const t=this.members[this.members.length-1];t&&this.promote(t)}}relegate(e){const t=this.members.findIndex(r=>e===r);if(t===0)return!1;let i;for(let r=t;r>=0;r--){const s=this.members[r];if(s.isPresent!==!1){i=s;break}}return i?(this.promote(i),!0):!1}promote(e,t){const i=this.lead;if(e!==i&&(this.prevLead=i,this.lead=e,e.show(),i)){i.instance&&i.scheduleRender(),e.scheduleRender();const r=i.options.layoutDependency,s=e.options.layoutDependency;r!==void 0&&s!==void 0&&r===s||(e.resumeFrom=i,t&&(e.resumeFrom.preserveOpacity=!0),i.snapshot&&(e.snapshot=i.snapshot,e.snapshot.latestValues=i.animationValues||i.latestValues),e.root&&e.root.isUpdating&&(e.isLayoutDirty=!0));const{crossfade:u}=e.options;u===!1&&i.hide()}}exitAnimationComplete(){this.members.forEach(e=>{const{options:t,resumingFrom:i}=e;t.onExitComplete&&t.onExitComplete(),i&&i.options.onExitComplete&&i.options.onExitComplete()})}scheduleRender(){this.members.forEach(e=>{e.instance&&e.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}const hx={hasAnimatedSinceResize:!0,hasEverUpdated:!1},R1=["","X","Y","Z"],a8=1e3;let o8=0;function N1(n,e,t,i){const{latestValues:r}=e;r[n]&&(t[n]=r[n],e.setStaticValue(n,0),i&&(i[n]=0))}function qI(n){if(n.hasCheckedOptimisedAppear=!0,n.root===n)return;const{visualElement:e}=n.options;if(!e)return;const t=fI(e);if(window.MotionHasOptimisedAnimation(t,"transform")){const{layout:r,layoutId:s}=n.options;window.MotionCancelOptimisedAnimation(t,"transform",Di,!(r||s))}const{parent:i}=n;i&&!i.hasCheckedOptimisedAppear&&qI(i)}function XI({attachResizeListener:n,defaultParent:e,measureScroll:t,checkIsScrollRoot:i,resetTransform:r}){return class{constructor(o={},u=e?.()){this.id=o8++,this.animationId=0,this.animationCommitId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.hasCheckedOptimisedAppear=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.layoutVersion=0,this.updateScheduled=!1,this.scheduleUpdate=()=>this.update(),this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,this.nodes.forEach(u8),this.nodes.forEach(p8),this.nodes.forEach(m8),this.nodes.forEach(h8)},this.resolvedRelativeTargetAt=0,this.linkedParentVersion=0,this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=o,this.root=u?u.root||u:this,this.path=u?[...u.path,u]:[],this.parent=u,this.depth=u?u.depth+1:0;for(let f=0;f<this.path.length;f++)this.path[f].shouldResetTransform=!0;this.root===this&&(this.nodes=new i8)}addEventListener(o,u){return this.eventHandlers.has(o)||this.eventHandlers.set(o,new hE),this.eventHandlers.get(o).add(u)}notifyListeners(o,...u){const f=this.eventHandlers.get(o);f&&f.notify(...u)}hasListeners(o){return this.eventHandlers.has(o)}mount(o){if(this.instance)return;this.isSVG=wI(o)&&!c6(o),this.instance=o;const{layoutId:u,layout:f,visualElement:p}=this.options;if(p&&!p.current&&p.mount(o),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),this.root.hasTreeAnimated&&(f||u)&&(this.isLayoutDirty=!0),n){let m,v=0;const _=()=>this.root.updateBlockedByResize=!1;Di.read(()=>{v=window.innerWidth}),n(o,()=>{const x=window.innerWidth;x!==v&&(v=x,this.root.updateBlockedByResize=!0,m&&m(),m=r8(_,250),hx.hasAnimatedSinceResize&&(hx.hasAnimatedSinceResize=!1,this.nodes.forEach(dR)))})}u&&this.root.registerSharedNode(u,this),this.options.animate!==!1&&p&&(u||f)&&this.addEventListener("didUpdate",({delta:m,hasLayoutChanged:v,hasRelativeLayoutChanged:_,layout:x})=>{if(this.isTreeAnimationBlocked()){this.target=void 0,this.relativeTarget=void 0;return}const S=this.options.transition||p.getDefaultTransition()||x8,{onLayoutAnimationStart:A,onLayoutAnimationComplete:E}=p.getProps(),M=!this.targetLayout||!GI(this.targetLayout,x),C=!v&&_;if(this.options.layoutRoot||this.resumeFrom||C||v&&(M||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0);const N={...wE(S,"layout"),onPlay:A,onComplete:E};(p.shouldReduceMotion||this.options.layoutRoot)&&(N.delay=0,N.type=!1),this.startAnimation(N),this.setAnimationOrigin(m,C)}else v||dR(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=x})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const o=this.getStack();o&&o.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,this.eventHandlers.clear(),ju(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(g8),this.animationId++)}getTransformTemplate(){const{visualElement:o}=this.options;return o&&o.getProps().transformTemplate}willUpdate(o=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked()){this.options.onExitComplete&&this.options.onExitComplete();return}if(window.MotionCancelOptimisedAnimation&&!this.hasCheckedOptimisedAppear&&qI(this),!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let m=0;m<this.path.length;m++){const v=this.path[m];v.shouldResetTransform=!0,v.updateScroll("snapshot"),v.options.layoutRoot&&v.willUpdate(!1)}const{layoutId:u,layout:f}=this.options;if(u===void 0&&!f)return;const p=this.getTransformTemplate();this.prevTransformTemplateValue=p?p(this.latestValues,""):void 0,this.updateSnapshot(),o&&this.notifyListeners("willUpdate")}update(){if(this.updateScheduled=!1,this.isUpdateBlocked()){this.unblockUpdate(),this.clearAllSnapshots(),this.nodes.forEach(hR);return}if(this.animationId<=this.animationCommitId){this.nodes.forEach(fR);return}this.animationCommitId=this.animationId,this.isUpdating?(this.isUpdating=!1,this.nodes.forEach(d8),this.nodes.forEach(l8),this.nodes.forEach(c8)):this.nodes.forEach(fR),this.clearAllSnapshots();const u=zs.now();is.delta=kl(0,1e3/60,u-is.timestamp),is.timestamp=u,is.isProcessing=!0,b1.update.process(is),b1.preRender.process(is),b1.render.process(is),is.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,CE.read(this.scheduleUpdate))}clearAllSnapshots(){this.nodes.forEach(f8),this.sharedNodes.forEach(v8)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,Di.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){Di.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){this.snapshot||!this.instance||(this.snapshot=this.measure(),this.snapshot&&!Fs(this.snapshot.measuredBox.x)&&!Fs(this.snapshot.measuredBox.y)&&(this.snapshot=void 0))}updateLayout(){if(!this.instance||(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead())&&!this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let f=0;f<this.path.length;f++)this.path[f].updateScroll();const o=this.layout;this.layout=this.measure(!1),this.layoutVersion++,this.layoutCorrected=Ir(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:u}=this.options;u&&u.notify("LayoutMeasure",this.layout.layoutBox,o?o.layoutBox:void 0)}updateScroll(o="measure"){let u=!!(this.options.layoutScroll&&this.instance);if(this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===o&&(u=!1),u&&this.instance){const f=i(this.instance);this.scroll={animationId:this.root.animationId,phase:o,isRoot:f,offset:t(this.instance),wasRoot:this.scroll?this.scroll.isRoot:f}}}resetTransform(){if(!r)return;const o=this.isLayoutDirty||this.shouldResetTransform||this.options.alwaysMeasureLayout,u=this.projectionDelta&&!HI(this.projectionDelta),f=this.getTransformTemplate(),p=f?f(this.latestValues,""):void 0,m=p!==this.prevTransformTemplateValue;o&&this.instance&&(u||sf(this.latestValues)||m)&&(r(this.instance,p),this.shouldResetTransform=!1,this.scheduleRender())}measure(o=!0){const u=this.measurePageBox();let f=this.removeElementScroll(u);return o&&(f=this.removeTransform(f)),b8(f),{animationId:this.root.animationId,measuredBox:u,layoutBox:f,latestValues:{},source:this.id}}measurePageBox(){const{visualElement:o}=this.options;if(!o)return Ir();const u=o.measureViewportBox();if(!(this.scroll?.wasRoot||this.path.some(S8))){const{scroll:p}=this.root;p&&(bp(u.x,p.offset.x),bp(u.y,p.offset.y))}return u}removeElementScroll(o){const u=Ir();if(Po(u,o),this.scroll?.wasRoot)return u;for(let f=0;f<this.path.length;f++){const p=this.path[f],{scroll:m,options:v}=p;p!==this.root&&m&&v.layoutScroll&&(m.wasRoot&&Po(u,o),bp(u.x,m.offset.x),bp(u.y,m.offset.y))}return u}applyTransform(o,u=!1){const f=Ir();Po(f,o);for(let p=0;p<this.path.length;p++){const m=this.path[p];!u&&m.options.layoutScroll&&m.scroll&&m!==m.root&&Sp(f,{x:-m.scroll.offset.x,y:-m.scroll.offset.y}),sf(m.latestValues)&&Sp(f,m.latestValues)}return sf(this.latestValues)&&Sp(f,this.latestValues),f}removeTransform(o){const u=Ir();Po(u,o);for(let f=0;f<this.path.length;f++){const p=this.path[f];if(!p.instance||!sf(p.latestValues))continue;mM(p.latestValues)&&p.updateSnapshot();const m=Ir(),v=p.measurePageBox();Po(m,v),nR(u,p.latestValues,p.snapshot?p.snapshot.layoutBox:void 0,m)}return sf(this.latestValues)&&nR(u,this.latestValues),u}setTargetDelta(o){this.targetDelta=o,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(o){this.options={...this.options,...o,crossfade:o.crossfade!==void 0?o.crossfade:!0}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==is.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(o=!1){const u=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=u.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=u.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=u.isSharedProjectionDirty);const f=!!this.resumingFrom||this!==u;if(!(o||f&&this.isSharedProjectionDirty||this.isProjectionDirty||this.parent?.isProjectionDirty||this.attemptToResolveRelativeTarget||this.root.updateBlockedByResize))return;const{layout:m,layoutId:v}=this.options;if(!this.layout||!(m||v))return;this.resolvedRelativeTargetAt=is.timestamp;const _=this.getClosestProjectingParent();_&&this.linkedParentVersion!==_.layoutVersion&&!_.options.layoutRoot&&this.removeRelativeTarget(),!this.targetDelta&&!this.relativeTarget&&(_&&_.layout?this.createRelativeTarget(_,this.layout.layoutBox,_.layout.layoutBox):this.removeRelativeTarget()),!(!this.relativeTarget&&!this.targetDelta)&&(this.target||(this.target=Ir(),this.targetWithTransforms=Ir()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),W6(this.target,this.relativeTarget,this.relativeParent.target)):this.targetDelta?(this.resumingFrom?this.target=this.applyTransform(this.layout.layoutBox):Po(this.target,this.layout.layoutBox),NI(this.target,this.targetDelta)):Po(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget&&(this.attemptToResolveRelativeTarget=!1,_&&!!_.resumingFrom==!!this.resumingFrom&&!_.options.layoutScroll&&_.target&&this.animationProgress!==1?this.createRelativeTarget(_,this.target,_.target):this.relativeParent=this.relativeTarget=void 0))}getClosestProjectingParent(){if(!(!this.parent||mM(this.parent.latestValues)||RI(this.parent.latestValues)))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return!!((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}createRelativeTarget(o,u,f){this.relativeParent=o,this.linkedParentVersion=o.layoutVersion,this.forceRelativeParentToResolveTarget(),this.relativeTarget=Ir(),this.relativeTargetOrigin=Ir(),Ex(this.relativeTargetOrigin,u,f),Po(this.relativeTarget,this.relativeTargetOrigin)}removeRelativeTarget(){this.relativeParent=this.relativeTarget=void 0}calcProjection(){const o=this.getLead(),u=!!this.resumingFrom||this!==o;let f=!0;if((this.isProjectionDirty||this.parent?.isProjectionDirty)&&(f=!1),u&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(f=!1),this.resolvedRelativeTargetAt===is.timestamp&&(f=!1),f)return;const{layout:p,layoutId:m}=this.options;if(this.isTreeAnimating=!!(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!(p||m))return;Po(this.layoutCorrected,this.layout.layoutBox);const v=this.treeScale.x,_=this.treeScale.y;x6(this.layoutCorrected,this.treeScale,this.path,u),o.layout&&!o.target&&(this.treeScale.x!==1||this.treeScale.y!==1)&&(o.target=o.layout.layoutBox,o.targetWithTransforms=Ir());const{target:x}=o;if(!x){this.prevProjectionDelta&&(this.createProjectionDeltas(),this.scheduleRender());return}!this.projectionDelta||!this.prevProjectionDelta?this.createProjectionDeltas():(ZC(this.prevProjectionDelta.x,this.projectionDelta.x),ZC(this.prevProjectionDelta.y,this.projectionDelta.y)),r0(this.projectionDelta,this.layoutCorrected,x,this.latestValues),(this.treeScale.x!==v||this.treeScale.y!==_||!oR(this.projectionDelta.x,this.prevProjectionDelta.x)||!oR(this.projectionDelta.y,this.prevProjectionDelta.y))&&(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",x))}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(o=!0){if(this.options.visualElement?.scheduleRender(),o){const u=this.getStack();u&&u.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}createProjectionDeltas(){this.prevProjectionDelta=xp(),this.projectionDelta=xp(),this.projectionDeltaWithTransform=xp()}setAnimationOrigin(o,u=!1){const f=this.snapshot,p=f?f.latestValues:{},m={...this.latestValues},v=xp();(!this.relativeParent||!this.relativeParent.options.layoutRoot)&&(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!u;const _=Ir(),x=f?f.source:void 0,S=this.layout?this.layout.source:void 0,A=x!==S,E=this.getStack(),M=!E||E.members.length<=1,C=!!(A&&!M&&this.options.crossfade===!0&&!this.path.some(_8));this.animationProgress=0;let N;this.mixTargetDelta=I=>{const U=I/1e3;pR(v.x,o.x,U),pR(v.y,o.y,U),this.setTargetDelta(v),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(Ex(_,this.layout.layoutBox,this.relativeParent.layout.layoutBox),y8(this.relativeTarget,this.relativeTargetOrigin,_,U),N&&Y6(this.relativeTarget,N)&&(this.isProjectionDirty=!1),N||(N=Ir()),Po(N,this.relativeTarget)),A&&(this.animationValues=m,J6(m,p,this.latestValues,U,C,M)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=U},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(o){this.notifyListeners("animationStart"),this.currentAnimation?.stop(),this.resumingFrom?.currentAnimation?.stop(),this.pendingAnimation&&(ju(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=Di.update(()=>{hx.hasAnimatedSinceResize=!0,this.motionValue||(this.motionValue=Ip(0)),this.currentAnimation=t8(this.motionValue,[0,1e3],{...o,velocity:0,isSync:!0,onUpdate:u=>{this.mixTargetDelta(u),o.onUpdate&&o.onUpdate(u)},onStop:()=>{},onComplete:()=>{o.onComplete&&o.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const o=this.getStack();o&&o.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(a8),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const o=this.getLead();let{targetWithTransforms:u,target:f,layout:p,latestValues:m}=o;if(!(!u||!f||!p)){if(this!==o&&this.layout&&p&&$I(this.options.animationType,this.layout.layoutBox,p.layoutBox)){f=this.target||Ir();const v=Fs(this.layout.layoutBox.x);f.x.min=o.target.x.min,f.x.max=f.x.min+v;const _=Fs(this.layout.layoutBox.y);f.y.min=o.target.y.min,f.y.max=f.y.min+_}Po(u,f),Sp(u,m),r0(this.projectionDeltaWithTransform,this.layoutCorrected,u,m)}}registerSharedNode(o,u){this.sharedNodes.has(o)||this.sharedNodes.set(o,new s8),this.sharedNodes.get(o).add(u);const p=u.options.initialPromotionConfig;u.promote({transition:p?p.transition:void 0,preserveFollowOpacity:p&&p.shouldPreserveFollowOpacity?p.shouldPreserveFollowOpacity(u):void 0})}isLead(){const o=this.getStack();return o?o.lead===this:!0}getLead(){const{layoutId:o}=this.options;return o?this.getStack()?.lead||this:this}getPrevLead(){const{layoutId:o}=this.options;return o?this.getStack()?.prevLead:void 0}getStack(){const{layoutId:o}=this.options;if(o)return this.root.sharedNodes.get(o)}promote({needsReset:o,transition:u,preserveFollowOpacity:f}={}){const p=this.getStack();p&&p.promote(this,f),o&&(this.projectionDelta=void 0,this.needsReset=!0),u&&this.setOptions({transition:u})}relegate(){const o=this.getStack();return o?o.relegate(this):!1}resetSkewAndRotation(){const{visualElement:o}=this.options;if(!o)return;let u=!1;const{latestValues:f}=o;if((f.z||f.rotate||f.rotateX||f.rotateY||f.rotateZ||f.skewX||f.skewY)&&(u=!0),!u)return;const p={};f.z&&N1("z",o,p,this.animationValues);for(let m=0;m<R1.length;m++)N1(`rotate${R1[m]}`,o,p,this.animationValues),N1(`skew${R1[m]}`,o,p,this.animationValues);o.render();for(const m in p)o.setStaticValue(m,p[m]),this.animationValues&&(this.animationValues[m]=p[m]);o.scheduleRender()}applyProjectionStyles(o,u){if(!this.instance||this.isSVG)return;if(!this.isVisible){o.visibility="hidden";return}const f=this.getTransformTemplate();if(this.needsReset){this.needsReset=!1,o.visibility="",o.opacity="",o.pointerEvents=ux(u?.pointerEvents)||"",o.transform=f?f(this.latestValues,""):"none";return}const p=this.getLead();if(!this.projectionDelta||!this.layout||!p.target){this.options.layoutId&&(o.opacity=this.latestValues.opacity!==void 0?this.latestValues.opacity:1,o.pointerEvents=ux(u?.pointerEvents)||""),this.hasProjected&&!sf(this.latestValues)&&(o.transform=f?f({},""):"none",this.hasProjected=!1);return}o.visibility="";const m=p.animationValues||p.latestValues;this.applyTransformsToTarget();let v=Z6(this.projectionDeltaWithTransform,this.treeScale,m);f&&(v=f(m,v)),o.transform=v;const{x:_,y:x}=this.projectionDelta;o.transformOrigin=`${_.origin*100}% ${x.origin*100}% 0`,p.animationValues?o.opacity=p===this?m.opacity??this.latestValues.opacity??1:this.preserveOpacity?this.latestValues.opacity:m.opacityExit:o.opacity=p===this?m.opacity!==void 0?m.opacity:"":m.opacityExit!==void 0?m.opacityExit:0;for(const S in vM){if(m[S]===void 0)continue;const{correct:A,applyTo:E,isCSSVariable:M}=vM[S],C=v==="none"?m[S]:A(m[S],p);if(E){const N=E.length;for(let I=0;I<N;I++)o[E[I]]=C}else M?this.options.visualElement.renderState.vars[S]=C:o[S]=C}this.options.layoutId&&(o.pointerEvents=p===this?ux(u?.pointerEvents)||"":"none")}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(o=>o.currentAnimation?.stop()),this.root.nodes.forEach(hR),this.root.sharedNodes.clear()}}}function l8(n){n.updateLayout()}function c8(n){const e=n.resumeFrom?.snapshot||n.snapshot;if(n.isLead()&&n.layout&&e&&n.hasListeners("didUpdate")){const{layoutBox:t,measuredBox:i}=n.layout,{animationType:r}=n.options,s=e.source!==n.layout.source;r==="size"?io(m=>{const v=s?e.measuredBox[m]:e.layoutBox[m],_=Fs(v);v.min=t[m].min,v.max=v.min+_}):$I(r,e.layoutBox,t)&&io(m=>{const v=s?e.measuredBox[m]:e.layoutBox[m],_=Fs(t[m]);v.max=v.min+_,n.relativeTarget&&!n.currentAnimation&&(n.isProjectionDirty=!0,n.relativeTarget[m].max=n.relativeTarget[m].min+_)});const o=xp();r0(o,t,e.layoutBox);const u=xp();s?r0(u,n.applyTransform(i,!0),e.measuredBox):r0(u,t,e.layoutBox);const f=!HI(o);let p=!1;if(!n.resumeFrom){const m=n.getClosestProjectingParent();if(m&&!m.resumeFrom){const{snapshot:v,layout:_}=m;if(v&&_){const x=Ir();Ex(x,e.layoutBox,v.layoutBox);const S=Ir();Ex(S,t,_.layoutBox),GI(x,S)||(p=!0),m.options.layoutRoot&&(n.relativeTarget=S,n.relativeTargetOrigin=x,n.relativeParent=m)}}}n.notifyListeners("didUpdate",{layout:t,snapshot:e,delta:u,layoutDelta:o,hasLayoutChanged:f,hasRelativeLayoutChanged:p})}else if(n.isLead()){const{onExitComplete:t}=n.options;t&&t()}n.options.transition=void 0}function u8(n){n.parent&&(n.isProjecting()||(n.isProjectionDirty=n.parent.isProjectionDirty),n.isSharedProjectionDirty||(n.isSharedProjectionDirty=!!(n.isProjectionDirty||n.parent.isProjectionDirty||n.parent.isSharedProjectionDirty)),n.isTransformDirty||(n.isTransformDirty=n.parent.isTransformDirty))}function h8(n){n.isProjectionDirty=n.isSharedProjectionDirty=n.isTransformDirty=!1}function f8(n){n.clearSnapshot()}function hR(n){n.clearMeasurements()}function fR(n){n.isLayoutDirty=!1}function d8(n){const{visualElement:e}=n.options;e&&e.getProps().onBeforeLayoutMeasure&&e.notify("BeforeLayoutMeasure"),n.resetTransform()}function dR(n){n.finishAnimation(),n.targetDelta=n.relativeTarget=n.target=void 0,n.isProjectionDirty=!0}function p8(n){n.resolveTargetDelta()}function m8(n){n.calcProjection()}function g8(n){n.resetSkewAndRotation()}function v8(n){n.removeLeadSnapshot()}function pR(n,e,t){n.translate=ji(e.translate,0,t),n.scale=ji(e.scale,1,t),n.origin=e.origin,n.originPoint=e.originPoint}function mR(n,e,t,i){n.min=ji(e.min,t.min,i),n.max=ji(e.max,t.max,i)}function y8(n,e,t,i){mR(n.x,e.x,t.x,i),mR(n.y,e.y,t.y,i)}function _8(n){return n.animationValues&&n.animationValues.opacityExit!==void 0}const x8={duration:.45,ease:[.4,0,.1,1]},gR=n=>typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().includes(n),vR=gR("applewebkit/")&&!gR("chrome/")?Math.round:oo;function yR(n){n.min=vR(n.min),n.max=vR(n.max)}function b8(n){yR(n.x),yR(n.y)}function $I(n,e,t){return n==="position"||n==="preserve-aspect"&&!j6(aR(e),aR(t),.2)}function S8(n){return n!==n.root&&n.scroll?.wasRoot}const w8=XI({attachResizeListener:(n,e)=>R0(n,"resize",e),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body?.scrollLeft||0,y:document.documentElement.scrollTop||document.body?.scrollTop||0}),checkIsScrollRoot:()=>!0}),D1={current:void 0},YI=XI({measureScroll:n=>({x:n.scrollLeft,y:n.scrollTop}),defaultParent:()=>{if(!D1.current){const n=new w8({});n.mount(window),n.setOptions({layoutScroll:!0}),D1.current=n}return D1.current},resetTransform:(n,e)=>{n.style.transform=e!==void 0?e:"none"},checkIsScrollRoot:n=>window.getComputedStyle(n).position==="fixed"}),ZI=K.createContext({transformPagePoint:n=>n,isStatic:!1,reducedMotion:"never"});function M8(n=!0){const e=K.useContext(aE);if(e===null)return[!0,null];const{isPresent:t,onExitComplete:i,register:r}=e,s=K.useId();K.useEffect(()=>{if(n)return r(s)},[n]);const o=K.useCallback(()=>n&&i&&i(s),[s,i,n]);return!t&&i?[!1,o]:[!0]}const KI=K.createContext({strict:!1}),_R={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]};let xR=!1;function E8(){if(xR)return;const n={};for(const e in _R)n[e]={isEnabled:t=>_R[e].some(i=>!!t[i])};TI(n),xR=!0}function JI(){return E8(),g6()}function T8(n){const e=JI();for(const t in n)e[t]={...e[t],...n[t]};TI(e)}const A8=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","ignoreStrict","viewport"]);function Tx(n){return n.startsWith("while")||n.startsWith("drag")&&n!=="draggable"||n.startsWith("layout")||n.startsWith("onTap")||n.startsWith("onPan")||n.startsWith("onLayout")||A8.has(n)}let QI=n=>!Tx(n);function C8(n){typeof n=="function"&&(QI=e=>e.startsWith("on")?!Tx(e):n(e))}try{C8(require("@emotion/is-prop-valid").default)}catch{}function R8(n,e,t){const i={};for(const r in n)r==="values"&&typeof n.values=="object"||(QI(r)||t===!0&&Tx(r)||!e&&!Tx(r)||n.draggable&&r.startsWith("onDrag"))&&(i[r]=n[r]);return i}const Ub=K.createContext({});function N8(n,e){if(Lb(n)){const{initial:t,animate:i}=n;return{initial:t===!1||C0(t)?t:void 0,animate:C0(i)?i:void 0}}return n.inherit!==!1?e:{}}function D8(n){const{initial:e,animate:t}=N8(n,K.useContext(Ub));return K.useMemo(()=>({initial:e,animate:t}),[bR(e),bR(t)])}function bR(n){return Array.isArray(n)?n.join(" "):n}const OE=()=>({style:{},transform:{},transformOrigin:{},vars:{}});function eP(n,e,t){for(const i in e)!xs(e[i])&&!PI(i,t)&&(n[i]=e[i])}function I8({transformTemplate:n},e){return K.useMemo(()=>{const t=OE();return IE(t,e,n),Object.assign({},t.vars,t.style)},[e])}function P8(n,e){const t=n.style||{},i={};return eP(i,t,n),Object.assign(i,I8(n,e)),i}function O8(n,e){const t={},i=P8(n,e);return n.drag&&n.dragListener!==!1&&(t.draggable=!1,i.userSelect=i.WebkitUserSelect=i.WebkitTouchCallout="none",i.touchAction=n.drag===!0?"none":`pan-${n.drag==="x"?"y":"x"}`),n.tabIndex===void 0&&(n.onTap||n.onTapStart||n.whileTap)&&(t.tabIndex=0),t.style=i,t}const tP=()=>({...OE(),attrs:{}});function L8(n,e,t,i){const r=K.useMemo(()=>{const s=tP();return OI(s,e,UI(i),n.transformTemplate,n.style),{...s.attrs,style:{...s.style}}},[e]);if(n.style){const s={};eP(s,n.style,n),r.style={...s,...r.style}}return r}const U8=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function LE(n){return typeof n!="string"||n.includes("-")?!1:!!(U8.indexOf(n)>-1||/[A-Z]/u.test(n))}function k8(n,e,t,{latestValues:i},r,s=!1,o){const f=(o??LE(n)?L8:O8)(e,i,r,n),p=R8(e,typeof n=="string",s),m=n!==K.Fragment?{...p,...f,ref:t}:{},{children:v}=e,_=K.useMemo(()=>xs(v)?v.get():v,[v]);return K.createElement(n,{...m,children:_})}function B8({scrapeMotionValuesFromProps:n,createRenderState:e},t,i,r){return{latestValues:z8(t,i,r,n),renderState:e()}}function z8(n,e,t,i){const r={},s=i(n,{});for(const _ in s)r[_]=ux(s[_]);let{initial:o,animate:u}=n;const f=Lb(n),p=EI(n);e&&p&&!f&&n.inherit!==!1&&(o===void 0&&(o=e.initial),u===void 0&&(u=e.animate));let m=t?t.initial===!1:!1;m=m||o===!1;const v=m?u:o;if(v&&typeof v!="boolean"&&!Ob(v)){const _=Array.isArray(v)?v:[v];for(let x=0;x<_.length;x++){const S=EE(n,_[x]);if(S){const{transitionEnd:A,transition:E,...M}=S;for(const C in M){let N=M[C];if(Array.isArray(N)){const I=m?N.length-1:0;N=N[I]}N!==null&&(r[C]=N)}for(const C in A)r[C]=A[C]}}}return r}const nP=n=>(e,t)=>{const i=K.useContext(Ub),r=K.useContext(aE),s=()=>B8(n,e,i,r);return t?s():JF(s)},F8=nP({scrapeMotionValuesFromProps:PE,createRenderState:OE}),V8=nP({scrapeMotionValuesFromProps:kI,createRenderState:tP}),H8=Symbol.for("motionComponentSymbol");function G8(n,e,t){const i=K.useRef(t);K.useInsertionEffect(()=>{i.current=t});const r=K.useRef(null);return K.useCallback(s=>{s&&n.onMount?.(s),e&&(s?e.mount(s):e.unmount());const o=i.current;if(typeof o=="function")if(s){const u=o(s);typeof u=="function"&&(r.current=u)}else r.current?(r.current(),r.current=null):o(s);else o&&(o.current=s)},[e])}const iP=K.createContext({});function Zg(n){return n&&typeof n=="object"&&Object.prototype.hasOwnProperty.call(n,"current")}function j8(n,e,t,i,r,s){const{visualElement:o}=K.useContext(Ub),u=K.useContext(KI),f=K.useContext(aE),p=K.useContext(ZI).reducedMotion,m=K.useRef(null),v=K.useRef(!1);i=i||u.renderer,!m.current&&i&&(m.current=i(n,{visualState:e,parent:o,props:t,presenceContext:f,blockInitialAnimation:f?f.initial===!1:!1,reducedMotionConfig:p,isSVG:s}),v.current&&m.current&&(m.current.manuallyAnimateOnMount=!0));const _=m.current,x=K.useContext(iP);_&&!_.projection&&r&&(_.type==="html"||_.type==="svg")&&W8(m.current,t,r,x);const S=K.useRef(!1);K.useInsertionEffect(()=>{_&&S.current&&_.update(t,f)});const A=t[hI],E=K.useRef(!!A&&!window.MotionHandoffIsComplete?.(A)&&window.MotionHasOptimisedAnimation?.(A));return QF(()=>{v.current=!0,_&&(S.current=!0,window.MotionIsMounted=!0,_.updateFeatures(),_.scheduleRenderMicrotask(),E.current&&_.animationState&&_.animationState.animateChanges())}),K.useEffect(()=>{_&&(!E.current&&_.animationState&&_.animationState.animateChanges(),E.current&&(queueMicrotask(()=>{window.MotionHandoffMarkAsComplete?.(A)}),E.current=!1),_.enteringChildren=void 0)}),_}function W8(n,e,t,i){const{layoutId:r,layout:s,drag:o,dragConstraints:u,layoutScroll:f,layoutRoot:p,layoutCrossfade:m}=e;n.projection=new t(n.latestValues,e["data-framer-portal-id"]?void 0:rP(n.parent)),n.projection.setOptions({layoutId:r,layout:s,alwaysMeasureLayout:!!o||u&&Zg(u),visualElement:n,animationType:typeof s=="string"?s:"both",initialPromotionConfig:i,crossfade:m,layoutScroll:f,layoutRoot:p})}function rP(n){if(n)return n.options.allowProjection!==!1?n.projection:rP(n.parent)}function I1(n,{forwardMotionProps:e=!1,type:t}={},i,r){i&&T8(i);const s=t?t==="svg":LE(n),o=s?V8:F8;function u(p,m){let v;const _={...K.useContext(ZI),...p,layoutId:q8(p)},{isStatic:x}=_,S=D8(p),A=o(p,x);if(!x&&CD){X8();const E=$8(_);v=E.MeasureLayout,S.visualElement=j8(n,A,_,r,E.ProjectionNode,s)}return V.jsxs(Ub.Provider,{value:S,children:[v&&S.visualElement?V.jsx(v,{visualElement:S.visualElement,..._}):null,k8(n,p,G8(A,S.visualElement,m),A,x,e,s)]})}u.displayName=`motion.${typeof n=="string"?n:`create(${n.displayName??n.name??""})`}`;const f=K.forwardRef(u);return f[H8]=n,f}function q8({layoutId:n}){const e=K.useContext(AD).id;return e&&n!==void 0?e+"-"+n:n}function X8(n,e){K.useContext(KI).strict}function $8(n){const e=JI(),{drag:t,layout:i}=e;if(!t&&!i)return{};const r={...t,...i};return{MeasureLayout:t?.isEnabled(n)||i?.isEnabled(n)?r.MeasureLayout:void 0,ProjectionNode:r.ProjectionNode}}function Y8(n,e){if(typeof Proxy>"u")return I1;const t=new Map,i=(s,o)=>I1(s,o,n,e),r=(s,o)=>i(s,o);return new Proxy(r,{get:(s,o)=>o==="create"?i:(t.has(o)||t.set(o,I1(o,void 0,n,e)),t.get(o))})}const Z8=(n,e)=>e.isSVG??LE(n)?new P6(e):new A6(e,{allowProjection:n!==K.Fragment});class K8 extends Zu{constructor(e){super(e),e.animationState||(e.animationState=B6(e))}updateAnimationControlsSubscription(){const{animate:e}=this.node.getProps();Ob(e)&&(this.unmountControls=e.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:e}=this.node.getProps(),{animate:t}=this.node.prevProps||{};e!==t&&this.updateAnimationControlsSubscription()}unmount(){this.node.animationState.reset(),this.unmountControls?.()}}let J8=0;class Q8 extends Zu{constructor(){super(...arguments),this.id=J8++}update(){if(!this.node.presenceContext)return;const{isPresent:e,onExitComplete:t}=this.node.presenceContext,{isPresent:i}=this.node.prevPresenceContext||{};if(!this.node.animationState||e===i)return;const r=this.node.animationState.setActive("exit",!e);t&&!e&&r.then(()=>{t(this.id)})}mount(){const{register:e,onExitComplete:t}=this.node.presenceContext||{};t&&t(this.id),e&&(this.unmount=e(this.id))}unmount(){}}const eH={animation:{Feature:K8},exit:{Feature:Q8}};function iv(n){return{point:{x:n.pageX,y:n.pageY}}}const tH=n=>e=>RE(e)&&n(e,iv(e));function s0(n,e,t,i){return R0(n,e,tH(t),i)}const sP=({current:n})=>n?n.ownerDocument.defaultView:null,SR=(n,e)=>Math.abs(n-e);function nH(n,e){const t=SR(n.x,e.x),i=SR(n.y,e.y);return Math.sqrt(t**2+i**2)}const wR=new Set(["auto","scroll"]);class aP{constructor(e,t,{transformPagePoint:i,contextWindow:r=window,dragSnapToOrigin:s=!1,distanceThreshold:o=3,element:u}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.scrollPositions=new Map,this.removeScrollListeners=null,this.onElementScroll=x=>{this.handleScroll(x.target)},this.onWindowScroll=()=>{this.handleScroll(window)},this.updatePoint=()=>{if(!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const x=O1(this.lastMoveEventInfo,this.history),S=this.startEvent!==null,A=nH(x.offset,{x:0,y:0})>=this.distanceThreshold;if(!S&&!A)return;const{point:E}=x,{timestamp:M}=is;this.history.push({...E,timestamp:M});const{onStart:C,onMove:N}=this.handlers;S||(C&&C(this.lastMoveEvent,x),this.startEvent=this.lastMoveEvent),N&&N(this.lastMoveEvent,x)},this.handlePointerMove=(x,S)=>{this.lastMoveEvent=x,this.lastMoveEventInfo=P1(S,this.transformPagePoint),Di.update(this.updatePoint,!0)},this.handlePointerUp=(x,S)=>{this.end();const{onEnd:A,onSessionEnd:E,resumeAnimation:M}=this.handlers;if((this.dragSnapToOrigin||!this.startEvent)&&M&&M(),!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const C=O1(x.type==="pointercancel"?this.lastMoveEventInfo:P1(S,this.transformPagePoint),this.history);this.startEvent&&A&&A(x,C),E&&E(x,C)},!RE(e))return;this.dragSnapToOrigin=s,this.handlers=t,this.transformPagePoint=i,this.distanceThreshold=o,this.contextWindow=r||window;const f=iv(e),p=P1(f,this.transformPagePoint),{point:m}=p,{timestamp:v}=is;this.history=[{...m,timestamp:v}];const{onSessionStart:_}=t;_&&_(e,O1(p,this.history)),this.removeListeners=ev(s0(this.contextWindow,"pointermove",this.handlePointerMove),s0(this.contextWindow,"pointerup",this.handlePointerUp),s0(this.contextWindow,"pointercancel",this.handlePointerUp)),u&&this.startScrollTracking(u)}startScrollTracking(e){let t=e.parentElement;for(;t;){const i=getComputedStyle(t);(wR.has(i.overflowX)||wR.has(i.overflowY))&&this.scrollPositions.set(t,{x:t.scrollLeft,y:t.scrollTop}),t=t.parentElement}this.scrollPositions.set(window,{x:window.scrollX,y:window.scrollY}),window.addEventListener("scroll",this.onElementScroll,{capture:!0,passive:!0}),window.addEventListener("scroll",this.onWindowScroll,{passive:!0}),this.removeScrollListeners=()=>{window.removeEventListener("scroll",this.onElementScroll,{capture:!0}),window.removeEventListener("scroll",this.onWindowScroll)}}handleScroll(e){const t=this.scrollPositions.get(e);if(!t)return;const i=e===window,r=i?{x:window.scrollX,y:window.scrollY}:{x:e.scrollLeft,y:e.scrollTop},s={x:r.x-t.x,y:r.y-t.y};s.x===0&&s.y===0||(i?this.lastMoveEventInfo&&(this.lastMoveEventInfo.point.x+=s.x,this.lastMoveEventInfo.point.y+=s.y):this.history.length>0&&(this.history[0].x-=s.x,this.history[0].y-=s.y),this.scrollPositions.set(e,r),Di.update(this.updatePoint,!0))}updateHandlers(e){this.handlers=e}end(){this.removeListeners&&this.removeListeners(),this.removeScrollListeners&&this.removeScrollListeners(),this.scrollPositions.clear(),ju(this.updatePoint)}}function P1(n,e){return e?{point:e(n.point)}:n}function MR(n,e){return{x:n.x-e.x,y:n.y-e.y}}function O1({point:n},e){return{point:n,delta:MR(n,oP(e)),offset:MR(n,iH(e)),velocity:rH(e,.1)}}function iH(n){return n[0]}function oP(n){return n[n.length-1]}function rH(n,e){if(n.length<2)return{x:0,y:0};let t=n.length-1,i=null;const r=oP(n);for(;t>=0&&(i=n[t],!(r.timestamp-i.timestamp>Cc(e)));)t--;if(!i)return{x:0,y:0};const s=ao(r.timestamp-i.timestamp);if(s===0)return{x:0,y:0};const o={x:(r.x-i.x)/s,y:(r.y-i.y)/s};return o.x===1/0&&(o.x=0),o.y===1/0&&(o.y=0),o}function sH(n,{min:e,max:t},i){return e!==void 0&&n<e?n=i?ji(e,n,i.min):Math.max(n,e):t!==void 0&&n>t&&(n=i?ji(t,n,i.max):Math.min(n,t)),n}function ER(n,e,t){return{min:e!==void 0?n.min+e:void 0,max:t!==void 0?n.max+t-(n.max-n.min):void 0}}function aH(n,{top:e,left:t,bottom:i,right:r}){return{x:ER(n.x,t,r),y:ER(n.y,e,i)}}function TR(n,e){let t=e.min-n.min,i=e.max-n.max;return e.max-e.min<n.max-n.min&&([t,i]=[i,t]),{min:t,max:i}}function oH(n,e){return{x:TR(n.x,e.x),y:TR(n.y,e.y)}}function lH(n,e){let t=.5;const i=Fs(n),r=Fs(e);return r>i?t=E0(e.min,e.max-i,n.min):i>r&&(t=E0(n.min,n.max-r,e.min)),kl(0,1,t)}function cH(n,e){const t={};return e.min!==void 0&&(t.min=e.min-n.min),e.max!==void 0&&(t.max=e.max-n.min),t}const yM=.35;function uH(n=yM){return n===!1?n=0:n===!0&&(n=yM),{x:AR(n,"left","right"),y:AR(n,"top","bottom")}}function AR(n,e,t){return{min:CR(n,e),max:CR(n,t)}}function CR(n,e){return typeof n=="number"?n:n[e]||0}const hH=new WeakMap;class fH{constructor(e){this.openDragLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=Ir(),this.latestPointerEvent=null,this.latestPanInfo=null,this.visualElement=e}start(e,{snapToCursor:t=!1,distanceThreshold:i}={}){const{presenceContext:r}=this.visualElement;if(r&&r.isPresent===!1)return;const s=v=>{t?(this.stopAnimation(),this.snapToCursor(iv(v).point)):this.pauseAnimation()},o=(v,_)=>{this.stopAnimation();const{drag:x,dragPropagation:S,onDragStart:A}=this.getProps();if(x&&!S&&(this.openDragLock&&this.openDragLock(),this.openDragLock=r6(x),!this.openDragLock))return;this.latestPointerEvent=v,this.latestPanInfo=_,this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),io(M=>{let C=this.getAxisMotionValue(M).get()||0;if(Ul.test(C)){const{projection:N}=this.visualElement;if(N&&N.layout){const I=N.layout.layoutBox[M];I&&(C=Fs(I)*(parseFloat(C)/100))}}this.originPoint[M]=C}),A&&Di.postRender(()=>A(v,_)),hM(this.visualElement,"transform");const{animationState:E}=this.visualElement;E&&E.setActive("whileDrag",!0)},u=(v,_)=>{this.latestPointerEvent=v,this.latestPanInfo=_;const{dragPropagation:x,dragDirectionLock:S,onDirectionLock:A,onDrag:E}=this.getProps();if(!x&&!this.openDragLock)return;const{offset:M}=_;if(S&&this.currentDirection===null){this.currentDirection=dH(M),this.currentDirection!==null&&A&&A(this.currentDirection);return}this.updateAxis("x",_.point,M),this.updateAxis("y",_.point,M),this.visualElement.render(),E&&E(v,_)},f=(v,_)=>{this.latestPointerEvent=v,this.latestPanInfo=_,this.stop(v,_),this.latestPointerEvent=null,this.latestPanInfo=null},p=()=>io(v=>this.getAnimationState(v)==="paused"&&this.getAxisMotionValue(v).animation?.play()),{dragSnapToOrigin:m}=this.getProps();this.panSession=new aP(e,{onSessionStart:s,onStart:o,onMove:u,onSessionEnd:f,resumeAnimation:p},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:m,distanceThreshold:i,contextWindow:sP(this.visualElement),element:this.visualElement.current})}stop(e,t){const i=e||this.latestPointerEvent,r=t||this.latestPanInfo,s=this.isDragging;if(this.cancel(),!s||!r||!i)return;const{velocity:o}=r;this.startAnimation(o);const{onDragEnd:u}=this.getProps();u&&Di.postRender(()=>u(i,r))}cancel(){this.isDragging=!1;const{projection:e,animationState:t}=this.visualElement;e&&(e.isAnimationBlocked=!1),this.endPanSession();const{dragPropagation:i}=this.getProps();!i&&this.openDragLock&&(this.openDragLock(),this.openDragLock=null),t&&t.setActive("whileDrag",!1)}endPanSession(){this.panSession&&this.panSession.end(),this.panSession=void 0}updateAxis(e,t,i){const{drag:r}=this.getProps();if(!i||!h_(e,r,this.currentDirection))return;const s=this.getAxisMotionValue(e);let o=this.originPoint[e]+i[e];this.constraints&&this.constraints[e]&&(o=sH(o,this.constraints[e],this.elastic[e])),s.set(o)}resolveConstraints(){const{dragConstraints:e,dragElastic:t}=this.getProps(),i=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):this.visualElement.projection?.layout,r=this.constraints;e&&Zg(e)?this.constraints||(this.constraints=this.resolveRefConstraints()):e&&i?this.constraints=aH(i.layoutBox,e):this.constraints=!1,this.elastic=uH(t),r!==this.constraints&&i&&this.constraints&&!this.hasMutatedConstraints&&io(s=>{this.constraints!==!1&&this.getAxisMotionValue(s)&&(this.constraints[s]=cH(i.layoutBox[s],this.constraints[s]))})}resolveRefConstraints(){const{dragConstraints:e,onMeasureDragConstraints:t}=this.getProps();if(!e||!Zg(e))return!1;const i=e.current,{projection:r}=this.visualElement;if(!r||!r.layout)return!1;const s=b6(i,r.root,this.visualElement.getTransformPagePoint());let o=oH(r.layout.layoutBox,s);if(t){const u=t(y6(o));this.hasMutatedConstraints=!!u,u&&(o=CI(u))}return o}startAnimation(e){const{drag:t,dragMomentum:i,dragElastic:r,dragTransition:s,dragSnapToOrigin:o,onDragTransitionEnd:u}=this.getProps(),f=this.constraints||{},p=io(m=>{if(!h_(m,t,this.currentDirection))return;let v=f&&f[m]||{};o&&(v={min:0,max:0});const _=r?200:1e6,x=r?40:1e7,S={type:"inertia",velocity:i?e[m]:0,bounceStiffness:_,bounceDamping:x,timeConstant:750,restDelta:1,restSpeed:10,...s,...v};return this.startAxisValueAnimation(m,S)});return Promise.all(p).then(u)}startAxisValueAnimation(e,t){const i=this.getAxisMotionValue(e);return hM(this.visualElement,e),i.start(ME(e,i,0,t,this.visualElement,!1))}stopAnimation(){io(e=>this.getAxisMotionValue(e).stop())}pauseAnimation(){io(e=>this.getAxisMotionValue(e).animation?.pause())}getAnimationState(e){return this.getAxisMotionValue(e).animation?.state}getAxisMotionValue(e){const t=`_drag${e.toUpperCase()}`,i=this.visualElement.getProps(),r=i[t];return r||this.visualElement.getValue(e,(i.initial?i.initial[e]:void 0)||0)}snapToCursor(e){io(t=>{const{drag:i}=this.getProps();if(!h_(t,i,this.currentDirection))return;const{projection:r}=this.visualElement,s=this.getAxisMotionValue(t);if(r&&r.layout){const{min:o,max:u}=r.layout.layoutBox[t],f=s.get()||0;s.set(e[t]-ji(o,u,.5)+f)}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:e,dragConstraints:t}=this.getProps(),{projection:i}=this.visualElement;if(!Zg(t)||!i||!this.constraints)return;this.stopAnimation();const r={x:0,y:0};io(o=>{const u=this.getAxisMotionValue(o);if(u&&this.constraints!==!1){const f=u.get();r[o]=lH({min:f,max:f},this.constraints[o])}});const{transformTemplate:s}=this.visualElement.getProps();this.visualElement.current.style.transform=s?s({},""):"none",i.root&&i.root.updateScroll(),i.updateLayout(),this.resolveConstraints(),io(o=>{if(!h_(o,e,null))return;const u=this.getAxisMotionValue(o),{min:f,max:p}=this.constraints[o];u.set(ji(f,p,r[o]))})}addListeners(){if(!this.visualElement.current)return;hH.set(this.visualElement,this);const e=this.visualElement.current,t=s0(e,"pointerdown",f=>{const{drag:p,dragListener:m=!0}=this.getProps(),v=f.target,_=v!==e&&SI(v);p&&m&&!_&&this.start(f)}),i=()=>{const{dragConstraints:f}=this.getProps();Zg(f)&&f.current&&(this.constraints=this.resolveRefConstraints())},{projection:r}=this.visualElement,s=r.addEventListener("measure",i);r&&!r.layout&&(r.root&&r.root.updateScroll(),r.updateLayout()),Di.read(i);const o=R0(window,"resize",()=>this.scalePositionWithinConstraints()),u=r.addEventListener("didUpdate",(({delta:f,hasLayoutChanged:p})=>{this.isDragging&&p&&(io(m=>{const v=this.getAxisMotionValue(m);v&&(this.originPoint[m]+=f[m].translate,v.set(v.get()+f[m].translate))}),this.visualElement.render())}));return()=>{o(),t(),s(),u&&u()}}getProps(){const e=this.visualElement.getProps(),{drag:t=!1,dragDirectionLock:i=!1,dragPropagation:r=!1,dragConstraints:s=!1,dragElastic:o=yM,dragMomentum:u=!0}=e;return{...e,drag:t,dragDirectionLock:i,dragPropagation:r,dragConstraints:s,dragElastic:o,dragMomentum:u}}}function h_(n,e,t){return(e===!0||e===n)&&(t===null||t===n)}function dH(n,e=10){let t=null;return Math.abs(n.y)>e?t="y":Math.abs(n.x)>e&&(t="x"),t}class pH extends Zu{constructor(e){super(e),this.removeGroupControls=oo,this.removeListeners=oo,this.controls=new fH(e)}mount(){const{dragControls:e}=this.node.getProps();e&&(this.removeGroupControls=e.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||oo}update(){const{dragControls:e}=this.node.getProps(),{dragControls:t}=this.node.prevProps||{};e!==t&&(this.removeGroupControls(),e&&(this.removeGroupControls=e.subscribe(this.controls)))}unmount(){this.removeGroupControls(),this.removeListeners(),this.controls.isDragging||this.controls.endPanSession()}}const RR=n=>(e,t)=>{n&&Di.postRender(()=>n(e,t))};class mH extends Zu{constructor(){super(...arguments),this.removePointerDownListener=oo}onPointerDown(e){this.session=new aP(e,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:sP(this.node)})}createPanHandlers(){const{onPanSessionStart:e,onPanStart:t,onPan:i,onPanEnd:r}=this.node.getProps();return{onSessionStart:RR(e),onStart:RR(t),onMove:i,onEnd:(s,o)=>{delete this.session,r&&Di.postRender(()=>r(s,o))}}}mount(){this.removePointerDownListener=s0(this.node.current,"pointerdown",e=>this.onPointerDown(e))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}let L1=!1;class gH extends K.Component{componentDidMount(){const{visualElement:e,layoutGroup:t,switchLayoutGroup:i,layoutId:r}=this.props,{projection:s}=e;s&&(t.group&&t.group.add(s),i&&i.register&&r&&i.register(s),L1&&s.root.didUpdate(),s.addEventListener("animationComplete",()=>{this.safeToRemove()}),s.setOptions({...s.options,layoutDependency:this.props.layoutDependency,onExitComplete:()=>this.safeToRemove()})),hx.hasEverUpdated=!0}getSnapshotBeforeUpdate(e){const{layoutDependency:t,visualElement:i,drag:r,isPresent:s}=this.props,{projection:o}=i;return o&&(o.isPresent=s,e.layoutDependency!==t&&o.setOptions({...o.options,layoutDependency:t}),L1=!0,r||e.layoutDependency!==t||t===void 0||e.isPresent!==s?o.willUpdate():this.safeToRemove(),e.isPresent!==s&&(s?o.promote():o.relegate()||Di.postRender(()=>{const u=o.getStack();(!u||!u.members.length)&&this.safeToRemove()}))),null}componentDidUpdate(){const{projection:e}=this.props.visualElement;e&&(e.root.didUpdate(),CE.postRender(()=>{!e.currentAnimation&&e.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:e,layoutGroup:t,switchLayoutGroup:i}=this.props,{projection:r}=e;L1=!0,r&&(r.scheduleCheckAfterUnmount(),t&&t.group&&t.group.remove(r),i&&i.deregister&&i.deregister(r))}safeToRemove(){const{safeToRemove:e}=this.props;e&&e()}render(){return null}}function lP(n){const[e,t]=M8(),i=K.useContext(AD);return V.jsx(gH,{...n,layoutGroup:i,switchLayoutGroup:K.useContext(iP),isPresent:e,safeToRemove:t})}const vH={pan:{Feature:mH},drag:{Feature:pH,ProjectionNode:YI,MeasureLayout:lP}};function NR(n,e,t){const{props:i}=n;n.animationState&&i.whileHover&&n.animationState.setActive("whileHover",t==="Start");const r="onHover"+t,s=i[r];s&&Di.postRender(()=>s(e,iv(e)))}class yH extends Zu{mount(){const{current:e}=this.node;e&&(this.unmount=s6(e,(t,i)=>(NR(this.node,i,"Start"),r=>NR(this.node,r,"End"))))}unmount(){}}class _H extends Zu{constructor(){super(...arguments),this.isActive=!1}onFocus(){let e=!1;try{e=this.node.current.matches(":focus-visible")}catch{e=!0}!e||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){!this.isActive||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=ev(R0(this.node.current,"focus",()=>this.onFocus()),R0(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}function DR(n,e,t){const{props:i}=n;if(n.current instanceof HTMLButtonElement&&n.current.disabled)return;n.animationState&&i.whileTap&&n.animationState.setActive("whileTap",t==="Start");const r="onTap"+(t==="End"?"":t),s=i[r];s&&Di.postRender(()=>s(e,iv(e)))}class xH extends Zu{mount(){const{current:e}=this.node;e&&(this.unmount=l6(e,(t,i)=>(DR(this.node,i,"Start"),(r,{success:s})=>DR(this.node,r,s?"End":"Cancel")),{useGlobalTarget:this.node.props.globalTapTarget}))}unmount(){}}const _M=new WeakMap,U1=new WeakMap,bH=n=>{const e=_M.get(n.target);e&&e(n)},SH=n=>{n.forEach(bH)};function wH({root:n,...e}){const t=n||document;U1.has(t)||U1.set(t,{});const i=U1.get(t),r=JSON.stringify(e);return i[r]||(i[r]=new IntersectionObserver(SH,{root:n,...e})),i[r]}function MH(n,e,t){const i=wH(e);return _M.set(n,t),i.observe(n),()=>{_M.delete(n),i.unobserve(n)}}const EH={some:0,all:1};class TH extends Zu{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:e={}}=this.node.getProps(),{root:t,margin:i,amount:r="some",once:s}=e,o={root:t?t.current:void 0,rootMargin:i,threshold:typeof r=="number"?r:EH[r]},u=f=>{const{isIntersecting:p}=f;if(this.isInView===p||(this.isInView=p,s&&!p&&this.hasEnteredView))return;p&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",p);const{onViewportEnter:m,onViewportLeave:v}=this.node.getProps(),_=p?m:v;_&&_(f)};return MH(this.node.current,o,u)}mount(){this.startObserver()}update(){if(typeof IntersectionObserver>"u")return;const{props:e,prevProps:t}=this.node;["amount","margin","root"].some(AH(e,t))&&this.startObserver()}unmount(){}}function AH({viewport:n={}},{viewport:e={}}={}){return t=>n[t]!==e[t]}const CH={inView:{Feature:TH},tap:{Feature:xH},focus:{Feature:_H},hover:{Feature:yH}},RH={layout:{ProjectionNode:YI,MeasureLayout:lP}},NH={...eH,...CH,...vH,...RH},DH=Y8(NH,Z8),xM=({children:n})=>{const e=K.useRef(null),[t,i]=K.useState({x:0,y:0}),r=f=>{const{clientX:p,clientY:m}=f,{height:v,width:_,left:x,top:S}=e.current.getBoundingClientRect(),A=p-(x+_/2),E=m-(S+v/2);i({x:A*.3,y:E*.3})},s=()=>{i({x:0,y:0})},{x:o,y:u}=t;return V.jsx(DH.div,{ref:e,className:"magnetic-wrap inline-block",onMouseMove:r,onMouseLeave:s,animate:{x:o,y:u},transition:{type:"spring",stiffness:150,damping:15,mass:.1},children:n})},IH=()=>{const[n,e]=K.useState(!0),{user:t}=JM(),i=fo(),r=[{name:"Marketplace",path:"/market",icon:V.jsx(IF,{size:24})},{name:"Services",path:"/services",icon:V.jsx(ED,{size:24})},{name:"Connections",path:"/connections",icon:V.jsx(XF,{size:24})}];return V.jsxs("div",{className:`fixed top-0 left-0 h-screen bg-black border-r border-white/10 transition-all duration-300 z-50 flex flex-col ${n?"w-20":"w-80"}`,children:[V.jsxs("div",{className:`h-24 flex items-center ${n?"justify-center":"px-8 justify-between"}`,children:[V.jsx(Dl,{to:"/",className:"hover:scale-110 transition-transform",children:V.jsx(sE,{className:"w-10 h-10"})}),!n&&V.jsx("button",{onClick:()=>e(!0),className:"text-gray-500 hover:text-white",children:V.jsx(dF,{size:24})})]}),n&&V.jsx("div",{className:"flex justify-center mb-8",children:V.jsx("button",{onClick:()=>e(!1),className:"text-gray-500 hover:text-white",children:V.jsx(mF,{size:24})})}),V.jsx("nav",{className:"flex-1 flex flex-col gap-2 px-3",children:r.map(s=>{const o=i.pathname===s.path;return V.jsx(xM,{children:V.jsxs(Dl,{to:s.path,className:`flex items-center gap-4 p-3 rounded-lg transition-all group ${o?"bg-white/10 text-white":"text-gray-400 hover:bg-white/5 hover:text-white"}`,children:[V.jsx("div",{className:"shrink-0 group-hover:scale-110 transition-transform",children:s.icon}),V.jsx("span",{className:`font-display font-medium tracking-wide whitespace-nowrap overflow-hidden transition-all duration-300 ${n?"w-0 opacity-0":"w-auto opacity-100"}`,children:s.name})]})},s.name)})}),t?V.jsx("div",{className:`border-t border-white/10 p-4 ${n?"flex justify-center":""}`,children:V.jsxs(Dl,{to:"/profile",className:"flex items-center gap-4 group relative",children:[V.jsx("div",{className:"w-10 h-10 rounded-full bg-gray-800 flex items-center justify-center text-white font-bold shrink-0 border border-white/20 group-hover:border-white transition-colors overflow-hidden",children:t.user_metadata?.avatar_url?V.jsx("img",{src:t.user_metadata.avatar_url,alt:"User",className:"w-full h-full object-cover"}):t.user_metadata?.first_name?t.user_metadata.first_name[0]:t.email[0].toUpperCase()}),n&&V.jsx("div",{className:"absolute left-14 bg-white text-black px-3 py-1.5 rounded-full text-xs font-bold opacity-0 group-hover:opacity-100 transition-opacity duration-300 pointer-events-none whitespace-nowrap shadow-xl z-50",children:t.user_metadata?.first_name||"My Profile"}),V.jsxs("div",{className:`overflow-hidden transition-all duration-300 ${n?"w-0 opacity-0":"w-auto opacity-100"}`,children:[V.jsx("p",{className:"text-sm font-bold text-white truncate max-w-[180px]",children:t.user_metadata?.first_name||"My Profile"}),V.jsx("p",{className:"text-xs text-gray-500",children:"View Profile"})]})]})}):V.jsx("div",{className:`p-4 border-t border-white/10 ${n?"flex justify-center":""}`,children:V.jsxs(Dl,{to:"/login",className:"flex items-center gap-4 text-gray-400 hover:text-white transition-colors",children:[V.jsx(WF,{size:24}),V.jsx("span",{className:`font-display whitespace-nowrap overflow-hidden transition-all duration-300 ${n?"w-0 opacity-0":"w-auto opacity-100"}`,children:"Sign In"})]})})]})},PH=()=>{const n=K.useRef(null),e=K.useRef(null),t=fo(),i=K.useRef({x:0,y:0}),r=K.useRef({x:0,y:0}),[s,o]=K.useState(!1),[u,f]=K.useState(!1),[p,m]=K.useState(!1),v=.15;return K.useEffect(()=>{let S;const A=L=>{i.current={x:L.clientX,y:L.clientY},n.current&&(n.current.style.transform=`translate(${L.clientX-4}px, ${L.clientY-4}px)`),Math.random()>.7&&I(L.clientX,L.clientY)},E=()=>f(!0),M=()=>f(!1),C=()=>o(!1),N=()=>o(!0),I=(L,F)=>{const H=document.createElement("div"),P=Math.random()*4+2,k=p?"polygon(50% 0%, 61% 35%, 98% 35%, 68% 57%, 79% 91%, 50% 70%, 21% 91%, 32% 57%, 2% 35%, 39% 35%)":"polygon(50% 0%, 100% 50%, 50% 100%, 0% 50%)",Y=Math.random()*360;Object.assign(H.style,{position:"fixed",left:"0",top:"0",width:`${P}px`,height:`${P}px`,backgroundColor:"white",clipPath:k,pointerEvents:"none",zIndex:9998,transform:`translate(${L}px, ${F}px) rotate(${Y}deg)`,opacity:.6,transition:"transform 0.6s ease-out, opacity 0.6s ease-out",willChange:"transform, opacity"}),document.body.appendChild(H);const ie=(Math.random()-.5)*60,te=(Math.random()-.5)*60;requestAnimationFrame(()=>{H.style.transform=`translate(${L-ie}px, ${F-te}px) rotate(${Y+180}deg) scale(0)`,H.style.opacity=0}),setTimeout(()=>H.remove(),600)},U=()=>{e.current&&(r.current.x+=(i.current.x-r.current.x)*v,r.current.y+=(i.current.y-r.current.y)*v,e.current.style.transform=`translate(${r.current.x-20}px, ${r.current.y-20}px)`,S=requestAnimationFrame(U))};return U(),document.addEventListener("mousemove",A),document.addEventListener("mousedown",E),document.addEventListener("mouseup",M),document.addEventListener("mouseenter",C),document.addEventListener("mouseleave",N),()=>{cancelAnimationFrame(S),document.removeEventListener("mousemove",A),document.removeEventListener("mousedown",E),document.removeEventListener("mouseup",M),document.removeEventListener("mouseenter",C),document.removeEventListener("mouseleave",N)}},[p]),K.useEffect(()=>{const S=()=>m(!0),A=()=>m(!1),E=()=>{const N=document.querySelectorAll("a, button, input, textarea, .cursor-hover, .group\\/btn");return N.forEach(I=>{I.addEventListener("mouseenter",S),I.addEventListener("mouseleave",A)}),()=>{N.forEach(I=>{I.removeEventListener("mouseenter",S),I.removeEventListener("mouseleave",A)})}},M=E(),C=setTimeout(E,500);return()=>{M(),clearTimeout(C)}},[t]),s?null:V.jsxs(V.Fragment,{children:[V.jsx("div",{ref:n,className:"fixed top-0 left-0 z-[9999] pointer-events-none will-change-transform",style:{top:0,left:0},children:V.jsx("div",{className:`w-2 h-2 bg-white rounded-full shadow-[0_0_10px_rgba(255,255,255,0.8)] transition-transform duration-300 ${u?"scale-50":p?"scale-150":"scale-100"}`})}),V.jsx("div",{ref:e,className:"fixed top-0 left-0 w-10 h-10 pointer-events-none z-[9998] mix-blend-difference will-change-transform transition-colors duration-300",style:{top:0,left:0},children:V.jsx("svg",{className:`w-full h-full transition-transform duration-300 ${u?"scale-75":p?"scale-125 rotate-180":"scale-100"}`,viewBox:"0 0 40 40",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:V.jsx("path",{d:p?"M 20 1 L 37 10.5 L 37 29.5 L 20 39 L 3 29.5 L 3 10.5 Z":"M 20 1 A 19 19 0 1 1 20 39 A 19 19 0 1 1 20 1 Z",stroke:"white",strokeWidth:"2",strokeLinecap:"round",style:{transition:"d 0.3s ease-out"}})})})]})};function bM(){return bM=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var i in t)({}).hasOwnProperty.call(t,i)&&(n[i]=t[i])}return n},bM.apply(null,arguments)}const Kp="182",OH={LEFT:0,MIDDLE:1,RIGHT:2,ROTATE:0,DOLLY:1,PAN:2},LH={ROTATE:0,PAN:1,DOLLY_PAN:2,DOLLY_ROTATE:3},cP=0,SM=1,uP=2,UH=3,hP=0,Rp=1,a0=2,df=3,Pc=0,Vs=1,jo=2,Xo=0,xf=1,Ax=2,wM=3,MM=4,fP=5,Bu=100,dP=101,pP=102,mP=103,gP=104,vP=200,yP=201,_P=202,xP=203,Cx=204,Rx=205,bP=206,SP=207,wP=208,MP=209,EP=210,TP=211,AP=212,CP=213,RP=214,Nx=0,Dx=1,Ix=2,wf=3,Px=4,Ox=5,Lx=6,Ux=7,rv=0,NP=1,DP=2,lo=0,UE=1,kE=2,BE=3,kb=4,zE=5,FE=6,VE=7,EM="attached",IP="detached",qu=300,$o=301,Xu=302,Pp=303,N0=304,Jp=306,D0=1e3,nr=1001,I0=1002,dr=1003,HE=1004,kH=1004,wp=1005,BH=1005,Wn=1006,o0=1007,zH=1007,Il=1008,TM=1008,Gr=1009,Bb=1010,zb=1011,Op=1012,sv=1013,Aa=1014,ki=1015,ir=1016,Fb=1017,Vb=1018,Lp=1020,GE=35902,jE=35899,WE=1021,qE=1022,pr=1023,Bl=1026,Fu=1027,av=1028,ov=1029,Mf=1030,Hb=1031,FH=1032,Gb=1033,l0=33776,c0=33777,u0=33778,h0=33779,kx=35840,Bx=35841,zx=35842,Fx=35843,Vx=36196,Hx=37492,Gx=37496,jx=37488,Wx=37489,qx=37490,Xx=37491,$x=37808,Yx=37809,Zx=37810,Kx=37811,Jx=37812,Qx=37813,eb=37814,tb=37815,nb=37816,ib=37817,rb=37818,sb=37819,ab=37820,ob=37821,lb=36492,cb=36494,ub=36495,hb=36283,fb=36284,db=36285,pb=36286,PP=2200,OP=2201,LP=2202,P0=2300,mb=2301,fx=2302,pf=2400,mf=2401,O0=2402,jb=2500,XE=2501,VH=0,HH=1,GH=2,UP=3200,jH=3201,WH=3202,qH=3203,Ku=0,kP=1,Ec="",rs="srgb",Yo="srgb-linear",L0="linear",ri="srgb",XH="",$H="rg",YH="ga",ZH=0,af=7680,KH=7681,JH=7682,QH=7683,eG=34055,tG=34056,nG=5386,iG=512,rG=513,sG=514,aG=515,oG=516,lG=517,cG=518,AM=519,BP=512,zP=513,FP=514,Wb=515,VP=516,HP=517,qb=518,GP=519,U0=35044,uG=35048,hG=35040,fG=35045,dG=35049,pG=35041,mG=35046,gG=35050,vG=35042,yG="100",CM="300 es",Ma=2e3,Up=2001,_G={COMPUTE:"compute",RENDER:"render"},xG={PERSPECTIVE:"perspective",LINEAR:"linear",FLAT:"flat"},bG={NORMAL:"normal",CENTROID:"centroid",SAMPLE:"sample",FIRST:"first",EITHER:"either"};function jP(n){for(let e=n.length-1;e>=0;--e)if(n[e]>=65535)return!0;return!1}const SG={Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array};function Mp(n,e){return new SG[n](e)}function WP(n){return ArrayBuffer.isView(n)&&!(n instanceof DataView)}function k0(n){return document.createElementNS("http://www.w3.org/1999/xhtml",n)}function qP(){const n=k0("canvas");return n.style.display="block",n}const IR={};let $u=null;function wG(n){$u=n}function MG(){return $u}function B0(...n){const e="THREE."+n.shift();$u?$u("log",e,...n):console.log(e,...n)}function At(...n){const e="THREE."+n.shift();$u?$u("warn",e,...n):console.warn(e,...n)}function Xt(...n){const e="THREE."+n.shift();$u?$u("error",e,...n):console.error(e,...n)}function kp(...n){const e=n.join(" ");e in IR||(IR[e]=!0,At(...n))}function EG(n,e,t){return new Promise(function(i,r){function s(){switch(n.clientWaitSync(e,n.SYNC_FLUSH_COMMANDS_BIT,0)){case n.WAIT_FAILED:r();break;case n.TIMEOUT_EXPIRED:setTimeout(s,t);break;default:i()}}setTimeout(s,t)})}class Fl{addEventListener(e,t){this._listeners===void 0&&(this._listeners={});const i=this._listeners;i[e]===void 0&&(i[e]=[]),i[e].indexOf(t)===-1&&i[e].push(t)}hasEventListener(e,t){const i=this._listeners;return i===void 0?!1:i[e]!==void 0&&i[e].indexOf(t)!==-1}removeEventListener(e,t){const i=this._listeners;if(i===void 0)return;const r=i[e];if(r!==void 0){const s=r.indexOf(t);s!==-1&&r.splice(s,1)}}dispatchEvent(e){const t=this._listeners;if(t===void 0)return;const i=t[e.type];if(i!==void 0){e.target=this;const r=i.slice(0);for(let s=0,o=r.length;s<o;s++)r[s].call(this,e);e.target=null}}}const vs=["00","01","02","03","04","05","06","07","08","09","0a","0b","0c","0d","0e","0f","10","11","12","13","14","15","16","17","18","19","1a","1b","1c","1d","1e","1f","20","21","22","23","24","25","26","27","28","29","2a","2b","2c","2d","2e","2f","30","31","32","33","34","35","36","37","38","39","3a","3b","3c","3d","3e","3f","40","41","42","43","44","45","46","47","48","49","4a","4b","4c","4d","4e","4f","50","51","52","53","54","55","56","57","58","59","5a","5b","5c","5d","5e","5f","60","61","62","63","64","65","66","67","68","69","6a","6b","6c","6d","6e","6f","70","71","72","73","74","75","76","77","78","79","7a","7b","7c","7d","7e","7f","80","81","82","83","84","85","86","87","88","89","8a","8b","8c","8d","8e","8f","90","91","92","93","94","95","96","97","98","99","9a","9b","9c","9d","9e","9f","a0","a1","a2","a3","a4","a5","a6","a7","a8","a9","aa","ab","ac","ad","ae","af","b0","b1","b2","b3","b4","b5","b6","b7","b8","b9","ba","bb","bc","bd","be","bf","c0","c1","c2","c3","c4","c5","c6","c7","c8","c9","ca","cb","cc","cd","ce","cf","d0","d1","d2","d3","d4","d5","d6","d7","d8","d9","da","db","dc","dd","de","df","e0","e1","e2","e3","e4","e5","e6","e7","e8","e9","ea","eb","ec","ed","ee","ef","f0","f1","f2","f3","f4","f5","f6","f7","f8","f9","fa","fb","fc","fd","fe","ff"];let PR=1234567;const bf=Math.PI/180,Bp=180/Math.PI;function Ea(){const n=Math.random()*4294967295|0,e=Math.random()*4294967295|0,t=Math.random()*4294967295|0,i=Math.random()*4294967295|0;return(vs[n&255]+vs[n>>8&255]+vs[n>>16&255]+vs[n>>24&255]+"-"+vs[e&255]+vs[e>>8&255]+"-"+vs[e>>16&15|64]+vs[e>>24&255]+"-"+vs[t&63|128]+vs[t>>8&255]+"-"+vs[t>>16&255]+vs[t>>24&255]+vs[i&255]+vs[i>>8&255]+vs[i>>16&255]+vs[i>>24&255]).toLowerCase()}function ln(n,e,t){return Math.max(e,Math.min(t,n))}function $E(n,e){return(n%e+e)%e}function TG(n,e,t,i,r){return i+(n-e)*(r-i)/(t-e)}function AG(n,e,t){return n!==e?(t-n)/(e-n):0}function f0(n,e,t){return(1-t)*n+t*e}function CG(n,e,t,i){return f0(n,e,1-Math.exp(-t*i))}function RG(n,e=1){return e-Math.abs($E(n,e*2)-e)}function NG(n,e,t){return n<=e?0:n>=t?1:(n=(n-e)/(t-e),n*n*(3-2*n))}function DG(n,e,t){return n<=e?0:n>=t?1:(n=(n-e)/(t-e),n*n*n*(n*(n*6-15)+10))}function IG(n,e){return n+Math.floor(Math.random()*(e-n+1))}function PG(n,e){return n+Math.random()*(e-n)}function OG(n){return n*(.5-Math.random())}function LG(n){n!==void 0&&(PR=n);let e=PR+=1831565813;return e=Math.imul(e^e>>>15,e|1),e^=e+Math.imul(e^e>>>7,e|61),((e^e>>>14)>>>0)/4294967296}function UG(n){return n*bf}function kG(n){return n*Bp}function BG(n){return(n&n-1)===0&&n!==0}function zG(n){return Math.pow(2,Math.ceil(Math.log(n)/Math.LN2))}function FG(n){return Math.pow(2,Math.floor(Math.log(n)/Math.LN2))}function VG(n,e,t,i,r){const s=Math.cos,o=Math.sin,u=s(t/2),f=o(t/2),p=s((e+i)/2),m=o((e+i)/2),v=s((e-i)/2),_=o((e-i)/2),x=s((i-e)/2),S=o((i-e)/2);switch(r){case"XYX":n.set(u*m,f*v,f*_,u*p);break;case"YZY":n.set(f*_,u*m,f*v,u*p);break;case"ZXZ":n.set(f*v,f*_,u*m,u*p);break;case"XZX":n.set(u*m,f*S,f*x,u*p);break;case"YXY":n.set(f*x,u*m,f*S,u*p);break;case"ZYZ":n.set(f*S,f*x,u*m,u*p);break;default:At("MathUtils: .setQuaternionFromProperEuler() encountered an unknown order: "+r)}}function Bs(n,e){switch(e.constructor){case Float32Array:return n;case Uint32Array:return n/4294967295;case Uint16Array:return n/65535;case Uint8Array:return n/255;case Int32Array:return Math.max(n/2147483647,-1);case Int16Array:return Math.max(n/32767,-1);case Int8Array:return Math.max(n/127,-1);default:throw new Error("Invalid component type.")}}function Mn(n,e){switch(e.constructor){case Float32Array:return n;case Uint32Array:return Math.round(n*4294967295);case Uint16Array:return Math.round(n*65535);case Uint8Array:return Math.round(n*255);case Int32Array:return Math.round(n*2147483647);case Int16Array:return Math.round(n*32767);case Int8Array:return Math.round(n*127);default:throw new Error("Invalid component type.")}}const HG={DEG2RAD:bf,RAD2DEG:Bp,generateUUID:Ea,clamp:ln,euclideanModulo:$E,mapLinear:TG,inverseLerp:AG,lerp:f0,damp:CG,pingpong:RG,smoothstep:NG,smootherstep:DG,randInt:IG,randFloat:PG,randFloatSpread:OG,seededRandom:LG,degToRad:UG,radToDeg:kG,isPowerOfTwo:BG,ceilPowerOfTwo:zG,floorPowerOfTwo:FG,setQuaternionFromProperEuler:VG,normalize:Mn,denormalize:Bs};class Ye{constructor(e=0,t=0){Ye.prototype.isVector2=!0,this.x=e,this.y=t}get width(){return this.x}set width(e){this.x=e}get height(){return this.y}set height(e){this.y=e}set(e,t){return this.x=e,this.y=t,this}setScalar(e){return this.x=e,this.y=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y)}copy(e){return this.x=e.x,this.y=e.y,this}add(e){return this.x+=e.x,this.y+=e.y,this}addScalar(e){return this.x+=e,this.y+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this}subScalar(e){return this.x-=e,this.y-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this}multiply(e){return this.x*=e.x,this.y*=e.y,this}multiplyScalar(e){return this.x*=e,this.y*=e,this}divide(e){return this.x/=e.x,this.y/=e.y,this}divideScalar(e){return this.multiplyScalar(1/e)}applyMatrix3(e){const t=this.x,i=this.y,r=e.elements;return this.x=r[0]*t+r[3]*i+r[6],this.y=r[1]*t+r[4]*i+r[7],this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this}clamp(e,t){return this.x=ln(this.x,e.x,t.x),this.y=ln(this.y,e.y,t.y),this}clampScalar(e,t){return this.x=ln(this.x,e,t),this.y=ln(this.y,e,t),this}clampLength(e,t){const i=this.length();return this.divideScalar(i||1).multiplyScalar(ln(i,e,t))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this}negate(){return this.x=-this.x,this.y=-this.y,this}dot(e){return this.x*e.x+this.y*e.y}cross(e){return this.x*e.y-this.y*e.x}lengthSq(){return this.x*this.x+this.y*this.y}length(){return Math.sqrt(this.x*this.x+this.y*this.y)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)}normalize(){return this.divideScalar(this.length()||1)}angle(){return Math.atan2(-this.y,-this.x)+Math.PI}angleTo(e){const t=Math.sqrt(this.lengthSq()*e.lengthSq());if(t===0)return Math.PI/2;const i=this.dot(e)/t;return Math.acos(ln(i,-1,1))}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){const t=this.x-e.x,i=this.y-e.y;return t*t+i*i}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this}lerpVectors(e,t,i){return this.x=e.x+(t.x-e.x)*i,this.y=e.y+(t.y-e.y)*i,this}equals(e){return e.x===this.x&&e.y===this.y}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this}rotateAround(e,t){const i=Math.cos(t),r=Math.sin(t),s=this.x-e.x,o=this.y-e.y;return this.x=s*i-o*r+e.x,this.y=s*r+o*i+e.y,this}random(){return this.x=Math.random(),this.y=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y}}class pa{constructor(e=0,t=0,i=0,r=1){this.isQuaternion=!0,this._x=e,this._y=t,this._z=i,this._w=r}static slerpFlat(e,t,i,r,s,o,u){let f=i[r+0],p=i[r+1],m=i[r+2],v=i[r+3],_=s[o+0],x=s[o+1],S=s[o+2],A=s[o+3];if(u<=0){e[t+0]=f,e[t+1]=p,e[t+2]=m,e[t+3]=v;return}if(u>=1){e[t+0]=_,e[t+1]=x,e[t+2]=S,e[t+3]=A;return}if(v!==A||f!==_||p!==x||m!==S){let E=f*_+p*x+m*S+v*A;E<0&&(_=-_,x=-x,S=-S,A=-A,E=-E);let M=1-u;if(E<.9995){const C=Math.acos(E),N=Math.sin(C);M=Math.sin(M*C)/N,u=Math.sin(u*C)/N,f=f*M+_*u,p=p*M+x*u,m=m*M+S*u,v=v*M+A*u}else{f=f*M+_*u,p=p*M+x*u,m=m*M+S*u,v=v*M+A*u;const C=1/Math.sqrt(f*f+p*p+m*m+v*v);f*=C,p*=C,m*=C,v*=C}}e[t]=f,e[t+1]=p,e[t+2]=m,e[t+3]=v}static multiplyQuaternionsFlat(e,t,i,r,s,o){const u=i[r],f=i[r+1],p=i[r+2],m=i[r+3],v=s[o],_=s[o+1],x=s[o+2],S=s[o+3];return e[t]=u*S+m*v+f*x-p*_,e[t+1]=f*S+m*_+p*v-u*x,e[t+2]=p*S+m*x+u*_-f*v,e[t+3]=m*S-u*v-f*_-p*x,e}get x(){return this._x}set x(e){this._x=e,this._onChangeCallback()}get y(){return this._y}set y(e){this._y=e,this._onChangeCallback()}get z(){return this._z}set z(e){this._z=e,this._onChangeCallback()}get w(){return this._w}set w(e){this._w=e,this._onChangeCallback()}set(e,t,i,r){return this._x=e,this._y=t,this._z=i,this._w=r,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._w)}copy(e){return this._x=e.x,this._y=e.y,this._z=e.z,this._w=e.w,this._onChangeCallback(),this}setFromEuler(e,t=!0){const i=e._x,r=e._y,s=e._z,o=e._order,u=Math.cos,f=Math.sin,p=u(i/2),m=u(r/2),v=u(s/2),_=f(i/2),x=f(r/2),S=f(s/2);switch(o){case"XYZ":this._x=_*m*v+p*x*S,this._y=p*x*v-_*m*S,this._z=p*m*S+_*x*v,this._w=p*m*v-_*x*S;break;case"YXZ":this._x=_*m*v+p*x*S,this._y=p*x*v-_*m*S,this._z=p*m*S-_*x*v,this._w=p*m*v+_*x*S;break;case"ZXY":this._x=_*m*v-p*x*S,this._y=p*x*v+_*m*S,this._z=p*m*S+_*x*v,this._w=p*m*v-_*x*S;break;case"ZYX":this._x=_*m*v-p*x*S,this._y=p*x*v+_*m*S,this._z=p*m*S-_*x*v,this._w=p*m*v+_*x*S;break;case"YZX":this._x=_*m*v+p*x*S,this._y=p*x*v+_*m*S,this._z=p*m*S-_*x*v,this._w=p*m*v-_*x*S;break;case"XZY":this._x=_*m*v-p*x*S,this._y=p*x*v-_*m*S,this._z=p*m*S+_*x*v,this._w=p*m*v+_*x*S;break;default:At("Quaternion: .setFromEuler() encountered an unknown order: "+o)}return t===!0&&this._onChangeCallback(),this}setFromAxisAngle(e,t){const i=t/2,r=Math.sin(i);return this._x=e.x*r,this._y=e.y*r,this._z=e.z*r,this._w=Math.cos(i),this._onChangeCallback(),this}setFromRotationMatrix(e){const t=e.elements,i=t[0],r=t[4],s=t[8],o=t[1],u=t[5],f=t[9],p=t[2],m=t[6],v=t[10],_=i+u+v;if(_>0){const x=.5/Math.sqrt(_+1);this._w=.25/x,this._x=(m-f)*x,this._y=(s-p)*x,this._z=(o-r)*x}else if(i>u&&i>v){const x=2*Math.sqrt(1+i-u-v);this._w=(m-f)/x,this._x=.25*x,this._y=(r+o)/x,this._z=(s+p)/x}else if(u>v){const x=2*Math.sqrt(1+u-i-v);this._w=(s-p)/x,this._x=(r+o)/x,this._y=.25*x,this._z=(f+m)/x}else{const x=2*Math.sqrt(1+v-i-u);this._w=(o-r)/x,this._x=(s+p)/x,this._y=(f+m)/x,this._z=.25*x}return this._onChangeCallback(),this}setFromUnitVectors(e,t){let i=e.dot(t)+1;return i<1e-8?(i=0,Math.abs(e.x)>Math.abs(e.z)?(this._x=-e.y,this._y=e.x,this._z=0,this._w=i):(this._x=0,this._y=-e.z,this._z=e.y,this._w=i)):(this._x=e.y*t.z-e.z*t.y,this._y=e.z*t.x-e.x*t.z,this._z=e.x*t.y-e.y*t.x,this._w=i),this.normalize()}angleTo(e){return 2*Math.acos(Math.abs(ln(this.dot(e),-1,1)))}rotateTowards(e,t){const i=this.angleTo(e);if(i===0)return this;const r=Math.min(1,t/i);return this.slerp(e,r),this}identity(){return this.set(0,0,0,1)}invert(){return this.conjugate()}conjugate(){return this._x*=-1,this._y*=-1,this._z*=-1,this._onChangeCallback(),this}dot(e){return this._x*e._x+this._y*e._y+this._z*e._z+this._w*e._w}lengthSq(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w}length(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)}normalize(){let e=this.length();return e===0?(this._x=0,this._y=0,this._z=0,this._w=1):(e=1/e,this._x=this._x*e,this._y=this._y*e,this._z=this._z*e,this._w=this._w*e),this._onChangeCallback(),this}multiply(e){return this.multiplyQuaternions(this,e)}premultiply(e){return this.multiplyQuaternions(e,this)}multiplyQuaternions(e,t){const i=e._x,r=e._y,s=e._z,o=e._w,u=t._x,f=t._y,p=t._z,m=t._w;return this._x=i*m+o*u+r*p-s*f,this._y=r*m+o*f+s*u-i*p,this._z=s*m+o*p+i*f-r*u,this._w=o*m-i*u-r*f-s*p,this._onChangeCallback(),this}slerp(e,t){if(t<=0)return this;if(t>=1)return this.copy(e);let i=e._x,r=e._y,s=e._z,o=e._w,u=this.dot(e);u<0&&(i=-i,r=-r,s=-s,o=-o,u=-u);let f=1-t;if(u<.9995){const p=Math.acos(u),m=Math.sin(p);f=Math.sin(f*p)/m,t=Math.sin(t*p)/m,this._x=this._x*f+i*t,this._y=this._y*f+r*t,this._z=this._z*f+s*t,this._w=this._w*f+o*t,this._onChangeCallback()}else this._x=this._x*f+i*t,this._y=this._y*f+r*t,this._z=this._z*f+s*t,this._w=this._w*f+o*t,this.normalize();return this}slerpQuaternions(e,t,i){return this.copy(e).slerp(t,i)}random(){const e=2*Math.PI*Math.random(),t=2*Math.PI*Math.random(),i=Math.random(),r=Math.sqrt(1-i),s=Math.sqrt(i);return this.set(r*Math.sin(e),r*Math.cos(e),s*Math.sin(t),s*Math.cos(t))}equals(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._w===this._w}fromArray(e,t=0){return this._x=e[t],this._y=e[t+1],this._z=e[t+2],this._w=e[t+3],this._onChangeCallback(),this}toArray(e=[],t=0){return e[t]=this._x,e[t+1]=this._y,e[t+2]=this._z,e[t+3]=this._w,e}fromBufferAttribute(e,t){return this._x=e.getX(t),this._y=e.getY(t),this._z=e.getZ(t),this._w=e.getW(t),this._onChangeCallback(),this}toJSON(){return this.toArray()}_onChange(e){return this._onChangeCallback=e,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._w}}class J{constructor(e=0,t=0,i=0){J.prototype.isVector3=!0,this.x=e,this.y=t,this.z=i}set(e,t,i){return i===void 0&&(i=this.z),this.x=e,this.y=t,this.z=i,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this}add(e){return this.x+=e.x,this.y+=e.y,this.z+=e.z,this}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this.z-=e.z,this}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this}multiply(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this}multiplyVectors(e,t){return this.x=e.x*t.x,this.y=e.y*t.y,this.z=e.z*t.z,this}applyEuler(e){return this.applyQuaternion(OR.setFromEuler(e))}applyAxisAngle(e,t){return this.applyQuaternion(OR.setFromAxisAngle(e,t))}applyMatrix3(e){const t=this.x,i=this.y,r=this.z,s=e.elements;return this.x=s[0]*t+s[3]*i+s[6]*r,this.y=s[1]*t+s[4]*i+s[7]*r,this.z=s[2]*t+s[5]*i+s[8]*r,this}applyNormalMatrix(e){return this.applyMatrix3(e).normalize()}applyMatrix4(e){const t=this.x,i=this.y,r=this.z,s=e.elements,o=1/(s[3]*t+s[7]*i+s[11]*r+s[15]);return this.x=(s[0]*t+s[4]*i+s[8]*r+s[12])*o,this.y=(s[1]*t+s[5]*i+s[9]*r+s[13])*o,this.z=(s[2]*t+s[6]*i+s[10]*r+s[14])*o,this}applyQuaternion(e){const t=this.x,i=this.y,r=this.z,s=e.x,o=e.y,u=e.z,f=e.w,p=2*(o*r-u*i),m=2*(u*t-s*r),v=2*(s*i-o*t);return this.x=t+f*p+o*v-u*m,this.y=i+f*m+u*p-s*v,this.z=r+f*v+s*m-o*p,this}project(e){return this.applyMatrix4(e.matrixWorldInverse).applyMatrix4(e.projectionMatrix)}unproject(e){return this.applyMatrix4(e.projectionMatrixInverse).applyMatrix4(e.matrixWorld)}transformDirection(e){const t=this.x,i=this.y,r=this.z,s=e.elements;return this.x=s[0]*t+s[4]*i+s[8]*r,this.y=s[1]*t+s[5]*i+s[9]*r,this.z=s[2]*t+s[6]*i+s[10]*r,this.normalize()}divide(e){return this.x/=e.x,this.y/=e.y,this.z/=e.z,this}divideScalar(e){return this.multiplyScalar(1/e)}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this}clamp(e,t){return this.x=ln(this.x,e.x,t.x),this.y=ln(this.y,e.y,t.y),this.z=ln(this.z,e.z,t.z),this}clampScalar(e,t){return this.x=ln(this.x,e,t),this.y=ln(this.y,e,t),this.z=ln(this.z,e,t),this}clampLength(e,t){const i=this.length();return this.divideScalar(i||1).multiplyScalar(ln(i,e,t))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this.z=Math.trunc(this.z),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this}lerpVectors(e,t,i){return this.x=e.x+(t.x-e.x)*i,this.y=e.y+(t.y-e.y)*i,this.z=e.z+(t.z-e.z)*i,this}cross(e){return this.crossVectors(this,e)}crossVectors(e,t){const i=e.x,r=e.y,s=e.z,o=t.x,u=t.y,f=t.z;return this.x=r*f-s*u,this.y=s*o-i*f,this.z=i*u-r*o,this}projectOnVector(e){const t=e.lengthSq();if(t===0)return this.set(0,0,0);const i=e.dot(this)/t;return this.copy(e).multiplyScalar(i)}projectOnPlane(e){return k1.copy(this).projectOnVector(e),this.sub(k1)}reflect(e){return this.sub(k1.copy(e).multiplyScalar(2*this.dot(e)))}angleTo(e){const t=Math.sqrt(this.lengthSq()*e.lengthSq());if(t===0)return Math.PI/2;const i=this.dot(e)/t;return Math.acos(ln(i,-1,1))}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){const t=this.x-e.x,i=this.y-e.y,r=this.z-e.z;return t*t+i*i+r*r}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)+Math.abs(this.z-e.z)}setFromSpherical(e){return this.setFromSphericalCoords(e.radius,e.phi,e.theta)}setFromSphericalCoords(e,t,i){const r=Math.sin(t)*e;return this.x=r*Math.sin(i),this.y=Math.cos(t)*e,this.z=r*Math.cos(i),this}setFromCylindrical(e){return this.setFromCylindricalCoords(e.radius,e.theta,e.y)}setFromCylindricalCoords(e,t,i){return this.x=e*Math.sin(t),this.y=i,this.z=e*Math.cos(t),this}setFromMatrixPosition(e){const t=e.elements;return this.x=t[12],this.y=t[13],this.z=t[14],this}setFromMatrixScale(e){const t=this.setFromMatrixColumn(e,0).length(),i=this.setFromMatrixColumn(e,1).length(),r=this.setFromMatrixColumn(e,2).length();return this.x=t,this.y=i,this.z=r,this}setFromMatrixColumn(e,t){return this.fromArray(e.elements,t*4)}setFromMatrix3Column(e,t){return this.fromArray(e.elements,t*3)}setFromEuler(e){return this.x=e._x,this.y=e._y,this.z=e._z,this}setFromColor(e){return this.x=e.r,this.y=e.g,this.z=e.b,this}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this.z=e[t+2],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this.z=e.getZ(t),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this}randomDirection(){const e=Math.random()*Math.PI*2,t=Math.random()*2-1,i=Math.sqrt(1-t*t);return this.x=i*Math.cos(e),this.y=t,this.z=i*Math.sin(e),this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z}}const k1=new J,OR=new pa;class xn{constructor(e,t,i,r,s,o,u,f,p){xn.prototype.isMatrix3=!0,this.elements=[1,0,0,0,1,0,0,0,1],e!==void 0&&this.set(e,t,i,r,s,o,u,f,p)}set(e,t,i,r,s,o,u,f,p){const m=this.elements;return m[0]=e,m[1]=r,m[2]=u,m[3]=t,m[4]=s,m[5]=f,m[6]=i,m[7]=o,m[8]=p,this}identity(){return this.set(1,0,0,0,1,0,0,0,1),this}copy(e){const t=this.elements,i=e.elements;return t[0]=i[0],t[1]=i[1],t[2]=i[2],t[3]=i[3],t[4]=i[4],t[5]=i[5],t[6]=i[6],t[7]=i[7],t[8]=i[8],this}extractBasis(e,t,i){return e.setFromMatrix3Column(this,0),t.setFromMatrix3Column(this,1),i.setFromMatrix3Column(this,2),this}setFromMatrix4(e){const t=e.elements;return this.set(t[0],t[4],t[8],t[1],t[5],t[9],t[2],t[6],t[10]),this}multiply(e){return this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,t){const i=e.elements,r=t.elements,s=this.elements,o=i[0],u=i[3],f=i[6],p=i[1],m=i[4],v=i[7],_=i[2],x=i[5],S=i[8],A=r[0],E=r[3],M=r[6],C=r[1],N=r[4],I=r[7],U=r[2],L=r[5],F=r[8];return s[0]=o*A+u*C+f*U,s[3]=o*E+u*N+f*L,s[6]=o*M+u*I+f*F,s[1]=p*A+m*C+v*U,s[4]=p*E+m*N+v*L,s[7]=p*M+m*I+v*F,s[2]=_*A+x*C+S*U,s[5]=_*E+x*N+S*L,s[8]=_*M+x*I+S*F,this}multiplyScalar(e){const t=this.elements;return t[0]*=e,t[3]*=e,t[6]*=e,t[1]*=e,t[4]*=e,t[7]*=e,t[2]*=e,t[5]*=e,t[8]*=e,this}determinant(){const e=this.elements,t=e[0],i=e[1],r=e[2],s=e[3],o=e[4],u=e[5],f=e[6],p=e[7],m=e[8];return t*o*m-t*u*p-i*s*m+i*u*f+r*s*p-r*o*f}invert(){const e=this.elements,t=e[0],i=e[1],r=e[2],s=e[3],o=e[4],u=e[5],f=e[6],p=e[7],m=e[8],v=m*o-u*p,_=u*f-m*s,x=p*s-o*f,S=t*v+i*_+r*x;if(S===0)return this.set(0,0,0,0,0,0,0,0,0);const A=1/S;return e[0]=v*A,e[1]=(r*p-m*i)*A,e[2]=(u*i-r*o)*A,e[3]=_*A,e[4]=(m*t-r*f)*A,e[5]=(r*s-u*t)*A,e[6]=x*A,e[7]=(i*f-p*t)*A,e[8]=(o*t-i*s)*A,this}transpose(){let e;const t=this.elements;return e=t[1],t[1]=t[3],t[3]=e,e=t[2],t[2]=t[6],t[6]=e,e=t[5],t[5]=t[7],t[7]=e,this}getNormalMatrix(e){return this.setFromMatrix4(e).invert().transpose()}transposeIntoArray(e){const t=this.elements;return e[0]=t[0],e[1]=t[3],e[2]=t[6],e[3]=t[1],e[4]=t[4],e[5]=t[7],e[6]=t[2],e[7]=t[5],e[8]=t[8],this}setUvTransform(e,t,i,r,s,o,u){const f=Math.cos(s),p=Math.sin(s);return this.set(i*f,i*p,-i*(f*o+p*u)+o+e,-r*p,r*f,-r*(-p*o+f*u)+u+t,0,0,1),this}scale(e,t){return this.premultiply(B1.makeScale(e,t)),this}rotate(e){return this.premultiply(B1.makeRotation(-e)),this}translate(e,t){return this.premultiply(B1.makeTranslation(e,t)),this}makeTranslation(e,t){return e.isVector2?this.set(1,0,e.x,0,1,e.y,0,0,1):this.set(1,0,e,0,1,t,0,0,1),this}makeRotation(e){const t=Math.cos(e),i=Math.sin(e);return this.set(t,-i,0,i,t,0,0,0,1),this}makeScale(e,t){return this.set(e,0,0,0,t,0,0,0,1),this}equals(e){const t=this.elements,i=e.elements;for(let r=0;r<9;r++)if(t[r]!==i[r])return!1;return!0}fromArray(e,t=0){for(let i=0;i<9;i++)this.elements[i]=e[i+t];return this}toArray(e=[],t=0){const i=this.elements;return e[t]=i[0],e[t+1]=i[1],e[t+2]=i[2],e[t+3]=i[3],e[t+4]=i[4],e[t+5]=i[5],e[t+6]=i[6],e[t+7]=i[7],e[t+8]=i[8],e}clone(){return new this.constructor().fromArray(this.elements)}}const B1=new xn,LR=new xn().set(.4123908,.3575843,.1804808,.212639,.7151687,.0721923,.0193308,.1191948,.9505322),UR=new xn().set(3.2409699,-1.5373832,-.4986108,-.9692436,1.8759675,.0415551,.0556301,-.203977,1.0569715);function GG(){const n={enabled:!0,workingColorSpace:Yo,spaces:{},convert:function(r,s,o){return this.enabled===!1||s===o||!s||!o||(this.spaces[s].transfer===ri&&(r.r=Rc(r.r),r.g=Rc(r.g),r.b=Rc(r.b)),this.spaces[s].primaries!==this.spaces[o].primaries&&(r.applyMatrix3(this.spaces[s].toXYZ),r.applyMatrix3(this.spaces[o].fromXYZ)),this.spaces[o].transfer===ri&&(r.r=Np(r.r),r.g=Np(r.g),r.b=Np(r.b))),r},workingToColorSpace:function(r,s){return this.convert(r,this.workingColorSpace,s)},colorSpaceToWorking:function(r,s){return this.convert(r,s,this.workingColorSpace)},getPrimaries:function(r){return this.spaces[r].primaries},getTransfer:function(r){return r===Ec?L0:this.spaces[r].transfer},getToneMappingMode:function(r){return this.spaces[r].outputColorSpaceConfig.toneMappingMode||"standard"},getLuminanceCoefficients:function(r,s=this.workingColorSpace){return r.fromArray(this.spaces[s].luminanceCoefficients)},define:function(r){Object.assign(this.spaces,r)},_getMatrix:function(r,s,o){return r.copy(this.spaces[s].toXYZ).multiply(this.spaces[o].fromXYZ)},_getDrawingBufferColorSpace:function(r){return this.spaces[r].outputColorSpaceConfig.drawingBufferColorSpace},_getUnpackColorSpace:function(r=this.workingColorSpace){return this.spaces[r].workingColorSpaceConfig.unpackColorSpace},fromWorkingColorSpace:function(r,s){return kp("ColorManagement: .fromWorkingColorSpace() has been renamed to .workingToColorSpace()."),n.workingToColorSpace(r,s)},toWorkingColorSpace:function(r,s){return kp("ColorManagement: .toWorkingColorSpace() has been renamed to .colorSpaceToWorking()."),n.colorSpaceToWorking(r,s)}},e=[.64,.33,.3,.6,.15,.06],t=[.2126,.7152,.0722],i=[.3127,.329];return n.define({[Yo]:{primaries:e,whitePoint:i,transfer:L0,toXYZ:LR,fromXYZ:UR,luminanceCoefficients:t,workingColorSpaceConfig:{unpackColorSpace:rs},outputColorSpaceConfig:{drawingBufferColorSpace:rs}},[rs]:{primaries:e,whitePoint:i,transfer:ri,toXYZ:LR,fromXYZ:UR,luminanceCoefficients:t,outputColorSpaceConfig:{drawingBufferColorSpace:rs}}}),n}const Hn=GG();function Rc(n){return n<.04045?n*.0773993808:Math.pow(n*.9478672986+.0521327014,2.4)}function Np(n){return n<.0031308?n*12.92:1.055*Math.pow(n,.41666)-.055}let Wd;class XP{static getDataURL(e,t="image/png"){if(/^data:/i.test(e.src)||typeof HTMLCanvasElement>"u")return e.src;let i;if(e instanceof HTMLCanvasElement)i=e;else{Wd===void 0&&(Wd=k0("canvas")),Wd.width=e.width,Wd.height=e.height;const r=Wd.getContext("2d");e instanceof ImageData?r.putImageData(e,0,0):r.drawImage(e,0,0,e.width,e.height),i=Wd}return i.toDataURL(t)}static sRGBToLinear(e){if(typeof HTMLImageElement<"u"&&e instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&e instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&e instanceof ImageBitmap){const t=k0("canvas");t.width=e.width,t.height=e.height;const i=t.getContext("2d");i.drawImage(e,0,0,e.width,e.height);const r=i.getImageData(0,0,e.width,e.height),s=r.data;for(let o=0;o<s.length;o++)s[o]=Rc(s[o]/255)*255;return i.putImageData(r,0,0),t}else if(e.data){const t=e.data.slice(0);for(let i=0;i<t.length;i++)t instanceof Uint8Array||t instanceof Uint8ClampedArray?t[i]=Math.floor(Rc(t[i]/255)*255):t[i]=Rc(t[i]);return{data:t,width:e.width,height:e.height}}else return At("ImageUtils.sRGBToLinear(): Unsupported image type. No color space conversion applied."),e}}let jG=0;class Vu{constructor(e=null){this.isSource=!0,Object.defineProperty(this,"id",{value:jG++}),this.uuid=Ea(),this.data=e,this.dataReady=!0,this.version=0}getSize(e){const t=this.data;return typeof HTMLVideoElement<"u"&&t instanceof HTMLVideoElement?e.set(t.videoWidth,t.videoHeight,0):typeof VideoFrame<"u"&&t instanceof VideoFrame?e.set(t.displayHeight,t.displayWidth,0):t!==null?e.set(t.width,t.height,t.depth||0):e.set(0,0,0),e}set needsUpdate(e){e===!0&&this.version++}toJSON(e){const t=e===void 0||typeof e=="string";if(!t&&e.images[this.uuid]!==void 0)return e.images[this.uuid];const i={uuid:this.uuid,url:""},r=this.data;if(r!==null){let s;if(Array.isArray(r)){s=[];for(let o=0,u=r.length;o<u;o++)r[o].isDataTexture?s.push(z1(r[o].image)):s.push(z1(r[o]))}else s=z1(r);i.url=s}return t||(e.images[this.uuid]=i),i}}function z1(n){return typeof HTMLImageElement<"u"&&n instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&n instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&n instanceof ImageBitmap?XP.getDataURL(n):n.data?{data:Array.from(n.data),width:n.width,height:n.height,type:n.data.constructor.name}:(At("Texture: Unable to serialize Texture."),{})}let WG=0;const F1=new J;class hi extends Fl{constructor(e=hi.DEFAULT_IMAGE,t=hi.DEFAULT_MAPPING,i=nr,r=nr,s=Wn,o=Il,u=pr,f=Gr,p=hi.DEFAULT_ANISOTROPY,m=Ec){super(),this.isTexture=!0,Object.defineProperty(this,"id",{value:WG++}),this.uuid=Ea(),this.name="",this.source=new Vu(e),this.mipmaps=[],this.mapping=t,this.channel=0,this.wrapS=i,this.wrapT=r,this.magFilter=s,this.minFilter=o,this.anisotropy=p,this.format=u,this.internalFormat=null,this.type=f,this.offset=new Ye(0,0),this.repeat=new Ye(1,1),this.center=new Ye(0,0),this.rotation=0,this.matrixAutoUpdate=!0,this.matrix=new xn,this.generateMipmaps=!0,this.premultiplyAlpha=!1,this.flipY=!0,this.unpackAlignment=4,this.colorSpace=m,this.userData={},this.updateRanges=[],this.version=0,this.onUpdate=null,this.renderTarget=null,this.isRenderTargetTexture=!1,this.isArrayTexture=!!(e&&e.depth&&e.depth>1),this.pmremVersion=0}get width(){return this.source.getSize(F1).x}get height(){return this.source.getSize(F1).y}get depth(){return this.source.getSize(F1).z}get image(){return this.source.data}set image(e=null){this.source.data=e}updateMatrix(){this.matrix.setUvTransform(this.offset.x,this.offset.y,this.repeat.x,this.repeat.y,this.rotation,this.center.x,this.center.y)}addUpdateRange(e,t){this.updateRanges.push({start:e,count:t})}clearUpdateRanges(){this.updateRanges.length=0}clone(){return new this.constructor().copy(this)}copy(e){return this.name=e.name,this.source=e.source,this.mipmaps=e.mipmaps.slice(0),this.mapping=e.mapping,this.channel=e.channel,this.wrapS=e.wrapS,this.wrapT=e.wrapT,this.magFilter=e.magFilter,this.minFilter=e.minFilter,this.anisotropy=e.anisotropy,this.format=e.format,this.internalFormat=e.internalFormat,this.type=e.type,this.offset.copy(e.offset),this.repeat.copy(e.repeat),this.center.copy(e.center),this.rotation=e.rotation,this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrix.copy(e.matrix),this.generateMipmaps=e.generateMipmaps,this.premultiplyAlpha=e.premultiplyAlpha,this.flipY=e.flipY,this.unpackAlignment=e.unpackAlignment,this.colorSpace=e.colorSpace,this.renderTarget=e.renderTarget,this.isRenderTargetTexture=e.isRenderTargetTexture,this.isArrayTexture=e.isArrayTexture,this.userData=JSON.parse(JSON.stringify(e.userData)),this.needsUpdate=!0,this}setValues(e){for(const t in e){const i=e[t];if(i===void 0){At(`Texture.setValues(): parameter '${t}' has value of undefined.`);continue}const r=this[t];if(r===void 0){At(`Texture.setValues(): property '${t}' does not exist.`);continue}r&&i&&r.isVector2&&i.isVector2||r&&i&&r.isVector3&&i.isVector3||r&&i&&r.isMatrix3&&i.isMatrix3?r.copy(i):this[t]=i}}toJSON(e){const t=e===void 0||typeof e=="string";if(!t&&e.textures[this.uuid]!==void 0)return e.textures[this.uuid];const i={metadata:{version:4.7,type:"Texture",generator:"Texture.toJSON"},uuid:this.uuid,name:this.name,image:this.source.toJSON(e).uuid,mapping:this.mapping,channel:this.channel,repeat:[this.repeat.x,this.repeat.y],offset:[this.offset.x,this.offset.y],center:[this.center.x,this.center.y],rotation:this.rotation,wrap:[this.wrapS,this.wrapT],format:this.format,internalFormat:this.internalFormat,type:this.type,colorSpace:this.colorSpace,minFilter:this.minFilter,magFilter:this.magFilter,anisotropy:this.anisotropy,flipY:this.flipY,generateMipmaps:this.generateMipmaps,premultiplyAlpha:this.premultiplyAlpha,unpackAlignment:this.unpackAlignment};return Object.keys(this.userData).length>0&&(i.userData=this.userData),t||(e.textures[this.uuid]=i),i}dispose(){this.dispatchEvent({type:"dispose"})}transformUv(e){if(this.mapping!==qu)return e;if(e.applyMatrix3(this.matrix),e.x<0||e.x>1)switch(this.wrapS){case D0:e.x=e.x-Math.floor(e.x);break;case nr:e.x=e.x<0?0:1;break;case I0:Math.abs(Math.floor(e.x)%2)===1?e.x=Math.ceil(e.x)-e.x:e.x=e.x-Math.floor(e.x);break}if(e.y<0||e.y>1)switch(this.wrapT){case D0:e.y=e.y-Math.floor(e.y);break;case nr:e.y=e.y<0?0:1;break;case I0:Math.abs(Math.floor(e.y)%2)===1?e.y=Math.ceil(e.y)-e.y:e.y=e.y-Math.floor(e.y);break}return this.flipY&&(e.y=1-e.y),e}set needsUpdate(e){e===!0&&(this.version++,this.source.needsUpdate=!0)}set needsPMREMUpdate(e){e===!0&&this.pmremVersion++}}hi.DEFAULT_IMAGE=null;hi.DEFAULT_MAPPING=qu;hi.DEFAULT_ANISOTROPY=1;class mi{constructor(e=0,t=0,i=0,r=1){mi.prototype.isVector4=!0,this.x=e,this.y=t,this.z=i,this.w=r}get width(){return this.z}set width(e){this.z=e}get height(){return this.w}set height(e){this.w=e}set(e,t,i,r){return this.x=e,this.y=t,this.z=i,this.w=r,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this.w=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setW(e){return this.w=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;case 3:this.w=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;case 3:return this.w;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z,this.w)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this.w=e.w!==void 0?e.w:1,this}add(e){return this.x+=e.x,this.y+=e.y,this.z+=e.z,this.w+=e.w,this}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this.w+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this.w=e.w+t.w,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this.w+=e.w*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this.z-=e.z,this.w-=e.w,this}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this.w-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this.w=e.w-t.w,this}multiply(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this.w*=e.w,this}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this.w*=e,this}applyMatrix4(e){const t=this.x,i=this.y,r=this.z,s=this.w,o=e.elements;return this.x=o[0]*t+o[4]*i+o[8]*r+o[12]*s,this.y=o[1]*t+o[5]*i+o[9]*r+o[13]*s,this.z=o[2]*t+o[6]*i+o[10]*r+o[14]*s,this.w=o[3]*t+o[7]*i+o[11]*r+o[15]*s,this}divide(e){return this.x/=e.x,this.y/=e.y,this.z/=e.z,this.w/=e.w,this}divideScalar(e){return this.multiplyScalar(1/e)}setAxisAngleFromQuaternion(e){this.w=2*Math.acos(e.w);const t=Math.sqrt(1-e.w*e.w);return t<1e-4?(this.x=1,this.y=0,this.z=0):(this.x=e.x/t,this.y=e.y/t,this.z=e.z/t),this}setAxisAngleFromRotationMatrix(e){let t,i,r,s;const f=e.elements,p=f[0],m=f[4],v=f[8],_=f[1],x=f[5],S=f[9],A=f[2],E=f[6],M=f[10];if(Math.abs(m-_)<.01&&Math.abs(v-A)<.01&&Math.abs(S-E)<.01){if(Math.abs(m+_)<.1&&Math.abs(v+A)<.1&&Math.abs(S+E)<.1&&Math.abs(p+x+M-3)<.1)return this.set(1,0,0,0),this;t=Math.PI;const N=(p+1)/2,I=(x+1)/2,U=(M+1)/2,L=(m+_)/4,F=(v+A)/4,H=(S+E)/4;return N>I&&N>U?N<.01?(i=0,r=.707106781,s=.707106781):(i=Math.sqrt(N),r=L/i,s=F/i):I>U?I<.01?(i=.707106781,r=0,s=.707106781):(r=Math.sqrt(I),i=L/r,s=H/r):U<.01?(i=.707106781,r=.707106781,s=0):(s=Math.sqrt(U),i=F/s,r=H/s),this.set(i,r,s,t),this}let C=Math.sqrt((E-S)*(E-S)+(v-A)*(v-A)+(_-m)*(_-m));return Math.abs(C)<.001&&(C=1),this.x=(E-S)/C,this.y=(v-A)/C,this.z=(_-m)/C,this.w=Math.acos((p+x+M-1)/2),this}setFromMatrixPosition(e){const t=e.elements;return this.x=t[12],this.y=t[13],this.z=t[14],this.w=t[15],this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this.w=Math.min(this.w,e.w),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this.w=Math.max(this.w,e.w),this}clamp(e,t){return this.x=ln(this.x,e.x,t.x),this.y=ln(this.y,e.y,t.y),this.z=ln(this.z,e.z,t.z),this.w=ln(this.w,e.w,t.w),this}clampScalar(e,t){return this.x=ln(this.x,e,t),this.y=ln(this.y,e,t),this.z=ln(this.z,e,t),this.w=ln(this.w,e,t),this}clampLength(e,t){const i=this.length();return this.divideScalar(i||1).multiplyScalar(ln(i,e,t))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this.w=Math.floor(this.w),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this.w=Math.ceil(this.w),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this.w=Math.round(this.w),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this.z=Math.trunc(this.z),this.w=Math.trunc(this.w),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z+this.w*e.w}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)+Math.abs(this.w)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this.w+=(e.w-this.w)*t,this}lerpVectors(e,t,i){return this.x=e.x+(t.x-e.x)*i,this.y=e.y+(t.y-e.y)*i,this.z=e.z+(t.z-e.z)*i,this.w=e.w+(t.w-e.w)*i,this}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z&&e.w===this.w}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this.z=e[t+2],this.w=e[t+3],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e[t+3]=this.w,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this.z=e.getZ(t),this.w=e.getW(t),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this.w=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z,yield this.w}}class YE extends Fl{constructor(e=1,t=1,i={}){super(),i=Object.assign({generateMipmaps:!1,internalFormat:null,minFilter:Wn,depthBuffer:!0,stencilBuffer:!1,resolveDepthBuffer:!0,resolveStencilBuffer:!0,depthTexture:null,samples:0,count:1,depth:1,multiview:!1},i),this.isRenderTarget=!0,this.width=e,this.height=t,this.depth=i.depth,this.scissor=new mi(0,0,e,t),this.scissorTest=!1,this.viewport=new mi(0,0,e,t);const r={width:e,height:t,depth:i.depth},s=new hi(r);this.textures=[];const o=i.count;for(let u=0;u<o;u++)this.textures[u]=s.clone(),this.textures[u].isRenderTargetTexture=!0,this.textures[u].renderTarget=this;this._setTextureOptions(i),this.depthBuffer=i.depthBuffer,this.stencilBuffer=i.stencilBuffer,this.resolveDepthBuffer=i.resolveDepthBuffer,this.resolveStencilBuffer=i.resolveStencilBuffer,this._depthTexture=null,this.depthTexture=i.depthTexture,this.samples=i.samples,this.multiview=i.multiview}_setTextureOptions(e={}){const t={minFilter:Wn,generateMipmaps:!1,flipY:!1,internalFormat:null};e.mapping!==void 0&&(t.mapping=e.mapping),e.wrapS!==void 0&&(t.wrapS=e.wrapS),e.wrapT!==void 0&&(t.wrapT=e.wrapT),e.wrapR!==void 0&&(t.wrapR=e.wrapR),e.magFilter!==void 0&&(t.magFilter=e.magFilter),e.minFilter!==void 0&&(t.minFilter=e.minFilter),e.format!==void 0&&(t.format=e.format),e.type!==void 0&&(t.type=e.type),e.anisotropy!==void 0&&(t.anisotropy=e.anisotropy),e.colorSpace!==void 0&&(t.colorSpace=e.colorSpace),e.flipY!==void 0&&(t.flipY=e.flipY),e.generateMipmaps!==void 0&&(t.generateMipmaps=e.generateMipmaps),e.internalFormat!==void 0&&(t.internalFormat=e.internalFormat);for(let i=0;i<this.textures.length;i++)this.textures[i].setValues(t)}get texture(){return this.textures[0]}set texture(e){this.textures[0]=e}set depthTexture(e){this._depthTexture!==null&&(this._depthTexture.renderTarget=null),e!==null&&(e.renderTarget=this),this._depthTexture=e}get depthTexture(){return this._depthTexture}setSize(e,t,i=1){if(this.width!==e||this.height!==t||this.depth!==i){this.width=e,this.height=t,this.depth=i;for(let r=0,s=this.textures.length;r<s;r++)this.textures[r].image.width=e,this.textures[r].image.height=t,this.textures[r].image.depth=i,this.textures[r].isData3DTexture!==!0&&(this.textures[r].isArrayTexture=this.textures[r].image.depth>1);this.dispose()}this.viewport.set(0,0,e,t),this.scissor.set(0,0,e,t)}clone(){return new this.constructor().copy(this)}copy(e){this.width=e.width,this.height=e.height,this.depth=e.depth,this.scissor.copy(e.scissor),this.scissorTest=e.scissorTest,this.viewport.copy(e.viewport),this.textures.length=0;for(let t=0,i=e.textures.length;t<i;t++){this.textures[t]=e.textures[t].clone(),this.textures[t].isRenderTargetTexture=!0,this.textures[t].renderTarget=this;const r=Object.assign({},e.textures[t].image);this.textures[t].source=new Vu(r)}return this.depthBuffer=e.depthBuffer,this.stencilBuffer=e.stencilBuffer,this.resolveDepthBuffer=e.resolveDepthBuffer,this.resolveStencilBuffer=e.resolveStencilBuffer,e.depthTexture!==null&&(this.depthTexture=e.depthTexture.clone()),this.samples=e.samples,this}dispose(){this.dispatchEvent({type:"dispose"})}}class Hs extends YE{constructor(e=1,t=1,i={}){super(e,t,i),this.isWebGLRenderTarget=!0}}class Xb extends hi{constructor(e=null,t=1,i=1,r=1){super(null),this.isDataArrayTexture=!0,this.image={data:e,width:t,height:i,depth:r},this.magFilter=dr,this.minFilter=dr,this.wrapR=nr,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1,this.layerUpdates=new Set}addLayerUpdate(e){this.layerUpdates.add(e)}clearLayerUpdates(){this.layerUpdates.clear()}}class qG extends Hs{constructor(e=1,t=1,i=1,r={}){super(e,t,r),this.isWebGLArrayRenderTarget=!0,this.depth=i,this.texture=new Xb(null,e,t,i),this._setTextureOptions(r),this.texture.isRenderTargetTexture=!0}}class $b extends hi{constructor(e=null,t=1,i=1,r=1){super(null),this.isData3DTexture=!0,this.image={data:e,width:t,height:i,depth:r},this.magFilter=dr,this.minFilter=dr,this.wrapR=nr,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}class XG extends Hs{constructor(e=1,t=1,i=1,r={}){super(e,t,r),this.isWebGL3DRenderTarget=!0,this.depth=i,this.texture=new $b(null,e,t,i),this._setTextureOptions(r),this.texture.isRenderTargetTexture=!0}}class bs{constructor(e=new J(1/0,1/0,1/0),t=new J(-1/0,-1/0,-1/0)){this.isBox3=!0,this.min=e,this.max=t}set(e,t){return this.min.copy(e),this.max.copy(t),this}setFromArray(e){this.makeEmpty();for(let t=0,i=e.length;t<i;t+=3)this.expandByPoint(Oo.fromArray(e,t));return this}setFromBufferAttribute(e){this.makeEmpty();for(let t=0,i=e.count;t<i;t++)this.expandByPoint(Oo.fromBufferAttribute(e,t));return this}setFromPoints(e){this.makeEmpty();for(let t=0,i=e.length;t<i;t++)this.expandByPoint(e[t]);return this}setFromCenterAndSize(e,t){const i=Oo.copy(t).multiplyScalar(.5);return this.min.copy(e).sub(i),this.max.copy(e).add(i),this}setFromObject(e,t=!1){return this.makeEmpty(),this.expandByObject(e,t)}clone(){return new this.constructor().copy(this)}copy(e){return this.min.copy(e.min),this.max.copy(e.max),this}makeEmpty(){return this.min.x=this.min.y=this.min.z=1/0,this.max.x=this.max.y=this.max.z=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y||this.max.z<this.min.z}getCenter(e){return this.isEmpty()?e.set(0,0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(e){return this.isEmpty()?e.set(0,0,0):e.subVectors(this.max,this.min)}expandByPoint(e){return this.min.min(e),this.max.max(e),this}expandByVector(e){return this.min.sub(e),this.max.add(e),this}expandByScalar(e){return this.min.addScalar(-e),this.max.addScalar(e),this}expandByObject(e,t=!1){e.updateWorldMatrix(!1,!1);const i=e.geometry;if(i!==void 0){const s=i.getAttribute("position");if(t===!0&&s!==void 0&&e.isInstancedMesh!==!0)for(let o=0,u=s.count;o<u;o++)e.isMesh===!0?e.getVertexPosition(o,Oo):Oo.fromBufferAttribute(s,o),Oo.applyMatrix4(e.matrixWorld),this.expandByPoint(Oo);else e.boundingBox!==void 0?(e.boundingBox===null&&e.computeBoundingBox(),f_.copy(e.boundingBox)):(i.boundingBox===null&&i.computeBoundingBox(),f_.copy(i.boundingBox)),f_.applyMatrix4(e.matrixWorld),this.union(f_)}const r=e.children;for(let s=0,o=r.length;s<o;s++)this.expandByObject(r[s],t);return this}containsPoint(e){return e.x>=this.min.x&&e.x<=this.max.x&&e.y>=this.min.y&&e.y<=this.max.y&&e.z>=this.min.z&&e.z<=this.max.z}containsBox(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y&&this.min.z<=e.min.z&&e.max.z<=this.max.z}getParameter(e,t){return t.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y),(e.z-this.min.z)/(this.max.z-this.min.z))}intersectsBox(e){return e.max.x>=this.min.x&&e.min.x<=this.max.x&&e.max.y>=this.min.y&&e.min.y<=this.max.y&&e.max.z>=this.min.z&&e.min.z<=this.max.z}intersectsSphere(e){return this.clampPoint(e.center,Oo),Oo.distanceToSquared(e.center)<=e.radius*e.radius}intersectsPlane(e){let t,i;return e.normal.x>0?(t=e.normal.x*this.min.x,i=e.normal.x*this.max.x):(t=e.normal.x*this.max.x,i=e.normal.x*this.min.x),e.normal.y>0?(t+=e.normal.y*this.min.y,i+=e.normal.y*this.max.y):(t+=e.normal.y*this.max.y,i+=e.normal.y*this.min.y),e.normal.z>0?(t+=e.normal.z*this.min.z,i+=e.normal.z*this.max.z):(t+=e.normal.z*this.max.z,i+=e.normal.z*this.min.z),t<=-e.constant&&i>=-e.constant}intersectsTriangle(e){if(this.isEmpty())return!1;this.getCenter(Ig),d_.subVectors(this.max,Ig),qd.subVectors(e.a,Ig),Xd.subVectors(e.b,Ig),$d.subVectors(e.c,Ig),Eu.subVectors(Xd,qd),Tu.subVectors($d,Xd),Gh.subVectors(qd,$d);let t=[0,-Eu.z,Eu.y,0,-Tu.z,Tu.y,0,-Gh.z,Gh.y,Eu.z,0,-Eu.x,Tu.z,0,-Tu.x,Gh.z,0,-Gh.x,-Eu.y,Eu.x,0,-Tu.y,Tu.x,0,-Gh.y,Gh.x,0];return!V1(t,qd,Xd,$d,d_)||(t=[1,0,0,0,1,0,0,0,1],!V1(t,qd,Xd,$d,d_))?!1:(p_.crossVectors(Eu,Tu),t=[p_.x,p_.y,p_.z],V1(t,qd,Xd,$d,d_))}clampPoint(e,t){return t.copy(e).clamp(this.min,this.max)}distanceToPoint(e){return this.clampPoint(e,Oo).distanceTo(e)}getBoundingSphere(e){return this.isEmpty()?e.makeEmpty():(this.getCenter(e.center),e.radius=this.getSize(Oo).length()*.5),e}intersect(e){return this.min.max(e.min),this.max.min(e.max),this.isEmpty()&&this.makeEmpty(),this}union(e){return this.min.min(e.min),this.max.max(e.max),this}applyMatrix4(e){return this.isEmpty()?this:(yc[0].set(this.min.x,this.min.y,this.min.z).applyMatrix4(e),yc[1].set(this.min.x,this.min.y,this.max.z).applyMatrix4(e),yc[2].set(this.min.x,this.max.y,this.min.z).applyMatrix4(e),yc[3].set(this.min.x,this.max.y,this.max.z).applyMatrix4(e),yc[4].set(this.max.x,this.min.y,this.min.z).applyMatrix4(e),yc[5].set(this.max.x,this.min.y,this.max.z).applyMatrix4(e),yc[6].set(this.max.x,this.max.y,this.min.z).applyMatrix4(e),yc[7].set(this.max.x,this.max.y,this.max.z).applyMatrix4(e),this.setFromPoints(yc),this)}translate(e){return this.min.add(e),this.max.add(e),this}equals(e){return e.min.equals(this.min)&&e.max.equals(this.max)}toJSON(){return{min:this.min.toArray(),max:this.max.toArray()}}fromJSON(e){return this.min.fromArray(e.min),this.max.fromArray(e.max),this}}const yc=[new J,new J,new J,new J,new J,new J,new J,new J],Oo=new J,f_=new bs,qd=new J,Xd=new J,$d=new J,Eu=new J,Tu=new J,Gh=new J,Ig=new J,d_=new J,p_=new J,jh=new J;function V1(n,e,t,i,r){for(let s=0,o=n.length-3;s<=o;s+=3){jh.fromArray(n,s);const u=r.x*Math.abs(jh.x)+r.y*Math.abs(jh.y)+r.z*Math.abs(jh.z),f=e.dot(jh),p=t.dot(jh),m=i.dot(jh);if(Math.max(-Math.max(f,p,m),Math.min(f,p,m))>u)return!1}return!0}const $G=new bs,Pg=new J,H1=new J;class ss{constructor(e=new J,t=-1){this.isSphere=!0,this.center=e,this.radius=t}set(e,t){return this.center.copy(e),this.radius=t,this}setFromPoints(e,t){const i=this.center;t!==void 0?i.copy(t):$G.setFromPoints(e).getCenter(i);let r=0;for(let s=0,o=e.length;s<o;s++)r=Math.max(r,i.distanceToSquared(e[s]));return this.radius=Math.sqrt(r),this}copy(e){return this.center.copy(e.center),this.radius=e.radius,this}isEmpty(){return this.radius<0}makeEmpty(){return this.center.set(0,0,0),this.radius=-1,this}containsPoint(e){return e.distanceToSquared(this.center)<=this.radius*this.radius}distanceToPoint(e){return e.distanceTo(this.center)-this.radius}intersectsSphere(e){const t=this.radius+e.radius;return e.center.distanceToSquared(this.center)<=t*t}intersectsBox(e){return e.intersectsSphere(this)}intersectsPlane(e){return Math.abs(e.distanceToPoint(this.center))<=this.radius}clampPoint(e,t){const i=this.center.distanceToSquared(e);return t.copy(e),i>this.radius*this.radius&&(t.sub(this.center).normalize(),t.multiplyScalar(this.radius).add(this.center)),t}getBoundingBox(e){return this.isEmpty()?(e.makeEmpty(),e):(e.set(this.center,this.center),e.expandByScalar(this.radius),e)}applyMatrix4(e){return this.center.applyMatrix4(e),this.radius=this.radius*e.getMaxScaleOnAxis(),this}translate(e){return this.center.add(e),this}expandByPoint(e){if(this.isEmpty())return this.center.copy(e),this.radius=0,this;Pg.subVectors(e,this.center);const t=Pg.lengthSq();if(t>this.radius*this.radius){const i=Math.sqrt(t),r=(i-this.radius)*.5;this.center.addScaledVector(Pg,r/i),this.radius+=r}return this}union(e){return e.isEmpty()?this:this.isEmpty()?(this.copy(e),this):(this.center.equals(e.center)===!0?this.radius=Math.max(this.radius,e.radius):(H1.subVectors(e.center,this.center).setLength(e.radius),this.expandByPoint(Pg.copy(e.center).add(H1)),this.expandByPoint(Pg.copy(e.center).sub(H1))),this)}equals(e){return e.center.equals(this.center)&&e.radius===this.radius}clone(){return new this.constructor().copy(this)}toJSON(){return{radius:this.radius,center:this.center.toArray()}}fromJSON(e){return this.radius=e.radius,this.center.fromArray(e.center),this}}const _c=new J,G1=new J,m_=new J,Au=new J,j1=new J,g_=new J,W1=new J;class Qp{constructor(e=new J,t=new J(0,0,-1)){this.origin=e,this.direction=t}set(e,t){return this.origin.copy(e),this.direction.copy(t),this}copy(e){return this.origin.copy(e.origin),this.direction.copy(e.direction),this}at(e,t){return t.copy(this.origin).addScaledVector(this.direction,e)}lookAt(e){return this.direction.copy(e).sub(this.origin).normalize(),this}recast(e){return this.origin.copy(this.at(e,_c)),this}closestPointToPoint(e,t){t.subVectors(e,this.origin);const i=t.dot(this.direction);return i<0?t.copy(this.origin):t.copy(this.origin).addScaledVector(this.direction,i)}distanceToPoint(e){return Math.sqrt(this.distanceSqToPoint(e))}distanceSqToPoint(e){const t=_c.subVectors(e,this.origin).dot(this.direction);return t<0?this.origin.distanceToSquared(e):(_c.copy(this.origin).addScaledVector(this.direction,t),_c.distanceToSquared(e))}distanceSqToSegment(e,t,i,r){G1.copy(e).add(t).multiplyScalar(.5),m_.copy(t).sub(e).normalize(),Au.copy(this.origin).sub(G1);const s=e.distanceTo(t)*.5,o=-this.direction.dot(m_),u=Au.dot(this.direction),f=-Au.dot(m_),p=Au.lengthSq(),m=Math.abs(1-o*o);let v,_,x,S;if(m>0)if(v=o*f-u,_=o*u-f,S=s*m,v>=0)if(_>=-S)if(_<=S){const A=1/m;v*=A,_*=A,x=v*(v+o*_+2*u)+_*(o*v+_+2*f)+p}else _=s,v=Math.max(0,-(o*_+u)),x=-v*v+_*(_+2*f)+p;else _=-s,v=Math.max(0,-(o*_+u)),x=-v*v+_*(_+2*f)+p;else _<=-S?(v=Math.max(0,-(-o*s+u)),_=v>0?-s:Math.min(Math.max(-s,-f),s),x=-v*v+_*(_+2*f)+p):_<=S?(v=0,_=Math.min(Math.max(-s,-f),s),x=_*(_+2*f)+p):(v=Math.max(0,-(o*s+u)),_=v>0?s:Math.min(Math.max(-s,-f),s),x=-v*v+_*(_+2*f)+p);else _=o>0?-s:s,v=Math.max(0,-(o*_+u)),x=-v*v+_*(_+2*f)+p;return i&&i.copy(this.origin).addScaledVector(this.direction,v),r&&r.copy(G1).addScaledVector(m_,_),x}intersectSphere(e,t){_c.subVectors(e.center,this.origin);const i=_c.dot(this.direction),r=_c.dot(_c)-i*i,s=e.radius*e.radius;if(r>s)return null;const o=Math.sqrt(s-r),u=i-o,f=i+o;return f<0?null:u<0?this.at(f,t):this.at(u,t)}intersectsSphere(e){return e.radius<0?!1:this.distanceSqToPoint(e.center)<=e.radius*e.radius}distanceToPlane(e){const t=e.normal.dot(this.direction);if(t===0)return e.distanceToPoint(this.origin)===0?0:null;const i=-(this.origin.dot(e.normal)+e.constant)/t;return i>=0?i:null}intersectPlane(e,t){const i=this.distanceToPlane(e);return i===null?null:this.at(i,t)}intersectsPlane(e){const t=e.distanceToPoint(this.origin);return t===0||e.normal.dot(this.direction)*t<0}intersectBox(e,t){let i,r,s,o,u,f;const p=1/this.direction.x,m=1/this.direction.y,v=1/this.direction.z,_=this.origin;return p>=0?(i=(e.min.x-_.x)*p,r=(e.max.x-_.x)*p):(i=(e.max.x-_.x)*p,r=(e.min.x-_.x)*p),m>=0?(s=(e.min.y-_.y)*m,o=(e.max.y-_.y)*m):(s=(e.max.y-_.y)*m,o=(e.min.y-_.y)*m),i>o||s>r||((s>i||isNaN(i))&&(i=s),(o<r||isNaN(r))&&(r=o),v>=0?(u=(e.min.z-_.z)*v,f=(e.max.z-_.z)*v):(u=(e.max.z-_.z)*v,f=(e.min.z-_.z)*v),i>f||u>r)||((u>i||i!==i)&&(i=u),(f<r||r!==r)&&(r=f),r<0)?null:this.at(i>=0?i:r,t)}intersectsBox(e){return this.intersectBox(e,_c)!==null}intersectTriangle(e,t,i,r,s){j1.subVectors(t,e),g_.subVectors(i,e),W1.crossVectors(j1,g_);let o=this.direction.dot(W1),u;if(o>0){if(r)return null;u=1}else if(o<0)u=-1,o=-o;else return null;Au.subVectors(this.origin,e);const f=u*this.direction.dot(g_.crossVectors(Au,g_));if(f<0)return null;const p=u*this.direction.dot(j1.cross(Au));if(p<0||f+p>o)return null;const m=-u*Au.dot(W1);return m<0?null:this.at(m/o,s)}applyMatrix4(e){return this.origin.applyMatrix4(e),this.direction.transformDirection(e),this}equals(e){return e.origin.equals(this.origin)&&e.direction.equals(this.direction)}clone(){return new this.constructor().copy(this)}}class un{constructor(e,t,i,r,s,o,u,f,p,m,v,_,x,S,A,E){un.prototype.isMatrix4=!0,this.elements=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],e!==void 0&&this.set(e,t,i,r,s,o,u,f,p,m,v,_,x,S,A,E)}set(e,t,i,r,s,o,u,f,p,m,v,_,x,S,A,E){const M=this.elements;return M[0]=e,M[4]=t,M[8]=i,M[12]=r,M[1]=s,M[5]=o,M[9]=u,M[13]=f,M[2]=p,M[6]=m,M[10]=v,M[14]=_,M[3]=x,M[7]=S,M[11]=A,M[15]=E,this}identity(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this}clone(){return new un().fromArray(this.elements)}copy(e){const t=this.elements,i=e.elements;return t[0]=i[0],t[1]=i[1],t[2]=i[2],t[3]=i[3],t[4]=i[4],t[5]=i[5],t[6]=i[6],t[7]=i[7],t[8]=i[8],t[9]=i[9],t[10]=i[10],t[11]=i[11],t[12]=i[12],t[13]=i[13],t[14]=i[14],t[15]=i[15],this}copyPosition(e){const t=this.elements,i=e.elements;return t[12]=i[12],t[13]=i[13],t[14]=i[14],this}setFromMatrix3(e){const t=e.elements;return this.set(t[0],t[3],t[6],0,t[1],t[4],t[7],0,t[2],t[5],t[8],0,0,0,0,1),this}extractBasis(e,t,i){return this.determinant()===0?(e.set(1,0,0),t.set(0,1,0),i.set(0,0,1),this):(e.setFromMatrixColumn(this,0),t.setFromMatrixColumn(this,1),i.setFromMatrixColumn(this,2),this)}makeBasis(e,t,i){return this.set(e.x,t.x,i.x,0,e.y,t.y,i.y,0,e.z,t.z,i.z,0,0,0,0,1),this}extractRotation(e){if(e.determinant()===0)return this.identity();const t=this.elements,i=e.elements,r=1/Yd.setFromMatrixColumn(e,0).length(),s=1/Yd.setFromMatrixColumn(e,1).length(),o=1/Yd.setFromMatrixColumn(e,2).length();return t[0]=i[0]*r,t[1]=i[1]*r,t[2]=i[2]*r,t[3]=0,t[4]=i[4]*s,t[5]=i[5]*s,t[6]=i[6]*s,t[7]=0,t[8]=i[8]*o,t[9]=i[9]*o,t[10]=i[10]*o,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this}makeRotationFromEuler(e){const t=this.elements,i=e.x,r=e.y,s=e.z,o=Math.cos(i),u=Math.sin(i),f=Math.cos(r),p=Math.sin(r),m=Math.cos(s),v=Math.sin(s);if(e.order==="XYZ"){const _=o*m,x=o*v,S=u*m,A=u*v;t[0]=f*m,t[4]=-f*v,t[8]=p,t[1]=x+S*p,t[5]=_-A*p,t[9]=-u*f,t[2]=A-_*p,t[6]=S+x*p,t[10]=o*f}else if(e.order==="YXZ"){const _=f*m,x=f*v,S=p*m,A=p*v;t[0]=_+A*u,t[4]=S*u-x,t[8]=o*p,t[1]=o*v,t[5]=o*m,t[9]=-u,t[2]=x*u-S,t[6]=A+_*u,t[10]=o*f}else if(e.order==="ZXY"){const _=f*m,x=f*v,S=p*m,A=p*v;t[0]=_-A*u,t[4]=-o*v,t[8]=S+x*u,t[1]=x+S*u,t[5]=o*m,t[9]=A-_*u,t[2]=-o*p,t[6]=u,t[10]=o*f}else if(e.order==="ZYX"){const _=o*m,x=o*v,S=u*m,A=u*v;t[0]=f*m,t[4]=S*p-x,t[8]=_*p+A,t[1]=f*v,t[5]=A*p+_,t[9]=x*p-S,t[2]=-p,t[6]=u*f,t[10]=o*f}else if(e.order==="YZX"){const _=o*f,x=o*p,S=u*f,A=u*p;t[0]=f*m,t[4]=A-_*v,t[8]=S*v+x,t[1]=v,t[5]=o*m,t[9]=-u*m,t[2]=-p*m,t[6]=x*v+S,t[10]=_-A*v}else if(e.order==="XZY"){const _=o*f,x=o*p,S=u*f,A=u*p;t[0]=f*m,t[4]=-v,t[8]=p*m,t[1]=_*v+A,t[5]=o*m,t[9]=x*v-S,t[2]=S*v-x,t[6]=u*m,t[10]=A*v+_}return t[3]=0,t[7]=0,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this}makeRotationFromQuaternion(e){return this.compose(YG,e,ZG)}lookAt(e,t,i){const r=this.elements;return xa.subVectors(e,t),xa.lengthSq()===0&&(xa.z=1),xa.normalize(),Cu.crossVectors(i,xa),Cu.lengthSq()===0&&(Math.abs(i.z)===1?xa.x+=1e-4:xa.z+=1e-4,xa.normalize(),Cu.crossVectors(i,xa)),Cu.normalize(),v_.crossVectors(xa,Cu),r[0]=Cu.x,r[4]=v_.x,r[8]=xa.x,r[1]=Cu.y,r[5]=v_.y,r[9]=xa.y,r[2]=Cu.z,r[6]=v_.z,r[10]=xa.z,this}multiply(e){return this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,t){const i=e.elements,r=t.elements,s=this.elements,o=i[0],u=i[4],f=i[8],p=i[12],m=i[1],v=i[5],_=i[9],x=i[13],S=i[2],A=i[6],E=i[10],M=i[14],C=i[3],N=i[7],I=i[11],U=i[15],L=r[0],F=r[4],H=r[8],P=r[12],k=r[1],Y=r[5],ie=r[9],te=r[13],le=r[2],de=r[6],Z=r[10],Q=r[14],ve=r[3],Te=r[7],we=r[11],X=r[15];return s[0]=o*L+u*k+f*le+p*ve,s[4]=o*F+u*Y+f*de+p*Te,s[8]=o*H+u*ie+f*Z+p*we,s[12]=o*P+u*te+f*Q+p*X,s[1]=m*L+v*k+_*le+x*ve,s[5]=m*F+v*Y+_*de+x*Te,s[9]=m*H+v*ie+_*Z+x*we,s[13]=m*P+v*te+_*Q+x*X,s[2]=S*L+A*k+E*le+M*ve,s[6]=S*F+A*Y+E*de+M*Te,s[10]=S*H+A*ie+E*Z+M*we,s[14]=S*P+A*te+E*Q+M*X,s[3]=C*L+N*k+I*le+U*ve,s[7]=C*F+N*Y+I*de+U*Te,s[11]=C*H+N*ie+I*Z+U*we,s[15]=C*P+N*te+I*Q+U*X,this}multiplyScalar(e){const t=this.elements;return t[0]*=e,t[4]*=e,t[8]*=e,t[12]*=e,t[1]*=e,t[5]*=e,t[9]*=e,t[13]*=e,t[2]*=e,t[6]*=e,t[10]*=e,t[14]*=e,t[3]*=e,t[7]*=e,t[11]*=e,t[15]*=e,this}determinant(){const e=this.elements,t=e[0],i=e[4],r=e[8],s=e[12],o=e[1],u=e[5],f=e[9],p=e[13],m=e[2],v=e[6],_=e[10],x=e[14],S=e[3],A=e[7],E=e[11],M=e[15],C=f*x-p*_,N=u*x-p*v,I=u*_-f*v,U=o*x-p*m,L=o*_-f*m,F=o*v-u*m;return t*(A*C-E*N+M*I)-i*(S*C-E*U+M*L)+r*(S*N-A*U+M*F)-s*(S*I-A*L+E*F)}transpose(){const e=this.elements;let t;return t=e[1],e[1]=e[4],e[4]=t,t=e[2],e[2]=e[8],e[8]=t,t=e[6],e[6]=e[9],e[9]=t,t=e[3],e[3]=e[12],e[12]=t,t=e[7],e[7]=e[13],e[13]=t,t=e[11],e[11]=e[14],e[14]=t,this}setPosition(e,t,i){const r=this.elements;return e.isVector3?(r[12]=e.x,r[13]=e.y,r[14]=e.z):(r[12]=e,r[13]=t,r[14]=i),this}invert(){const e=this.elements,t=e[0],i=e[1],r=e[2],s=e[3],o=e[4],u=e[5],f=e[6],p=e[7],m=e[8],v=e[9],_=e[10],x=e[11],S=e[12],A=e[13],E=e[14],M=e[15],C=v*E*p-A*_*p+A*f*x-u*E*x-v*f*M+u*_*M,N=S*_*p-m*E*p-S*f*x+o*E*x+m*f*M-o*_*M,I=m*A*p-S*v*p+S*u*x-o*A*x-m*u*M+o*v*M,U=S*v*f-m*A*f-S*u*_+o*A*_+m*u*E-o*v*E,L=t*C+i*N+r*I+s*U;if(L===0)return this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0);const F=1/L;return e[0]=C*F,e[1]=(A*_*s-v*E*s-A*r*x+i*E*x+v*r*M-i*_*M)*F,e[2]=(u*E*s-A*f*s+A*r*p-i*E*p-u*r*M+i*f*M)*F,e[3]=(v*f*s-u*_*s-v*r*p+i*_*p+u*r*x-i*f*x)*F,e[4]=N*F,e[5]=(m*E*s-S*_*s+S*r*x-t*E*x-m*r*M+t*_*M)*F,e[6]=(S*f*s-o*E*s-S*r*p+t*E*p+o*r*M-t*f*M)*F,e[7]=(o*_*s-m*f*s+m*r*p-t*_*p-o*r*x+t*f*x)*F,e[8]=I*F,e[9]=(S*v*s-m*A*s-S*i*x+t*A*x+m*i*M-t*v*M)*F,e[10]=(o*A*s-S*u*s+S*i*p-t*A*p-o*i*M+t*u*M)*F,e[11]=(m*u*s-o*v*s-m*i*p+t*v*p+o*i*x-t*u*x)*F,e[12]=U*F,e[13]=(m*A*r-S*v*r+S*i*_-t*A*_-m*i*E+t*v*E)*F,e[14]=(S*u*r-o*A*r-S*i*f+t*A*f+o*i*E-t*u*E)*F,e[15]=(o*v*r-m*u*r+m*i*f-t*v*f-o*i*_+t*u*_)*F,this}scale(e){const t=this.elements,i=e.x,r=e.y,s=e.z;return t[0]*=i,t[4]*=r,t[8]*=s,t[1]*=i,t[5]*=r,t[9]*=s,t[2]*=i,t[6]*=r,t[10]*=s,t[3]*=i,t[7]*=r,t[11]*=s,this}getMaxScaleOnAxis(){const e=this.elements,t=e[0]*e[0]+e[1]*e[1]+e[2]*e[2],i=e[4]*e[4]+e[5]*e[5]+e[6]*e[6],r=e[8]*e[8]+e[9]*e[9]+e[10]*e[10];return Math.sqrt(Math.max(t,i,r))}makeTranslation(e,t,i){return e.isVector3?this.set(1,0,0,e.x,0,1,0,e.y,0,0,1,e.z,0,0,0,1):this.set(1,0,0,e,0,1,0,t,0,0,1,i,0,0,0,1),this}makeRotationX(e){const t=Math.cos(e),i=Math.sin(e);return this.set(1,0,0,0,0,t,-i,0,0,i,t,0,0,0,0,1),this}makeRotationY(e){const t=Math.cos(e),i=Math.sin(e);return this.set(t,0,i,0,0,1,0,0,-i,0,t,0,0,0,0,1),this}makeRotationZ(e){const t=Math.cos(e),i=Math.sin(e);return this.set(t,-i,0,0,i,t,0,0,0,0,1,0,0,0,0,1),this}makeRotationAxis(e,t){const i=Math.cos(t),r=Math.sin(t),s=1-i,o=e.x,u=e.y,f=e.z,p=s*o,m=s*u;return this.set(p*o+i,p*u-r*f,p*f+r*u,0,p*u+r*f,m*u+i,m*f-r*o,0,p*f-r*u,m*f+r*o,s*f*f+i,0,0,0,0,1),this}makeScale(e,t,i){return this.set(e,0,0,0,0,t,0,0,0,0,i,0,0,0,0,1),this}makeShear(e,t,i,r,s,o){return this.set(1,i,s,0,e,1,o,0,t,r,1,0,0,0,0,1),this}compose(e,t,i){const r=this.elements,s=t._x,o=t._y,u=t._z,f=t._w,p=s+s,m=o+o,v=u+u,_=s*p,x=s*m,S=s*v,A=o*m,E=o*v,M=u*v,C=f*p,N=f*m,I=f*v,U=i.x,L=i.y,F=i.z;return r[0]=(1-(A+M))*U,r[1]=(x+I)*U,r[2]=(S-N)*U,r[3]=0,r[4]=(x-I)*L,r[5]=(1-(_+M))*L,r[6]=(E+C)*L,r[7]=0,r[8]=(S+N)*F,r[9]=(E-C)*F,r[10]=(1-(_+A))*F,r[11]=0,r[12]=e.x,r[13]=e.y,r[14]=e.z,r[15]=1,this}decompose(e,t,i){const r=this.elements;if(e.x=r[12],e.y=r[13],e.z=r[14],this.determinant()===0)return i.set(1,1,1),t.identity(),this;let s=Yd.set(r[0],r[1],r[2]).length();const o=Yd.set(r[4],r[5],r[6]).length(),u=Yd.set(r[8],r[9],r[10]).length();this.determinant()<0&&(s=-s),Lo.copy(this);const p=1/s,m=1/o,v=1/u;return Lo.elements[0]*=p,Lo.elements[1]*=p,Lo.elements[2]*=p,Lo.elements[4]*=m,Lo.elements[5]*=m,Lo.elements[6]*=m,Lo.elements[8]*=v,Lo.elements[9]*=v,Lo.elements[10]*=v,t.setFromRotationMatrix(Lo),i.x=s,i.y=o,i.z=u,this}makePerspective(e,t,i,r,s,o,u=Ma,f=!1){const p=this.elements,m=2*s/(t-e),v=2*s/(i-r),_=(t+e)/(t-e),x=(i+r)/(i-r);let S,A;if(f)S=s/(o-s),A=o*s/(o-s);else if(u===Ma)S=-(o+s)/(o-s),A=-2*o*s/(o-s);else if(u===Up)S=-o/(o-s),A=-o*s/(o-s);else throw new Error("THREE.Matrix4.makePerspective(): Invalid coordinate system: "+u);return p[0]=m,p[4]=0,p[8]=_,p[12]=0,p[1]=0,p[5]=v,p[9]=x,p[13]=0,p[2]=0,p[6]=0,p[10]=S,p[14]=A,p[3]=0,p[7]=0,p[11]=-1,p[15]=0,this}makeOrthographic(e,t,i,r,s,o,u=Ma,f=!1){const p=this.elements,m=2/(t-e),v=2/(i-r),_=-(t+e)/(t-e),x=-(i+r)/(i-r);let S,A;if(f)S=1/(o-s),A=o/(o-s);else if(u===Ma)S=-2/(o-s),A=-(o+s)/(o-s);else if(u===Up)S=-1/(o-s),A=-s/(o-s);else throw new Error("THREE.Matrix4.makeOrthographic(): Invalid coordinate system: "+u);return p[0]=m,p[4]=0,p[8]=0,p[12]=_,p[1]=0,p[5]=v,p[9]=0,p[13]=x,p[2]=0,p[6]=0,p[10]=S,p[14]=A,p[3]=0,p[7]=0,p[11]=0,p[15]=1,this}equals(e){const t=this.elements,i=e.elements;for(let r=0;r<16;r++)if(t[r]!==i[r])return!1;return!0}fromArray(e,t=0){for(let i=0;i<16;i++)this.elements[i]=e[i+t];return this}toArray(e=[],t=0){const i=this.elements;return e[t]=i[0],e[t+1]=i[1],e[t+2]=i[2],e[t+3]=i[3],e[t+4]=i[4],e[t+5]=i[5],e[t+6]=i[6],e[t+7]=i[7],e[t+8]=i[8],e[t+9]=i[9],e[t+10]=i[10],e[t+11]=i[11],e[t+12]=i[12],e[t+13]=i[13],e[t+14]=i[14],e[t+15]=i[15],e}}const Yd=new J,Lo=new un,YG=new J(0,0,0),ZG=new J(1,1,1),Cu=new J,v_=new J,xa=new J,kR=new un,BR=new pa;class Ca{constructor(e=0,t=0,i=0,r=Ca.DEFAULT_ORDER){this.isEuler=!0,this._x=e,this._y=t,this._z=i,this._order=r}get x(){return this._x}set x(e){this._x=e,this._onChangeCallback()}get y(){return this._y}set y(e){this._y=e,this._onChangeCallback()}get z(){return this._z}set z(e){this._z=e,this._onChangeCallback()}get order(){return this._order}set order(e){this._order=e,this._onChangeCallback()}set(e,t,i,r=this._order){return this._x=e,this._y=t,this._z=i,this._order=r,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._order)}copy(e){return this._x=e._x,this._y=e._y,this._z=e._z,this._order=e._order,this._onChangeCallback(),this}setFromRotationMatrix(e,t=this._order,i=!0){const r=e.elements,s=r[0],o=r[4],u=r[8],f=r[1],p=r[5],m=r[9],v=r[2],_=r[6],x=r[10];switch(t){case"XYZ":this._y=Math.asin(ln(u,-1,1)),Math.abs(u)<.9999999?(this._x=Math.atan2(-m,x),this._z=Math.atan2(-o,s)):(this._x=Math.atan2(_,p),this._z=0);break;case"YXZ":this._x=Math.asin(-ln(m,-1,1)),Math.abs(m)<.9999999?(this._y=Math.atan2(u,x),this._z=Math.atan2(f,p)):(this._y=Math.atan2(-v,s),this._z=0);break;case"ZXY":this._x=Math.asin(ln(_,-1,1)),Math.abs(_)<.9999999?(this._y=Math.atan2(-v,x),this._z=Math.atan2(-o,p)):(this._y=0,this._z=Math.atan2(f,s));break;case"ZYX":this._y=Math.asin(-ln(v,-1,1)),Math.abs(v)<.9999999?(this._x=Math.atan2(_,x),this._z=Math.atan2(f,s)):(this._x=0,this._z=Math.atan2(-o,p));break;case"YZX":this._z=Math.asin(ln(f,-1,1)),Math.abs(f)<.9999999?(this._x=Math.atan2(-m,p),this._y=Math.atan2(-v,s)):(this._x=0,this._y=Math.atan2(u,x));break;case"XZY":this._z=Math.asin(-ln(o,-1,1)),Math.abs(o)<.9999999?(this._x=Math.atan2(_,p),this._y=Math.atan2(u,s)):(this._x=Math.atan2(-m,x),this._y=0);break;default:At("Euler: .setFromRotationMatrix() encountered an unknown order: "+t)}return this._order=t,i===!0&&this._onChangeCallback(),this}setFromQuaternion(e,t,i){return kR.makeRotationFromQuaternion(e),this.setFromRotationMatrix(kR,t,i)}setFromVector3(e,t=this._order){return this.set(e.x,e.y,e.z,t)}reorder(e){return BR.setFromEuler(this),this.setFromQuaternion(BR,e)}equals(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._order===this._order}fromArray(e){return this._x=e[0],this._y=e[1],this._z=e[2],e[3]!==void 0&&(this._order=e[3]),this._onChangeCallback(),this}toArray(e=[],t=0){return e[t]=this._x,e[t+1]=this._y,e[t+2]=this._z,e[t+3]=this._order,e}_onChange(e){return this._onChangeCallback=e,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._order}}Ca.DEFAULT_ORDER="XYZ";class zp{constructor(){this.mask=1}set(e){this.mask=(1<<e|0)>>>0}enable(e){this.mask|=1<<e|0}enableAll(){this.mask=-1}toggle(e){this.mask^=1<<e|0}disable(e){this.mask&=~(1<<e|0)}disableAll(){this.mask=0}test(e){return(this.mask&e.mask)!==0}isEnabled(e){return(this.mask&(1<<e|0))!==0}}let KG=0;const zR=new J,Zd=new pa,xc=new un,y_=new J,Og=new J,JG=new J,QG=new pa,FR=new J(1,0,0),VR=new J(0,1,0),HR=new J(0,0,1),GR={type:"added"},e2={type:"removed"},Kd={type:"childadded",child:null},q1={type:"childremoved",child:null};class Zn extends Fl{constructor(){super(),this.isObject3D=!0,Object.defineProperty(this,"id",{value:KG++}),this.uuid=Ea(),this.name="",this.type="Object3D",this.parent=null,this.children=[],this.up=Zn.DEFAULT_UP.clone();const e=new J,t=new Ca,i=new pa,r=new J(1,1,1);function s(){i.setFromEuler(t,!1)}function o(){t.setFromQuaternion(i,void 0,!1)}t._onChange(s),i._onChange(o),Object.defineProperties(this,{position:{configurable:!0,enumerable:!0,value:e},rotation:{configurable:!0,enumerable:!0,value:t},quaternion:{configurable:!0,enumerable:!0,value:i},scale:{configurable:!0,enumerable:!0,value:r},modelViewMatrix:{value:new un},normalMatrix:{value:new xn}}),this.matrix=new un,this.matrixWorld=new un,this.matrixAutoUpdate=Zn.DEFAULT_MATRIX_AUTO_UPDATE,this.matrixWorldAutoUpdate=Zn.DEFAULT_MATRIX_WORLD_AUTO_UPDATE,this.matrixWorldNeedsUpdate=!1,this.layers=new zp,this.visible=!0,this.castShadow=!1,this.receiveShadow=!1,this.frustumCulled=!0,this.renderOrder=0,this.animations=[],this.customDepthMaterial=void 0,this.customDistanceMaterial=void 0,this.userData={}}onBeforeShadow(){}onAfterShadow(){}onBeforeRender(){}onAfterRender(){}applyMatrix4(e){this.matrixAutoUpdate&&this.updateMatrix(),this.matrix.premultiply(e),this.matrix.decompose(this.position,this.quaternion,this.scale)}applyQuaternion(e){return this.quaternion.premultiply(e),this}setRotationFromAxisAngle(e,t){this.quaternion.setFromAxisAngle(e,t)}setRotationFromEuler(e){this.quaternion.setFromEuler(e,!0)}setRotationFromMatrix(e){this.quaternion.setFromRotationMatrix(e)}setRotationFromQuaternion(e){this.quaternion.copy(e)}rotateOnAxis(e,t){return Zd.setFromAxisAngle(e,t),this.quaternion.multiply(Zd),this}rotateOnWorldAxis(e,t){return Zd.setFromAxisAngle(e,t),this.quaternion.premultiply(Zd),this}rotateX(e){return this.rotateOnAxis(FR,e)}rotateY(e){return this.rotateOnAxis(VR,e)}rotateZ(e){return this.rotateOnAxis(HR,e)}translateOnAxis(e,t){return zR.copy(e).applyQuaternion(this.quaternion),this.position.add(zR.multiplyScalar(t)),this}translateX(e){return this.translateOnAxis(FR,e)}translateY(e){return this.translateOnAxis(VR,e)}translateZ(e){return this.translateOnAxis(HR,e)}localToWorld(e){return this.updateWorldMatrix(!0,!1),e.applyMatrix4(this.matrixWorld)}worldToLocal(e){return this.updateWorldMatrix(!0,!1),e.applyMatrix4(xc.copy(this.matrixWorld).invert())}lookAt(e,t,i){e.isVector3?y_.copy(e):y_.set(e,t,i);const r=this.parent;this.updateWorldMatrix(!0,!1),Og.setFromMatrixPosition(this.matrixWorld),this.isCamera||this.isLight?xc.lookAt(Og,y_,this.up):xc.lookAt(y_,Og,this.up),this.quaternion.setFromRotationMatrix(xc),r&&(xc.extractRotation(r.matrixWorld),Zd.setFromRotationMatrix(xc),this.quaternion.premultiply(Zd.invert()))}add(e){if(arguments.length>1){for(let t=0;t<arguments.length;t++)this.add(arguments[t]);return this}return e===this?(Xt("Object3D.add: object can't be added as a child of itself.",e),this):(e&&e.isObject3D?(e.removeFromParent(),e.parent=this,this.children.push(e),e.dispatchEvent(GR),Kd.child=e,this.dispatchEvent(Kd),Kd.child=null):Xt("Object3D.add: object not an instance of THREE.Object3D.",e),this)}remove(e){if(arguments.length>1){for(let i=0;i<arguments.length;i++)this.remove(arguments[i]);return this}const t=this.children.indexOf(e);return t!==-1&&(e.parent=null,this.children.splice(t,1),e.dispatchEvent(e2),q1.child=e,this.dispatchEvent(q1),q1.child=null),this}removeFromParent(){const e=this.parent;return e!==null&&e.remove(this),this}clear(){return this.remove(...this.children)}attach(e){return this.updateWorldMatrix(!0,!1),xc.copy(this.matrixWorld).invert(),e.parent!==null&&(e.parent.updateWorldMatrix(!0,!1),xc.multiply(e.parent.matrixWorld)),e.applyMatrix4(xc),e.removeFromParent(),e.parent=this,this.children.push(e),e.updateWorldMatrix(!1,!0),e.dispatchEvent(GR),Kd.child=e,this.dispatchEvent(Kd),Kd.child=null,this}getObjectById(e){return this.getObjectByProperty("id",e)}getObjectByName(e){return this.getObjectByProperty("name",e)}getObjectByProperty(e,t){if(this[e]===t)return this;for(let i=0,r=this.children.length;i<r;i++){const o=this.children[i].getObjectByProperty(e,t);if(o!==void 0)return o}}getObjectsByProperty(e,t,i=[]){this[e]===t&&i.push(this);const r=this.children;for(let s=0,o=r.length;s<o;s++)r[s].getObjectsByProperty(e,t,i);return i}getWorldPosition(e){return this.updateWorldMatrix(!0,!1),e.setFromMatrixPosition(this.matrixWorld)}getWorldQuaternion(e){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(Og,e,JG),e}getWorldScale(e){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(Og,QG,e),e}getWorldDirection(e){this.updateWorldMatrix(!0,!1);const t=this.matrixWorld.elements;return e.set(t[8],t[9],t[10]).normalize()}raycast(){}traverse(e){e(this);const t=this.children;for(let i=0,r=t.length;i<r;i++)t[i].traverse(e)}traverseVisible(e){if(this.visible===!1)return;e(this);const t=this.children;for(let i=0,r=t.length;i<r;i++)t[i].traverseVisible(e)}traverseAncestors(e){const t=this.parent;t!==null&&(e(t),t.traverseAncestors(e))}updateMatrix(){this.matrix.compose(this.position,this.quaternion,this.scale),this.matrixWorldNeedsUpdate=!0}updateMatrixWorld(e){this.matrixAutoUpdate&&this.updateMatrix(),(this.matrixWorldNeedsUpdate||e)&&(this.matrixWorldAutoUpdate===!0&&(this.parent===null?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix)),this.matrixWorldNeedsUpdate=!1,e=!0);const t=this.children;for(let i=0,r=t.length;i<r;i++)t[i].updateMatrixWorld(e)}updateWorldMatrix(e,t){const i=this.parent;if(e===!0&&i!==null&&i.updateWorldMatrix(!0,!1),this.matrixAutoUpdate&&this.updateMatrix(),this.matrixWorldAutoUpdate===!0&&(this.parent===null?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix)),t===!0){const r=this.children;for(let s=0,o=r.length;s<o;s++)r[s].updateWorldMatrix(!1,!0)}}toJSON(e){const t=e===void 0||typeof e=="string",i={};t&&(e={geometries:{},materials:{},textures:{},images:{},shapes:{},skeletons:{},animations:{},nodes:{}},i.metadata={version:4.7,type:"Object",generator:"Object3D.toJSON"});const r={};r.uuid=this.uuid,r.type=this.type,this.name!==""&&(r.name=this.name),this.castShadow===!0&&(r.castShadow=!0),this.receiveShadow===!0&&(r.receiveShadow=!0),this.visible===!1&&(r.visible=!1),this.frustumCulled===!1&&(r.frustumCulled=!1),this.renderOrder!==0&&(r.renderOrder=this.renderOrder),Object.keys(this.userData).length>0&&(r.userData=this.userData),r.layers=this.layers.mask,r.matrix=this.matrix.toArray(),r.up=this.up.toArray(),this.matrixAutoUpdate===!1&&(r.matrixAutoUpdate=!1),this.isInstancedMesh&&(r.type="InstancedMesh",r.count=this.count,r.instanceMatrix=this.instanceMatrix.toJSON(),this.instanceColor!==null&&(r.instanceColor=this.instanceColor.toJSON())),this.isBatchedMesh&&(r.type="BatchedMesh",r.perObjectFrustumCulled=this.perObjectFrustumCulled,r.sortObjects=this.sortObjects,r.drawRanges=this._drawRanges,r.reservedRanges=this._reservedRanges,r.geometryInfo=this._geometryInfo.map(u=>({...u,boundingBox:u.boundingBox?u.boundingBox.toJSON():void 0,boundingSphere:u.boundingSphere?u.boundingSphere.toJSON():void 0})),r.instanceInfo=this._instanceInfo.map(u=>({...u})),r.availableInstanceIds=this._availableInstanceIds.slice(),r.availableGeometryIds=this._availableGeometryIds.slice(),r.nextIndexStart=this._nextIndexStart,r.nextVertexStart=this._nextVertexStart,r.geometryCount=this._geometryCount,r.maxInstanceCount=this._maxInstanceCount,r.maxVertexCount=this._maxVertexCount,r.maxIndexCount=this._maxIndexCount,r.geometryInitialized=this._geometryInitialized,r.matricesTexture=this._matricesTexture.toJSON(e),r.indirectTexture=this._indirectTexture.toJSON(e),this._colorsTexture!==null&&(r.colorsTexture=this._colorsTexture.toJSON(e)),this.boundingSphere!==null&&(r.boundingSphere=this.boundingSphere.toJSON()),this.boundingBox!==null&&(r.boundingBox=this.boundingBox.toJSON()));function s(u,f){return u[f.uuid]===void 0&&(u[f.uuid]=f.toJSON(e)),f.uuid}if(this.isScene)this.background&&(this.background.isColor?r.background=this.background.toJSON():this.background.isTexture&&(r.background=this.background.toJSON(e).uuid)),this.environment&&this.environment.isTexture&&this.environment.isRenderTargetTexture!==!0&&(r.environment=this.environment.toJSON(e).uuid);else if(this.isMesh||this.isLine||this.isPoints){r.geometry=s(e.geometries,this.geometry);const u=this.geometry.parameters;if(u!==void 0&&u.shapes!==void 0){const f=u.shapes;if(Array.isArray(f))for(let p=0,m=f.length;p<m;p++){const v=f[p];s(e.shapes,v)}else s(e.shapes,f)}}if(this.isSkinnedMesh&&(r.bindMode=this.bindMode,r.bindMatrix=this.bindMatrix.toArray(),this.skeleton!==void 0&&(s(e.skeletons,this.skeleton),r.skeleton=this.skeleton.uuid)),this.material!==void 0)if(Array.isArray(this.material)){const u=[];for(let f=0,p=this.material.length;f<p;f++)u.push(s(e.materials,this.material[f]));r.material=u}else r.material=s(e.materials,this.material);if(this.children.length>0){r.children=[];for(let u=0;u<this.children.length;u++)r.children.push(this.children[u].toJSON(e).object)}if(this.animations.length>0){r.animations=[];for(let u=0;u<this.animations.length;u++){const f=this.animations[u];r.animations.push(s(e.animations,f))}}if(t){const u=o(e.geometries),f=o(e.materials),p=o(e.textures),m=o(e.images),v=o(e.shapes),_=o(e.skeletons),x=o(e.animations),S=o(e.nodes);u.length>0&&(i.geometries=u),f.length>0&&(i.materials=f),p.length>0&&(i.textures=p),m.length>0&&(i.images=m),v.length>0&&(i.shapes=v),_.length>0&&(i.skeletons=_),x.length>0&&(i.animations=x),S.length>0&&(i.nodes=S)}return i.object=r,i;function o(u){const f=[];for(const p in u){const m=u[p];delete m.metadata,f.push(m)}return f}}clone(e){return new this.constructor().copy(this,e)}copy(e,t=!0){if(this.name=e.name,this.up.copy(e.up),this.position.copy(e.position),this.rotation.order=e.rotation.order,this.quaternion.copy(e.quaternion),this.scale.copy(e.scale),this.matrix.copy(e.matrix),this.matrixWorld.copy(e.matrixWorld),this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrixWorldAutoUpdate=e.matrixWorldAutoUpdate,this.matrixWorldNeedsUpdate=e.matrixWorldNeedsUpdate,this.layers.mask=e.layers.mask,this.visible=e.visible,this.castShadow=e.castShadow,this.receiveShadow=e.receiveShadow,this.frustumCulled=e.frustumCulled,this.renderOrder=e.renderOrder,this.animations=e.animations.slice(),this.userData=JSON.parse(JSON.stringify(e.userData)),t===!0)for(let i=0;i<e.children.length;i++){const r=e.children[i];this.add(r.clone())}return this}}Zn.DEFAULT_UP=new J(0,1,0);Zn.DEFAULT_MATRIX_AUTO_UPDATE=!0;Zn.DEFAULT_MATRIX_WORLD_AUTO_UPDATE=!0;const Uo=new J,bc=new J,X1=new J,Sc=new J,Jd=new J,Qd=new J,jR=new J,$1=new J,Y1=new J,Z1=new J,K1=new mi,J1=new mi,Q1=new mi;class da{constructor(e=new J,t=new J,i=new J){this.a=e,this.b=t,this.c=i}static getNormal(e,t,i,r){r.subVectors(i,t),Uo.subVectors(e,t),r.cross(Uo);const s=r.lengthSq();return s>0?r.multiplyScalar(1/Math.sqrt(s)):r.set(0,0,0)}static getBarycoord(e,t,i,r,s){Uo.subVectors(r,t),bc.subVectors(i,t),X1.subVectors(e,t);const o=Uo.dot(Uo),u=Uo.dot(bc),f=Uo.dot(X1),p=bc.dot(bc),m=bc.dot(X1),v=o*p-u*u;if(v===0)return s.set(0,0,0),null;const _=1/v,x=(p*f-u*m)*_,S=(o*m-u*f)*_;return s.set(1-x-S,S,x)}static containsPoint(e,t,i,r){return this.getBarycoord(e,t,i,r,Sc)===null?!1:Sc.x>=0&&Sc.y>=0&&Sc.x+Sc.y<=1}static getInterpolation(e,t,i,r,s,o,u,f){return this.getBarycoord(e,t,i,r,Sc)===null?(f.x=0,f.y=0,"z"in f&&(f.z=0),"w"in f&&(f.w=0),null):(f.setScalar(0),f.addScaledVector(s,Sc.x),f.addScaledVector(o,Sc.y),f.addScaledVector(u,Sc.z),f)}static getInterpolatedAttribute(e,t,i,r,s,o){return K1.setScalar(0),J1.setScalar(0),Q1.setScalar(0),K1.fromBufferAttribute(e,t),J1.fromBufferAttribute(e,i),Q1.fromBufferAttribute(e,r),o.setScalar(0),o.addScaledVector(K1,s.x),o.addScaledVector(J1,s.y),o.addScaledVector(Q1,s.z),o}static isFrontFacing(e,t,i,r){return Uo.subVectors(i,t),bc.subVectors(e,t),Uo.cross(bc).dot(r)<0}set(e,t,i){return this.a.copy(e),this.b.copy(t),this.c.copy(i),this}setFromPointsAndIndices(e,t,i,r){return this.a.copy(e[t]),this.b.copy(e[i]),this.c.copy(e[r]),this}setFromAttributeAndIndices(e,t,i,r){return this.a.fromBufferAttribute(e,t),this.b.fromBufferAttribute(e,i),this.c.fromBufferAttribute(e,r),this}clone(){return new this.constructor().copy(this)}copy(e){return this.a.copy(e.a),this.b.copy(e.b),this.c.copy(e.c),this}getArea(){return Uo.subVectors(this.c,this.b),bc.subVectors(this.a,this.b),Uo.cross(bc).length()*.5}getMidpoint(e){return e.addVectors(this.a,this.b).add(this.c).multiplyScalar(1/3)}getNormal(e){return da.getNormal(this.a,this.b,this.c,e)}getPlane(e){return e.setFromCoplanarPoints(this.a,this.b,this.c)}getBarycoord(e,t){return da.getBarycoord(e,this.a,this.b,this.c,t)}getInterpolation(e,t,i,r,s){return da.getInterpolation(e,this.a,this.b,this.c,t,i,r,s)}containsPoint(e){return da.containsPoint(e,this.a,this.b,this.c)}isFrontFacing(e){return da.isFrontFacing(this.a,this.b,this.c,e)}intersectsBox(e){return e.intersectsTriangle(this)}closestPointToPoint(e,t){const i=this.a,r=this.b,s=this.c;let o,u;Jd.subVectors(r,i),Qd.subVectors(s,i),$1.subVectors(e,i);const f=Jd.dot($1),p=Qd.dot($1);if(f<=0&&p<=0)return t.copy(i);Y1.subVectors(e,r);const m=Jd.dot(Y1),v=Qd.dot(Y1);if(m>=0&&v<=m)return t.copy(r);const _=f*v-m*p;if(_<=0&&f>=0&&m<=0)return o=f/(f-m),t.copy(i).addScaledVector(Jd,o);Z1.subVectors(e,s);const x=Jd.dot(Z1),S=Qd.dot(Z1);if(S>=0&&x<=S)return t.copy(s);const A=x*p-f*S;if(A<=0&&p>=0&&S<=0)return u=p/(p-S),t.copy(i).addScaledVector(Qd,u);const E=m*S-x*v;if(E<=0&&v-m>=0&&x-S>=0)return jR.subVectors(s,r),u=(v-m)/(v-m+(x-S)),t.copy(r).addScaledVector(jR,u);const M=1/(E+A+_);return o=A*M,u=_*M,t.copy(i).addScaledVector(Jd,o).addScaledVector(Qd,u)}equals(e){return e.a.equals(this.a)&&e.b.equals(this.b)&&e.c.equals(this.c)}}const $P={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074},Ru={h:0,s:0,l:0},__={h:0,s:0,l:0};function ew(n,e,t){return t<0&&(t+=1),t>1&&(t-=1),t<1/6?n+(e-n)*6*t:t<1/2?e:t<2/3?n+(e-n)*6*(2/3-t):n}class Ot{constructor(e,t,i){return this.isColor=!0,this.r=1,this.g=1,this.b=1,this.set(e,t,i)}set(e,t,i){if(t===void 0&&i===void 0){const r=e;r&&r.isColor?this.copy(r):typeof r=="number"?this.setHex(r):typeof r=="string"&&this.setStyle(r)}else this.setRGB(e,t,i);return this}setScalar(e){return this.r=e,this.g=e,this.b=e,this}setHex(e,t=rs){return e=Math.floor(e),this.r=(e>>16&255)/255,this.g=(e>>8&255)/255,this.b=(e&255)/255,Hn.colorSpaceToWorking(this,t),this}setRGB(e,t,i,r=Hn.workingColorSpace){return this.r=e,this.g=t,this.b=i,Hn.colorSpaceToWorking(this,r),this}setHSL(e,t,i,r=Hn.workingColorSpace){if(e=$E(e,1),t=ln(t,0,1),i=ln(i,0,1),t===0)this.r=this.g=this.b=i;else{const s=i<=.5?i*(1+t):i+t-i*t,o=2*i-s;this.r=ew(o,s,e+1/3),this.g=ew(o,s,e),this.b=ew(o,s,e-1/3)}return Hn.colorSpaceToWorking(this,r),this}setStyle(e,t=rs){function i(s){s!==void 0&&parseFloat(s)<1&&At("Color: Alpha component of "+e+" will be ignored.")}let r;if(r=/^(\w+)\(([^\)]*)\)/.exec(e)){let s;const o=r[1],u=r[2];switch(o){case"rgb":case"rgba":if(s=/^\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(u))return i(s[4]),this.setRGB(Math.min(255,parseInt(s[1],10))/255,Math.min(255,parseInt(s[2],10))/255,Math.min(255,parseInt(s[3],10))/255,t);if(s=/^\s*(\d+)\%\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(u))return i(s[4]),this.setRGB(Math.min(100,parseInt(s[1],10))/100,Math.min(100,parseInt(s[2],10))/100,Math.min(100,parseInt(s[3],10))/100,t);break;case"hsl":case"hsla":if(s=/^\s*(\d*\.?\d+)\s*,\s*(\d*\.?\d+)\%\s*,\s*(\d*\.?\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(u))return i(s[4]),this.setHSL(parseFloat(s[1])/360,parseFloat(s[2])/100,parseFloat(s[3])/100,t);break;default:At("Color: Unknown color model "+e)}}else if(r=/^\#([A-Fa-f\d]+)$/.exec(e)){const s=r[1],o=s.length;if(o===3)return this.setRGB(parseInt(s.charAt(0),16)/15,parseInt(s.charAt(1),16)/15,parseInt(s.charAt(2),16)/15,t);if(o===6)return this.setHex(parseInt(s,16),t);At("Color: Invalid hex color "+e)}else if(e&&e.length>0)return this.setColorName(e,t);return this}setColorName(e,t=rs){const i=$P[e.toLowerCase()];return i!==void 0?this.setHex(i,t):At("Color: Unknown color "+e),this}clone(){return new this.constructor(this.r,this.g,this.b)}copy(e){return this.r=e.r,this.g=e.g,this.b=e.b,this}copySRGBToLinear(e){return this.r=Rc(e.r),this.g=Rc(e.g),this.b=Rc(e.b),this}copyLinearToSRGB(e){return this.r=Np(e.r),this.g=Np(e.g),this.b=Np(e.b),this}convertSRGBToLinear(){return this.copySRGBToLinear(this),this}convertLinearToSRGB(){return this.copyLinearToSRGB(this),this}getHex(e=rs){return Hn.workingToColorSpace(ys.copy(this),e),Math.round(ln(ys.r*255,0,255))*65536+Math.round(ln(ys.g*255,0,255))*256+Math.round(ln(ys.b*255,0,255))}getHexString(e=rs){return("000000"+this.getHex(e).toString(16)).slice(-6)}getHSL(e,t=Hn.workingColorSpace){Hn.workingToColorSpace(ys.copy(this),t);const i=ys.r,r=ys.g,s=ys.b,o=Math.max(i,r,s),u=Math.min(i,r,s);let f,p;const m=(u+o)/2;if(u===o)f=0,p=0;else{const v=o-u;switch(p=m<=.5?v/(o+u):v/(2-o-u),o){case i:f=(r-s)/v+(r<s?6:0);break;case r:f=(s-i)/v+2;break;case s:f=(i-r)/v+4;break}f/=6}return e.h=f,e.s=p,e.l=m,e}getRGB(e,t=Hn.workingColorSpace){return Hn.workingToColorSpace(ys.copy(this),t),e.r=ys.r,e.g=ys.g,e.b=ys.b,e}getStyle(e=rs){Hn.workingToColorSpace(ys.copy(this),e);const t=ys.r,i=ys.g,r=ys.b;return e!==rs?`color(${e} ${t.toFixed(3)} ${i.toFixed(3)} ${r.toFixed(3)})`:`rgb(${Math.round(t*255)},${Math.round(i*255)},${Math.round(r*255)})`}offsetHSL(e,t,i){return this.getHSL(Ru),this.setHSL(Ru.h+e,Ru.s+t,Ru.l+i)}add(e){return this.r+=e.r,this.g+=e.g,this.b+=e.b,this}addColors(e,t){return this.r=e.r+t.r,this.g=e.g+t.g,this.b=e.b+t.b,this}addScalar(e){return this.r+=e,this.g+=e,this.b+=e,this}sub(e){return this.r=Math.max(0,this.r-e.r),this.g=Math.max(0,this.g-e.g),this.b=Math.max(0,this.b-e.b),this}multiply(e){return this.r*=e.r,this.g*=e.g,this.b*=e.b,this}multiplyScalar(e){return this.r*=e,this.g*=e,this.b*=e,this}lerp(e,t){return this.r+=(e.r-this.r)*t,this.g+=(e.g-this.g)*t,this.b+=(e.b-this.b)*t,this}lerpColors(e,t,i){return this.r=e.r+(t.r-e.r)*i,this.g=e.g+(t.g-e.g)*i,this.b=e.b+(t.b-e.b)*i,this}lerpHSL(e,t){this.getHSL(Ru),e.getHSL(__);const i=f0(Ru.h,__.h,t),r=f0(Ru.s,__.s,t),s=f0(Ru.l,__.l,t);return this.setHSL(i,r,s),this}setFromVector3(e){return this.r=e.x,this.g=e.y,this.b=e.z,this}applyMatrix3(e){const t=this.r,i=this.g,r=this.b,s=e.elements;return this.r=s[0]*t+s[3]*i+s[6]*r,this.g=s[1]*t+s[4]*i+s[7]*r,this.b=s[2]*t+s[5]*i+s[8]*r,this}equals(e){return e.r===this.r&&e.g===this.g&&e.b===this.b}fromArray(e,t=0){return this.r=e[t],this.g=e[t+1],this.b=e[t+2],this}toArray(e=[],t=0){return e[t]=this.r,e[t+1]=this.g,e[t+2]=this.b,e}fromBufferAttribute(e,t){return this.r=e.getX(t),this.g=e.getY(t),this.b=e.getZ(t),this}toJSON(){return this.getHex()}*[Symbol.iterator](){yield this.r,yield this.g,yield this.b}}const ys=new Ot;Ot.NAMES=$P;let t2=0;class ws extends Fl{constructor(){super(),this.isMaterial=!0,Object.defineProperty(this,"id",{value:t2++}),this.uuid=Ea(),this.name="",this.type="Material",this.blending=xf,this.side=Pc,this.vertexColors=!1,this.opacity=1,this.transparent=!1,this.alphaHash=!1,this.blendSrc=Cx,this.blendDst=Rx,this.blendEquation=Bu,this.blendSrcAlpha=null,this.blendDstAlpha=null,this.blendEquationAlpha=null,this.blendColor=new Ot(0,0,0),this.blendAlpha=0,this.depthFunc=wf,this.depthTest=!0,this.depthWrite=!0,this.stencilWriteMask=255,this.stencilFunc=AM,this.stencilRef=0,this.stencilFuncMask=255,this.stencilFail=af,this.stencilZFail=af,this.stencilZPass=af,this.stencilWrite=!1,this.clippingPlanes=null,this.clipIntersection=!1,this.clipShadows=!1,this.shadowSide=null,this.colorWrite=!0,this.precision=null,this.polygonOffset=!1,this.polygonOffsetFactor=0,this.polygonOffsetUnits=0,this.dithering=!1,this.alphaToCoverage=!1,this.premultipliedAlpha=!1,this.forceSinglePass=!1,this.allowOverride=!0,this.visible=!0,this.toneMapped=!0,this.userData={},this.version=0,this._alphaTest=0}get alphaTest(){return this._alphaTest}set alphaTest(e){this._alphaTest>0!=e>0&&this.version++,this._alphaTest=e}onBeforeRender(){}onBeforeCompile(){}customProgramCacheKey(){return this.onBeforeCompile.toString()}setValues(e){if(e!==void 0)for(const t in e){const i=e[t];if(i===void 0){At(`Material: parameter '${t}' has value of undefined.`);continue}const r=this[t];if(r===void 0){At(`Material: '${t}' is not a property of THREE.${this.type}.`);continue}r&&r.isColor?r.set(i):r&&r.isVector3&&i&&i.isVector3?r.copy(i):this[t]=i}}toJSON(e){const t=e===void 0||typeof e=="string";t&&(e={textures:{},images:{}});const i={metadata:{version:4.7,type:"Material",generator:"Material.toJSON"}};i.uuid=this.uuid,i.type=this.type,this.name!==""&&(i.name=this.name),this.color&&this.color.isColor&&(i.color=this.color.getHex()),this.roughness!==void 0&&(i.roughness=this.roughness),this.metalness!==void 0&&(i.metalness=this.metalness),this.sheen!==void 0&&(i.sheen=this.sheen),this.sheenColor&&this.sheenColor.isColor&&(i.sheenColor=this.sheenColor.getHex()),this.sheenRoughness!==void 0&&(i.sheenRoughness=this.sheenRoughness),this.emissive&&this.emissive.isColor&&(i.emissive=this.emissive.getHex()),this.emissiveIntensity!==void 0&&this.emissiveIntensity!==1&&(i.emissiveIntensity=this.emissiveIntensity),this.specular&&this.specular.isColor&&(i.specular=this.specular.getHex()),this.specularIntensity!==void 0&&(i.specularIntensity=this.specularIntensity),this.specularColor&&this.specularColor.isColor&&(i.specularColor=this.specularColor.getHex()),this.shininess!==void 0&&(i.shininess=this.shininess),this.clearcoat!==void 0&&(i.clearcoat=this.clearcoat),this.clearcoatRoughness!==void 0&&(i.clearcoatRoughness=this.clearcoatRoughness),this.clearcoatMap&&this.clearcoatMap.isTexture&&(i.clearcoatMap=this.clearcoatMap.toJSON(e).uuid),this.clearcoatRoughnessMap&&this.clearcoatRoughnessMap.isTexture&&(i.clearcoatRoughnessMap=this.clearcoatRoughnessMap.toJSON(e).uuid),this.clearcoatNormalMap&&this.clearcoatNormalMap.isTexture&&(i.clearcoatNormalMap=this.clearcoatNormalMap.toJSON(e).uuid,i.clearcoatNormalScale=this.clearcoatNormalScale.toArray()),this.sheenColorMap&&this.sheenColorMap.isTexture&&(i.sheenColorMap=this.sheenColorMap.toJSON(e).uuid),this.sheenRoughnessMap&&this.sheenRoughnessMap.isTexture&&(i.sheenRoughnessMap=this.sheenRoughnessMap.toJSON(e).uuid),this.dispersion!==void 0&&(i.dispersion=this.dispersion),this.iridescence!==void 0&&(i.iridescence=this.iridescence),this.iridescenceIOR!==void 0&&(i.iridescenceIOR=this.iridescenceIOR),this.iridescenceThicknessRange!==void 0&&(i.iridescenceThicknessRange=this.iridescenceThicknessRange),this.iridescenceMap&&this.iridescenceMap.isTexture&&(i.iridescenceMap=this.iridescenceMap.toJSON(e).uuid),this.iridescenceThicknessMap&&this.iridescenceThicknessMap.isTexture&&(i.iridescenceThicknessMap=this.iridescenceThicknessMap.toJSON(e).uuid),this.anisotropy!==void 0&&(i.anisotropy=this.anisotropy),this.anisotropyRotation!==void 0&&(i.anisotropyRotation=this.anisotropyRotation),this.anisotropyMap&&this.anisotropyMap.isTexture&&(i.anisotropyMap=this.anisotropyMap.toJSON(e).uuid),this.map&&this.map.isTexture&&(i.map=this.map.toJSON(e).uuid),this.matcap&&this.matcap.isTexture&&(i.matcap=this.matcap.toJSON(e).uuid),this.alphaMap&&this.alphaMap.isTexture&&(i.alphaMap=this.alphaMap.toJSON(e).uuid),this.lightMap&&this.lightMap.isTexture&&(i.lightMap=this.lightMap.toJSON(e).uuid,i.lightMapIntensity=this.lightMapIntensity),this.aoMap&&this.aoMap.isTexture&&(i.aoMap=this.aoMap.toJSON(e).uuid,i.aoMapIntensity=this.aoMapIntensity),this.bumpMap&&this.bumpMap.isTexture&&(i.bumpMap=this.bumpMap.toJSON(e).uuid,i.bumpScale=this.bumpScale),this.normalMap&&this.normalMap.isTexture&&(i.normalMap=this.normalMap.toJSON(e).uuid,i.normalMapType=this.normalMapType,i.normalScale=this.normalScale.toArray()),this.displacementMap&&this.displacementMap.isTexture&&(i.displacementMap=this.displacementMap.toJSON(e).uuid,i.displacementScale=this.displacementScale,i.displacementBias=this.displacementBias),this.roughnessMap&&this.roughnessMap.isTexture&&(i.roughnessMap=this.roughnessMap.toJSON(e).uuid),this.metalnessMap&&this.metalnessMap.isTexture&&(i.metalnessMap=this.metalnessMap.toJSON(e).uuid),this.emissiveMap&&this.emissiveMap.isTexture&&(i.emissiveMap=this.emissiveMap.toJSON(e).uuid),this.specularMap&&this.specularMap.isTexture&&(i.specularMap=this.specularMap.toJSON(e).uuid),this.specularIntensityMap&&this.specularIntensityMap.isTexture&&(i.specularIntensityMap=this.specularIntensityMap.toJSON(e).uuid),this.specularColorMap&&this.specularColorMap.isTexture&&(i.specularColorMap=this.specularColorMap.toJSON(e).uuid),this.envMap&&this.envMap.isTexture&&(i.envMap=this.envMap.toJSON(e).uuid,this.combine!==void 0&&(i.combine=this.combine)),this.envMapRotation!==void 0&&(i.envMapRotation=this.envMapRotation.toArray()),this.envMapIntensity!==void 0&&(i.envMapIntensity=this.envMapIntensity),this.reflectivity!==void 0&&(i.reflectivity=this.reflectivity),this.refractionRatio!==void 0&&(i.refractionRatio=this.refractionRatio),this.gradientMap&&this.gradientMap.isTexture&&(i.gradientMap=this.gradientMap.toJSON(e).uuid),this.transmission!==void 0&&(i.transmission=this.transmission),this.transmissionMap&&this.transmissionMap.isTexture&&(i.transmissionMap=this.transmissionMap.toJSON(e).uuid),this.thickness!==void 0&&(i.thickness=this.thickness),this.thicknessMap&&this.thicknessMap.isTexture&&(i.thicknessMap=this.thicknessMap.toJSON(e).uuid),this.attenuationDistance!==void 0&&this.attenuationDistance!==1/0&&(i.attenuationDistance=this.attenuationDistance),this.attenuationColor!==void 0&&(i.attenuationColor=this.attenuationColor.getHex()),this.size!==void 0&&(i.size=this.size),this.shadowSide!==null&&(i.shadowSide=this.shadowSide),this.sizeAttenuation!==void 0&&(i.sizeAttenuation=this.sizeAttenuation),this.blending!==xf&&(i.blending=this.blending),this.side!==Pc&&(i.side=this.side),this.vertexColors===!0&&(i.vertexColors=!0),this.opacity<1&&(i.opacity=this.opacity),this.transparent===!0&&(i.transparent=!0),this.blendSrc!==Cx&&(i.blendSrc=this.blendSrc),this.blendDst!==Rx&&(i.blendDst=this.blendDst),this.blendEquation!==Bu&&(i.blendEquation=this.blendEquation),this.blendSrcAlpha!==null&&(i.blendSrcAlpha=this.blendSrcAlpha),this.blendDstAlpha!==null&&(i.blendDstAlpha=this.blendDstAlpha),this.blendEquationAlpha!==null&&(i.blendEquationAlpha=this.blendEquationAlpha),this.blendColor&&this.blendColor.isColor&&(i.blendColor=this.blendColor.getHex()),this.blendAlpha!==0&&(i.blendAlpha=this.blendAlpha),this.depthFunc!==wf&&(i.depthFunc=this.depthFunc),this.depthTest===!1&&(i.depthTest=this.depthTest),this.depthWrite===!1&&(i.depthWrite=this.depthWrite),this.colorWrite===!1&&(i.colorWrite=this.colorWrite),this.stencilWriteMask!==255&&(i.stencilWriteMask=this.stencilWriteMask),this.stencilFunc!==AM&&(i.stencilFunc=this.stencilFunc),this.stencilRef!==0&&(i.stencilRef=this.stencilRef),this.stencilFuncMask!==255&&(i.stencilFuncMask=this.stencilFuncMask),this.stencilFail!==af&&(i.stencilFail=this.stencilFail),this.stencilZFail!==af&&(i.stencilZFail=this.stencilZFail),this.stencilZPass!==af&&(i.stencilZPass=this.stencilZPass),this.stencilWrite===!0&&(i.stencilWrite=this.stencilWrite),this.rotation!==void 0&&this.rotation!==0&&(i.rotation=this.rotation),this.polygonOffset===!0&&(i.polygonOffset=!0),this.polygonOffsetFactor!==0&&(i.polygonOffsetFactor=this.polygonOffsetFactor),this.polygonOffsetUnits!==0&&(i.polygonOffsetUnits=this.polygonOffsetUnits),this.linewidth!==void 0&&this.linewidth!==1&&(i.linewidth=this.linewidth),this.dashSize!==void 0&&(i.dashSize=this.dashSize),this.gapSize!==void 0&&(i.gapSize=this.gapSize),this.scale!==void 0&&(i.scale=this.scale),this.dithering===!0&&(i.dithering=!0),this.alphaTest>0&&(i.alphaTest=this.alphaTest),this.alphaHash===!0&&(i.alphaHash=!0),this.alphaToCoverage===!0&&(i.alphaToCoverage=!0),this.premultipliedAlpha===!0&&(i.premultipliedAlpha=!0),this.forceSinglePass===!0&&(i.forceSinglePass=!0),this.allowOverride===!1&&(i.allowOverride=!1),this.wireframe===!0&&(i.wireframe=!0),this.wireframeLinewidth>1&&(i.wireframeLinewidth=this.wireframeLinewidth),this.wireframeLinecap!=="round"&&(i.wireframeLinecap=this.wireframeLinecap),this.wireframeLinejoin!=="round"&&(i.wireframeLinejoin=this.wireframeLinejoin),this.flatShading===!0&&(i.flatShading=!0),this.visible===!1&&(i.visible=!1),this.toneMapped===!1&&(i.toneMapped=!1),this.fog===!1&&(i.fog=!1),Object.keys(this.userData).length>0&&(i.userData=this.userData);function r(s){const o=[];for(const u in s){const f=s[u];delete f.metadata,o.push(f)}return o}if(t){const s=r(e.textures),o=r(e.images);s.length>0&&(i.textures=s),o.length>0&&(i.images=o)}return i}clone(){return new this.constructor().copy(this)}copy(e){this.name=e.name,this.blending=e.blending,this.side=e.side,this.vertexColors=e.vertexColors,this.opacity=e.opacity,this.transparent=e.transparent,this.blendSrc=e.blendSrc,this.blendDst=e.blendDst,this.blendEquation=e.blendEquation,this.blendSrcAlpha=e.blendSrcAlpha,this.blendDstAlpha=e.blendDstAlpha,this.blendEquationAlpha=e.blendEquationAlpha,this.blendColor.copy(e.blendColor),this.blendAlpha=e.blendAlpha,this.depthFunc=e.depthFunc,this.depthTest=e.depthTest,this.depthWrite=e.depthWrite,this.stencilWriteMask=e.stencilWriteMask,this.stencilFunc=e.stencilFunc,this.stencilRef=e.stencilRef,this.stencilFuncMask=e.stencilFuncMask,this.stencilFail=e.stencilFail,this.stencilZFail=e.stencilZFail,this.stencilZPass=e.stencilZPass,this.stencilWrite=e.stencilWrite;const t=e.clippingPlanes;let i=null;if(t!==null){const r=t.length;i=new Array(r);for(let s=0;s!==r;++s)i[s]=t[s].clone()}return this.clippingPlanes=i,this.clipIntersection=e.clipIntersection,this.clipShadows=e.clipShadows,this.shadowSide=e.shadowSide,this.colorWrite=e.colorWrite,this.precision=e.precision,this.polygonOffset=e.polygonOffset,this.polygonOffsetFactor=e.polygonOffsetFactor,this.polygonOffsetUnits=e.polygonOffsetUnits,this.dithering=e.dithering,this.alphaTest=e.alphaTest,this.alphaHash=e.alphaHash,this.alphaToCoverage=e.alphaToCoverage,this.premultipliedAlpha=e.premultipliedAlpha,this.forceSinglePass=e.forceSinglePass,this.allowOverride=e.allowOverride,this.visible=e.visible,this.toneMapped=e.toneMapped,this.userData=JSON.parse(JSON.stringify(e.userData)),this}dispose(){this.dispatchEvent({type:"dispose"})}set needsUpdate(e){e===!0&&this.version++}}class Lc extends ws{constructor(e){super(),this.isMeshBasicMaterial=!0,this.type="MeshBasicMaterial",this.color=new Ot(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.envMapRotation=new Ca,this.combine=rv,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapRotation.copy(e.envMapRotation),this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.fog=e.fog,this}}const Tc=n2();function n2(){const n=new ArrayBuffer(4),e=new Float32Array(n),t=new Uint32Array(n),i=new Uint32Array(512),r=new Uint32Array(512);for(let f=0;f<256;++f){const p=f-127;p<-27?(i[f]=0,i[f|256]=32768,r[f]=24,r[f|256]=24):p<-14?(i[f]=1024>>-p-14,i[f|256]=1024>>-p-14|32768,r[f]=-p-1,r[f|256]=-p-1):p<=15?(i[f]=p+15<<10,i[f|256]=p+15<<10|32768,r[f]=13,r[f|256]=13):p<128?(i[f]=31744,i[f|256]=64512,r[f]=24,r[f|256]=24):(i[f]=31744,i[f|256]=64512,r[f]=13,r[f|256]=13)}const s=new Uint32Array(2048),o=new Uint32Array(64),u=new Uint32Array(64);for(let f=1;f<1024;++f){let p=f<<13,m=0;for(;(p&8388608)===0;)p<<=1,m-=8388608;p&=-8388609,m+=947912704,s[f]=p|m}for(let f=1024;f<2048;++f)s[f]=939524096+(f-1024<<13);for(let f=1;f<31;++f)o[f]=f<<23;o[31]=1199570944,o[32]=2147483648;for(let f=33;f<63;++f)o[f]=2147483648+(f-32<<23);o[63]=3347054592;for(let f=1;f<64;++f)f!==32&&(u[f]=1024);return{floatView:e,uint32View:t,baseTable:i,shiftTable:r,mantissaTable:s,exponentTable:o,offsetTable:u}}function fa(n){Math.abs(n)>65504&&At("DataUtils.toHalfFloat(): Value out of range."),n=ln(n,-65504,65504),Tc.floatView[0]=n;const e=Tc.uint32View[0],t=e>>23&511;return Tc.baseTable[t]+((e&8388607)>>Tc.shiftTable[t])}function Kg(n){const e=n>>10;return Tc.uint32View[0]=Tc.mantissaTable[Tc.offsetTable[e]+(n&1023)]+Tc.exponentTable[e],Tc.floatView[0]}class gf{static toHalfFloat(e){return fa(e)}static fromHalfFloat(e){return Kg(e)}}const wr=new J,x_=new Ye;let i2=0;class fi{constructor(e,t,i=!1){if(Array.isArray(e))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");this.isBufferAttribute=!0,Object.defineProperty(this,"id",{value:i2++}),this.name="",this.array=e,this.itemSize=t,this.count=e!==void 0?e.length/t:0,this.normalized=i,this.usage=U0,this.updateRanges=[],this.gpuType=ki,this.version=0}onUploadCallback(){}set needsUpdate(e){e===!0&&this.version++}setUsage(e){return this.usage=e,this}addUpdateRange(e,t){this.updateRanges.push({start:e,count:t})}clearUpdateRanges(){this.updateRanges.length=0}copy(e){return this.name=e.name,this.array=new e.array.constructor(e.array),this.itemSize=e.itemSize,this.count=e.count,this.normalized=e.normalized,this.usage=e.usage,this.gpuType=e.gpuType,this}copyAt(e,t,i){e*=this.itemSize,i*=t.itemSize;for(let r=0,s=this.itemSize;r<s;r++)this.array[e+r]=t.array[i+r];return this}copyArray(e){return this.array.set(e),this}applyMatrix3(e){if(this.itemSize===2)for(let t=0,i=this.count;t<i;t++)x_.fromBufferAttribute(this,t),x_.applyMatrix3(e),this.setXY(t,x_.x,x_.y);else if(this.itemSize===3)for(let t=0,i=this.count;t<i;t++)wr.fromBufferAttribute(this,t),wr.applyMatrix3(e),this.setXYZ(t,wr.x,wr.y,wr.z);return this}applyMatrix4(e){for(let t=0,i=this.count;t<i;t++)wr.fromBufferAttribute(this,t),wr.applyMatrix4(e),this.setXYZ(t,wr.x,wr.y,wr.z);return this}applyNormalMatrix(e){for(let t=0,i=this.count;t<i;t++)wr.fromBufferAttribute(this,t),wr.applyNormalMatrix(e),this.setXYZ(t,wr.x,wr.y,wr.z);return this}transformDirection(e){for(let t=0,i=this.count;t<i;t++)wr.fromBufferAttribute(this,t),wr.transformDirection(e),this.setXYZ(t,wr.x,wr.y,wr.z);return this}set(e,t=0){return this.array.set(e,t),this}getComponent(e,t){let i=this.array[e*this.itemSize+t];return this.normalized&&(i=Bs(i,this.array)),i}setComponent(e,t,i){return this.normalized&&(i=Mn(i,this.array)),this.array[e*this.itemSize+t]=i,this}getX(e){let t=this.array[e*this.itemSize];return this.normalized&&(t=Bs(t,this.array)),t}setX(e,t){return this.normalized&&(t=Mn(t,this.array)),this.array[e*this.itemSize]=t,this}getY(e){let t=this.array[e*this.itemSize+1];return this.normalized&&(t=Bs(t,this.array)),t}setY(e,t){return this.normalized&&(t=Mn(t,this.array)),this.array[e*this.itemSize+1]=t,this}getZ(e){let t=this.array[e*this.itemSize+2];return this.normalized&&(t=Bs(t,this.array)),t}setZ(e,t){return this.normalized&&(t=Mn(t,this.array)),this.array[e*this.itemSize+2]=t,this}getW(e){let t=this.array[e*this.itemSize+3];return this.normalized&&(t=Bs(t,this.array)),t}setW(e,t){return this.normalized&&(t=Mn(t,this.array)),this.array[e*this.itemSize+3]=t,this}setXY(e,t,i){return e*=this.itemSize,this.normalized&&(t=Mn(t,this.array),i=Mn(i,this.array)),this.array[e+0]=t,this.array[e+1]=i,this}setXYZ(e,t,i,r){return e*=this.itemSize,this.normalized&&(t=Mn(t,this.array),i=Mn(i,this.array),r=Mn(r,this.array)),this.array[e+0]=t,this.array[e+1]=i,this.array[e+2]=r,this}setXYZW(e,t,i,r,s){return e*=this.itemSize,this.normalized&&(t=Mn(t,this.array),i=Mn(i,this.array),r=Mn(r,this.array),s=Mn(s,this.array)),this.array[e+0]=t,this.array[e+1]=i,this.array[e+2]=r,this.array[e+3]=s,this}onUpload(e){return this.onUploadCallback=e,this}clone(){return new this.constructor(this.array,this.itemSize).copy(this)}toJSON(){const e={itemSize:this.itemSize,type:this.array.constructor.name,array:Array.from(this.array),normalized:this.normalized};return this.name!==""&&(e.name=this.name),this.usage!==U0&&(e.usage=this.usage),e}}class r2 extends fi{constructor(e,t,i){super(new Int8Array(e),t,i)}}class s2 extends fi{constructor(e,t,i){super(new Uint8Array(e),t,i)}}class a2 extends fi{constructor(e,t,i){super(new Uint8ClampedArray(e),t,i)}}class o2 extends fi{constructor(e,t,i){super(new Int16Array(e),t,i)}}class ZE extends fi{constructor(e,t,i){super(new Uint16Array(e),t,i)}}class l2 extends fi{constructor(e,t,i){super(new Int32Array(e),t,i)}}class KE extends fi{constructor(e,t,i){super(new Uint32Array(e),t,i)}}class c2 extends fi{constructor(e,t,i){super(new Uint16Array(e),t,i),this.isFloat16BufferAttribute=!0}getX(e){let t=Kg(this.array[e*this.itemSize]);return this.normalized&&(t=Bs(t,this.array)),t}setX(e,t){return this.normalized&&(t=Mn(t,this.array)),this.array[e*this.itemSize]=fa(t),this}getY(e){let t=Kg(this.array[e*this.itemSize+1]);return this.normalized&&(t=Bs(t,this.array)),t}setY(e,t){return this.normalized&&(t=Mn(t,this.array)),this.array[e*this.itemSize+1]=fa(t),this}getZ(e){let t=Kg(this.array[e*this.itemSize+2]);return this.normalized&&(t=Bs(t,this.array)),t}setZ(e,t){return this.normalized&&(t=Mn(t,this.array)),this.array[e*this.itemSize+2]=fa(t),this}getW(e){let t=Kg(this.array[e*this.itemSize+3]);return this.normalized&&(t=Bs(t,this.array)),t}setW(e,t){return this.normalized&&(t=Mn(t,this.array)),this.array[e*this.itemSize+3]=fa(t),this}setXY(e,t,i){return e*=this.itemSize,this.normalized&&(t=Mn(t,this.array),i=Mn(i,this.array)),this.array[e+0]=fa(t),this.array[e+1]=fa(i),this}setXYZ(e,t,i,r){return e*=this.itemSize,this.normalized&&(t=Mn(t,this.array),i=Mn(i,this.array),r=Mn(r,this.array)),this.array[e+0]=fa(t),this.array[e+1]=fa(i),this.array[e+2]=fa(r),this}setXYZW(e,t,i,r,s){return e*=this.itemSize,this.normalized&&(t=Mn(t,this.array),i=Mn(i,this.array),r=Mn(r,this.array),s=Mn(s,this.array)),this.array[e+0]=fa(t),this.array[e+1]=fa(i),this.array[e+2]=fa(r),this.array[e+3]=fa(s),this}}class kt extends fi{constructor(e,t,i){super(new Float32Array(e),t,i)}}let u2=0;const no=new un,tw=new Zn,ep=new J,ba=new bs,Lg=new bs,Vr=new J;class vn extends Fl{constructor(){super(),this.isBufferGeometry=!0,Object.defineProperty(this,"id",{value:u2++}),this.uuid=Ea(),this.name="",this.type="BufferGeometry",this.index=null,this.indirect=null,this.indirectOffset=0,this.attributes={},this.morphAttributes={},this.morphTargetsRelative=!1,this.groups=[],this.boundingBox=null,this.boundingSphere=null,this.drawRange={start:0,count:1/0},this.userData={}}getIndex(){return this.index}setIndex(e){return Array.isArray(e)?this.index=new(jP(e)?KE:ZE)(e,1):this.index=e,this}setIndirect(e,t=0){return this.indirect=e,this.indirectOffset=t,this}getIndirect(){return this.indirect}getAttribute(e){return this.attributes[e]}setAttribute(e,t){return this.attributes[e]=t,this}deleteAttribute(e){return delete this.attributes[e],this}hasAttribute(e){return this.attributes[e]!==void 0}addGroup(e,t,i=0){this.groups.push({start:e,count:t,materialIndex:i})}clearGroups(){this.groups=[]}setDrawRange(e,t){this.drawRange.start=e,this.drawRange.count=t}applyMatrix4(e){const t=this.attributes.position;t!==void 0&&(t.applyMatrix4(e),t.needsUpdate=!0);const i=this.attributes.normal;if(i!==void 0){const s=new xn().getNormalMatrix(e);i.applyNormalMatrix(s),i.needsUpdate=!0}const r=this.attributes.tangent;return r!==void 0&&(r.transformDirection(e),r.needsUpdate=!0),this.boundingBox!==null&&this.computeBoundingBox(),this.boundingSphere!==null&&this.computeBoundingSphere(),this}applyQuaternion(e){return no.makeRotationFromQuaternion(e),this.applyMatrix4(no),this}rotateX(e){return no.makeRotationX(e),this.applyMatrix4(no),this}rotateY(e){return no.makeRotationY(e),this.applyMatrix4(no),this}rotateZ(e){return no.makeRotationZ(e),this.applyMatrix4(no),this}translate(e,t,i){return no.makeTranslation(e,t,i),this.applyMatrix4(no),this}scale(e,t,i){return no.makeScale(e,t,i),this.applyMatrix4(no),this}lookAt(e){return tw.lookAt(e),tw.updateMatrix(),this.applyMatrix4(tw.matrix),this}center(){return this.computeBoundingBox(),this.boundingBox.getCenter(ep).negate(),this.translate(ep.x,ep.y,ep.z),this}setFromPoints(e){const t=this.getAttribute("position");if(t===void 0){const i=[];for(let r=0,s=e.length;r<s;r++){const o=e[r];i.push(o.x,o.y,o.z||0)}this.setAttribute("position",new kt(i,3))}else{const i=Math.min(e.length,t.count);for(let r=0;r<i;r++){const s=e[r];t.setXYZ(r,s.x,s.y,s.z||0)}e.length>t.count&&At("BufferGeometry: Buffer size too small for points data. Use .dispose() and create a new geometry."),t.needsUpdate=!0}return this}computeBoundingBox(){this.boundingBox===null&&(this.boundingBox=new bs);const e=this.attributes.position,t=this.morphAttributes.position;if(e&&e.isGLBufferAttribute){Xt("BufferGeometry.computeBoundingBox(): GLBufferAttribute requires a manual bounding box.",this),this.boundingBox.set(new J(-1/0,-1/0,-1/0),new J(1/0,1/0,1/0));return}if(e!==void 0){if(this.boundingBox.setFromBufferAttribute(e),t)for(let i=0,r=t.length;i<r;i++){const s=t[i];ba.setFromBufferAttribute(s),this.morphTargetsRelative?(Vr.addVectors(this.boundingBox.min,ba.min),this.boundingBox.expandByPoint(Vr),Vr.addVectors(this.boundingBox.max,ba.max),this.boundingBox.expandByPoint(Vr)):(this.boundingBox.expandByPoint(ba.min),this.boundingBox.expandByPoint(ba.max))}}else this.boundingBox.makeEmpty();(isNaN(this.boundingBox.min.x)||isNaN(this.boundingBox.min.y)||isNaN(this.boundingBox.min.z))&&Xt('BufferGeometry.computeBoundingBox(): Computed min/max have NaN values. The "position" attribute is likely to have NaN values.',this)}computeBoundingSphere(){this.boundingSphere===null&&(this.boundingSphere=new ss);const e=this.attributes.position,t=this.morphAttributes.position;if(e&&e.isGLBufferAttribute){Xt("BufferGeometry.computeBoundingSphere(): GLBufferAttribute requires a manual bounding sphere.",this),this.boundingSphere.set(new J,1/0);return}if(e){const i=this.boundingSphere.center;if(ba.setFromBufferAttribute(e),t)for(let s=0,o=t.length;s<o;s++){const u=t[s];Lg.setFromBufferAttribute(u),this.morphTargetsRelative?(Vr.addVectors(ba.min,Lg.min),ba.expandByPoint(Vr),Vr.addVectors(ba.max,Lg.max),ba.expandByPoint(Vr)):(ba.expandByPoint(Lg.min),ba.expandByPoint(Lg.max))}ba.getCenter(i);let r=0;for(let s=0,o=e.count;s<o;s++)Vr.fromBufferAttribute(e,s),r=Math.max(r,i.distanceToSquared(Vr));if(t)for(let s=0,o=t.length;s<o;s++){const u=t[s],f=this.morphTargetsRelative;for(let p=0,m=u.count;p<m;p++)Vr.fromBufferAttribute(u,p),f&&(ep.fromBufferAttribute(e,p),Vr.add(ep)),r=Math.max(r,i.distanceToSquared(Vr))}this.boundingSphere.radius=Math.sqrt(r),isNaN(this.boundingSphere.radius)&&Xt('BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.',this)}}computeTangents(){const e=this.index,t=this.attributes;if(e===null||t.position===void 0||t.normal===void 0||t.uv===void 0){Xt("BufferGeometry: .computeTangents() failed. Missing required attributes (index, position, normal or uv)");return}const i=t.position,r=t.normal,s=t.uv;this.hasAttribute("tangent")===!1&&this.setAttribute("tangent",new fi(new Float32Array(4*i.count),4));const o=this.getAttribute("tangent"),u=[],f=[];for(let H=0;H<i.count;H++)u[H]=new J,f[H]=new J;const p=new J,m=new J,v=new J,_=new Ye,x=new Ye,S=new Ye,A=new J,E=new J;function M(H,P,k){p.fromBufferAttribute(i,H),m.fromBufferAttribute(i,P),v.fromBufferAttribute(i,k),_.fromBufferAttribute(s,H),x.fromBufferAttribute(s,P),S.fromBufferAttribute(s,k),m.sub(p),v.sub(p),x.sub(_),S.sub(_);const Y=1/(x.x*S.y-S.x*x.y);isFinite(Y)&&(A.copy(m).multiplyScalar(S.y).addScaledVector(v,-x.y).multiplyScalar(Y),E.copy(v).multiplyScalar(x.x).addScaledVector(m,-S.x).multiplyScalar(Y),u[H].add(A),u[P].add(A),u[k].add(A),f[H].add(E),f[P].add(E),f[k].add(E))}let C=this.groups;C.length===0&&(C=[{start:0,count:e.count}]);for(let H=0,P=C.length;H<P;++H){const k=C[H],Y=k.start,ie=k.count;for(let te=Y,le=Y+ie;te<le;te+=3)M(e.getX(te+0),e.getX(te+1),e.getX(te+2))}const N=new J,I=new J,U=new J,L=new J;function F(H){U.fromBufferAttribute(r,H),L.copy(U);const P=u[H];N.copy(P),N.sub(U.multiplyScalar(U.dot(P))).normalize(),I.crossVectors(L,P);const Y=I.dot(f[H])<0?-1:1;o.setXYZW(H,N.x,N.y,N.z,Y)}for(let H=0,P=C.length;H<P;++H){const k=C[H],Y=k.start,ie=k.count;for(let te=Y,le=Y+ie;te<le;te+=3)F(e.getX(te+0)),F(e.getX(te+1)),F(e.getX(te+2))}}computeVertexNormals(){const e=this.index,t=this.getAttribute("position");if(t!==void 0){let i=this.getAttribute("normal");if(i===void 0)i=new fi(new Float32Array(t.count*3),3),this.setAttribute("normal",i);else for(let _=0,x=i.count;_<x;_++)i.setXYZ(_,0,0,0);const r=new J,s=new J,o=new J,u=new J,f=new J,p=new J,m=new J,v=new J;if(e)for(let _=0,x=e.count;_<x;_+=3){const S=e.getX(_+0),A=e.getX(_+1),E=e.getX(_+2);r.fromBufferAttribute(t,S),s.fromBufferAttribute(t,A),o.fromBufferAttribute(t,E),m.subVectors(o,s),v.subVectors(r,s),m.cross(v),u.fromBufferAttribute(i,S),f.fromBufferAttribute(i,A),p.fromBufferAttribute(i,E),u.add(m),f.add(m),p.add(m),i.setXYZ(S,u.x,u.y,u.z),i.setXYZ(A,f.x,f.y,f.z),i.setXYZ(E,p.x,p.y,p.z)}else for(let _=0,x=t.count;_<x;_+=3)r.fromBufferAttribute(t,_+0),s.fromBufferAttribute(t,_+1),o.fromBufferAttribute(t,_+2),m.subVectors(o,s),v.subVectors(r,s),m.cross(v),i.setXYZ(_+0,m.x,m.y,m.z),i.setXYZ(_+1,m.x,m.y,m.z),i.setXYZ(_+2,m.x,m.y,m.z);this.normalizeNormals(),i.needsUpdate=!0}}normalizeNormals(){const e=this.attributes.normal;for(let t=0,i=e.count;t<i;t++)Vr.fromBufferAttribute(e,t),Vr.normalize(),e.setXYZ(t,Vr.x,Vr.y,Vr.z)}toNonIndexed(){function e(u,f){const p=u.array,m=u.itemSize,v=u.normalized,_=new p.constructor(f.length*m);let x=0,S=0;for(let A=0,E=f.length;A<E;A++){u.isInterleavedBufferAttribute?x=f[A]*u.data.stride+u.offset:x=f[A]*m;for(let M=0;M<m;M++)_[S++]=p[x++]}return new fi(_,m,v)}if(this.index===null)return At("BufferGeometry.toNonIndexed(): BufferGeometry is already non-indexed."),this;const t=new vn,i=this.index.array,r=this.attributes;for(const u in r){const f=r[u],p=e(f,i);t.setAttribute(u,p)}const s=this.morphAttributes;for(const u in s){const f=[],p=s[u];for(let m=0,v=p.length;m<v;m++){const _=p[m],x=e(_,i);f.push(x)}t.morphAttributes[u]=f}t.morphTargetsRelative=this.morphTargetsRelative;const o=this.groups;for(let u=0,f=o.length;u<f;u++){const p=o[u];t.addGroup(p.start,p.count,p.materialIndex)}return t}toJSON(){const e={metadata:{version:4.7,type:"BufferGeometry",generator:"BufferGeometry.toJSON"}};if(e.uuid=this.uuid,e.type=this.type,this.name!==""&&(e.name=this.name),Object.keys(this.userData).length>0&&(e.userData=this.userData),this.parameters!==void 0){const f=this.parameters;for(const p in f)f[p]!==void 0&&(e[p]=f[p]);return e}e.data={attributes:{}};const t=this.index;t!==null&&(e.data.index={type:t.array.constructor.name,array:Array.prototype.slice.call(t.array)});const i=this.attributes;for(const f in i){const p=i[f];e.data.attributes[f]=p.toJSON(e.data)}const r={};let s=!1;for(const f in this.morphAttributes){const p=this.morphAttributes[f],m=[];for(let v=0,_=p.length;v<_;v++){const x=p[v];m.push(x.toJSON(e.data))}m.length>0&&(r[f]=m,s=!0)}s&&(e.data.morphAttributes=r,e.data.morphTargetsRelative=this.morphTargetsRelative);const o=this.groups;o.length>0&&(e.data.groups=JSON.parse(JSON.stringify(o)));const u=this.boundingSphere;return u!==null&&(e.data.boundingSphere=u.toJSON()),e}clone(){return new this.constructor().copy(this)}copy(e){this.index=null,this.attributes={},this.morphAttributes={},this.groups=[],this.boundingBox=null,this.boundingSphere=null;const t={};this.name=e.name;const i=e.index;i!==null&&this.setIndex(i.clone());const r=e.attributes;for(const p in r){const m=r[p];this.setAttribute(p,m.clone(t))}const s=e.morphAttributes;for(const p in s){const m=[],v=s[p];for(let _=0,x=v.length;_<x;_++)m.push(v[_].clone(t));this.morphAttributes[p]=m}this.morphTargetsRelative=e.morphTargetsRelative;const o=e.groups;for(let p=0,m=o.length;p<m;p++){const v=o[p];this.addGroup(v.start,v.count,v.materialIndex)}const u=e.boundingBox;u!==null&&(this.boundingBox=u.clone());const f=e.boundingSphere;return f!==null&&(this.boundingSphere=f.clone()),this.drawRange.start=e.drawRange.start,this.drawRange.count=e.drawRange.count,this.userData=e.userData,this}dispose(){this.dispatchEvent({type:"dispose"})}}const WR=new un,Wh=new Qp,b_=new ss,qR=new J,S_=new J,w_=new J,M_=new J,nw=new J,E_=new J,XR=new J,T_=new J;class Xi extends Zn{constructor(e=new vn,t=new Lc){super(),this.isMesh=!0,this.type="Mesh",this.geometry=e,this.material=t,this.morphTargetDictionary=void 0,this.morphTargetInfluences=void 0,this.count=1,this.updateMorphTargets()}copy(e,t){return super.copy(e,t),e.morphTargetInfluences!==void 0&&(this.morphTargetInfluences=e.morphTargetInfluences.slice()),e.morphTargetDictionary!==void 0&&(this.morphTargetDictionary=Object.assign({},e.morphTargetDictionary)),this.material=Array.isArray(e.material)?e.material.slice():e.material,this.geometry=e.geometry,this}updateMorphTargets(){const t=this.geometry.morphAttributes,i=Object.keys(t);if(i.length>0){const r=t[i[0]];if(r!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let s=0,o=r.length;s<o;s++){const u=r[s].name||String(s);this.morphTargetInfluences.push(0),this.morphTargetDictionary[u]=s}}}}getVertexPosition(e,t){const i=this.geometry,r=i.attributes.position,s=i.morphAttributes.position,o=i.morphTargetsRelative;t.fromBufferAttribute(r,e);const u=this.morphTargetInfluences;if(s&&u){E_.set(0,0,0);for(let f=0,p=s.length;f<p;f++){const m=u[f],v=s[f];m!==0&&(nw.fromBufferAttribute(v,e),o?E_.addScaledVector(nw,m):E_.addScaledVector(nw.sub(t),m))}t.add(E_)}return t}raycast(e,t){const i=this.geometry,r=this.material,s=this.matrixWorld;r!==void 0&&(i.boundingSphere===null&&i.computeBoundingSphere(),b_.copy(i.boundingSphere),b_.applyMatrix4(s),Wh.copy(e.ray).recast(e.near),!(b_.containsPoint(Wh.origin)===!1&&(Wh.intersectSphere(b_,qR)===null||Wh.origin.distanceToSquared(qR)>(e.far-e.near)**2))&&(WR.copy(s).invert(),Wh.copy(e.ray).applyMatrix4(WR),!(i.boundingBox!==null&&Wh.intersectsBox(i.boundingBox)===!1)&&this._computeIntersections(e,t,Wh)))}_computeIntersections(e,t,i){let r;const s=this.geometry,o=this.material,u=s.index,f=s.attributes.position,p=s.attributes.uv,m=s.attributes.uv1,v=s.attributes.normal,_=s.groups,x=s.drawRange;if(u!==null)if(Array.isArray(o))for(let S=0,A=_.length;S<A;S++){const E=_[S],M=o[E.materialIndex],C=Math.max(E.start,x.start),N=Math.min(u.count,Math.min(E.start+E.count,x.start+x.count));for(let I=C,U=N;I<U;I+=3){const L=u.getX(I),F=u.getX(I+1),H=u.getX(I+2);r=A_(this,M,e,i,p,m,v,L,F,H),r&&(r.faceIndex=Math.floor(I/3),r.face.materialIndex=E.materialIndex,t.push(r))}}else{const S=Math.max(0,x.start),A=Math.min(u.count,x.start+x.count);for(let E=S,M=A;E<M;E+=3){const C=u.getX(E),N=u.getX(E+1),I=u.getX(E+2);r=A_(this,o,e,i,p,m,v,C,N,I),r&&(r.faceIndex=Math.floor(E/3),t.push(r))}}else if(f!==void 0)if(Array.isArray(o))for(let S=0,A=_.length;S<A;S++){const E=_[S],M=o[E.materialIndex],C=Math.max(E.start,x.start),N=Math.min(f.count,Math.min(E.start+E.count,x.start+x.count));for(let I=C,U=N;I<U;I+=3){const L=I,F=I+1,H=I+2;r=A_(this,M,e,i,p,m,v,L,F,H),r&&(r.faceIndex=Math.floor(I/3),r.face.materialIndex=E.materialIndex,t.push(r))}}else{const S=Math.max(0,x.start),A=Math.min(f.count,x.start+x.count);for(let E=S,M=A;E<M;E+=3){const C=E,N=E+1,I=E+2;r=A_(this,o,e,i,p,m,v,C,N,I),r&&(r.faceIndex=Math.floor(E/3),t.push(r))}}}}function h2(n,e,t,i,r,s,o,u){let f;if(e.side===Vs?f=i.intersectTriangle(o,s,r,!0,u):f=i.intersectTriangle(r,s,o,e.side===Pc,u),f===null)return null;T_.copy(u),T_.applyMatrix4(n.matrixWorld);const p=t.ray.origin.distanceTo(T_);return p<t.near||p>t.far?null:{distance:p,point:T_.clone(),object:n}}function A_(n,e,t,i,r,s,o,u,f,p){n.getVertexPosition(u,S_),n.getVertexPosition(f,w_),n.getVertexPosition(p,M_);const m=h2(n,e,t,i,S_,w_,M_,XR);if(m){const v=new J;da.getBarycoord(XR,S_,w_,M_,v),r&&(m.uv=da.getInterpolatedAttribute(r,u,f,p,v,new Ye)),s&&(m.uv1=da.getInterpolatedAttribute(s,u,f,p,v,new Ye)),o&&(m.normal=da.getInterpolatedAttribute(o,u,f,p,v,new J),m.normal.dot(i.direction)>0&&m.normal.multiplyScalar(-1));const _={a:u,b:f,c:p,normal:new J,materialIndex:0};da.getNormal(S_,w_,M_,_.normal),m.face=_,m.barycoord=v}return m}class Rf extends vn{constructor(e=1,t=1,i=1,r=1,s=1,o=1){super(),this.type="BoxGeometry",this.parameters={width:e,height:t,depth:i,widthSegments:r,heightSegments:s,depthSegments:o};const u=this;r=Math.floor(r),s=Math.floor(s),o=Math.floor(o);const f=[],p=[],m=[],v=[];let _=0,x=0;S("z","y","x",-1,-1,i,t,e,o,s,0),S("z","y","x",1,-1,i,t,-e,o,s,1),S("x","z","y",1,1,e,i,t,r,o,2),S("x","z","y",1,-1,e,i,-t,r,o,3),S("x","y","z",1,-1,e,t,i,r,s,4),S("x","y","z",-1,-1,e,t,-i,r,s,5),this.setIndex(f),this.setAttribute("position",new kt(p,3)),this.setAttribute("normal",new kt(m,3)),this.setAttribute("uv",new kt(v,2));function S(A,E,M,C,N,I,U,L,F,H,P){const k=I/F,Y=U/H,ie=I/2,te=U/2,le=L/2,de=F+1,Z=H+1;let Q=0,ve=0;const Te=new J;for(let we=0;we<Z;we++){const X=we*Y-te;for(let ce=0;ce<de;ce++){const xe=ce*k-ie;Te[A]=xe*C,Te[E]=X*N,Te[M]=le,p.push(Te.x,Te.y,Te.z),Te[A]=0,Te[E]=0,Te[M]=L>0?1:-1,m.push(Te.x,Te.y,Te.z),v.push(ce/F),v.push(1-we/H),Q+=1}}for(let we=0;we<H;we++)for(let X=0;X<F;X++){const ce=_+X+de*we,xe=_+X+de*(we+1),Be=_+(X+1)+de*(we+1),mt=_+(X+1)+de*we;f.push(ce,xe,mt),f.push(xe,Be,mt),ve+=6}u.addGroup(x,ve,P),x+=ve,_+=Q}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new Rf(e.width,e.height,e.depth,e.widthSegments,e.heightSegments,e.depthSegments)}}function Fp(n){const e={};for(const t in n){e[t]={};for(const i in n[t]){const r=n[t][i];r&&(r.isColor||r.isMatrix3||r.isMatrix4||r.isVector2||r.isVector3||r.isVector4||r.isTexture||r.isQuaternion)?r.isRenderTargetTexture?(At("UniformsUtils: Textures of render targets cannot be cloned via cloneUniforms() or mergeUniforms()."),e[t][i]=null):e[t][i]=r.clone():Array.isArray(r)?e[t][i]=r.slice():e[t][i]=r}}return e}function Us(n){const e={};for(let t=0;t<n.length;t++){const i=Fp(n[t]);for(const r in i)e[r]=i[r]}return e}function f2(n){const e=[];for(let t=0;t<n.length;t++)e.push(n[t].clone());return e}function YP(n){const e=n.getRenderTarget();return e===null?n.outputColorSpace:e.isXRRenderTarget===!0?e.texture.colorSpace:Hn.workingColorSpace}const ZP={clone:Fp,merge:Us};var d2=`void main() {
	gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );
}`,p2=`void main() {
	gl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );
}`;class Ss extends ws{constructor(e){super(),this.isShaderMaterial=!0,this.type="ShaderMaterial",this.defines={},this.uniforms={},this.uniformsGroups=[],this.vertexShader=d2,this.fragmentShader=p2,this.linewidth=1,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.lights=!1,this.clipping=!1,this.forceSinglePass=!0,this.extensions={clipCullDistance:!1,multiDraw:!1},this.defaultAttributeValues={color:[1,1,1],uv:[0,0],uv1:[0,0]},this.index0AttributeName=void 0,this.uniformsNeedUpdate=!1,this.glslVersion=null,e!==void 0&&this.setValues(e)}copy(e){return super.copy(e),this.fragmentShader=e.fragmentShader,this.vertexShader=e.vertexShader,this.uniforms=Fp(e.uniforms),this.uniformsGroups=f2(e.uniformsGroups),this.defines=Object.assign({},e.defines),this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.fog=e.fog,this.lights=e.lights,this.clipping=e.clipping,this.extensions=Object.assign({},e.extensions),this.glslVersion=e.glslVersion,this.defaultAttributeValues=Object.assign({},e.defaultAttributeValues),this.index0AttributeName=e.index0AttributeName,this.uniformsNeedUpdate=e.uniformsNeedUpdate,this}toJSON(e){const t=super.toJSON(e);t.glslVersion=this.glslVersion,t.uniforms={};for(const r in this.uniforms){const o=this.uniforms[r].value;o&&o.isTexture?t.uniforms[r]={type:"t",value:o.toJSON(e).uuid}:o&&o.isColor?t.uniforms[r]={type:"c",value:o.getHex()}:o&&o.isVector2?t.uniforms[r]={type:"v2",value:o.toArray()}:o&&o.isVector3?t.uniforms[r]={type:"v3",value:o.toArray()}:o&&o.isVector4?t.uniforms[r]={type:"v4",value:o.toArray()}:o&&o.isMatrix3?t.uniforms[r]={type:"m3",value:o.toArray()}:o&&o.isMatrix4?t.uniforms[r]={type:"m4",value:o.toArray()}:t.uniforms[r]={value:o}}Object.keys(this.defines).length>0&&(t.defines=this.defines),t.vertexShader=this.vertexShader,t.fragmentShader=this.fragmentShader,t.lights=this.lights,t.clipping=this.clipping;const i={};for(const r in this.extensions)this.extensions[r]===!0&&(i[r]=!0);return Object.keys(i).length>0&&(t.extensions=i),t}}class Yb extends Zn{constructor(){super(),this.isCamera=!0,this.type="Camera",this.matrixWorldInverse=new un,this.projectionMatrix=new un,this.projectionMatrixInverse=new un,this.coordinateSystem=Ma,this._reversedDepth=!1}get reversedDepth(){return this._reversedDepth}copy(e,t){return super.copy(e,t),this.matrixWorldInverse.copy(e.matrixWorldInverse),this.projectionMatrix.copy(e.projectionMatrix),this.projectionMatrixInverse.copy(e.projectionMatrixInverse),this.coordinateSystem=e.coordinateSystem,this}getWorldDirection(e){return super.getWorldDirection(e).negate()}updateMatrixWorld(e){super.updateMatrixWorld(e),this.matrixWorldInverse.copy(this.matrixWorld).invert()}updateWorldMatrix(e,t){super.updateWorldMatrix(e,t),this.matrixWorldInverse.copy(this.matrixWorld).invert()}clone(){return new this.constructor().copy(this)}}const Nu=new J,$R=new Ye,YR=new Ye;class Hr extends Yb{constructor(e=50,t=1,i=.1,r=2e3){super(),this.isPerspectiveCamera=!0,this.type="PerspectiveCamera",this.fov=e,this.zoom=1,this.near=i,this.far=r,this.focus=10,this.aspect=t,this.view=null,this.filmGauge=35,this.filmOffset=0,this.updateProjectionMatrix()}copy(e,t){return super.copy(e,t),this.fov=e.fov,this.zoom=e.zoom,this.near=e.near,this.far=e.far,this.focus=e.focus,this.aspect=e.aspect,this.view=e.view===null?null:Object.assign({},e.view),this.filmGauge=e.filmGauge,this.filmOffset=e.filmOffset,this}setFocalLength(e){const t=.5*this.getFilmHeight()/e;this.fov=Bp*2*Math.atan(t),this.updateProjectionMatrix()}getFocalLength(){const e=Math.tan(bf*.5*this.fov);return .5*this.getFilmHeight()/e}getEffectiveFOV(){return Bp*2*Math.atan(Math.tan(bf*.5*this.fov)/this.zoom)}getFilmWidth(){return this.filmGauge*Math.min(this.aspect,1)}getFilmHeight(){return this.filmGauge/Math.max(this.aspect,1)}getViewBounds(e,t,i){Nu.set(-1,-1,.5).applyMatrix4(this.projectionMatrixInverse),t.set(Nu.x,Nu.y).multiplyScalar(-e/Nu.z),Nu.set(1,1,.5).applyMatrix4(this.projectionMatrixInverse),i.set(Nu.x,Nu.y).multiplyScalar(-e/Nu.z)}getViewSize(e,t){return this.getViewBounds(e,$R,YR),t.subVectors(YR,$R)}setViewOffset(e,t,i,r,s,o){this.aspect=e/t,this.view===null&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=t,this.view.offsetX=i,this.view.offsetY=r,this.view.width=s,this.view.height=o,this.updateProjectionMatrix()}clearViewOffset(){this.view!==null&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const e=this.near;let t=e*Math.tan(bf*.5*this.fov)/this.zoom,i=2*t,r=this.aspect*i,s=-.5*r;const o=this.view;if(this.view!==null&&this.view.enabled){const f=o.fullWidth,p=o.fullHeight;s+=o.offsetX*r/f,t-=o.offsetY*i/p,r*=o.width/f,i*=o.height/p}const u=this.filmOffset;u!==0&&(s+=e*u/this.getFilmWidth()),this.projectionMatrix.makePerspective(s,s+r,t,t-i,e,this.far,this.coordinateSystem,this.reversedDepth),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(e){const t=super.toJSON(e);return t.object.fov=this.fov,t.object.zoom=this.zoom,t.object.near=this.near,t.object.far=this.far,t.object.focus=this.focus,t.object.aspect=this.aspect,this.view!==null&&(t.object.view=Object.assign({},this.view)),t.object.filmGauge=this.filmGauge,t.object.filmOffset=this.filmOffset,t}}const tp=-90,np=1;class KP extends Zn{constructor(e,t,i){super(),this.type="CubeCamera",this.renderTarget=i,this.coordinateSystem=null,this.activeMipmapLevel=0;const r=new Hr(tp,np,e,t);r.layers=this.layers,this.add(r);const s=new Hr(tp,np,e,t);s.layers=this.layers,this.add(s);const o=new Hr(tp,np,e,t);o.layers=this.layers,this.add(o);const u=new Hr(tp,np,e,t);u.layers=this.layers,this.add(u);const f=new Hr(tp,np,e,t);f.layers=this.layers,this.add(f);const p=new Hr(tp,np,e,t);p.layers=this.layers,this.add(p)}updateCoordinateSystem(){const e=this.coordinateSystem,t=this.children.concat(),[i,r,s,o,u,f]=t;for(const p of t)this.remove(p);if(e===Ma)i.up.set(0,1,0),i.lookAt(1,0,0),r.up.set(0,1,0),r.lookAt(-1,0,0),s.up.set(0,0,-1),s.lookAt(0,1,0),o.up.set(0,0,1),o.lookAt(0,-1,0),u.up.set(0,1,0),u.lookAt(0,0,1),f.up.set(0,1,0),f.lookAt(0,0,-1);else if(e===Up)i.up.set(0,-1,0),i.lookAt(-1,0,0),r.up.set(0,-1,0),r.lookAt(1,0,0),s.up.set(0,0,1),s.lookAt(0,1,0),o.up.set(0,0,-1),o.lookAt(0,-1,0),u.up.set(0,-1,0),u.lookAt(0,0,1),f.up.set(0,-1,0),f.lookAt(0,0,-1);else throw new Error("THREE.CubeCamera.updateCoordinateSystem(): Invalid coordinate system: "+e);for(const p of t)this.add(p),p.updateMatrixWorld()}update(e,t){this.parent===null&&this.updateMatrixWorld();const{renderTarget:i,activeMipmapLevel:r}=this;this.coordinateSystem!==e.coordinateSystem&&(this.coordinateSystem=e.coordinateSystem,this.updateCoordinateSystem());const[s,o,u,f,p,m]=this.children,v=e.getRenderTarget(),_=e.getActiveCubeFace(),x=e.getActiveMipmapLevel(),S=e.xr.enabled;e.xr.enabled=!1;const A=i.texture.generateMipmaps;i.texture.generateMipmaps=!1,e.setRenderTarget(i,0,r),e.render(t,s),e.setRenderTarget(i,1,r),e.render(t,o),e.setRenderTarget(i,2,r),e.render(t,u),e.setRenderTarget(i,3,r),e.render(t,f),e.setRenderTarget(i,4,r),e.render(t,p),i.texture.generateMipmaps=A,e.setRenderTarget(i,5,r),e.render(t,m),e.setRenderTarget(v,_,x),e.xr.enabled=S,i.texture.needsPMREMUpdate=!0}}class lv extends hi{constructor(e=[],t=$o,i,r,s,o,u,f,p,m){super(e,t,i,r,s,o,u,f,p,m),this.isCubeTexture=!0,this.flipY=!1}get images(){return this.image}set images(e){this.image=e}}class Zb extends Hs{constructor(e=1,t={}){super(e,e,t),this.isWebGLCubeRenderTarget=!0;const i={width:e,height:e,depth:1},r=[i,i,i,i,i,i];this.texture=new lv(r),this._setTextureOptions(t),this.texture.isRenderTargetTexture=!0}fromEquirectangularTexture(e,t){this.texture.type=t.type,this.texture.colorSpace=t.colorSpace,this.texture.generateMipmaps=t.generateMipmaps,this.texture.minFilter=t.minFilter,this.texture.magFilter=t.magFilter;const i={uniforms:{tEquirect:{value:null}},vertexShader:`

				varying vec3 vWorldDirection;

				vec3 transformDirection( in vec3 dir, in mat4 matrix ) {

					return normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );

				}

				void main() {

					vWorldDirection = transformDirection( position, modelMatrix );

					#include <begin_vertex>
					#include <project_vertex>

				}
			`,fragmentShader:`

				uniform sampler2D tEquirect;

				varying vec3 vWorldDirection;

				#include <common>

				void main() {

					vec3 direction = normalize( vWorldDirection );

					vec2 sampleUV = equirectUv( direction );

					gl_FragColor = texture2D( tEquirect, sampleUV );

				}
			`},r=new Rf(5,5,5),s=new Ss({name:"CubemapFromEquirect",uniforms:Fp(i.uniforms),vertexShader:i.vertexShader,fragmentShader:i.fragmentShader,side:Vs,blending:Xo});s.uniforms.tEquirect.value=t;const o=new Xi(r,s),u=t.minFilter;return t.minFilter===Il&&(t.minFilter=Wn),new KP(1,10,this).update(e,o),t.minFilter=u,o.geometry.dispose(),o.material.dispose(),this}clear(e,t=!0,i=!0,r=!0){const s=e.getRenderTarget();for(let o=0;o<6;o++)e.setRenderTarget(this,o),e.clear(t,i,r);e.setRenderTarget(s)}}class Ep extends Zn{constructor(){super(),this.isGroup=!0,this.type="Group"}}const m2={type:"move"};class dx{constructor(){this._targetRay=null,this._grip=null,this._hand=null}getHandSpace(){return this._hand===null&&(this._hand=new Ep,this._hand.matrixAutoUpdate=!1,this._hand.visible=!1,this._hand.joints={},this._hand.inputState={pinching:!1}),this._hand}getTargetRaySpace(){return this._targetRay===null&&(this._targetRay=new Ep,this._targetRay.matrixAutoUpdate=!1,this._targetRay.visible=!1,this._targetRay.hasLinearVelocity=!1,this._targetRay.linearVelocity=new J,this._targetRay.hasAngularVelocity=!1,this._targetRay.angularVelocity=new J),this._targetRay}getGripSpace(){return this._grip===null&&(this._grip=new Ep,this._grip.matrixAutoUpdate=!1,this._grip.visible=!1,this._grip.hasLinearVelocity=!1,this._grip.linearVelocity=new J,this._grip.hasAngularVelocity=!1,this._grip.angularVelocity=new J),this._grip}dispatchEvent(e){return this._targetRay!==null&&this._targetRay.dispatchEvent(e),this._grip!==null&&this._grip.dispatchEvent(e),this._hand!==null&&this._hand.dispatchEvent(e),this}connect(e){if(e&&e.hand){const t=this._hand;if(t)for(const i of e.hand.values())this._getHandJoint(t,i)}return this.dispatchEvent({type:"connected",data:e}),this}disconnect(e){return this.dispatchEvent({type:"disconnected",data:e}),this._targetRay!==null&&(this._targetRay.visible=!1),this._grip!==null&&(this._grip.visible=!1),this._hand!==null&&(this._hand.visible=!1),this}update(e,t,i){let r=null,s=null,o=null;const u=this._targetRay,f=this._grip,p=this._hand;if(e&&t.session.visibilityState!=="visible-blurred"){if(p&&e.hand){o=!0;for(const A of e.hand.values()){const E=t.getJointPose(A,i),M=this._getHandJoint(p,A);E!==null&&(M.matrix.fromArray(E.transform.matrix),M.matrix.decompose(M.position,M.rotation,M.scale),M.matrixWorldNeedsUpdate=!0,M.jointRadius=E.radius),M.visible=E!==null}const m=p.joints["index-finger-tip"],v=p.joints["thumb-tip"],_=m.position.distanceTo(v.position),x=.02,S=.005;p.inputState.pinching&&_>x+S?(p.inputState.pinching=!1,this.dispatchEvent({type:"pinchend",handedness:e.handedness,target:this})):!p.inputState.pinching&&_<=x-S&&(p.inputState.pinching=!0,this.dispatchEvent({type:"pinchstart",handedness:e.handedness,target:this}))}else f!==null&&e.gripSpace&&(s=t.getPose(e.gripSpace,i),s!==null&&(f.matrix.fromArray(s.transform.matrix),f.matrix.decompose(f.position,f.rotation,f.scale),f.matrixWorldNeedsUpdate=!0,s.linearVelocity?(f.hasLinearVelocity=!0,f.linearVelocity.copy(s.linearVelocity)):f.hasLinearVelocity=!1,s.angularVelocity?(f.hasAngularVelocity=!0,f.angularVelocity.copy(s.angularVelocity)):f.hasAngularVelocity=!1));u!==null&&(r=t.getPose(e.targetRaySpace,i),r===null&&s!==null&&(r=s),r!==null&&(u.matrix.fromArray(r.transform.matrix),u.matrix.decompose(u.position,u.rotation,u.scale),u.matrixWorldNeedsUpdate=!0,r.linearVelocity?(u.hasLinearVelocity=!0,u.linearVelocity.copy(r.linearVelocity)):u.hasLinearVelocity=!1,r.angularVelocity?(u.hasAngularVelocity=!0,u.angularVelocity.copy(r.angularVelocity)):u.hasAngularVelocity=!1,this.dispatchEvent(m2)))}return u!==null&&(u.visible=r!==null),f!==null&&(f.visible=s!==null),p!==null&&(p.visible=o!==null),this}_getHandJoint(e,t){if(e.joints[t.jointName]===void 0){const i=new Ep;i.matrixAutoUpdate=!1,i.visible=!1,e.joints[t.jointName]=i,e.add(i)}return e.joints[t.jointName]}}class Kb{constructor(e,t=25e-5){this.isFogExp2=!0,this.name="",this.color=new Ot(e),this.density=t}clone(){return new Kb(this.color,this.density)}toJSON(){return{type:"FogExp2",name:this.name,color:this.color.getHex(),density:this.density}}}class Jb{constructor(e,t=1,i=1e3){this.isFog=!0,this.name="",this.color=new Ot(e),this.near=t,this.far=i}clone(){return new Jb(this.color,this.near,this.far)}toJSON(){return{type:"Fog",name:this.name,color:this.color.getHex(),near:this.near,far:this.far}}}class cv extends Zn{constructor(){super(),this.isScene=!0,this.type="Scene",this.background=null,this.environment=null,this.fog=null,this.backgroundBlurriness=0,this.backgroundIntensity=1,this.backgroundRotation=new Ca,this.environmentIntensity=1,this.environmentRotation=new Ca,this.overrideMaterial=null,typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}copy(e,t){return super.copy(e,t),e.background!==null&&(this.background=e.background.clone()),e.environment!==null&&(this.environment=e.environment.clone()),e.fog!==null&&(this.fog=e.fog.clone()),this.backgroundBlurriness=e.backgroundBlurriness,this.backgroundIntensity=e.backgroundIntensity,this.backgroundRotation.copy(e.backgroundRotation),this.environmentIntensity=e.environmentIntensity,this.environmentRotation.copy(e.environmentRotation),e.overrideMaterial!==null&&(this.overrideMaterial=e.overrideMaterial.clone()),this.matrixAutoUpdate=e.matrixAutoUpdate,this}toJSON(e){const t=super.toJSON(e);return this.fog!==null&&(t.object.fog=this.fog.toJSON()),this.backgroundBlurriness>0&&(t.object.backgroundBlurriness=this.backgroundBlurriness),this.backgroundIntensity!==1&&(t.object.backgroundIntensity=this.backgroundIntensity),t.object.backgroundRotation=this.backgroundRotation.toArray(),this.environmentIntensity!==1&&(t.object.environmentIntensity=this.environmentIntensity),t.object.environmentRotation=this.environmentRotation.toArray(),t}}class Qb{constructor(e,t){this.isInterleavedBuffer=!0,this.array=e,this.stride=t,this.count=e!==void 0?e.length/t:0,this.usage=U0,this.updateRanges=[],this.version=0,this.uuid=Ea()}onUploadCallback(){}set needsUpdate(e){e===!0&&this.version++}setUsage(e){return this.usage=e,this}addUpdateRange(e,t){this.updateRanges.push({start:e,count:t})}clearUpdateRanges(){this.updateRanges.length=0}copy(e){return this.array=new e.array.constructor(e.array),this.count=e.count,this.stride=e.stride,this.usage=e.usage,this}copyAt(e,t,i){e*=this.stride,i*=t.stride;for(let r=0,s=this.stride;r<s;r++)this.array[e+r]=t.array[i+r];return this}set(e,t=0){return this.array.set(e,t),this}clone(e){e.arrayBuffers===void 0&&(e.arrayBuffers={}),this.array.buffer._uuid===void 0&&(this.array.buffer._uuid=Ea()),e.arrayBuffers[this.array.buffer._uuid]===void 0&&(e.arrayBuffers[this.array.buffer._uuid]=this.array.slice(0).buffer);const t=new this.array.constructor(e.arrayBuffers[this.array.buffer._uuid]),i=new this.constructor(t,this.stride);return i.setUsage(this.usage),i}onUpload(e){return this.onUploadCallback=e,this}toJSON(e){return e.arrayBuffers===void 0&&(e.arrayBuffers={}),this.array.buffer._uuid===void 0&&(this.array.buffer._uuid=Ea()),e.arrayBuffers[this.array.buffer._uuid]===void 0&&(e.arrayBuffers[this.array.buffer._uuid]=Array.from(new Uint32Array(this.array.buffer))),{uuid:this.uuid,buffer:this.array.buffer._uuid,type:this.array.constructor.name,stride:this.stride}}}const Ls=new J;class Ef{constructor(e,t,i,r=!1){this.isInterleavedBufferAttribute=!0,this.name="",this.data=e,this.itemSize=t,this.offset=i,this.normalized=r}get count(){return this.data.count}get array(){return this.data.array}set needsUpdate(e){this.data.needsUpdate=e}applyMatrix4(e){for(let t=0,i=this.data.count;t<i;t++)Ls.fromBufferAttribute(this,t),Ls.applyMatrix4(e),this.setXYZ(t,Ls.x,Ls.y,Ls.z);return this}applyNormalMatrix(e){for(let t=0,i=this.count;t<i;t++)Ls.fromBufferAttribute(this,t),Ls.applyNormalMatrix(e),this.setXYZ(t,Ls.x,Ls.y,Ls.z);return this}transformDirection(e){for(let t=0,i=this.count;t<i;t++)Ls.fromBufferAttribute(this,t),Ls.transformDirection(e),this.setXYZ(t,Ls.x,Ls.y,Ls.z);return this}getComponent(e,t){let i=this.array[e*this.data.stride+this.offset+t];return this.normalized&&(i=Bs(i,this.array)),i}setComponent(e,t,i){return this.normalized&&(i=Mn(i,this.array)),this.data.array[e*this.data.stride+this.offset+t]=i,this}setX(e,t){return this.normalized&&(t=Mn(t,this.array)),this.data.array[e*this.data.stride+this.offset]=t,this}setY(e,t){return this.normalized&&(t=Mn(t,this.array)),this.data.array[e*this.data.stride+this.offset+1]=t,this}setZ(e,t){return this.normalized&&(t=Mn(t,this.array)),this.data.array[e*this.data.stride+this.offset+2]=t,this}setW(e,t){return this.normalized&&(t=Mn(t,this.array)),this.data.array[e*this.data.stride+this.offset+3]=t,this}getX(e){let t=this.data.array[e*this.data.stride+this.offset];return this.normalized&&(t=Bs(t,this.array)),t}getY(e){let t=this.data.array[e*this.data.stride+this.offset+1];return this.normalized&&(t=Bs(t,this.array)),t}getZ(e){let t=this.data.array[e*this.data.stride+this.offset+2];return this.normalized&&(t=Bs(t,this.array)),t}getW(e){let t=this.data.array[e*this.data.stride+this.offset+3];return this.normalized&&(t=Bs(t,this.array)),t}setXY(e,t,i){return e=e*this.data.stride+this.offset,this.normalized&&(t=Mn(t,this.array),i=Mn(i,this.array)),this.data.array[e+0]=t,this.data.array[e+1]=i,this}setXYZ(e,t,i,r){return e=e*this.data.stride+this.offset,this.normalized&&(t=Mn(t,this.array),i=Mn(i,this.array),r=Mn(r,this.array)),this.data.array[e+0]=t,this.data.array[e+1]=i,this.data.array[e+2]=r,this}setXYZW(e,t,i,r,s){return e=e*this.data.stride+this.offset,this.normalized&&(t=Mn(t,this.array),i=Mn(i,this.array),r=Mn(r,this.array),s=Mn(s,this.array)),this.data.array[e+0]=t,this.data.array[e+1]=i,this.data.array[e+2]=r,this.data.array[e+3]=s,this}clone(e){if(e===void 0){B0("InterleavedBufferAttribute.clone(): Cloning an interleaved buffer attribute will de-interleave buffer data.");const t=[];for(let i=0;i<this.count;i++){const r=i*this.data.stride+this.offset;for(let s=0;s<this.itemSize;s++)t.push(this.data.array[r+s])}return new fi(new this.array.constructor(t),this.itemSize,this.normalized)}else return e.interleavedBuffers===void 0&&(e.interleavedBuffers={}),e.interleavedBuffers[this.data.uuid]===void 0&&(e.interleavedBuffers[this.data.uuid]=this.data.clone(e)),new Ef(e.interleavedBuffers[this.data.uuid],this.itemSize,this.offset,this.normalized)}toJSON(e){if(e===void 0){B0("InterleavedBufferAttribute.toJSON(): Serializing an interleaved buffer attribute will de-interleave buffer data.");const t=[];for(let i=0;i<this.count;i++){const r=i*this.data.stride+this.offset;for(let s=0;s<this.itemSize;s++)t.push(this.data.array[r+s])}return{itemSize:this.itemSize,type:this.array.constructor.name,array:t,normalized:this.normalized}}else return e.interleavedBuffers===void 0&&(e.interleavedBuffers={}),e.interleavedBuffers[this.data.uuid]===void 0&&(e.interleavedBuffers[this.data.uuid]=this.data.toJSON(e)),{isInterleavedBufferAttribute:!0,itemSize:this.itemSize,data:this.data.uuid,offset:this.offset,normalized:this.normalized}}}class JE extends ws{constructor(e){super(),this.isSpriteMaterial=!0,this.type="SpriteMaterial",this.color=new Ot(16777215),this.map=null,this.alphaMap=null,this.rotation=0,this.sizeAttenuation=!0,this.transparent=!0,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.alphaMap=e.alphaMap,this.rotation=e.rotation,this.sizeAttenuation=e.sizeAttenuation,this.fog=e.fog,this}}let ip;const Ug=new J,rp=new J,sp=new J,ap=new Ye,kg=new Ye,JP=new un,C_=new J,Bg=new J,R_=new J,ZR=new Ye,iw=new Ye,KR=new Ye;class QP extends Zn{constructor(e=new JE){if(super(),this.isSprite=!0,this.type="Sprite",ip===void 0){ip=new vn;const t=new Float32Array([-.5,-.5,0,0,0,.5,-.5,0,1,0,.5,.5,0,1,1,-.5,.5,0,0,1]),i=new Qb(t,5);ip.setIndex([0,1,2,0,2,3]),ip.setAttribute("position",new Ef(i,3,0,!1)),ip.setAttribute("uv",new Ef(i,2,3,!1))}this.geometry=ip,this.material=e,this.center=new Ye(.5,.5),this.count=1}raycast(e,t){e.camera===null&&Xt('Sprite: "Raycaster.camera" needs to be set in order to raycast against sprites.'),rp.setFromMatrixScale(this.matrixWorld),JP.copy(e.camera.matrixWorld),this.modelViewMatrix.multiplyMatrices(e.camera.matrixWorldInverse,this.matrixWorld),sp.setFromMatrixPosition(this.modelViewMatrix),e.camera.isPerspectiveCamera&&this.material.sizeAttenuation===!1&&rp.multiplyScalar(-sp.z);const i=this.material.rotation;let r,s;i!==0&&(s=Math.cos(i),r=Math.sin(i));const o=this.center;N_(C_.set(-.5,-.5,0),sp,o,rp,r,s),N_(Bg.set(.5,-.5,0),sp,o,rp,r,s),N_(R_.set(.5,.5,0),sp,o,rp,r,s),ZR.set(0,0),iw.set(1,0),KR.set(1,1);let u=e.ray.intersectTriangle(C_,Bg,R_,!1,Ug);if(u===null&&(N_(Bg.set(-.5,.5,0),sp,o,rp,r,s),iw.set(0,1),u=e.ray.intersectTriangle(C_,R_,Bg,!1,Ug),u===null))return;const f=e.ray.origin.distanceTo(Ug);f<e.near||f>e.far||t.push({distance:f,point:Ug.clone(),uv:da.getInterpolation(Ug,C_,Bg,R_,ZR,iw,KR,new Ye),face:null,object:this})}copy(e,t){return super.copy(e,t),e.center!==void 0&&this.center.copy(e.center),this.material=e.material,this}}function N_(n,e,t,i,r,s){ap.subVectors(n,t).addScalar(.5).multiply(i),r!==void 0?(kg.x=s*ap.x-r*ap.y,kg.y=r*ap.x+s*ap.y):kg.copy(ap),n.copy(e),n.x+=kg.x,n.y+=kg.y,n.applyMatrix4(JP)}const D_=new J,JR=new J;class eO extends Zn{constructor(){super(),this.isLOD=!0,this._currentLevel=0,this.type="LOD",Object.defineProperties(this,{levels:{enumerable:!0,value:[]}}),this.autoUpdate=!0}copy(e){super.copy(e,!1);const t=e.levels;for(let i=0,r=t.length;i<r;i++){const s=t[i];this.addLevel(s.object.clone(),s.distance,s.hysteresis)}return this.autoUpdate=e.autoUpdate,this}addLevel(e,t=0,i=0){t=Math.abs(t);const r=this.levels;let s;for(s=0;s<r.length&&!(t<r[s].distance);s++);return r.splice(s,0,{distance:t,hysteresis:i,object:e}),this.add(e),this}removeLevel(e){const t=this.levels;for(let i=0;i<t.length;i++)if(t[i].distance===e){const r=t.splice(i,1);return this.remove(r[0].object),!0}return!1}getCurrentLevel(){return this._currentLevel}getObjectForDistance(e){const t=this.levels;if(t.length>0){let i,r;for(i=1,r=t.length;i<r;i++){let s=t[i].distance;if(t[i].object.visible&&(s-=s*t[i].hysteresis),e<s)break}return t[i-1].object}return null}raycast(e,t){if(this.levels.length>0){D_.setFromMatrixPosition(this.matrixWorld);const r=e.ray.origin.distanceTo(D_);this.getObjectForDistance(r).raycast(e,t)}}update(e){const t=this.levels;if(t.length>1){D_.setFromMatrixPosition(e.matrixWorld),JR.setFromMatrixPosition(this.matrixWorld);const i=D_.distanceTo(JR)/e.zoom;t[0].object.visible=!0;let r,s;for(r=1,s=t.length;r<s;r++){let o=t[r].distance;if(t[r].object.visible&&(o-=o*t[r].hysteresis),i>=o)t[r-1].object.visible=!1,t[r].object.visible=!0;else break}for(this._currentLevel=r-1;r<s;r++)t[r].object.visible=!1}}toJSON(e){const t=super.toJSON(e);this.autoUpdate===!1&&(t.object.autoUpdate=!1),t.object.levels=[];const i=this.levels;for(let r=0,s=i.length;r<s;r++){const o=i[r];t.object.levels.push({object:o.object.uuid,distance:o.distance,hysteresis:o.hysteresis})}return t}}const QR=new J,e3=new mi,t3=new mi,g2=new J,n3=new un,I_=new J,rw=new ss,i3=new un,sw=new Qp;class tO extends Xi{constructor(e,t){super(e,t),this.isSkinnedMesh=!0,this.type="SkinnedMesh",this.bindMode=EM,this.bindMatrix=new un,this.bindMatrixInverse=new un,this.boundingBox=null,this.boundingSphere=null}computeBoundingBox(){const e=this.geometry;this.boundingBox===null&&(this.boundingBox=new bs),this.boundingBox.makeEmpty();const t=e.getAttribute("position");for(let i=0;i<t.count;i++)this.getVertexPosition(i,I_),this.boundingBox.expandByPoint(I_)}computeBoundingSphere(){const e=this.geometry;this.boundingSphere===null&&(this.boundingSphere=new ss),this.boundingSphere.makeEmpty();const t=e.getAttribute("position");for(let i=0;i<t.count;i++)this.getVertexPosition(i,I_),this.boundingSphere.expandByPoint(I_)}copy(e,t){return super.copy(e,t),this.bindMode=e.bindMode,this.bindMatrix.copy(e.bindMatrix),this.bindMatrixInverse.copy(e.bindMatrixInverse),this.skeleton=e.skeleton,e.boundingBox!==null&&(this.boundingBox=e.boundingBox.clone()),e.boundingSphere!==null&&(this.boundingSphere=e.boundingSphere.clone()),this}raycast(e,t){const i=this.material,r=this.matrixWorld;i!==void 0&&(this.boundingSphere===null&&this.computeBoundingSphere(),rw.copy(this.boundingSphere),rw.applyMatrix4(r),e.ray.intersectsSphere(rw)!==!1&&(i3.copy(r).invert(),sw.copy(e.ray).applyMatrix4(i3),!(this.boundingBox!==null&&sw.intersectsBox(this.boundingBox)===!1)&&this._computeIntersections(e,t,sw)))}getVertexPosition(e,t){return super.getVertexPosition(e,t),this.applyBoneTransform(e,t),t}bind(e,t){this.skeleton=e,t===void 0&&(this.updateMatrixWorld(!0),this.skeleton.calculateInverses(),t=this.matrixWorld),this.bindMatrix.copy(t),this.bindMatrixInverse.copy(t).invert()}pose(){this.skeleton.pose()}normalizeSkinWeights(){const e=new mi,t=this.geometry.attributes.skinWeight;for(let i=0,r=t.count;i<r;i++){e.fromBufferAttribute(t,i);const s=1/e.manhattanLength();s!==1/0?e.multiplyScalar(s):e.set(1,0,0,0),t.setXYZW(i,e.x,e.y,e.z,e.w)}}updateMatrixWorld(e){super.updateMatrixWorld(e),this.bindMode===EM?this.bindMatrixInverse.copy(this.matrixWorld).invert():this.bindMode===IP?this.bindMatrixInverse.copy(this.bindMatrix).invert():At("SkinnedMesh: Unrecognized bindMode: "+this.bindMode)}applyBoneTransform(e,t){const i=this.skeleton,r=this.geometry;e3.fromBufferAttribute(r.attributes.skinIndex,e),t3.fromBufferAttribute(r.attributes.skinWeight,e),QR.copy(t).applyMatrix4(this.bindMatrix),t.set(0,0,0);for(let s=0;s<4;s++){const o=t3.getComponent(s);if(o!==0){const u=e3.getComponent(s);n3.multiplyMatrices(i.bones[u].matrixWorld,i.boneInverses[u]),t.addScaledVector(g2.copy(QR).applyMatrix4(n3),o)}}return t.applyMatrix4(this.bindMatrixInverse)}}class QE extends Zn{constructor(){super(),this.isBone=!0,this.type="Bone"}}class co extends hi{constructor(e=null,t=1,i=1,r,s,o,u,f,p=dr,m=dr,v,_){super(null,o,u,f,p,m,r,s,v,_),this.isDataTexture=!0,this.image={data:e,width:t,height:i},this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}const r3=new un,v2=new un;class eS{constructor(e=[],t=[]){this.uuid=Ea(),this.bones=e.slice(0),this.boneInverses=t,this.boneMatrices=null,this.previousBoneMatrices=null,this.boneTexture=null,this.init()}init(){const e=this.bones,t=this.boneInverses;if(this.boneMatrices=new Float32Array(e.length*16),t.length===0)this.calculateInverses();else if(e.length!==t.length){At("Skeleton: Number of inverse bone matrices does not match amount of bones."),this.boneInverses=[];for(let i=0,r=this.bones.length;i<r;i++)this.boneInverses.push(new un)}}calculateInverses(){this.boneInverses.length=0;for(let e=0,t=this.bones.length;e<t;e++){const i=new un;this.bones[e]&&i.copy(this.bones[e].matrixWorld).invert(),this.boneInverses.push(i)}}pose(){for(let e=0,t=this.bones.length;e<t;e++){const i=this.bones[e];i&&i.matrixWorld.copy(this.boneInverses[e]).invert()}for(let e=0,t=this.bones.length;e<t;e++){const i=this.bones[e];i&&(i.parent&&i.parent.isBone?(i.matrix.copy(i.parent.matrixWorld).invert(),i.matrix.multiply(i.matrixWorld)):i.matrix.copy(i.matrixWorld),i.matrix.decompose(i.position,i.quaternion,i.scale))}}update(){const e=this.bones,t=this.boneInverses,i=this.boneMatrices,r=this.boneTexture;for(let s=0,o=e.length;s<o;s++){const u=e[s]?e[s].matrixWorld:v2;r3.multiplyMatrices(u,t[s]),r3.toArray(i,s*16)}r!==null&&(r.needsUpdate=!0)}clone(){return new eS(this.bones,this.boneInverses)}computeBoneTexture(){let e=Math.sqrt(this.bones.length*4);e=Math.ceil(e/4)*4,e=Math.max(e,4);const t=new Float32Array(e*e*4);t.set(this.boneMatrices);const i=new co(t,e,e,pr,ki);return i.needsUpdate=!0,this.boneMatrices=t,this.boneTexture=i,this}getBoneByName(e){for(let t=0,i=this.bones.length;t<i;t++){const r=this.bones[t];if(r.name===e)return r}}dispose(){this.boneTexture!==null&&(this.boneTexture.dispose(),this.boneTexture=null)}fromJSON(e,t){this.uuid=e.uuid;for(let i=0,r=e.bones.length;i<r;i++){const s=e.bones[i];let o=t[s];o===void 0&&(At("Skeleton: No bone found with UUID:",s),o=new QE),this.bones.push(o),this.boneInverses.push(new un().fromArray(e.boneInverses[i]))}return this.init(),this}toJSON(){const e={metadata:{version:4.7,type:"Skeleton",generator:"Skeleton.toJSON"},bones:[],boneInverses:[]};e.uuid=this.uuid;const t=this.bones,i=this.boneInverses;for(let r=0,s=t.length;r<s;r++){const o=t[r];e.bones.push(o.uuid);const u=i[r];e.boneInverses.push(u.toArray())}return e}}class Vp extends fi{constructor(e,t,i,r=1){super(e,t,i),this.isInstancedBufferAttribute=!0,this.meshPerAttribute=r}copy(e){return super.copy(e),this.meshPerAttribute=e.meshPerAttribute,this}toJSON(){const e=super.toJSON();return e.meshPerAttribute=this.meshPerAttribute,e.isInstancedBufferAttribute=!0,e}}const op=new un,s3=new un,P_=[],a3=new bs,y2=new un,zg=new Xi,Fg=new ss;class nO extends Xi{constructor(e,t,i){super(e,t),this.isInstancedMesh=!0,this.instanceMatrix=new Vp(new Float32Array(i*16),16),this.instanceColor=null,this.morphTexture=null,this.count=i,this.boundingBox=null,this.boundingSphere=null;for(let r=0;r<i;r++)this.setMatrixAt(r,y2)}computeBoundingBox(){const e=this.geometry,t=this.count;this.boundingBox===null&&(this.boundingBox=new bs),e.boundingBox===null&&e.computeBoundingBox(),this.boundingBox.makeEmpty();for(let i=0;i<t;i++)this.getMatrixAt(i,op),a3.copy(e.boundingBox).applyMatrix4(op),this.boundingBox.union(a3)}computeBoundingSphere(){const e=this.geometry,t=this.count;this.boundingSphere===null&&(this.boundingSphere=new ss),e.boundingSphere===null&&e.computeBoundingSphere(),this.boundingSphere.makeEmpty();for(let i=0;i<t;i++)this.getMatrixAt(i,op),Fg.copy(e.boundingSphere).applyMatrix4(op),this.boundingSphere.union(Fg)}copy(e,t){return super.copy(e,t),this.instanceMatrix.copy(e.instanceMatrix),e.morphTexture!==null&&(this.morphTexture=e.morphTexture.clone()),e.instanceColor!==null&&(this.instanceColor=e.instanceColor.clone()),this.count=e.count,e.boundingBox!==null&&(this.boundingBox=e.boundingBox.clone()),e.boundingSphere!==null&&(this.boundingSphere=e.boundingSphere.clone()),this}getColorAt(e,t){t.fromArray(this.instanceColor.array,e*3)}getMatrixAt(e,t){t.fromArray(this.instanceMatrix.array,e*16)}getMorphAt(e,t){const i=t.morphTargetInfluences,r=this.morphTexture.source.data.data,s=i.length+1,o=e*s+1;for(let u=0;u<i.length;u++)i[u]=r[o+u]}raycast(e,t){const i=this.matrixWorld,r=this.count;if(zg.geometry=this.geometry,zg.material=this.material,zg.material!==void 0&&(this.boundingSphere===null&&this.computeBoundingSphere(),Fg.copy(this.boundingSphere),Fg.applyMatrix4(i),e.ray.intersectsSphere(Fg)!==!1))for(let s=0;s<r;s++){this.getMatrixAt(s,op),s3.multiplyMatrices(i,op),zg.matrixWorld=s3,zg.raycast(e,P_);for(let o=0,u=P_.length;o<u;o++){const f=P_[o];f.instanceId=s,f.object=this,t.push(f)}P_.length=0}}setColorAt(e,t){this.instanceColor===null&&(this.instanceColor=new Vp(new Float32Array(this.instanceMatrix.count*3).fill(1),3)),t.toArray(this.instanceColor.array,e*3)}setMatrixAt(e,t){t.toArray(this.instanceMatrix.array,e*16)}setMorphAt(e,t){const i=t.morphTargetInfluences,r=i.length+1;this.morphTexture===null&&(this.morphTexture=new co(new Float32Array(r*this.count),r,this.count,av,ki));const s=this.morphTexture.source.data.data;let o=0;for(let p=0;p<i.length;p++)o+=i[p];const u=this.geometry.morphTargetsRelative?1:1-o,f=r*e;s[f]=u,s.set(i,f+1)}updateMorphTargets(){}dispose(){this.dispatchEvent({type:"dispose"}),this.morphTexture!==null&&(this.morphTexture.dispose(),this.morphTexture=null)}}const aw=new J,_2=new J,x2=new xn;class Uu{constructor(e=new J(1,0,0),t=0){this.isPlane=!0,this.normal=e,this.constant=t}set(e,t){return this.normal.copy(e),this.constant=t,this}setComponents(e,t,i,r){return this.normal.set(e,t,i),this.constant=r,this}setFromNormalAndCoplanarPoint(e,t){return this.normal.copy(e),this.constant=-t.dot(this.normal),this}setFromCoplanarPoints(e,t,i){const r=aw.subVectors(i,t).cross(_2.subVectors(e,t)).normalize();return this.setFromNormalAndCoplanarPoint(r,e),this}copy(e){return this.normal.copy(e.normal),this.constant=e.constant,this}normalize(){const e=1/this.normal.length();return this.normal.multiplyScalar(e),this.constant*=e,this}negate(){return this.constant*=-1,this.normal.negate(),this}distanceToPoint(e){return this.normal.dot(e)+this.constant}distanceToSphere(e){return this.distanceToPoint(e.center)-e.radius}projectPoint(e,t){return t.copy(e).addScaledVector(this.normal,-this.distanceToPoint(e))}intersectLine(e,t){const i=e.delta(aw),r=this.normal.dot(i);if(r===0)return this.distanceToPoint(e.start)===0?t.copy(e.start):null;const s=-(e.start.dot(this.normal)+this.constant)/r;return s<0||s>1?null:t.copy(e.start).addScaledVector(i,s)}intersectsLine(e){const t=this.distanceToPoint(e.start),i=this.distanceToPoint(e.end);return t<0&&i>0||i<0&&t>0}intersectsBox(e){return e.intersectsPlane(this)}intersectsSphere(e){return e.intersectsPlane(this)}coplanarPoint(e){return e.copy(this.normal).multiplyScalar(-this.constant)}applyMatrix4(e,t){const i=t||x2.getNormalMatrix(e),r=this.coplanarPoint(aw).applyMatrix4(e),s=this.normal.applyMatrix3(i).normalize();return this.constant=-r.dot(s),this}translate(e){return this.constant-=e.dot(this.normal),this}equals(e){return e.normal.equals(this.normal)&&e.constant===this.constant}clone(){return new this.constructor().copy(this)}}const qh=new ss,b2=new Ye(.5,.5),O_=new J;class em{constructor(e=new Uu,t=new Uu,i=new Uu,r=new Uu,s=new Uu,o=new Uu){this.planes=[e,t,i,r,s,o]}set(e,t,i,r,s,o){const u=this.planes;return u[0].copy(e),u[1].copy(t),u[2].copy(i),u[3].copy(r),u[4].copy(s),u[5].copy(o),this}copy(e){const t=this.planes;for(let i=0;i<6;i++)t[i].copy(e.planes[i]);return this}setFromProjectionMatrix(e,t=Ma,i=!1){const r=this.planes,s=e.elements,o=s[0],u=s[1],f=s[2],p=s[3],m=s[4],v=s[5],_=s[6],x=s[7],S=s[8],A=s[9],E=s[10],M=s[11],C=s[12],N=s[13],I=s[14],U=s[15];if(r[0].setComponents(p-o,x-m,M-S,U-C).normalize(),r[1].setComponents(p+o,x+m,M+S,U+C).normalize(),r[2].setComponents(p+u,x+v,M+A,U+N).normalize(),r[3].setComponents(p-u,x-v,M-A,U-N).normalize(),i)r[4].setComponents(f,_,E,I).normalize(),r[5].setComponents(p-f,x-_,M-E,U-I).normalize();else if(r[4].setComponents(p-f,x-_,M-E,U-I).normalize(),t===Ma)r[5].setComponents(p+f,x+_,M+E,U+I).normalize();else if(t===Up)r[5].setComponents(f,_,E,I).normalize();else throw new Error("THREE.Frustum.setFromProjectionMatrix(): Invalid coordinate system: "+t);return this}intersectsObject(e){if(e.boundingSphere!==void 0)e.boundingSphere===null&&e.computeBoundingSphere(),qh.copy(e.boundingSphere).applyMatrix4(e.matrixWorld);else{const t=e.geometry;t.boundingSphere===null&&t.computeBoundingSphere(),qh.copy(t.boundingSphere).applyMatrix4(e.matrixWorld)}return this.intersectsSphere(qh)}intersectsSprite(e){qh.center.set(0,0,0);const t=b2.distanceTo(e.center);return qh.radius=.7071067811865476+t,qh.applyMatrix4(e.matrixWorld),this.intersectsSphere(qh)}intersectsSphere(e){const t=this.planes,i=e.center,r=-e.radius;for(let s=0;s<6;s++)if(t[s].distanceToPoint(i)<r)return!1;return!0}intersectsBox(e){const t=this.planes;for(let i=0;i<6;i++){const r=t[i];if(O_.x=r.normal.x>0?e.max.x:e.min.x,O_.y=r.normal.y>0?e.max.y:e.min.y,O_.z=r.normal.z>0?e.max.z:e.min.z,r.distanceToPoint(O_)<0)return!1}return!0}containsPoint(e){const t=this.planes;for(let i=0;i<6;i++)if(t[i].distanceToPoint(e)<0)return!1;return!0}clone(){return new this.constructor().copy(this)}}const Tl=new un,Al=new em;class tS{constructor(){this.coordinateSystem=Ma}intersectsObject(e,t){if(!t.isArrayCamera||t.cameras.length===0)return!1;for(let i=0;i<t.cameras.length;i++){const r=t.cameras[i];if(Tl.multiplyMatrices(r.projectionMatrix,r.matrixWorldInverse),Al.setFromProjectionMatrix(Tl,r.coordinateSystem,r.reversedDepth),Al.intersectsObject(e))return!0}return!1}intersectsSprite(e,t){if(!t||!t.cameras||t.cameras.length===0)return!1;for(let i=0;i<t.cameras.length;i++){const r=t.cameras[i];if(Tl.multiplyMatrices(r.projectionMatrix,r.matrixWorldInverse),Al.setFromProjectionMatrix(Tl,r.coordinateSystem,r.reversedDepth),Al.intersectsSprite(e))return!0}return!1}intersectsSphere(e,t){if(!t||!t.cameras||t.cameras.length===0)return!1;for(let i=0;i<t.cameras.length;i++){const r=t.cameras[i];if(Tl.multiplyMatrices(r.projectionMatrix,r.matrixWorldInverse),Al.setFromProjectionMatrix(Tl,r.coordinateSystem,r.reversedDepth),Al.intersectsSphere(e))return!0}return!1}intersectsBox(e,t){if(!t||!t.cameras||t.cameras.length===0)return!1;for(let i=0;i<t.cameras.length;i++){const r=t.cameras[i];if(Tl.multiplyMatrices(r.projectionMatrix,r.matrixWorldInverse),Al.setFromProjectionMatrix(Tl,r.coordinateSystem,r.reversedDepth),Al.intersectsBox(e))return!0}return!1}containsPoint(e,t){if(!t||!t.cameras||t.cameras.length===0)return!1;for(let i=0;i<t.cameras.length;i++){const r=t.cameras[i];if(Tl.multiplyMatrices(r.projectionMatrix,r.matrixWorldInverse),Al.setFromProjectionMatrix(Tl,r.coordinateSystem,r.reversedDepth),Al.containsPoint(e))return!0}return!1}clone(){return new tS}}function ow(n,e){return n-e}function S2(n,e){return n.z-e.z}function w2(n,e){return e.z-n.z}class M2{constructor(){this.index=0,this.pool=[],this.list=[]}push(e,t,i,r){const s=this.pool,o=this.list;this.index>=s.length&&s.push({start:-1,count:-1,z:-1,index:-1});const u=s[this.index];o.push(u),this.index++,u.start=e,u.count=t,u.z=i,u.index=r}reset(){this.list.length=0,this.index=0}}const ha=new un,E2=new Ot(1,1,1),o3=new em,T2=new tS,L_=new bs,Xh=new ss,Vg=new J,l3=new J,A2=new J,lw=new M2,_s=new Xi,U_=[];function C2(n,e,t=0){const i=e.itemSize;if(n.isInterleavedBufferAttribute||n.array.constructor!==e.array.constructor){const r=n.count;for(let s=0;s<r;s++)for(let o=0;o<i;o++)e.setComponent(s+t,o,n.getComponent(s,o))}else e.array.set(n.array,t*i);e.needsUpdate=!0}function $h(n,e){if(n.constructor!==e.constructor){const t=Math.min(n.length,e.length);for(let i=0;i<t;i++)e[i]=n[i]}else{const t=Math.min(n.length,e.length);e.set(new n.constructor(n.buffer,0,t))}}class iO extends Xi{constructor(e,t,i=t*2,r){super(new vn,r),this.isBatchedMesh=!0,this.perObjectFrustumCulled=!0,this.sortObjects=!0,this.boundingBox=null,this.boundingSphere=null,this.customSort=null,this._instanceInfo=[],this._geometryInfo=[],this._availableInstanceIds=[],this._availableGeometryIds=[],this._nextIndexStart=0,this._nextVertexStart=0,this._geometryCount=0,this._visibilityChanged=!0,this._geometryInitialized=!1,this._maxInstanceCount=e,this._maxVertexCount=t,this._maxIndexCount=i,this._multiDrawCounts=new Int32Array(e),this._multiDrawStarts=new Int32Array(e),this._multiDrawCount=0,this._multiDrawInstances=null,this._matricesTexture=null,this._indirectTexture=null,this._colorsTexture=null,this._initMatricesTexture(),this._initIndirectTexture()}get maxInstanceCount(){return this._maxInstanceCount}get instanceCount(){return this._instanceInfo.length-this._availableInstanceIds.length}get unusedVertexCount(){return this._maxVertexCount-this._nextVertexStart}get unusedIndexCount(){return this._maxIndexCount-this._nextIndexStart}_initMatricesTexture(){let e=Math.sqrt(this._maxInstanceCount*4);e=Math.ceil(e/4)*4,e=Math.max(e,4);const t=new Float32Array(e*e*4),i=new co(t,e,e,pr,ki);this._matricesTexture=i}_initIndirectTexture(){let e=Math.sqrt(this._maxInstanceCount);e=Math.ceil(e);const t=new Uint32Array(e*e),i=new co(t,e,e,ov,Aa);this._indirectTexture=i}_initColorsTexture(){let e=Math.sqrt(this._maxInstanceCount);e=Math.ceil(e);const t=new Float32Array(e*e*4).fill(1),i=new co(t,e,e,pr,ki);i.colorSpace=Hn.workingColorSpace,this._colorsTexture=i}_initializeGeometry(e){const t=this.geometry,i=this._maxVertexCount,r=this._maxIndexCount;if(this._geometryInitialized===!1){for(const s in e.attributes){const o=e.getAttribute(s),{array:u,itemSize:f,normalized:p}=o,m=new u.constructor(i*f),v=new fi(m,f,p);t.setAttribute(s,v)}if(e.getIndex()!==null){const s=i>65535?new Uint32Array(r):new Uint16Array(r);t.setIndex(new fi(s,1))}this._geometryInitialized=!0}}_validateGeometry(e){const t=this.geometry;if(!!e.getIndex()!=!!t.getIndex())throw new Error('THREE.BatchedMesh: All geometries must consistently have "index".');for(const i in t.attributes){if(!e.hasAttribute(i))throw new Error(`THREE.BatchedMesh: Added geometry missing "${i}". All geometries must have consistent attributes.`);const r=e.getAttribute(i),s=t.getAttribute(i);if(r.itemSize!==s.itemSize||r.normalized!==s.normalized)throw new Error("THREE.BatchedMesh: All attributes must have a consistent itemSize and normalized value.")}}validateInstanceId(e){const t=this._instanceInfo;if(e<0||e>=t.length||t[e].active===!1)throw new Error(`THREE.BatchedMesh: Invalid instanceId ${e}. Instance is either out of range or has been deleted.`)}validateGeometryId(e){const t=this._geometryInfo;if(e<0||e>=t.length||t[e].active===!1)throw new Error(`THREE.BatchedMesh: Invalid geometryId ${e}. Geometry is either out of range or has been deleted.`)}setCustomSort(e){return this.customSort=e,this}computeBoundingBox(){this.boundingBox===null&&(this.boundingBox=new bs);const e=this.boundingBox,t=this._instanceInfo;e.makeEmpty();for(let i=0,r=t.length;i<r;i++){if(t[i].active===!1)continue;const s=t[i].geometryIndex;this.getMatrixAt(i,ha),this.getBoundingBoxAt(s,L_).applyMatrix4(ha),e.union(L_)}}computeBoundingSphere(){this.boundingSphere===null&&(this.boundingSphere=new ss);const e=this.boundingSphere,t=this._instanceInfo;e.makeEmpty();for(let i=0,r=t.length;i<r;i++){if(t[i].active===!1)continue;const s=t[i].geometryIndex;this.getMatrixAt(i,ha),this.getBoundingSphereAt(s,Xh).applyMatrix4(ha),e.union(Xh)}}addInstance(e){if(this._instanceInfo.length>=this.maxInstanceCount&&this._availableInstanceIds.length===0)throw new Error("THREE.BatchedMesh: Maximum item count reached.");const i={visible:!0,active:!0,geometryIndex:e};let r=null;this._availableInstanceIds.length>0?(this._availableInstanceIds.sort(ow),r=this._availableInstanceIds.shift(),this._instanceInfo[r]=i):(r=this._instanceInfo.length,this._instanceInfo.push(i));const s=this._matricesTexture;ha.identity().toArray(s.image.data,r*16),s.needsUpdate=!0;const o=this._colorsTexture;return o&&(E2.toArray(o.image.data,r*4),o.needsUpdate=!0),this._visibilityChanged=!0,r}addGeometry(e,t=-1,i=-1){this._initializeGeometry(e),this._validateGeometry(e);const r={vertexStart:-1,vertexCount:-1,reservedVertexCount:-1,indexStart:-1,indexCount:-1,reservedIndexCount:-1,start:-1,count:-1,boundingBox:null,boundingSphere:null,active:!0},s=this._geometryInfo;r.vertexStart=this._nextVertexStart,r.reservedVertexCount=t===-1?e.getAttribute("position").count:t;const o=e.getIndex();if(o!==null&&(r.indexStart=this._nextIndexStart,r.reservedIndexCount=i===-1?o.count:i),r.indexStart!==-1&&r.indexStart+r.reservedIndexCount>this._maxIndexCount||r.vertexStart+r.reservedVertexCount>this._maxVertexCount)throw new Error("THREE.BatchedMesh: Reserved space request exceeds the maximum buffer size.");let f;return this._availableGeometryIds.length>0?(this._availableGeometryIds.sort(ow),f=this._availableGeometryIds.shift(),s[f]=r):(f=this._geometryCount,this._geometryCount++,s.push(r)),this.setGeometryAt(f,e),this._nextIndexStart=r.indexStart+r.reservedIndexCount,this._nextVertexStart=r.vertexStart+r.reservedVertexCount,f}setGeometryAt(e,t){if(e>=this._geometryCount)throw new Error("THREE.BatchedMesh: Maximum geometry count reached.");this._validateGeometry(t);const i=this.geometry,r=i.getIndex()!==null,s=i.getIndex(),o=t.getIndex(),u=this._geometryInfo[e];if(r&&o.count>u.reservedIndexCount||t.attributes.position.count>u.reservedVertexCount)throw new Error("THREE.BatchedMesh: Reserved space not large enough for provided geometry.");const f=u.vertexStart,p=u.reservedVertexCount;u.vertexCount=t.getAttribute("position").count;for(const m in i.attributes){const v=t.getAttribute(m),_=i.getAttribute(m);C2(v,_,f);const x=v.itemSize;for(let S=v.count,A=p;S<A;S++){const E=f+S;for(let M=0;M<x;M++)_.setComponent(E,M,0)}_.needsUpdate=!0,_.addUpdateRange(f*x,p*x)}if(r){const m=u.indexStart,v=u.reservedIndexCount;u.indexCount=t.getIndex().count;for(let _=0;_<o.count;_++)s.setX(m+_,f+o.getX(_));for(let _=o.count,x=v;_<x;_++)s.setX(m+_,f);s.needsUpdate=!0,s.addUpdateRange(m,u.reservedIndexCount)}return u.start=r?u.indexStart:u.vertexStart,u.count=r?u.indexCount:u.vertexCount,u.boundingBox=null,t.boundingBox!==null&&(u.boundingBox=t.boundingBox.clone()),u.boundingSphere=null,t.boundingSphere!==null&&(u.boundingSphere=t.boundingSphere.clone()),this._visibilityChanged=!0,e}deleteGeometry(e){const t=this._geometryInfo;if(e>=t.length||t[e].active===!1)return this;const i=this._instanceInfo;for(let r=0,s=i.length;r<s;r++)i[r].active&&i[r].geometryIndex===e&&this.deleteInstance(r);return t[e].active=!1,this._availableGeometryIds.push(e),this._visibilityChanged=!0,this}deleteInstance(e){return this.validateInstanceId(e),this._instanceInfo[e].active=!1,this._availableInstanceIds.push(e),this._visibilityChanged=!0,this}optimize(){let e=0,t=0;const i=this._geometryInfo,r=i.map((o,u)=>u).sort((o,u)=>i[o].vertexStart-i[u].vertexStart),s=this.geometry;for(let o=0,u=i.length;o<u;o++){const f=r[o],p=i[f];if(p.active!==!1){if(s.index!==null){if(p.indexStart!==t){const{indexStart:m,vertexStart:v,reservedIndexCount:_}=p,x=s.index,S=x.array,A=e-v;for(let E=m;E<m+_;E++)S[E]=S[E]+A;x.array.copyWithin(t,m,m+_),x.addUpdateRange(t,_),x.needsUpdate=!0,p.indexStart=t}t+=p.reservedIndexCount}if(p.vertexStart!==e){const{vertexStart:m,reservedVertexCount:v}=p,_=s.attributes;for(const x in _){const S=_[x],{array:A,itemSize:E}=S;A.copyWithin(e*E,m*E,(m+v)*E),S.addUpdateRange(e*E,v*E),S.needsUpdate=!0}p.vertexStart=e}e+=p.reservedVertexCount,p.start=s.index?p.indexStart:p.vertexStart,this._nextIndexStart=s.index?p.indexStart+p.reservedIndexCount:0,this._nextVertexStart=p.vertexStart+p.reservedVertexCount}}return this._visibilityChanged=!0,this}getBoundingBoxAt(e,t){if(e>=this._geometryCount)return null;const i=this.geometry,r=this._geometryInfo[e];if(r.boundingBox===null){const s=new bs,o=i.index,u=i.attributes.position;for(let f=r.start,p=r.start+r.count;f<p;f++){let m=f;o&&(m=o.getX(m)),s.expandByPoint(Vg.fromBufferAttribute(u,m))}r.boundingBox=s}return t.copy(r.boundingBox),t}getBoundingSphereAt(e,t){if(e>=this._geometryCount)return null;const i=this.geometry,r=this._geometryInfo[e];if(r.boundingSphere===null){const s=new ss;this.getBoundingBoxAt(e,L_),L_.getCenter(s.center);const o=i.index,u=i.attributes.position;let f=0;for(let p=r.start,m=r.start+r.count;p<m;p++){let v=p;o&&(v=o.getX(v)),Vg.fromBufferAttribute(u,v),f=Math.max(f,s.center.distanceToSquared(Vg))}s.radius=Math.sqrt(f),r.boundingSphere=s}return t.copy(r.boundingSphere),t}setMatrixAt(e,t){this.validateInstanceId(e);const i=this._matricesTexture,r=this._matricesTexture.image.data;return t.toArray(r,e*16),i.needsUpdate=!0,this}getMatrixAt(e,t){return this.validateInstanceId(e),t.fromArray(this._matricesTexture.image.data,e*16)}setColorAt(e,t){return this.validateInstanceId(e),this._colorsTexture===null&&this._initColorsTexture(),t.toArray(this._colorsTexture.image.data,e*4),this._colorsTexture.needsUpdate=!0,this}getColorAt(e,t){return this.validateInstanceId(e),t.fromArray(this._colorsTexture.image.data,e*4)}setVisibleAt(e,t){return this.validateInstanceId(e),this._instanceInfo[e].visible===t?this:(this._instanceInfo[e].visible=t,this._visibilityChanged=!0,this)}getVisibleAt(e){return this.validateInstanceId(e),this._instanceInfo[e].visible}setGeometryIdAt(e,t){return this.validateInstanceId(e),this.validateGeometryId(t),this._instanceInfo[e].geometryIndex=t,this}getGeometryIdAt(e){return this.validateInstanceId(e),this._instanceInfo[e].geometryIndex}getGeometryRangeAt(e,t={}){this.validateGeometryId(e);const i=this._geometryInfo[e];return t.vertexStart=i.vertexStart,t.vertexCount=i.vertexCount,t.reservedVertexCount=i.reservedVertexCount,t.indexStart=i.indexStart,t.indexCount=i.indexCount,t.reservedIndexCount=i.reservedIndexCount,t.start=i.start,t.count=i.count,t}setInstanceCount(e){const t=this._availableInstanceIds,i=this._instanceInfo;for(t.sort(ow);t[t.length-1]===i.length-1;)i.pop(),t.pop();if(e<i.length)throw new Error(`BatchedMesh: Instance ids outside the range ${e} are being used. Cannot shrink instance count.`);const r=new Int32Array(e),s=new Int32Array(e);$h(this._multiDrawCounts,r),$h(this._multiDrawStarts,s),this._multiDrawCounts=r,this._multiDrawStarts=s,this._maxInstanceCount=e;const o=this._indirectTexture,u=this._matricesTexture,f=this._colorsTexture;o.dispose(),this._initIndirectTexture(),$h(o.image.data,this._indirectTexture.image.data),u.dispose(),this._initMatricesTexture(),$h(u.image.data,this._matricesTexture.image.data),f&&(f.dispose(),this._initColorsTexture(),$h(f.image.data,this._colorsTexture.image.data))}setGeometrySize(e,t){const i=[...this._geometryInfo].filter(u=>u.active);if(Math.max(...i.map(u=>u.vertexStart+u.reservedVertexCount))>e)throw new Error(`BatchedMesh: Geometry vertex values are being used outside the range ${t}. Cannot shrink further.`);if(this.geometry.index&&Math.max(...i.map(f=>f.indexStart+f.reservedIndexCount))>t)throw new Error(`BatchedMesh: Geometry index values are being used outside the range ${t}. Cannot shrink further.`);const s=this.geometry;s.dispose(),this._maxVertexCount=e,this._maxIndexCount=t,this._geometryInitialized&&(this._geometryInitialized=!1,this.geometry=new vn,this._initializeGeometry(s));const o=this.geometry;s.index&&$h(s.index.array,o.index.array);for(const u in s.attributes)$h(s.attributes[u].array,o.attributes[u].array)}raycast(e,t){const i=this._instanceInfo,r=this._geometryInfo,s=this.matrixWorld,o=this.geometry;_s.material=this.material,_s.geometry.index=o.index,_s.geometry.attributes=o.attributes,_s.geometry.boundingBox===null&&(_s.geometry.boundingBox=new bs),_s.geometry.boundingSphere===null&&(_s.geometry.boundingSphere=new ss);for(let u=0,f=i.length;u<f;u++){if(!i[u].visible||!i[u].active)continue;const p=i[u].geometryIndex,m=r[p];_s.geometry.setDrawRange(m.start,m.count),this.getMatrixAt(u,_s.matrixWorld).premultiply(s),this.getBoundingBoxAt(p,_s.geometry.boundingBox),this.getBoundingSphereAt(p,_s.geometry.boundingSphere),_s.raycast(e,U_);for(let v=0,_=U_.length;v<_;v++){const x=U_[v];x.object=this,x.batchId=u,t.push(x)}U_.length=0}_s.material=null,_s.geometry.index=null,_s.geometry.attributes={},_s.geometry.setDrawRange(0,1/0)}copy(e){return super.copy(e),this.geometry=e.geometry.clone(),this.perObjectFrustumCulled=e.perObjectFrustumCulled,this.sortObjects=e.sortObjects,this.boundingBox=e.boundingBox!==null?e.boundingBox.clone():null,this.boundingSphere=e.boundingSphere!==null?e.boundingSphere.clone():null,this._geometryInfo=e._geometryInfo.map(t=>({...t,boundingBox:t.boundingBox!==null?t.boundingBox.clone():null,boundingSphere:t.boundingSphere!==null?t.boundingSphere.clone():null})),this._instanceInfo=e._instanceInfo.map(t=>({...t})),this._availableInstanceIds=e._availableInstanceIds.slice(),this._availableGeometryIds=e._availableGeometryIds.slice(),this._nextIndexStart=e._nextIndexStart,this._nextVertexStart=e._nextVertexStart,this._geometryCount=e._geometryCount,this._maxInstanceCount=e._maxInstanceCount,this._maxVertexCount=e._maxVertexCount,this._maxIndexCount=e._maxIndexCount,this._geometryInitialized=e._geometryInitialized,this._multiDrawCounts=e._multiDrawCounts.slice(),this._multiDrawStarts=e._multiDrawStarts.slice(),this._indirectTexture=e._indirectTexture.clone(),this._indirectTexture.image.data=this._indirectTexture.image.data.slice(),this._matricesTexture=e._matricesTexture.clone(),this._matricesTexture.image.data=this._matricesTexture.image.data.slice(),this._colorsTexture!==null&&(this._colorsTexture=e._colorsTexture.clone(),this._colorsTexture.image.data=this._colorsTexture.image.data.slice()),this}dispose(){this.geometry.dispose(),this._matricesTexture.dispose(),this._matricesTexture=null,this._indirectTexture.dispose(),this._indirectTexture=null,this._colorsTexture!==null&&(this._colorsTexture.dispose(),this._colorsTexture=null)}onBeforeRender(e,t,i,r,s){if(!this._visibilityChanged&&!this.perObjectFrustumCulled&&!this.sortObjects)return;const o=r.getIndex(),u=o===null?1:o.array.BYTES_PER_ELEMENT,f=this._instanceInfo,p=this._multiDrawStarts,m=this._multiDrawCounts,v=this._geometryInfo,_=this.perObjectFrustumCulled,x=this._indirectTexture,S=x.image.data,A=i.isArrayCamera?T2:o3;_&&!i.isArrayCamera&&(ha.multiplyMatrices(i.projectionMatrix,i.matrixWorldInverse).multiply(this.matrixWorld),o3.setFromProjectionMatrix(ha,i.coordinateSystem,i.reversedDepth));let E=0;if(this.sortObjects){ha.copy(this.matrixWorld).invert(),Vg.setFromMatrixPosition(i.matrixWorld).applyMatrix4(ha),l3.set(0,0,-1).transformDirection(i.matrixWorld).transformDirection(ha);for(let N=0,I=f.length;N<I;N++)if(f[N].visible&&f[N].active){const U=f[N].geometryIndex;this.getMatrixAt(N,ha),this.getBoundingSphereAt(U,Xh).applyMatrix4(ha);let L=!1;if(_&&(L=!A.intersectsSphere(Xh,i)),!L){const F=v[U],H=A2.subVectors(Xh.center,Vg).dot(l3);lw.push(F.start,F.count,H,N)}}const M=lw.list,C=this.customSort;C===null?M.sort(s.transparent?w2:S2):C.call(this,M,i);for(let N=0,I=M.length;N<I;N++){const U=M[N];p[E]=U.start*u,m[E]=U.count,S[E]=U.index,E++}lw.reset()}else for(let M=0,C=f.length;M<C;M++)if(f[M].visible&&f[M].active){const N=f[M].geometryIndex;let I=!1;if(_&&(this.getMatrixAt(M,ha),this.getBoundingSphereAt(N,Xh).applyMatrix4(ha),I=!A.intersectsSphere(Xh,i)),!I){const U=v[N];p[E]=U.start*u,m[E]=U.count,S[E]=M,E++}}x.needsUpdate=!0,this._multiDrawCount=E,this._visibilityChanged=!1}onBeforeShadow(e,t,i,r,s,o){this.onBeforeRender(e,null,r,s,o)}}class Gs extends ws{constructor(e){super(),this.isLineBasicMaterial=!0,this.type="LineBasicMaterial",this.color=new Ot(16777215),this.map=null,this.linewidth=1,this.linecap="round",this.linejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.linewidth=e.linewidth,this.linecap=e.linecap,this.linejoin=e.linejoin,this.fog=e.fog,this}}const gb=new J,vb=new J,c3=new un,Hg=new Qp,k_=new ss,cw=new J,u3=new J;class Yu extends Zn{constructor(e=new vn,t=new Gs){super(),this.isLine=!0,this.type="Line",this.geometry=e,this.material=t,this.morphTargetDictionary=void 0,this.morphTargetInfluences=void 0,this.updateMorphTargets()}copy(e,t){return super.copy(e,t),this.material=Array.isArray(e.material)?e.material.slice():e.material,this.geometry=e.geometry,this}computeLineDistances(){const e=this.geometry;if(e.index===null){const t=e.attributes.position,i=[0];for(let r=1,s=t.count;r<s;r++)gb.fromBufferAttribute(t,r-1),vb.fromBufferAttribute(t,r),i[r]=i[r-1],i[r]+=gb.distanceTo(vb);e.setAttribute("lineDistance",new kt(i,1))}else At("Line.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");return this}raycast(e,t){const i=this.geometry,r=this.matrixWorld,s=e.params.Line.threshold,o=i.drawRange;if(i.boundingSphere===null&&i.computeBoundingSphere(),k_.copy(i.boundingSphere),k_.applyMatrix4(r),k_.radius+=s,e.ray.intersectsSphere(k_)===!1)return;c3.copy(r).invert(),Hg.copy(e.ray).applyMatrix4(c3);const u=s/((this.scale.x+this.scale.y+this.scale.z)/3),f=u*u,p=this.isLineSegments?2:1,m=i.index,_=i.attributes.position;if(m!==null){const x=Math.max(0,o.start),S=Math.min(m.count,o.start+o.count);for(let A=x,E=S-1;A<E;A+=p){const M=m.getX(A),C=m.getX(A+1),N=B_(this,e,Hg,f,M,C,A);N&&t.push(N)}if(this.isLineLoop){const A=m.getX(S-1),E=m.getX(x),M=B_(this,e,Hg,f,A,E,S-1);M&&t.push(M)}}else{const x=Math.max(0,o.start),S=Math.min(_.count,o.start+o.count);for(let A=x,E=S-1;A<E;A+=p){const M=B_(this,e,Hg,f,A,A+1,A);M&&t.push(M)}if(this.isLineLoop){const A=B_(this,e,Hg,f,S-1,x,S-1);A&&t.push(A)}}}updateMorphTargets(){const t=this.geometry.morphAttributes,i=Object.keys(t);if(i.length>0){const r=t[i[0]];if(r!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let s=0,o=r.length;s<o;s++){const u=r[s].name||String(s);this.morphTargetInfluences.push(0),this.morphTargetDictionary[u]=s}}}}}function B_(n,e,t,i,r,s,o){const u=n.geometry.attributes.position;if(gb.fromBufferAttribute(u,r),vb.fromBufferAttribute(u,s),t.distanceSqToSegment(gb,vb,cw,u3)>i)return;cw.applyMatrix4(n.matrixWorld);const p=e.ray.origin.distanceTo(cw);if(!(p<e.near||p>e.far))return{distance:p,point:u3.clone().applyMatrix4(n.matrixWorld),index:o,face:null,faceIndex:null,barycoord:null,object:n}}const h3=new J,f3=new J;class Vl extends Yu{constructor(e,t){super(e,t),this.isLineSegments=!0,this.type="LineSegments"}computeLineDistances(){const e=this.geometry;if(e.index===null){const t=e.attributes.position,i=[];for(let r=0,s=t.count;r<s;r+=2)h3.fromBufferAttribute(t,r),f3.fromBufferAttribute(t,r+1),i[r]=r===0?0:i[r-1],i[r+1]=i[r]+h3.distanceTo(f3);e.setAttribute("lineDistance",new kt(i,1))}else At("LineSegments.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");return this}}class rO extends Yu{constructor(e,t){super(e,t),this.isLineLoop=!0,this.type="LineLoop"}}class eT extends ws{constructor(e){super(),this.isPointsMaterial=!0,this.type="PointsMaterial",this.color=new Ot(16777215),this.map=null,this.alphaMap=null,this.size=1,this.sizeAttenuation=!0,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.alphaMap=e.alphaMap,this.size=e.size,this.sizeAttenuation=e.sizeAttenuation,this.fog=e.fog,this}}const d3=new un,RM=new Qp,z_=new ss,F_=new J;class sO extends Zn{constructor(e=new vn,t=new eT){super(),this.isPoints=!0,this.type="Points",this.geometry=e,this.material=t,this.morphTargetDictionary=void 0,this.morphTargetInfluences=void 0,this.updateMorphTargets()}copy(e,t){return super.copy(e,t),this.material=Array.isArray(e.material)?e.material.slice():e.material,this.geometry=e.geometry,this}raycast(e,t){const i=this.geometry,r=this.matrixWorld,s=e.params.Points.threshold,o=i.drawRange;if(i.boundingSphere===null&&i.computeBoundingSphere(),z_.copy(i.boundingSphere),z_.applyMatrix4(r),z_.radius+=s,e.ray.intersectsSphere(z_)===!1)return;d3.copy(r).invert(),RM.copy(e.ray).applyMatrix4(d3);const u=s/((this.scale.x+this.scale.y+this.scale.z)/3),f=u*u,p=i.index,v=i.attributes.position;if(p!==null){const _=Math.max(0,o.start),x=Math.min(p.count,o.start+o.count);for(let S=_,A=x;S<A;S++){const E=p.getX(S);F_.fromBufferAttribute(v,E),p3(F_,E,f,r,e,t,this)}}else{const _=Math.max(0,o.start),x=Math.min(v.count,o.start+o.count);for(let S=_,A=x;S<A;S++)F_.fromBufferAttribute(v,S),p3(F_,S,f,r,e,t,this)}}updateMorphTargets(){const t=this.geometry.morphAttributes,i=Object.keys(t);if(i.length>0){const r=t[i[0]];if(r!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let s=0,o=r.length;s<o;s++){const u=r[s].name||String(s);this.morphTargetInfluences.push(0),this.morphTargetDictionary[u]=s}}}}}function p3(n,e,t,i,r,s,o){const u=RM.distanceSqToPoint(n);if(u<t){const f=new J;RM.closestPointToPoint(n,f),f.applyMatrix4(i);const p=r.ray.origin.distanceTo(f);if(p<r.near||p>r.far)return;s.push({distance:p,distanceToRay:Math.sqrt(u),point:f,index:e,face:null,faceIndex:null,barycoord:null,object:o})}}class aO extends hi{constructor(e,t,i,r,s=Wn,o=Wn,u,f,p){super(e,t,i,r,s,o,u,f,p),this.isVideoTexture=!0,this.generateMipmaps=!1,this._requestVideoFrameCallbackId=0;const m=this;function v(){m.needsUpdate=!0,m._requestVideoFrameCallbackId=e.requestVideoFrameCallback(v)}"requestVideoFrameCallback"in e&&(this._requestVideoFrameCallbackId=e.requestVideoFrameCallback(v))}clone(){return new this.constructor(this.image).copy(this)}update(){const e=this.image;"requestVideoFrameCallback"in e===!1&&e.readyState>=e.HAVE_CURRENT_DATA&&(this.needsUpdate=!0)}dispose(){this._requestVideoFrameCallbackId!==0&&(this.source.data.cancelVideoFrameCallback(this._requestVideoFrameCallbackId),this._requestVideoFrameCallbackId=0),super.dispose()}}class R2 extends aO{constructor(e,t,i,r,s,o,u,f){super({},e,t,i,r,s,o,u,f),this.isVideoFrameTexture=!0}update(){}clone(){return new this.constructor().copy(this)}setFrame(e){this.image=e,this.needsUpdate=!0}}class N2 extends hi{constructor(e,t){super({width:e,height:t}),this.isFramebufferTexture=!0,this.magFilter=dr,this.minFilter=dr,this.generateMipmaps=!1,this.needsUpdate=!0}}class nS extends hi{constructor(e,t,i,r,s,o,u,f,p,m,v,_){super(null,o,u,f,p,m,r,s,v,_),this.isCompressedTexture=!0,this.image={width:t,height:i},this.mipmaps=e,this.flipY=!1,this.generateMipmaps=!1}}class D2 extends nS{constructor(e,t,i,r,s,o){super(e,t,i,s,o),this.isCompressedArrayTexture=!0,this.image.depth=r,this.wrapR=nr,this.layerUpdates=new Set}addLayerUpdate(e){this.layerUpdates.add(e)}clearLayerUpdates(){this.layerUpdates.clear()}}class I2 extends nS{constructor(e,t,i){super(void 0,e[0].width,e[0].height,t,i,$o),this.isCompressedCubeTexture=!0,this.isCubeTexture=!0,this.image=e}}class P2 extends hi{constructor(e,t,i,r,s,o,u,f,p){super(e,t,i,r,s,o,u,f,p),this.isCanvasTexture=!0,this.needsUpdate=!0}}class Hp extends hi{constructor(e,t,i=Aa,r,s,o,u=dr,f=dr,p,m=Bl,v=1){if(m!==Bl&&m!==Fu)throw new Error("DepthTexture format must be either THREE.DepthFormat or THREE.DepthStencilFormat");const _={width:e,height:t,depth:v};super(_,r,s,o,u,f,m,i,p),this.isDepthTexture=!0,this.flipY=!1,this.generateMipmaps=!1,this.compareFunction=null}copy(e){return super.copy(e),this.source=new Vu(Object.assign({},e.image)),this.compareFunction=e.compareFunction,this}toJSON(e){const t=super.toJSON(e);return this.compareFunction!==null&&(t.compareFunction=this.compareFunction),t}}class oO extends Hp{constructor(e,t=Aa,i=$o,r,s,o=dr,u=dr,f,p=Bl){const m={width:e,height:e,depth:1},v=[m,m,m,m,m,m];super(e,e,t,i,r,s,o,u,f,p),this.image=v,this.isCubeDepthTexture=!0,this.isCubeTexture=!0}get images(){return this.image}set images(e){this.image=e}}class tT extends hi{constructor(e=null){super(),this.sourceTexture=e,this.isExternalTexture=!0}copy(e){return super.copy(e),this.sourceTexture=e.sourceTexture,this}}class iS extends vn{constructor(e=1,t=1,i=4,r=8,s=1){super(),this.type="CapsuleGeometry",this.parameters={radius:e,height:t,capSegments:i,radialSegments:r,heightSegments:s},t=Math.max(0,t),i=Math.max(1,Math.floor(i)),r=Math.max(3,Math.floor(r)),s=Math.max(1,Math.floor(s));const o=[],u=[],f=[],p=[],m=t/2,v=Math.PI/2*e,_=t,x=2*v+_,S=i*2+s,A=r+1,E=new J,M=new J;for(let C=0;C<=S;C++){let N=0,I=0,U=0,L=0;if(C<=i){const P=C/i,k=P*Math.PI/2;I=-m-e*Math.cos(k),U=e*Math.sin(k),L=-e*Math.cos(k),N=P*v}else if(C<=i+s){const P=(C-i)/s;I=-m+P*t,U=e,L=0,N=v+P*_}else{const P=(C-i-s)/i,k=P*Math.PI/2;I=m+e*Math.sin(k),U=e*Math.cos(k),L=e*Math.sin(k),N=v+_+P*v}const F=Math.max(0,Math.min(1,N/x));let H=0;C===0?H=.5/r:C===S&&(H=-.5/r);for(let P=0;P<=r;P++){const k=P/r,Y=k*Math.PI*2,ie=Math.sin(Y),te=Math.cos(Y);M.x=-U*te,M.y=I,M.z=U*ie,u.push(M.x,M.y,M.z),E.set(-U*te,L,U*ie),E.normalize(),f.push(E.x,E.y,E.z),p.push(k+H,F)}if(C>0){const P=(C-1)*A;for(let k=0;k<r;k++){const Y=P+k,ie=P+k+1,te=C*A+k,le=C*A+k+1;o.push(Y,ie,te),o.push(ie,le,te)}}}this.setIndex(o),this.setAttribute("position",new kt(u,3)),this.setAttribute("normal",new kt(f,3)),this.setAttribute("uv",new kt(p,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new iS(e.radius,e.height,e.capSegments,e.radialSegments,e.heightSegments)}}class rS extends vn{constructor(e=1,t=32,i=0,r=Math.PI*2){super(),this.type="CircleGeometry",this.parameters={radius:e,segments:t,thetaStart:i,thetaLength:r},t=Math.max(3,t);const s=[],o=[],u=[],f=[],p=new J,m=new Ye;o.push(0,0,0),u.push(0,0,1),f.push(.5,.5);for(let v=0,_=3;v<=t;v++,_+=3){const x=i+v/t*r;p.x=e*Math.cos(x),p.y=e*Math.sin(x),o.push(p.x,p.y,p.z),u.push(0,0,1),m.x=(o[_]/e+1)/2,m.y=(o[_+1]/e+1)/2,f.push(m.x,m.y)}for(let v=1;v<=t;v++)s.push(v,v+1,0);this.setIndex(s),this.setAttribute("position",new kt(o,3)),this.setAttribute("normal",new kt(u,3)),this.setAttribute("uv",new kt(f,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new rS(e.radius,e.segments,e.thetaStart,e.thetaLength)}}class uv extends vn{constructor(e=1,t=1,i=1,r=32,s=1,o=!1,u=0,f=Math.PI*2){super(),this.type="CylinderGeometry",this.parameters={radiusTop:e,radiusBottom:t,height:i,radialSegments:r,heightSegments:s,openEnded:o,thetaStart:u,thetaLength:f};const p=this;r=Math.floor(r),s=Math.floor(s);const m=[],v=[],_=[],x=[];let S=0;const A=[],E=i/2;let M=0;C(),o===!1&&(e>0&&N(!0),t>0&&N(!1)),this.setIndex(m),this.setAttribute("position",new kt(v,3)),this.setAttribute("normal",new kt(_,3)),this.setAttribute("uv",new kt(x,2));function C(){const I=new J,U=new J;let L=0;const F=(t-e)/i;for(let H=0;H<=s;H++){const P=[],k=H/s,Y=k*(t-e)+e;for(let ie=0;ie<=r;ie++){const te=ie/r,le=te*f+u,de=Math.sin(le),Z=Math.cos(le);U.x=Y*de,U.y=-k*i+E,U.z=Y*Z,v.push(U.x,U.y,U.z),I.set(de,F,Z).normalize(),_.push(I.x,I.y,I.z),x.push(te,1-k),P.push(S++)}A.push(P)}for(let H=0;H<r;H++)for(let P=0;P<s;P++){const k=A[P][H],Y=A[P+1][H],ie=A[P+1][H+1],te=A[P][H+1];(e>0||P!==0)&&(m.push(k,Y,te),L+=3),(t>0||P!==s-1)&&(m.push(Y,ie,te),L+=3)}p.addGroup(M,L,0),M+=L}function N(I){const U=S,L=new Ye,F=new J;let H=0;const P=I===!0?e:t,k=I===!0?1:-1;for(let ie=1;ie<=r;ie++)v.push(0,E*k,0),_.push(0,k,0),x.push(.5,.5),S++;const Y=S;for(let ie=0;ie<=r;ie++){const le=ie/r*f+u,de=Math.cos(le),Z=Math.sin(le);F.x=P*Z,F.y=E*k,F.z=P*de,v.push(F.x,F.y,F.z),_.push(0,k,0),L.x=de*.5+.5,L.y=Z*.5*k+.5,x.push(L.x,L.y),S++}for(let ie=0;ie<r;ie++){const te=U+ie,le=Y+ie;I===!0?m.push(le,le+1,te):m.push(le+1,le,te),H+=3}p.addGroup(M,H,I===!0?1:2),M+=H}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new uv(e.radiusTop,e.radiusBottom,e.height,e.radialSegments,e.heightSegments,e.openEnded,e.thetaStart,e.thetaLength)}}class hv extends uv{constructor(e=1,t=1,i=32,r=1,s=!1,o=0,u=Math.PI*2){super(0,e,t,i,r,s,o,u),this.type="ConeGeometry",this.parameters={radius:e,height:t,radialSegments:i,heightSegments:r,openEnded:s,thetaStart:o,thetaLength:u}}static fromJSON(e){return new hv(e.radius,e.height,e.radialSegments,e.heightSegments,e.openEnded,e.thetaStart,e.thetaLength)}}class Ju extends vn{constructor(e=[],t=[],i=1,r=0){super(),this.type="PolyhedronGeometry",this.parameters={vertices:e,indices:t,radius:i,detail:r};const s=[],o=[];u(r),p(i),m(),this.setAttribute("position",new kt(s,3)),this.setAttribute("normal",new kt(s.slice(),3)),this.setAttribute("uv",new kt(o,2)),r===0?this.computeVertexNormals():this.normalizeNormals();function u(C){const N=new J,I=new J,U=new J;for(let L=0;L<t.length;L+=3)x(t[L+0],N),x(t[L+1],I),x(t[L+2],U),f(N,I,U,C)}function f(C,N,I,U){const L=U+1,F=[];for(let H=0;H<=L;H++){F[H]=[];const P=C.clone().lerp(I,H/L),k=N.clone().lerp(I,H/L),Y=L-H;for(let ie=0;ie<=Y;ie++)ie===0&&H===L?F[H][ie]=P:F[H][ie]=P.clone().lerp(k,ie/Y)}for(let H=0;H<L;H++)for(let P=0;P<2*(L-H)-1;P++){const k=Math.floor(P/2);P%2===0?(_(F[H][k+1]),_(F[H+1][k]),_(F[H][k])):(_(F[H][k+1]),_(F[H+1][k+1]),_(F[H+1][k]))}}function p(C){const N=new J;for(let I=0;I<s.length;I+=3)N.x=s[I+0],N.y=s[I+1],N.z=s[I+2],N.normalize().multiplyScalar(C),s[I+0]=N.x,s[I+1]=N.y,s[I+2]=N.z}function m(){const C=new J;for(let N=0;N<s.length;N+=3){C.x=s[N+0],C.y=s[N+1],C.z=s[N+2];const I=E(C)/2/Math.PI+.5,U=M(C)/Math.PI+.5;o.push(I,1-U)}S(),v()}function v(){for(let C=0;C<o.length;C+=6){const N=o[C+0],I=o[C+2],U=o[C+4],L=Math.max(N,I,U),F=Math.min(N,I,U);L>.9&&F<.1&&(N<.2&&(o[C+0]+=1),I<.2&&(o[C+2]+=1),U<.2&&(o[C+4]+=1))}}function _(C){s.push(C.x,C.y,C.z)}function x(C,N){const I=C*3;N.x=e[I+0],N.y=e[I+1],N.z=e[I+2]}function S(){const C=new J,N=new J,I=new J,U=new J,L=new Ye,F=new Ye,H=new Ye;for(let P=0,k=0;P<s.length;P+=9,k+=6){C.set(s[P+0],s[P+1],s[P+2]),N.set(s[P+3],s[P+4],s[P+5]),I.set(s[P+6],s[P+7],s[P+8]),L.set(o[k+0],o[k+1]),F.set(o[k+2],o[k+3]),H.set(o[k+4],o[k+5]),U.copy(C).add(N).add(I).divideScalar(3);const Y=E(U);A(L,k+0,C,Y),A(F,k+2,N,Y),A(H,k+4,I,Y)}}function A(C,N,I,U){U<0&&C.x===1&&(o[N]=C.x-1),I.x===0&&I.z===0&&(o[N]=U/2/Math.PI+.5)}function E(C){return Math.atan2(C.z,-C.x)}function M(C){return Math.atan2(-C.y,Math.sqrt(C.x*C.x+C.z*C.z))}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new Ju(e.vertices,e.indices,e.radius,e.detail)}}class sS extends Ju{constructor(e=1,t=0){const i=(1+Math.sqrt(5))/2,r=1/i,s=[-1,-1,-1,-1,-1,1,-1,1,-1,-1,1,1,1,-1,-1,1,-1,1,1,1,-1,1,1,1,0,-r,-i,0,-r,i,0,r,-i,0,r,i,-r,-i,0,-r,i,0,r,-i,0,r,i,0,-i,0,-r,i,0,-r,-i,0,r,i,0,r],o=[3,11,7,3,7,15,3,15,13,7,19,17,7,17,6,7,6,15,17,4,8,17,8,10,17,10,6,8,0,16,8,16,2,8,2,10,0,12,1,0,1,18,0,18,16,6,10,2,6,2,13,6,13,15,2,16,18,2,18,3,2,3,13,18,1,9,18,9,11,18,11,3,4,14,12,4,12,0,4,0,8,11,9,5,11,5,19,11,19,7,19,5,14,19,14,4,19,4,17,1,12,14,1,14,5,1,5,9];super(s,o,e,t),this.type="DodecahedronGeometry",this.parameters={radius:e,detail:t}}static fromJSON(e){return new sS(e.radius,e.detail)}}const V_=new J,H_=new J,uw=new J,G_=new da;class lO extends vn{constructor(e=null,t=1){if(super(),this.type="EdgesGeometry",this.parameters={geometry:e,thresholdAngle:t},e!==null){const r=Math.pow(10,4),s=Math.cos(bf*t),o=e.getIndex(),u=e.getAttribute("position"),f=o?o.count:u.count,p=[0,0,0],m=["a","b","c"],v=new Array(3),_={},x=[];for(let S=0;S<f;S+=3){o?(p[0]=o.getX(S),p[1]=o.getX(S+1),p[2]=o.getX(S+2)):(p[0]=S,p[1]=S+1,p[2]=S+2);const{a:A,b:E,c:M}=G_;if(A.fromBufferAttribute(u,p[0]),E.fromBufferAttribute(u,p[1]),M.fromBufferAttribute(u,p[2]),G_.getNormal(uw),v[0]=`${Math.round(A.x*r)},${Math.round(A.y*r)},${Math.round(A.z*r)}`,v[1]=`${Math.round(E.x*r)},${Math.round(E.y*r)},${Math.round(E.z*r)}`,v[2]=`${Math.round(M.x*r)},${Math.round(M.y*r)},${Math.round(M.z*r)}`,!(v[0]===v[1]||v[1]===v[2]||v[2]===v[0]))for(let C=0;C<3;C++){const N=(C+1)%3,I=v[C],U=v[N],L=G_[m[C]],F=G_[m[N]],H=`${I}_${U}`,P=`${U}_${I}`;P in _&&_[P]?(uw.dot(_[P].normal)<=s&&(x.push(L.x,L.y,L.z),x.push(F.x,F.y,F.z)),_[P]=null):H in _||(_[H]={index0:p[C],index1:p[N],normal:uw.clone()})}}for(const S in _)if(_[S]){const{index0:A,index1:E}=_[S];V_.fromBufferAttribute(u,A),H_.fromBufferAttribute(u,E),x.push(V_.x,V_.y,V_.z),x.push(H_.x,H_.y,H_.z)}this.setAttribute("position",new kt(x,3))}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}}class Ko{constructor(){this.type="Curve",this.arcLengthDivisions=200,this.needsUpdate=!1,this.cacheArcLengths=null}getPoint(){At("Curve: .getPoint() not implemented.")}getPointAt(e,t){const i=this.getUtoTmapping(e);return this.getPoint(i,t)}getPoints(e=5){const t=[];for(let i=0;i<=e;i++)t.push(this.getPoint(i/e));return t}getSpacedPoints(e=5){const t=[];for(let i=0;i<=e;i++)t.push(this.getPointAt(i/e));return t}getLength(){const e=this.getLengths();return e[e.length-1]}getLengths(e=this.arcLengthDivisions){if(this.cacheArcLengths&&this.cacheArcLengths.length===e+1&&!this.needsUpdate)return this.cacheArcLengths;this.needsUpdate=!1;const t=[];let i,r=this.getPoint(0),s=0;t.push(0);for(let o=1;o<=e;o++)i=this.getPoint(o/e),s+=i.distanceTo(r),t.push(s),r=i;return this.cacheArcLengths=t,t}updateArcLengths(){this.needsUpdate=!0,this.getLengths()}getUtoTmapping(e,t=null){const i=this.getLengths();let r=0;const s=i.length;let o;t?o=t:o=e*i[s-1];let u=0,f=s-1,p;for(;u<=f;)if(r=Math.floor(u+(f-u)/2),p=i[r]-o,p<0)u=r+1;else if(p>0)f=r-1;else{f=r;break}if(r=f,i[r]===o)return r/(s-1);const m=i[r],_=i[r+1]-m,x=(o-m)/_;return(r+x)/(s-1)}getTangent(e,t){let r=e-1e-4,s=e+1e-4;r<0&&(r=0),s>1&&(s=1);const o=this.getPoint(r),u=this.getPoint(s),f=t||(o.isVector2?new Ye:new J);return f.copy(u).sub(o).normalize(),f}getTangentAt(e,t){const i=this.getUtoTmapping(e);return this.getTangent(i,t)}computeFrenetFrames(e,t=!1){const i=new J,r=[],s=[],o=[],u=new J,f=new un;for(let x=0;x<=e;x++){const S=x/e;r[x]=this.getTangentAt(S,new J)}s[0]=new J,o[0]=new J;let p=Number.MAX_VALUE;const m=Math.abs(r[0].x),v=Math.abs(r[0].y),_=Math.abs(r[0].z);m<=p&&(p=m,i.set(1,0,0)),v<=p&&(p=v,i.set(0,1,0)),_<=p&&i.set(0,0,1),u.crossVectors(r[0],i).normalize(),s[0].crossVectors(r[0],u),o[0].crossVectors(r[0],s[0]);for(let x=1;x<=e;x++){if(s[x]=s[x-1].clone(),o[x]=o[x-1].clone(),u.crossVectors(r[x-1],r[x]),u.length()>Number.EPSILON){u.normalize();const S=Math.acos(ln(r[x-1].dot(r[x]),-1,1));s[x].applyMatrix4(f.makeRotationAxis(u,S))}o[x].crossVectors(r[x],s[x])}if(t===!0){let x=Math.acos(ln(s[0].dot(s[e]),-1,1));x/=e,r[0].dot(u.crossVectors(s[0],s[e]))>0&&(x=-x);for(let S=1;S<=e;S++)s[S].applyMatrix4(f.makeRotationAxis(r[S],x*S)),o[S].crossVectors(r[S],s[S])}return{tangents:r,normals:s,binormals:o}}clone(){return new this.constructor().copy(this)}copy(e){return this.arcLengthDivisions=e.arcLengthDivisions,this}toJSON(){const e={metadata:{version:4.7,type:"Curve",generator:"Curve.toJSON"}};return e.arcLengthDivisions=this.arcLengthDivisions,e.type=this.type,e}fromJSON(e){return this.arcLengthDivisions=e.arcLengthDivisions,this}}class aS extends Ko{constructor(e=0,t=0,i=1,r=1,s=0,o=Math.PI*2,u=!1,f=0){super(),this.isEllipseCurve=!0,this.type="EllipseCurve",this.aX=e,this.aY=t,this.xRadius=i,this.yRadius=r,this.aStartAngle=s,this.aEndAngle=o,this.aClockwise=u,this.aRotation=f}getPoint(e,t=new Ye){const i=t,r=Math.PI*2;let s=this.aEndAngle-this.aStartAngle;const o=Math.abs(s)<Number.EPSILON;for(;s<0;)s+=r;for(;s>r;)s-=r;s<Number.EPSILON&&(o?s=0:s=r),this.aClockwise===!0&&!o&&(s===r?s=-r:s=s-r);const u=this.aStartAngle+e*s;let f=this.aX+this.xRadius*Math.cos(u),p=this.aY+this.yRadius*Math.sin(u);if(this.aRotation!==0){const m=Math.cos(this.aRotation),v=Math.sin(this.aRotation),_=f-this.aX,x=p-this.aY;f=_*m-x*v+this.aX,p=_*v+x*m+this.aY}return i.set(f,p)}copy(e){return super.copy(e),this.aX=e.aX,this.aY=e.aY,this.xRadius=e.xRadius,this.yRadius=e.yRadius,this.aStartAngle=e.aStartAngle,this.aEndAngle=e.aEndAngle,this.aClockwise=e.aClockwise,this.aRotation=e.aRotation,this}toJSON(){const e=super.toJSON();return e.aX=this.aX,e.aY=this.aY,e.xRadius=this.xRadius,e.yRadius=this.yRadius,e.aStartAngle=this.aStartAngle,e.aEndAngle=this.aEndAngle,e.aClockwise=this.aClockwise,e.aRotation=this.aRotation,e}fromJSON(e){return super.fromJSON(e),this.aX=e.aX,this.aY=e.aY,this.xRadius=e.xRadius,this.yRadius=e.yRadius,this.aStartAngle=e.aStartAngle,this.aEndAngle=e.aEndAngle,this.aClockwise=e.aClockwise,this.aRotation=e.aRotation,this}}class cO extends aS{constructor(e,t,i,r,s,o){super(e,t,i,i,r,s,o),this.isArcCurve=!0,this.type="ArcCurve"}}function nT(){let n=0,e=0,t=0,i=0;function r(s,o,u,f){n=s,e=u,t=-3*s+3*o-2*u-f,i=2*s-2*o+u+f}return{initCatmullRom:function(s,o,u,f,p){r(o,u,p*(u-s),p*(f-o))},initNonuniformCatmullRom:function(s,o,u,f,p,m,v){let _=(o-s)/p-(u-s)/(p+m)+(u-o)/m,x=(u-o)/m-(f-o)/(m+v)+(f-u)/v;_*=m,x*=m,r(o,u,_,x)},calc:function(s){const o=s*s,u=o*s;return n+e*s+t*o+i*u}}}const j_=new J,hw=new nT,fw=new nT,dw=new nT;class uO extends Ko{constructor(e=[],t=!1,i="centripetal",r=.5){super(),this.isCatmullRomCurve3=!0,this.type="CatmullRomCurve3",this.points=e,this.closed=t,this.curveType=i,this.tension=r}getPoint(e,t=new J){const i=t,r=this.points,s=r.length,o=(s-(this.closed?0:1))*e;let u=Math.floor(o),f=o-u;this.closed?u+=u>0?0:(Math.floor(Math.abs(u)/s)+1)*s:f===0&&u===s-1&&(u=s-2,f=1);let p,m;this.closed||u>0?p=r[(u-1)%s]:(j_.subVectors(r[0],r[1]).add(r[0]),p=j_);const v=r[u%s],_=r[(u+1)%s];if(this.closed||u+2<s?m=r[(u+2)%s]:(j_.subVectors(r[s-1],r[s-2]).add(r[s-1]),m=j_),this.curveType==="centripetal"||this.curveType==="chordal"){const x=this.curveType==="chordal"?.5:.25;let S=Math.pow(p.distanceToSquared(v),x),A=Math.pow(v.distanceToSquared(_),x),E=Math.pow(_.distanceToSquared(m),x);A<1e-4&&(A=1),S<1e-4&&(S=A),E<1e-4&&(E=A),hw.initNonuniformCatmullRom(p.x,v.x,_.x,m.x,S,A,E),fw.initNonuniformCatmullRom(p.y,v.y,_.y,m.y,S,A,E),dw.initNonuniformCatmullRom(p.z,v.z,_.z,m.z,S,A,E)}else this.curveType==="catmullrom"&&(hw.initCatmullRom(p.x,v.x,_.x,m.x,this.tension),fw.initCatmullRom(p.y,v.y,_.y,m.y,this.tension),dw.initCatmullRom(p.z,v.z,_.z,m.z,this.tension));return i.set(hw.calc(f),fw.calc(f),dw.calc(f)),i}copy(e){super.copy(e),this.points=[];for(let t=0,i=e.points.length;t<i;t++){const r=e.points[t];this.points.push(r.clone())}return this.closed=e.closed,this.curveType=e.curveType,this.tension=e.tension,this}toJSON(){const e=super.toJSON();e.points=[];for(let t=0,i=this.points.length;t<i;t++){const r=this.points[t];e.points.push(r.toArray())}return e.closed=this.closed,e.curveType=this.curveType,e.tension=this.tension,e}fromJSON(e){super.fromJSON(e),this.points=[];for(let t=0,i=e.points.length;t<i;t++){const r=e.points[t];this.points.push(new J().fromArray(r))}return this.closed=e.closed,this.curveType=e.curveType,this.tension=e.tension,this}}function m3(n,e,t,i,r){const s=(i-e)*.5,o=(r-t)*.5,u=n*n,f=n*u;return(2*t-2*i+s+o)*f+(-3*t+3*i-2*s-o)*u+s*n+t}function O2(n,e){const t=1-n;return t*t*e}function L2(n,e){return 2*(1-n)*n*e}function U2(n,e){return n*n*e}function d0(n,e,t,i){return O2(n,e)+L2(n,t)+U2(n,i)}function k2(n,e){const t=1-n;return t*t*t*e}function B2(n,e){const t=1-n;return 3*t*t*n*e}function z2(n,e){return 3*(1-n)*n*n*e}function F2(n,e){return n*n*n*e}function p0(n,e,t,i,r){return k2(n,e)+B2(n,t)+z2(n,i)+F2(n,r)}class iT extends Ko{constructor(e=new Ye,t=new Ye,i=new Ye,r=new Ye){super(),this.isCubicBezierCurve=!0,this.type="CubicBezierCurve",this.v0=e,this.v1=t,this.v2=i,this.v3=r}getPoint(e,t=new Ye){const i=t,r=this.v0,s=this.v1,o=this.v2,u=this.v3;return i.set(p0(e,r.x,s.x,o.x,u.x),p0(e,r.y,s.y,o.y,u.y)),i}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this.v3.copy(e.v3),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e.v3=this.v3.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this.v3.fromArray(e.v3),this}}class hO extends Ko{constructor(e=new J,t=new J,i=new J,r=new J){super(),this.isCubicBezierCurve3=!0,this.type="CubicBezierCurve3",this.v0=e,this.v1=t,this.v2=i,this.v3=r}getPoint(e,t=new J){const i=t,r=this.v0,s=this.v1,o=this.v2,u=this.v3;return i.set(p0(e,r.x,s.x,o.x,u.x),p0(e,r.y,s.y,o.y,u.y),p0(e,r.z,s.z,o.z,u.z)),i}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this.v3.copy(e.v3),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e.v3=this.v3.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this.v3.fromArray(e.v3),this}}class rT extends Ko{constructor(e=new Ye,t=new Ye){super(),this.isLineCurve=!0,this.type="LineCurve",this.v1=e,this.v2=t}getPoint(e,t=new Ye){const i=t;return e===1?i.copy(this.v2):(i.copy(this.v2).sub(this.v1),i.multiplyScalar(e).add(this.v1)),i}getPointAt(e,t){return this.getPoint(e,t)}getTangent(e,t=new Ye){return t.subVectors(this.v2,this.v1).normalize()}getTangentAt(e,t){return this.getTangent(e,t)}copy(e){return super.copy(e),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class fO extends Ko{constructor(e=new J,t=new J){super(),this.isLineCurve3=!0,this.type="LineCurve3",this.v1=e,this.v2=t}getPoint(e,t=new J){const i=t;return e===1?i.copy(this.v2):(i.copy(this.v2).sub(this.v1),i.multiplyScalar(e).add(this.v1)),i}getPointAt(e,t){return this.getPoint(e,t)}getTangent(e,t=new J){return t.subVectors(this.v2,this.v1).normalize()}getTangentAt(e,t){return this.getTangent(e,t)}copy(e){return super.copy(e),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class sT extends Ko{constructor(e=new Ye,t=new Ye,i=new Ye){super(),this.isQuadraticBezierCurve=!0,this.type="QuadraticBezierCurve",this.v0=e,this.v1=t,this.v2=i}getPoint(e,t=new Ye){const i=t,r=this.v0,s=this.v1,o=this.v2;return i.set(d0(e,r.x,s.x,o.x),d0(e,r.y,s.y,o.y)),i}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class aT extends Ko{constructor(e=new J,t=new J,i=new J){super(),this.isQuadraticBezierCurve3=!0,this.type="QuadraticBezierCurve3",this.v0=e,this.v1=t,this.v2=i}getPoint(e,t=new J){const i=t,r=this.v0,s=this.v1,o=this.v2;return i.set(d0(e,r.x,s.x,o.x),d0(e,r.y,s.y,o.y),d0(e,r.z,s.z,o.z)),i}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class oT extends Ko{constructor(e=[]){super(),this.isSplineCurve=!0,this.type="SplineCurve",this.points=e}getPoint(e,t=new Ye){const i=t,r=this.points,s=(r.length-1)*e,o=Math.floor(s),u=s-o,f=r[o===0?o:o-1],p=r[o],m=r[o>r.length-2?r.length-1:o+1],v=r[o>r.length-3?r.length-1:o+2];return i.set(m3(u,f.x,p.x,m.x,v.x),m3(u,f.y,p.y,m.y,v.y)),i}copy(e){super.copy(e),this.points=[];for(let t=0,i=e.points.length;t<i;t++){const r=e.points[t];this.points.push(r.clone())}return this}toJSON(){const e=super.toJSON();e.points=[];for(let t=0,i=this.points.length;t<i;t++){const r=this.points[t];e.points.push(r.toArray())}return e}fromJSON(e){super.fromJSON(e),this.points=[];for(let t=0,i=e.points.length;t<i;t++){const r=e.points[t];this.points.push(new Ye().fromArray(r))}return this}}var yb=Object.freeze({__proto__:null,ArcCurve:cO,CatmullRomCurve3:uO,CubicBezierCurve:iT,CubicBezierCurve3:hO,EllipseCurve:aS,LineCurve:rT,LineCurve3:fO,QuadraticBezierCurve:sT,QuadraticBezierCurve3:aT,SplineCurve:oT});class dO extends Ko{constructor(){super(),this.type="CurvePath",this.curves=[],this.autoClose=!1}add(e){this.curves.push(e)}closePath(){const e=this.curves[0].getPoint(0),t=this.curves[this.curves.length-1].getPoint(1);if(!e.equals(t)){const i=e.isVector2===!0?"LineCurve":"LineCurve3";this.curves.push(new yb[i](t,e))}return this}getPoint(e,t){const i=e*this.getLength(),r=this.getCurveLengths();let s=0;for(;s<r.length;){if(r[s]>=i){const o=r[s]-i,u=this.curves[s],f=u.getLength(),p=f===0?0:1-o/f;return u.getPointAt(p,t)}s++}return null}getLength(){const e=this.getCurveLengths();return e[e.length-1]}updateArcLengths(){this.needsUpdate=!0,this.cacheLengths=null,this.getCurveLengths()}getCurveLengths(){if(this.cacheLengths&&this.cacheLengths.length===this.curves.length)return this.cacheLengths;const e=[];let t=0;for(let i=0,r=this.curves.length;i<r;i++)t+=this.curves[i].getLength(),e.push(t);return this.cacheLengths=e,e}getSpacedPoints(e=40){const t=[];for(let i=0;i<=e;i++)t.push(this.getPoint(i/e));return this.autoClose&&t.push(t[0]),t}getPoints(e=12){const t=[];let i;for(let r=0,s=this.curves;r<s.length;r++){const o=s[r],u=o.isEllipseCurve?e*2:o.isLineCurve||o.isLineCurve3?1:o.isSplineCurve?e*o.points.length:e,f=o.getPoints(u);for(let p=0;p<f.length;p++){const m=f[p];i&&i.equals(m)||(t.push(m),i=m)}}return this.autoClose&&t.length>1&&!t[t.length-1].equals(t[0])&&t.push(t[0]),t}copy(e){super.copy(e),this.curves=[];for(let t=0,i=e.curves.length;t<i;t++){const r=e.curves[t];this.curves.push(r.clone())}return this.autoClose=e.autoClose,this}toJSON(){const e=super.toJSON();e.autoClose=this.autoClose,e.curves=[];for(let t=0,i=this.curves.length;t<i;t++){const r=this.curves[t];e.curves.push(r.toJSON())}return e}fromJSON(e){super.fromJSON(e),this.autoClose=e.autoClose,this.curves=[];for(let t=0,i=e.curves.length;t<i;t++){const r=e.curves[t];this.curves.push(new yb[r.type]().fromJSON(r))}return this}}class _b extends dO{constructor(e){super(),this.type="Path",this.currentPoint=new Ye,e&&this.setFromPoints(e)}setFromPoints(e){this.moveTo(e[0].x,e[0].y);for(let t=1,i=e.length;t<i;t++)this.lineTo(e[t].x,e[t].y);return this}moveTo(e,t){return this.currentPoint.set(e,t),this}lineTo(e,t){const i=new rT(this.currentPoint.clone(),new Ye(e,t));return this.curves.push(i),this.currentPoint.set(e,t),this}quadraticCurveTo(e,t,i,r){const s=new sT(this.currentPoint.clone(),new Ye(e,t),new Ye(i,r));return this.curves.push(s),this.currentPoint.set(i,r),this}bezierCurveTo(e,t,i,r,s,o){const u=new iT(this.currentPoint.clone(),new Ye(e,t),new Ye(i,r),new Ye(s,o));return this.curves.push(u),this.currentPoint.set(s,o),this}splineThru(e){const t=[this.currentPoint.clone()].concat(e),i=new oT(t);return this.curves.push(i),this.currentPoint.copy(e[e.length-1]),this}arc(e,t,i,r,s,o){const u=this.currentPoint.x,f=this.currentPoint.y;return this.absarc(e+u,t+f,i,r,s,o),this}absarc(e,t,i,r,s,o){return this.absellipse(e,t,i,i,r,s,o),this}ellipse(e,t,i,r,s,o,u,f){const p=this.currentPoint.x,m=this.currentPoint.y;return this.absellipse(e+p,t+m,i,r,s,o,u,f),this}absellipse(e,t,i,r,s,o,u,f){const p=new aS(e,t,i,r,s,o,u,f);if(this.curves.length>0){const v=p.getPoint(0);v.equals(this.currentPoint)||this.lineTo(v.x,v.y)}this.curves.push(p);const m=p.getPoint(1);return this.currentPoint.copy(m),this}copy(e){return super.copy(e),this.currentPoint.copy(e.currentPoint),this}toJSON(){const e=super.toJSON();return e.currentPoint=this.currentPoint.toArray(),e}fromJSON(e){return super.fromJSON(e),this.currentPoint.fromArray(e.currentPoint),this}}class Sf extends _b{constructor(e){super(e),this.uuid=Ea(),this.type="Shape",this.holes=[]}getPointsHoles(e){const t=[];for(let i=0,r=this.holes.length;i<r;i++)t[i]=this.holes[i].getPoints(e);return t}extractPoints(e){return{shape:this.getPoints(e),holes:this.getPointsHoles(e)}}copy(e){super.copy(e),this.holes=[];for(let t=0,i=e.holes.length;t<i;t++){const r=e.holes[t];this.holes.push(r.clone())}return this}toJSON(){const e=super.toJSON();e.uuid=this.uuid,e.holes=[];for(let t=0,i=this.holes.length;t<i;t++){const r=this.holes[t];e.holes.push(r.toJSON())}return e}fromJSON(e){super.fromJSON(e),this.uuid=e.uuid,this.holes=[];for(let t=0,i=e.holes.length;t<i;t++){const r=e.holes[t];this.holes.push(new _b().fromJSON(r))}return this}}function V2(n,e,t=2){const i=e&&e.length,r=i?e[0]*t:n.length;let s=pO(n,0,r,t,!0);const o=[];if(!s||s.next===s.prev)return o;let u,f,p;if(i&&(s=q2(n,e,s,t)),n.length>80*t){u=n[0],f=n[1];let m=u,v=f;for(let _=t;_<r;_+=t){const x=n[_],S=n[_+1];x<u&&(u=x),S<f&&(f=S),x>m&&(m=x),S>v&&(v=S)}p=Math.max(m-u,v-f),p=p!==0?32767/p:0}return z0(s,o,t,u,f,p,0),o}function pO(n,e,t,i,r){let s;if(r===ij(n,e,t,i)>0)for(let o=e;o<t;o+=i)s=g3(o/i|0,n[o],n[o+1],s);else for(let o=t-i;o>=e;o-=i)s=g3(o/i|0,n[o],n[o+1],s);return s&&Gp(s,s.next)&&(V0(s),s=s.next),s}function Tf(n,e){if(!n)return n;e||(e=n);let t=n,i;do if(i=!1,!t.steiner&&(Gp(t,t.next)||Wi(t.prev,t,t.next)===0)){if(V0(t),t=e=t.prev,t===t.next)break;i=!0}else t=t.next;while(i||t!==e);return e}function z0(n,e,t,i,r,s,o){if(!n)return;!o&&s&&K2(n,i,r,s);let u=n;for(;n.prev!==n.next;){const f=n.prev,p=n.next;if(s?G2(n,i,r,s):H2(n)){e.push(f.i,n.i,p.i),V0(n),n=p.next,u=p.next;continue}if(n=p,n===u){o?o===1?(n=j2(Tf(n),e),z0(n,e,t,i,r,s,2)):o===2&&W2(n,e,t,i,r,s):z0(Tf(n),e,t,i,r,s,1);break}}}function H2(n){const e=n.prev,t=n,i=n.next;if(Wi(e,t,i)>=0)return!1;const r=e.x,s=t.x,o=i.x,u=e.y,f=t.y,p=i.y,m=Math.min(r,s,o),v=Math.min(u,f,p),_=Math.max(r,s,o),x=Math.max(u,f,p);let S=i.next;for(;S!==e;){if(S.x>=m&&S.x<=_&&S.y>=v&&S.y<=x&&Jg(r,u,s,f,o,p,S.x,S.y)&&Wi(S.prev,S,S.next)>=0)return!1;S=S.next}return!0}function G2(n,e,t,i){const r=n.prev,s=n,o=n.next;if(Wi(r,s,o)>=0)return!1;const u=r.x,f=s.x,p=o.x,m=r.y,v=s.y,_=o.y,x=Math.min(u,f,p),S=Math.min(m,v,_),A=Math.max(u,f,p),E=Math.max(m,v,_),M=NM(x,S,e,t,i),C=NM(A,E,e,t,i);let N=n.prevZ,I=n.nextZ;for(;N&&N.z>=M&&I&&I.z<=C;){if(N.x>=x&&N.x<=A&&N.y>=S&&N.y<=E&&N!==r&&N!==o&&Jg(u,m,f,v,p,_,N.x,N.y)&&Wi(N.prev,N,N.next)>=0||(N=N.prevZ,I.x>=x&&I.x<=A&&I.y>=S&&I.y<=E&&I!==r&&I!==o&&Jg(u,m,f,v,p,_,I.x,I.y)&&Wi(I.prev,I,I.next)>=0))return!1;I=I.nextZ}for(;N&&N.z>=M;){if(N.x>=x&&N.x<=A&&N.y>=S&&N.y<=E&&N!==r&&N!==o&&Jg(u,m,f,v,p,_,N.x,N.y)&&Wi(N.prev,N,N.next)>=0)return!1;N=N.prevZ}for(;I&&I.z<=C;){if(I.x>=x&&I.x<=A&&I.y>=S&&I.y<=E&&I!==r&&I!==o&&Jg(u,m,f,v,p,_,I.x,I.y)&&Wi(I.prev,I,I.next)>=0)return!1;I=I.nextZ}return!0}function j2(n,e){let t=n;do{const i=t.prev,r=t.next.next;!Gp(i,r)&&gO(i,t,t.next,r)&&F0(i,r)&&F0(r,i)&&(e.push(i.i,t.i,r.i),V0(t),V0(t.next),t=n=r),t=t.next}while(t!==n);return Tf(t)}function W2(n,e,t,i,r,s){let o=n;do{let u=o.next.next;for(;u!==o.prev;){if(o.i!==u.i&&ej(o,u)){let f=vO(o,u);o=Tf(o,o.next),f=Tf(f,f.next),z0(o,e,t,i,r,s,0),z0(f,e,t,i,r,s,0);return}u=u.next}o=o.next}while(o!==n)}function q2(n,e,t,i){const r=[];for(let s=0,o=e.length;s<o;s++){const u=e[s]*i,f=s<o-1?e[s+1]*i:n.length,p=pO(n,u,f,i,!1);p===p.next&&(p.steiner=!0),r.push(Q2(p))}r.sort(X2);for(let s=0;s<r.length;s++)t=$2(r[s],t);return t}function X2(n,e){let t=n.x-e.x;if(t===0&&(t=n.y-e.y,t===0)){const i=(n.next.y-n.y)/(n.next.x-n.x),r=(e.next.y-e.y)/(e.next.x-e.x);t=i-r}return t}function $2(n,e){const t=Y2(n,e);if(!t)return e;const i=vO(t,n);return Tf(i,i.next),Tf(t,t.next)}function Y2(n,e){let t=e;const i=n.x,r=n.y;let s=-1/0,o;if(Gp(n,t))return t;do{if(Gp(n,t.next))return t.next;if(r<=t.y&&r>=t.next.y&&t.next.y!==t.y){const v=t.x+(r-t.y)*(t.next.x-t.x)/(t.next.y-t.y);if(v<=i&&v>s&&(s=v,o=t.x<t.next.x?t:t.next,v===i))return o}t=t.next}while(t!==e);if(!o)return null;const u=o,f=o.x,p=o.y;let m=1/0;t=o;do{if(i>=t.x&&t.x>=f&&i!==t.x&&mO(r<p?i:s,r,f,p,r<p?s:i,r,t.x,t.y)){const v=Math.abs(r-t.y)/(i-t.x);F0(t,n)&&(v<m||v===m&&(t.x>o.x||t.x===o.x&&Z2(o,t)))&&(o=t,m=v)}t=t.next}while(t!==u);return o}function Z2(n,e){return Wi(n.prev,n,e.prev)<0&&Wi(e.next,n,n.next)<0}function K2(n,e,t,i){let r=n;do r.z===0&&(r.z=NM(r.x,r.y,e,t,i)),r.prevZ=r.prev,r.nextZ=r.next,r=r.next;while(r!==n);r.prevZ.nextZ=null,r.prevZ=null,J2(r)}function J2(n){let e,t=1;do{let i=n,r;n=null;let s=null;for(e=0;i;){e++;let o=i,u=0;for(let p=0;p<t&&(u++,o=o.nextZ,!!o);p++);let f=t;for(;u>0||f>0&&o;)u!==0&&(f===0||!o||i.z<=o.z)?(r=i,i=i.nextZ,u--):(r=o,o=o.nextZ,f--),s?s.nextZ=r:n=r,r.prevZ=s,s=r;i=o}s.nextZ=null,t*=2}while(e>1);return n}function NM(n,e,t,i,r){return n=(n-t)*r|0,e=(e-i)*r|0,n=(n|n<<8)&16711935,n=(n|n<<4)&252645135,n=(n|n<<2)&858993459,n=(n|n<<1)&1431655765,e=(e|e<<8)&16711935,e=(e|e<<4)&252645135,e=(e|e<<2)&858993459,e=(e|e<<1)&1431655765,n|e<<1}function Q2(n){let e=n,t=n;do(e.x<t.x||e.x===t.x&&e.y<t.y)&&(t=e),e=e.next;while(e!==n);return t}function mO(n,e,t,i,r,s,o,u){return(r-o)*(e-u)>=(n-o)*(s-u)&&(n-o)*(i-u)>=(t-o)*(e-u)&&(t-o)*(s-u)>=(r-o)*(i-u)}function Jg(n,e,t,i,r,s,o,u){return!(n===o&&e===u)&&mO(n,e,t,i,r,s,o,u)}function ej(n,e){return n.next.i!==e.i&&n.prev.i!==e.i&&!tj(n,e)&&(F0(n,e)&&F0(e,n)&&nj(n,e)&&(Wi(n.prev,n,e.prev)||Wi(n,e.prev,e))||Gp(n,e)&&Wi(n.prev,n,n.next)>0&&Wi(e.prev,e,e.next)>0)}function Wi(n,e,t){return(e.y-n.y)*(t.x-e.x)-(e.x-n.x)*(t.y-e.y)}function Gp(n,e){return n.x===e.x&&n.y===e.y}function gO(n,e,t,i){const r=q_(Wi(n,e,t)),s=q_(Wi(n,e,i)),o=q_(Wi(t,i,n)),u=q_(Wi(t,i,e));return!!(r!==s&&o!==u||r===0&&W_(n,t,e)||s===0&&W_(n,i,e)||o===0&&W_(t,n,i)||u===0&&W_(t,e,i))}function W_(n,e,t){return e.x<=Math.max(n.x,t.x)&&e.x>=Math.min(n.x,t.x)&&e.y<=Math.max(n.y,t.y)&&e.y>=Math.min(n.y,t.y)}function q_(n){return n>0?1:n<0?-1:0}function tj(n,e){let t=n;do{if(t.i!==n.i&&t.next.i!==n.i&&t.i!==e.i&&t.next.i!==e.i&&gO(t,t.next,n,e))return!0;t=t.next}while(t!==n);return!1}function F0(n,e){return Wi(n.prev,n,n.next)<0?Wi(n,e,n.next)>=0&&Wi(n,n.prev,e)>=0:Wi(n,e,n.prev)<0||Wi(n,n.next,e)<0}function nj(n,e){let t=n,i=!1;const r=(n.x+e.x)/2,s=(n.y+e.y)/2;do t.y>s!=t.next.y>s&&t.next.y!==t.y&&r<(t.next.x-t.x)*(s-t.y)/(t.next.y-t.y)+t.x&&(i=!i),t=t.next;while(t!==n);return i}function vO(n,e){const t=DM(n.i,n.x,n.y),i=DM(e.i,e.x,e.y),r=n.next,s=e.prev;return n.next=e,e.prev=n,t.next=r,r.prev=t,i.next=t,t.prev=i,s.next=i,i.prev=s,i}function g3(n,e,t,i){const r=DM(n,e,t);return i?(r.next=i.next,r.prev=i,i.next.prev=r,i.next=r):(r.prev=r,r.next=r),r}function V0(n){n.next.prev=n.prev,n.prev.next=n.next,n.prevZ&&(n.prevZ.nextZ=n.nextZ),n.nextZ&&(n.nextZ.prevZ=n.prevZ)}function DM(n,e,t){return{i:n,x:e,y:t,prev:null,next:null,z:0,prevZ:null,nextZ:null,steiner:!1}}function ij(n,e,t,i){let r=0;for(let s=e,o=t-i;s<t;s+=i)r+=(n[o]-n[s])*(n[s+1]+n[o+1]),o=s;return r}class rj{static triangulate(e,t,i=2){return V2(e,t,i)}}class qo{static area(e){const t=e.length;let i=0;for(let r=t-1,s=0;s<t;r=s++)i+=e[r].x*e[s].y-e[s].x*e[r].y;return i*.5}static isClockWise(e){return qo.area(e)<0}static triangulateShape(e,t){const i=[],r=[],s=[];v3(e),y3(i,e);let o=e.length;t.forEach(v3);for(let f=0;f<t.length;f++)r.push(o),o+=t[f].length,y3(i,t[f]);const u=rj.triangulate(i,r);for(let f=0;f<u.length;f+=3)s.push(u.slice(f,f+3));return s}}function v3(n){const e=n.length;e>2&&n[e-1].equals(n[0])&&n.pop()}function y3(n,e){for(let t=0;t<e.length;t++)n.push(e[t].x),n.push(e[t].y)}class oS extends vn{constructor(e=new Sf([new Ye(.5,.5),new Ye(-.5,.5),new Ye(-.5,-.5),new Ye(.5,-.5)]),t={}){super(),this.type="ExtrudeGeometry",this.parameters={shapes:e,options:t},e=Array.isArray(e)?e:[e];const i=this,r=[],s=[];for(let u=0,f=e.length;u<f;u++){const p=e[u];o(p)}this.setAttribute("position",new kt(r,3)),this.setAttribute("uv",new kt(s,2)),this.computeVertexNormals();function o(u){const f=[],p=t.curveSegments!==void 0?t.curveSegments:12,m=t.steps!==void 0?t.steps:1,v=t.depth!==void 0?t.depth:1;let _=t.bevelEnabled!==void 0?t.bevelEnabled:!0,x=t.bevelThickness!==void 0?t.bevelThickness:.2,S=t.bevelSize!==void 0?t.bevelSize:x-.1,A=t.bevelOffset!==void 0?t.bevelOffset:0,E=t.bevelSegments!==void 0?t.bevelSegments:3;const M=t.extrudePath,C=t.UVGenerator!==void 0?t.UVGenerator:sj;let N,I=!1,U,L,F,H;if(M){N=M.getSpacedPoints(m),I=!0,_=!1;const ze=M.isCatmullRomCurve3?M.closed:!1;U=M.computeFrenetFrames(m,ze),L=new J,F=new J,H=new J}_||(E=0,x=0,S=0,A=0);const P=u.extractPoints(p);let k=P.shape;const Y=P.holes;if(!qo.isClockWise(k)){k=k.reverse();for(let ze=0,Je=Y.length;ze<Je;ze++){const He=Y[ze];qo.isClockWise(He)&&(Y[ze]=He.reverse())}}function te(ze){const He=10000000000000001e-36;let yt=ze[0];for(let ee=1;ee<=ze.length;ee++){const Ft=ee%ze.length,St=ze[Ft],Vt=St.x-yt.x,ot=St.y-yt.y,$=Vt*Vt+ot*ot,B=Math.max(Math.abs(St.x),Math.abs(St.y),Math.abs(yt.x),Math.abs(yt.y)),fe=He*B*B;if($<=fe){ze.splice(Ft,1),ee--;continue}yt=St}}te(k),Y.forEach(te);const le=Y.length,de=k;for(let ze=0;ze<le;ze++){const Je=Y[ze];k=k.concat(Je)}function Z(ze,Je,He){return Je||Xt("ExtrudeGeometry: vec does not exist"),ze.clone().addScaledVector(Je,He)}const Q=k.length;function ve(ze,Je,He){let yt,ee,Ft;const St=ze.x-Je.x,Vt=ze.y-Je.y,ot=He.x-ze.x,$=He.y-ze.y,B=St*St+Vt*Vt,fe=St*$-Vt*ot;if(Math.abs(fe)>Number.EPSILON){const Ie=Math.sqrt(B),Ge=Math.sqrt(ot*ot+$*$),De=Je.x-Vt/Ie,Tt=Je.y+St/Ie,ht=He.x-$/Ge,Lt=He.y+ot/Ge,Yt=((ht-De)*$-(Lt-Tt)*ot)/(St*$-Vt*ot);yt=De+St*Yt-ze.x,ee=Tt+Vt*Yt-ze.y;const Xe=yt*yt+ee*ee;if(Xe<=2)return new Ye(yt,ee);Ft=Math.sqrt(Xe/2)}else{let Ie=!1;St>Number.EPSILON?ot>Number.EPSILON&&(Ie=!0):St<-Number.EPSILON?ot<-Number.EPSILON&&(Ie=!0):Math.sign(Vt)===Math.sign($)&&(Ie=!0),Ie?(yt=-Vt,ee=St,Ft=Math.sqrt(B)):(yt=St,ee=Vt,Ft=Math.sqrt(B/2))}return new Ye(yt/Ft,ee/Ft)}const Te=[];for(let ze=0,Je=de.length,He=Je-1,yt=ze+1;ze<Je;ze++,He++,yt++)He===Je&&(He=0),yt===Je&&(yt=0),Te[ze]=ve(de[ze],de[He],de[yt]);const we=[];let X,ce=Te.concat();for(let ze=0,Je=le;ze<Je;ze++){const He=Y[ze];X=[];for(let yt=0,ee=He.length,Ft=ee-1,St=yt+1;yt<ee;yt++,Ft++,St++)Ft===ee&&(Ft=0),St===ee&&(St=0),X[yt]=ve(He[yt],He[Ft],He[St]);we.push(X),ce=ce.concat(X)}let xe;if(E===0)xe=qo.triangulateShape(de,Y);else{const ze=[],Je=[];for(let He=0;He<E;He++){const yt=He/E,ee=x*Math.cos(yt*Math.PI/2),Ft=S*Math.sin(yt*Math.PI/2)+A;for(let St=0,Vt=de.length;St<Vt;St++){const ot=Z(de[St],Te[St],Ft);xt(ot.x,ot.y,-ee),yt===0&&ze.push(ot)}for(let St=0,Vt=le;St<Vt;St++){const ot=Y[St];X=we[St];const $=[];for(let B=0,fe=ot.length;B<fe;B++){const Ie=Z(ot[B],X[B],Ft);xt(Ie.x,Ie.y,-ee),yt===0&&$.push(Ie)}yt===0&&Je.push($)}}xe=qo.triangulateShape(ze,Je)}const Be=xe.length,mt=S+A;for(let ze=0;ze<Q;ze++){const Je=_?Z(k[ze],ce[ze],mt):k[ze];I?(F.copy(U.normals[0]).multiplyScalar(Je.x),L.copy(U.binormals[0]).multiplyScalar(Je.y),H.copy(N[0]).add(F).add(L),xt(H.x,H.y,H.z)):xt(Je.x,Je.y,0)}for(let ze=1;ze<=m;ze++)for(let Je=0;Je<Q;Je++){const He=_?Z(k[Je],ce[Je],mt):k[Je];I?(F.copy(U.normals[ze]).multiplyScalar(He.x),L.copy(U.binormals[ze]).multiplyScalar(He.y),H.copy(N[ze]).add(F).add(L),xt(H.x,H.y,H.z)):xt(He.x,He.y,v/m*ze)}for(let ze=E-1;ze>=0;ze--){const Je=ze/E,He=x*Math.cos(Je*Math.PI/2),yt=S*Math.sin(Je*Math.PI/2)+A;for(let ee=0,Ft=de.length;ee<Ft;ee++){const St=Z(de[ee],Te[ee],yt);xt(St.x,St.y,v+He)}for(let ee=0,Ft=Y.length;ee<Ft;ee++){const St=Y[ee];X=we[ee];for(let Vt=0,ot=St.length;Vt<ot;Vt++){const $=Z(St[Vt],X[Vt],yt);I?xt($.x,$.y+N[m-1].y,N[m-1].x+He):xt($.x,$.y,v+He)}}}ge(),Re();function ge(){const ze=r.length/3;if(_){let Je=0,He=Q*Je;for(let yt=0;yt<Be;yt++){const ee=xe[yt];Rt(ee[2]+He,ee[1]+He,ee[0]+He)}Je=m+E*2,He=Q*Je;for(let yt=0;yt<Be;yt++){const ee=xe[yt];Rt(ee[0]+He,ee[1]+He,ee[2]+He)}}else{for(let Je=0;Je<Be;Je++){const He=xe[Je];Rt(He[2],He[1],He[0])}for(let Je=0;Je<Be;Je++){const He=xe[Je];Rt(He[0]+Q*m,He[1]+Q*m,He[2]+Q*m)}}i.addGroup(ze,r.length/3-ze,0)}function Re(){const ze=r.length/3;let Je=0;rt(de,Je),Je+=de.length;for(let He=0,yt=Y.length;He<yt;He++){const ee=Y[He];rt(ee,Je),Je+=ee.length}i.addGroup(ze,r.length/3-ze,1)}function rt(ze,Je){let He=ze.length;for(;--He>=0;){const yt=He;let ee=He-1;ee<0&&(ee=ze.length-1);for(let Ft=0,St=m+E*2;Ft<St;Ft++){const Vt=Q*Ft,ot=Q*(Ft+1),$=Je+yt+Vt,B=Je+ee+Vt,fe=Je+ee+ot,Ie=Je+yt+ot;hn($,B,fe,Ie)}}}function xt(ze,Je,He){f.push(ze),f.push(Je),f.push(He)}function Rt(ze,Je,He){En(ze),En(Je),En(He);const yt=r.length/3,ee=C.generateTopUV(i,r,yt-3,yt-2,yt-1);$t(ee[0]),$t(ee[1]),$t(ee[2])}function hn(ze,Je,He,yt){En(ze),En(Je),En(yt),En(Je),En(He),En(yt);const ee=r.length/3,Ft=C.generateSideWallUV(i,r,ee-6,ee-3,ee-2,ee-1);$t(Ft[0]),$t(Ft[1]),$t(Ft[3]),$t(Ft[1]),$t(Ft[2]),$t(Ft[3])}function En(ze){r.push(f[ze*3+0]),r.push(f[ze*3+1]),r.push(f[ze*3+2])}function $t(ze){s.push(ze.x),s.push(ze.y)}}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}toJSON(){const e=super.toJSON(),t=this.parameters.shapes,i=this.parameters.options;return aj(t,i,e)}static fromJSON(e,t){const i=[];for(let s=0,o=e.shapes.length;s<o;s++){const u=t[e.shapes[s]];i.push(u)}const r=e.options.extrudePath;return r!==void 0&&(e.options.extrudePath=new yb[r.type]().fromJSON(r)),new oS(i,e.options)}}const sj={generateTopUV:function(n,e,t,i,r){const s=e[t*3],o=e[t*3+1],u=e[i*3],f=e[i*3+1],p=e[r*3],m=e[r*3+1];return[new Ye(s,o),new Ye(u,f),new Ye(p,m)]},generateSideWallUV:function(n,e,t,i,r,s){const o=e[t*3],u=e[t*3+1],f=e[t*3+2],p=e[i*3],m=e[i*3+1],v=e[i*3+2],_=e[r*3],x=e[r*3+1],S=e[r*3+2],A=e[s*3],E=e[s*3+1],M=e[s*3+2];return Math.abs(u-m)<Math.abs(o-p)?[new Ye(o,1-f),new Ye(p,1-v),new Ye(_,1-S),new Ye(A,1-M)]:[new Ye(u,1-f),new Ye(m,1-v),new Ye(x,1-S),new Ye(E,1-M)]}};function aj(n,e,t){if(t.shapes=[],Array.isArray(n))for(let i=0,r=n.length;i<r;i++){const s=n[i];t.shapes.push(s.uuid)}else t.shapes.push(n.uuid);return t.options=Object.assign({},e),e.extrudePath!==void 0&&(t.options.extrudePath=e.extrudePath.toJSON()),t}class fv extends Ju{constructor(e=1,t=0){const i=(1+Math.sqrt(5))/2,r=[-1,i,0,1,i,0,-1,-i,0,1,-i,0,0,-1,i,0,1,i,0,-1,-i,0,1,-i,i,0,-1,i,0,1,-i,0,-1,-i,0,1],s=[0,11,5,0,5,1,0,1,7,0,7,10,0,10,11,1,5,9,5,11,4,11,10,2,10,7,6,7,1,8,3,9,4,3,4,2,3,2,6,3,6,8,3,8,9,4,9,5,2,4,11,6,2,10,8,6,7,9,8,1];super(r,s,e,t),this.type="IcosahedronGeometry",this.parameters={radius:e,detail:t}}static fromJSON(e){return new fv(e.radius,e.detail)}}class lS extends vn{constructor(e=[new Ye(0,-.5),new Ye(.5,0),new Ye(0,.5)],t=12,i=0,r=Math.PI*2){super(),this.type="LatheGeometry",this.parameters={points:e,segments:t,phiStart:i,phiLength:r},t=Math.floor(t),r=ln(r,0,Math.PI*2);const s=[],o=[],u=[],f=[],p=[],m=1/t,v=new J,_=new Ye,x=new J,S=new J,A=new J;let E=0,M=0;for(let C=0;C<=e.length-1;C++)switch(C){case 0:E=e[C+1].x-e[C].x,M=e[C+1].y-e[C].y,x.x=M*1,x.y=-E,x.z=M*0,A.copy(x),x.normalize(),f.push(x.x,x.y,x.z);break;case e.length-1:f.push(A.x,A.y,A.z);break;default:E=e[C+1].x-e[C].x,M=e[C+1].y-e[C].y,x.x=M*1,x.y=-E,x.z=M*0,S.copy(x),x.x+=A.x,x.y+=A.y,x.z+=A.z,x.normalize(),f.push(x.x,x.y,x.z),A.copy(S)}for(let C=0;C<=t;C++){const N=i+C*m*r,I=Math.sin(N),U=Math.cos(N);for(let L=0;L<=e.length-1;L++){v.x=e[L].x*I,v.y=e[L].y,v.z=e[L].x*U,o.push(v.x,v.y,v.z),_.x=C/t,_.y=L/(e.length-1),u.push(_.x,_.y);const F=f[3*L+0]*I,H=f[3*L+1],P=f[3*L+0]*U;p.push(F,H,P)}}for(let C=0;C<t;C++)for(let N=0;N<e.length-1;N++){const I=N+C*e.length,U=I,L=I+e.length,F=I+e.length+1,H=I+1;s.push(U,L,H),s.push(F,H,L)}this.setIndex(s),this.setAttribute("position",new kt(o,3)),this.setAttribute("uv",new kt(u,2)),this.setAttribute("normal",new kt(p,3))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new lS(e.points,e.segments,e.phiStart,e.phiLength)}}class dv extends Ju{constructor(e=1,t=0){const i=[1,0,0,-1,0,0,0,1,0,0,-1,0,0,0,1,0,0,-1],r=[0,2,4,0,4,3,0,3,5,0,5,2,1,2,5,1,5,3,1,3,4,1,4,2];super(i,r,e,t),this.type="OctahedronGeometry",this.parameters={radius:e,detail:t}}static fromJSON(e){return new dv(e.radius,e.detail)}}class Qu extends vn{constructor(e=1,t=1,i=1,r=1){super(),this.type="PlaneGeometry",this.parameters={width:e,height:t,widthSegments:i,heightSegments:r};const s=e/2,o=t/2,u=Math.floor(i),f=Math.floor(r),p=u+1,m=f+1,v=e/u,_=t/f,x=[],S=[],A=[],E=[];for(let M=0;M<m;M++){const C=M*_-o;for(let N=0;N<p;N++){const I=N*v-s;S.push(I,-C,0),A.push(0,0,1),E.push(N/u),E.push(1-M/f)}}for(let M=0;M<f;M++)for(let C=0;C<u;C++){const N=C+p*M,I=C+p*(M+1),U=C+1+p*(M+1),L=C+1+p*M;x.push(N,I,L),x.push(I,U,L)}this.setIndex(x),this.setAttribute("position",new kt(S,3)),this.setAttribute("normal",new kt(A,3)),this.setAttribute("uv",new kt(E,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new Qu(e.width,e.height,e.widthSegments,e.heightSegments)}}class cS extends vn{constructor(e=.5,t=1,i=32,r=1,s=0,o=Math.PI*2){super(),this.type="RingGeometry",this.parameters={innerRadius:e,outerRadius:t,thetaSegments:i,phiSegments:r,thetaStart:s,thetaLength:o},i=Math.max(3,i),r=Math.max(1,r);const u=[],f=[],p=[],m=[];let v=e;const _=(t-e)/r,x=new J,S=new Ye;for(let A=0;A<=r;A++){for(let E=0;E<=i;E++){const M=s+E/i*o;x.x=v*Math.cos(M),x.y=v*Math.sin(M),f.push(x.x,x.y,x.z),p.push(0,0,1),S.x=(x.x/t+1)/2,S.y=(x.y/t+1)/2,m.push(S.x,S.y)}v+=_}for(let A=0;A<r;A++){const E=A*(i+1);for(let M=0;M<i;M++){const C=M+E,N=C,I=C+i+1,U=C+i+2,L=C+1;u.push(N,I,L),u.push(I,U,L)}}this.setIndex(u),this.setAttribute("position",new kt(f,3)),this.setAttribute("normal",new kt(p,3)),this.setAttribute("uv",new kt(m,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new cS(e.innerRadius,e.outerRadius,e.thetaSegments,e.phiSegments,e.thetaStart,e.thetaLength)}}class uS extends vn{constructor(e=new Sf([new Ye(0,.5),new Ye(-.5,-.5),new Ye(.5,-.5)]),t=12){super(),this.type="ShapeGeometry",this.parameters={shapes:e,curveSegments:t};const i=[],r=[],s=[],o=[];let u=0,f=0;if(Array.isArray(e)===!1)p(e);else for(let m=0;m<e.length;m++)p(e[m]),this.addGroup(u,f,m),u+=f,f=0;this.setIndex(i),this.setAttribute("position",new kt(r,3)),this.setAttribute("normal",new kt(s,3)),this.setAttribute("uv",new kt(o,2));function p(m){const v=r.length/3,_=m.extractPoints(t);let x=_.shape;const S=_.holes;qo.isClockWise(x)===!1&&(x=x.reverse());for(let E=0,M=S.length;E<M;E++){const C=S[E];qo.isClockWise(C)===!0&&(S[E]=C.reverse())}const A=qo.triangulateShape(x,S);for(let E=0,M=S.length;E<M;E++){const C=S[E];x=x.concat(C)}for(let E=0,M=x.length;E<M;E++){const C=x[E];r.push(C.x,C.y,0),s.push(0,0,1),o.push(C.x,C.y)}for(let E=0,M=A.length;E<M;E++){const C=A[E],N=C[0]+v,I=C[1]+v,U=C[2]+v;i.push(N,I,U),f+=3}}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}toJSON(){const e=super.toJSON(),t=this.parameters.shapes;return oj(t,e)}static fromJSON(e,t){const i=[];for(let r=0,s=e.shapes.length;r<s;r++){const o=t[e.shapes[r]];i.push(o)}return new uS(i,e.curveSegments)}}function oj(n,e){if(e.shapes=[],Array.isArray(n))for(let t=0,i=n.length;t<i;t++){const r=n[t];e.shapes.push(r.uuid)}else e.shapes.push(n.uuid);return e}class pv extends vn{constructor(e=1,t=32,i=16,r=0,s=Math.PI*2,o=0,u=Math.PI){super(),this.type="SphereGeometry",this.parameters={radius:e,widthSegments:t,heightSegments:i,phiStart:r,phiLength:s,thetaStart:o,thetaLength:u},t=Math.max(3,Math.floor(t)),i=Math.max(2,Math.floor(i));const f=Math.min(o+u,Math.PI);let p=0;const m=[],v=new J,_=new J,x=[],S=[],A=[],E=[];for(let M=0;M<=i;M++){const C=[],N=M/i;let I=0;M===0&&o===0?I=.5/t:M===i&&f===Math.PI&&(I=-.5/t);for(let U=0;U<=t;U++){const L=U/t;v.x=-e*Math.cos(r+L*s)*Math.sin(o+N*u),v.y=e*Math.cos(o+N*u),v.z=e*Math.sin(r+L*s)*Math.sin(o+N*u),S.push(v.x,v.y,v.z),_.copy(v).normalize(),A.push(_.x,_.y,_.z),E.push(L+I,1-N),C.push(p++)}m.push(C)}for(let M=0;M<i;M++)for(let C=0;C<t;C++){const N=m[M][C+1],I=m[M][C],U=m[M+1][C],L=m[M+1][C+1];(M!==0||o>0)&&x.push(N,I,L),(M!==i-1||f<Math.PI)&&x.push(I,U,L)}this.setIndex(x),this.setAttribute("position",new kt(S,3)),this.setAttribute("normal",new kt(A,3)),this.setAttribute("uv",new kt(E,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new pv(e.radius,e.widthSegments,e.heightSegments,e.phiStart,e.phiLength,e.thetaStart,e.thetaLength)}}class hS extends Ju{constructor(e=1,t=0){const i=[1,1,1,-1,-1,1,-1,1,-1,1,-1,-1],r=[2,1,0,0,3,2,1,3,0,2,3,1];super(i,r,e,t),this.type="TetrahedronGeometry",this.parameters={radius:e,detail:t}}static fromJSON(e){return new hS(e.radius,e.detail)}}class fS extends vn{constructor(e=1,t=.4,i=12,r=48,s=Math.PI*2){super(),this.type="TorusGeometry",this.parameters={radius:e,tube:t,radialSegments:i,tubularSegments:r,arc:s},i=Math.floor(i),r=Math.floor(r);const o=[],u=[],f=[],p=[],m=new J,v=new J,_=new J;for(let x=0;x<=i;x++)for(let S=0;S<=r;S++){const A=S/r*s,E=x/i*Math.PI*2;v.x=(e+t*Math.cos(E))*Math.cos(A),v.y=(e+t*Math.cos(E))*Math.sin(A),v.z=t*Math.sin(E),u.push(v.x,v.y,v.z),m.x=e*Math.cos(A),m.y=e*Math.sin(A),_.subVectors(v,m).normalize(),f.push(_.x,_.y,_.z),p.push(S/r),p.push(x/i)}for(let x=1;x<=i;x++)for(let S=1;S<=r;S++){const A=(r+1)*x+S-1,E=(r+1)*(x-1)+S-1,M=(r+1)*(x-1)+S,C=(r+1)*x+S;o.push(A,E,C),o.push(E,M,C)}this.setIndex(o),this.setAttribute("position",new kt(u,3)),this.setAttribute("normal",new kt(f,3)),this.setAttribute("uv",new kt(p,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new fS(e.radius,e.tube,e.radialSegments,e.tubularSegments,e.arc)}}class dS extends vn{constructor(e=1,t=.4,i=64,r=8,s=2,o=3){super(),this.type="TorusKnotGeometry",this.parameters={radius:e,tube:t,tubularSegments:i,radialSegments:r,p:s,q:o},i=Math.floor(i),r=Math.floor(r);const u=[],f=[],p=[],m=[],v=new J,_=new J,x=new J,S=new J,A=new J,E=new J,M=new J;for(let N=0;N<=i;++N){const I=N/i*s*Math.PI*2;C(I,s,o,e,x),C(I+.01,s,o,e,S),E.subVectors(S,x),M.addVectors(S,x),A.crossVectors(E,M),M.crossVectors(A,E),A.normalize(),M.normalize();for(let U=0;U<=r;++U){const L=U/r*Math.PI*2,F=-t*Math.cos(L),H=t*Math.sin(L);v.x=x.x+(F*M.x+H*A.x),v.y=x.y+(F*M.y+H*A.y),v.z=x.z+(F*M.z+H*A.z),f.push(v.x,v.y,v.z),_.subVectors(v,x).normalize(),p.push(_.x,_.y,_.z),m.push(N/i),m.push(U/r)}}for(let N=1;N<=i;N++)for(let I=1;I<=r;I++){const U=(r+1)*(N-1)+(I-1),L=(r+1)*N+(I-1),F=(r+1)*N+I,H=(r+1)*(N-1)+I;u.push(U,L,H),u.push(L,F,H)}this.setIndex(u),this.setAttribute("position",new kt(f,3)),this.setAttribute("normal",new kt(p,3)),this.setAttribute("uv",new kt(m,2));function C(N,I,U,L,F){const H=Math.cos(N),P=Math.sin(N),k=U/I*N,Y=Math.cos(k);F.x=L*(2+Y)*.5*H,F.y=L*(2+Y)*P*.5,F.z=L*Math.sin(k)*.5}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new dS(e.radius,e.tube,e.tubularSegments,e.radialSegments,e.p,e.q)}}class pS extends vn{constructor(e=new aT(new J(-1,-1,0),new J(-1,1,0),new J(1,1,0)),t=64,i=1,r=8,s=!1){super(),this.type="TubeGeometry",this.parameters={path:e,tubularSegments:t,radius:i,radialSegments:r,closed:s};const o=e.computeFrenetFrames(t,s);this.tangents=o.tangents,this.normals=o.normals,this.binormals=o.binormals;const u=new J,f=new J,p=new Ye;let m=new J;const v=[],_=[],x=[],S=[];A(),this.setIndex(S),this.setAttribute("position",new kt(v,3)),this.setAttribute("normal",new kt(_,3)),this.setAttribute("uv",new kt(x,2));function A(){for(let N=0;N<t;N++)E(N);E(s===!1?t:0),C(),M()}function E(N){m=e.getPointAt(N/t,m);const I=o.normals[N],U=o.binormals[N];for(let L=0;L<=r;L++){const F=L/r*Math.PI*2,H=Math.sin(F),P=-Math.cos(F);f.x=P*I.x+H*U.x,f.y=P*I.y+H*U.y,f.z=P*I.z+H*U.z,f.normalize(),_.push(f.x,f.y,f.z),u.x=m.x+i*f.x,u.y=m.y+i*f.y,u.z=m.z+i*f.z,v.push(u.x,u.y,u.z)}}function M(){for(let N=1;N<=t;N++)for(let I=1;I<=r;I++){const U=(r+1)*(N-1)+(I-1),L=(r+1)*N+(I-1),F=(r+1)*N+I,H=(r+1)*(N-1)+I;S.push(U,L,H),S.push(L,F,H)}}function C(){for(let N=0;N<=t;N++)for(let I=0;I<=r;I++)p.x=N/t,p.y=I/r,x.push(p.x,p.y)}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}toJSON(){const e=super.toJSON();return e.path=this.parameters.path.toJSON(),e}static fromJSON(e){return new pS(new yb[e.path.type]().fromJSON(e.path),e.tubularSegments,e.radius,e.radialSegments,e.closed)}}class yO extends vn{constructor(e=null){if(super(),this.type="WireframeGeometry",this.parameters={geometry:e},e!==null){const t=[],i=new Set,r=new J,s=new J;if(e.index!==null){const o=e.attributes.position,u=e.index;let f=e.groups;f.length===0&&(f=[{start:0,count:u.count,materialIndex:0}]);for(let p=0,m=f.length;p<m;++p){const v=f[p],_=v.start,x=v.count;for(let S=_,A=_+x;S<A;S+=3)for(let E=0;E<3;E++){const M=u.getX(S+E),C=u.getX(S+(E+1)%3);r.fromBufferAttribute(o,M),s.fromBufferAttribute(o,C),_3(r,s,i)===!0&&(t.push(r.x,r.y,r.z),t.push(s.x,s.y,s.z))}}}else{const o=e.attributes.position;for(let u=0,f=o.count/3;u<f;u++)for(let p=0;p<3;p++){const m=3*u+p,v=3*u+(p+1)%3;r.fromBufferAttribute(o,m),s.fromBufferAttribute(o,v),_3(r,s,i)===!0&&(t.push(r.x,r.y,r.z),t.push(s.x,s.y,s.z))}}this.setAttribute("position",new kt(t,3))}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}}function _3(n,e,t){const i=`${n.x},${n.y},${n.z}-${e.x},${e.y},${e.z}`,r=`${e.x},${e.y},${e.z}-${n.x},${n.y},${n.z}`;return t.has(i)===!0||t.has(r)===!0?!1:(t.add(i),t.add(r),!0)}var x3=Object.freeze({__proto__:null,BoxGeometry:Rf,CapsuleGeometry:iS,CircleGeometry:rS,ConeGeometry:hv,CylinderGeometry:uv,DodecahedronGeometry:sS,EdgesGeometry:lO,ExtrudeGeometry:oS,IcosahedronGeometry:fv,LatheGeometry:lS,OctahedronGeometry:dv,PlaneGeometry:Qu,PolyhedronGeometry:Ju,RingGeometry:cS,ShapeGeometry:uS,SphereGeometry:pv,TetrahedronGeometry:hS,TorusGeometry:fS,TorusKnotGeometry:dS,TubeGeometry:pS,WireframeGeometry:yO});class _O extends ws{constructor(e){super(),this.isShadowMaterial=!0,this.type="ShadowMaterial",this.color=new Ot(0),this.transparent=!0,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.fog=e.fog,this}}class lT extends Ss{constructor(e){super(e),this.isRawShaderMaterial=!0,this.type="RawShaderMaterial"}}class cT extends ws{constructor(e){super(),this.isMeshStandardMaterial=!0,this.type="MeshStandardMaterial",this.defines={STANDARD:""},this.color=new Ot(16777215),this.roughness=1,this.metalness=0,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Ot(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Ku,this.normalScale=new Ye(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.roughnessMap=null,this.metalnessMap=null,this.alphaMap=null,this.envMap=null,this.envMapRotation=new Ca,this.envMapIntensity=1,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.defines={STANDARD:""},this.color.copy(e.color),this.roughness=e.roughness,this.metalness=e.metalness,this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.roughnessMap=e.roughnessMap,this.metalnessMap=e.metalnessMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapRotation.copy(e.envMapRotation),this.envMapIntensity=e.envMapIntensity,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.fog=e.fog,this}}class xO extends cT{constructor(e){super(),this.isMeshPhysicalMaterial=!0,this.defines={STANDARD:"",PHYSICAL:""},this.type="MeshPhysicalMaterial",this.anisotropyRotation=0,this.anisotropyMap=null,this.clearcoatMap=null,this.clearcoatRoughness=0,this.clearcoatRoughnessMap=null,this.clearcoatNormalScale=new Ye(1,1),this.clearcoatNormalMap=null,this.ior=1.5,Object.defineProperty(this,"reflectivity",{get:function(){return ln(2.5*(this.ior-1)/(this.ior+1),0,1)},set:function(t){this.ior=(1+.4*t)/(1-.4*t)}}),this.iridescenceMap=null,this.iridescenceIOR=1.3,this.iridescenceThicknessRange=[100,400],this.iridescenceThicknessMap=null,this.sheenColor=new Ot(0),this.sheenColorMap=null,this.sheenRoughness=1,this.sheenRoughnessMap=null,this.transmissionMap=null,this.thickness=0,this.thicknessMap=null,this.attenuationDistance=1/0,this.attenuationColor=new Ot(1,1,1),this.specularIntensity=1,this.specularIntensityMap=null,this.specularColor=new Ot(1,1,1),this.specularColorMap=null,this._anisotropy=0,this._clearcoat=0,this._dispersion=0,this._iridescence=0,this._sheen=0,this._transmission=0,this.setValues(e)}get anisotropy(){return this._anisotropy}set anisotropy(e){this._anisotropy>0!=e>0&&this.version++,this._anisotropy=e}get clearcoat(){return this._clearcoat}set clearcoat(e){this._clearcoat>0!=e>0&&this.version++,this._clearcoat=e}get iridescence(){return this._iridescence}set iridescence(e){this._iridescence>0!=e>0&&this.version++,this._iridescence=e}get dispersion(){return this._dispersion}set dispersion(e){this._dispersion>0!=e>0&&this.version++,this._dispersion=e}get sheen(){return this._sheen}set sheen(e){this._sheen>0!=e>0&&this.version++,this._sheen=e}get transmission(){return this._transmission}set transmission(e){this._transmission>0!=e>0&&this.version++,this._transmission=e}copy(e){return super.copy(e),this.defines={STANDARD:"",PHYSICAL:""},this.anisotropy=e.anisotropy,this.anisotropyRotation=e.anisotropyRotation,this.anisotropyMap=e.anisotropyMap,this.clearcoat=e.clearcoat,this.clearcoatMap=e.clearcoatMap,this.clearcoatRoughness=e.clearcoatRoughness,this.clearcoatRoughnessMap=e.clearcoatRoughnessMap,this.clearcoatNormalMap=e.clearcoatNormalMap,this.clearcoatNormalScale.copy(e.clearcoatNormalScale),this.dispersion=e.dispersion,this.ior=e.ior,this.iridescence=e.iridescence,this.iridescenceMap=e.iridescenceMap,this.iridescenceIOR=e.iridescenceIOR,this.iridescenceThicknessRange=[...e.iridescenceThicknessRange],this.iridescenceThicknessMap=e.iridescenceThicknessMap,this.sheen=e.sheen,this.sheenColor.copy(e.sheenColor),this.sheenColorMap=e.sheenColorMap,this.sheenRoughness=e.sheenRoughness,this.sheenRoughnessMap=e.sheenRoughnessMap,this.transmission=e.transmission,this.transmissionMap=e.transmissionMap,this.thickness=e.thickness,this.thicknessMap=e.thicknessMap,this.attenuationDistance=e.attenuationDistance,this.attenuationColor.copy(e.attenuationColor),this.specularIntensity=e.specularIntensity,this.specularIntensityMap=e.specularIntensityMap,this.specularColor.copy(e.specularColor),this.specularColorMap=e.specularColorMap,this}}class bO extends ws{constructor(e){super(),this.isMeshPhongMaterial=!0,this.type="MeshPhongMaterial",this.color=new Ot(16777215),this.specular=new Ot(1118481),this.shininess=30,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Ot(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Ku,this.normalScale=new Ye(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.envMapRotation=new Ca,this.combine=rv,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.specular.copy(e.specular),this.shininess=e.shininess,this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapRotation.copy(e.envMapRotation),this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.fog=e.fog,this}}class SO extends ws{constructor(e){super(),this.isMeshToonMaterial=!0,this.defines={TOON:""},this.type="MeshToonMaterial",this.color=new Ot(16777215),this.map=null,this.gradientMap=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Ot(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Ku,this.normalScale=new Ye(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.alphaMap=null,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.gradientMap=e.gradientMap,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.alphaMap=e.alphaMap,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.fog=e.fog,this}}class wO extends ws{constructor(e){super(),this.isMeshNormalMaterial=!0,this.type="MeshNormalMaterial",this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Ku,this.normalScale=new Ye(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.flatShading=!1,this.setValues(e)}copy(e){return super.copy(e),this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.flatShading=e.flatShading,this}}class MO extends ws{constructor(e){super(),this.isMeshLambertMaterial=!0,this.type="MeshLambertMaterial",this.color=new Ot(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Ot(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Ku,this.normalScale=new Ye(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.envMapRotation=new Ca,this.combine=rv,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapRotation.copy(e.envMapRotation),this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.fog=e.fog,this}}class uT extends ws{constructor(e){super(),this.isMeshDepthMaterial=!0,this.type="MeshDepthMaterial",this.depthPacking=UP,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.setValues(e)}copy(e){return super.copy(e),this.depthPacking=e.depthPacking,this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this}}class hT extends ws{constructor(e){super(),this.isMeshDistanceMaterial=!0,this.type="MeshDistanceMaterial",this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.setValues(e)}copy(e){return super.copy(e),this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this}}class EO extends ws{constructor(e){super(),this.isMeshMatcapMaterial=!0,this.defines={MATCAP:""},this.type="MeshMatcapMaterial",this.color=new Ot(16777215),this.matcap=null,this.map=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Ku,this.normalScale=new Ye(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.alphaMap=null,this.wireframe=!1,this.wireframeLinewidth=1,this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.defines={MATCAP:""},this.color.copy(e.color),this.matcap=e.matcap,this.map=e.map,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.alphaMap=e.alphaMap,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.flatShading=e.flatShading,this.fog=e.fog,this}}class TO extends Gs{constructor(e){super(),this.isLineDashedMaterial=!0,this.type="LineDashedMaterial",this.scale=1,this.dashSize=3,this.gapSize=1,this.setValues(e)}copy(e){return super.copy(e),this.scale=e.scale,this.dashSize=e.dashSize,this.gapSize=e.gapSize,this}}function vf(n,e){return!n||n.constructor===e?n:typeof e.BYTES_PER_ELEMENT=="number"?new e(n):Array.prototype.slice.call(n)}function AO(n){function e(r,s){return n[r]-n[s]}const t=n.length,i=new Array(t);for(let r=0;r!==t;++r)i[r]=r;return i.sort(e),i}function IM(n,e,t){const i=n.length,r=new n.constructor(i);for(let s=0,o=0;o!==i;++s){const u=t[s]*e;for(let f=0;f!==e;++f)r[o++]=n[u+f]}return r}function fT(n,e,t,i){let r=1,s=n[0];for(;s!==void 0&&s[i]===void 0;)s=n[r++];if(s===void 0)return;let o=s[i];if(o!==void 0)if(Array.isArray(o))do o=s[i],o!==void 0&&(e.push(s.time),t.push(...o)),s=n[r++];while(s!==void 0);else if(o.toArray!==void 0)do o=s[i],o!==void 0&&(e.push(s.time),o.toArray(t,t.length)),s=n[r++];while(s!==void 0);else do o=s[i],o!==void 0&&(e.push(s.time),t.push(o)),s=n[r++];while(s!==void 0)}function lj(n,e,t,i,r=30){const s=n.clone();s.name=e;const o=[];for(let f=0;f<s.tracks.length;++f){const p=s.tracks[f],m=p.getValueSize(),v=[],_=[];for(let x=0;x<p.times.length;++x){const S=p.times[x]*r;if(!(S<t||S>=i)){v.push(p.times[x]);for(let A=0;A<m;++A)_.push(p.values[x*m+A])}}v.length!==0&&(p.times=vf(v,p.times.constructor),p.values=vf(_,p.values.constructor),o.push(p))}s.tracks=o;let u=1/0;for(let f=0;f<s.tracks.length;++f)u>s.tracks[f].times[0]&&(u=s.tracks[f].times[0]);for(let f=0;f<s.tracks.length;++f)s.tracks[f].shift(-1*u);return s.resetDuration(),s}function cj(n,e=0,t=n,i=30){i<=0&&(i=30);const r=t.tracks.length,s=e/i;for(let o=0;o<r;++o){const u=t.tracks[o],f=u.ValueTypeName;if(f==="bool"||f==="string")continue;const p=n.tracks.find(function(M){return M.name===u.name&&M.ValueTypeName===f});if(p===void 0)continue;let m=0;const v=u.getValueSize();u.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline&&(m=v/3);let _=0;const x=p.getValueSize();p.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline&&(_=x/3);const S=u.times.length-1;let A;if(s<=u.times[0]){const M=m,C=v-m;A=u.values.slice(M,C)}else if(s>=u.times[S]){const M=S*v+m,C=M+v-m;A=u.values.slice(M,C)}else{const M=u.createInterpolant(),C=m,N=v-m;M.evaluate(s),A=M.resultBuffer.slice(C,N)}f==="quaternion"&&new pa().fromArray(A).normalize().conjugate().toArray(A);const E=p.times.length;for(let M=0;M<E;++M){const C=M*x+_;if(f==="quaternion")pa.multiplyQuaternionsFlat(p.values,C,A,0,p.values,C);else{const N=x-_*2;for(let I=0;I<N;++I)p.values[C+I]-=A[I]}}}return n.blendMode=XE,n}class uj{static convertArray(e,t){return vf(e,t)}static isTypedArray(e){return WP(e)}static getKeyframeOrder(e){return AO(e)}static sortedArray(e,t,i){return IM(e,t,i)}static flattenJSON(e,t,i,r){fT(e,t,i,r)}static subclip(e,t,i,r,s=30){return lj(e,t,i,r,s)}static makeClipAdditive(e,t=0,i=e,r=30){return cj(e,t,i,r)}}class mv{constructor(e,t,i,r){this.parameterPositions=e,this._cachedIndex=0,this.resultBuffer=r!==void 0?r:new t.constructor(i),this.sampleValues=t,this.valueSize=i,this.settings=null,this.DefaultSettings_={}}evaluate(e){const t=this.parameterPositions;let i=this._cachedIndex,r=t[i],s=t[i-1];e:{t:{let o;n:{i:if(!(e<r)){for(let u=i+2;;){if(r===void 0){if(e<s)break i;return i=t.length,this._cachedIndex=i,this.copySampleValue_(i-1)}if(i===u)break;if(s=r,r=t[++i],e<r)break t}o=t.length;break n}if(!(e>=s)){const u=t[1];e<u&&(i=2,s=u);for(let f=i-2;;){if(s===void 0)return this._cachedIndex=0,this.copySampleValue_(0);if(i===f)break;if(r=s,s=t[--i-1],e>=s)break t}o=i,i=0;break n}break e}for(;i<o;){const u=i+o>>>1;e<t[u]?o=u:i=u+1}if(r=t[i],s=t[i-1],s===void 0)return this._cachedIndex=0,this.copySampleValue_(0);if(r===void 0)return i=t.length,this._cachedIndex=i,this.copySampleValue_(i-1)}this._cachedIndex=i,this.intervalChanged_(i,s,r)}return this.interpolate_(i,s,e,r)}getSettings_(){return this.settings||this.DefaultSettings_}copySampleValue_(e){const t=this.resultBuffer,i=this.sampleValues,r=this.valueSize,s=e*r;for(let o=0;o!==r;++o)t[o]=i[s+o];return t}interpolate_(){throw new Error("call to abstract method")}intervalChanged_(){}}class CO extends mv{constructor(e,t,i,r){super(e,t,i,r),this._weightPrev=-0,this._offsetPrev=-0,this._weightNext=-0,this._offsetNext=-0,this.DefaultSettings_={endingStart:pf,endingEnd:pf}}intervalChanged_(e,t,i){const r=this.parameterPositions;let s=e-2,o=e+1,u=r[s],f=r[o];if(u===void 0)switch(this.getSettings_().endingStart){case mf:s=e,u=2*t-i;break;case O0:s=r.length-2,u=t+r[s]-r[s+1];break;default:s=e,u=i}if(f===void 0)switch(this.getSettings_().endingEnd){case mf:o=e,f=2*i-t;break;case O0:o=1,f=i+r[1]-r[0];break;default:o=e-1,f=t}const p=(i-t)*.5,m=this.valueSize;this._weightPrev=p/(t-u),this._weightNext=p/(f-i),this._offsetPrev=s*m,this._offsetNext=o*m}interpolate_(e,t,i,r){const s=this.resultBuffer,o=this.sampleValues,u=this.valueSize,f=e*u,p=f-u,m=this._offsetPrev,v=this._offsetNext,_=this._weightPrev,x=this._weightNext,S=(i-t)/(r-t),A=S*S,E=A*S,M=-_*E+2*_*A-_*S,C=(1+_)*E+(-1.5-2*_)*A+(-.5+_)*S+1,N=(-1-x)*E+(1.5+x)*A+.5*S,I=x*E-x*A;for(let U=0;U!==u;++U)s[U]=M*o[m+U]+C*o[p+U]+N*o[f+U]+I*o[v+U];return s}}class dT extends mv{constructor(e,t,i,r){super(e,t,i,r)}interpolate_(e,t,i,r){const s=this.resultBuffer,o=this.sampleValues,u=this.valueSize,f=e*u,p=f-u,m=(i-t)/(r-t),v=1-m;for(let _=0;_!==u;++_)s[_]=o[p+_]*v+o[f+_]*m;return s}}class RO extends mv{constructor(e,t,i,r){super(e,t,i,r)}interpolate_(e){return this.copySampleValue_(e-1)}}class po{constructor(e,t,i,r){if(e===void 0)throw new Error("THREE.KeyframeTrack: track name is undefined");if(t===void 0||t.length===0)throw new Error("THREE.KeyframeTrack: no keyframes in track named "+e);this.name=e,this.times=vf(t,this.TimeBufferType),this.values=vf(i,this.ValueBufferType),this.setInterpolation(r||this.DefaultInterpolation)}static toJSON(e){const t=e.constructor;let i;if(t.toJSON!==this.toJSON)i=t.toJSON(e);else{i={name:e.name,times:vf(e.times,Array),values:vf(e.values,Array)};const r=e.getInterpolation();r!==e.DefaultInterpolation&&(i.interpolation=r)}return i.type=e.ValueTypeName,i}InterpolantFactoryMethodDiscrete(e){return new RO(this.times,this.values,this.getValueSize(),e)}InterpolantFactoryMethodLinear(e){return new dT(this.times,this.values,this.getValueSize(),e)}InterpolantFactoryMethodSmooth(e){return new CO(this.times,this.values,this.getValueSize(),e)}setInterpolation(e){let t;switch(e){case P0:t=this.InterpolantFactoryMethodDiscrete;break;case mb:t=this.InterpolantFactoryMethodLinear;break;case fx:t=this.InterpolantFactoryMethodSmooth;break}if(t===void 0){const i="unsupported interpolation for "+this.ValueTypeName+" keyframe track named "+this.name;if(this.createInterpolant===void 0)if(e!==this.DefaultInterpolation)this.setInterpolation(this.DefaultInterpolation);else throw new Error(i);return At("KeyframeTrack:",i),this}return this.createInterpolant=t,this}getInterpolation(){switch(this.createInterpolant){case this.InterpolantFactoryMethodDiscrete:return P0;case this.InterpolantFactoryMethodLinear:return mb;case this.InterpolantFactoryMethodSmooth:return fx}}getValueSize(){return this.values.length/this.times.length}shift(e){if(e!==0){const t=this.times;for(let i=0,r=t.length;i!==r;++i)t[i]+=e}return this}scale(e){if(e!==1){const t=this.times;for(let i=0,r=t.length;i!==r;++i)t[i]*=e}return this}trim(e,t){const i=this.times,r=i.length;let s=0,o=r-1;for(;s!==r&&i[s]<e;)++s;for(;o!==-1&&i[o]>t;)--o;if(++o,s!==0||o!==r){s>=o&&(o=Math.max(o,1),s=o-1);const u=this.getValueSize();this.times=i.slice(s,o),this.values=this.values.slice(s*u,o*u)}return this}validate(){let e=!0;const t=this.getValueSize();t-Math.floor(t)!==0&&(Xt("KeyframeTrack: Invalid value size in track.",this),e=!1);const i=this.times,r=this.values,s=i.length;s===0&&(Xt("KeyframeTrack: Track is empty.",this),e=!1);let o=null;for(let u=0;u!==s;u++){const f=i[u];if(typeof f=="number"&&isNaN(f)){Xt("KeyframeTrack: Time is not a valid number.",this,u,f),e=!1;break}if(o!==null&&o>f){Xt("KeyframeTrack: Out of order keys.",this,u,f,o),e=!1;break}o=f}if(r!==void 0&&WP(r))for(let u=0,f=r.length;u!==f;++u){const p=r[u];if(isNaN(p)){Xt("KeyframeTrack: Value is not a valid number.",this,u,p),e=!1;break}}return e}optimize(){const e=this.times.slice(),t=this.values.slice(),i=this.getValueSize(),r=this.getInterpolation()===fx,s=e.length-1;let o=1;for(let u=1;u<s;++u){let f=!1;const p=e[u],m=e[u+1];if(p!==m&&(u!==1||p!==e[0]))if(r)f=!0;else{const v=u*i,_=v-i,x=v+i;for(let S=0;S!==i;++S){const A=t[v+S];if(A!==t[_+S]||A!==t[x+S]){f=!0;break}}}if(f){if(u!==o){e[o]=e[u];const v=u*i,_=o*i;for(let x=0;x!==i;++x)t[_+x]=t[v+x]}++o}}if(s>0){e[o]=e[s];for(let u=s*i,f=o*i,p=0;p!==i;++p)t[f+p]=t[u+p];++o}return o!==e.length?(this.times=e.slice(0,o),this.values=t.slice(0,o*i)):(this.times=e,this.values=t),this}clone(){const e=this.times.slice(),t=this.values.slice(),i=this.constructor,r=new i(this.name,e,t);return r.createInterpolant=this.createInterpolant,r}}po.prototype.ValueTypeName="";po.prototype.TimeBufferType=Float32Array;po.prototype.ValueBufferType=Float32Array;po.prototype.DefaultInterpolation=mb;class Nf extends po{constructor(e,t,i){super(e,t,i)}}Nf.prototype.ValueTypeName="bool";Nf.prototype.ValueBufferType=Array;Nf.prototype.DefaultInterpolation=P0;Nf.prototype.InterpolantFactoryMethodLinear=void 0;Nf.prototype.InterpolantFactoryMethodSmooth=void 0;class pT extends po{constructor(e,t,i,r){super(e,t,i,r)}}pT.prototype.ValueTypeName="color";class H0 extends po{constructor(e,t,i,r){super(e,t,i,r)}}H0.prototype.ValueTypeName="number";class NO extends mv{constructor(e,t,i,r){super(e,t,i,r)}interpolate_(e,t,i,r){const s=this.resultBuffer,o=this.sampleValues,u=this.valueSize,f=(i-t)/(r-t);let p=e*u;for(let m=p+u;p!==m;p+=4)pa.slerpFlat(s,0,o,p-u,o,p,f);return s}}class gv extends po{constructor(e,t,i,r){super(e,t,i,r)}InterpolantFactoryMethodLinear(e){return new NO(this.times,this.values,this.getValueSize(),e)}}gv.prototype.ValueTypeName="quaternion";gv.prototype.InterpolantFactoryMethodSmooth=void 0;class Df extends po{constructor(e,t,i){super(e,t,i)}}Df.prototype.ValueTypeName="string";Df.prototype.ValueBufferType=Array;Df.prototype.DefaultInterpolation=P0;Df.prototype.InterpolantFactoryMethodLinear=void 0;Df.prototype.InterpolantFactoryMethodSmooth=void 0;class G0 extends po{constructor(e,t,i,r){super(e,t,i,r)}}G0.prototype.ValueTypeName="vector";class j0{constructor(e="",t=-1,i=[],r=jb){this.name=e,this.tracks=i,this.duration=t,this.blendMode=r,this.uuid=Ea(),this.userData={},this.duration<0&&this.resetDuration()}static parse(e){const t=[],i=e.tracks,r=1/(e.fps||1);for(let o=0,u=i.length;o!==u;++o)t.push(fj(i[o]).scale(r));const s=new this(e.name,e.duration,t,e.blendMode);return s.uuid=e.uuid,s.userData=JSON.parse(e.userData||"{}"),s}static toJSON(e){const t=[],i=e.tracks,r={name:e.name,duration:e.duration,tracks:t,uuid:e.uuid,blendMode:e.blendMode,userData:JSON.stringify(e.userData)};for(let s=0,o=i.length;s!==o;++s)t.push(po.toJSON(i[s]));return r}static CreateFromMorphTargetSequence(e,t,i,r){const s=t.length,o=[];for(let u=0;u<s;u++){let f=[],p=[];f.push((u+s-1)%s,u,(u+1)%s),p.push(0,1,0);const m=AO(f);f=IM(f,1,m),p=IM(p,1,m),!r&&f[0]===0&&(f.push(s),p.push(p[0])),o.push(new H0(".morphTargetInfluences["+t[u].name+"]",f,p).scale(1/i))}return new this(e,-1,o)}static findByName(e,t){let i=e;if(!Array.isArray(e)){const r=e;i=r.geometry&&r.geometry.animations||r.animations}for(let r=0;r<i.length;r++)if(i[r].name===t)return i[r];return null}static CreateClipsFromMorphTargetSequences(e,t,i){const r={},s=/^([\w-]*?)([\d]+)$/;for(let u=0,f=e.length;u<f;u++){const p=e[u],m=p.name.match(s);if(m&&m.length>1){const v=m[1];let _=r[v];_||(r[v]=_=[]),_.push(p)}}const o=[];for(const u in r)o.push(this.CreateFromMorphTargetSequence(u,r[u],t,i));return o}static parseAnimation(e,t){if(At("AnimationClip: parseAnimation() is deprecated and will be removed with r185"),!e)return Xt("AnimationClip: No animation in JSONLoader data."),null;const i=function(v,_,x,S,A){if(x.length!==0){const E=[],M=[];fT(x,E,M,S),E.length!==0&&A.push(new v(_,E,M))}},r=[],s=e.name||"default",o=e.fps||30,u=e.blendMode;let f=e.length||-1;const p=e.hierarchy||[];for(let v=0;v<p.length;v++){const _=p[v].keys;if(!(!_||_.length===0))if(_[0].morphTargets){const x={};let S;for(S=0;S<_.length;S++)if(_[S].morphTargets)for(let A=0;A<_[S].morphTargets.length;A++)x[_[S].morphTargets[A]]=-1;for(const A in x){const E=[],M=[];for(let C=0;C!==_[S].morphTargets.length;++C){const N=_[S];E.push(N.time),M.push(N.morphTarget===A?1:0)}r.push(new H0(".morphTargetInfluence["+A+"]",E,M))}f=x.length*o}else{const x=".bones["+t[v].name+"]";i(G0,x+".position",_,"pos",r),i(gv,x+".quaternion",_,"rot",r),i(G0,x+".scale",_,"scl",r)}}return r.length===0?null:new this(s,f,r,u)}resetDuration(){const e=this.tracks;let t=0;for(let i=0,r=e.length;i!==r;++i){const s=this.tracks[i];t=Math.max(t,s.times[s.times.length-1])}return this.duration=t,this}trim(){for(let e=0;e<this.tracks.length;e++)this.tracks[e].trim(0,this.duration);return this}validate(){let e=!0;for(let t=0;t<this.tracks.length;t++)e=e&&this.tracks[t].validate();return e}optimize(){for(let e=0;e<this.tracks.length;e++)this.tracks[e].optimize();return this}clone(){const e=[];for(let i=0;i<this.tracks.length;i++)e.push(this.tracks[i].clone());const t=new this.constructor(this.name,this.duration,e,this.blendMode);return t.userData=JSON.parse(JSON.stringify(this.userData)),t}toJSON(){return this.constructor.toJSON(this)}}function hj(n){switch(n.toLowerCase()){case"scalar":case"double":case"float":case"number":case"integer":return H0;case"vector":case"vector2":case"vector3":case"vector4":return G0;case"color":return pT;case"quaternion":return gv;case"bool":case"boolean":return Nf;case"string":return Df}throw new Error("THREE.KeyframeTrack: Unsupported typeName: "+n)}function fj(n){if(n.type===void 0)throw new Error("THREE.KeyframeTrack: track type undefined, can not parse");const e=hj(n.type);if(n.times===void 0){const t=[],i=[];fT(n.keys,t,i,"value"),n.times=t,n.values=i}return e.parse!==void 0?e.parse(n):new e(n.name,n.times,n.values,n.interpolation)}const Pl={enabled:!1,files:{},add:function(n,e){this.enabled!==!1&&(this.files[n]=e)},get:function(n){if(this.enabled!==!1)return this.files[n]},remove:function(n){delete this.files[n]},clear:function(){this.files={}}};class mS{constructor(e,t,i){const r=this;let s=!1,o=0,u=0,f;const p=[];this.onStart=void 0,this.onLoad=e,this.onProgress=t,this.onError=i,this._abortController=null,this.itemStart=function(m){u++,s===!1&&r.onStart!==void 0&&r.onStart(m,o,u),s=!0},this.itemEnd=function(m){o++,r.onProgress!==void 0&&r.onProgress(m,o,u),o===u&&(s=!1,r.onLoad!==void 0&&r.onLoad())},this.itemError=function(m){r.onError!==void 0&&r.onError(m)},this.resolveURL=function(m){return f?f(m):m},this.setURLModifier=function(m){return f=m,this},this.addHandler=function(m,v){return p.push(m,v),this},this.removeHandler=function(m){const v=p.indexOf(m);return v!==-1&&p.splice(v,2),this},this.getHandler=function(m){for(let v=0,_=p.length;v<_;v+=2){const x=p[v],S=p[v+1];if(x.global&&(x.lastIndex=0),x.test(m))return S}return null},this.abort=function(){return this.abortController.abort(),this._abortController=null,this}}get abortController(){return this._abortController||(this._abortController=new AbortController),this._abortController}}const Tp=new mS;class js{constructor(e){this.manager=e!==void 0?e:Tp,this.crossOrigin="anonymous",this.withCredentials=!1,this.path="",this.resourcePath="",this.requestHeader={}}load(){}loadAsync(e,t){const i=this;return new Promise(function(r,s){i.load(e,r,t,s)})}parse(){}setCrossOrigin(e){return this.crossOrigin=e,this}setWithCredentials(e){return this.withCredentials=e,this}setPath(e){return this.path=e,this}setResourcePath(e){return this.resourcePath=e,this}setRequestHeader(e){return this.requestHeader=e,this}abort(){return this}}js.DEFAULT_MATERIAL_NAME="__DEFAULT";const wc={};class dj extends Error{constructor(e,t){super(e),this.response=t}}class Ta extends js{constructor(e){super(e),this.mimeType="",this.responseType="",this._abortController=new AbortController}load(e,t,i,r){e===void 0&&(e=""),this.path!==void 0&&(e=this.path+e),e=this.manager.resolveURL(e);const s=Pl.get(`file:${e}`);if(s!==void 0)return this.manager.itemStart(e),setTimeout(()=>{t&&t(s),this.manager.itemEnd(e)},0),s;if(wc[e]!==void 0){wc[e].push({onLoad:t,onProgress:i,onError:r});return}wc[e]=[],wc[e].push({onLoad:t,onProgress:i,onError:r});const o=new Request(e,{headers:new Headers(this.requestHeader),credentials:this.withCredentials?"include":"same-origin",signal:typeof AbortSignal.any=="function"?AbortSignal.any([this._abortController.signal,this.manager.abortController.signal]):this._abortController.signal}),u=this.mimeType,f=this.responseType;fetch(o).then(p=>{if(p.status===200||p.status===0){if(p.status===0&&At("FileLoader: HTTP Status 0 received."),typeof ReadableStream>"u"||p.body===void 0||p.body.getReader===void 0)return p;const m=wc[e],v=p.body.getReader(),_=p.headers.get("X-File-Size")||p.headers.get("Content-Length"),x=_?parseInt(_):0,S=x!==0;let A=0;const E=new ReadableStream({start(M){C();function C(){v.read().then(({done:N,value:I})=>{if(N)M.close();else{A+=I.byteLength;const U=new ProgressEvent("progress",{lengthComputable:S,loaded:A,total:x});for(let L=0,F=m.length;L<F;L++){const H=m[L];H.onProgress&&H.onProgress(U)}M.enqueue(I),C()}},N=>{M.error(N)})}}});return new Response(E)}else throw new dj(`fetch for "${p.url}" responded with ${p.status}: ${p.statusText}`,p)}).then(p=>{switch(f){case"arraybuffer":return p.arrayBuffer();case"blob":return p.blob();case"document":return p.text().then(m=>new DOMParser().parseFromString(m,u));case"json":return p.json();default:if(u==="")return p.text();{const v=/charset="?([^;"\s]*)"?/i.exec(u),_=v&&v[1]?v[1].toLowerCase():void 0,x=new TextDecoder(_);return p.arrayBuffer().then(S=>x.decode(S))}}}).then(p=>{Pl.add(`file:${e}`,p);const m=wc[e];delete wc[e];for(let v=0,_=m.length;v<_;v++){const x=m[v];x.onLoad&&x.onLoad(p)}}).catch(p=>{const m=wc[e];if(m===void 0)throw this.manager.itemError(e),p;delete wc[e];for(let v=0,_=m.length;v<_;v++){const x=m[v];x.onError&&x.onError(p)}this.manager.itemError(e)}).finally(()=>{this.manager.itemEnd(e)}),this.manager.itemStart(e)}setResponseType(e){return this.responseType=e,this}setMimeType(e){return this.mimeType=e,this}abort(){return this._abortController.abort(),this._abortController=new AbortController,this}}class pj extends js{constructor(e){super(e)}load(e,t,i,r){const s=this,o=new Ta(this.manager);o.setPath(this.path),o.setRequestHeader(this.requestHeader),o.setWithCredentials(this.withCredentials),o.load(e,function(u){try{t(s.parse(JSON.parse(u)))}catch(f){r?r(f):Xt(f),s.manager.itemError(e)}},i,r)}parse(e){const t=[];for(let i=0;i<e.length;i++){const r=j0.parse(e[i]);t.push(r)}return t}}class mj extends js{constructor(e){super(e)}load(e,t,i,r){const s=this,o=[],u=new nS,f=new Ta(this.manager);f.setPath(this.path),f.setResponseType("arraybuffer"),f.setRequestHeader(this.requestHeader),f.setWithCredentials(s.withCredentials);let p=0;function m(v){f.load(e[v],function(_){const x=s.parse(_,!0);o[v]={width:x.width,height:x.height,format:x.format,mipmaps:x.mipmaps},p+=1,p===6&&(x.mipmapCount===1&&(u.minFilter=Wn),u.image=o,u.format=x.format,u.needsUpdate=!0,t&&t(u))},i,r)}if(Array.isArray(e))for(let v=0,_=e.length;v<_;++v)m(v);else f.load(e,function(v){const _=s.parse(v,!0);if(_.isCubemap){const x=_.mipmaps.length/_.mipmapCount;for(let S=0;S<x;S++){o[S]={mipmaps:[]};for(let A=0;A<_.mipmapCount;A++)o[S].mipmaps.push(_.mipmaps[S*_.mipmapCount+A]),o[S].format=_.format,o[S].width=_.width,o[S].height=_.height}u.image=o}else u.image.width=_.width,u.image.height=_.height,u.mipmaps=_.mipmaps;_.mipmapCount===1&&(u.minFilter=Wn),u.format=_.format,u.needsUpdate=!0,t&&t(u)},i,r);return u}}const lp=new WeakMap;class W0 extends js{constructor(e){super(e)}load(e,t,i,r){this.path!==void 0&&(e=this.path+e),e=this.manager.resolveURL(e);const s=this,o=Pl.get(`image:${e}`);if(o!==void 0){if(o.complete===!0)s.manager.itemStart(e),setTimeout(function(){t&&t(o),s.manager.itemEnd(e)},0);else{let v=lp.get(o);v===void 0&&(v=[],lp.set(o,v)),v.push({onLoad:t,onError:r})}return o}const u=k0("img");function f(){m(),t&&t(this);const v=lp.get(this)||[];for(let _=0;_<v.length;_++){const x=v[_];x.onLoad&&x.onLoad(this)}lp.delete(this),s.manager.itemEnd(e)}function p(v){m(),r&&r(v),Pl.remove(`image:${e}`);const _=lp.get(this)||[];for(let x=0;x<_.length;x++){const S=_[x];S.onError&&S.onError(v)}lp.delete(this),s.manager.itemError(e),s.manager.itemEnd(e)}function m(){u.removeEventListener("load",f,!1),u.removeEventListener("error",p,!1)}return u.addEventListener("load",f,!1),u.addEventListener("error",p,!1),e.slice(0,5)!=="data:"&&this.crossOrigin!==void 0&&(u.crossOrigin=this.crossOrigin),Pl.add(`image:${e}`,u),s.manager.itemStart(e),u.src=e,u}}class DO extends js{constructor(e){super(e)}load(e,t,i,r){const s=new lv;s.colorSpace=rs;const o=new W0(this.manager);o.setCrossOrigin(this.crossOrigin),o.setPath(this.path);let u=0;function f(p){o.load(e[p],function(m){s.images[p]=m,u++,u===6&&(s.needsUpdate=!0,t&&t(s))},void 0,r)}for(let p=0;p<e.length;++p)f(p);return s}}class mT extends js{constructor(e){super(e)}load(e,t,i,r){const s=this,o=new co,u=new Ta(this.manager);return u.setResponseType("arraybuffer"),u.setRequestHeader(this.requestHeader),u.setPath(this.path),u.setWithCredentials(s.withCredentials),u.load(e,function(f){let p;try{p=s.parse(f)}catch(m){if(r!==void 0)r(m);else{m(m);return}}p.image!==void 0?o.image=p.image:p.data!==void 0&&(o.image.width=p.width,o.image.height=p.height,o.image.data=p.data),o.wrapS=p.wrapS!==void 0?p.wrapS:nr,o.wrapT=p.wrapT!==void 0?p.wrapT:nr,o.magFilter=p.magFilter!==void 0?p.magFilter:Wn,o.minFilter=p.minFilter!==void 0?p.minFilter:Wn,o.anisotropy=p.anisotropy!==void 0?p.anisotropy:1,p.colorSpace!==void 0&&(o.colorSpace=p.colorSpace),p.flipY!==void 0&&(o.flipY=p.flipY),p.format!==void 0&&(o.format=p.format),p.type!==void 0&&(o.type=p.type),p.mipmaps!==void 0&&(o.mipmaps=p.mipmaps,o.minFilter=Il),p.mipmapCount===1&&(o.minFilter=Wn),p.generateMipmaps!==void 0&&(o.generateMipmaps=p.generateMipmaps),o.needsUpdate=!0,t&&t(o,p)},i,r),o}}class gj extends js{constructor(e){super(e)}load(e,t,i,r){const s=new hi,o=new W0(this.manager);return o.setCrossOrigin(this.crossOrigin),o.setPath(this.path),o.load(e,function(u){s.image=u,s.needsUpdate=!0,t!==void 0&&t(s)},i,r),s}}class eh extends Zn{constructor(e,t=1){super(),this.isLight=!0,this.type="Light",this.color=new Ot(e),this.intensity=t}dispose(){this.dispatchEvent({type:"dispose"})}copy(e,t){return super.copy(e,t),this.color.copy(e.color),this.intensity=e.intensity,this}toJSON(e){const t=super.toJSON(e);return t.object.color=this.color.getHex(),t.object.intensity=this.intensity,t}}class IO extends eh{constructor(e,t,i){super(e,i),this.isHemisphereLight=!0,this.type="HemisphereLight",this.position.copy(Zn.DEFAULT_UP),this.updateMatrix(),this.groundColor=new Ot(t)}copy(e,t){return super.copy(e,t),this.groundColor.copy(e.groundColor),this}toJSON(e){const t=super.toJSON(e);return t.object.groundColor=this.groundColor.getHex(),t}}const pw=new un,b3=new J,S3=new J;class gT{constructor(e){this.camera=e,this.intensity=1,this.bias=0,this.normalBias=0,this.radius=1,this.blurSamples=8,this.mapSize=new Ye(512,512),this.mapType=Gr,this.map=null,this.mapPass=null,this.matrix=new un,this.autoUpdate=!0,this.needsUpdate=!1,this._frustum=new em,this._frameExtents=new Ye(1,1),this._viewportCount=1,this._viewports=[new mi(0,0,1,1)]}getViewportCount(){return this._viewportCount}getFrustum(){return this._frustum}updateMatrices(e){const t=this.camera,i=this.matrix;b3.setFromMatrixPosition(e.matrixWorld),t.position.copy(b3),S3.setFromMatrixPosition(e.target.matrixWorld),t.lookAt(S3),t.updateMatrixWorld(),pw.multiplyMatrices(t.projectionMatrix,t.matrixWorldInverse),this._frustum.setFromProjectionMatrix(pw,t.coordinateSystem,t.reversedDepth),t.reversedDepth?i.set(.5,0,0,.5,0,.5,0,.5,0,0,1,0,0,0,0,1):i.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),i.multiply(pw)}getViewport(e){return this._viewports[e]}getFrameExtents(){return this._frameExtents}dispose(){this.map&&this.map.dispose(),this.mapPass&&this.mapPass.dispose()}copy(e){return this.camera=e.camera.clone(),this.intensity=e.intensity,this.bias=e.bias,this.radius=e.radius,this.autoUpdate=e.autoUpdate,this.needsUpdate=e.needsUpdate,this.normalBias=e.normalBias,this.blurSamples=e.blurSamples,this.mapSize.copy(e.mapSize),this}clone(){return new this.constructor().copy(this)}toJSON(){const e={};return this.intensity!==1&&(e.intensity=this.intensity),this.bias!==0&&(e.bias=this.bias),this.normalBias!==0&&(e.normalBias=this.normalBias),this.radius!==1&&(e.radius=this.radius),(this.mapSize.x!==512||this.mapSize.y!==512)&&(e.mapSize=this.mapSize.toArray()),e.camera=this.camera.toJSON(!1).object,delete e.camera.matrix,e}}class vj extends gT{constructor(){super(new Hr(50,1,.5,500)),this.isSpotLightShadow=!0,this.focus=1,this.aspect=1}updateMatrices(e){const t=this.camera,i=Bp*2*e.angle*this.focus,r=this.mapSize.width/this.mapSize.height*this.aspect,s=e.distance||t.far;(i!==t.fov||r!==t.aspect||s!==t.far)&&(t.fov=i,t.aspect=r,t.far=s,t.updateProjectionMatrix()),super.updateMatrices(e)}copy(e){return super.copy(e),this.focus=e.focus,this}}class PO extends eh{constructor(e,t,i=0,r=Math.PI/3,s=0,o=2){super(e,t),this.isSpotLight=!0,this.type="SpotLight",this.position.copy(Zn.DEFAULT_UP),this.updateMatrix(),this.target=new Zn,this.distance=i,this.angle=r,this.penumbra=s,this.decay=o,this.map=null,this.shadow=new vj}get power(){return this.intensity*Math.PI}set power(e){this.intensity=e/Math.PI}dispose(){super.dispose(),this.shadow.dispose()}copy(e,t){return super.copy(e,t),this.distance=e.distance,this.angle=e.angle,this.penumbra=e.penumbra,this.decay=e.decay,this.target=e.target.clone(),this.map=e.map,this.shadow=e.shadow.clone(),this}toJSON(e){const t=super.toJSON(e);return t.object.distance=this.distance,t.object.angle=this.angle,t.object.decay=this.decay,t.object.penumbra=this.penumbra,t.object.target=this.target.uuid,this.map&&this.map.isTexture&&(t.object.map=this.map.toJSON(e).uuid),t.object.shadow=this.shadow.toJSON(),t}}class yj extends gT{constructor(){super(new Hr(90,1,.5,500)),this.isPointLightShadow=!0}}class OO extends eh{constructor(e,t,i=0,r=2){super(e,t),this.isPointLight=!0,this.type="PointLight",this.distance=i,this.decay=r,this.shadow=new yj}get power(){return this.intensity*4*Math.PI}set power(e){this.intensity=e/(4*Math.PI)}dispose(){super.dispose(),this.shadow.dispose()}copy(e,t){return super.copy(e,t),this.distance=e.distance,this.decay=e.decay,this.shadow=e.shadow.clone(),this}toJSON(e){const t=super.toJSON(e);return t.object.distance=this.distance,t.object.decay=this.decay,t.object.shadow=this.shadow.toJSON(),t}}class If extends Yb{constructor(e=-1,t=1,i=1,r=-1,s=.1,o=2e3){super(),this.isOrthographicCamera=!0,this.type="OrthographicCamera",this.zoom=1,this.view=null,this.left=e,this.right=t,this.top=i,this.bottom=r,this.near=s,this.far=o,this.updateProjectionMatrix()}copy(e,t){return super.copy(e,t),this.left=e.left,this.right=e.right,this.top=e.top,this.bottom=e.bottom,this.near=e.near,this.far=e.far,this.zoom=e.zoom,this.view=e.view===null?null:Object.assign({},e.view),this}setViewOffset(e,t,i,r,s,o){this.view===null&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=t,this.view.offsetX=i,this.view.offsetY=r,this.view.width=s,this.view.height=o,this.updateProjectionMatrix()}clearViewOffset(){this.view!==null&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const e=(this.right-this.left)/(2*this.zoom),t=(this.top-this.bottom)/(2*this.zoom),i=(this.right+this.left)/2,r=(this.top+this.bottom)/2;let s=i-e,o=i+e,u=r+t,f=r-t;if(this.view!==null&&this.view.enabled){const p=(this.right-this.left)/this.view.fullWidth/this.zoom,m=(this.top-this.bottom)/this.view.fullHeight/this.zoom;s+=p*this.view.offsetX,o=s+p*this.view.width,u-=m*this.view.offsetY,f=u-m*this.view.height}this.projectionMatrix.makeOrthographic(s,o,u,f,this.near,this.far,this.coordinateSystem,this.reversedDepth),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(e){const t=super.toJSON(e);return t.object.zoom=this.zoom,t.object.left=this.left,t.object.right=this.right,t.object.top=this.top,t.object.bottom=this.bottom,t.object.near=this.near,t.object.far=this.far,this.view!==null&&(t.object.view=Object.assign({},this.view)),t}}class _j extends gT{constructor(){super(new If(-5,5,5,-5,.5,500)),this.isDirectionalLightShadow=!0}}class LO extends eh{constructor(e,t){super(e,t),this.isDirectionalLight=!0,this.type="DirectionalLight",this.position.copy(Zn.DEFAULT_UP),this.updateMatrix(),this.target=new Zn,this.shadow=new _j}dispose(){super.dispose(),this.shadow.dispose()}copy(e){return super.copy(e),this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}toJSON(e){const t=super.toJSON(e);return t.object.shadow=this.shadow.toJSON(),t.object.target=this.target.uuid,t}}class UO extends eh{constructor(e,t){super(e,t),this.isAmbientLight=!0,this.type="AmbientLight"}}class kO extends eh{constructor(e,t,i=10,r=10){super(e,t),this.isRectAreaLight=!0,this.type="RectAreaLight",this.width=i,this.height=r}get power(){return this.intensity*this.width*this.height*Math.PI}set power(e){this.intensity=e/(this.width*this.height*Math.PI)}copy(e){return super.copy(e),this.width=e.width,this.height=e.height,this}toJSON(e){const t=super.toJSON(e);return t.object.width=this.width,t.object.height=this.height,t}}class vT{constructor(){this.isSphericalHarmonics3=!0,this.coefficients=[];for(let e=0;e<9;e++)this.coefficients.push(new J)}set(e){for(let t=0;t<9;t++)this.coefficients[t].copy(e[t]);return this}zero(){for(let e=0;e<9;e++)this.coefficients[e].set(0,0,0);return this}getAt(e,t){const i=e.x,r=e.y,s=e.z,o=this.coefficients;return t.copy(o[0]).multiplyScalar(.282095),t.addScaledVector(o[1],.488603*r),t.addScaledVector(o[2],.488603*s),t.addScaledVector(o[3],.488603*i),t.addScaledVector(o[4],1.092548*(i*r)),t.addScaledVector(o[5],1.092548*(r*s)),t.addScaledVector(o[6],.315392*(3*s*s-1)),t.addScaledVector(o[7],1.092548*(i*s)),t.addScaledVector(o[8],.546274*(i*i-r*r)),t}getIrradianceAt(e,t){const i=e.x,r=e.y,s=e.z,o=this.coefficients;return t.copy(o[0]).multiplyScalar(.886227),t.addScaledVector(o[1],2*.511664*r),t.addScaledVector(o[2],2*.511664*s),t.addScaledVector(o[3],2*.511664*i),t.addScaledVector(o[4],2*.429043*i*r),t.addScaledVector(o[5],2*.429043*r*s),t.addScaledVector(o[6],.743125*s*s-.247708),t.addScaledVector(o[7],2*.429043*i*s),t.addScaledVector(o[8],.429043*(i*i-r*r)),t}add(e){for(let t=0;t<9;t++)this.coefficients[t].add(e.coefficients[t]);return this}addScaledSH(e,t){for(let i=0;i<9;i++)this.coefficients[i].addScaledVector(e.coefficients[i],t);return this}scale(e){for(let t=0;t<9;t++)this.coefficients[t].multiplyScalar(e);return this}lerp(e,t){for(let i=0;i<9;i++)this.coefficients[i].lerp(e.coefficients[i],t);return this}equals(e){for(let t=0;t<9;t++)if(!this.coefficients[t].equals(e.coefficients[t]))return!1;return!0}copy(e){return this.set(e.coefficients)}clone(){return new this.constructor().copy(this)}fromArray(e,t=0){const i=this.coefficients;for(let r=0;r<9;r++)i[r].fromArray(e,t+r*3);return this}toArray(e=[],t=0){const i=this.coefficients;for(let r=0;r<9;r++)i[r].toArray(e,t+r*3);return e}static getBasisAt(e,t){const i=e.x,r=e.y,s=e.z;t[0]=.282095,t[1]=.488603*r,t[2]=.488603*s,t[3]=.488603*i,t[4]=1.092548*i*r,t[5]=1.092548*r*s,t[6]=.315392*(3*s*s-1),t[7]=1.092548*i*s,t[8]=.546274*(i*i-r*r)}}class BO extends eh{constructor(e=new vT,t=1){super(void 0,t),this.isLightProbe=!0,this.sh=e}copy(e){return super.copy(e),this.sh.copy(e.sh),this}toJSON(e){const t=super.toJSON(e);return t.object.sh=this.sh.toArray(),t}}class gS extends js{constructor(e){super(e),this.textures={}}load(e,t,i,r){const s=this,o=new Ta(s.manager);o.setPath(s.path),o.setRequestHeader(s.requestHeader),o.setWithCredentials(s.withCredentials),o.load(e,function(u){try{t(s.parse(JSON.parse(u)))}catch(f){r?r(f):Xt(f),s.manager.itemError(e)}},i,r)}parse(e){const t=this.textures;function i(s){return t[s]===void 0&&At("MaterialLoader: Undefined texture",s),t[s]}const r=this.createMaterialFromType(e.type);if(e.uuid!==void 0&&(r.uuid=e.uuid),e.name!==void 0&&(r.name=e.name),e.color!==void 0&&r.color!==void 0&&r.color.setHex(e.color),e.roughness!==void 0&&(r.roughness=e.roughness),e.metalness!==void 0&&(r.metalness=e.metalness),e.sheen!==void 0&&(r.sheen=e.sheen),e.sheenColor!==void 0&&(r.sheenColor=new Ot().setHex(e.sheenColor)),e.sheenRoughness!==void 0&&(r.sheenRoughness=e.sheenRoughness),e.emissive!==void 0&&r.emissive!==void 0&&r.emissive.setHex(e.emissive),e.specular!==void 0&&r.specular!==void 0&&r.specular.setHex(e.specular),e.specularIntensity!==void 0&&(r.specularIntensity=e.specularIntensity),e.specularColor!==void 0&&r.specularColor!==void 0&&r.specularColor.setHex(e.specularColor),e.shininess!==void 0&&(r.shininess=e.shininess),e.clearcoat!==void 0&&(r.clearcoat=e.clearcoat),e.clearcoatRoughness!==void 0&&(r.clearcoatRoughness=e.clearcoatRoughness),e.dispersion!==void 0&&(r.dispersion=e.dispersion),e.iridescence!==void 0&&(r.iridescence=e.iridescence),e.iridescenceIOR!==void 0&&(r.iridescenceIOR=e.iridescenceIOR),e.iridescenceThicknessRange!==void 0&&(r.iridescenceThicknessRange=e.iridescenceThicknessRange),e.transmission!==void 0&&(r.transmission=e.transmission),e.thickness!==void 0&&(r.thickness=e.thickness),e.attenuationDistance!==void 0&&(r.attenuationDistance=e.attenuationDistance),e.attenuationColor!==void 0&&r.attenuationColor!==void 0&&r.attenuationColor.setHex(e.attenuationColor),e.anisotropy!==void 0&&(r.anisotropy=e.anisotropy),e.anisotropyRotation!==void 0&&(r.anisotropyRotation=e.anisotropyRotation),e.fog!==void 0&&(r.fog=e.fog),e.flatShading!==void 0&&(r.flatShading=e.flatShading),e.blending!==void 0&&(r.blending=e.blending),e.combine!==void 0&&(r.combine=e.combine),e.side!==void 0&&(r.side=e.side),e.shadowSide!==void 0&&(r.shadowSide=e.shadowSide),e.opacity!==void 0&&(r.opacity=e.opacity),e.transparent!==void 0&&(r.transparent=e.transparent),e.alphaTest!==void 0&&(r.alphaTest=e.alphaTest),e.alphaHash!==void 0&&(r.alphaHash=e.alphaHash),e.depthFunc!==void 0&&(r.depthFunc=e.depthFunc),e.depthTest!==void 0&&(r.depthTest=e.depthTest),e.depthWrite!==void 0&&(r.depthWrite=e.depthWrite),e.colorWrite!==void 0&&(r.colorWrite=e.colorWrite),e.blendSrc!==void 0&&(r.blendSrc=e.blendSrc),e.blendDst!==void 0&&(r.blendDst=e.blendDst),e.blendEquation!==void 0&&(r.blendEquation=e.blendEquation),e.blendSrcAlpha!==void 0&&(r.blendSrcAlpha=e.blendSrcAlpha),e.blendDstAlpha!==void 0&&(r.blendDstAlpha=e.blendDstAlpha),e.blendEquationAlpha!==void 0&&(r.blendEquationAlpha=e.blendEquationAlpha),e.blendColor!==void 0&&r.blendColor!==void 0&&r.blendColor.setHex(e.blendColor),e.blendAlpha!==void 0&&(r.blendAlpha=e.blendAlpha),e.stencilWriteMask!==void 0&&(r.stencilWriteMask=e.stencilWriteMask),e.stencilFunc!==void 0&&(r.stencilFunc=e.stencilFunc),e.stencilRef!==void 0&&(r.stencilRef=e.stencilRef),e.stencilFuncMask!==void 0&&(r.stencilFuncMask=e.stencilFuncMask),e.stencilFail!==void 0&&(r.stencilFail=e.stencilFail),e.stencilZFail!==void 0&&(r.stencilZFail=e.stencilZFail),e.stencilZPass!==void 0&&(r.stencilZPass=e.stencilZPass),e.stencilWrite!==void 0&&(r.stencilWrite=e.stencilWrite),e.wireframe!==void 0&&(r.wireframe=e.wireframe),e.wireframeLinewidth!==void 0&&(r.wireframeLinewidth=e.wireframeLinewidth),e.wireframeLinecap!==void 0&&(r.wireframeLinecap=e.wireframeLinecap),e.wireframeLinejoin!==void 0&&(r.wireframeLinejoin=e.wireframeLinejoin),e.rotation!==void 0&&(r.rotation=e.rotation),e.linewidth!==void 0&&(r.linewidth=e.linewidth),e.dashSize!==void 0&&(r.dashSize=e.dashSize),e.gapSize!==void 0&&(r.gapSize=e.gapSize),e.scale!==void 0&&(r.scale=e.scale),e.polygonOffset!==void 0&&(r.polygonOffset=e.polygonOffset),e.polygonOffsetFactor!==void 0&&(r.polygonOffsetFactor=e.polygonOffsetFactor),e.polygonOffsetUnits!==void 0&&(r.polygonOffsetUnits=e.polygonOffsetUnits),e.dithering!==void 0&&(r.dithering=e.dithering),e.alphaToCoverage!==void 0&&(r.alphaToCoverage=e.alphaToCoverage),e.premultipliedAlpha!==void 0&&(r.premultipliedAlpha=e.premultipliedAlpha),e.forceSinglePass!==void 0&&(r.forceSinglePass=e.forceSinglePass),e.allowOverride!==void 0&&(r.allowOverride=e.allowOverride),e.visible!==void 0&&(r.visible=e.visible),e.toneMapped!==void 0&&(r.toneMapped=e.toneMapped),e.userData!==void 0&&(r.userData=e.userData),e.vertexColors!==void 0&&(typeof e.vertexColors=="number"?r.vertexColors=e.vertexColors>0:r.vertexColors=e.vertexColors),e.uniforms!==void 0)for(const s in e.uniforms){const o=e.uniforms[s];switch(r.uniforms[s]={},o.type){case"t":r.uniforms[s].value=i(o.value);break;case"c":r.uniforms[s].value=new Ot().setHex(o.value);break;case"v2":r.uniforms[s].value=new Ye().fromArray(o.value);break;case"v3":r.uniforms[s].value=new J().fromArray(o.value);break;case"v4":r.uniforms[s].value=new mi().fromArray(o.value);break;case"m3":r.uniforms[s].value=new xn().fromArray(o.value);break;case"m4":r.uniforms[s].value=new un().fromArray(o.value);break;default:r.uniforms[s].value=o.value}}if(e.defines!==void 0&&(r.defines=e.defines),e.vertexShader!==void 0&&(r.vertexShader=e.vertexShader),e.fragmentShader!==void 0&&(r.fragmentShader=e.fragmentShader),e.glslVersion!==void 0&&(r.glslVersion=e.glslVersion),e.extensions!==void 0)for(const s in e.extensions)r.extensions[s]=e.extensions[s];if(e.lights!==void 0&&(r.lights=e.lights),e.clipping!==void 0&&(r.clipping=e.clipping),e.size!==void 0&&(r.size=e.size),e.sizeAttenuation!==void 0&&(r.sizeAttenuation=e.sizeAttenuation),e.map!==void 0&&(r.map=i(e.map)),e.matcap!==void 0&&(r.matcap=i(e.matcap)),e.alphaMap!==void 0&&(r.alphaMap=i(e.alphaMap)),e.bumpMap!==void 0&&(r.bumpMap=i(e.bumpMap)),e.bumpScale!==void 0&&(r.bumpScale=e.bumpScale),e.normalMap!==void 0&&(r.normalMap=i(e.normalMap)),e.normalMapType!==void 0&&(r.normalMapType=e.normalMapType),e.normalScale!==void 0){let s=e.normalScale;Array.isArray(s)===!1&&(s=[s,s]),r.normalScale=new Ye().fromArray(s)}return e.displacementMap!==void 0&&(r.displacementMap=i(e.displacementMap)),e.displacementScale!==void 0&&(r.displacementScale=e.displacementScale),e.displacementBias!==void 0&&(r.displacementBias=e.displacementBias),e.roughnessMap!==void 0&&(r.roughnessMap=i(e.roughnessMap)),e.metalnessMap!==void 0&&(r.metalnessMap=i(e.metalnessMap)),e.emissiveMap!==void 0&&(r.emissiveMap=i(e.emissiveMap)),e.emissiveIntensity!==void 0&&(r.emissiveIntensity=e.emissiveIntensity),e.specularMap!==void 0&&(r.specularMap=i(e.specularMap)),e.specularIntensityMap!==void 0&&(r.specularIntensityMap=i(e.specularIntensityMap)),e.specularColorMap!==void 0&&(r.specularColorMap=i(e.specularColorMap)),e.envMap!==void 0&&(r.envMap=i(e.envMap)),e.envMapRotation!==void 0&&r.envMapRotation.fromArray(e.envMapRotation),e.envMapIntensity!==void 0&&(r.envMapIntensity=e.envMapIntensity),e.reflectivity!==void 0&&(r.reflectivity=e.reflectivity),e.refractionRatio!==void 0&&(r.refractionRatio=e.refractionRatio),e.lightMap!==void 0&&(r.lightMap=i(e.lightMap)),e.lightMapIntensity!==void 0&&(r.lightMapIntensity=e.lightMapIntensity),e.aoMap!==void 0&&(r.aoMap=i(e.aoMap)),e.aoMapIntensity!==void 0&&(r.aoMapIntensity=e.aoMapIntensity),e.gradientMap!==void 0&&(r.gradientMap=i(e.gradientMap)),e.clearcoatMap!==void 0&&(r.clearcoatMap=i(e.clearcoatMap)),e.clearcoatRoughnessMap!==void 0&&(r.clearcoatRoughnessMap=i(e.clearcoatRoughnessMap)),e.clearcoatNormalMap!==void 0&&(r.clearcoatNormalMap=i(e.clearcoatNormalMap)),e.clearcoatNormalScale!==void 0&&(r.clearcoatNormalScale=new Ye().fromArray(e.clearcoatNormalScale)),e.iridescenceMap!==void 0&&(r.iridescenceMap=i(e.iridescenceMap)),e.iridescenceThicknessMap!==void 0&&(r.iridescenceThicknessMap=i(e.iridescenceThicknessMap)),e.transmissionMap!==void 0&&(r.transmissionMap=i(e.transmissionMap)),e.thicknessMap!==void 0&&(r.thicknessMap=i(e.thicknessMap)),e.anisotropyMap!==void 0&&(r.anisotropyMap=i(e.anisotropyMap)),e.sheenColorMap!==void 0&&(r.sheenColorMap=i(e.sheenColorMap)),e.sheenRoughnessMap!==void 0&&(r.sheenRoughnessMap=i(e.sheenRoughnessMap)),r}setTextures(e){return this.textures=e,this}createMaterialFromType(e){return gS.createMaterialFromType(e)}static createMaterialFromType(e){const t={ShadowMaterial:_O,SpriteMaterial:JE,RawShaderMaterial:lT,ShaderMaterial:Ss,PointsMaterial:eT,MeshPhysicalMaterial:xO,MeshStandardMaterial:cT,MeshPhongMaterial:bO,MeshToonMaterial:SO,MeshNormalMaterial:wO,MeshLambertMaterial:MO,MeshDepthMaterial:uT,MeshDistanceMaterial:hT,MeshBasicMaterial:Lc,MeshMatcapMaterial:EO,LineDashedMaterial:TO,LineBasicMaterial:Gs,Material:ws};return new t[e]}}class PM{static extractUrlBase(e){const t=e.lastIndexOf("/");return t===-1?"./":e.slice(0,t+1)}static resolveURL(e,t){return typeof e!="string"||e===""?"":(/^https?:\/\//i.test(t)&&/^\//.test(e)&&(t=t.replace(/(^https?:\/\/[^\/]+).*/i,"$1")),/^(https?:)?\/\//i.test(e)||/^data:.*,.*$/i.test(e)||/^blob:.*$/i.test(e)?e:t+e)}}class zO extends vn{constructor(){super(),this.isInstancedBufferGeometry=!0,this.type="InstancedBufferGeometry",this.instanceCount=1/0}copy(e){return super.copy(e),this.instanceCount=e.instanceCount,this}toJSON(){const e=super.toJSON();return e.instanceCount=this.instanceCount,e.isInstancedBufferGeometry=!0,e}}class FO extends js{constructor(e){super(e)}load(e,t,i,r){const s=this,o=new Ta(s.manager);o.setPath(s.path),o.setRequestHeader(s.requestHeader),o.setWithCredentials(s.withCredentials),o.load(e,function(u){try{t(s.parse(JSON.parse(u)))}catch(f){r?r(f):Xt(f),s.manager.itemError(e)}},i,r)}parse(e){const t={},i={};function r(x,S){if(t[S]!==void 0)return t[S];const E=x.interleavedBuffers[S],M=s(x,E.buffer),C=Mp(E.type,M),N=new Qb(C,E.stride);return N.uuid=E.uuid,t[S]=N,N}function s(x,S){if(i[S]!==void 0)return i[S];const E=x.arrayBuffers[S],M=new Uint32Array(E).buffer;return i[S]=M,M}const o=e.isInstancedBufferGeometry?new zO:new vn,u=e.data.index;if(u!==void 0){const x=Mp(u.type,u.array);o.setIndex(new fi(x,1))}const f=e.data.attributes;for(const x in f){const S=f[x];let A;if(S.isInterleavedBufferAttribute){const E=r(e.data,S.data);A=new Ef(E,S.itemSize,S.offset,S.normalized)}else{const E=Mp(S.type,S.array),M=S.isInstancedBufferAttribute?Vp:fi;A=new M(E,S.itemSize,S.normalized)}S.name!==void 0&&(A.name=S.name),S.usage!==void 0&&A.setUsage(S.usage),o.setAttribute(x,A)}const p=e.data.morphAttributes;if(p)for(const x in p){const S=p[x],A=[];for(let E=0,M=S.length;E<M;E++){const C=S[E];let N;if(C.isInterleavedBufferAttribute){const I=r(e.data,C.data);N=new Ef(I,C.itemSize,C.offset,C.normalized)}else{const I=Mp(C.type,C.array);N=new fi(I,C.itemSize,C.normalized)}C.name!==void 0&&(N.name=C.name),A.push(N)}o.morphAttributes[x]=A}e.data.morphTargetsRelative&&(o.morphTargetsRelative=!0);const v=e.data.groups||e.data.drawcalls||e.data.offsets;if(v!==void 0)for(let x=0,S=v.length;x!==S;++x){const A=v[x];o.addGroup(A.start,A.count,A.materialIndex)}const _=e.data.boundingSphere;return _!==void 0&&(o.boundingSphere=new ss().fromJSON(_)),e.name&&(o.name=e.name),e.userData&&(o.userData=e.userData),o}}class xj extends js{constructor(e){super(e)}load(e,t,i,r){const s=this,o=this.path===""?PM.extractUrlBase(e):this.path;this.resourcePath=this.resourcePath||o;const u=new Ta(this.manager);u.setPath(this.path),u.setRequestHeader(this.requestHeader),u.setWithCredentials(this.withCredentials),u.load(e,function(f){let p=null;try{p=JSON.parse(f)}catch(v){r!==void 0&&r(v),v("ObjectLoader: Can't parse "+e+".",v.message);return}const m=p.metadata;if(m===void 0||m.type===void 0||m.type.toLowerCase()==="geometry"){r!==void 0&&r(new Error("THREE.ObjectLoader: Can't load "+e)),Xt("ObjectLoader: Can't load "+e);return}s.parse(p,t)},i,r)}async loadAsync(e,t){const i=this,r=this.path===""?PM.extractUrlBase(e):this.path;this.resourcePath=this.resourcePath||r;const s=new Ta(this.manager);s.setPath(this.path),s.setRequestHeader(this.requestHeader),s.setWithCredentials(this.withCredentials);const o=await s.loadAsync(e,t),u=JSON.parse(o),f=u.metadata;if(f===void 0||f.type===void 0||f.type.toLowerCase()==="geometry")throw new Error("THREE.ObjectLoader: Can't load "+e);return await i.parseAsync(u)}parse(e,t){const i=this.parseAnimations(e.animations),r=this.parseShapes(e.shapes),s=this.parseGeometries(e.geometries,r),o=this.parseImages(e.images,function(){t!==void 0&&t(p)}),u=this.parseTextures(e.textures,o),f=this.parseMaterials(e.materials,u),p=this.parseObject(e.object,s,f,u,i),m=this.parseSkeletons(e.skeletons,p);if(this.bindSkeletons(p,m),this.bindLightTargets(p),t!==void 0){let v=!1;for(const _ in o)if(o[_].data instanceof HTMLImageElement){v=!0;break}v===!1&&t(p)}return p}async parseAsync(e){const t=this.parseAnimations(e.animations),i=this.parseShapes(e.shapes),r=this.parseGeometries(e.geometries,i),s=await this.parseImagesAsync(e.images),o=this.parseTextures(e.textures,s),u=this.parseMaterials(e.materials,o),f=this.parseObject(e.object,r,u,o,t),p=this.parseSkeletons(e.skeletons,f);return this.bindSkeletons(f,p),this.bindLightTargets(f),f}parseShapes(e){const t={};if(e!==void 0)for(let i=0,r=e.length;i<r;i++){const s=new Sf().fromJSON(e[i]);t[s.uuid]=s}return t}parseSkeletons(e,t){const i={},r={};if(t.traverse(function(s){s.isBone&&(r[s.uuid]=s)}),e!==void 0)for(let s=0,o=e.length;s<o;s++){const u=new eS().fromJSON(e[s],r);i[u.uuid]=u}return i}parseGeometries(e,t){const i={};if(e!==void 0){const r=new FO;for(let s=0,o=e.length;s<o;s++){let u;const f=e[s];switch(f.type){case"BufferGeometry":case"InstancedBufferGeometry":u=r.parse(f);break;default:f.type in x3?u=x3[f.type].fromJSON(f,t):At(`ObjectLoader: Unsupported geometry type "${f.type}"`)}u.uuid=f.uuid,f.name!==void 0&&(u.name=f.name),f.userData!==void 0&&(u.userData=f.userData),i[f.uuid]=u}}return i}parseMaterials(e,t){const i={},r={};if(e!==void 0){const s=new gS;s.setTextures(t);for(let o=0,u=e.length;o<u;o++){const f=e[o];i[f.uuid]===void 0&&(i[f.uuid]=s.parse(f)),r[f.uuid]=i[f.uuid]}}return r}parseAnimations(e){const t={};if(e!==void 0)for(let i=0;i<e.length;i++){const r=e[i],s=j0.parse(r);t[s.uuid]=s}return t}parseImages(e,t){const i=this,r={};let s;function o(f){return i.manager.itemStart(f),s.load(f,function(){i.manager.itemEnd(f)},void 0,function(){i.manager.itemError(f),i.manager.itemEnd(f)})}function u(f){if(typeof f=="string"){const p=f,m=/^(\/\/)|([a-z]+:(\/\/)?)/i.test(p)?p:i.resourcePath+p;return o(m)}else return f.data?{data:Mp(f.type,f.data),width:f.width,height:f.height}:null}if(e!==void 0&&e.length>0){const f=new mS(t);s=new W0(f),s.setCrossOrigin(this.crossOrigin);for(let p=0,m=e.length;p<m;p++){const v=e[p],_=v.url;if(Array.isArray(_)){const x=[];for(let S=0,A=_.length;S<A;S++){const E=_[S],M=u(E);M!==null&&(M instanceof HTMLImageElement?x.push(M):x.push(new co(M.data,M.width,M.height)))}r[v.uuid]=new Vu(x)}else{const x=u(v.url);r[v.uuid]=new Vu(x)}}}return r}async parseImagesAsync(e){const t=this,i={};let r;async function s(o){if(typeof o=="string"){const u=o,f=/^(\/\/)|([a-z]+:(\/\/)?)/i.test(u)?u:t.resourcePath+u;return await r.loadAsync(f)}else return o.data?{data:Mp(o.type,o.data),width:o.width,height:o.height}:null}if(e!==void 0&&e.length>0){r=new W0(this.manager),r.setCrossOrigin(this.crossOrigin);for(let o=0,u=e.length;o<u;o++){const f=e[o],p=f.url;if(Array.isArray(p)){const m=[];for(let v=0,_=p.length;v<_;v++){const x=p[v],S=await s(x);S!==null&&(S instanceof HTMLImageElement?m.push(S):m.push(new co(S.data,S.width,S.height)))}i[f.uuid]=new Vu(m)}else{const m=await s(f.url);i[f.uuid]=new Vu(m)}}}return i}parseTextures(e,t){function i(s,o){return typeof s=="number"?s:(At("ObjectLoader.parseTexture: Constant should be in numeric form.",s),o[s])}const r={};if(e!==void 0)for(let s=0,o=e.length;s<o;s++){const u=e[s];u.image===void 0&&At('ObjectLoader: No "image" specified for',u.uuid),t[u.image]===void 0&&At("ObjectLoader: Undefined image",u.image);const f=t[u.image],p=f.data;let m;Array.isArray(p)?(m=new lv,p.length===6&&(m.needsUpdate=!0)):(p&&p.data?m=new co:m=new hi,p&&(m.needsUpdate=!0)),m.source=f,m.uuid=u.uuid,u.name!==void 0&&(m.name=u.name),u.mapping!==void 0&&(m.mapping=i(u.mapping,bj)),u.channel!==void 0&&(m.channel=u.channel),u.offset!==void 0&&m.offset.fromArray(u.offset),u.repeat!==void 0&&m.repeat.fromArray(u.repeat),u.center!==void 0&&m.center.fromArray(u.center),u.rotation!==void 0&&(m.rotation=u.rotation),u.wrap!==void 0&&(m.wrapS=i(u.wrap[0],w3),m.wrapT=i(u.wrap[1],w3)),u.format!==void 0&&(m.format=u.format),u.internalFormat!==void 0&&(m.internalFormat=u.internalFormat),u.type!==void 0&&(m.type=u.type),u.colorSpace!==void 0&&(m.colorSpace=u.colorSpace),u.minFilter!==void 0&&(m.minFilter=i(u.minFilter,M3)),u.magFilter!==void 0&&(m.magFilter=i(u.magFilter,M3)),u.anisotropy!==void 0&&(m.anisotropy=u.anisotropy),u.flipY!==void 0&&(m.flipY=u.flipY),u.generateMipmaps!==void 0&&(m.generateMipmaps=u.generateMipmaps),u.premultiplyAlpha!==void 0&&(m.premultiplyAlpha=u.premultiplyAlpha),u.unpackAlignment!==void 0&&(m.unpackAlignment=u.unpackAlignment),u.compareFunction!==void 0&&(m.compareFunction=u.compareFunction),u.userData!==void 0&&(m.userData=u.userData),r[u.uuid]=m}return r}parseObject(e,t,i,r,s){let o;function u(_){return t[_]===void 0&&At("ObjectLoader: Undefined geometry",_),t[_]}function f(_){if(_!==void 0){if(Array.isArray(_)){const x=[];for(let S=0,A=_.length;S<A;S++){const E=_[S];i[E]===void 0&&At("ObjectLoader: Undefined material",E),x.push(i[E])}return x}return i[_]===void 0&&At("ObjectLoader: Undefined material",_),i[_]}}function p(_){return r[_]===void 0&&At("ObjectLoader: Undefined texture",_),r[_]}let m,v;switch(e.type){case"Scene":o=new cv,e.background!==void 0&&(Number.isInteger(e.background)?o.background=new Ot(e.background):o.background=p(e.background)),e.environment!==void 0&&(o.environment=p(e.environment)),e.fog!==void 0&&(e.fog.type==="Fog"?o.fog=new Jb(e.fog.color,e.fog.near,e.fog.far):e.fog.type==="FogExp2"&&(o.fog=new Kb(e.fog.color,e.fog.density)),e.fog.name!==""&&(o.fog.name=e.fog.name)),e.backgroundBlurriness!==void 0&&(o.backgroundBlurriness=e.backgroundBlurriness),e.backgroundIntensity!==void 0&&(o.backgroundIntensity=e.backgroundIntensity),e.backgroundRotation!==void 0&&o.backgroundRotation.fromArray(e.backgroundRotation),e.environmentIntensity!==void 0&&(o.environmentIntensity=e.environmentIntensity),e.environmentRotation!==void 0&&o.environmentRotation.fromArray(e.environmentRotation);break;case"PerspectiveCamera":o=new Hr(e.fov,e.aspect,e.near,e.far),e.focus!==void 0&&(o.focus=e.focus),e.zoom!==void 0&&(o.zoom=e.zoom),e.filmGauge!==void 0&&(o.filmGauge=e.filmGauge),e.filmOffset!==void 0&&(o.filmOffset=e.filmOffset),e.view!==void 0&&(o.view=Object.assign({},e.view));break;case"OrthographicCamera":o=new If(e.left,e.right,e.top,e.bottom,e.near,e.far),e.zoom!==void 0&&(o.zoom=e.zoom),e.view!==void 0&&(o.view=Object.assign({},e.view));break;case"AmbientLight":o=new UO(e.color,e.intensity);break;case"DirectionalLight":o=new LO(e.color,e.intensity),o.target=e.target||"";break;case"PointLight":o=new OO(e.color,e.intensity,e.distance,e.decay);break;case"RectAreaLight":o=new kO(e.color,e.intensity,e.width,e.height);break;case"SpotLight":o=new PO(e.color,e.intensity,e.distance,e.angle,e.penumbra,e.decay),o.target=e.target||"";break;case"HemisphereLight":o=new IO(e.color,e.groundColor,e.intensity);break;case"LightProbe":const _=new vT().fromArray(e.sh);o=new BO(_,e.intensity);break;case"SkinnedMesh":m=u(e.geometry),v=f(e.material),o=new tO(m,v),e.bindMode!==void 0&&(o.bindMode=e.bindMode),e.bindMatrix!==void 0&&o.bindMatrix.fromArray(e.bindMatrix),e.skeleton!==void 0&&(o.skeleton=e.skeleton);break;case"Mesh":m=u(e.geometry),v=f(e.material),o=new Xi(m,v);break;case"InstancedMesh":m=u(e.geometry),v=f(e.material);const x=e.count,S=e.instanceMatrix,A=e.instanceColor;o=new nO(m,v,x),o.instanceMatrix=new Vp(new Float32Array(S.array),16),A!==void 0&&(o.instanceColor=new Vp(new Float32Array(A.array),A.itemSize));break;case"BatchedMesh":m=u(e.geometry),v=f(e.material),o=new iO(e.maxInstanceCount,e.maxVertexCount,e.maxIndexCount,v),o.geometry=m,o.perObjectFrustumCulled=e.perObjectFrustumCulled,o.sortObjects=e.sortObjects,o._drawRanges=e.drawRanges,o._reservedRanges=e.reservedRanges,o._geometryInfo=e.geometryInfo.map(E=>{let M=null,C=null;return E.boundingBox!==void 0&&(M=new bs().fromJSON(E.boundingBox)),E.boundingSphere!==void 0&&(C=new ss().fromJSON(E.boundingSphere)),{...E,boundingBox:M,boundingSphere:C}}),o._instanceInfo=e.instanceInfo,o._availableInstanceIds=e._availableInstanceIds,o._availableGeometryIds=e._availableGeometryIds,o._nextIndexStart=e.nextIndexStart,o._nextVertexStart=e.nextVertexStart,o._geometryCount=e.geometryCount,o._maxInstanceCount=e.maxInstanceCount,o._maxVertexCount=e.maxVertexCount,o._maxIndexCount=e.maxIndexCount,o._geometryInitialized=e.geometryInitialized,o._matricesTexture=p(e.matricesTexture.uuid),o._indirectTexture=p(e.indirectTexture.uuid),e.colorsTexture!==void 0&&(o._colorsTexture=p(e.colorsTexture.uuid)),e.boundingSphere!==void 0&&(o.boundingSphere=new ss().fromJSON(e.boundingSphere)),e.boundingBox!==void 0&&(o.boundingBox=new bs().fromJSON(e.boundingBox));break;case"LOD":o=new eO;break;case"Line":o=new Yu(u(e.geometry),f(e.material));break;case"LineLoop":o=new rO(u(e.geometry),f(e.material));break;case"LineSegments":o=new Vl(u(e.geometry),f(e.material));break;case"PointCloud":case"Points":o=new sO(u(e.geometry),f(e.material));break;case"Sprite":o=new QP(f(e.material));break;case"Group":o=new Ep;break;case"Bone":o=new QE;break;default:o=new Zn}if(o.uuid=e.uuid,e.name!==void 0&&(o.name=e.name),e.matrix!==void 0?(o.matrix.fromArray(e.matrix),e.matrixAutoUpdate!==void 0&&(o.matrixAutoUpdate=e.matrixAutoUpdate),o.matrixAutoUpdate&&o.matrix.decompose(o.position,o.quaternion,o.scale)):(e.position!==void 0&&o.position.fromArray(e.position),e.rotation!==void 0&&o.rotation.fromArray(e.rotation),e.quaternion!==void 0&&o.quaternion.fromArray(e.quaternion),e.scale!==void 0&&o.scale.fromArray(e.scale)),e.up!==void 0&&o.up.fromArray(e.up),e.castShadow!==void 0&&(o.castShadow=e.castShadow),e.receiveShadow!==void 0&&(o.receiveShadow=e.receiveShadow),e.shadow&&(e.shadow.intensity!==void 0&&(o.shadow.intensity=e.shadow.intensity),e.shadow.bias!==void 0&&(o.shadow.bias=e.shadow.bias),e.shadow.normalBias!==void 0&&(o.shadow.normalBias=e.shadow.normalBias),e.shadow.radius!==void 0&&(o.shadow.radius=e.shadow.radius),e.shadow.mapSize!==void 0&&o.shadow.mapSize.fromArray(e.shadow.mapSize),e.shadow.camera!==void 0&&(o.shadow.camera=this.parseObject(e.shadow.camera))),e.visible!==void 0&&(o.visible=e.visible),e.frustumCulled!==void 0&&(o.frustumCulled=e.frustumCulled),e.renderOrder!==void 0&&(o.renderOrder=e.renderOrder),e.userData!==void 0&&(o.userData=e.userData),e.layers!==void 0&&(o.layers.mask=e.layers),e.children!==void 0){const _=e.children;for(let x=0;x<_.length;x++)o.add(this.parseObject(_[x],t,i,r,s))}if(e.animations!==void 0){const _=e.animations;for(let x=0;x<_.length;x++){const S=_[x];o.animations.push(s[S])}}if(e.type==="LOD"){e.autoUpdate!==void 0&&(o.autoUpdate=e.autoUpdate);const _=e.levels;for(let x=0;x<_.length;x++){const S=_[x],A=o.getObjectByProperty("uuid",S.object);A!==void 0&&o.addLevel(A,S.distance,S.hysteresis)}}return o}bindSkeletons(e,t){Object.keys(t).length!==0&&e.traverse(function(i){if(i.isSkinnedMesh===!0&&i.skeleton!==void 0){const r=t[i.skeleton];r===void 0?At("ObjectLoader: No skeleton found with UUID:",i.skeleton):i.bind(r,i.bindMatrix)}})}bindLightTargets(e){e.traverse(function(t){if(t.isDirectionalLight||t.isSpotLight){const i=t.target,r=e.getObjectByProperty("uuid",i);r!==void 0?t.target=r:t.target=new Zn}})}}const bj={UVMapping:qu,CubeReflectionMapping:$o,CubeRefractionMapping:Xu,EquirectangularReflectionMapping:Pp,EquirectangularRefractionMapping:N0,CubeUVReflectionMapping:Jp},w3={RepeatWrapping:D0,ClampToEdgeWrapping:nr,MirroredRepeatWrapping:I0},M3={NearestFilter:dr,NearestMipmapNearestFilter:HE,NearestMipmapLinearFilter:wp,LinearFilter:Wn,LinearMipmapNearestFilter:o0,LinearMipmapLinearFilter:Il},mw=new WeakMap;class Sj extends js{constructor(e){super(e),this.isImageBitmapLoader=!0,typeof createImageBitmap>"u"&&At("ImageBitmapLoader: createImageBitmap() not supported."),typeof fetch>"u"&&At("ImageBitmapLoader: fetch() not supported."),this.options={premultiplyAlpha:"none"},this._abortController=new AbortController}setOptions(e){return this.options=e,this}load(e,t,i,r){e===void 0&&(e=""),this.path!==void 0&&(e=this.path+e),e=this.manager.resolveURL(e);const s=this,o=Pl.get(`image-bitmap:${e}`);if(o!==void 0){if(s.manager.itemStart(e),o.then){o.then(p=>{if(mw.has(o)===!0)r&&r(mw.get(o)),s.manager.itemError(e),s.manager.itemEnd(e);else return t&&t(p),s.manager.itemEnd(e),p});return}return setTimeout(function(){t&&t(o),s.manager.itemEnd(e)},0),o}const u={};u.credentials=this.crossOrigin==="anonymous"?"same-origin":"include",u.headers=this.requestHeader,u.signal=typeof AbortSignal.any=="function"?AbortSignal.any([this._abortController.signal,this.manager.abortController.signal]):this._abortController.signal;const f=fetch(e,u).then(function(p){return p.blob()}).then(function(p){return createImageBitmap(p,Object.assign(s.options,{colorSpaceConversion:"none"}))}).then(function(p){return Pl.add(`image-bitmap:${e}`,p),t&&t(p),s.manager.itemEnd(e),p}).catch(function(p){r&&r(p),mw.set(f,p),Pl.remove(`image-bitmap:${e}`),s.manager.itemError(e),s.manager.itemEnd(e)});Pl.add(`image-bitmap:${e}`,f),s.manager.itemStart(e)}abort(){return this._abortController.abort(),this._abortController=new AbortController,this}}let X_;class yT{static getContext(){return X_===void 0&&(X_=new(window.AudioContext||window.webkitAudioContext)),X_}static setContext(e){X_=e}}class wj extends js{constructor(e){super(e)}load(e,t,i,r){const s=this,o=new Ta(this.manager);o.setResponseType("arraybuffer"),o.setPath(this.path),o.setRequestHeader(this.requestHeader),o.setWithCredentials(this.withCredentials),o.load(e,function(f){try{const p=f.slice(0);yT.getContext().decodeAudioData(p,function(v){t(v)}).catch(u)}catch(p){u(p)}},i,r);function u(f){r?r(f):Xt(f),s.manager.itemError(e)}}}const E3=new un,T3=new un,Yh=new un;class Mj{constructor(){this.type="StereoCamera",this.aspect=1,this.eyeSep=.064,this.cameraL=new Hr,this.cameraL.layers.enable(1),this.cameraL.matrixAutoUpdate=!1,this.cameraR=new Hr,this.cameraR.layers.enable(2),this.cameraR.matrixAutoUpdate=!1,this._cache={focus:null,fov:null,aspect:null,near:null,far:null,zoom:null,eyeSep:null}}update(e){const t=this._cache;if(t.focus!==e.focus||t.fov!==e.fov||t.aspect!==e.aspect*this.aspect||t.near!==e.near||t.far!==e.far||t.zoom!==e.zoom||t.eyeSep!==this.eyeSep){t.focus=e.focus,t.fov=e.fov,t.aspect=e.aspect*this.aspect,t.near=e.near,t.far=e.far,t.zoom=e.zoom,t.eyeSep=this.eyeSep,Yh.copy(e.projectionMatrix);const r=t.eyeSep/2,s=r*t.near/t.focus,o=t.near*Math.tan(bf*t.fov*.5)/t.zoom;let u,f;T3.elements[12]=-r,E3.elements[12]=r,u=-o*t.aspect+s,f=o*t.aspect+s,Yh.elements[0]=2*t.near/(f-u),Yh.elements[8]=(f+u)/(f-u),this.cameraL.projectionMatrix.copy(Yh),u=-o*t.aspect-s,f=o*t.aspect-s,Yh.elements[0]=2*t.near/(f-u),Yh.elements[8]=(f+u)/(f-u),this.cameraR.projectionMatrix.copy(Yh)}this.cameraL.matrixWorld.copy(e.matrixWorld).multiply(T3),this.cameraR.matrixWorld.copy(e.matrixWorld).multiply(E3)}}class VO extends Hr{constructor(e=[]){super(),this.isArrayCamera=!0,this.isMultiViewCamera=!1,this.cameras=e}}class _T{constructor(e=!0){this.autoStart=e,this.startTime=0,this.oldTime=0,this.elapsedTime=0,this.running=!1}start(){this.startTime=performance.now(),this.oldTime=this.startTime,this.elapsedTime=0,this.running=!0}stop(){this.getElapsedTime(),this.running=!1,this.autoStart=!1}getElapsedTime(){return this.getDelta(),this.elapsedTime}getDelta(){let e=0;if(this.autoStart&&!this.running)return this.start(),0;if(this.running){const t=performance.now();e=(t-this.oldTime)/1e3,this.oldTime=t,this.elapsedTime+=e}return e}}const Zh=new J,gw=new pa,Ej=new J,Kh=new J,Jh=new J;class Tj extends Zn{constructor(){super(),this.type="AudioListener",this.context=yT.getContext(),this.gain=this.context.createGain(),this.gain.connect(this.context.destination),this.filter=null,this.timeDelta=0,this._clock=new _T}getInput(){return this.gain}removeFilter(){return this.filter!==null&&(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination),this.gain.connect(this.context.destination),this.filter=null),this}getFilter(){return this.filter}setFilter(e){return this.filter!==null?(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination)):this.gain.disconnect(this.context.destination),this.filter=e,this.gain.connect(this.filter),this.filter.connect(this.context.destination),this}getMasterVolume(){return this.gain.gain.value}setMasterVolume(e){return this.gain.gain.setTargetAtTime(e,this.context.currentTime,.01),this}updateMatrixWorld(e){super.updateMatrixWorld(e);const t=this.context.listener;if(this.timeDelta=this._clock.getDelta(),this.matrixWorld.decompose(Zh,gw,Ej),Kh.set(0,0,-1).applyQuaternion(gw),Jh.set(0,1,0).applyQuaternion(gw),t.positionX){const i=this.context.currentTime+this.timeDelta;t.positionX.linearRampToValueAtTime(Zh.x,i),t.positionY.linearRampToValueAtTime(Zh.y,i),t.positionZ.linearRampToValueAtTime(Zh.z,i),t.forwardX.linearRampToValueAtTime(Kh.x,i),t.forwardY.linearRampToValueAtTime(Kh.y,i),t.forwardZ.linearRampToValueAtTime(Kh.z,i),t.upX.linearRampToValueAtTime(Jh.x,i),t.upY.linearRampToValueAtTime(Jh.y,i),t.upZ.linearRampToValueAtTime(Jh.z,i)}else t.setPosition(Zh.x,Zh.y,Zh.z),t.setOrientation(Kh.x,Kh.y,Kh.z,Jh.x,Jh.y,Jh.z)}}class HO extends Zn{constructor(e){super(),this.type="Audio",this.listener=e,this.context=e.context,this.gain=this.context.createGain(),this.gain.connect(e.getInput()),this.autoplay=!1,this.buffer=null,this.detune=0,this.loop=!1,this.loopStart=0,this.loopEnd=0,this.offset=0,this.duration=void 0,this.playbackRate=1,this.isPlaying=!1,this.hasPlaybackControl=!0,this.source=null,this.sourceType="empty",this._startedAt=0,this._progress=0,this._connected=!1,this.filters=[]}getOutput(){return this.gain}setNodeSource(e){return this.hasPlaybackControl=!1,this.sourceType="audioNode",this.source=e,this.connect(),this}setMediaElementSource(e){return this.hasPlaybackControl=!1,this.sourceType="mediaNode",this.source=this.context.createMediaElementSource(e),this.connect(),this}setMediaStreamSource(e){return this.hasPlaybackControl=!1,this.sourceType="mediaStreamNode",this.source=this.context.createMediaStreamSource(e),this.connect(),this}setBuffer(e){return this.buffer=e,this.sourceType="buffer",this.autoplay&&this.play(),this}play(e=0){if(this.isPlaying===!0){At("Audio: Audio is already playing.");return}if(this.hasPlaybackControl===!1){At("Audio: this Audio has no playback control.");return}this._startedAt=this.context.currentTime+e;const t=this.context.createBufferSource();return t.buffer=this.buffer,t.loop=this.loop,t.loopStart=this.loopStart,t.loopEnd=this.loopEnd,t.onended=this.onEnded.bind(this),t.start(this._startedAt,this._progress+this.offset,this.duration),this.isPlaying=!0,this.source=t,this.setDetune(this.detune),this.setPlaybackRate(this.playbackRate),this.connect()}pause(){if(this.hasPlaybackControl===!1){At("Audio: this Audio has no playback control.");return}return this.isPlaying===!0&&(this._progress+=Math.max(this.context.currentTime-this._startedAt,0)*this.playbackRate,this.loop===!0&&(this._progress=this._progress%(this.duration||this.buffer.duration)),this.source.stop(),this.source.onended=null,this.isPlaying=!1),this}stop(e=0){if(this.hasPlaybackControl===!1){At("Audio: this Audio has no playback control.");return}return this._progress=0,this.source!==null&&(this.source.stop(this.context.currentTime+e),this.source.onended=null),this.isPlaying=!1,this}connect(){if(this.filters.length>0){this.source.connect(this.filters[0]);for(let e=1,t=this.filters.length;e<t;e++)this.filters[e-1].connect(this.filters[e]);this.filters[this.filters.length-1].connect(this.getOutput())}else this.source.connect(this.getOutput());return this._connected=!0,this}disconnect(){if(this._connected!==!1){if(this.filters.length>0){this.source.disconnect(this.filters[0]);for(let e=1,t=this.filters.length;e<t;e++)this.filters[e-1].disconnect(this.filters[e]);this.filters[this.filters.length-1].disconnect(this.getOutput())}else this.source.disconnect(this.getOutput());return this._connected=!1,this}}getFilters(){return this.filters}setFilters(e){return e||(e=[]),this._connected===!0?(this.disconnect(),this.filters=e.slice(),this.connect()):this.filters=e.slice(),this}setDetune(e){return this.detune=e,this.isPlaying===!0&&this.source.detune!==void 0&&this.source.detune.setTargetAtTime(this.detune,this.context.currentTime,.01),this}getDetune(){return this.detune}getFilter(){return this.getFilters()[0]}setFilter(e){return this.setFilters(e?[e]:[])}setPlaybackRate(e){if(this.hasPlaybackControl===!1){At("Audio: this Audio has no playback control.");return}return this.playbackRate=e,this.isPlaying===!0&&this.source.playbackRate.setTargetAtTime(this.playbackRate,this.context.currentTime,.01),this}getPlaybackRate(){return this.playbackRate}onEnded(){this.isPlaying=!1,this._progress=0}getLoop(){return this.hasPlaybackControl===!1?(At("Audio: this Audio has no playback control."),!1):this.loop}setLoop(e){if(this.hasPlaybackControl===!1){At("Audio: this Audio has no playback control.");return}return this.loop=e,this.isPlaying===!0&&(this.source.loop=this.loop),this}setLoopStart(e){return this.loopStart=e,this}setLoopEnd(e){return this.loopEnd=e,this}getVolume(){return this.gain.gain.value}setVolume(e){return this.gain.gain.setTargetAtTime(e,this.context.currentTime,.01),this}copy(e,t){return super.copy(e,t),e.sourceType!=="buffer"?(At("Audio: Audio source type cannot be copied."),this):(this.autoplay=e.autoplay,this.buffer=e.buffer,this.detune=e.detune,this.loop=e.loop,this.loopStart=e.loopStart,this.loopEnd=e.loopEnd,this.offset=e.offset,this.duration=e.duration,this.playbackRate=e.playbackRate,this.hasPlaybackControl=e.hasPlaybackControl,this.sourceType=e.sourceType,this.filters=e.filters.slice(),this)}clone(e){return new this.constructor(this.listener).copy(this,e)}}const Qh=new J,A3=new pa,Aj=new J,ef=new J;class Cj extends HO{constructor(e){super(e),this.panner=this.context.createPanner(),this.panner.panningModel="HRTF",this.panner.connect(this.gain)}connect(){return super.connect(),this.panner.connect(this.gain),this}disconnect(){return super.disconnect(),this.panner.disconnect(this.gain),this}getOutput(){return this.panner}getRefDistance(){return this.panner.refDistance}setRefDistance(e){return this.panner.refDistance=e,this}getRolloffFactor(){return this.panner.rolloffFactor}setRolloffFactor(e){return this.panner.rolloffFactor=e,this}getDistanceModel(){return this.panner.distanceModel}setDistanceModel(e){return this.panner.distanceModel=e,this}getMaxDistance(){return this.panner.maxDistance}setMaxDistance(e){return this.panner.maxDistance=e,this}setDirectionalCone(e,t,i){return this.panner.coneInnerAngle=e,this.panner.coneOuterAngle=t,this.panner.coneOuterGain=i,this}updateMatrixWorld(e){if(super.updateMatrixWorld(e),this.hasPlaybackControl===!0&&this.isPlaying===!1)return;this.matrixWorld.decompose(Qh,A3,Aj),ef.set(0,0,1).applyQuaternion(A3);const t=this.panner;if(t.positionX){const i=this.context.currentTime+this.listener.timeDelta;t.positionX.linearRampToValueAtTime(Qh.x,i),t.positionY.linearRampToValueAtTime(Qh.y,i),t.positionZ.linearRampToValueAtTime(Qh.z,i),t.orientationX.linearRampToValueAtTime(ef.x,i),t.orientationY.linearRampToValueAtTime(ef.y,i),t.orientationZ.linearRampToValueAtTime(ef.z,i)}else t.setPosition(Qh.x,Qh.y,Qh.z),t.setOrientation(ef.x,ef.y,ef.z)}}class Rj{constructor(e,t=2048){this.analyser=e.context.createAnalyser(),this.analyser.fftSize=t,this.data=new Uint8Array(this.analyser.frequencyBinCount),e.getOutput().connect(this.analyser)}getFrequencyData(){return this.analyser.getByteFrequencyData(this.data),this.data}getAverageFrequency(){let e=0;const t=this.getFrequencyData();for(let i=0;i<t.length;i++)e+=t[i];return e/t.length}}class GO{constructor(e,t,i){this.binding=e,this.valueSize=i;let r,s,o;switch(t){case"quaternion":r=this._slerp,s=this._slerpAdditive,o=this._setAdditiveIdentityQuaternion,this.buffer=new Float64Array(i*6),this._workIndex=5;break;case"string":case"bool":r=this._select,s=this._select,o=this._setAdditiveIdentityOther,this.buffer=new Array(i*5);break;default:r=this._lerp,s=this._lerpAdditive,o=this._setAdditiveIdentityNumeric,this.buffer=new Float64Array(i*5)}this._mixBufferRegion=r,this._mixBufferRegionAdditive=s,this._setIdentity=o,this._origIndex=3,this._addIndex=4,this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,this.useCount=0,this.referenceCount=0}accumulate(e,t){const i=this.buffer,r=this.valueSize,s=e*r+r;let o=this.cumulativeWeight;if(o===0){for(let u=0;u!==r;++u)i[s+u]=i[u];o=t}else{o+=t;const u=t/o;this._mixBufferRegion(i,s,0,u,r)}this.cumulativeWeight=o}accumulateAdditive(e){const t=this.buffer,i=this.valueSize,r=i*this._addIndex;this.cumulativeWeightAdditive===0&&this._setIdentity(),this._mixBufferRegionAdditive(t,r,0,e,i),this.cumulativeWeightAdditive+=e}apply(e){const t=this.valueSize,i=this.buffer,r=e*t+t,s=this.cumulativeWeight,o=this.cumulativeWeightAdditive,u=this.binding;if(this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,s<1){const f=t*this._origIndex;this._mixBufferRegion(i,r,f,1-s,t)}o>0&&this._mixBufferRegionAdditive(i,r,this._addIndex*t,1,t);for(let f=t,p=t+t;f!==p;++f)if(i[f]!==i[f+t]){u.setValue(i,r);break}}saveOriginalState(){const e=this.binding,t=this.buffer,i=this.valueSize,r=i*this._origIndex;e.getValue(t,r);for(let s=i,o=r;s!==o;++s)t[s]=t[r+s%i];this._setIdentity(),this.cumulativeWeight=0,this.cumulativeWeightAdditive=0}restoreOriginalState(){const e=this.valueSize*3;this.binding.setValue(this.buffer,e)}_setAdditiveIdentityNumeric(){const e=this._addIndex*this.valueSize,t=e+this.valueSize;for(let i=e;i<t;i++)this.buffer[i]=0}_setAdditiveIdentityQuaternion(){this._setAdditiveIdentityNumeric(),this.buffer[this._addIndex*this.valueSize+3]=1}_setAdditiveIdentityOther(){const e=this._origIndex*this.valueSize,t=this._addIndex*this.valueSize;for(let i=0;i<this.valueSize;i++)this.buffer[t+i]=this.buffer[e+i]}_select(e,t,i,r,s){if(r>=.5)for(let o=0;o!==s;++o)e[t+o]=e[i+o]}_slerp(e,t,i,r){pa.slerpFlat(e,t,e,t,e,i,r)}_slerpAdditive(e,t,i,r,s){const o=this._workIndex*s;pa.multiplyQuaternionsFlat(e,o,e,t,e,i),pa.slerpFlat(e,t,e,t,e,o,r)}_lerp(e,t,i,r,s){const o=1-r;for(let u=0;u!==s;++u){const f=t+u;e[f]=e[f]*o+e[i+u]*r}}_lerpAdditive(e,t,i,r,s){for(let o=0;o!==s;++o){const u=t+o;e[u]=e[u]+e[i+o]*r}}}const xT="\\[\\]\\.:\\/",Nj=new RegExp("["+xT+"]","g"),bT="[^"+xT+"]",Dj="[^"+xT.replace("\\.","")+"]",Ij=/((?:WC+[\/:])*)/.source.replace("WC",bT),Pj=/(WCOD+)?/.source.replace("WCOD",Dj),Oj=/(?:\.(WC+)(?:\[(.+)\])?)?/.source.replace("WC",bT),Lj=/\.(WC+)(?:\[(.+)\])?/.source.replace("WC",bT),Uj=new RegExp("^"+Ij+Pj+Oj+Lj+"$"),kj=["material","materials","bones","map"];class Bj{constructor(e,t,i){const r=i||Yn.parseTrackName(t);this._targetGroup=e,this._bindings=e.subscribe_(t,r)}getValue(e,t){this.bind();const i=this._targetGroup.nCachedObjects_,r=this._bindings[i];r!==void 0&&r.getValue(e,t)}setValue(e,t){const i=this._bindings;for(let r=this._targetGroup.nCachedObjects_,s=i.length;r!==s;++r)i[r].setValue(e,t)}bind(){const e=this._bindings;for(let t=this._targetGroup.nCachedObjects_,i=e.length;t!==i;++t)e[t].bind()}unbind(){const e=this._bindings;for(let t=this._targetGroup.nCachedObjects_,i=e.length;t!==i;++t)e[t].unbind()}}class Yn{constructor(e,t,i){this.path=t,this.parsedPath=i||Yn.parseTrackName(t),this.node=Yn.findNode(e,this.parsedPath.nodeName),this.rootNode=e,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}static create(e,t,i){return e&&e.isAnimationObjectGroup?new Yn.Composite(e,t,i):new Yn(e,t,i)}static sanitizeNodeName(e){return e.replace(/\s/g,"_").replace(Nj,"")}static parseTrackName(e){const t=Uj.exec(e);if(t===null)throw new Error("PropertyBinding: Cannot parse trackName: "+e);const i={nodeName:t[2],objectName:t[3],objectIndex:t[4],propertyName:t[5],propertyIndex:t[6]},r=i.nodeName&&i.nodeName.lastIndexOf(".");if(r!==void 0&&r!==-1){const s=i.nodeName.substring(r+1);kj.indexOf(s)!==-1&&(i.nodeName=i.nodeName.substring(0,r),i.objectName=s)}if(i.propertyName===null||i.propertyName.length===0)throw new Error("PropertyBinding: can not parse propertyName from trackName: "+e);return i}static findNode(e,t){if(t===void 0||t===""||t==="."||t===-1||t===e.name||t===e.uuid)return e;if(e.skeleton){const i=e.skeleton.getBoneByName(t);if(i!==void 0)return i}if(e.children){const i=function(s){for(let o=0;o<s.length;o++){const u=s[o];if(u.name===t||u.uuid===t)return u;const f=i(u.children);if(f)return f}return null},r=i(e.children);if(r)return r}return null}_getValue_unavailable(){}_setValue_unavailable(){}_getValue_direct(e,t){e[t]=this.targetObject[this.propertyName]}_getValue_array(e,t){const i=this.resolvedProperty;for(let r=0,s=i.length;r!==s;++r)e[t++]=i[r]}_getValue_arrayElement(e,t){e[t]=this.resolvedProperty[this.propertyIndex]}_getValue_toArray(e,t){this.resolvedProperty.toArray(e,t)}_setValue_direct(e,t){this.targetObject[this.propertyName]=e[t]}_setValue_direct_setNeedsUpdate(e,t){this.targetObject[this.propertyName]=e[t],this.targetObject.needsUpdate=!0}_setValue_direct_setMatrixWorldNeedsUpdate(e,t){this.targetObject[this.propertyName]=e[t],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_array(e,t){const i=this.resolvedProperty;for(let r=0,s=i.length;r!==s;++r)i[r]=e[t++]}_setValue_array_setNeedsUpdate(e,t){const i=this.resolvedProperty;for(let r=0,s=i.length;r!==s;++r)i[r]=e[t++];this.targetObject.needsUpdate=!0}_setValue_array_setMatrixWorldNeedsUpdate(e,t){const i=this.resolvedProperty;for(let r=0,s=i.length;r!==s;++r)i[r]=e[t++];this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_arrayElement(e,t){this.resolvedProperty[this.propertyIndex]=e[t]}_setValue_arrayElement_setNeedsUpdate(e,t){this.resolvedProperty[this.propertyIndex]=e[t],this.targetObject.needsUpdate=!0}_setValue_arrayElement_setMatrixWorldNeedsUpdate(e,t){this.resolvedProperty[this.propertyIndex]=e[t],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_fromArray(e,t){this.resolvedProperty.fromArray(e,t)}_setValue_fromArray_setNeedsUpdate(e,t){this.resolvedProperty.fromArray(e,t),this.targetObject.needsUpdate=!0}_setValue_fromArray_setMatrixWorldNeedsUpdate(e,t){this.resolvedProperty.fromArray(e,t),this.targetObject.matrixWorldNeedsUpdate=!0}_getValue_unbound(e,t){this.bind(),this.getValue(e,t)}_setValue_unbound(e,t){this.bind(),this.setValue(e,t)}bind(){let e=this.node;const t=this.parsedPath,i=t.objectName,r=t.propertyName;let s=t.propertyIndex;if(e||(e=Yn.findNode(this.rootNode,t.nodeName),this.node=e),this.getValue=this._getValue_unavailable,this.setValue=this._setValue_unavailable,!e){At("PropertyBinding: No target node found for track: "+this.path+".");return}if(i){let p=t.objectIndex;switch(i){case"materials":if(!e.material){Xt("PropertyBinding: Can not bind to material as node does not have a material.",this);return}if(!e.material.materials){Xt("PropertyBinding: Can not bind to material.materials as node.material does not have a materials array.",this);return}e=e.material.materials;break;case"bones":if(!e.skeleton){Xt("PropertyBinding: Can not bind to bones as node does not have a skeleton.",this);return}e=e.skeleton.bones;for(let m=0;m<e.length;m++)if(e[m].name===p){p=m;break}break;case"map":if("map"in e){e=e.map;break}if(!e.material){Xt("PropertyBinding: Can not bind to material as node does not have a material.",this);return}if(!e.material.map){Xt("PropertyBinding: Can not bind to material.map as node.material does not have a map.",this);return}e=e.material.map;break;default:if(e[i]===void 0){Xt("PropertyBinding: Can not bind to objectName of node undefined.",this);return}e=e[i]}if(p!==void 0){if(e[p]===void 0){Xt("PropertyBinding: Trying to bind to objectIndex of objectName, but is undefined.",this,e);return}e=e[p]}}const o=e[r];if(o===void 0){const p=t.nodeName;Xt("PropertyBinding: Trying to update property for track: "+p+"."+r+" but it wasn't found.",e);return}let u=this.Versioning.None;this.targetObject=e,e.isMaterial===!0?u=this.Versioning.NeedsUpdate:e.isObject3D===!0&&(u=this.Versioning.MatrixWorldNeedsUpdate);let f=this.BindingType.Direct;if(s!==void 0){if(r==="morphTargetInfluences"){if(!e.geometry){Xt("PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.",this);return}if(!e.geometry.morphAttributes){Xt("PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.morphAttributes.",this);return}e.morphTargetDictionary[s]!==void 0&&(s=e.morphTargetDictionary[s])}f=this.BindingType.ArrayElement,this.resolvedProperty=o,this.propertyIndex=s}else o.fromArray!==void 0&&o.toArray!==void 0?(f=this.BindingType.HasFromToArray,this.resolvedProperty=o):Array.isArray(o)?(f=this.BindingType.EntireArray,this.resolvedProperty=o):this.propertyName=r;this.getValue=this.GetterByBindingType[f],this.setValue=this.SetterByBindingTypeAndVersioning[f][u]}unbind(){this.node=null,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}}Yn.Composite=Bj;Yn.prototype.BindingType={Direct:0,EntireArray:1,ArrayElement:2,HasFromToArray:3};Yn.prototype.Versioning={None:0,NeedsUpdate:1,MatrixWorldNeedsUpdate:2};Yn.prototype.GetterByBindingType=[Yn.prototype._getValue_direct,Yn.prototype._getValue_array,Yn.prototype._getValue_arrayElement,Yn.prototype._getValue_toArray];Yn.prototype.SetterByBindingTypeAndVersioning=[[Yn.prototype._setValue_direct,Yn.prototype._setValue_direct_setNeedsUpdate,Yn.prototype._setValue_direct_setMatrixWorldNeedsUpdate],[Yn.prototype._setValue_array,Yn.prototype._setValue_array_setNeedsUpdate,Yn.prototype._setValue_array_setMatrixWorldNeedsUpdate],[Yn.prototype._setValue_arrayElement,Yn.prototype._setValue_arrayElement_setNeedsUpdate,Yn.prototype._setValue_arrayElement_setMatrixWorldNeedsUpdate],[Yn.prototype._setValue_fromArray,Yn.prototype._setValue_fromArray_setNeedsUpdate,Yn.prototype._setValue_fromArray_setMatrixWorldNeedsUpdate]];class zj{constructor(){this.isAnimationObjectGroup=!0,this.uuid=Ea(),this._objects=Array.prototype.slice.call(arguments),this.nCachedObjects_=0;const e={};this._indicesByUUID=e;for(let i=0,r=arguments.length;i!==r;++i)e[arguments[i].uuid]=i;this._paths=[],this._parsedPaths=[],this._bindings=[],this._bindingsIndicesByPath={};const t=this;this.stats={objects:{get total(){return t._objects.length},get inUse(){return this.total-t.nCachedObjects_}},get bindingsPerObject(){return t._bindings.length}}}add(){const e=this._objects,t=this._indicesByUUID,i=this._paths,r=this._parsedPaths,s=this._bindings,o=s.length;let u,f=e.length,p=this.nCachedObjects_;for(let m=0,v=arguments.length;m!==v;++m){const _=arguments[m],x=_.uuid;let S=t[x];if(S===void 0){S=f++,t[x]=S,e.push(_);for(let A=0,E=o;A!==E;++A)s[A].push(new Yn(_,i[A],r[A]))}else if(S<p){u=e[S];const A=--p,E=e[A];t[E.uuid]=S,e[S]=E,t[x]=A,e[A]=_;for(let M=0,C=o;M!==C;++M){const N=s[M],I=N[A];let U=N[S];N[S]=I,U===void 0&&(U=new Yn(_,i[M],r[M])),N[A]=U}}else e[S]!==u&&Xt("AnimationObjectGroup: Different objects with the same UUID detected. Clean the caches or recreate your infrastructure when reloading scenes.")}this.nCachedObjects_=p}remove(){const e=this._objects,t=this._indicesByUUID,i=this._bindings,r=i.length;let s=this.nCachedObjects_;for(let o=0,u=arguments.length;o!==u;++o){const f=arguments[o],p=f.uuid,m=t[p];if(m!==void 0&&m>=s){const v=s++,_=e[v];t[_.uuid]=m,e[m]=_,t[p]=v,e[v]=f;for(let x=0,S=r;x!==S;++x){const A=i[x],E=A[v],M=A[m];A[m]=E,A[v]=M}}}this.nCachedObjects_=s}uncache(){const e=this._objects,t=this._indicesByUUID,i=this._bindings,r=i.length;let s=this.nCachedObjects_,o=e.length;for(let u=0,f=arguments.length;u!==f;++u){const p=arguments[u],m=p.uuid,v=t[m];if(v!==void 0)if(delete t[m],v<s){const _=--s,x=e[_],S=--o,A=e[S];t[x.uuid]=v,e[v]=x,t[A.uuid]=_,e[_]=A,e.pop();for(let E=0,M=r;E!==M;++E){const C=i[E],N=C[_],I=C[S];C[v]=N,C[_]=I,C.pop()}}else{const _=--o,x=e[_];_>0&&(t[x.uuid]=v),e[v]=x,e.pop();for(let S=0,A=r;S!==A;++S){const E=i[S];E[v]=E[_],E.pop()}}}this.nCachedObjects_=s}subscribe_(e,t){const i=this._bindingsIndicesByPath;let r=i[e];const s=this._bindings;if(r!==void 0)return s[r];const o=this._paths,u=this._parsedPaths,f=this._objects,p=f.length,m=this.nCachedObjects_,v=new Array(p);r=s.length,i[e]=r,o.push(e),u.push(t),s.push(v);for(let _=m,x=f.length;_!==x;++_){const S=f[_];v[_]=new Yn(S,e,t)}return v}unsubscribe_(e){const t=this._bindingsIndicesByPath,i=t[e];if(i!==void 0){const r=this._paths,s=this._parsedPaths,o=this._bindings,u=o.length-1,f=o[u],p=e[u];t[p]=i,o[i]=f,o.pop(),s[i]=s[u],s.pop(),r[i]=r[u],r.pop()}}}class jO{constructor(e,t,i=null,r=t.blendMode){this._mixer=e,this._clip=t,this._localRoot=i,this.blendMode=r;const s=t.tracks,o=s.length,u=new Array(o),f={endingStart:pf,endingEnd:pf};for(let p=0;p!==o;++p){const m=s[p].createInterpolant(null);u[p]=m,m.settings=f}this._interpolantSettings=f,this._interpolants=u,this._propertyBindings=new Array(o),this._cacheIndex=null,this._byClipCacheIndex=null,this._timeScaleInterpolant=null,this._weightInterpolant=null,this.loop=OP,this._loopCount=-1,this._startTime=null,this.time=0,this.timeScale=1,this._effectiveTimeScale=1,this.weight=1,this._effectiveWeight=1,this.repetitions=1/0,this.paused=!1,this.enabled=!0,this.clampWhenFinished=!1,this.zeroSlopeAtStart=!0,this.zeroSlopeAtEnd=!0}play(){return this._mixer._activateAction(this),this}stop(){return this._mixer._deactivateAction(this),this.reset()}reset(){return this.paused=!1,this.enabled=!0,this.time=0,this._loopCount=-1,this._startTime=null,this.stopFading().stopWarping()}isRunning(){return this.enabled&&!this.paused&&this.timeScale!==0&&this._startTime===null&&this._mixer._isActiveAction(this)}isScheduled(){return this._mixer._isActiveAction(this)}startAt(e){return this._startTime=e,this}setLoop(e,t){return this.loop=e,this.repetitions=t,this}setEffectiveWeight(e){return this.weight=e,this._effectiveWeight=this.enabled?e:0,this.stopFading()}getEffectiveWeight(){return this._effectiveWeight}fadeIn(e){return this._scheduleFading(e,0,1)}fadeOut(e){return this._scheduleFading(e,1,0)}crossFadeFrom(e,t,i=!1){if(e.fadeOut(t),this.fadeIn(t),i===!0){const r=this._clip.duration,s=e._clip.duration,o=s/r,u=r/s;e.warp(1,o,t),this.warp(u,1,t)}return this}crossFadeTo(e,t,i=!1){return e.crossFadeFrom(this,t,i)}stopFading(){const e=this._weightInterpolant;return e!==null&&(this._weightInterpolant=null,this._mixer._takeBackControlInterpolant(e)),this}setEffectiveTimeScale(e){return this.timeScale=e,this._effectiveTimeScale=this.paused?0:e,this.stopWarping()}getEffectiveTimeScale(){return this._effectiveTimeScale}setDuration(e){return this.timeScale=this._clip.duration/e,this.stopWarping()}syncWith(e){return this.time=e.time,this.timeScale=e.timeScale,this.stopWarping()}halt(e){return this.warp(this._effectiveTimeScale,0,e)}warp(e,t,i){const r=this._mixer,s=r.time,o=this.timeScale;let u=this._timeScaleInterpolant;u===null&&(u=r._lendControlInterpolant(),this._timeScaleInterpolant=u);const f=u.parameterPositions,p=u.sampleValues;return f[0]=s,f[1]=s+i,p[0]=e/o,p[1]=t/o,this}stopWarping(){const e=this._timeScaleInterpolant;return e!==null&&(this._timeScaleInterpolant=null,this._mixer._takeBackControlInterpolant(e)),this}getMixer(){return this._mixer}getClip(){return this._clip}getRoot(){return this._localRoot||this._mixer._root}_update(e,t,i,r){if(!this.enabled){this._updateWeight(e);return}const s=this._startTime;if(s!==null){const f=(e-s)*i;f<0||i===0?t=0:(this._startTime=null,t=i*f)}t*=this._updateTimeScale(e);const o=this._updateTime(t),u=this._updateWeight(e);if(u>0){const f=this._interpolants,p=this._propertyBindings;switch(this.blendMode){case XE:for(let m=0,v=f.length;m!==v;++m)f[m].evaluate(o),p[m].accumulateAdditive(u);break;case jb:default:for(let m=0,v=f.length;m!==v;++m)f[m].evaluate(o),p[m].accumulate(r,u)}}}_updateWeight(e){let t=0;if(this.enabled){t=this.weight;const i=this._weightInterpolant;if(i!==null){const r=i.evaluate(e)[0];t*=r,e>i.parameterPositions[1]&&(this.stopFading(),r===0&&(this.enabled=!1))}}return this._effectiveWeight=t,t}_updateTimeScale(e){let t=0;if(!this.paused){t=this.timeScale;const i=this._timeScaleInterpolant;if(i!==null){const r=i.evaluate(e)[0];t*=r,e>i.parameterPositions[1]&&(this.stopWarping(),t===0?this.paused=!0:this.timeScale=t)}}return this._effectiveTimeScale=t,t}_updateTime(e){const t=this._clip.duration,i=this.loop;let r=this.time+e,s=this._loopCount;const o=i===LP;if(e===0)return s===-1?r:o&&(s&1)===1?t-r:r;if(i===PP){s===-1&&(this._loopCount=0,this._setEndings(!0,!0,!1));e:{if(r>=t)r=t;else if(r<0)r=0;else{this.time=r;break e}this.clampWhenFinished?this.paused=!0:this.enabled=!1,this.time=r,this._mixer.dispatchEvent({type:"finished",action:this,direction:e<0?-1:1})}}else{if(s===-1&&(e>=0?(s=0,this._setEndings(!0,this.repetitions===0,o)):this._setEndings(this.repetitions===0,!0,o)),r>=t||r<0){const u=Math.floor(r/t);r-=t*u,s+=Math.abs(u);const f=this.repetitions-s;if(f<=0)this.clampWhenFinished?this.paused=!0:this.enabled=!1,r=e>0?t:0,this.time=r,this._mixer.dispatchEvent({type:"finished",action:this,direction:e>0?1:-1});else{if(f===1){const p=e<0;this._setEndings(p,!p,o)}else this._setEndings(!1,!1,o);this._loopCount=s,this.time=r,this._mixer.dispatchEvent({type:"loop",action:this,loopDelta:u})}}else this.time=r;if(o&&(s&1)===1)return t-r}return r}_setEndings(e,t,i){const r=this._interpolantSettings;i?(r.endingStart=mf,r.endingEnd=mf):(e?r.endingStart=this.zeroSlopeAtStart?mf:pf:r.endingStart=O0,t?r.endingEnd=this.zeroSlopeAtEnd?mf:pf:r.endingEnd=O0)}_scheduleFading(e,t,i){const r=this._mixer,s=r.time;let o=this._weightInterpolant;o===null&&(o=r._lendControlInterpolant(),this._weightInterpolant=o);const u=o.parameterPositions,f=o.sampleValues;return u[0]=s,f[0]=t,u[1]=s+e,f[1]=i,this}}const Fj=new Float32Array(1);class Vj extends Fl{constructor(e){super(),this._root=e,this._initMemoryManager(),this._accuIndex=0,this.time=0,this.timeScale=1}_bindAction(e,t){const i=e._localRoot||this._root,r=e._clip.tracks,s=r.length,o=e._propertyBindings,u=e._interpolants,f=i.uuid,p=this._bindingsByRootAndName;let m=p[f];m===void 0&&(m={},p[f]=m);for(let v=0;v!==s;++v){const _=r[v],x=_.name;let S=m[x];if(S!==void 0)++S.referenceCount,o[v]=S;else{if(S=o[v],S!==void 0){S._cacheIndex===null&&(++S.referenceCount,this._addInactiveBinding(S,f,x));continue}const A=t&&t._propertyBindings[v].binding.parsedPath;S=new GO(Yn.create(i,x,A),_.ValueTypeName,_.getValueSize()),++S.referenceCount,this._addInactiveBinding(S,f,x),o[v]=S}u[v].resultBuffer=S.buffer}}_activateAction(e){if(!this._isActiveAction(e)){if(e._cacheIndex===null){const i=(e._localRoot||this._root).uuid,r=e._clip.uuid,s=this._actionsByClip[r];this._bindAction(e,s&&s.knownActions[0]),this._addInactiveAction(e,r,i)}const t=e._propertyBindings;for(let i=0,r=t.length;i!==r;++i){const s=t[i];s.useCount++===0&&(this._lendBinding(s),s.saveOriginalState())}this._lendAction(e)}}_deactivateAction(e){if(this._isActiveAction(e)){const t=e._propertyBindings;for(let i=0,r=t.length;i!==r;++i){const s=t[i];--s.useCount===0&&(s.restoreOriginalState(),this._takeBackBinding(s))}this._takeBackAction(e)}}_initMemoryManager(){this._actions=[],this._nActiveActions=0,this._actionsByClip={},this._bindings=[],this._nActiveBindings=0,this._bindingsByRootAndName={},this._controlInterpolants=[],this._nActiveControlInterpolants=0;const e=this;this.stats={actions:{get total(){return e._actions.length},get inUse(){return e._nActiveActions}},bindings:{get total(){return e._bindings.length},get inUse(){return e._nActiveBindings}},controlInterpolants:{get total(){return e._controlInterpolants.length},get inUse(){return e._nActiveControlInterpolants}}}}_isActiveAction(e){const t=e._cacheIndex;return t!==null&&t<this._nActiveActions}_addInactiveAction(e,t,i){const r=this._actions,s=this._actionsByClip;let o=s[t];if(o===void 0)o={knownActions:[e],actionByRoot:{}},e._byClipCacheIndex=0,s[t]=o;else{const u=o.knownActions;e._byClipCacheIndex=u.length,u.push(e)}e._cacheIndex=r.length,r.push(e),o.actionByRoot[i]=e}_removeInactiveAction(e){const t=this._actions,i=t[t.length-1],r=e._cacheIndex;i._cacheIndex=r,t[r]=i,t.pop(),e._cacheIndex=null;const s=e._clip.uuid,o=this._actionsByClip,u=o[s],f=u.knownActions,p=f[f.length-1],m=e._byClipCacheIndex;p._byClipCacheIndex=m,f[m]=p,f.pop(),e._byClipCacheIndex=null;const v=u.actionByRoot,_=(e._localRoot||this._root).uuid;delete v[_],f.length===0&&delete o[s],this._removeInactiveBindingsForAction(e)}_removeInactiveBindingsForAction(e){const t=e._propertyBindings;for(let i=0,r=t.length;i!==r;++i){const s=t[i];--s.referenceCount===0&&this._removeInactiveBinding(s)}}_lendAction(e){const t=this._actions,i=e._cacheIndex,r=this._nActiveActions++,s=t[r];e._cacheIndex=r,t[r]=e,s._cacheIndex=i,t[i]=s}_takeBackAction(e){const t=this._actions,i=e._cacheIndex,r=--this._nActiveActions,s=t[r];e._cacheIndex=r,t[r]=e,s._cacheIndex=i,t[i]=s}_addInactiveBinding(e,t,i){const r=this._bindingsByRootAndName,s=this._bindings;let o=r[t];o===void 0&&(o={},r[t]=o),o[i]=e,e._cacheIndex=s.length,s.push(e)}_removeInactiveBinding(e){const t=this._bindings,i=e.binding,r=i.rootNode.uuid,s=i.path,o=this._bindingsByRootAndName,u=o[r],f=t[t.length-1],p=e._cacheIndex;f._cacheIndex=p,t[p]=f,t.pop(),delete u[s],Object.keys(u).length===0&&delete o[r]}_lendBinding(e){const t=this._bindings,i=e._cacheIndex,r=this._nActiveBindings++,s=t[r];e._cacheIndex=r,t[r]=e,s._cacheIndex=i,t[i]=s}_takeBackBinding(e){const t=this._bindings,i=e._cacheIndex,r=--this._nActiveBindings,s=t[r];e._cacheIndex=r,t[r]=e,s._cacheIndex=i,t[i]=s}_lendControlInterpolant(){const e=this._controlInterpolants,t=this._nActiveControlInterpolants++;let i=e[t];return i===void 0&&(i=new dT(new Float32Array(2),new Float32Array(2),1,Fj),i.__cacheIndex=t,e[t]=i),i}_takeBackControlInterpolant(e){const t=this._controlInterpolants,i=e.__cacheIndex,r=--this._nActiveControlInterpolants,s=t[r];e.__cacheIndex=r,t[r]=e,s.__cacheIndex=i,t[i]=s}clipAction(e,t,i){const r=t||this._root,s=r.uuid;let o=typeof e=="string"?j0.findByName(r,e):e;const u=o!==null?o.uuid:e,f=this._actionsByClip[u];let p=null;if(i===void 0&&(o!==null?i=o.blendMode:i=jb),f!==void 0){const v=f.actionByRoot[s];if(v!==void 0&&v.blendMode===i)return v;p=f.knownActions[0],o===null&&(o=p._clip)}if(o===null)return null;const m=new jO(this,o,t,i);return this._bindAction(m,p),this._addInactiveAction(m,u,s),m}existingAction(e,t){const i=t||this._root,r=i.uuid,s=typeof e=="string"?j0.findByName(i,e):e,o=s?s.uuid:e,u=this._actionsByClip[o];return u!==void 0&&u.actionByRoot[r]||null}stopAllAction(){const e=this._actions,t=this._nActiveActions;for(let i=t-1;i>=0;--i)e[i].stop();return this}update(e){e*=this.timeScale;const t=this._actions,i=this._nActiveActions,r=this.time+=e,s=Math.sign(e),o=this._accuIndex^=1;for(let p=0;p!==i;++p)t[p]._update(r,e,s,o);const u=this._bindings,f=this._nActiveBindings;for(let p=0;p!==f;++p)u[p].apply(o);return this}setTime(e){this.time=0;for(let t=0;t<this._actions.length;t++)this._actions[t].time=0;return this.update(e)}getRoot(){return this._root}uncacheClip(e){const t=this._actions,i=e.uuid,r=this._actionsByClip,s=r[i];if(s!==void 0){const o=s.knownActions;for(let u=0,f=o.length;u!==f;++u){const p=o[u];this._deactivateAction(p);const m=p._cacheIndex,v=t[t.length-1];p._cacheIndex=null,p._byClipCacheIndex=null,v._cacheIndex=m,t[m]=v,t.pop(),this._removeInactiveBindingsForAction(p)}delete r[i]}}uncacheRoot(e){const t=e.uuid,i=this._actionsByClip;for(const o in i){const u=i[o].actionByRoot,f=u[t];f!==void 0&&(this._deactivateAction(f),this._removeInactiveAction(f))}const r=this._bindingsByRootAndName,s=r[t];if(s!==void 0)for(const o in s){const u=s[o];u.restoreOriginalState(),this._removeInactiveBinding(u)}}uncacheAction(e,t){const i=this.existingAction(e,t);i!==null&&(this._deactivateAction(i),this._removeInactiveAction(i))}}class Hj extends YE{constructor(e=1,t=1,i=1,r={}){super(e,t,r),this.isRenderTarget3D=!0,this.depth=i,this.texture=new $b(null,e,t,i),this._setTextureOptions(r),this.texture.isRenderTargetTexture=!0}}class ST{constructor(e){this.value=e}clone(){return new ST(this.value.clone===void 0?this.value:this.value.clone())}}let Gj=0;class jj extends Fl{constructor(){super(),this.isUniformsGroup=!0,Object.defineProperty(this,"id",{value:Gj++}),this.name="",this.usage=U0,this.uniforms=[]}add(e){return this.uniforms.push(e),this}remove(e){const t=this.uniforms.indexOf(e);return t!==-1&&this.uniforms.splice(t,1),this}setName(e){return this.name=e,this}setUsage(e){return this.usage=e,this}dispose(){this.dispatchEvent({type:"dispose"})}copy(e){this.name=e.name,this.usage=e.usage;const t=e.uniforms;this.uniforms.length=0;for(let i=0,r=t.length;i<r;i++){const s=Array.isArray(t[i])?t[i]:[t[i]];for(let o=0;o<s.length;o++)this.uniforms.push(s[o].clone())}return this}clone(){return new this.constructor().copy(this)}}class Wj extends Qb{constructor(e,t,i=1){super(e,t),this.isInstancedInterleavedBuffer=!0,this.meshPerAttribute=i}copy(e){return super.copy(e),this.meshPerAttribute=e.meshPerAttribute,this}clone(e){const t=super.clone(e);return t.meshPerAttribute=this.meshPerAttribute,t}toJSON(e){const t=super.toJSON(e);return t.isInstancedInterleavedBuffer=!0,t.meshPerAttribute=this.meshPerAttribute,t}}class qj{constructor(e,t,i,r,s,o=!1){this.isGLBufferAttribute=!0,this.name="",this.buffer=e,this.type=t,this.itemSize=i,this.elementSize=r,this.count=s,this.normalized=o,this.version=0}set needsUpdate(e){e===!0&&this.version++}setBuffer(e){return this.buffer=e,this}setType(e,t){return this.type=e,this.elementSize=t,this}setItemSize(e){return this.itemSize=e,this}setCount(e){return this.count=e,this}}const C3=new un;class wT{constructor(e,t,i=0,r=1/0){this.ray=new Qp(e,t),this.near=i,this.far=r,this.camera=null,this.layers=new zp,this.params={Mesh:{},Line:{threshold:1},LOD:{},Points:{threshold:1},Sprite:{}}}set(e,t){this.ray.set(e,t)}setFromCamera(e,t){t.isPerspectiveCamera?(this.ray.origin.setFromMatrixPosition(t.matrixWorld),this.ray.direction.set(e.x,e.y,.5).unproject(t).sub(this.ray.origin).normalize(),this.camera=t):t.isOrthographicCamera?(this.ray.origin.set(e.x,e.y,(t.near+t.far)/(t.near-t.far)).unproject(t),this.ray.direction.set(0,0,-1).transformDirection(t.matrixWorld),this.camera=t):Xt("Raycaster: Unsupported camera type: "+t.type)}setFromXRController(e){return C3.identity().extractRotation(e.matrixWorld),this.ray.origin.setFromMatrixPosition(e.matrixWorld),this.ray.direction.set(0,0,-1).applyMatrix4(C3),this}intersectObject(e,t=!0,i=[]){return OM(e,this,i,t),i.sort(R3),i}intersectObjects(e,t=!0,i=[]){for(let r=0,s=e.length;r<s;r++)OM(e[r],this,i,t);return i.sort(R3),i}}function R3(n,e){return n.distance-e.distance}function OM(n,e,t,i){let r=!0;if(n.layers.test(e.layers)&&n.raycast(e,t)===!1&&(r=!1),r===!0&&i===!0){const s=n.children;for(let o=0,u=s.length;o<u;o++)OM(s[o],e,t,!0)}}class Xj{constructor(){this._previousTime=0,this._currentTime=0,this._startTime=performance.now(),this._delta=0,this._elapsed=0,this._timescale=1,this._document=null,this._pageVisibilityHandler=null}connect(e){this._document=e,e.hidden!==void 0&&(this._pageVisibilityHandler=$j.bind(this),e.addEventListener("visibilitychange",this._pageVisibilityHandler,!1))}disconnect(){this._pageVisibilityHandler!==null&&(this._document.removeEventListener("visibilitychange",this._pageVisibilityHandler),this._pageVisibilityHandler=null),this._document=null}getDelta(){return this._delta/1e3}getElapsed(){return this._elapsed/1e3}getTimescale(){return this._timescale}setTimescale(e){return this._timescale=e,this}reset(){return this._currentTime=performance.now()-this._startTime,this}dispose(){this.disconnect()}update(e){return this._pageVisibilityHandler!==null&&this._document.hidden===!0?this._delta=0:(this._previousTime=this._currentTime,this._currentTime=(e!==void 0?e:performance.now())-this._startTime,this._delta=(this._currentTime-this._previousTime)*this._timescale,this._elapsed+=this._delta),this}}function $j(){this._document.hidden===!1&&this.reset()}class WO{constructor(e=1,t=0,i=0){this.radius=e,this.phi=t,this.theta=i}set(e,t,i){return this.radius=e,this.phi=t,this.theta=i,this}copy(e){return this.radius=e.radius,this.phi=e.phi,this.theta=e.theta,this}makeSafe(){return this.phi=ln(this.phi,1e-6,Math.PI-1e-6),this}setFromVector3(e){return this.setFromCartesianCoords(e.x,e.y,e.z)}setFromCartesianCoords(e,t,i){return this.radius=Math.sqrt(e*e+t*t+i*i),this.radius===0?(this.theta=0,this.phi=0):(this.theta=Math.atan2(e,i),this.phi=Math.acos(ln(t/this.radius,-1,1))),this}clone(){return new this.constructor().copy(this)}}class Yj{constructor(e=1,t=0,i=0){this.radius=e,this.theta=t,this.y=i}set(e,t,i){return this.radius=e,this.theta=t,this.y=i,this}copy(e){return this.radius=e.radius,this.theta=e.theta,this.y=e.y,this}setFromVector3(e){return this.setFromCartesianCoords(e.x,e.y,e.z)}setFromCartesianCoords(e,t,i){return this.radius=Math.sqrt(e*e+i*i),this.theta=Math.atan2(e,i),this.y=t,this}clone(){return new this.constructor().copy(this)}}class MT{constructor(e,t,i,r){MT.prototype.isMatrix2=!0,this.elements=[1,0,0,1],e!==void 0&&this.set(e,t,i,r)}identity(){return this.set(1,0,0,1),this}fromArray(e,t=0){for(let i=0;i<4;i++)this.elements[i]=e[i+t];return this}set(e,t,i,r){const s=this.elements;return s[0]=e,s[2]=t,s[1]=i,s[3]=r,this}}const N3=new Ye;class Zj{constructor(e=new Ye(1/0,1/0),t=new Ye(-1/0,-1/0)){this.isBox2=!0,this.min=e,this.max=t}set(e,t){return this.min.copy(e),this.max.copy(t),this}setFromPoints(e){this.makeEmpty();for(let t=0,i=e.length;t<i;t++)this.expandByPoint(e[t]);return this}setFromCenterAndSize(e,t){const i=N3.copy(t).multiplyScalar(.5);return this.min.copy(e).sub(i),this.max.copy(e).add(i),this}clone(){return new this.constructor().copy(this)}copy(e){return this.min.copy(e.min),this.max.copy(e.max),this}makeEmpty(){return this.min.x=this.min.y=1/0,this.max.x=this.max.y=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y}getCenter(e){return this.isEmpty()?e.set(0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(e){return this.isEmpty()?e.set(0,0):e.subVectors(this.max,this.min)}expandByPoint(e){return this.min.min(e),this.max.max(e),this}expandByVector(e){return this.min.sub(e),this.max.add(e),this}expandByScalar(e){return this.min.addScalar(-e),this.max.addScalar(e),this}containsPoint(e){return e.x>=this.min.x&&e.x<=this.max.x&&e.y>=this.min.y&&e.y<=this.max.y}containsBox(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y}getParameter(e,t){return t.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y))}intersectsBox(e){return e.max.x>=this.min.x&&e.min.x<=this.max.x&&e.max.y>=this.min.y&&e.min.y<=this.max.y}clampPoint(e,t){return t.copy(e).clamp(this.min,this.max)}distanceToPoint(e){return this.clampPoint(e,N3).distanceTo(e)}intersect(e){return this.min.max(e.min),this.max.min(e.max),this.isEmpty()&&this.makeEmpty(),this}union(e){return this.min.min(e.min),this.max.max(e.max),this}translate(e){return this.min.add(e),this.max.add(e),this}equals(e){return e.min.equals(this.min)&&e.max.equals(this.max)}}const D3=new J,$_=new J,cp=new J,up=new J,vw=new J,Kj=new J,Jj=new J;class Qj{constructor(e=new J,t=new J){this.start=e,this.end=t}set(e,t){return this.start.copy(e),this.end.copy(t),this}copy(e){return this.start.copy(e.start),this.end.copy(e.end),this}getCenter(e){return e.addVectors(this.start,this.end).multiplyScalar(.5)}delta(e){return e.subVectors(this.end,this.start)}distanceSq(){return this.start.distanceToSquared(this.end)}distance(){return this.start.distanceTo(this.end)}at(e,t){return this.delta(t).multiplyScalar(e).add(this.start)}closestPointToPointParameter(e,t){D3.subVectors(e,this.start),$_.subVectors(this.end,this.start);const i=$_.dot($_);let s=$_.dot(D3)/i;return t&&(s=ln(s,0,1)),s}closestPointToPoint(e,t,i){const r=this.closestPointToPointParameter(e,t);return this.delta(i).multiplyScalar(r).add(this.start)}distanceSqToLine3(e,t=Kj,i=Jj){const r=10000000000000001e-32;let s,o;const u=this.start,f=e.start,p=this.end,m=e.end;cp.subVectors(p,u),up.subVectors(m,f),vw.subVectors(u,f);const v=cp.dot(cp),_=up.dot(up),x=up.dot(vw);if(v<=r&&_<=r)return t.copy(u),i.copy(f),t.sub(i),t.dot(t);if(v<=r)s=0,o=x/_,o=ln(o,0,1);else{const S=cp.dot(vw);if(_<=r)o=0,s=ln(-S/v,0,1);else{const A=cp.dot(up),E=v*_-A*A;E!==0?s=ln((A*x-S*_)/E,0,1):s=0,o=(A*s+x)/_,o<0?(o=0,s=ln(-S/v,0,1)):o>1&&(o=1,s=ln((A-S)/v,0,1))}}return t.copy(u).add(cp.multiplyScalar(s)),i.copy(f).add(up.multiplyScalar(o)),t.sub(i),t.dot(t)}applyMatrix4(e){return this.start.applyMatrix4(e),this.end.applyMatrix4(e),this}equals(e){return e.start.equals(this.start)&&e.end.equals(this.end)}clone(){return new this.constructor().copy(this)}}const I3=new J;class e9 extends Zn{constructor(e,t){super(),this.light=e,this.matrixAutoUpdate=!1,this.color=t,this.type="SpotLightHelper";const i=new vn,r=[0,0,0,0,0,1,0,0,0,1,0,1,0,0,0,-1,0,1,0,0,0,0,1,1,0,0,0,0,-1,1];for(let o=0,u=1,f=32;o<f;o++,u++){const p=o/f*Math.PI*2,m=u/f*Math.PI*2;r.push(Math.cos(p),Math.sin(p),1,Math.cos(m),Math.sin(m),1)}i.setAttribute("position",new kt(r,3));const s=new Gs({fog:!1,toneMapped:!1});this.cone=new Vl(i,s),this.add(this.cone),this.update()}dispose(){this.cone.geometry.dispose(),this.cone.material.dispose()}update(){this.light.updateWorldMatrix(!0,!1),this.light.target.updateWorldMatrix(!0,!1),this.parent?(this.parent.updateWorldMatrix(!0),this.matrix.copy(this.parent.matrixWorld).invert().multiply(this.light.matrixWorld)):this.matrix.copy(this.light.matrixWorld),this.matrixWorld.copy(this.light.matrixWorld);const e=this.light.distance?this.light.distance:1e3,t=e*Math.tan(this.light.angle);this.cone.scale.set(t,t,e),I3.setFromMatrixPosition(this.light.target.matrixWorld),this.cone.lookAt(I3),this.color!==void 0?this.cone.material.color.set(this.color):this.cone.material.color.copy(this.light.color)}}const Du=new J,Y_=new un,yw=new un;class t9 extends Vl{constructor(e){const t=qO(e),i=new vn,r=[],s=[];for(let p=0;p<t.length;p++){const m=t[p];m.parent&&m.parent.isBone&&(r.push(0,0,0),r.push(0,0,0),s.push(0,0,0),s.push(0,0,0))}i.setAttribute("position",new kt(r,3)),i.setAttribute("color",new kt(s,3));const o=new Gs({vertexColors:!0,depthTest:!1,depthWrite:!1,toneMapped:!1,transparent:!0});super(i,o),this.isSkeletonHelper=!0,this.type="SkeletonHelper",this.root=e,this.bones=t,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1;const u=new Ot(255),f=new Ot(65280);this.setColors(u,f)}updateMatrixWorld(e){const t=this.bones,i=this.geometry,r=i.getAttribute("position");yw.copy(this.root.matrixWorld).invert();for(let s=0,o=0;s<t.length;s++){const u=t[s];u.parent&&u.parent.isBone&&(Y_.multiplyMatrices(yw,u.matrixWorld),Du.setFromMatrixPosition(Y_),r.setXYZ(o,Du.x,Du.y,Du.z),Y_.multiplyMatrices(yw,u.parent.matrixWorld),Du.setFromMatrixPosition(Y_),r.setXYZ(o+1,Du.x,Du.y,Du.z),o+=2)}i.getAttribute("position").needsUpdate=!0,super.updateMatrixWorld(e)}setColors(e,t){const r=this.geometry.getAttribute("color");for(let s=0;s<r.count;s+=2)r.setXYZ(s,e.r,e.g,e.b),r.setXYZ(s+1,t.r,t.g,t.b);return r.needsUpdate=!0,this}dispose(){this.geometry.dispose(),this.material.dispose()}}function qO(n){const e=[];n.isBone===!0&&e.push(n);for(let t=0;t<n.children.length;t++)e.push(...qO(n.children[t]));return e}class n9 extends Xi{constructor(e,t,i){const r=new pv(t,4,2),s=new Lc({wireframe:!0,fog:!1,toneMapped:!1});super(r,s),this.light=e,this.color=i,this.type="PointLightHelper",this.matrix=this.light.matrixWorld,this.matrixAutoUpdate=!1,this.update()}dispose(){this.geometry.dispose(),this.material.dispose()}update(){this.light.updateWorldMatrix(!0,!1),this.color!==void 0?this.material.color.set(this.color):this.material.color.copy(this.light.color)}}const i9=new J,P3=new Ot,O3=new Ot;class r9 extends Zn{constructor(e,t,i){super(),this.light=e,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.color=i,this.type="HemisphereLightHelper";const r=new dv(t);r.rotateY(Math.PI*.5),this.material=new Lc({wireframe:!0,fog:!1,toneMapped:!1}),this.color===void 0&&(this.material.vertexColors=!0);const s=r.getAttribute("position"),o=new Float32Array(s.count*3);r.setAttribute("color",new fi(o,3)),this.add(new Xi(r,this.material)),this.update()}dispose(){this.children[0].geometry.dispose(),this.children[0].material.dispose()}update(){const e=this.children[0];if(this.color!==void 0)this.material.color.set(this.color);else{const t=e.geometry.getAttribute("color");P3.copy(this.light.color),O3.copy(this.light.groundColor);for(let i=0,r=t.count;i<r;i++){const s=i<r/2?P3:O3;t.setXYZ(i,s.r,s.g,s.b)}t.needsUpdate=!0}this.light.updateWorldMatrix(!0,!1),e.lookAt(i9.setFromMatrixPosition(this.light.matrixWorld).negate())}}class s9 extends Vl{constructor(e=10,t=10,i=4473924,r=8947848){i=new Ot(i),r=new Ot(r);const s=t/2,o=e/t,u=e/2,f=[],p=[];for(let _=0,x=0,S=-u;_<=t;_++,S+=o){f.push(-u,0,S,u,0,S),f.push(S,0,-u,S,0,u);const A=_===s?i:r;A.toArray(p,x),x+=3,A.toArray(p,x),x+=3,A.toArray(p,x),x+=3,A.toArray(p,x),x+=3}const m=new vn;m.setAttribute("position",new kt(f,3)),m.setAttribute("color",new kt(p,3));const v=new Gs({vertexColors:!0,toneMapped:!1});super(m,v),this.type="GridHelper"}dispose(){this.geometry.dispose(),this.material.dispose()}}class a9 extends Vl{constructor(e=10,t=16,i=8,r=64,s=4473924,o=8947848){s=new Ot(s),o=new Ot(o);const u=[],f=[];if(t>1)for(let v=0;v<t;v++){const _=v/t*(Math.PI*2),x=Math.sin(_)*e,S=Math.cos(_)*e;u.push(0,0,0),u.push(x,0,S);const A=v&1?s:o;f.push(A.r,A.g,A.b),f.push(A.r,A.g,A.b)}for(let v=0;v<i;v++){const _=v&1?s:o,x=e-e/i*v;for(let S=0;S<r;S++){let A=S/r*(Math.PI*2),E=Math.sin(A)*x,M=Math.cos(A)*x;u.push(E,0,M),f.push(_.r,_.g,_.b),A=(S+1)/r*(Math.PI*2),E=Math.sin(A)*x,M=Math.cos(A)*x,u.push(E,0,M),f.push(_.r,_.g,_.b)}}const p=new vn;p.setAttribute("position",new kt(u,3)),p.setAttribute("color",new kt(f,3));const m=new Gs({vertexColors:!0,toneMapped:!1});super(p,m),this.type="PolarGridHelper"}dispose(){this.geometry.dispose(),this.material.dispose()}}const L3=new J,Z_=new J,U3=new J;class o9 extends Zn{constructor(e,t,i){super(),this.light=e,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.color=i,this.type="DirectionalLightHelper",t===void 0&&(t=1);let r=new vn;r.setAttribute("position",new kt([-t,t,0,t,t,0,t,-t,0,-t,-t,0,-t,t,0],3));const s=new Gs({fog:!1,toneMapped:!1});this.lightPlane=new Yu(r,s),this.add(this.lightPlane),r=new vn,r.setAttribute("position",new kt([0,0,0,0,0,1],3)),this.targetLine=new Yu(r,s),this.add(this.targetLine),this.update()}dispose(){this.lightPlane.geometry.dispose(),this.lightPlane.material.dispose(),this.targetLine.geometry.dispose(),this.targetLine.material.dispose()}update(){this.light.updateWorldMatrix(!0,!1),this.light.target.updateWorldMatrix(!0,!1),L3.setFromMatrixPosition(this.light.matrixWorld),Z_.setFromMatrixPosition(this.light.target.matrixWorld),U3.subVectors(Z_,L3),this.lightPlane.lookAt(Z_),this.color!==void 0?(this.lightPlane.material.color.set(this.color),this.targetLine.material.color.set(this.color)):(this.lightPlane.material.color.copy(this.light.color),this.targetLine.material.color.copy(this.light.color)),this.targetLine.lookAt(Z_),this.targetLine.scale.z=U3.length()}}const K_=new J,Qi=new Yb;class l9 extends Vl{constructor(e){const t=new vn,i=new Gs({color:16777215,vertexColors:!0,toneMapped:!1}),r=[],s=[],o={};u("n1","n2"),u("n2","n4"),u("n4","n3"),u("n3","n1"),u("f1","f2"),u("f2","f4"),u("f4","f3"),u("f3","f1"),u("n1","f1"),u("n2","f2"),u("n3","f3"),u("n4","f4"),u("p","n1"),u("p","n2"),u("p","n3"),u("p","n4"),u("u1","u2"),u("u2","u3"),u("u3","u1"),u("c","t"),u("p","c"),u("cn1","cn2"),u("cn3","cn4"),u("cf1","cf2"),u("cf3","cf4");function u(S,A){f(S),f(A)}function f(S){r.push(0,0,0),s.push(0,0,0),o[S]===void 0&&(o[S]=[]),o[S].push(r.length/3-1)}t.setAttribute("position",new kt(r,3)),t.setAttribute("color",new kt(s,3)),super(t,i),this.type="CameraHelper",this.camera=e,this.camera.updateProjectionMatrix&&this.camera.updateProjectionMatrix(),this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.pointMap=o,this.update();const p=new Ot(16755200),m=new Ot(16711680),v=new Ot(43775),_=new Ot(16777215),x=new Ot(3355443);this.setColors(p,m,v,_,x)}setColors(e,t,i,r,s){const u=this.geometry.getAttribute("color");return u.setXYZ(0,e.r,e.g,e.b),u.setXYZ(1,e.r,e.g,e.b),u.setXYZ(2,e.r,e.g,e.b),u.setXYZ(3,e.r,e.g,e.b),u.setXYZ(4,e.r,e.g,e.b),u.setXYZ(5,e.r,e.g,e.b),u.setXYZ(6,e.r,e.g,e.b),u.setXYZ(7,e.r,e.g,e.b),u.setXYZ(8,e.r,e.g,e.b),u.setXYZ(9,e.r,e.g,e.b),u.setXYZ(10,e.r,e.g,e.b),u.setXYZ(11,e.r,e.g,e.b),u.setXYZ(12,e.r,e.g,e.b),u.setXYZ(13,e.r,e.g,e.b),u.setXYZ(14,e.r,e.g,e.b),u.setXYZ(15,e.r,e.g,e.b),u.setXYZ(16,e.r,e.g,e.b),u.setXYZ(17,e.r,e.g,e.b),u.setXYZ(18,e.r,e.g,e.b),u.setXYZ(19,e.r,e.g,e.b),u.setXYZ(20,e.r,e.g,e.b),u.setXYZ(21,e.r,e.g,e.b),u.setXYZ(22,e.r,e.g,e.b),u.setXYZ(23,e.r,e.g,e.b),u.setXYZ(24,t.r,t.g,t.b),u.setXYZ(25,t.r,t.g,t.b),u.setXYZ(26,t.r,t.g,t.b),u.setXYZ(27,t.r,t.g,t.b),u.setXYZ(28,t.r,t.g,t.b),u.setXYZ(29,t.r,t.g,t.b),u.setXYZ(30,t.r,t.g,t.b),u.setXYZ(31,t.r,t.g,t.b),u.setXYZ(32,i.r,i.g,i.b),u.setXYZ(33,i.r,i.g,i.b),u.setXYZ(34,i.r,i.g,i.b),u.setXYZ(35,i.r,i.g,i.b),u.setXYZ(36,i.r,i.g,i.b),u.setXYZ(37,i.r,i.g,i.b),u.setXYZ(38,r.r,r.g,r.b),u.setXYZ(39,r.r,r.g,r.b),u.setXYZ(40,s.r,s.g,s.b),u.setXYZ(41,s.r,s.g,s.b),u.setXYZ(42,s.r,s.g,s.b),u.setXYZ(43,s.r,s.g,s.b),u.setXYZ(44,s.r,s.g,s.b),u.setXYZ(45,s.r,s.g,s.b),u.setXYZ(46,s.r,s.g,s.b),u.setXYZ(47,s.r,s.g,s.b),u.setXYZ(48,s.r,s.g,s.b),u.setXYZ(49,s.r,s.g,s.b),u.needsUpdate=!0,this}update(){const e=this.geometry,t=this.pointMap,i=1,r=1;let s,o;if(Qi.projectionMatrixInverse.copy(this.camera.projectionMatrixInverse),this.camera.reversedDepth===!0)s=1,o=0;else if(this.camera.coordinateSystem===Ma)s=-1,o=1;else if(this.camera.coordinateSystem===Up)s=0,o=1;else throw new Error("THREE.CameraHelper.update(): Invalid coordinate system: "+this.camera.coordinateSystem);fr("c",t,e,Qi,0,0,s),fr("t",t,e,Qi,0,0,o),fr("n1",t,e,Qi,-i,-r,s),fr("n2",t,e,Qi,i,-r,s),fr("n3",t,e,Qi,-i,r,s),fr("n4",t,e,Qi,i,r,s),fr("f1",t,e,Qi,-i,-r,o),fr("f2",t,e,Qi,i,-r,o),fr("f3",t,e,Qi,-i,r,o),fr("f4",t,e,Qi,i,r,o),fr("u1",t,e,Qi,i*.7,r*1.1,s),fr("u2",t,e,Qi,-i*.7,r*1.1,s),fr("u3",t,e,Qi,0,r*2,s),fr("cf1",t,e,Qi,-i,0,o),fr("cf2",t,e,Qi,i,0,o),fr("cf3",t,e,Qi,0,-r,o),fr("cf4",t,e,Qi,0,r,o),fr("cn1",t,e,Qi,-i,0,s),fr("cn2",t,e,Qi,i,0,s),fr("cn3",t,e,Qi,0,-r,s),fr("cn4",t,e,Qi,0,r,s),e.getAttribute("position").needsUpdate=!0}dispose(){this.geometry.dispose(),this.material.dispose()}}function fr(n,e,t,i,r,s,o){K_.set(r,s,o).unproject(i);const u=e[n];if(u!==void 0){const f=t.getAttribute("position");for(let p=0,m=u.length;p<m;p++)f.setXYZ(u[p],K_.x,K_.y,K_.z)}}const J_=new bs;class c9 extends Vl{constructor(e,t=16776960){const i=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),r=new Float32Array(24),s=new vn;s.setIndex(new fi(i,1)),s.setAttribute("position",new fi(r,3)),super(s,new Gs({color:t,toneMapped:!1})),this.object=e,this.type="BoxHelper",this.matrixAutoUpdate=!1,this.update()}update(){if(this.object!==void 0&&J_.setFromObject(this.object),J_.isEmpty())return;const e=J_.min,t=J_.max,i=this.geometry.attributes.position,r=i.array;r[0]=t.x,r[1]=t.y,r[2]=t.z,r[3]=e.x,r[4]=t.y,r[5]=t.z,r[6]=e.x,r[7]=e.y,r[8]=t.z,r[9]=t.x,r[10]=e.y,r[11]=t.z,r[12]=t.x,r[13]=t.y,r[14]=e.z,r[15]=e.x,r[16]=t.y,r[17]=e.z,r[18]=e.x,r[19]=e.y,r[20]=e.z,r[21]=t.x,r[22]=e.y,r[23]=e.z,i.needsUpdate=!0,this.geometry.computeBoundingSphere()}setFromObject(e){return this.object=e,this.update(),this}copy(e,t){return super.copy(e,t),this.object=e.object,this}dispose(){this.geometry.dispose(),this.material.dispose()}}class u9 extends Vl{constructor(e,t=16776960){const i=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),r=[1,1,1,-1,1,1,-1,-1,1,1,-1,1,1,1,-1,-1,1,-1,-1,-1,-1,1,-1,-1],s=new vn;s.setIndex(new fi(i,1)),s.setAttribute("position",new kt(r,3)),super(s,new Gs({color:t,toneMapped:!1})),this.box=e,this.type="Box3Helper",this.geometry.computeBoundingSphere()}updateMatrixWorld(e){const t=this.box;t.isEmpty()||(t.getCenter(this.position),t.getSize(this.scale),this.scale.multiplyScalar(.5),super.updateMatrixWorld(e))}dispose(){this.geometry.dispose(),this.material.dispose()}}class h9 extends Yu{constructor(e,t=1,i=16776960){const r=i,s=[1,-1,0,-1,1,0,-1,-1,0,1,1,0,-1,1,0,-1,-1,0,1,-1,0,1,1,0],o=new vn;o.setAttribute("position",new kt(s,3)),o.computeBoundingSphere(),super(o,new Gs({color:r,toneMapped:!1})),this.type="PlaneHelper",this.plane=e,this.size=t;const u=[1,1,0,-1,1,0,-1,-1,0,1,1,0,-1,-1,0,1,-1,0],f=new vn;f.setAttribute("position",new kt(u,3)),f.computeBoundingSphere(),this.add(new Xi(f,new Lc({color:r,opacity:.2,transparent:!0,depthWrite:!1,toneMapped:!1})))}updateMatrixWorld(e){this.position.set(0,0,0),this.scale.set(.5*this.size,.5*this.size,1),this.lookAt(this.plane.normal),this.translateZ(-this.plane.constant),super.updateMatrixWorld(e)}dispose(){this.geometry.dispose(),this.material.dispose(),this.children[0].geometry.dispose(),this.children[0].material.dispose()}}const k3=new J;let Q_,_w;class f9 extends Zn{constructor(e=new J(0,0,1),t=new J(0,0,0),i=1,r=16776960,s=i*.2,o=s*.2){super(),this.type="ArrowHelper",Q_===void 0&&(Q_=new vn,Q_.setAttribute("position",new kt([0,0,0,0,1,0],3)),_w=new hv(.5,1,5,1),_w.translate(0,-.5,0)),this.position.copy(t),this.line=new Yu(Q_,new Gs({color:r,toneMapped:!1})),this.line.matrixAutoUpdate=!1,this.add(this.line),this.cone=new Xi(_w,new Lc({color:r,toneMapped:!1})),this.cone.matrixAutoUpdate=!1,this.add(this.cone),this.setDirection(e),this.setLength(i,s,o)}setDirection(e){if(e.y>.99999)this.quaternion.set(0,0,0,1);else if(e.y<-.99999)this.quaternion.set(1,0,0,0);else{k3.set(e.z,0,-e.x).normalize();const t=Math.acos(e.y);this.quaternion.setFromAxisAngle(k3,t)}}setLength(e,t=e*.2,i=t*.2){this.line.scale.set(1,Math.max(1e-4,e-t),1),this.line.updateMatrix(),this.cone.scale.set(i,t,i),this.cone.position.y=e,this.cone.updateMatrix()}setColor(e){this.line.material.color.set(e),this.cone.material.color.set(e)}copy(e){return super.copy(e,!1),this.line.copy(e.line),this.cone.copy(e.cone),this}dispose(){this.line.geometry.dispose(),this.line.material.dispose(),this.cone.geometry.dispose(),this.cone.material.dispose()}}class d9 extends Vl{constructor(e=1){const t=[0,0,0,e,0,0,0,0,0,0,e,0,0,0,0,0,0,e],i=[1,0,0,1,.6,0,0,1,0,.6,1,0,0,0,1,0,.6,1],r=new vn;r.setAttribute("position",new kt(t,3)),r.setAttribute("color",new kt(i,3));const s=new Gs({vertexColors:!0,toneMapped:!1});super(r,s),this.type="AxesHelper"}setColors(e,t,i){const r=new Ot,s=this.geometry.attributes.color.array;return r.set(e),r.toArray(s,0),r.toArray(s,3),r.set(t),r.toArray(s,6),r.toArray(s,9),r.set(i),r.toArray(s,12),r.toArray(s,15),this.geometry.attributes.color.needsUpdate=!0,this}dispose(){this.geometry.dispose(),this.material.dispose()}}class p9{constructor(){this.type="ShapePath",this.color=new Ot,this.subPaths=[],this.currentPath=null}moveTo(e,t){return this.currentPath=new _b,this.subPaths.push(this.currentPath),this.currentPath.moveTo(e,t),this}lineTo(e,t){return this.currentPath.lineTo(e,t),this}quadraticCurveTo(e,t,i,r){return this.currentPath.quadraticCurveTo(e,t,i,r),this}bezierCurveTo(e,t,i,r,s,o){return this.currentPath.bezierCurveTo(e,t,i,r,s,o),this}splineThru(e){return this.currentPath.splineThru(e),this}toShapes(e){function t(M){const C=[];for(let N=0,I=M.length;N<I;N++){const U=M[N],L=new Sf;L.curves=U.curves,C.push(L)}return C}function i(M,C){const N=C.length;let I=!1;for(let U=N-1,L=0;L<N;U=L++){let F=C[U],H=C[L],P=H.x-F.x,k=H.y-F.y;if(Math.abs(k)>Number.EPSILON){if(k<0&&(F=C[L],P=-P,H=C[U],k=-k),M.y<F.y||M.y>H.y)continue;if(M.y===F.y){if(M.x===F.x)return!0}else{const Y=k*(M.x-F.x)-P*(M.y-F.y);if(Y===0)return!0;if(Y<0)continue;I=!I}}else{if(M.y!==F.y)continue;if(H.x<=M.x&&M.x<=F.x||F.x<=M.x&&M.x<=H.x)return!0}}return I}const r=qo.isClockWise,s=this.subPaths;if(s.length===0)return[];let o,u,f;const p=[];if(s.length===1)return u=s[0],f=new Sf,f.curves=u.curves,p.push(f),p;let m=!r(s[0].getPoints());m=e?!m:m;const v=[],_=[];let x=[],S=0,A;_[S]=void 0,x[S]=[];for(let M=0,C=s.length;M<C;M++)u=s[M],A=u.getPoints(),o=r(A),o=e?!o:o,o?(!m&&_[S]&&S++,_[S]={s:new Sf,p:A},_[S].s.curves=u.curves,m&&S++,x[S]=[]):x[S].push({h:u,p:A[0]});if(!_[0])return t(s);if(_.length>1){let M=!1,C=0;for(let N=0,I=_.length;N<I;N++)v[N]=[];for(let N=0,I=_.length;N<I;N++){const U=x[N];for(let L=0;L<U.length;L++){const F=U[L];let H=!0;for(let P=0;P<_.length;P++)i(F.p,_[P].p)&&(N!==P&&C++,H?(H=!1,v[P].push(F)):M=!0);H&&v[N].push(F)}}C>0&&M===!1&&(x=v)}let E;for(let M=0,C=_.length;M<C;M++){f=_[M].s,p.push(f),E=x[M];for(let N=0,I=E.length;N<I;N++)f.holes.push(E[N].h)}return p}}class m9 extends Fl{constructor(e,t=null){super(),this.object=e,this.domElement=t,this.enabled=!0,this.state=-1,this.keys={},this.mouseButtons={LEFT:null,MIDDLE:null,RIGHT:null},this.touches={ONE:null,TWO:null}}connect(e){if(e===void 0){At("Controls: connect() now requires an element.");return}this.domElement!==null&&this.disconnect(),this.domElement=e}disconnect(){}dispose(){}update(){}}function g9(n,e){const t=n.image&&n.image.width?n.image.width/n.image.height:1;return t>e?(n.repeat.x=1,n.repeat.y=t/e,n.offset.x=0,n.offset.y=(1-n.repeat.y)/2):(n.repeat.x=e/t,n.repeat.y=1,n.offset.x=(1-n.repeat.x)/2,n.offset.y=0),n}function v9(n,e){const t=n.image&&n.image.width?n.image.width/n.image.height:1;return t>e?(n.repeat.x=e/t,n.repeat.y=1,n.offset.x=(1-n.repeat.x)/2,n.offset.y=0):(n.repeat.x=1,n.repeat.y=t/e,n.offset.x=0,n.offset.y=(1-n.repeat.y)/2),n}function y9(n){return n.repeat.x=1,n.repeat.y=1,n.offset.x=0,n.offset.y=0,n}function LM(n,e,t,i){const r=_9(i);switch(t){case WE:return n*e;case av:return n*e/r.components*r.byteLength;case ov:return n*e/r.components*r.byteLength;case Mf:return n*e*2/r.components*r.byteLength;case Hb:return n*e*2/r.components*r.byteLength;case qE:return n*e*3/r.components*r.byteLength;case pr:return n*e*4/r.components*r.byteLength;case Gb:return n*e*4/r.components*r.byteLength;case l0:case c0:return Math.floor((n+3)/4)*Math.floor((e+3)/4)*8;case u0:case h0:return Math.floor((n+3)/4)*Math.floor((e+3)/4)*16;case Bx:case Fx:return Math.max(n,16)*Math.max(e,8)/4;case kx:case zx:return Math.max(n,8)*Math.max(e,8)/2;case Vx:case Hx:case jx:case Wx:return Math.floor((n+3)/4)*Math.floor((e+3)/4)*8;case Gx:case qx:case Xx:return Math.floor((n+3)/4)*Math.floor((e+3)/4)*16;case $x:return Math.floor((n+3)/4)*Math.floor((e+3)/4)*16;case Yx:return Math.floor((n+4)/5)*Math.floor((e+3)/4)*16;case Zx:return Math.floor((n+4)/5)*Math.floor((e+4)/5)*16;case Kx:return Math.floor((n+5)/6)*Math.floor((e+4)/5)*16;case Jx:return Math.floor((n+5)/6)*Math.floor((e+5)/6)*16;case Qx:return Math.floor((n+7)/8)*Math.floor((e+4)/5)*16;case eb:return Math.floor((n+7)/8)*Math.floor((e+5)/6)*16;case tb:return Math.floor((n+7)/8)*Math.floor((e+7)/8)*16;case nb:return Math.floor((n+9)/10)*Math.floor((e+4)/5)*16;case ib:return Math.floor((n+9)/10)*Math.floor((e+5)/6)*16;case rb:return Math.floor((n+9)/10)*Math.floor((e+7)/8)*16;case sb:return Math.floor((n+9)/10)*Math.floor((e+9)/10)*16;case ab:return Math.floor((n+11)/12)*Math.floor((e+9)/10)*16;case ob:return Math.floor((n+11)/12)*Math.floor((e+11)/12)*16;case lb:case cb:case ub:return Math.ceil(n/4)*Math.ceil(e/4)*16;case hb:case fb:return Math.ceil(n/4)*Math.ceil(e/4)*8;case db:case pb:return Math.ceil(n/4)*Math.ceil(e/4)*16}throw new Error(`Unable to determine texture byte length for ${t} format.`)}function _9(n){switch(n){case Gr:case Bb:return{byteLength:1,components:1};case Op:case zb:case ir:return{byteLength:2,components:1};case Fb:case Vb:return{byteLength:2,components:4};case Aa:case sv:case ki:return{byteLength:4,components:1};case GE:case jE:return{byteLength:4,components:3}}throw new Error(`Unknown texture type ${n}.`)}class x9{static contain(e,t){return g9(e,t)}static cover(e,t){return v9(e,t)}static fill(e){return y9(e)}static getByteLength(e,t,i,r){return LM(e,t,i,r)}}typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("register",{detail:{revision:Kp}}));typeof window<"u"&&(window.__THREE__?At("WARNING: Multiple instances of Three.js being imported."):window.__THREE__=Kp);function XO(){let n=null,e=!1,t=null,i=null;function r(s,o){t(s,o),i=n.requestAnimationFrame(r)}return{start:function(){e!==!0&&t!==null&&(i=n.requestAnimationFrame(r),e=!0)},stop:function(){n.cancelAnimationFrame(i),e=!1},setAnimationLoop:function(s){t=s},setContext:function(s){n=s}}}function b9(n){const e=new WeakMap;function t(u,f){const p=u.array,m=u.usage,v=p.byteLength,_=n.createBuffer();n.bindBuffer(f,_),n.bufferData(f,p,m),u.onUploadCallback();let x;if(p instanceof Float32Array)x=n.FLOAT;else if(typeof Float16Array<"u"&&p instanceof Float16Array)x=n.HALF_FLOAT;else if(p instanceof Uint16Array)u.isFloat16BufferAttribute?x=n.HALF_FLOAT:x=n.UNSIGNED_SHORT;else if(p instanceof Int16Array)x=n.SHORT;else if(p instanceof Uint32Array)x=n.UNSIGNED_INT;else if(p instanceof Int32Array)x=n.INT;else if(p instanceof Int8Array)x=n.BYTE;else if(p instanceof Uint8Array)x=n.UNSIGNED_BYTE;else if(p instanceof Uint8ClampedArray)x=n.UNSIGNED_BYTE;else throw new Error("THREE.WebGLAttributes: Unsupported buffer data format: "+p);return{buffer:_,type:x,bytesPerElement:p.BYTES_PER_ELEMENT,version:u.version,size:v}}function i(u,f,p){const m=f.array,v=f.updateRanges;if(n.bindBuffer(p,u),v.length===0)n.bufferSubData(p,0,m);else{v.sort((x,S)=>x.start-S.start);let _=0;for(let x=1;x<v.length;x++){const S=v[_],A=v[x];A.start<=S.start+S.count+1?S.count=Math.max(S.count,A.start+A.count-S.start):(++_,v[_]=A)}v.length=_+1;for(let x=0,S=v.length;x<S;x++){const A=v[x];n.bufferSubData(p,A.start*m.BYTES_PER_ELEMENT,m,A.start,A.count)}f.clearUpdateRanges()}f.onUploadCallback()}function r(u){return u.isInterleavedBufferAttribute&&(u=u.data),e.get(u)}function s(u){u.isInterleavedBufferAttribute&&(u=u.data);const f=e.get(u);f&&(n.deleteBuffer(f.buffer),e.delete(u))}function o(u,f){if(u.isInterleavedBufferAttribute&&(u=u.data),u.isGLBufferAttribute){const m=e.get(u);(!m||m.version<u.version)&&e.set(u,{buffer:u.buffer,type:u.type,bytesPerElement:u.elementSize,version:u.version});return}const p=e.get(u);if(p===void 0)e.set(u,t(u,f));else if(p.version<u.version){if(p.size!==u.array.byteLength)throw new Error("THREE.WebGLAttributes: The size of the buffer attribute's array buffer does not match the original size. Resizing buffer attributes is not supported.");i(p.buffer,u,f),p.version=u.version}}return{get:r,remove:s,update:o}}var S9=`#ifdef USE_ALPHAHASH
	if ( diffuseColor.a < getAlphaHashThreshold( vPosition ) ) discard;
#endif`,w9=`#ifdef USE_ALPHAHASH
	const float ALPHA_HASH_SCALE = 0.05;
	float hash2D( vec2 value ) {
		return fract( 1.0e4 * sin( 17.0 * value.x + 0.1 * value.y ) * ( 0.1 + abs( sin( 13.0 * value.y + value.x ) ) ) );
	}
	float hash3D( vec3 value ) {
		return hash2D( vec2( hash2D( value.xy ), value.z ) );
	}
	float getAlphaHashThreshold( vec3 position ) {
		float maxDeriv = max(
			length( dFdx( position.xyz ) ),
			length( dFdy( position.xyz ) )
		);
		float pixScale = 1.0 / ( ALPHA_HASH_SCALE * maxDeriv );
		vec2 pixScales = vec2(
			exp2( floor( log2( pixScale ) ) ),
			exp2( ceil( log2( pixScale ) ) )
		);
		vec2 alpha = vec2(
			hash3D( floor( pixScales.x * position.xyz ) ),
			hash3D( floor( pixScales.y * position.xyz ) )
		);
		float lerpFactor = fract( log2( pixScale ) );
		float x = ( 1.0 - lerpFactor ) * alpha.x + lerpFactor * alpha.y;
		float a = min( lerpFactor, 1.0 - lerpFactor );
		vec3 cases = vec3(
			x * x / ( 2.0 * a * ( 1.0 - a ) ),
			( x - 0.5 * a ) / ( 1.0 - a ),
			1.0 - ( ( 1.0 - x ) * ( 1.0 - x ) / ( 2.0 * a * ( 1.0 - a ) ) )
		);
		float threshold = ( x < ( 1.0 - a ) )
			? ( ( x < a ) ? cases.x : cases.y )
			: cases.z;
		return clamp( threshold , 1.0e-6, 1.0 );
	}
#endif`,M9=`#ifdef USE_ALPHAMAP
	diffuseColor.a *= texture2D( alphaMap, vAlphaMapUv ).g;
#endif`,E9=`#ifdef USE_ALPHAMAP
	uniform sampler2D alphaMap;
#endif`,T9=`#ifdef USE_ALPHATEST
	#ifdef ALPHA_TO_COVERAGE
	diffuseColor.a = smoothstep( alphaTest, alphaTest + fwidth( diffuseColor.a ), diffuseColor.a );
	if ( diffuseColor.a == 0.0 ) discard;
	#else
	if ( diffuseColor.a < alphaTest ) discard;
	#endif
#endif`,A9=`#ifdef USE_ALPHATEST
	uniform float alphaTest;
#endif`,C9=`#ifdef USE_AOMAP
	float ambientOcclusion = ( texture2D( aoMap, vAoMapUv ).r - 1.0 ) * aoMapIntensity + 1.0;
	reflectedLight.indirectDiffuse *= ambientOcclusion;
	#if defined( USE_CLEARCOAT ) 
		clearcoatSpecularIndirect *= ambientOcclusion;
	#endif
	#if defined( USE_SHEEN ) 
		sheenSpecularIndirect *= ambientOcclusion;
	#endif
	#if defined( USE_ENVMAP ) && defined( STANDARD )
		float dotNV = saturate( dot( geometryNormal, geometryViewDir ) );
		reflectedLight.indirectSpecular *= computeSpecularOcclusion( dotNV, ambientOcclusion, material.roughness );
	#endif
#endif`,R9=`#ifdef USE_AOMAP
	uniform sampler2D aoMap;
	uniform float aoMapIntensity;
#endif`,N9=`#ifdef USE_BATCHING
	#if ! defined( GL_ANGLE_multi_draw )
	#define gl_DrawID _gl_DrawID
	uniform int _gl_DrawID;
	#endif
	uniform highp sampler2D batchingTexture;
	uniform highp usampler2D batchingIdTexture;
	mat4 getBatchingMatrix( const in float i ) {
		int size = textureSize( batchingTexture, 0 ).x;
		int j = int( i ) * 4;
		int x = j % size;
		int y = j / size;
		vec4 v1 = texelFetch( batchingTexture, ivec2( x, y ), 0 );
		vec4 v2 = texelFetch( batchingTexture, ivec2( x + 1, y ), 0 );
		vec4 v3 = texelFetch( batchingTexture, ivec2( x + 2, y ), 0 );
		vec4 v4 = texelFetch( batchingTexture, ivec2( x + 3, y ), 0 );
		return mat4( v1, v2, v3, v4 );
	}
	float getIndirectIndex( const in int i ) {
		int size = textureSize( batchingIdTexture, 0 ).x;
		int x = i % size;
		int y = i / size;
		return float( texelFetch( batchingIdTexture, ivec2( x, y ), 0 ).r );
	}
#endif
#ifdef USE_BATCHING_COLOR
	uniform sampler2D batchingColorTexture;
	vec3 getBatchingColor( const in float i ) {
		int size = textureSize( batchingColorTexture, 0 ).x;
		int j = int( i );
		int x = j % size;
		int y = j / size;
		return texelFetch( batchingColorTexture, ivec2( x, y ), 0 ).rgb;
	}
#endif`,D9=`#ifdef USE_BATCHING
	mat4 batchingMatrix = getBatchingMatrix( getIndirectIndex( gl_DrawID ) );
#endif`,I9=`vec3 transformed = vec3( position );
#ifdef USE_ALPHAHASH
	vPosition = vec3( position );
#endif`,P9=`vec3 objectNormal = vec3( normal );
#ifdef USE_TANGENT
	vec3 objectTangent = vec3( tangent.xyz );
#endif`,O9=`float G_BlinnPhong_Implicit( ) {
	return 0.25;
}
float D_BlinnPhong( const in float shininess, const in float dotNH ) {
	return RECIPROCAL_PI * ( shininess * 0.5 + 1.0 ) * pow( dotNH, shininess );
}
vec3 BRDF_BlinnPhong( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 specularColor, const in float shininess ) {
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNH = saturate( dot( normal, halfDir ) );
	float dotVH = saturate( dot( viewDir, halfDir ) );
	vec3 F = F_Schlick( specularColor, 1.0, dotVH );
	float G = G_BlinnPhong_Implicit( );
	float D = D_BlinnPhong( shininess, dotNH );
	return F * ( G * D );
} // validated`,L9=`#ifdef USE_IRIDESCENCE
	const mat3 XYZ_TO_REC709 = mat3(
		 3.2404542, -0.9692660,  0.0556434,
		-1.5371385,  1.8760108, -0.2040259,
		-0.4985314,  0.0415560,  1.0572252
	);
	vec3 Fresnel0ToIor( vec3 fresnel0 ) {
		vec3 sqrtF0 = sqrt( fresnel0 );
		return ( vec3( 1.0 ) + sqrtF0 ) / ( vec3( 1.0 ) - sqrtF0 );
	}
	vec3 IorToFresnel0( vec3 transmittedIor, float incidentIor ) {
		return pow2( ( transmittedIor - vec3( incidentIor ) ) / ( transmittedIor + vec3( incidentIor ) ) );
	}
	float IorToFresnel0( float transmittedIor, float incidentIor ) {
		return pow2( ( transmittedIor - incidentIor ) / ( transmittedIor + incidentIor ));
	}
	vec3 evalSensitivity( float OPD, vec3 shift ) {
		float phase = 2.0 * PI * OPD * 1.0e-9;
		vec3 val = vec3( 5.4856e-13, 4.4201e-13, 5.2481e-13 );
		vec3 pos = vec3( 1.6810e+06, 1.7953e+06, 2.2084e+06 );
		vec3 var = vec3( 4.3278e+09, 9.3046e+09, 6.6121e+09 );
		vec3 xyz = val * sqrt( 2.0 * PI * var ) * cos( pos * phase + shift ) * exp( - pow2( phase ) * var );
		xyz.x += 9.7470e-14 * sqrt( 2.0 * PI * 4.5282e+09 ) * cos( 2.2399e+06 * phase + shift[ 0 ] ) * exp( - 4.5282e+09 * pow2( phase ) );
		xyz /= 1.0685e-7;
		vec3 rgb = XYZ_TO_REC709 * xyz;
		return rgb;
	}
	vec3 evalIridescence( float outsideIOR, float eta2, float cosTheta1, float thinFilmThickness, vec3 baseF0 ) {
		vec3 I;
		float iridescenceIOR = mix( outsideIOR, eta2, smoothstep( 0.0, 0.03, thinFilmThickness ) );
		float sinTheta2Sq = pow2( outsideIOR / iridescenceIOR ) * ( 1.0 - pow2( cosTheta1 ) );
		float cosTheta2Sq = 1.0 - sinTheta2Sq;
		if ( cosTheta2Sq < 0.0 ) {
			return vec3( 1.0 );
		}
		float cosTheta2 = sqrt( cosTheta2Sq );
		float R0 = IorToFresnel0( iridescenceIOR, outsideIOR );
		float R12 = F_Schlick( R0, 1.0, cosTheta1 );
		float T121 = 1.0 - R12;
		float phi12 = 0.0;
		if ( iridescenceIOR < outsideIOR ) phi12 = PI;
		float phi21 = PI - phi12;
		vec3 baseIOR = Fresnel0ToIor( clamp( baseF0, 0.0, 0.9999 ) );		vec3 R1 = IorToFresnel0( baseIOR, iridescenceIOR );
		vec3 R23 = F_Schlick( R1, 1.0, cosTheta2 );
		vec3 phi23 = vec3( 0.0 );
		if ( baseIOR[ 0 ] < iridescenceIOR ) phi23[ 0 ] = PI;
		if ( baseIOR[ 1 ] < iridescenceIOR ) phi23[ 1 ] = PI;
		if ( baseIOR[ 2 ] < iridescenceIOR ) phi23[ 2 ] = PI;
		float OPD = 2.0 * iridescenceIOR * thinFilmThickness * cosTheta2;
		vec3 phi = vec3( phi21 ) + phi23;
		vec3 R123 = clamp( R12 * R23, 1e-5, 0.9999 );
		vec3 r123 = sqrt( R123 );
		vec3 Rs = pow2( T121 ) * R23 / ( vec3( 1.0 ) - R123 );
		vec3 C0 = R12 + Rs;
		I = C0;
		vec3 Cm = Rs - T121;
		for ( int m = 1; m <= 2; ++ m ) {
			Cm *= r123;
			vec3 Sm = 2.0 * evalSensitivity( float( m ) * OPD, float( m ) * phi );
			I += Cm * Sm;
		}
		return max( I, vec3( 0.0 ) );
	}
#endif`,U9=`#ifdef USE_BUMPMAP
	uniform sampler2D bumpMap;
	uniform float bumpScale;
	vec2 dHdxy_fwd() {
		vec2 dSTdx = dFdx( vBumpMapUv );
		vec2 dSTdy = dFdy( vBumpMapUv );
		float Hll = bumpScale * texture2D( bumpMap, vBumpMapUv ).x;
		float dBx = bumpScale * texture2D( bumpMap, vBumpMapUv + dSTdx ).x - Hll;
		float dBy = bumpScale * texture2D( bumpMap, vBumpMapUv + dSTdy ).x - Hll;
		return vec2( dBx, dBy );
	}
	vec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy, float faceDirection ) {
		vec3 vSigmaX = normalize( dFdx( surf_pos.xyz ) );
		vec3 vSigmaY = normalize( dFdy( surf_pos.xyz ) );
		vec3 vN = surf_norm;
		vec3 R1 = cross( vSigmaY, vN );
		vec3 R2 = cross( vN, vSigmaX );
		float fDet = dot( vSigmaX, R1 ) * faceDirection;
		vec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );
		return normalize( abs( fDet ) * surf_norm - vGrad );
	}
#endif`,k9=`#if NUM_CLIPPING_PLANES > 0
	vec4 plane;
	#ifdef ALPHA_TO_COVERAGE
		float distanceToPlane, distanceGradient;
		float clipOpacity = 1.0;
		#pragma unroll_loop_start
		for ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {
			plane = clippingPlanes[ i ];
			distanceToPlane = - dot( vClipPosition, plane.xyz ) + plane.w;
			distanceGradient = fwidth( distanceToPlane ) / 2.0;
			clipOpacity *= smoothstep( - distanceGradient, distanceGradient, distanceToPlane );
			if ( clipOpacity == 0.0 ) discard;
		}
		#pragma unroll_loop_end
		#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES
			float unionClipOpacity = 1.0;
			#pragma unroll_loop_start
			for ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {
				plane = clippingPlanes[ i ];
				distanceToPlane = - dot( vClipPosition, plane.xyz ) + plane.w;
				distanceGradient = fwidth( distanceToPlane ) / 2.0;
				unionClipOpacity *= 1.0 - smoothstep( - distanceGradient, distanceGradient, distanceToPlane );
			}
			#pragma unroll_loop_end
			clipOpacity *= 1.0 - unionClipOpacity;
		#endif
		diffuseColor.a *= clipOpacity;
		if ( diffuseColor.a == 0.0 ) discard;
	#else
		#pragma unroll_loop_start
		for ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {
			plane = clippingPlanes[ i ];
			if ( dot( vClipPosition, plane.xyz ) > plane.w ) discard;
		}
		#pragma unroll_loop_end
		#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES
			bool clipped = true;
			#pragma unroll_loop_start
			for ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {
				plane = clippingPlanes[ i ];
				clipped = ( dot( vClipPosition, plane.xyz ) > plane.w ) && clipped;
			}
			#pragma unroll_loop_end
			if ( clipped ) discard;
		#endif
	#endif
#endif`,B9=`#if NUM_CLIPPING_PLANES > 0
	varying vec3 vClipPosition;
	uniform vec4 clippingPlanes[ NUM_CLIPPING_PLANES ];
#endif`,z9=`#if NUM_CLIPPING_PLANES > 0
	varying vec3 vClipPosition;
#endif`,F9=`#if NUM_CLIPPING_PLANES > 0
	vClipPosition = - mvPosition.xyz;
#endif`,V9=`#if defined( USE_COLOR_ALPHA )
	diffuseColor *= vColor;
#elif defined( USE_COLOR )
	diffuseColor.rgb *= vColor;
#endif`,H9=`#if defined( USE_COLOR_ALPHA )
	varying vec4 vColor;
#elif defined( USE_COLOR )
	varying vec3 vColor;
#endif`,G9=`#if defined( USE_COLOR_ALPHA )
	varying vec4 vColor;
#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR ) || defined( USE_BATCHING_COLOR )
	varying vec3 vColor;
#endif`,j9=`#if defined( USE_COLOR_ALPHA )
	vColor = vec4( 1.0 );
#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR ) || defined( USE_BATCHING_COLOR )
	vColor = vec3( 1.0 );
#endif
#ifdef USE_COLOR
	vColor *= color;
#endif
#ifdef USE_INSTANCING_COLOR
	vColor.xyz *= instanceColor.xyz;
#endif
#ifdef USE_BATCHING_COLOR
	vec3 batchingColor = getBatchingColor( getIndirectIndex( gl_DrawID ) );
	vColor.xyz *= batchingColor.xyz;
#endif`,W9=`#define PI 3.141592653589793
#define PI2 6.283185307179586
#define PI_HALF 1.5707963267948966
#define RECIPROCAL_PI 0.3183098861837907
#define RECIPROCAL_PI2 0.15915494309189535
#define EPSILON 1e-6
#ifndef saturate
#define saturate( a ) clamp( a, 0.0, 1.0 )
#endif
#define whiteComplement( a ) ( 1.0 - saturate( a ) )
float pow2( const in float x ) { return x*x; }
vec3 pow2( const in vec3 x ) { return x*x; }
float pow3( const in float x ) { return x*x*x; }
float pow4( const in float x ) { float x2 = x*x; return x2*x2; }
float max3( const in vec3 v ) { return max( max( v.x, v.y ), v.z ); }
float average( const in vec3 v ) { return dot( v, vec3( 0.3333333 ) ); }
highp float rand( const in vec2 uv ) {
	const highp float a = 12.9898, b = 78.233, c = 43758.5453;
	highp float dt = dot( uv.xy, vec2( a,b ) ), sn = mod( dt, PI );
	return fract( sin( sn ) * c );
}
#ifdef HIGH_PRECISION
	float precisionSafeLength( vec3 v ) { return length( v ); }
#else
	float precisionSafeLength( vec3 v ) {
		float maxComponent = max3( abs( v ) );
		return length( v / maxComponent ) * maxComponent;
	}
#endif
struct IncidentLight {
	vec3 color;
	vec3 direction;
	bool visible;
};
struct ReflectedLight {
	vec3 directDiffuse;
	vec3 directSpecular;
	vec3 indirectDiffuse;
	vec3 indirectSpecular;
};
#ifdef USE_ALPHAHASH
	varying vec3 vPosition;
#endif
vec3 transformDirection( in vec3 dir, in mat4 matrix ) {
	return normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );
}
vec3 inverseTransformDirection( in vec3 dir, in mat4 matrix ) {
	return normalize( ( vec4( dir, 0.0 ) * matrix ).xyz );
}
bool isPerspectiveMatrix( mat4 m ) {
	return m[ 2 ][ 3 ] == - 1.0;
}
vec2 equirectUv( in vec3 dir ) {
	float u = atan( dir.z, dir.x ) * RECIPROCAL_PI2 + 0.5;
	float v = asin( clamp( dir.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;
	return vec2( u, v );
}
vec3 BRDF_Lambert( const in vec3 diffuseColor ) {
	return RECIPROCAL_PI * diffuseColor;
}
vec3 F_Schlick( const in vec3 f0, const in float f90, const in float dotVH ) {
	float fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );
	return f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );
}
float F_Schlick( const in float f0, const in float f90, const in float dotVH ) {
	float fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );
	return f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );
} // validated`,q9=`#ifdef ENVMAP_TYPE_CUBE_UV
	#define cubeUV_minMipLevel 4.0
	#define cubeUV_minTileSize 16.0
	float getFace( vec3 direction ) {
		vec3 absDirection = abs( direction );
		float face = - 1.0;
		if ( absDirection.x > absDirection.z ) {
			if ( absDirection.x > absDirection.y )
				face = direction.x > 0.0 ? 0.0 : 3.0;
			else
				face = direction.y > 0.0 ? 1.0 : 4.0;
		} else {
			if ( absDirection.z > absDirection.y )
				face = direction.z > 0.0 ? 2.0 : 5.0;
			else
				face = direction.y > 0.0 ? 1.0 : 4.0;
		}
		return face;
	}
	vec2 getUV( vec3 direction, float face ) {
		vec2 uv;
		if ( face == 0.0 ) {
			uv = vec2( direction.z, direction.y ) / abs( direction.x );
		} else if ( face == 1.0 ) {
			uv = vec2( - direction.x, - direction.z ) / abs( direction.y );
		} else if ( face == 2.0 ) {
			uv = vec2( - direction.x, direction.y ) / abs( direction.z );
		} else if ( face == 3.0 ) {
			uv = vec2( - direction.z, direction.y ) / abs( direction.x );
		} else if ( face == 4.0 ) {
			uv = vec2( - direction.x, direction.z ) / abs( direction.y );
		} else {
			uv = vec2( direction.x, direction.y ) / abs( direction.z );
		}
		return 0.5 * ( uv + 1.0 );
	}
	vec3 bilinearCubeUV( sampler2D envMap, vec3 direction, float mipInt ) {
		float face = getFace( direction );
		float filterInt = max( cubeUV_minMipLevel - mipInt, 0.0 );
		mipInt = max( mipInt, cubeUV_minMipLevel );
		float faceSize = exp2( mipInt );
		highp vec2 uv = getUV( direction, face ) * ( faceSize - 2.0 ) + 1.0;
		if ( face > 2.0 ) {
			uv.y += faceSize;
			face -= 3.0;
		}
		uv.x += face * faceSize;
		uv.x += filterInt * 3.0 * cubeUV_minTileSize;
		uv.y += 4.0 * ( exp2( CUBEUV_MAX_MIP ) - faceSize );
		uv.x *= CUBEUV_TEXEL_WIDTH;
		uv.y *= CUBEUV_TEXEL_HEIGHT;
		#ifdef texture2DGradEXT
			return texture2DGradEXT( envMap, uv, vec2( 0.0 ), vec2( 0.0 ) ).rgb;
		#else
			return texture2D( envMap, uv ).rgb;
		#endif
	}
	#define cubeUV_r0 1.0
	#define cubeUV_m0 - 2.0
	#define cubeUV_r1 0.8
	#define cubeUV_m1 - 1.0
	#define cubeUV_r4 0.4
	#define cubeUV_m4 2.0
	#define cubeUV_r5 0.305
	#define cubeUV_m5 3.0
	#define cubeUV_r6 0.21
	#define cubeUV_m6 4.0
	float roughnessToMip( float roughness ) {
		float mip = 0.0;
		if ( roughness >= cubeUV_r1 ) {
			mip = ( cubeUV_r0 - roughness ) * ( cubeUV_m1 - cubeUV_m0 ) / ( cubeUV_r0 - cubeUV_r1 ) + cubeUV_m0;
		} else if ( roughness >= cubeUV_r4 ) {
			mip = ( cubeUV_r1 - roughness ) * ( cubeUV_m4 - cubeUV_m1 ) / ( cubeUV_r1 - cubeUV_r4 ) + cubeUV_m1;
		} else if ( roughness >= cubeUV_r5 ) {
			mip = ( cubeUV_r4 - roughness ) * ( cubeUV_m5 - cubeUV_m4 ) / ( cubeUV_r4 - cubeUV_r5 ) + cubeUV_m4;
		} else if ( roughness >= cubeUV_r6 ) {
			mip = ( cubeUV_r5 - roughness ) * ( cubeUV_m6 - cubeUV_m5 ) / ( cubeUV_r5 - cubeUV_r6 ) + cubeUV_m5;
		} else {
			mip = - 2.0 * log2( 1.16 * roughness );		}
		return mip;
	}
	vec4 textureCubeUV( sampler2D envMap, vec3 sampleDir, float roughness ) {
		float mip = clamp( roughnessToMip( roughness ), cubeUV_m0, CUBEUV_MAX_MIP );
		float mipF = fract( mip );
		float mipInt = floor( mip );
		vec3 color0 = bilinearCubeUV( envMap, sampleDir, mipInt );
		if ( mipF == 0.0 ) {
			return vec4( color0, 1.0 );
		} else {
			vec3 color1 = bilinearCubeUV( envMap, sampleDir, mipInt + 1.0 );
			return vec4( mix( color0, color1, mipF ), 1.0 );
		}
	}
#endif`,X9=`vec3 transformedNormal = objectNormal;
#ifdef USE_TANGENT
	vec3 transformedTangent = objectTangent;
#endif
#ifdef USE_BATCHING
	mat3 bm = mat3( batchingMatrix );
	transformedNormal /= vec3( dot( bm[ 0 ], bm[ 0 ] ), dot( bm[ 1 ], bm[ 1 ] ), dot( bm[ 2 ], bm[ 2 ] ) );
	transformedNormal = bm * transformedNormal;
	#ifdef USE_TANGENT
		transformedTangent = bm * transformedTangent;
	#endif
#endif
#ifdef USE_INSTANCING
	mat3 im = mat3( instanceMatrix );
	transformedNormal /= vec3( dot( im[ 0 ], im[ 0 ] ), dot( im[ 1 ], im[ 1 ] ), dot( im[ 2 ], im[ 2 ] ) );
	transformedNormal = im * transformedNormal;
	#ifdef USE_TANGENT
		transformedTangent = im * transformedTangent;
	#endif
#endif
transformedNormal = normalMatrix * transformedNormal;
#ifdef FLIP_SIDED
	transformedNormal = - transformedNormal;
#endif
#ifdef USE_TANGENT
	transformedTangent = ( modelViewMatrix * vec4( transformedTangent, 0.0 ) ).xyz;
	#ifdef FLIP_SIDED
		transformedTangent = - transformedTangent;
	#endif
#endif`,$9=`#ifdef USE_DISPLACEMENTMAP
	uniform sampler2D displacementMap;
	uniform float displacementScale;
	uniform float displacementBias;
#endif`,Y9=`#ifdef USE_DISPLACEMENTMAP
	transformed += normalize( objectNormal ) * ( texture2D( displacementMap, vDisplacementMapUv ).x * displacementScale + displacementBias );
#endif`,Z9=`#ifdef USE_EMISSIVEMAP
	vec4 emissiveColor = texture2D( emissiveMap, vEmissiveMapUv );
	#ifdef DECODE_VIDEO_TEXTURE_EMISSIVE
		emissiveColor = sRGBTransferEOTF( emissiveColor );
	#endif
	totalEmissiveRadiance *= emissiveColor.rgb;
#endif`,K9=`#ifdef USE_EMISSIVEMAP
	uniform sampler2D emissiveMap;
#endif`,J9="gl_FragColor = linearToOutputTexel( gl_FragColor );",Q9=`vec4 LinearTransferOETF( in vec4 value ) {
	return value;
}
vec4 sRGBTransferEOTF( in vec4 value ) {
	return vec4( mix( pow( value.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), value.rgb * 0.0773993808, vec3( lessThanEqual( value.rgb, vec3( 0.04045 ) ) ) ), value.a );
}
vec4 sRGBTransferOETF( in vec4 value ) {
	return vec4( mix( pow( value.rgb, vec3( 0.41666 ) ) * 1.055 - vec3( 0.055 ), value.rgb * 12.92, vec3( lessThanEqual( value.rgb, vec3( 0.0031308 ) ) ) ), value.a );
}`,e7=`#ifdef USE_ENVMAP
	#ifdef ENV_WORLDPOS
		vec3 cameraToFrag;
		if ( isOrthographic ) {
			cameraToFrag = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );
		} else {
			cameraToFrag = normalize( vWorldPosition - cameraPosition );
		}
		vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
		#ifdef ENVMAP_MODE_REFLECTION
			vec3 reflectVec = reflect( cameraToFrag, worldNormal );
		#else
			vec3 reflectVec = refract( cameraToFrag, worldNormal, refractionRatio );
		#endif
	#else
		vec3 reflectVec = vReflect;
	#endif
	#ifdef ENVMAP_TYPE_CUBE
		vec4 envColor = textureCube( envMap, envMapRotation * vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );
	#else
		vec4 envColor = vec4( 0.0 );
	#endif
	#ifdef ENVMAP_BLENDING_MULTIPLY
		outgoingLight = mix( outgoingLight, outgoingLight * envColor.xyz, specularStrength * reflectivity );
	#elif defined( ENVMAP_BLENDING_MIX )
		outgoingLight = mix( outgoingLight, envColor.xyz, specularStrength * reflectivity );
	#elif defined( ENVMAP_BLENDING_ADD )
		outgoingLight += envColor.xyz * specularStrength * reflectivity;
	#endif
#endif`,t7=`#ifdef USE_ENVMAP
	uniform float envMapIntensity;
	uniform float flipEnvMap;
	uniform mat3 envMapRotation;
	#ifdef ENVMAP_TYPE_CUBE
		uniform samplerCube envMap;
	#else
		uniform sampler2D envMap;
	#endif
#endif`,n7=`#ifdef USE_ENVMAP
	uniform float reflectivity;
	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )
		#define ENV_WORLDPOS
	#endif
	#ifdef ENV_WORLDPOS
		varying vec3 vWorldPosition;
		uniform float refractionRatio;
	#else
		varying vec3 vReflect;
	#endif
#endif`,i7=`#ifdef USE_ENVMAP
	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )
		#define ENV_WORLDPOS
	#endif
	#ifdef ENV_WORLDPOS
		
		varying vec3 vWorldPosition;
	#else
		varying vec3 vReflect;
		uniform float refractionRatio;
	#endif
#endif`,r7=`#ifdef USE_ENVMAP
	#ifdef ENV_WORLDPOS
		vWorldPosition = worldPosition.xyz;
	#else
		vec3 cameraToVertex;
		if ( isOrthographic ) {
			cameraToVertex = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );
		} else {
			cameraToVertex = normalize( worldPosition.xyz - cameraPosition );
		}
		vec3 worldNormal = inverseTransformDirection( transformedNormal, viewMatrix );
		#ifdef ENVMAP_MODE_REFLECTION
			vReflect = reflect( cameraToVertex, worldNormal );
		#else
			vReflect = refract( cameraToVertex, worldNormal, refractionRatio );
		#endif
	#endif
#endif`,s7=`#ifdef USE_FOG
	vFogDepth = - mvPosition.z;
#endif`,a7=`#ifdef USE_FOG
	varying float vFogDepth;
#endif`,o7=`#ifdef USE_FOG
	#ifdef FOG_EXP2
		float fogFactor = 1.0 - exp( - fogDensity * fogDensity * vFogDepth * vFogDepth );
	#else
		float fogFactor = smoothstep( fogNear, fogFar, vFogDepth );
	#endif
	gl_FragColor.rgb = mix( gl_FragColor.rgb, fogColor, fogFactor );
#endif`,l7=`#ifdef USE_FOG
	uniform vec3 fogColor;
	varying float vFogDepth;
	#ifdef FOG_EXP2
		uniform float fogDensity;
	#else
		uniform float fogNear;
		uniform float fogFar;
	#endif
#endif`,c7=`#ifdef USE_GRADIENTMAP
	uniform sampler2D gradientMap;
#endif
vec3 getGradientIrradiance( vec3 normal, vec3 lightDirection ) {
	float dotNL = dot( normal, lightDirection );
	vec2 coord = vec2( dotNL * 0.5 + 0.5, 0.0 );
	#ifdef USE_GRADIENTMAP
		return vec3( texture2D( gradientMap, coord ).r );
	#else
		vec2 fw = fwidth( coord ) * 0.5;
		return mix( vec3( 0.7 ), vec3( 1.0 ), smoothstep( 0.7 - fw.x, 0.7 + fw.x, coord.x ) );
	#endif
}`,u7=`#ifdef USE_LIGHTMAP
	uniform sampler2D lightMap;
	uniform float lightMapIntensity;
#endif`,h7=`LambertMaterial material;
material.diffuseColor = diffuseColor.rgb;
material.specularStrength = specularStrength;`,f7=`varying vec3 vViewPosition;
struct LambertMaterial {
	vec3 diffuseColor;
	float specularStrength;
};
void RE_Direct_Lambert( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometryNormal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Lambert( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_Lambert
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Lambert`,d7=`uniform bool receiveShadow;
uniform vec3 ambientLightColor;
#if defined( USE_LIGHT_PROBES )
	uniform vec3 lightProbe[ 9 ];
#endif
vec3 shGetIrradianceAt( in vec3 normal, in vec3 shCoefficients[ 9 ] ) {
	float x = normal.x, y = normal.y, z = normal.z;
	vec3 result = shCoefficients[ 0 ] * 0.886227;
	result += shCoefficients[ 1 ] * 2.0 * 0.511664 * y;
	result += shCoefficients[ 2 ] * 2.0 * 0.511664 * z;
	result += shCoefficients[ 3 ] * 2.0 * 0.511664 * x;
	result += shCoefficients[ 4 ] * 2.0 * 0.429043 * x * y;
	result += shCoefficients[ 5 ] * 2.0 * 0.429043 * y * z;
	result += shCoefficients[ 6 ] * ( 0.743125 * z * z - 0.247708 );
	result += shCoefficients[ 7 ] * 2.0 * 0.429043 * x * z;
	result += shCoefficients[ 8 ] * 0.429043 * ( x * x - y * y );
	return result;
}
vec3 getLightProbeIrradiance( const in vec3 lightProbe[ 9 ], const in vec3 normal ) {
	vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
	vec3 irradiance = shGetIrradianceAt( worldNormal, lightProbe );
	return irradiance;
}
vec3 getAmbientLightIrradiance( const in vec3 ambientLightColor ) {
	vec3 irradiance = ambientLightColor;
	return irradiance;
}
float getDistanceAttenuation( const in float lightDistance, const in float cutoffDistance, const in float decayExponent ) {
	float distanceFalloff = 1.0 / max( pow( lightDistance, decayExponent ), 0.01 );
	if ( cutoffDistance > 0.0 ) {
		distanceFalloff *= pow2( saturate( 1.0 - pow4( lightDistance / cutoffDistance ) ) );
	}
	return distanceFalloff;
}
float getSpotAttenuation( const in float coneCosine, const in float penumbraCosine, const in float angleCosine ) {
	return smoothstep( coneCosine, penumbraCosine, angleCosine );
}
#if NUM_DIR_LIGHTS > 0
	struct DirectionalLight {
		vec3 direction;
		vec3 color;
	};
	uniform DirectionalLight directionalLights[ NUM_DIR_LIGHTS ];
	void getDirectionalLightInfo( const in DirectionalLight directionalLight, out IncidentLight light ) {
		light.color = directionalLight.color;
		light.direction = directionalLight.direction;
		light.visible = true;
	}
#endif
#if NUM_POINT_LIGHTS > 0
	struct PointLight {
		vec3 position;
		vec3 color;
		float distance;
		float decay;
	};
	uniform PointLight pointLights[ NUM_POINT_LIGHTS ];
	void getPointLightInfo( const in PointLight pointLight, const in vec3 geometryPosition, out IncidentLight light ) {
		vec3 lVector = pointLight.position - geometryPosition;
		light.direction = normalize( lVector );
		float lightDistance = length( lVector );
		light.color = pointLight.color;
		light.color *= getDistanceAttenuation( lightDistance, pointLight.distance, pointLight.decay );
		light.visible = ( light.color != vec3( 0.0 ) );
	}
#endif
#if NUM_SPOT_LIGHTS > 0
	struct SpotLight {
		vec3 position;
		vec3 direction;
		vec3 color;
		float distance;
		float decay;
		float coneCos;
		float penumbraCos;
	};
	uniform SpotLight spotLights[ NUM_SPOT_LIGHTS ];
	void getSpotLightInfo( const in SpotLight spotLight, const in vec3 geometryPosition, out IncidentLight light ) {
		vec3 lVector = spotLight.position - geometryPosition;
		light.direction = normalize( lVector );
		float angleCos = dot( light.direction, spotLight.direction );
		float spotAttenuation = getSpotAttenuation( spotLight.coneCos, spotLight.penumbraCos, angleCos );
		if ( spotAttenuation > 0.0 ) {
			float lightDistance = length( lVector );
			light.color = spotLight.color * spotAttenuation;
			light.color *= getDistanceAttenuation( lightDistance, spotLight.distance, spotLight.decay );
			light.visible = ( light.color != vec3( 0.0 ) );
		} else {
			light.color = vec3( 0.0 );
			light.visible = false;
		}
	}
#endif
#if NUM_RECT_AREA_LIGHTS > 0
	struct RectAreaLight {
		vec3 color;
		vec3 position;
		vec3 halfWidth;
		vec3 halfHeight;
	};
	uniform sampler2D ltc_1;	uniform sampler2D ltc_2;
	uniform RectAreaLight rectAreaLights[ NUM_RECT_AREA_LIGHTS ];
#endif
#if NUM_HEMI_LIGHTS > 0
	struct HemisphereLight {
		vec3 direction;
		vec3 skyColor;
		vec3 groundColor;
	};
	uniform HemisphereLight hemisphereLights[ NUM_HEMI_LIGHTS ];
	vec3 getHemisphereLightIrradiance( const in HemisphereLight hemiLight, const in vec3 normal ) {
		float dotNL = dot( normal, hemiLight.direction );
		float hemiDiffuseWeight = 0.5 * dotNL + 0.5;
		vec3 irradiance = mix( hemiLight.groundColor, hemiLight.skyColor, hemiDiffuseWeight );
		return irradiance;
	}
#endif`,p7=`#ifdef USE_ENVMAP
	vec3 getIBLIrradiance( const in vec3 normal ) {
		#ifdef ENVMAP_TYPE_CUBE_UV
			vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
			vec4 envMapColor = textureCubeUV( envMap, envMapRotation * worldNormal, 1.0 );
			return PI * envMapColor.rgb * envMapIntensity;
		#else
			return vec3( 0.0 );
		#endif
	}
	vec3 getIBLRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness ) {
		#ifdef ENVMAP_TYPE_CUBE_UV
			vec3 reflectVec = reflect( - viewDir, normal );
			reflectVec = normalize( mix( reflectVec, normal, pow4( roughness ) ) );
			reflectVec = inverseTransformDirection( reflectVec, viewMatrix );
			vec4 envMapColor = textureCubeUV( envMap, envMapRotation * reflectVec, roughness );
			return envMapColor.rgb * envMapIntensity;
		#else
			return vec3( 0.0 );
		#endif
	}
	#ifdef USE_ANISOTROPY
		vec3 getIBLAnisotropyRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness, const in vec3 bitangent, const in float anisotropy ) {
			#ifdef ENVMAP_TYPE_CUBE_UV
				vec3 bentNormal = cross( bitangent, viewDir );
				bentNormal = normalize( cross( bentNormal, bitangent ) );
				bentNormal = normalize( mix( bentNormal, normal, pow2( pow2( 1.0 - anisotropy * ( 1.0 - roughness ) ) ) ) );
				return getIBLRadiance( viewDir, bentNormal, roughness );
			#else
				return vec3( 0.0 );
			#endif
		}
	#endif
#endif`,m7=`ToonMaterial material;
material.diffuseColor = diffuseColor.rgb;`,g7=`varying vec3 vViewPosition;
struct ToonMaterial {
	vec3 diffuseColor;
};
void RE_Direct_Toon( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {
	vec3 irradiance = getGradientIrradiance( geometryNormal, directLight.direction ) * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Toon( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_Toon
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Toon`,v7=`BlinnPhongMaterial material;
material.diffuseColor = diffuseColor.rgb;
material.specularColor = specular;
material.specularShininess = shininess;
material.specularStrength = specularStrength;`,y7=`varying vec3 vViewPosition;
struct BlinnPhongMaterial {
	vec3 diffuseColor;
	vec3 specularColor;
	float specularShininess;
	float specularStrength;
};
void RE_Direct_BlinnPhong( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometryNormal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
	reflectedLight.directSpecular += irradiance * BRDF_BlinnPhong( directLight.direction, geometryViewDir, geometryNormal, material.specularColor, material.specularShininess ) * material.specularStrength;
}
void RE_IndirectDiffuse_BlinnPhong( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_BlinnPhong
#define RE_IndirectDiffuse		RE_IndirectDiffuse_BlinnPhong`,_7=`PhysicalMaterial material;
material.diffuseColor = diffuseColor.rgb;
material.diffuseContribution = diffuseColor.rgb * ( 1.0 - metalnessFactor );
material.metalness = metalnessFactor;
vec3 dxy = max( abs( dFdx( nonPerturbedNormal ) ), abs( dFdy( nonPerturbedNormal ) ) );
float geometryRoughness = max( max( dxy.x, dxy.y ), dxy.z );
material.roughness = max( roughnessFactor, 0.0525 );material.roughness += geometryRoughness;
material.roughness = min( material.roughness, 1.0 );
#ifdef IOR
	material.ior = ior;
	#ifdef USE_SPECULAR
		float specularIntensityFactor = specularIntensity;
		vec3 specularColorFactor = specularColor;
		#ifdef USE_SPECULAR_COLORMAP
			specularColorFactor *= texture2D( specularColorMap, vSpecularColorMapUv ).rgb;
		#endif
		#ifdef USE_SPECULAR_INTENSITYMAP
			specularIntensityFactor *= texture2D( specularIntensityMap, vSpecularIntensityMapUv ).a;
		#endif
		material.specularF90 = mix( specularIntensityFactor, 1.0, metalnessFactor );
	#else
		float specularIntensityFactor = 1.0;
		vec3 specularColorFactor = vec3( 1.0 );
		material.specularF90 = 1.0;
	#endif
	material.specularColor = min( pow2( ( material.ior - 1.0 ) / ( material.ior + 1.0 ) ) * specularColorFactor, vec3( 1.0 ) ) * specularIntensityFactor;
	material.specularColorBlended = mix( material.specularColor, diffuseColor.rgb, metalnessFactor );
#else
	material.specularColor = vec3( 0.04 );
	material.specularColorBlended = mix( material.specularColor, diffuseColor.rgb, metalnessFactor );
	material.specularF90 = 1.0;
#endif
#ifdef USE_CLEARCOAT
	material.clearcoat = clearcoat;
	material.clearcoatRoughness = clearcoatRoughness;
	material.clearcoatF0 = vec3( 0.04 );
	material.clearcoatF90 = 1.0;
	#ifdef USE_CLEARCOATMAP
		material.clearcoat *= texture2D( clearcoatMap, vClearcoatMapUv ).x;
	#endif
	#ifdef USE_CLEARCOAT_ROUGHNESSMAP
		material.clearcoatRoughness *= texture2D( clearcoatRoughnessMap, vClearcoatRoughnessMapUv ).y;
	#endif
	material.clearcoat = saturate( material.clearcoat );	material.clearcoatRoughness = max( material.clearcoatRoughness, 0.0525 );
	material.clearcoatRoughness += geometryRoughness;
	material.clearcoatRoughness = min( material.clearcoatRoughness, 1.0 );
#endif
#ifdef USE_DISPERSION
	material.dispersion = dispersion;
#endif
#ifdef USE_IRIDESCENCE
	material.iridescence = iridescence;
	material.iridescenceIOR = iridescenceIOR;
	#ifdef USE_IRIDESCENCEMAP
		material.iridescence *= texture2D( iridescenceMap, vIridescenceMapUv ).r;
	#endif
	#ifdef USE_IRIDESCENCE_THICKNESSMAP
		material.iridescenceThickness = (iridescenceThicknessMaximum - iridescenceThicknessMinimum) * texture2D( iridescenceThicknessMap, vIridescenceThicknessMapUv ).g + iridescenceThicknessMinimum;
	#else
		material.iridescenceThickness = iridescenceThicknessMaximum;
	#endif
#endif
#ifdef USE_SHEEN
	material.sheenColor = sheenColor;
	#ifdef USE_SHEEN_COLORMAP
		material.sheenColor *= texture2D( sheenColorMap, vSheenColorMapUv ).rgb;
	#endif
	material.sheenRoughness = clamp( sheenRoughness, 0.0001, 1.0 );
	#ifdef USE_SHEEN_ROUGHNESSMAP
		material.sheenRoughness *= texture2D( sheenRoughnessMap, vSheenRoughnessMapUv ).a;
	#endif
#endif
#ifdef USE_ANISOTROPY
	#ifdef USE_ANISOTROPYMAP
		mat2 anisotropyMat = mat2( anisotropyVector.x, anisotropyVector.y, - anisotropyVector.y, anisotropyVector.x );
		vec3 anisotropyPolar = texture2D( anisotropyMap, vAnisotropyMapUv ).rgb;
		vec2 anisotropyV = anisotropyMat * normalize( 2.0 * anisotropyPolar.rg - vec2( 1.0 ) ) * anisotropyPolar.b;
	#else
		vec2 anisotropyV = anisotropyVector;
	#endif
	material.anisotropy = length( anisotropyV );
	if( material.anisotropy == 0.0 ) {
		anisotropyV = vec2( 1.0, 0.0 );
	} else {
		anisotropyV /= material.anisotropy;
		material.anisotropy = saturate( material.anisotropy );
	}
	material.alphaT = mix( pow2( material.roughness ), 1.0, pow2( material.anisotropy ) );
	material.anisotropyT = tbn[ 0 ] * anisotropyV.x + tbn[ 1 ] * anisotropyV.y;
	material.anisotropyB = tbn[ 1 ] * anisotropyV.x - tbn[ 0 ] * anisotropyV.y;
#endif`,x7=`uniform sampler2D dfgLUT;
struct PhysicalMaterial {
	vec3 diffuseColor;
	vec3 diffuseContribution;
	vec3 specularColor;
	vec3 specularColorBlended;
	float roughness;
	float metalness;
	float specularF90;
	float dispersion;
	#ifdef USE_CLEARCOAT
		float clearcoat;
		float clearcoatRoughness;
		vec3 clearcoatF0;
		float clearcoatF90;
	#endif
	#ifdef USE_IRIDESCENCE
		float iridescence;
		float iridescenceIOR;
		float iridescenceThickness;
		vec3 iridescenceFresnel;
		vec3 iridescenceF0;
		vec3 iridescenceFresnelDielectric;
		vec3 iridescenceFresnelMetallic;
	#endif
	#ifdef USE_SHEEN
		vec3 sheenColor;
		float sheenRoughness;
	#endif
	#ifdef IOR
		float ior;
	#endif
	#ifdef USE_TRANSMISSION
		float transmission;
		float transmissionAlpha;
		float thickness;
		float attenuationDistance;
		vec3 attenuationColor;
	#endif
	#ifdef USE_ANISOTROPY
		float anisotropy;
		float alphaT;
		vec3 anisotropyT;
		vec3 anisotropyB;
	#endif
};
vec3 clearcoatSpecularDirect = vec3( 0.0 );
vec3 clearcoatSpecularIndirect = vec3( 0.0 );
vec3 sheenSpecularDirect = vec3( 0.0 );
vec3 sheenSpecularIndirect = vec3(0.0 );
vec3 Schlick_to_F0( const in vec3 f, const in float f90, const in float dotVH ) {
    float x = clamp( 1.0 - dotVH, 0.0, 1.0 );
    float x2 = x * x;
    float x5 = clamp( x * x2 * x2, 0.0, 0.9999 );
    return ( f - vec3( f90 ) * x5 ) / ( 1.0 - x5 );
}
float V_GGX_SmithCorrelated( const in float alpha, const in float dotNL, const in float dotNV ) {
	float a2 = pow2( alpha );
	float gv = dotNL * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );
	float gl = dotNV * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );
	return 0.5 / max( gv + gl, EPSILON );
}
float D_GGX( const in float alpha, const in float dotNH ) {
	float a2 = pow2( alpha );
	float denom = pow2( dotNH ) * ( a2 - 1.0 ) + 1.0;
	return RECIPROCAL_PI * a2 / pow2( denom );
}
#ifdef USE_ANISOTROPY
	float V_GGX_SmithCorrelated_Anisotropic( const in float alphaT, const in float alphaB, const in float dotTV, const in float dotBV, const in float dotTL, const in float dotBL, const in float dotNV, const in float dotNL ) {
		float gv = dotNL * length( vec3( alphaT * dotTV, alphaB * dotBV, dotNV ) );
		float gl = dotNV * length( vec3( alphaT * dotTL, alphaB * dotBL, dotNL ) );
		float v = 0.5 / ( gv + gl );
		return v;
	}
	float D_GGX_Anisotropic( const in float alphaT, const in float alphaB, const in float dotNH, const in float dotTH, const in float dotBH ) {
		float a2 = alphaT * alphaB;
		highp vec3 v = vec3( alphaB * dotTH, alphaT * dotBH, a2 * dotNH );
		highp float v2 = dot( v, v );
		float w2 = a2 / v2;
		return RECIPROCAL_PI * a2 * pow2 ( w2 );
	}
#endif
#ifdef USE_CLEARCOAT
	vec3 BRDF_GGX_Clearcoat( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in PhysicalMaterial material) {
		vec3 f0 = material.clearcoatF0;
		float f90 = material.clearcoatF90;
		float roughness = material.clearcoatRoughness;
		float alpha = pow2( roughness );
		vec3 halfDir = normalize( lightDir + viewDir );
		float dotNL = saturate( dot( normal, lightDir ) );
		float dotNV = saturate( dot( normal, viewDir ) );
		float dotNH = saturate( dot( normal, halfDir ) );
		float dotVH = saturate( dot( viewDir, halfDir ) );
		vec3 F = F_Schlick( f0, f90, dotVH );
		float V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );
		float D = D_GGX( alpha, dotNH );
		return F * ( V * D );
	}
#endif
vec3 BRDF_GGX( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in PhysicalMaterial material ) {
	vec3 f0 = material.specularColorBlended;
	float f90 = material.specularF90;
	float roughness = material.roughness;
	float alpha = pow2( roughness );
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNL = saturate( dot( normal, lightDir ) );
	float dotNV = saturate( dot( normal, viewDir ) );
	float dotNH = saturate( dot( normal, halfDir ) );
	float dotVH = saturate( dot( viewDir, halfDir ) );
	vec3 F = F_Schlick( f0, f90, dotVH );
	#ifdef USE_IRIDESCENCE
		F = mix( F, material.iridescenceFresnel, material.iridescence );
	#endif
	#ifdef USE_ANISOTROPY
		float dotTL = dot( material.anisotropyT, lightDir );
		float dotTV = dot( material.anisotropyT, viewDir );
		float dotTH = dot( material.anisotropyT, halfDir );
		float dotBL = dot( material.anisotropyB, lightDir );
		float dotBV = dot( material.anisotropyB, viewDir );
		float dotBH = dot( material.anisotropyB, halfDir );
		float V = V_GGX_SmithCorrelated_Anisotropic( material.alphaT, alpha, dotTV, dotBV, dotTL, dotBL, dotNV, dotNL );
		float D = D_GGX_Anisotropic( material.alphaT, alpha, dotNH, dotTH, dotBH );
	#else
		float V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );
		float D = D_GGX( alpha, dotNH );
	#endif
	return F * ( V * D );
}
vec2 LTC_Uv( const in vec3 N, const in vec3 V, const in float roughness ) {
	const float LUT_SIZE = 64.0;
	const float LUT_SCALE = ( LUT_SIZE - 1.0 ) / LUT_SIZE;
	const float LUT_BIAS = 0.5 / LUT_SIZE;
	float dotNV = saturate( dot( N, V ) );
	vec2 uv = vec2( roughness, sqrt( 1.0 - dotNV ) );
	uv = uv * LUT_SCALE + LUT_BIAS;
	return uv;
}
float LTC_ClippedSphereFormFactor( const in vec3 f ) {
	float l = length( f );
	return max( ( l * l + f.z ) / ( l + 1.0 ), 0.0 );
}
vec3 LTC_EdgeVectorFormFactor( const in vec3 v1, const in vec3 v2 ) {
	float x = dot( v1, v2 );
	float y = abs( x );
	float a = 0.8543985 + ( 0.4965155 + 0.0145206 * y ) * y;
	float b = 3.4175940 + ( 4.1616724 + y ) * y;
	float v = a / b;
	float theta_sintheta = ( x > 0.0 ) ? v : 0.5 * inversesqrt( max( 1.0 - x * x, 1e-7 ) ) - v;
	return cross( v1, v2 ) * theta_sintheta;
}
vec3 LTC_Evaluate( const in vec3 N, const in vec3 V, const in vec3 P, const in mat3 mInv, const in vec3 rectCoords[ 4 ] ) {
	vec3 v1 = rectCoords[ 1 ] - rectCoords[ 0 ];
	vec3 v2 = rectCoords[ 3 ] - rectCoords[ 0 ];
	vec3 lightNormal = cross( v1, v2 );
	if( dot( lightNormal, P - rectCoords[ 0 ] ) < 0.0 ) return vec3( 0.0 );
	vec3 T1, T2;
	T1 = normalize( V - N * dot( V, N ) );
	T2 = - cross( N, T1 );
	mat3 mat = mInv * transpose( mat3( T1, T2, N ) );
	vec3 coords[ 4 ];
	coords[ 0 ] = mat * ( rectCoords[ 0 ] - P );
	coords[ 1 ] = mat * ( rectCoords[ 1 ] - P );
	coords[ 2 ] = mat * ( rectCoords[ 2 ] - P );
	coords[ 3 ] = mat * ( rectCoords[ 3 ] - P );
	coords[ 0 ] = normalize( coords[ 0 ] );
	coords[ 1 ] = normalize( coords[ 1 ] );
	coords[ 2 ] = normalize( coords[ 2 ] );
	coords[ 3 ] = normalize( coords[ 3 ] );
	vec3 vectorFormFactor = vec3( 0.0 );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 0 ], coords[ 1 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 1 ], coords[ 2 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 2 ], coords[ 3 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 3 ], coords[ 0 ] );
	float result = LTC_ClippedSphereFormFactor( vectorFormFactor );
	return vec3( result );
}
#if defined( USE_SHEEN )
float D_Charlie( float roughness, float dotNH ) {
	float alpha = pow2( roughness );
	float invAlpha = 1.0 / alpha;
	float cos2h = dotNH * dotNH;
	float sin2h = max( 1.0 - cos2h, 0.0078125 );
	return ( 2.0 + invAlpha ) * pow( sin2h, invAlpha * 0.5 ) / ( 2.0 * PI );
}
float V_Neubelt( float dotNV, float dotNL ) {
	return saturate( 1.0 / ( 4.0 * ( dotNL + dotNV - dotNL * dotNV ) ) );
}
vec3 BRDF_Sheen( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, vec3 sheenColor, const in float sheenRoughness ) {
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNL = saturate( dot( normal, lightDir ) );
	float dotNV = saturate( dot( normal, viewDir ) );
	float dotNH = saturate( dot( normal, halfDir ) );
	float D = D_Charlie( sheenRoughness, dotNH );
	float V = V_Neubelt( dotNV, dotNL );
	return sheenColor * ( D * V );
}
#endif
float IBLSheenBRDF( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {
	float dotNV = saturate( dot( normal, viewDir ) );
	float r2 = roughness * roughness;
	float rInv = 1.0 / ( roughness + 0.1 );
	float a = -1.9362 + 1.0678 * roughness + 0.4573 * r2 - 0.8469 * rInv;
	float b = -0.6014 + 0.5538 * roughness - 0.4670 * r2 - 0.1255 * rInv;
	float DG = exp( a * dotNV + b );
	return saturate( DG );
}
vec3 EnvironmentBRDF( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness ) {
	float dotNV = saturate( dot( normal, viewDir ) );
	vec2 fab = texture2D( dfgLUT, vec2( roughness, dotNV ) ).rg;
	return specularColor * fab.x + specularF90 * fab.y;
}
#ifdef USE_IRIDESCENCE
void computeMultiscatteringIridescence( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float iridescence, const in vec3 iridescenceF0, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {
#else
void computeMultiscattering( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {
#endif
	float dotNV = saturate( dot( normal, viewDir ) );
	vec2 fab = texture2D( dfgLUT, vec2( roughness, dotNV ) ).rg;
	#ifdef USE_IRIDESCENCE
		vec3 Fr = mix( specularColor, iridescenceF0, iridescence );
	#else
		vec3 Fr = specularColor;
	#endif
	vec3 FssEss = Fr * fab.x + specularF90 * fab.y;
	float Ess = fab.x + fab.y;
	float Ems = 1.0 - Ess;
	vec3 Favg = Fr + ( 1.0 - Fr ) * 0.047619;	vec3 Fms = FssEss * Favg / ( 1.0 - Ems * Favg );
	singleScatter += FssEss;
	multiScatter += Fms * Ems;
}
vec3 BRDF_GGX_Multiscatter( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in PhysicalMaterial material ) {
	vec3 singleScatter = BRDF_GGX( lightDir, viewDir, normal, material );
	float dotNL = saturate( dot( normal, lightDir ) );
	float dotNV = saturate( dot( normal, viewDir ) );
	vec2 dfgV = texture2D( dfgLUT, vec2( material.roughness, dotNV ) ).rg;
	vec2 dfgL = texture2D( dfgLUT, vec2( material.roughness, dotNL ) ).rg;
	vec3 FssEss_V = material.specularColorBlended * dfgV.x + material.specularF90 * dfgV.y;
	vec3 FssEss_L = material.specularColorBlended * dfgL.x + material.specularF90 * dfgL.y;
	float Ess_V = dfgV.x + dfgV.y;
	float Ess_L = dfgL.x + dfgL.y;
	float Ems_V = 1.0 - Ess_V;
	float Ems_L = 1.0 - Ess_L;
	vec3 Favg = material.specularColorBlended + ( 1.0 - material.specularColorBlended ) * 0.047619;
	vec3 Fms = FssEss_V * FssEss_L * Favg / ( 1.0 - Ems_V * Ems_L * Favg + EPSILON );
	float compensationFactor = Ems_V * Ems_L;
	vec3 multiScatter = Fms * compensationFactor;
	return singleScatter + multiScatter;
}
#if NUM_RECT_AREA_LIGHTS > 0
	void RE_Direct_RectArea_Physical( const in RectAreaLight rectAreaLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
		vec3 normal = geometryNormal;
		vec3 viewDir = geometryViewDir;
		vec3 position = geometryPosition;
		vec3 lightPos = rectAreaLight.position;
		vec3 halfWidth = rectAreaLight.halfWidth;
		vec3 halfHeight = rectAreaLight.halfHeight;
		vec3 lightColor = rectAreaLight.color;
		float roughness = material.roughness;
		vec3 rectCoords[ 4 ];
		rectCoords[ 0 ] = lightPos + halfWidth - halfHeight;		rectCoords[ 1 ] = lightPos - halfWidth - halfHeight;
		rectCoords[ 2 ] = lightPos - halfWidth + halfHeight;
		rectCoords[ 3 ] = lightPos + halfWidth + halfHeight;
		vec2 uv = LTC_Uv( normal, viewDir, roughness );
		vec4 t1 = texture2D( ltc_1, uv );
		vec4 t2 = texture2D( ltc_2, uv );
		mat3 mInv = mat3(
			vec3( t1.x, 0, t1.y ),
			vec3(    0, 1,    0 ),
			vec3( t1.z, 0, t1.w )
		);
		vec3 fresnel = ( material.specularColorBlended * t2.x + ( vec3( 1.0 ) - material.specularColorBlended ) * t2.y );
		reflectedLight.directSpecular += lightColor * fresnel * LTC_Evaluate( normal, viewDir, position, mInv, rectCoords );
		reflectedLight.directDiffuse += lightColor * material.diffuseContribution * LTC_Evaluate( normal, viewDir, position, mat3( 1.0 ), rectCoords );
	}
#endif
void RE_Direct_Physical( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometryNormal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	#ifdef USE_CLEARCOAT
		float dotNLcc = saturate( dot( geometryClearcoatNormal, directLight.direction ) );
		vec3 ccIrradiance = dotNLcc * directLight.color;
		clearcoatSpecularDirect += ccIrradiance * BRDF_GGX_Clearcoat( directLight.direction, geometryViewDir, geometryClearcoatNormal, material );
	#endif
	#ifdef USE_SHEEN
 
 		sheenSpecularDirect += irradiance * BRDF_Sheen( directLight.direction, geometryViewDir, geometryNormal, material.sheenColor, material.sheenRoughness );
 
 		float sheenAlbedoV = IBLSheenBRDF( geometryNormal, geometryViewDir, material.sheenRoughness );
 		float sheenAlbedoL = IBLSheenBRDF( geometryNormal, directLight.direction, material.sheenRoughness );
 
 		float sheenEnergyComp = 1.0 - max3( material.sheenColor ) * max( sheenAlbedoV, sheenAlbedoL );
 
 		irradiance *= sheenEnergyComp;
 
 	#endif
	reflectedLight.directSpecular += irradiance * BRDF_GGX_Multiscatter( directLight.direction, geometryViewDir, geometryNormal, material );
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseContribution );
}
void RE_IndirectDiffuse_Physical( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
	vec3 diffuse = irradiance * BRDF_Lambert( material.diffuseContribution );
	#ifdef USE_SHEEN
		float sheenAlbedo = IBLSheenBRDF( geometryNormal, geometryViewDir, material.sheenRoughness );
		float sheenEnergyComp = 1.0 - max3( material.sheenColor ) * sheenAlbedo;
		diffuse *= sheenEnergyComp;
	#endif
	reflectedLight.indirectDiffuse += diffuse;
}
void RE_IndirectSpecular_Physical( const in vec3 radiance, const in vec3 irradiance, const in vec3 clearcoatRadiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight) {
	#ifdef USE_CLEARCOAT
		clearcoatSpecularIndirect += clearcoatRadiance * EnvironmentBRDF( geometryClearcoatNormal, geometryViewDir, material.clearcoatF0, material.clearcoatF90, material.clearcoatRoughness );
	#endif
	#ifdef USE_SHEEN
		sheenSpecularIndirect += irradiance * material.sheenColor * IBLSheenBRDF( geometryNormal, geometryViewDir, material.sheenRoughness ) * RECIPROCAL_PI;
 	#endif
	vec3 singleScatteringDielectric = vec3( 0.0 );
	vec3 multiScatteringDielectric = vec3( 0.0 );
	vec3 singleScatteringMetallic = vec3( 0.0 );
	vec3 multiScatteringMetallic = vec3( 0.0 );
	#ifdef USE_IRIDESCENCE
		computeMultiscatteringIridescence( geometryNormal, geometryViewDir, material.specularColor, material.specularF90, material.iridescence, material.iridescenceFresnelDielectric, material.roughness, singleScatteringDielectric, multiScatteringDielectric );
		computeMultiscatteringIridescence( geometryNormal, geometryViewDir, material.diffuseColor, material.specularF90, material.iridescence, material.iridescenceFresnelMetallic, material.roughness, singleScatteringMetallic, multiScatteringMetallic );
	#else
		computeMultiscattering( geometryNormal, geometryViewDir, material.specularColor, material.specularF90, material.roughness, singleScatteringDielectric, multiScatteringDielectric );
		computeMultiscattering( geometryNormal, geometryViewDir, material.diffuseColor, material.specularF90, material.roughness, singleScatteringMetallic, multiScatteringMetallic );
	#endif
	vec3 singleScattering = mix( singleScatteringDielectric, singleScatteringMetallic, material.metalness );
	vec3 multiScattering = mix( multiScatteringDielectric, multiScatteringMetallic, material.metalness );
	vec3 totalScatteringDielectric = singleScatteringDielectric + multiScatteringDielectric;
	vec3 diffuse = material.diffuseContribution * ( 1.0 - totalScatteringDielectric );
	vec3 cosineWeightedIrradiance = irradiance * RECIPROCAL_PI;
	vec3 indirectSpecular = radiance * singleScattering;
	indirectSpecular += multiScattering * cosineWeightedIrradiance;
	vec3 indirectDiffuse = diffuse * cosineWeightedIrradiance;
	#ifdef USE_SHEEN
		float sheenAlbedo = IBLSheenBRDF( geometryNormal, geometryViewDir, material.sheenRoughness );
		float sheenEnergyComp = 1.0 - max3( material.sheenColor ) * sheenAlbedo;
		indirectSpecular *= sheenEnergyComp;
		indirectDiffuse *= sheenEnergyComp;
	#endif
	reflectedLight.indirectSpecular += indirectSpecular;
	reflectedLight.indirectDiffuse += indirectDiffuse;
}
#define RE_Direct				RE_Direct_Physical
#define RE_Direct_RectArea		RE_Direct_RectArea_Physical
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Physical
#define RE_IndirectSpecular		RE_IndirectSpecular_Physical
float computeSpecularOcclusion( const in float dotNV, const in float ambientOcclusion, const in float roughness ) {
	return saturate( pow( dotNV + ambientOcclusion, exp2( - 16.0 * roughness - 1.0 ) ) - 1.0 + ambientOcclusion );
}`,b7=`
vec3 geometryPosition = - vViewPosition;
vec3 geometryNormal = normal;
vec3 geometryViewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( vViewPosition );
vec3 geometryClearcoatNormal = vec3( 0.0 );
#ifdef USE_CLEARCOAT
	geometryClearcoatNormal = clearcoatNormal;
#endif
#ifdef USE_IRIDESCENCE
	float dotNVi = saturate( dot( normal, geometryViewDir ) );
	if ( material.iridescenceThickness == 0.0 ) {
		material.iridescence = 0.0;
	} else {
		material.iridescence = saturate( material.iridescence );
	}
	if ( material.iridescence > 0.0 ) {
		material.iridescenceFresnelDielectric = evalIridescence( 1.0, material.iridescenceIOR, dotNVi, material.iridescenceThickness, material.specularColor );
		material.iridescenceFresnelMetallic = evalIridescence( 1.0, material.iridescenceIOR, dotNVi, material.iridescenceThickness, material.diffuseColor );
		material.iridescenceFresnel = mix( material.iridescenceFresnelDielectric, material.iridescenceFresnelMetallic, material.metalness );
		material.iridescenceF0 = Schlick_to_F0( material.iridescenceFresnel, 1.0, dotNVi );
	}
#endif
IncidentLight directLight;
#if ( NUM_POINT_LIGHTS > 0 ) && defined( RE_Direct )
	PointLight pointLight;
	#if defined( USE_SHADOWMAP ) && NUM_POINT_LIGHT_SHADOWS > 0
	PointLightShadow pointLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {
		pointLight = pointLights[ i ];
		getPointLightInfo( pointLight, geometryPosition, directLight );
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_POINT_LIGHT_SHADOWS ) && ( defined( SHADOWMAP_TYPE_PCF ) || defined( SHADOWMAP_TYPE_BASIC ) )
		pointLightShadow = pointLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getPointShadow( pointShadowMap[ i ], pointLightShadow.shadowMapSize, pointLightShadow.shadowIntensity, pointLightShadow.shadowBias, pointLightShadow.shadowRadius, vPointShadowCoord[ i ], pointLightShadow.shadowCameraNear, pointLightShadow.shadowCameraFar ) : 1.0;
		#endif
		RE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_SPOT_LIGHTS > 0 ) && defined( RE_Direct )
	SpotLight spotLight;
	vec4 spotColor;
	vec3 spotLightCoord;
	bool inSpotLightMap;
	#if defined( USE_SHADOWMAP ) && NUM_SPOT_LIGHT_SHADOWS > 0
	SpotLightShadow spotLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {
		spotLight = spotLights[ i ];
		getSpotLightInfo( spotLight, geometryPosition, directLight );
		#if ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )
		#define SPOT_LIGHT_MAP_INDEX UNROLLED_LOOP_INDEX
		#elif ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
		#define SPOT_LIGHT_MAP_INDEX NUM_SPOT_LIGHT_MAPS
		#else
		#define SPOT_LIGHT_MAP_INDEX ( UNROLLED_LOOP_INDEX - NUM_SPOT_LIGHT_SHADOWS + NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )
		#endif
		#if ( SPOT_LIGHT_MAP_INDEX < NUM_SPOT_LIGHT_MAPS )
			spotLightCoord = vSpotLightCoord[ i ].xyz / vSpotLightCoord[ i ].w;
			inSpotLightMap = all( lessThan( abs( spotLightCoord * 2. - 1. ), vec3( 1.0 ) ) );
			spotColor = texture2D( spotLightMap[ SPOT_LIGHT_MAP_INDEX ], spotLightCoord.xy );
			directLight.color = inSpotLightMap ? directLight.color * spotColor.rgb : directLight.color;
		#endif
		#undef SPOT_LIGHT_MAP_INDEX
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
		spotLightShadow = spotLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( spotShadowMap[ i ], spotLightShadow.shadowMapSize, spotLightShadow.shadowIntensity, spotLightShadow.shadowBias, spotLightShadow.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;
		#endif
		RE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_DIR_LIGHTS > 0 ) && defined( RE_Direct )
	DirectionalLight directionalLight;
	#if defined( USE_SHADOWMAP ) && NUM_DIR_LIGHT_SHADOWS > 0
	DirectionalLightShadow directionalLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {
		directionalLight = directionalLights[ i ];
		getDirectionalLightInfo( directionalLight, directLight );
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_DIR_LIGHT_SHADOWS )
		directionalLightShadow = directionalLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( directionalShadowMap[ i ], directionalLightShadow.shadowMapSize, directionalLightShadow.shadowIntensity, directionalLightShadow.shadowBias, directionalLightShadow.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;
		#endif
		RE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_RECT_AREA_LIGHTS > 0 ) && defined( RE_Direct_RectArea )
	RectAreaLight rectAreaLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_RECT_AREA_LIGHTS; i ++ ) {
		rectAreaLight = rectAreaLights[ i ];
		RE_Direct_RectArea( rectAreaLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if defined( RE_IndirectDiffuse )
	vec3 iblIrradiance = vec3( 0.0 );
	vec3 irradiance = getAmbientLightIrradiance( ambientLightColor );
	#if defined( USE_LIGHT_PROBES )
		irradiance += getLightProbeIrradiance( lightProbe, geometryNormal );
	#endif
	#if ( NUM_HEMI_LIGHTS > 0 )
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {
			irradiance += getHemisphereLightIrradiance( hemisphereLights[ i ], geometryNormal );
		}
		#pragma unroll_loop_end
	#endif
#endif
#if defined( RE_IndirectSpecular )
	vec3 radiance = vec3( 0.0 );
	vec3 clearcoatRadiance = vec3( 0.0 );
#endif`,S7=`#if defined( RE_IndirectDiffuse )
	#ifdef USE_LIGHTMAP
		vec4 lightMapTexel = texture2D( lightMap, vLightMapUv );
		vec3 lightMapIrradiance = lightMapTexel.rgb * lightMapIntensity;
		irradiance += lightMapIrradiance;
	#endif
	#if defined( USE_ENVMAP ) && defined( STANDARD ) && defined( ENVMAP_TYPE_CUBE_UV )
		iblIrradiance += getIBLIrradiance( geometryNormal );
	#endif
#endif
#if defined( USE_ENVMAP ) && defined( RE_IndirectSpecular )
	#ifdef USE_ANISOTROPY
		radiance += getIBLAnisotropyRadiance( geometryViewDir, geometryNormal, material.roughness, material.anisotropyB, material.anisotropy );
	#else
		radiance += getIBLRadiance( geometryViewDir, geometryNormal, material.roughness );
	#endif
	#ifdef USE_CLEARCOAT
		clearcoatRadiance += getIBLRadiance( geometryViewDir, geometryClearcoatNormal, material.clearcoatRoughness );
	#endif
#endif`,w7=`#if defined( RE_IndirectDiffuse )
	RE_IndirectDiffuse( irradiance, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
#endif
#if defined( RE_IndirectSpecular )
	RE_IndirectSpecular( radiance, iblIrradiance, clearcoatRadiance, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
#endif`,M7=`#if defined( USE_LOGARITHMIC_DEPTH_BUFFER )
	gl_FragDepth = vIsPerspective == 0.0 ? gl_FragCoord.z : log2( vFragDepth ) * logDepthBufFC * 0.5;
#endif`,E7=`#if defined( USE_LOGARITHMIC_DEPTH_BUFFER )
	uniform float logDepthBufFC;
	varying float vFragDepth;
	varying float vIsPerspective;
#endif`,T7=`#ifdef USE_LOGARITHMIC_DEPTH_BUFFER
	varying float vFragDepth;
	varying float vIsPerspective;
#endif`,A7=`#ifdef USE_LOGARITHMIC_DEPTH_BUFFER
	vFragDepth = 1.0 + gl_Position.w;
	vIsPerspective = float( isPerspectiveMatrix( projectionMatrix ) );
#endif`,C7=`#ifdef USE_MAP
	vec4 sampledDiffuseColor = texture2D( map, vMapUv );
	#ifdef DECODE_VIDEO_TEXTURE
		sampledDiffuseColor = sRGBTransferEOTF( sampledDiffuseColor );
	#endif
	diffuseColor *= sampledDiffuseColor;
#endif`,R7=`#ifdef USE_MAP
	uniform sampler2D map;
#endif`,N7=`#if defined( USE_MAP ) || defined( USE_ALPHAMAP )
	#if defined( USE_POINTS_UV )
		vec2 uv = vUv;
	#else
		vec2 uv = ( uvTransform * vec3( gl_PointCoord.x, 1.0 - gl_PointCoord.y, 1 ) ).xy;
	#endif
#endif
#ifdef USE_MAP
	diffuseColor *= texture2D( map, uv );
#endif
#ifdef USE_ALPHAMAP
	diffuseColor.a *= texture2D( alphaMap, uv ).g;
#endif`,D7=`#if defined( USE_POINTS_UV )
	varying vec2 vUv;
#else
	#if defined( USE_MAP ) || defined( USE_ALPHAMAP )
		uniform mat3 uvTransform;
	#endif
#endif
#ifdef USE_MAP
	uniform sampler2D map;
#endif
#ifdef USE_ALPHAMAP
	uniform sampler2D alphaMap;
#endif`,I7=`float metalnessFactor = metalness;
#ifdef USE_METALNESSMAP
	vec4 texelMetalness = texture2D( metalnessMap, vMetalnessMapUv );
	metalnessFactor *= texelMetalness.b;
#endif`,P7=`#ifdef USE_METALNESSMAP
	uniform sampler2D metalnessMap;
#endif`,O7=`#ifdef USE_INSTANCING_MORPH
	float morphTargetInfluences[ MORPHTARGETS_COUNT ];
	float morphTargetBaseInfluence = texelFetch( morphTexture, ivec2( 0, gl_InstanceID ), 0 ).r;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		morphTargetInfluences[i] =  texelFetch( morphTexture, ivec2( i + 1, gl_InstanceID ), 0 ).r;
	}
#endif`,L7=`#if defined( USE_MORPHCOLORS )
	vColor *= morphTargetBaseInfluence;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		#if defined( USE_COLOR_ALPHA )
			if ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ) * morphTargetInfluences[ i ];
		#elif defined( USE_COLOR )
			if ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ).rgb * morphTargetInfluences[ i ];
		#endif
	}
#endif`,U7=`#ifdef USE_MORPHNORMALS
	objectNormal *= morphTargetBaseInfluence;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		if ( morphTargetInfluences[ i ] != 0.0 ) objectNormal += getMorph( gl_VertexID, i, 1 ).xyz * morphTargetInfluences[ i ];
	}
#endif`,k7=`#ifdef USE_MORPHTARGETS
	#ifndef USE_INSTANCING_MORPH
		uniform float morphTargetBaseInfluence;
		uniform float morphTargetInfluences[ MORPHTARGETS_COUNT ];
	#endif
	uniform sampler2DArray morphTargetsTexture;
	uniform ivec2 morphTargetsTextureSize;
	vec4 getMorph( const in int vertexIndex, const in int morphTargetIndex, const in int offset ) {
		int texelIndex = vertexIndex * MORPHTARGETS_TEXTURE_STRIDE + offset;
		int y = texelIndex / morphTargetsTextureSize.x;
		int x = texelIndex - y * morphTargetsTextureSize.x;
		ivec3 morphUV = ivec3( x, y, morphTargetIndex );
		return texelFetch( morphTargetsTexture, morphUV, 0 );
	}
#endif`,B7=`#ifdef USE_MORPHTARGETS
	transformed *= morphTargetBaseInfluence;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		if ( morphTargetInfluences[ i ] != 0.0 ) transformed += getMorph( gl_VertexID, i, 0 ).xyz * morphTargetInfluences[ i ];
	}
#endif`,z7=`float faceDirection = gl_FrontFacing ? 1.0 : - 1.0;
#ifdef FLAT_SHADED
	vec3 fdx = dFdx( vViewPosition );
	vec3 fdy = dFdy( vViewPosition );
	vec3 normal = normalize( cross( fdx, fdy ) );
#else
	vec3 normal = normalize( vNormal );
	#ifdef DOUBLE_SIDED
		normal *= faceDirection;
	#endif
#endif
#if defined( USE_NORMALMAP_TANGENTSPACE ) || defined( USE_CLEARCOAT_NORMALMAP ) || defined( USE_ANISOTROPY )
	#ifdef USE_TANGENT
		mat3 tbn = mat3( normalize( vTangent ), normalize( vBitangent ), normal );
	#else
		mat3 tbn = getTangentFrame( - vViewPosition, normal,
		#if defined( USE_NORMALMAP )
			vNormalMapUv
		#elif defined( USE_CLEARCOAT_NORMALMAP )
			vClearcoatNormalMapUv
		#else
			vUv
		#endif
		);
	#endif
	#if defined( DOUBLE_SIDED ) && ! defined( FLAT_SHADED )
		tbn[0] *= faceDirection;
		tbn[1] *= faceDirection;
	#endif
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	#ifdef USE_TANGENT
		mat3 tbn2 = mat3( normalize( vTangent ), normalize( vBitangent ), normal );
	#else
		mat3 tbn2 = getTangentFrame( - vViewPosition, normal, vClearcoatNormalMapUv );
	#endif
	#if defined( DOUBLE_SIDED ) && ! defined( FLAT_SHADED )
		tbn2[0] *= faceDirection;
		tbn2[1] *= faceDirection;
	#endif
#endif
vec3 nonPerturbedNormal = normal;`,F7=`#ifdef USE_NORMALMAP_OBJECTSPACE
	normal = texture2D( normalMap, vNormalMapUv ).xyz * 2.0 - 1.0;
	#ifdef FLIP_SIDED
		normal = - normal;
	#endif
	#ifdef DOUBLE_SIDED
		normal = normal * faceDirection;
	#endif
	normal = normalize( normalMatrix * normal );
#elif defined( USE_NORMALMAP_TANGENTSPACE )
	vec3 mapN = texture2D( normalMap, vNormalMapUv ).xyz * 2.0 - 1.0;
	mapN.xy *= normalScale;
	normal = normalize( tbn * mapN );
#elif defined( USE_BUMPMAP )
	normal = perturbNormalArb( - vViewPosition, normal, dHdxy_fwd(), faceDirection );
#endif`,V7=`#ifndef FLAT_SHADED
	varying vec3 vNormal;
	#ifdef USE_TANGENT
		varying vec3 vTangent;
		varying vec3 vBitangent;
	#endif
#endif`,H7=`#ifndef FLAT_SHADED
	varying vec3 vNormal;
	#ifdef USE_TANGENT
		varying vec3 vTangent;
		varying vec3 vBitangent;
	#endif
#endif`,G7=`#ifndef FLAT_SHADED
	vNormal = normalize( transformedNormal );
	#ifdef USE_TANGENT
		vTangent = normalize( transformedTangent );
		vBitangent = normalize( cross( vNormal, vTangent ) * tangent.w );
	#endif
#endif`,j7=`#ifdef USE_NORMALMAP
	uniform sampler2D normalMap;
	uniform vec2 normalScale;
#endif
#ifdef USE_NORMALMAP_OBJECTSPACE
	uniform mat3 normalMatrix;
#endif
#if ! defined ( USE_TANGENT ) && ( defined ( USE_NORMALMAP_TANGENTSPACE ) || defined ( USE_CLEARCOAT_NORMALMAP ) || defined( USE_ANISOTROPY ) )
	mat3 getTangentFrame( vec3 eye_pos, vec3 surf_norm, vec2 uv ) {
		vec3 q0 = dFdx( eye_pos.xyz );
		vec3 q1 = dFdy( eye_pos.xyz );
		vec2 st0 = dFdx( uv.st );
		vec2 st1 = dFdy( uv.st );
		vec3 N = surf_norm;
		vec3 q1perp = cross( q1, N );
		vec3 q0perp = cross( N, q0 );
		vec3 T = q1perp * st0.x + q0perp * st1.x;
		vec3 B = q1perp * st0.y + q0perp * st1.y;
		float det = max( dot( T, T ), dot( B, B ) );
		float scale = ( det == 0.0 ) ? 0.0 : inversesqrt( det );
		return mat3( T * scale, B * scale, N );
	}
#endif`,W7=`#ifdef USE_CLEARCOAT
	vec3 clearcoatNormal = nonPerturbedNormal;
#endif`,q7=`#ifdef USE_CLEARCOAT_NORMALMAP
	vec3 clearcoatMapN = texture2D( clearcoatNormalMap, vClearcoatNormalMapUv ).xyz * 2.0 - 1.0;
	clearcoatMapN.xy *= clearcoatNormalScale;
	clearcoatNormal = normalize( tbn2 * clearcoatMapN );
#endif`,X7=`#ifdef USE_CLEARCOATMAP
	uniform sampler2D clearcoatMap;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	uniform sampler2D clearcoatNormalMap;
	uniform vec2 clearcoatNormalScale;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	uniform sampler2D clearcoatRoughnessMap;
#endif`,$7=`#ifdef USE_IRIDESCENCEMAP
	uniform sampler2D iridescenceMap;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	uniform sampler2D iridescenceThicknessMap;
#endif`,Y7=`#ifdef OPAQUE
diffuseColor.a = 1.0;
#endif
#ifdef USE_TRANSMISSION
diffuseColor.a *= material.transmissionAlpha;
#endif
gl_FragColor = vec4( outgoingLight, diffuseColor.a );`,Z7=`vec3 packNormalToRGB( const in vec3 normal ) {
	return normalize( normal ) * 0.5 + 0.5;
}
vec3 unpackRGBToNormal( const in vec3 rgb ) {
	return 2.0 * rgb.xyz - 1.0;
}
const float PackUpscale = 256. / 255.;const float UnpackDownscale = 255. / 256.;const float ShiftRight8 = 1. / 256.;
const float Inv255 = 1. / 255.;
const vec4 PackFactors = vec4( 1.0, 256.0, 256.0 * 256.0, 256.0 * 256.0 * 256.0 );
const vec2 UnpackFactors2 = vec2( UnpackDownscale, 1.0 / PackFactors.g );
const vec3 UnpackFactors3 = vec3( UnpackDownscale / PackFactors.rg, 1.0 / PackFactors.b );
const vec4 UnpackFactors4 = vec4( UnpackDownscale / PackFactors.rgb, 1.0 / PackFactors.a );
vec4 packDepthToRGBA( const in float v ) {
	if( v <= 0.0 )
		return vec4( 0., 0., 0., 0. );
	if( v >= 1.0 )
		return vec4( 1., 1., 1., 1. );
	float vuf;
	float af = modf( v * PackFactors.a, vuf );
	float bf = modf( vuf * ShiftRight8, vuf );
	float gf = modf( vuf * ShiftRight8, vuf );
	return vec4( vuf * Inv255, gf * PackUpscale, bf * PackUpscale, af );
}
vec3 packDepthToRGB( const in float v ) {
	if( v <= 0.0 )
		return vec3( 0., 0., 0. );
	if( v >= 1.0 )
		return vec3( 1., 1., 1. );
	float vuf;
	float bf = modf( v * PackFactors.b, vuf );
	float gf = modf( vuf * ShiftRight8, vuf );
	return vec3( vuf * Inv255, gf * PackUpscale, bf );
}
vec2 packDepthToRG( const in float v ) {
	if( v <= 0.0 )
		return vec2( 0., 0. );
	if( v >= 1.0 )
		return vec2( 1., 1. );
	float vuf;
	float gf = modf( v * 256., vuf );
	return vec2( vuf * Inv255, gf );
}
float unpackRGBAToDepth( const in vec4 v ) {
	return dot( v, UnpackFactors4 );
}
float unpackRGBToDepth( const in vec3 v ) {
	return dot( v, UnpackFactors3 );
}
float unpackRGToDepth( const in vec2 v ) {
	return v.r * UnpackFactors2.r + v.g * UnpackFactors2.g;
}
vec4 pack2HalfToRGBA( const in vec2 v ) {
	vec4 r = vec4( v.x, fract( v.x * 255.0 ), v.y, fract( v.y * 255.0 ) );
	return vec4( r.x - r.y / 255.0, r.y, r.z - r.w / 255.0, r.w );
}
vec2 unpackRGBATo2Half( const in vec4 v ) {
	return vec2( v.x + ( v.y / 255.0 ), v.z + ( v.w / 255.0 ) );
}
float viewZToOrthographicDepth( const in float viewZ, const in float near, const in float far ) {
	return ( viewZ + near ) / ( near - far );
}
float orthographicDepthToViewZ( const in float depth, const in float near, const in float far ) {
	return depth * ( near - far ) - near;
}
float viewZToPerspectiveDepth( const in float viewZ, const in float near, const in float far ) {
	return ( ( near + viewZ ) * far ) / ( ( far - near ) * viewZ );
}
float perspectiveDepthToViewZ( const in float depth, const in float near, const in float far ) {
	return ( near * far ) / ( ( far - near ) * depth - far );
}`,K7=`#ifdef PREMULTIPLIED_ALPHA
	gl_FragColor.rgb *= gl_FragColor.a;
#endif`,J7=`vec4 mvPosition = vec4( transformed, 1.0 );
#ifdef USE_BATCHING
	mvPosition = batchingMatrix * mvPosition;
#endif
#ifdef USE_INSTANCING
	mvPosition = instanceMatrix * mvPosition;
#endif
mvPosition = modelViewMatrix * mvPosition;
gl_Position = projectionMatrix * mvPosition;`,Q7=`#ifdef DITHERING
	gl_FragColor.rgb = dithering( gl_FragColor.rgb );
#endif`,eW=`#ifdef DITHERING
	vec3 dithering( vec3 color ) {
		float grid_position = rand( gl_FragCoord.xy );
		vec3 dither_shift_RGB = vec3( 0.25 / 255.0, -0.25 / 255.0, 0.25 / 255.0 );
		dither_shift_RGB = mix( 2.0 * dither_shift_RGB, -2.0 * dither_shift_RGB, grid_position );
		return color + dither_shift_RGB;
	}
#endif`,tW=`float roughnessFactor = roughness;
#ifdef USE_ROUGHNESSMAP
	vec4 texelRoughness = texture2D( roughnessMap, vRoughnessMapUv );
	roughnessFactor *= texelRoughness.g;
#endif`,nW=`#ifdef USE_ROUGHNESSMAP
	uniform sampler2D roughnessMap;
#endif`,iW=`#if NUM_SPOT_LIGHT_COORDS > 0
	varying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];
#endif
#if NUM_SPOT_LIGHT_MAPS > 0
	uniform sampler2D spotLightMap[ NUM_SPOT_LIGHT_MAPS ];
#endif
#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
		#if defined( SHADOWMAP_TYPE_PCF )
			uniform sampler2DShadow directionalShadowMap[ NUM_DIR_LIGHT_SHADOWS ];
		#else
			uniform sampler2D directionalShadowMap[ NUM_DIR_LIGHT_SHADOWS ];
		#endif
		varying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];
		struct DirectionalLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
		#if defined( SHADOWMAP_TYPE_PCF )
			uniform sampler2DShadow spotShadowMap[ NUM_SPOT_LIGHT_SHADOWS ];
		#else
			uniform sampler2D spotShadowMap[ NUM_SPOT_LIGHT_SHADOWS ];
		#endif
		struct SpotLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		#if defined( SHADOWMAP_TYPE_PCF )
			uniform samplerCubeShadow pointShadowMap[ NUM_POINT_LIGHT_SHADOWS ];
		#elif defined( SHADOWMAP_TYPE_BASIC )
			uniform samplerCube pointShadowMap[ NUM_POINT_LIGHT_SHADOWS ];
		#endif
		varying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];
		struct PointLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
			float shadowCameraNear;
			float shadowCameraFar;
		};
		uniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];
	#endif
	#if defined( SHADOWMAP_TYPE_PCF )
		float interleavedGradientNoise( vec2 position ) {
			return fract( 52.9829189 * fract( dot( position, vec2( 0.06711056, 0.00583715 ) ) ) );
		}
		vec2 vogelDiskSample( int sampleIndex, int samplesCount, float phi ) {
			const float goldenAngle = 2.399963229728653;
			float r = sqrt( ( float( sampleIndex ) + 0.5 ) / float( samplesCount ) );
			float theta = float( sampleIndex ) * goldenAngle + phi;
			return vec2( cos( theta ), sin( theta ) ) * r;
		}
	#endif
	#if defined( SHADOWMAP_TYPE_PCF )
		float getShadow( sampler2DShadow shadowMap, vec2 shadowMapSize, float shadowIntensity, float shadowBias, float shadowRadius, vec4 shadowCoord ) {
			float shadow = 1.0;
			shadowCoord.xyz /= shadowCoord.w;
			shadowCoord.z += shadowBias;
			bool inFrustum = shadowCoord.x >= 0.0 && shadowCoord.x <= 1.0 && shadowCoord.y >= 0.0 && shadowCoord.y <= 1.0;
			bool frustumTest = inFrustum && shadowCoord.z <= 1.0;
			if ( frustumTest ) {
				vec2 texelSize = vec2( 1.0 ) / shadowMapSize;
				float radius = shadowRadius * texelSize.x;
				float phi = interleavedGradientNoise( gl_FragCoord.xy ) * 6.28318530718;
				shadow = (
					texture( shadowMap, vec3( shadowCoord.xy + vogelDiskSample( 0, 5, phi ) * radius, shadowCoord.z ) ) +
					texture( shadowMap, vec3( shadowCoord.xy + vogelDiskSample( 1, 5, phi ) * radius, shadowCoord.z ) ) +
					texture( shadowMap, vec3( shadowCoord.xy + vogelDiskSample( 2, 5, phi ) * radius, shadowCoord.z ) ) +
					texture( shadowMap, vec3( shadowCoord.xy + vogelDiskSample( 3, 5, phi ) * radius, shadowCoord.z ) ) +
					texture( shadowMap, vec3( shadowCoord.xy + vogelDiskSample( 4, 5, phi ) * radius, shadowCoord.z ) )
				) * 0.2;
			}
			return mix( 1.0, shadow, shadowIntensity );
		}
	#elif defined( SHADOWMAP_TYPE_VSM )
		float getShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowIntensity, float shadowBias, float shadowRadius, vec4 shadowCoord ) {
			float shadow = 1.0;
			shadowCoord.xyz /= shadowCoord.w;
			shadowCoord.z += shadowBias;
			bool inFrustum = shadowCoord.x >= 0.0 && shadowCoord.x <= 1.0 && shadowCoord.y >= 0.0 && shadowCoord.y <= 1.0;
			bool frustumTest = inFrustum && shadowCoord.z <= 1.0;
			if ( frustumTest ) {
				vec2 distribution = texture2D( shadowMap, shadowCoord.xy ).rg;
				float mean = distribution.x;
				float variance = distribution.y * distribution.y;
				#ifdef USE_REVERSED_DEPTH_BUFFER
					float hard_shadow = step( mean, shadowCoord.z );
				#else
					float hard_shadow = step( shadowCoord.z, mean );
				#endif
				if ( hard_shadow == 1.0 ) {
					shadow = 1.0;
				} else {
					variance = max( variance, 0.0000001 );
					float d = shadowCoord.z - mean;
					float p_max = variance / ( variance + d * d );
					p_max = clamp( ( p_max - 0.3 ) / 0.65, 0.0, 1.0 );
					shadow = max( hard_shadow, p_max );
				}
			}
			return mix( 1.0, shadow, shadowIntensity );
		}
	#else
		float getShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowIntensity, float shadowBias, float shadowRadius, vec4 shadowCoord ) {
			float shadow = 1.0;
			shadowCoord.xyz /= shadowCoord.w;
			shadowCoord.z += shadowBias;
			bool inFrustum = shadowCoord.x >= 0.0 && shadowCoord.x <= 1.0 && shadowCoord.y >= 0.0 && shadowCoord.y <= 1.0;
			bool frustumTest = inFrustum && shadowCoord.z <= 1.0;
			if ( frustumTest ) {
				float depth = texture2D( shadowMap, shadowCoord.xy ).r;
				#ifdef USE_REVERSED_DEPTH_BUFFER
					shadow = step( depth, shadowCoord.z );
				#else
					shadow = step( shadowCoord.z, depth );
				#endif
			}
			return mix( 1.0, shadow, shadowIntensity );
		}
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
	#if defined( SHADOWMAP_TYPE_PCF )
	float getPointShadow( samplerCubeShadow shadowMap, vec2 shadowMapSize, float shadowIntensity, float shadowBias, float shadowRadius, vec4 shadowCoord, float shadowCameraNear, float shadowCameraFar ) {
		float shadow = 1.0;
		vec3 lightToPosition = shadowCoord.xyz;
		vec3 bd3D = normalize( lightToPosition );
		vec3 absVec = abs( lightToPosition );
		float viewSpaceZ = max( max( absVec.x, absVec.y ), absVec.z );
		if ( viewSpaceZ - shadowCameraFar <= 0.0 && viewSpaceZ - shadowCameraNear >= 0.0 ) {
			float dp = ( shadowCameraFar * ( viewSpaceZ - shadowCameraNear ) ) / ( viewSpaceZ * ( shadowCameraFar - shadowCameraNear ) );
			dp += shadowBias;
			float texelSize = shadowRadius / shadowMapSize.x;
			vec3 absDir = abs( bd3D );
			vec3 tangent = absDir.x > absDir.z ? vec3( 0.0, 1.0, 0.0 ) : vec3( 1.0, 0.0, 0.0 );
			tangent = normalize( cross( bd3D, tangent ) );
			vec3 bitangent = cross( bd3D, tangent );
			float phi = interleavedGradientNoise( gl_FragCoord.xy ) * 6.28318530718;
			shadow = (
				texture( shadowMap, vec4( bd3D + ( tangent * vogelDiskSample( 0, 5, phi ).x + bitangent * vogelDiskSample( 0, 5, phi ).y ) * texelSize, dp ) ) +
				texture( shadowMap, vec4( bd3D + ( tangent * vogelDiskSample( 1, 5, phi ).x + bitangent * vogelDiskSample( 1, 5, phi ).y ) * texelSize, dp ) ) +
				texture( shadowMap, vec4( bd3D + ( tangent * vogelDiskSample( 2, 5, phi ).x + bitangent * vogelDiskSample( 2, 5, phi ).y ) * texelSize, dp ) ) +
				texture( shadowMap, vec4( bd3D + ( tangent * vogelDiskSample( 3, 5, phi ).x + bitangent * vogelDiskSample( 3, 5, phi ).y ) * texelSize, dp ) ) +
				texture( shadowMap, vec4( bd3D + ( tangent * vogelDiskSample( 4, 5, phi ).x + bitangent * vogelDiskSample( 4, 5, phi ).y ) * texelSize, dp ) )
			) * 0.2;
		}
		return mix( 1.0, shadow, shadowIntensity );
	}
	#elif defined( SHADOWMAP_TYPE_BASIC )
	float getPointShadow( samplerCube shadowMap, vec2 shadowMapSize, float shadowIntensity, float shadowBias, float shadowRadius, vec4 shadowCoord, float shadowCameraNear, float shadowCameraFar ) {
		float shadow = 1.0;
		vec3 lightToPosition = shadowCoord.xyz;
		vec3 bd3D = normalize( lightToPosition );
		vec3 absVec = abs( lightToPosition );
		float viewSpaceZ = max( max( absVec.x, absVec.y ), absVec.z );
		if ( viewSpaceZ - shadowCameraFar <= 0.0 && viewSpaceZ - shadowCameraNear >= 0.0 ) {
			float dp = ( shadowCameraFar * ( viewSpaceZ - shadowCameraNear ) ) / ( viewSpaceZ * ( shadowCameraFar - shadowCameraNear ) );
			dp += shadowBias;
			float depth = textureCube( shadowMap, bd3D ).r;
			#ifdef USE_REVERSED_DEPTH_BUFFER
				shadow = step( depth, dp );
			#else
				shadow = step( dp, depth );
			#endif
		}
		return mix( 1.0, shadow, shadowIntensity );
	}
	#endif
	#endif
#endif`,rW=`#if NUM_SPOT_LIGHT_COORDS > 0
	uniform mat4 spotLightMatrix[ NUM_SPOT_LIGHT_COORDS ];
	varying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];
#endif
#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
		uniform mat4 directionalShadowMatrix[ NUM_DIR_LIGHT_SHADOWS ];
		varying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];
		struct DirectionalLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
		struct SpotLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		uniform mat4 pointShadowMatrix[ NUM_POINT_LIGHT_SHADOWS ];
		varying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];
		struct PointLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
			float shadowCameraNear;
			float shadowCameraFar;
		};
		uniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];
	#endif
#endif`,sW=`#if ( defined( USE_SHADOWMAP ) && ( NUM_DIR_LIGHT_SHADOWS > 0 || NUM_POINT_LIGHT_SHADOWS > 0 ) ) || ( NUM_SPOT_LIGHT_COORDS > 0 )
	vec3 shadowWorldNormal = inverseTransformDirection( transformedNormal, viewMatrix );
	vec4 shadowWorldPosition;
#endif
#if defined( USE_SHADOWMAP )
	#if NUM_DIR_LIGHT_SHADOWS > 0
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {
			shadowWorldPosition = worldPosition + vec4( shadowWorldNormal * directionalLightShadows[ i ].shadowNormalBias, 0 );
			vDirectionalShadowCoord[ i ] = directionalShadowMatrix[ i ] * shadowWorldPosition;
		}
		#pragma unroll_loop_end
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {
			shadowWorldPosition = worldPosition + vec4( shadowWorldNormal * pointLightShadows[ i ].shadowNormalBias, 0 );
			vPointShadowCoord[ i ] = pointShadowMatrix[ i ] * shadowWorldPosition;
		}
		#pragma unroll_loop_end
	#endif
#endif
#if NUM_SPOT_LIGHT_COORDS > 0
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHT_COORDS; i ++ ) {
		shadowWorldPosition = worldPosition;
		#if ( defined( USE_SHADOWMAP ) && UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
			shadowWorldPosition.xyz += shadowWorldNormal * spotLightShadows[ i ].shadowNormalBias;
		#endif
		vSpotLightCoord[ i ] = spotLightMatrix[ i ] * shadowWorldPosition;
	}
	#pragma unroll_loop_end
#endif`,aW=`float getShadowMask() {
	float shadow = 1.0;
	#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
	DirectionalLightShadow directionalLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {
		directionalLight = directionalLightShadows[ i ];
		shadow *= receiveShadow ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowIntensity, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
	SpotLightShadow spotLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {
		spotLight = spotLightShadows[ i ];
		shadow *= receiveShadow ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowIntensity, spotLight.shadowBias, spotLight.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0 && ( defined( SHADOWMAP_TYPE_PCF ) || defined( SHADOWMAP_TYPE_BASIC ) )
	PointLightShadow pointLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {
		pointLight = pointLightShadows[ i ];
		shadow *= receiveShadow ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowIntensity, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ], pointLight.shadowCameraNear, pointLight.shadowCameraFar ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#endif
	return shadow;
}`,oW=`#ifdef USE_SKINNING
	mat4 boneMatX = getBoneMatrix( skinIndex.x );
	mat4 boneMatY = getBoneMatrix( skinIndex.y );
	mat4 boneMatZ = getBoneMatrix( skinIndex.z );
	mat4 boneMatW = getBoneMatrix( skinIndex.w );
#endif`,lW=`#ifdef USE_SKINNING
	uniform mat4 bindMatrix;
	uniform mat4 bindMatrixInverse;
	uniform highp sampler2D boneTexture;
	mat4 getBoneMatrix( const in float i ) {
		int size = textureSize( boneTexture, 0 ).x;
		int j = int( i ) * 4;
		int x = j % size;
		int y = j / size;
		vec4 v1 = texelFetch( boneTexture, ivec2( x, y ), 0 );
		vec4 v2 = texelFetch( boneTexture, ivec2( x + 1, y ), 0 );
		vec4 v3 = texelFetch( boneTexture, ivec2( x + 2, y ), 0 );
		vec4 v4 = texelFetch( boneTexture, ivec2( x + 3, y ), 0 );
		return mat4( v1, v2, v3, v4 );
	}
#endif`,cW=`#ifdef USE_SKINNING
	vec4 skinVertex = bindMatrix * vec4( transformed, 1.0 );
	vec4 skinned = vec4( 0.0 );
	skinned += boneMatX * skinVertex * skinWeight.x;
	skinned += boneMatY * skinVertex * skinWeight.y;
	skinned += boneMatZ * skinVertex * skinWeight.z;
	skinned += boneMatW * skinVertex * skinWeight.w;
	transformed = ( bindMatrixInverse * skinned ).xyz;
#endif`,uW=`#ifdef USE_SKINNING
	mat4 skinMatrix = mat4( 0.0 );
	skinMatrix += skinWeight.x * boneMatX;
	skinMatrix += skinWeight.y * boneMatY;
	skinMatrix += skinWeight.z * boneMatZ;
	skinMatrix += skinWeight.w * boneMatW;
	skinMatrix = bindMatrixInverse * skinMatrix * bindMatrix;
	objectNormal = vec4( skinMatrix * vec4( objectNormal, 0.0 ) ).xyz;
	#ifdef USE_TANGENT
		objectTangent = vec4( skinMatrix * vec4( objectTangent, 0.0 ) ).xyz;
	#endif
#endif`,hW=`float specularStrength;
#ifdef USE_SPECULARMAP
	vec4 texelSpecular = texture2D( specularMap, vSpecularMapUv );
	specularStrength = texelSpecular.r;
#else
	specularStrength = 1.0;
#endif`,fW=`#ifdef USE_SPECULARMAP
	uniform sampler2D specularMap;
#endif`,dW=`#if defined( TONE_MAPPING )
	gl_FragColor.rgb = toneMapping( gl_FragColor.rgb );
#endif`,pW=`#ifndef saturate
#define saturate( a ) clamp( a, 0.0, 1.0 )
#endif
uniform float toneMappingExposure;
vec3 LinearToneMapping( vec3 color ) {
	return saturate( toneMappingExposure * color );
}
vec3 ReinhardToneMapping( vec3 color ) {
	color *= toneMappingExposure;
	return saturate( color / ( vec3( 1.0 ) + color ) );
}
vec3 CineonToneMapping( vec3 color ) {
	color *= toneMappingExposure;
	color = max( vec3( 0.0 ), color - 0.004 );
	return pow( ( color * ( 6.2 * color + 0.5 ) ) / ( color * ( 6.2 * color + 1.7 ) + 0.06 ), vec3( 2.2 ) );
}
vec3 RRTAndODTFit( vec3 v ) {
	vec3 a = v * ( v + 0.0245786 ) - 0.000090537;
	vec3 b = v * ( 0.983729 * v + 0.4329510 ) + 0.238081;
	return a / b;
}
vec3 ACESFilmicToneMapping( vec3 color ) {
	const mat3 ACESInputMat = mat3(
		vec3( 0.59719, 0.07600, 0.02840 ),		vec3( 0.35458, 0.90834, 0.13383 ),
		vec3( 0.04823, 0.01566, 0.83777 )
	);
	const mat3 ACESOutputMat = mat3(
		vec3(  1.60475, -0.10208, -0.00327 ),		vec3( -0.53108,  1.10813, -0.07276 ),
		vec3( -0.07367, -0.00605,  1.07602 )
	);
	color *= toneMappingExposure / 0.6;
	color = ACESInputMat * color;
	color = RRTAndODTFit( color );
	color = ACESOutputMat * color;
	return saturate( color );
}
const mat3 LINEAR_REC2020_TO_LINEAR_SRGB = mat3(
	vec3( 1.6605, - 0.1246, - 0.0182 ),
	vec3( - 0.5876, 1.1329, - 0.1006 ),
	vec3( - 0.0728, - 0.0083, 1.1187 )
);
const mat3 LINEAR_SRGB_TO_LINEAR_REC2020 = mat3(
	vec3( 0.6274, 0.0691, 0.0164 ),
	vec3( 0.3293, 0.9195, 0.0880 ),
	vec3( 0.0433, 0.0113, 0.8956 )
);
vec3 agxDefaultContrastApprox( vec3 x ) {
	vec3 x2 = x * x;
	vec3 x4 = x2 * x2;
	return + 15.5 * x4 * x2
		- 40.14 * x4 * x
		+ 31.96 * x4
		- 6.868 * x2 * x
		+ 0.4298 * x2
		+ 0.1191 * x
		- 0.00232;
}
vec3 AgXToneMapping( vec3 color ) {
	const mat3 AgXInsetMatrix = mat3(
		vec3( 0.856627153315983, 0.137318972929847, 0.11189821299995 ),
		vec3( 0.0951212405381588, 0.761241990602591, 0.0767994186031903 ),
		vec3( 0.0482516061458583, 0.101439036467562, 0.811302368396859 )
	);
	const mat3 AgXOutsetMatrix = mat3(
		vec3( 1.1271005818144368, - 0.1413297634984383, - 0.14132976349843826 ),
		vec3( - 0.11060664309660323, 1.157823702216272, - 0.11060664309660294 ),
		vec3( - 0.016493938717834573, - 0.016493938717834257, 1.2519364065950405 )
	);
	const float AgxMinEv = - 12.47393;	const float AgxMaxEv = 4.026069;
	color *= toneMappingExposure;
	color = LINEAR_SRGB_TO_LINEAR_REC2020 * color;
	color = AgXInsetMatrix * color;
	color = max( color, 1e-10 );	color = log2( color );
	color = ( color - AgxMinEv ) / ( AgxMaxEv - AgxMinEv );
	color = clamp( color, 0.0, 1.0 );
	color = agxDefaultContrastApprox( color );
	color = AgXOutsetMatrix * color;
	color = pow( max( vec3( 0.0 ), color ), vec3( 2.2 ) );
	color = LINEAR_REC2020_TO_LINEAR_SRGB * color;
	color = clamp( color, 0.0, 1.0 );
	return color;
}
vec3 NeutralToneMapping( vec3 color ) {
	const float StartCompression = 0.8 - 0.04;
	const float Desaturation = 0.15;
	color *= toneMappingExposure;
	float x = min( color.r, min( color.g, color.b ) );
	float offset = x < 0.08 ? x - 6.25 * x * x : 0.04;
	color -= offset;
	float peak = max( color.r, max( color.g, color.b ) );
	if ( peak < StartCompression ) return color;
	float d = 1. - StartCompression;
	float newPeak = 1. - d * d / ( peak + d - StartCompression );
	color *= newPeak / peak;
	float g = 1. - 1. / ( Desaturation * ( peak - newPeak ) + 1. );
	return mix( color, vec3( newPeak ), g );
}
vec3 CustomToneMapping( vec3 color ) { return color; }`,mW=`#ifdef USE_TRANSMISSION
	material.transmission = transmission;
	material.transmissionAlpha = 1.0;
	material.thickness = thickness;
	material.attenuationDistance = attenuationDistance;
	material.attenuationColor = attenuationColor;
	#ifdef USE_TRANSMISSIONMAP
		material.transmission *= texture2D( transmissionMap, vTransmissionMapUv ).r;
	#endif
	#ifdef USE_THICKNESSMAP
		material.thickness *= texture2D( thicknessMap, vThicknessMapUv ).g;
	#endif
	vec3 pos = vWorldPosition;
	vec3 v = normalize( cameraPosition - pos );
	vec3 n = inverseTransformDirection( normal, viewMatrix );
	vec4 transmitted = getIBLVolumeRefraction(
		n, v, material.roughness, material.diffuseContribution, material.specularColorBlended, material.specularF90,
		pos, modelMatrix, viewMatrix, projectionMatrix, material.dispersion, material.ior, material.thickness,
		material.attenuationColor, material.attenuationDistance );
	material.transmissionAlpha = mix( material.transmissionAlpha, transmitted.a, material.transmission );
	totalDiffuse = mix( totalDiffuse, transmitted.rgb, material.transmission );
#endif`,gW=`#ifdef USE_TRANSMISSION
	uniform float transmission;
	uniform float thickness;
	uniform float attenuationDistance;
	uniform vec3 attenuationColor;
	#ifdef USE_TRANSMISSIONMAP
		uniform sampler2D transmissionMap;
	#endif
	#ifdef USE_THICKNESSMAP
		uniform sampler2D thicknessMap;
	#endif
	uniform vec2 transmissionSamplerSize;
	uniform sampler2D transmissionSamplerMap;
	uniform mat4 modelMatrix;
	uniform mat4 projectionMatrix;
	varying vec3 vWorldPosition;
	float w0( float a ) {
		return ( 1.0 / 6.0 ) * ( a * ( a * ( - a + 3.0 ) - 3.0 ) + 1.0 );
	}
	float w1( float a ) {
		return ( 1.0 / 6.0 ) * ( a *  a * ( 3.0 * a - 6.0 ) + 4.0 );
	}
	float w2( float a ){
		return ( 1.0 / 6.0 ) * ( a * ( a * ( - 3.0 * a + 3.0 ) + 3.0 ) + 1.0 );
	}
	float w3( float a ) {
		return ( 1.0 / 6.0 ) * ( a * a * a );
	}
	float g0( float a ) {
		return w0( a ) + w1( a );
	}
	float g1( float a ) {
		return w2( a ) + w3( a );
	}
	float h0( float a ) {
		return - 1.0 + w1( a ) / ( w0( a ) + w1( a ) );
	}
	float h1( float a ) {
		return 1.0 + w3( a ) / ( w2( a ) + w3( a ) );
	}
	vec4 bicubic( sampler2D tex, vec2 uv, vec4 texelSize, float lod ) {
		uv = uv * texelSize.zw + 0.5;
		vec2 iuv = floor( uv );
		vec2 fuv = fract( uv );
		float g0x = g0( fuv.x );
		float g1x = g1( fuv.x );
		float h0x = h0( fuv.x );
		float h1x = h1( fuv.x );
		float h0y = h0( fuv.y );
		float h1y = h1( fuv.y );
		vec2 p0 = ( vec2( iuv.x + h0x, iuv.y + h0y ) - 0.5 ) * texelSize.xy;
		vec2 p1 = ( vec2( iuv.x + h1x, iuv.y + h0y ) - 0.5 ) * texelSize.xy;
		vec2 p2 = ( vec2( iuv.x + h0x, iuv.y + h1y ) - 0.5 ) * texelSize.xy;
		vec2 p3 = ( vec2( iuv.x + h1x, iuv.y + h1y ) - 0.5 ) * texelSize.xy;
		return g0( fuv.y ) * ( g0x * textureLod( tex, p0, lod ) + g1x * textureLod( tex, p1, lod ) ) +
			g1( fuv.y ) * ( g0x * textureLod( tex, p2, lod ) + g1x * textureLod( tex, p3, lod ) );
	}
	vec4 textureBicubic( sampler2D sampler, vec2 uv, float lod ) {
		vec2 fLodSize = vec2( textureSize( sampler, int( lod ) ) );
		vec2 cLodSize = vec2( textureSize( sampler, int( lod + 1.0 ) ) );
		vec2 fLodSizeInv = 1.0 / fLodSize;
		vec2 cLodSizeInv = 1.0 / cLodSize;
		vec4 fSample = bicubic( sampler, uv, vec4( fLodSizeInv, fLodSize ), floor( lod ) );
		vec4 cSample = bicubic( sampler, uv, vec4( cLodSizeInv, cLodSize ), ceil( lod ) );
		return mix( fSample, cSample, fract( lod ) );
	}
	vec3 getVolumeTransmissionRay( const in vec3 n, const in vec3 v, const in float thickness, const in float ior, const in mat4 modelMatrix ) {
		vec3 refractionVector = refract( - v, normalize( n ), 1.0 / ior );
		vec3 modelScale;
		modelScale.x = length( vec3( modelMatrix[ 0 ].xyz ) );
		modelScale.y = length( vec3( modelMatrix[ 1 ].xyz ) );
		modelScale.z = length( vec3( modelMatrix[ 2 ].xyz ) );
		return normalize( refractionVector ) * thickness * modelScale;
	}
	float applyIorToRoughness( const in float roughness, const in float ior ) {
		return roughness * clamp( ior * 2.0 - 2.0, 0.0, 1.0 );
	}
	vec4 getTransmissionSample( const in vec2 fragCoord, const in float roughness, const in float ior ) {
		float lod = log2( transmissionSamplerSize.x ) * applyIorToRoughness( roughness, ior );
		return textureBicubic( transmissionSamplerMap, fragCoord.xy, lod );
	}
	vec3 volumeAttenuation( const in float transmissionDistance, const in vec3 attenuationColor, const in float attenuationDistance ) {
		if ( isinf( attenuationDistance ) ) {
			return vec3( 1.0 );
		} else {
			vec3 attenuationCoefficient = -log( attenuationColor ) / attenuationDistance;
			vec3 transmittance = exp( - attenuationCoefficient * transmissionDistance );			return transmittance;
		}
	}
	vec4 getIBLVolumeRefraction( const in vec3 n, const in vec3 v, const in float roughness, const in vec3 diffuseColor,
		const in vec3 specularColor, const in float specularF90, const in vec3 position, const in mat4 modelMatrix,
		const in mat4 viewMatrix, const in mat4 projMatrix, const in float dispersion, const in float ior, const in float thickness,
		const in vec3 attenuationColor, const in float attenuationDistance ) {
		vec4 transmittedLight;
		vec3 transmittance;
		#ifdef USE_DISPERSION
			float halfSpread = ( ior - 1.0 ) * 0.025 * dispersion;
			vec3 iors = vec3( ior - halfSpread, ior, ior + halfSpread );
			for ( int i = 0; i < 3; i ++ ) {
				vec3 transmissionRay = getVolumeTransmissionRay( n, v, thickness, iors[ i ], modelMatrix );
				vec3 refractedRayExit = position + transmissionRay;
				vec4 ndcPos = projMatrix * viewMatrix * vec4( refractedRayExit, 1.0 );
				vec2 refractionCoords = ndcPos.xy / ndcPos.w;
				refractionCoords += 1.0;
				refractionCoords /= 2.0;
				vec4 transmissionSample = getTransmissionSample( refractionCoords, roughness, iors[ i ] );
				transmittedLight[ i ] = transmissionSample[ i ];
				transmittedLight.a += transmissionSample.a;
				transmittance[ i ] = diffuseColor[ i ] * volumeAttenuation( length( transmissionRay ), attenuationColor, attenuationDistance )[ i ];
			}
			transmittedLight.a /= 3.0;
		#else
			vec3 transmissionRay = getVolumeTransmissionRay( n, v, thickness, ior, modelMatrix );
			vec3 refractedRayExit = position + transmissionRay;
			vec4 ndcPos = projMatrix * viewMatrix * vec4( refractedRayExit, 1.0 );
			vec2 refractionCoords = ndcPos.xy / ndcPos.w;
			refractionCoords += 1.0;
			refractionCoords /= 2.0;
			transmittedLight = getTransmissionSample( refractionCoords, roughness, ior );
			transmittance = diffuseColor * volumeAttenuation( length( transmissionRay ), attenuationColor, attenuationDistance );
		#endif
		vec3 attenuatedColor = transmittance * transmittedLight.rgb;
		vec3 F = EnvironmentBRDF( n, v, specularColor, specularF90, roughness );
		float transmittanceFactor = ( transmittance.r + transmittance.g + transmittance.b ) / 3.0;
		return vec4( ( 1.0 - F ) * attenuatedColor, 1.0 - ( 1.0 - transmittedLight.a ) * transmittanceFactor );
	}
#endif`,vW=`#if defined( USE_UV ) || defined( USE_ANISOTROPY )
	varying vec2 vUv;
#endif
#ifdef USE_MAP
	varying vec2 vMapUv;
#endif
#ifdef USE_ALPHAMAP
	varying vec2 vAlphaMapUv;
#endif
#ifdef USE_LIGHTMAP
	varying vec2 vLightMapUv;
#endif
#ifdef USE_AOMAP
	varying vec2 vAoMapUv;
#endif
#ifdef USE_BUMPMAP
	varying vec2 vBumpMapUv;
#endif
#ifdef USE_NORMALMAP
	varying vec2 vNormalMapUv;
#endif
#ifdef USE_EMISSIVEMAP
	varying vec2 vEmissiveMapUv;
#endif
#ifdef USE_METALNESSMAP
	varying vec2 vMetalnessMapUv;
#endif
#ifdef USE_ROUGHNESSMAP
	varying vec2 vRoughnessMapUv;
#endif
#ifdef USE_ANISOTROPYMAP
	varying vec2 vAnisotropyMapUv;
#endif
#ifdef USE_CLEARCOATMAP
	varying vec2 vClearcoatMapUv;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	varying vec2 vClearcoatNormalMapUv;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	varying vec2 vClearcoatRoughnessMapUv;
#endif
#ifdef USE_IRIDESCENCEMAP
	varying vec2 vIridescenceMapUv;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	varying vec2 vIridescenceThicknessMapUv;
#endif
#ifdef USE_SHEEN_COLORMAP
	varying vec2 vSheenColorMapUv;
#endif
#ifdef USE_SHEEN_ROUGHNESSMAP
	varying vec2 vSheenRoughnessMapUv;
#endif
#ifdef USE_SPECULARMAP
	varying vec2 vSpecularMapUv;
#endif
#ifdef USE_SPECULAR_COLORMAP
	varying vec2 vSpecularColorMapUv;
#endif
#ifdef USE_SPECULAR_INTENSITYMAP
	varying vec2 vSpecularIntensityMapUv;
#endif
#ifdef USE_TRANSMISSIONMAP
	uniform mat3 transmissionMapTransform;
	varying vec2 vTransmissionMapUv;
#endif
#ifdef USE_THICKNESSMAP
	uniform mat3 thicknessMapTransform;
	varying vec2 vThicknessMapUv;
#endif`,yW=`#if defined( USE_UV ) || defined( USE_ANISOTROPY )
	varying vec2 vUv;
#endif
#ifdef USE_MAP
	uniform mat3 mapTransform;
	varying vec2 vMapUv;
#endif
#ifdef USE_ALPHAMAP
	uniform mat3 alphaMapTransform;
	varying vec2 vAlphaMapUv;
#endif
#ifdef USE_LIGHTMAP
	uniform mat3 lightMapTransform;
	varying vec2 vLightMapUv;
#endif
#ifdef USE_AOMAP
	uniform mat3 aoMapTransform;
	varying vec2 vAoMapUv;
#endif
#ifdef USE_BUMPMAP
	uniform mat3 bumpMapTransform;
	varying vec2 vBumpMapUv;
#endif
#ifdef USE_NORMALMAP
	uniform mat3 normalMapTransform;
	varying vec2 vNormalMapUv;
#endif
#ifdef USE_DISPLACEMENTMAP
	uniform mat3 displacementMapTransform;
	varying vec2 vDisplacementMapUv;
#endif
#ifdef USE_EMISSIVEMAP
	uniform mat3 emissiveMapTransform;
	varying vec2 vEmissiveMapUv;
#endif
#ifdef USE_METALNESSMAP
	uniform mat3 metalnessMapTransform;
	varying vec2 vMetalnessMapUv;
#endif
#ifdef USE_ROUGHNESSMAP
	uniform mat3 roughnessMapTransform;
	varying vec2 vRoughnessMapUv;
#endif
#ifdef USE_ANISOTROPYMAP
	uniform mat3 anisotropyMapTransform;
	varying vec2 vAnisotropyMapUv;
#endif
#ifdef USE_CLEARCOATMAP
	uniform mat3 clearcoatMapTransform;
	varying vec2 vClearcoatMapUv;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	uniform mat3 clearcoatNormalMapTransform;
	varying vec2 vClearcoatNormalMapUv;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	uniform mat3 clearcoatRoughnessMapTransform;
	varying vec2 vClearcoatRoughnessMapUv;
#endif
#ifdef USE_SHEEN_COLORMAP
	uniform mat3 sheenColorMapTransform;
	varying vec2 vSheenColorMapUv;
#endif
#ifdef USE_SHEEN_ROUGHNESSMAP
	uniform mat3 sheenRoughnessMapTransform;
	varying vec2 vSheenRoughnessMapUv;
#endif
#ifdef USE_IRIDESCENCEMAP
	uniform mat3 iridescenceMapTransform;
	varying vec2 vIridescenceMapUv;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	uniform mat3 iridescenceThicknessMapTransform;
	varying vec2 vIridescenceThicknessMapUv;
#endif
#ifdef USE_SPECULARMAP
	uniform mat3 specularMapTransform;
	varying vec2 vSpecularMapUv;
#endif
#ifdef USE_SPECULAR_COLORMAP
	uniform mat3 specularColorMapTransform;
	varying vec2 vSpecularColorMapUv;
#endif
#ifdef USE_SPECULAR_INTENSITYMAP
	uniform mat3 specularIntensityMapTransform;
	varying vec2 vSpecularIntensityMapUv;
#endif
#ifdef USE_TRANSMISSIONMAP
	uniform mat3 transmissionMapTransform;
	varying vec2 vTransmissionMapUv;
#endif
#ifdef USE_THICKNESSMAP
	uniform mat3 thicknessMapTransform;
	varying vec2 vThicknessMapUv;
#endif`,_W=`#if defined( USE_UV ) || defined( USE_ANISOTROPY )
	vUv = vec3( uv, 1 ).xy;
#endif
#ifdef USE_MAP
	vMapUv = ( mapTransform * vec3( MAP_UV, 1 ) ).xy;
#endif
#ifdef USE_ALPHAMAP
	vAlphaMapUv = ( alphaMapTransform * vec3( ALPHAMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_LIGHTMAP
	vLightMapUv = ( lightMapTransform * vec3( LIGHTMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_AOMAP
	vAoMapUv = ( aoMapTransform * vec3( AOMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_BUMPMAP
	vBumpMapUv = ( bumpMapTransform * vec3( BUMPMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_NORMALMAP
	vNormalMapUv = ( normalMapTransform * vec3( NORMALMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_DISPLACEMENTMAP
	vDisplacementMapUv = ( displacementMapTransform * vec3( DISPLACEMENTMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_EMISSIVEMAP
	vEmissiveMapUv = ( emissiveMapTransform * vec3( EMISSIVEMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_METALNESSMAP
	vMetalnessMapUv = ( metalnessMapTransform * vec3( METALNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_ROUGHNESSMAP
	vRoughnessMapUv = ( roughnessMapTransform * vec3( ROUGHNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_ANISOTROPYMAP
	vAnisotropyMapUv = ( anisotropyMapTransform * vec3( ANISOTROPYMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_CLEARCOATMAP
	vClearcoatMapUv = ( clearcoatMapTransform * vec3( CLEARCOATMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	vClearcoatNormalMapUv = ( clearcoatNormalMapTransform * vec3( CLEARCOAT_NORMALMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	vClearcoatRoughnessMapUv = ( clearcoatRoughnessMapTransform * vec3( CLEARCOAT_ROUGHNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_IRIDESCENCEMAP
	vIridescenceMapUv = ( iridescenceMapTransform * vec3( IRIDESCENCEMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	vIridescenceThicknessMapUv = ( iridescenceThicknessMapTransform * vec3( IRIDESCENCE_THICKNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SHEEN_COLORMAP
	vSheenColorMapUv = ( sheenColorMapTransform * vec3( SHEEN_COLORMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SHEEN_ROUGHNESSMAP
	vSheenRoughnessMapUv = ( sheenRoughnessMapTransform * vec3( SHEEN_ROUGHNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SPECULARMAP
	vSpecularMapUv = ( specularMapTransform * vec3( SPECULARMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SPECULAR_COLORMAP
	vSpecularColorMapUv = ( specularColorMapTransform * vec3( SPECULAR_COLORMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SPECULAR_INTENSITYMAP
	vSpecularIntensityMapUv = ( specularIntensityMapTransform * vec3( SPECULAR_INTENSITYMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_TRANSMISSIONMAP
	vTransmissionMapUv = ( transmissionMapTransform * vec3( TRANSMISSIONMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_THICKNESSMAP
	vThicknessMapUv = ( thicknessMapTransform * vec3( THICKNESSMAP_UV, 1 ) ).xy;
#endif`,xW=`#if defined( USE_ENVMAP ) || defined( DISTANCE ) || defined ( USE_SHADOWMAP ) || defined ( USE_TRANSMISSION ) || NUM_SPOT_LIGHT_COORDS > 0
	vec4 worldPosition = vec4( transformed, 1.0 );
	#ifdef USE_BATCHING
		worldPosition = batchingMatrix * worldPosition;
	#endif
	#ifdef USE_INSTANCING
		worldPosition = instanceMatrix * worldPosition;
	#endif
	worldPosition = modelMatrix * worldPosition;
#endif`;const bW=`varying vec2 vUv;
uniform mat3 uvTransform;
void main() {
	vUv = ( uvTransform * vec3( uv, 1 ) ).xy;
	gl_Position = vec4( position.xy, 1.0, 1.0 );
}`,SW=`uniform sampler2D t2D;
uniform float backgroundIntensity;
varying vec2 vUv;
void main() {
	vec4 texColor = texture2D( t2D, vUv );
	#ifdef DECODE_VIDEO_TEXTURE
		texColor = vec4( mix( pow( texColor.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), texColor.rgb * 0.0773993808, vec3( lessThanEqual( texColor.rgb, vec3( 0.04045 ) ) ) ), texColor.w );
	#endif
	texColor.rgb *= backgroundIntensity;
	gl_FragColor = texColor;
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,wW=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
	gl_Position.z = gl_Position.w;
}`,MW=`#ifdef ENVMAP_TYPE_CUBE
	uniform samplerCube envMap;
#elif defined( ENVMAP_TYPE_CUBE_UV )
	uniform sampler2D envMap;
#endif
uniform float flipEnvMap;
uniform float backgroundBlurriness;
uniform float backgroundIntensity;
uniform mat3 backgroundRotation;
varying vec3 vWorldDirection;
#include <cube_uv_reflection_fragment>
void main() {
	#ifdef ENVMAP_TYPE_CUBE
		vec4 texColor = textureCube( envMap, backgroundRotation * vec3( flipEnvMap * vWorldDirection.x, vWorldDirection.yz ) );
	#elif defined( ENVMAP_TYPE_CUBE_UV )
		vec4 texColor = textureCubeUV( envMap, backgroundRotation * vWorldDirection, backgroundBlurriness );
	#else
		vec4 texColor = vec4( 0.0, 0.0, 0.0, 1.0 );
	#endif
	texColor.rgb *= backgroundIntensity;
	gl_FragColor = texColor;
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,EW=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
	gl_Position.z = gl_Position.w;
}`,TW=`uniform samplerCube tCube;
uniform float tFlip;
uniform float opacity;
varying vec3 vWorldDirection;
void main() {
	vec4 texColor = textureCube( tCube, vec3( tFlip * vWorldDirection.x, vWorldDirection.yz ) );
	gl_FragColor = texColor;
	gl_FragColor.a *= opacity;
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,AW=`#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
varying vec2 vHighPrecisionZW;
void main() {
	#include <uv_vertex>
	#include <batching_vertex>
	#include <skinbase_vertex>
	#include <morphinstance_vertex>
	#ifdef USE_DISPLACEMENTMAP
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vHighPrecisionZW = gl_Position.zw;
}`,CW=`#if DEPTH_PACKING == 3200
	uniform float opacity;
#endif
#include <common>
#include <packing>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
varying vec2 vHighPrecisionZW;
void main() {
	vec4 diffuseColor = vec4( 1.0 );
	#include <clipping_planes_fragment>
	#if DEPTH_PACKING == 3200
		diffuseColor.a = opacity;
	#endif
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <logdepthbuf_fragment>
	#ifdef USE_REVERSED_DEPTH_BUFFER
		float fragCoordZ = vHighPrecisionZW[ 0 ] / vHighPrecisionZW[ 1 ];
	#else
		float fragCoordZ = 0.5 * vHighPrecisionZW[ 0 ] / vHighPrecisionZW[ 1 ] + 0.5;
	#endif
	#if DEPTH_PACKING == 3200
		gl_FragColor = vec4( vec3( 1.0 - fragCoordZ ), opacity );
	#elif DEPTH_PACKING == 3201
		gl_FragColor = packDepthToRGBA( fragCoordZ );
	#elif DEPTH_PACKING == 3202
		gl_FragColor = vec4( packDepthToRGB( fragCoordZ ), 1.0 );
	#elif DEPTH_PACKING == 3203
		gl_FragColor = vec4( packDepthToRG( fragCoordZ ), 0.0, 1.0 );
	#endif
}`,RW=`#define DISTANCE
varying vec3 vWorldPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <batching_vertex>
	#include <skinbase_vertex>
	#include <morphinstance_vertex>
	#ifdef USE_DISPLACEMENTMAP
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <worldpos_vertex>
	#include <clipping_planes_vertex>
	vWorldPosition = worldPosition.xyz;
}`,NW=`#define DISTANCE
uniform vec3 referencePosition;
uniform float nearDistance;
uniform float farDistance;
varying vec3 vWorldPosition;
#include <common>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <clipping_planes_pars_fragment>
void main () {
	vec4 diffuseColor = vec4( 1.0 );
	#include <clipping_planes_fragment>
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	float dist = length( vWorldPosition - referencePosition );
	dist = ( dist - nearDistance ) / ( farDistance - nearDistance );
	dist = saturate( dist );
	gl_FragColor = vec4( dist, 0.0, 0.0, 1.0 );
}`,DW=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
}`,IW=`uniform sampler2D tEquirect;
varying vec3 vWorldDirection;
#include <common>
void main() {
	vec3 direction = normalize( vWorldDirection );
	vec2 sampleUV = equirectUv( direction );
	gl_FragColor = texture2D( tEquirect, sampleUV );
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,PW=`uniform float scale;
attribute float lineDistance;
varying float vLineDistance;
#include <common>
#include <uv_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	vLineDistance = scale * lineDistance;
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
}`,OW=`uniform vec3 diffuse;
uniform float opacity;
uniform float dashSize;
uniform float totalSize;
varying float vLineDistance;
#include <common>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	if ( mod( vLineDistance, totalSize ) > dashSize ) {
		discard;
	}
	vec3 outgoingLight = vec3( 0.0 );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
}`,LW=`#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#if defined ( USE_ENVMAP ) || defined ( USE_SKINNING )
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinbase_vertex>
		#include <skinnormal_vertex>
		#include <defaultnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <fog_vertex>
}`,UW=`uniform vec3 diffuse;
uniform float opacity;
#ifndef FLAT_SHADED
	varying vec3 vNormal;
#endif
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <specularmap_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	#ifdef USE_LIGHTMAP
		vec4 lightMapTexel = texture2D( lightMap, vLightMapUv );
		reflectedLight.indirectDiffuse += lightMapTexel.rgb * lightMapIntensity * RECIPROCAL_PI;
	#else
		reflectedLight.indirectDiffuse += vec3( 1.0 );
	#endif
	#include <aomap_fragment>
	reflectedLight.indirectDiffuse *= diffuseColor.rgb;
	vec3 outgoingLight = reflectedLight.indirectDiffuse;
	#include <envmap_fragment>
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,kW=`#define LAMBERT
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,BW=`#define LAMBERT
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float opacity;
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_lambert_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <specularmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_lambert_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;
	#include <envmap_fragment>
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,zW=`#define MATCAP
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <color_pars_vertex>
#include <displacementmap_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
	vViewPosition = - mvPosition.xyz;
}`,FW=`#define MATCAP
uniform vec3 diffuse;
uniform float opacity;
uniform sampler2D matcap;
varying vec3 vViewPosition;
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <fog_pars_fragment>
#include <normal_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	vec3 viewDir = normalize( vViewPosition );
	vec3 x = normalize( vec3( viewDir.z, 0.0, - viewDir.x ) );
	vec3 y = cross( viewDir, x );
	vec2 uv = vec2( dot( x, normal ), dot( y, normal ) ) * 0.495 + 0.5;
	#ifdef USE_MATCAP
		vec4 matcapColor = texture2D( matcap, uv );
	#else
		vec4 matcapColor = vec4( vec3( mix( 0.2, 0.8, uv.y ) ), 1.0 );
	#endif
	vec3 outgoingLight = diffuseColor.rgb * matcapColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,VW=`#define NORMAL
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )
	varying vec3 vViewPosition;
#endif
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphinstance_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )
	vViewPosition = - mvPosition.xyz;
#endif
}`,HW=`#define NORMAL
uniform float opacity;
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )
	varying vec3 vViewPosition;
#endif
#include <uv_pars_fragment>
#include <normal_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( 0.0, 0.0, 0.0, opacity );
	#include <clipping_planes_fragment>
	#include <logdepthbuf_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	gl_FragColor = vec4( normalize( normal ) * 0.5 + 0.5, diffuseColor.a );
	#ifdef OPAQUE
		gl_FragColor.a = 1.0;
	#endif
}`,GW=`#define PHONG
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphinstance_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,jW=`#define PHONG
uniform vec3 diffuse;
uniform vec3 emissive;
uniform vec3 specular;
uniform float shininess;
uniform float opacity;
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_phong_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <specularmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_phong_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;
	#include <envmap_fragment>
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,WW=`#define STANDARD
varying vec3 vViewPosition;
#ifdef USE_TRANSMISSION
	varying vec3 vWorldPosition;
#endif
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
#ifdef USE_TRANSMISSION
	vWorldPosition = worldPosition.xyz;
#endif
}`,qW=`#define STANDARD
#ifdef PHYSICAL
	#define IOR
	#define USE_SPECULAR
#endif
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float roughness;
uniform float metalness;
uniform float opacity;
#ifdef IOR
	uniform float ior;
#endif
#ifdef USE_SPECULAR
	uniform float specularIntensity;
	uniform vec3 specularColor;
	#ifdef USE_SPECULAR_COLORMAP
		uniform sampler2D specularColorMap;
	#endif
	#ifdef USE_SPECULAR_INTENSITYMAP
		uniform sampler2D specularIntensityMap;
	#endif
#endif
#ifdef USE_CLEARCOAT
	uniform float clearcoat;
	uniform float clearcoatRoughness;
#endif
#ifdef USE_DISPERSION
	uniform float dispersion;
#endif
#ifdef USE_IRIDESCENCE
	uniform float iridescence;
	uniform float iridescenceIOR;
	uniform float iridescenceThicknessMinimum;
	uniform float iridescenceThicknessMaximum;
#endif
#ifdef USE_SHEEN
	uniform vec3 sheenColor;
	uniform float sheenRoughness;
	#ifdef USE_SHEEN_COLORMAP
		uniform sampler2D sheenColorMap;
	#endif
	#ifdef USE_SHEEN_ROUGHNESSMAP
		uniform sampler2D sheenRoughnessMap;
	#endif
#endif
#ifdef USE_ANISOTROPY
	uniform vec2 anisotropyVector;
	#ifdef USE_ANISOTROPYMAP
		uniform sampler2D anisotropyMap;
	#endif
#endif
varying vec3 vViewPosition;
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <iridescence_fragment>
#include <cube_uv_reflection_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_physical_pars_fragment>
#include <fog_pars_fragment>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_physical_pars_fragment>
#include <transmission_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <clearcoat_pars_fragment>
#include <iridescence_pars_fragment>
#include <roughnessmap_pars_fragment>
#include <metalnessmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <roughnessmap_fragment>
	#include <metalnessmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <clearcoat_normal_fragment_begin>
	#include <clearcoat_normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_physical_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 totalDiffuse = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse;
	vec3 totalSpecular = reflectedLight.directSpecular + reflectedLight.indirectSpecular;
	#include <transmission_fragment>
	vec3 outgoingLight = totalDiffuse + totalSpecular + totalEmissiveRadiance;
	#ifdef USE_SHEEN
 
		outgoingLight = outgoingLight + sheenSpecularDirect + sheenSpecularIndirect;
 
 	#endif
	#ifdef USE_CLEARCOAT
		float dotNVcc = saturate( dot( geometryClearcoatNormal, geometryViewDir ) );
		vec3 Fcc = F_Schlick( material.clearcoatF0, material.clearcoatF90, dotNVcc );
		outgoingLight = outgoingLight * ( 1.0 - material.clearcoat * Fcc ) + ( clearcoatSpecularDirect + clearcoatSpecularIndirect ) * material.clearcoat;
	#endif
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,XW=`#define TOON
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,$W=`#define TOON
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float opacity;
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <gradientmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_toon_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_toon_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,YW=`uniform float size;
uniform float scale;
#include <common>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
#ifdef USE_POINTS_UV
	varying vec2 vUv;
	uniform mat3 uvTransform;
#endif
void main() {
	#ifdef USE_POINTS_UV
		vUv = ( uvTransform * vec3( uv, 1 ) ).xy;
	#endif
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <project_vertex>
	gl_PointSize = size;
	#ifdef USE_SIZEATTENUATION
		bool isPerspective = isPerspectiveMatrix( projectionMatrix );
		if ( isPerspective ) gl_PointSize *= ( scale / - mvPosition.z );
	#endif
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <worldpos_vertex>
	#include <fog_vertex>
}`,ZW=`uniform vec3 diffuse;
uniform float opacity;
#include <common>
#include <color_pars_fragment>
#include <map_particle_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	vec3 outgoingLight = vec3( 0.0 );
	#include <logdepthbuf_fragment>
	#include <map_particle_fragment>
	#include <color_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
}`,KW=`#include <common>
#include <batching_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <shadowmap_pars_vertex>
void main() {
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphinstance_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,JW=`uniform vec3 color;
uniform float opacity;
#include <common>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <logdepthbuf_pars_fragment>
#include <shadowmap_pars_fragment>
#include <shadowmask_pars_fragment>
void main() {
	#include <logdepthbuf_fragment>
	gl_FragColor = vec4( color, opacity * ( 1.0 - getShadowMask() ) );
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
}`,QW=`uniform float rotation;
uniform vec2 center;
#include <common>
#include <uv_pars_vertex>
#include <fog_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	vec4 mvPosition = modelViewMatrix[ 3 ];
	vec2 scale = vec2( length( modelMatrix[ 0 ].xyz ), length( modelMatrix[ 1 ].xyz ) );
	#ifndef USE_SIZEATTENUATION
		bool isPerspective = isPerspectiveMatrix( projectionMatrix );
		if ( isPerspective ) scale *= - mvPosition.z;
	#endif
	vec2 alignedPosition = ( position.xy - ( center - vec2( 0.5 ) ) ) * scale;
	vec2 rotatedPosition;
	rotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;
	rotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;
	mvPosition.xy += rotatedPosition;
	gl_Position = projectionMatrix * mvPosition;
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
}`,eq=`uniform vec3 diffuse;
uniform float opacity;
#include <common>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	vec3 outgoingLight = vec3( 0.0 );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
}`,Cn={alphahash_fragment:S9,alphahash_pars_fragment:w9,alphamap_fragment:M9,alphamap_pars_fragment:E9,alphatest_fragment:T9,alphatest_pars_fragment:A9,aomap_fragment:C9,aomap_pars_fragment:R9,batching_pars_vertex:N9,batching_vertex:D9,begin_vertex:I9,beginnormal_vertex:P9,bsdfs:O9,iridescence_fragment:L9,bumpmap_pars_fragment:U9,clipping_planes_fragment:k9,clipping_planes_pars_fragment:B9,clipping_planes_pars_vertex:z9,clipping_planes_vertex:F9,color_fragment:V9,color_pars_fragment:H9,color_pars_vertex:G9,color_vertex:j9,common:W9,cube_uv_reflection_fragment:q9,defaultnormal_vertex:X9,displacementmap_pars_vertex:$9,displacementmap_vertex:Y9,emissivemap_fragment:Z9,emissivemap_pars_fragment:K9,colorspace_fragment:J9,colorspace_pars_fragment:Q9,envmap_fragment:e7,envmap_common_pars_fragment:t7,envmap_pars_fragment:n7,envmap_pars_vertex:i7,envmap_physical_pars_fragment:p7,envmap_vertex:r7,fog_vertex:s7,fog_pars_vertex:a7,fog_fragment:o7,fog_pars_fragment:l7,gradientmap_pars_fragment:c7,lightmap_pars_fragment:u7,lights_lambert_fragment:h7,lights_lambert_pars_fragment:f7,lights_pars_begin:d7,lights_toon_fragment:m7,lights_toon_pars_fragment:g7,lights_phong_fragment:v7,lights_phong_pars_fragment:y7,lights_physical_fragment:_7,lights_physical_pars_fragment:x7,lights_fragment_begin:b7,lights_fragment_maps:S7,lights_fragment_end:w7,logdepthbuf_fragment:M7,logdepthbuf_pars_fragment:E7,logdepthbuf_pars_vertex:T7,logdepthbuf_vertex:A7,map_fragment:C7,map_pars_fragment:R7,map_particle_fragment:N7,map_particle_pars_fragment:D7,metalnessmap_fragment:I7,metalnessmap_pars_fragment:P7,morphinstance_vertex:O7,morphcolor_vertex:L7,morphnormal_vertex:U7,morphtarget_pars_vertex:k7,morphtarget_vertex:B7,normal_fragment_begin:z7,normal_fragment_maps:F7,normal_pars_fragment:V7,normal_pars_vertex:H7,normal_vertex:G7,normalmap_pars_fragment:j7,clearcoat_normal_fragment_begin:W7,clearcoat_normal_fragment_maps:q7,clearcoat_pars_fragment:X7,iridescence_pars_fragment:$7,opaque_fragment:Y7,packing:Z7,premultiplied_alpha_fragment:K7,project_vertex:J7,dithering_fragment:Q7,dithering_pars_fragment:eW,roughnessmap_fragment:tW,roughnessmap_pars_fragment:nW,shadowmap_pars_fragment:iW,shadowmap_pars_vertex:rW,shadowmap_vertex:sW,shadowmask_pars_fragment:aW,skinbase_vertex:oW,skinning_pars_vertex:lW,skinning_vertex:cW,skinnormal_vertex:uW,specularmap_fragment:hW,specularmap_pars_fragment:fW,tonemapping_fragment:dW,tonemapping_pars_fragment:pW,transmission_fragment:mW,transmission_pars_fragment:gW,uv_pars_fragment:vW,uv_pars_vertex:yW,uv_vertex:_W,worldpos_vertex:xW,background_vert:bW,background_frag:SW,backgroundCube_vert:wW,backgroundCube_frag:MW,cube_vert:EW,cube_frag:TW,depth_vert:AW,depth_frag:CW,distance_vert:RW,distance_frag:NW,equirect_vert:DW,equirect_frag:IW,linedashed_vert:PW,linedashed_frag:OW,meshbasic_vert:LW,meshbasic_frag:UW,meshlambert_vert:kW,meshlambert_frag:BW,meshmatcap_vert:zW,meshmatcap_frag:FW,meshnormal_vert:VW,meshnormal_frag:HW,meshphong_vert:GW,meshphong_frag:jW,meshphysical_vert:WW,meshphysical_frag:qW,meshtoon_vert:XW,meshtoon_frag:$W,points_vert:YW,points_frag:ZW,shadow_vert:KW,shadow_frag:JW,sprite_vert:QW,sprite_frag:eq},Nt={common:{diffuse:{value:new Ot(16777215)},opacity:{value:1},map:{value:null},mapTransform:{value:new xn},alphaMap:{value:null},alphaMapTransform:{value:new xn},alphaTest:{value:0}},specularmap:{specularMap:{value:null},specularMapTransform:{value:new xn}},envmap:{envMap:{value:null},envMapRotation:{value:new xn},flipEnvMap:{value:-1},reflectivity:{value:1},ior:{value:1.5},refractionRatio:{value:.98},dfgLUT:{value:null}},aomap:{aoMap:{value:null},aoMapIntensity:{value:1},aoMapTransform:{value:new xn}},lightmap:{lightMap:{value:null},lightMapIntensity:{value:1},lightMapTransform:{value:new xn}},bumpmap:{bumpMap:{value:null},bumpMapTransform:{value:new xn},bumpScale:{value:1}},normalmap:{normalMap:{value:null},normalMapTransform:{value:new xn},normalScale:{value:new Ye(1,1)}},displacementmap:{displacementMap:{value:null},displacementMapTransform:{value:new xn},displacementScale:{value:1},displacementBias:{value:0}},emissivemap:{emissiveMap:{value:null},emissiveMapTransform:{value:new xn}},metalnessmap:{metalnessMap:{value:null},metalnessMapTransform:{value:new xn}},roughnessmap:{roughnessMap:{value:null},roughnessMapTransform:{value:new xn}},gradientmap:{gradientMap:{value:null}},fog:{fogDensity:{value:25e-5},fogNear:{value:1},fogFar:{value:2e3},fogColor:{value:new Ot(16777215)}},lights:{ambientLightColor:{value:[]},lightProbe:{value:[]},directionalLights:{value:[],properties:{direction:{},color:{}}},directionalLightShadows:{value:[],properties:{shadowIntensity:1,shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},directionalShadowMap:{value:[]},directionalShadowMatrix:{value:[]},spotLights:{value:[],properties:{color:{},position:{},direction:{},distance:{},coneCos:{},penumbraCos:{},decay:{}}},spotLightShadows:{value:[],properties:{shadowIntensity:1,shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},spotLightMap:{value:[]},spotShadowMap:{value:[]},spotLightMatrix:{value:[]},pointLights:{value:[],properties:{color:{},position:{},decay:{},distance:{}}},pointLightShadows:{value:[],properties:{shadowIntensity:1,shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{},shadowCameraNear:{},shadowCameraFar:{}}},pointShadowMap:{value:[]},pointShadowMatrix:{value:[]},hemisphereLights:{value:[],properties:{direction:{},skyColor:{},groundColor:{}}},rectAreaLights:{value:[],properties:{color:{},position:{},width:{},height:{}}},ltc_1:{value:null},ltc_2:{value:null}},points:{diffuse:{value:new Ot(16777215)},opacity:{value:1},size:{value:1},scale:{value:1},map:{value:null},alphaMap:{value:null},alphaMapTransform:{value:new xn},alphaTest:{value:0},uvTransform:{value:new xn}},sprite:{diffuse:{value:new Ot(16777215)},opacity:{value:1},center:{value:new Ye(.5,.5)},rotation:{value:0},map:{value:null},mapTransform:{value:new xn},alphaMap:{value:null},alphaMapTransform:{value:new xn},alphaTest:{value:0}}},Go={basic:{uniforms:Us([Nt.common,Nt.specularmap,Nt.envmap,Nt.aomap,Nt.lightmap,Nt.fog]),vertexShader:Cn.meshbasic_vert,fragmentShader:Cn.meshbasic_frag},lambert:{uniforms:Us([Nt.common,Nt.specularmap,Nt.envmap,Nt.aomap,Nt.lightmap,Nt.emissivemap,Nt.bumpmap,Nt.normalmap,Nt.displacementmap,Nt.fog,Nt.lights,{emissive:{value:new Ot(0)}}]),vertexShader:Cn.meshlambert_vert,fragmentShader:Cn.meshlambert_frag},phong:{uniforms:Us([Nt.common,Nt.specularmap,Nt.envmap,Nt.aomap,Nt.lightmap,Nt.emissivemap,Nt.bumpmap,Nt.normalmap,Nt.displacementmap,Nt.fog,Nt.lights,{emissive:{value:new Ot(0)},specular:{value:new Ot(1118481)},shininess:{value:30}}]),vertexShader:Cn.meshphong_vert,fragmentShader:Cn.meshphong_frag},standard:{uniforms:Us([Nt.common,Nt.envmap,Nt.aomap,Nt.lightmap,Nt.emissivemap,Nt.bumpmap,Nt.normalmap,Nt.displacementmap,Nt.roughnessmap,Nt.metalnessmap,Nt.fog,Nt.lights,{emissive:{value:new Ot(0)},roughness:{value:1},metalness:{value:0},envMapIntensity:{value:1}}]),vertexShader:Cn.meshphysical_vert,fragmentShader:Cn.meshphysical_frag},toon:{uniforms:Us([Nt.common,Nt.aomap,Nt.lightmap,Nt.emissivemap,Nt.bumpmap,Nt.normalmap,Nt.displacementmap,Nt.gradientmap,Nt.fog,Nt.lights,{emissive:{value:new Ot(0)}}]),vertexShader:Cn.meshtoon_vert,fragmentShader:Cn.meshtoon_frag},matcap:{uniforms:Us([Nt.common,Nt.bumpmap,Nt.normalmap,Nt.displacementmap,Nt.fog,{matcap:{value:null}}]),vertexShader:Cn.meshmatcap_vert,fragmentShader:Cn.meshmatcap_frag},points:{uniforms:Us([Nt.points,Nt.fog]),vertexShader:Cn.points_vert,fragmentShader:Cn.points_frag},dashed:{uniforms:Us([Nt.common,Nt.fog,{scale:{value:1},dashSize:{value:1},totalSize:{value:2}}]),vertexShader:Cn.linedashed_vert,fragmentShader:Cn.linedashed_frag},depth:{uniforms:Us([Nt.common,Nt.displacementmap]),vertexShader:Cn.depth_vert,fragmentShader:Cn.depth_frag},normal:{uniforms:Us([Nt.common,Nt.bumpmap,Nt.normalmap,Nt.displacementmap,{opacity:{value:1}}]),vertexShader:Cn.meshnormal_vert,fragmentShader:Cn.meshnormal_frag},sprite:{uniforms:Us([Nt.sprite,Nt.fog]),vertexShader:Cn.sprite_vert,fragmentShader:Cn.sprite_frag},background:{uniforms:{uvTransform:{value:new xn},t2D:{value:null},backgroundIntensity:{value:1}},vertexShader:Cn.background_vert,fragmentShader:Cn.background_frag},backgroundCube:{uniforms:{envMap:{value:null},flipEnvMap:{value:-1},backgroundBlurriness:{value:0},backgroundIntensity:{value:1},backgroundRotation:{value:new xn}},vertexShader:Cn.backgroundCube_vert,fragmentShader:Cn.backgroundCube_frag},cube:{uniforms:{tCube:{value:null},tFlip:{value:-1},opacity:{value:1}},vertexShader:Cn.cube_vert,fragmentShader:Cn.cube_frag},equirect:{uniforms:{tEquirect:{value:null}},vertexShader:Cn.equirect_vert,fragmentShader:Cn.equirect_frag},distance:{uniforms:Us([Nt.common,Nt.displacementmap,{referencePosition:{value:new J},nearDistance:{value:1},farDistance:{value:1e3}}]),vertexShader:Cn.distance_vert,fragmentShader:Cn.distance_frag},shadow:{uniforms:Us([Nt.lights,Nt.fog,{color:{value:new Ot(0)},opacity:{value:1}}]),vertexShader:Cn.shadow_vert,fragmentShader:Cn.shadow_frag}};Go.physical={uniforms:Us([Go.standard.uniforms,{clearcoat:{value:0},clearcoatMap:{value:null},clearcoatMapTransform:{value:new xn},clearcoatNormalMap:{value:null},clearcoatNormalMapTransform:{value:new xn},clearcoatNormalScale:{value:new Ye(1,1)},clearcoatRoughness:{value:0},clearcoatRoughnessMap:{value:null},clearcoatRoughnessMapTransform:{value:new xn},dispersion:{value:0},iridescence:{value:0},iridescenceMap:{value:null},iridescenceMapTransform:{value:new xn},iridescenceIOR:{value:1.3},iridescenceThicknessMinimum:{value:100},iridescenceThicknessMaximum:{value:400},iridescenceThicknessMap:{value:null},iridescenceThicknessMapTransform:{value:new xn},sheen:{value:0},sheenColor:{value:new Ot(0)},sheenColorMap:{value:null},sheenColorMapTransform:{value:new xn},sheenRoughness:{value:1},sheenRoughnessMap:{value:null},sheenRoughnessMapTransform:{value:new xn},transmission:{value:0},transmissionMap:{value:null},transmissionMapTransform:{value:new xn},transmissionSamplerSize:{value:new Ye},transmissionSamplerMap:{value:null},thickness:{value:0},thicknessMap:{value:null},thicknessMapTransform:{value:new xn},attenuationDistance:{value:0},attenuationColor:{value:new Ot(0)},specularColor:{value:new Ot(1,1,1)},specularColorMap:{value:null},specularColorMapTransform:{value:new xn},specularIntensity:{value:1},specularIntensityMap:{value:null},specularIntensityMapTransform:{value:new xn},anisotropyVector:{value:new Ye},anisotropyMap:{value:null},anisotropyMapTransform:{value:new xn}}]),vertexShader:Cn.meshphysical_vert,fragmentShader:Cn.meshphysical_frag};const ex={r:0,b:0,g:0},tf=new Ca,tq=new un;function nq(n,e,t,i,r,s,o){const u=new Ot(0);let f=s===!0?0:1,p,m,v=null,_=0,x=null;function S(N){let I=N.isScene===!0?N.background:null;return I&&I.isTexture&&(I=(N.backgroundBlurriness>0?t:e).get(I)),I}function A(N){let I=!1;const U=S(N);U===null?M(u,f):U&&U.isColor&&(M(U,1),I=!0);const L=n.xr.getEnvironmentBlendMode();L==="additive"?i.buffers.color.setClear(0,0,0,1,o):L==="alpha-blend"&&i.buffers.color.setClear(0,0,0,0,o),(n.autoClear||I)&&(i.buffers.depth.setTest(!0),i.buffers.depth.setMask(!0),i.buffers.color.setMask(!0),n.clear(n.autoClearColor,n.autoClearDepth,n.autoClearStencil))}function E(N,I){const U=S(I);U&&(U.isCubeTexture||U.mapping===Jp)?(m===void 0&&(m=new Xi(new Rf(1,1,1),new Ss({name:"BackgroundCubeMaterial",uniforms:Fp(Go.backgroundCube.uniforms),vertexShader:Go.backgroundCube.vertexShader,fragmentShader:Go.backgroundCube.fragmentShader,side:Vs,depthTest:!1,depthWrite:!1,fog:!1,allowOverride:!1})),m.geometry.deleteAttribute("normal"),m.geometry.deleteAttribute("uv"),m.onBeforeRender=function(L,F,H){this.matrixWorld.copyPosition(H.matrixWorld)},Object.defineProperty(m.material,"envMap",{get:function(){return this.uniforms.envMap.value}}),r.update(m)),tf.copy(I.backgroundRotation),tf.x*=-1,tf.y*=-1,tf.z*=-1,U.isCubeTexture&&U.isRenderTargetTexture===!1&&(tf.y*=-1,tf.z*=-1),m.material.uniforms.envMap.value=U,m.material.uniforms.flipEnvMap.value=U.isCubeTexture&&U.isRenderTargetTexture===!1?-1:1,m.material.uniforms.backgroundBlurriness.value=I.backgroundBlurriness,m.material.uniforms.backgroundIntensity.value=I.backgroundIntensity,m.material.uniforms.backgroundRotation.value.setFromMatrix4(tq.makeRotationFromEuler(tf)),m.material.toneMapped=Hn.getTransfer(U.colorSpace)!==ri,(v!==U||_!==U.version||x!==n.toneMapping)&&(m.material.needsUpdate=!0,v=U,_=U.version,x=n.toneMapping),m.layers.enableAll(),N.unshift(m,m.geometry,m.material,0,0,null)):U&&U.isTexture&&(p===void 0&&(p=new Xi(new Qu(2,2),new Ss({name:"BackgroundMaterial",uniforms:Fp(Go.background.uniforms),vertexShader:Go.background.vertexShader,fragmentShader:Go.background.fragmentShader,side:Pc,depthTest:!1,depthWrite:!1,fog:!1,allowOverride:!1})),p.geometry.deleteAttribute("normal"),Object.defineProperty(p.material,"map",{get:function(){return this.uniforms.t2D.value}}),r.update(p)),p.material.uniforms.t2D.value=U,p.material.uniforms.backgroundIntensity.value=I.backgroundIntensity,p.material.toneMapped=Hn.getTransfer(U.colorSpace)!==ri,U.matrixAutoUpdate===!0&&U.updateMatrix(),p.material.uniforms.uvTransform.value.copy(U.matrix),(v!==U||_!==U.version||x!==n.toneMapping)&&(p.material.needsUpdate=!0,v=U,_=U.version,x=n.toneMapping),p.layers.enableAll(),N.unshift(p,p.geometry,p.material,0,0,null))}function M(N,I){N.getRGB(ex,YP(n)),i.buffers.color.setClear(ex.r,ex.g,ex.b,I,o)}function C(){m!==void 0&&(m.geometry.dispose(),m.material.dispose(),m=void 0),p!==void 0&&(p.geometry.dispose(),p.material.dispose(),p=void 0)}return{getClearColor:function(){return u},setClearColor:function(N,I=1){u.set(N),f=I,M(u,f)},getClearAlpha:function(){return f},setClearAlpha:function(N){f=N,M(u,f)},render:A,addToRenderList:E,dispose:C}}function iq(n,e){const t=n.getParameter(n.MAX_VERTEX_ATTRIBS),i={},r=_(null);let s=r,o=!1;function u(k,Y,ie,te,le){let de=!1;const Z=v(te,ie,Y);s!==Z&&(s=Z,p(s.object)),de=x(k,te,ie,le),de&&S(k,te,ie,le),le!==null&&e.update(le,n.ELEMENT_ARRAY_BUFFER),(de||o)&&(o=!1,I(k,Y,ie,te),le!==null&&n.bindBuffer(n.ELEMENT_ARRAY_BUFFER,e.get(le).buffer))}function f(){return n.createVertexArray()}function p(k){return n.bindVertexArray(k)}function m(k){return n.deleteVertexArray(k)}function v(k,Y,ie){const te=ie.wireframe===!0;let le=i[k.id];le===void 0&&(le={},i[k.id]=le);let de=le[Y.id];de===void 0&&(de={},le[Y.id]=de);let Z=de[te];return Z===void 0&&(Z=_(f()),de[te]=Z),Z}function _(k){const Y=[],ie=[],te=[];for(let le=0;le<t;le++)Y[le]=0,ie[le]=0,te[le]=0;return{geometry:null,program:null,wireframe:!1,newAttributes:Y,enabledAttributes:ie,attributeDivisors:te,object:k,attributes:{},index:null}}function x(k,Y,ie,te){const le=s.attributes,de=Y.attributes;let Z=0;const Q=ie.getAttributes();for(const ve in Q)if(Q[ve].location>=0){const we=le[ve];let X=de[ve];if(X===void 0&&(ve==="instanceMatrix"&&k.instanceMatrix&&(X=k.instanceMatrix),ve==="instanceColor"&&k.instanceColor&&(X=k.instanceColor)),we===void 0||we.attribute!==X||X&&we.data!==X.data)return!0;Z++}return s.attributesNum!==Z||s.index!==te}function S(k,Y,ie,te){const le={},de=Y.attributes;let Z=0;const Q=ie.getAttributes();for(const ve in Q)if(Q[ve].location>=0){let we=de[ve];we===void 0&&(ve==="instanceMatrix"&&k.instanceMatrix&&(we=k.instanceMatrix),ve==="instanceColor"&&k.instanceColor&&(we=k.instanceColor));const X={};X.attribute=we,we&&we.data&&(X.data=we.data),le[ve]=X,Z++}s.attributes=le,s.attributesNum=Z,s.index=te}function A(){const k=s.newAttributes;for(let Y=0,ie=k.length;Y<ie;Y++)k[Y]=0}function E(k){M(k,0)}function M(k,Y){const ie=s.newAttributes,te=s.enabledAttributes,le=s.attributeDivisors;ie[k]=1,te[k]===0&&(n.enableVertexAttribArray(k),te[k]=1),le[k]!==Y&&(n.vertexAttribDivisor(k,Y),le[k]=Y)}function C(){const k=s.newAttributes,Y=s.enabledAttributes;for(let ie=0,te=Y.length;ie<te;ie++)Y[ie]!==k[ie]&&(n.disableVertexAttribArray(ie),Y[ie]=0)}function N(k,Y,ie,te,le,de,Z){Z===!0?n.vertexAttribIPointer(k,Y,ie,le,de):n.vertexAttribPointer(k,Y,ie,te,le,de)}function I(k,Y,ie,te){A();const le=te.attributes,de=ie.getAttributes(),Z=Y.defaultAttributeValues;for(const Q in de){const ve=de[Q];if(ve.location>=0){let Te=le[Q];if(Te===void 0&&(Q==="instanceMatrix"&&k.instanceMatrix&&(Te=k.instanceMatrix),Q==="instanceColor"&&k.instanceColor&&(Te=k.instanceColor)),Te!==void 0){const we=Te.normalized,X=Te.itemSize,ce=e.get(Te);if(ce===void 0)continue;const xe=ce.buffer,Be=ce.type,mt=ce.bytesPerElement,ge=Be===n.INT||Be===n.UNSIGNED_INT||Te.gpuType===sv;if(Te.isInterleavedBufferAttribute){const Re=Te.data,rt=Re.stride,xt=Te.offset;if(Re.isInstancedInterleavedBuffer){for(let Rt=0;Rt<ve.locationSize;Rt++)M(ve.location+Rt,Re.meshPerAttribute);k.isInstancedMesh!==!0&&te._maxInstanceCount===void 0&&(te._maxInstanceCount=Re.meshPerAttribute*Re.count)}else for(let Rt=0;Rt<ve.locationSize;Rt++)E(ve.location+Rt);n.bindBuffer(n.ARRAY_BUFFER,xe);for(let Rt=0;Rt<ve.locationSize;Rt++)N(ve.location+Rt,X/ve.locationSize,Be,we,rt*mt,(xt+X/ve.locationSize*Rt)*mt,ge)}else{if(Te.isInstancedBufferAttribute){for(let Re=0;Re<ve.locationSize;Re++)M(ve.location+Re,Te.meshPerAttribute);k.isInstancedMesh!==!0&&te._maxInstanceCount===void 0&&(te._maxInstanceCount=Te.meshPerAttribute*Te.count)}else for(let Re=0;Re<ve.locationSize;Re++)E(ve.location+Re);n.bindBuffer(n.ARRAY_BUFFER,xe);for(let Re=0;Re<ve.locationSize;Re++)N(ve.location+Re,X/ve.locationSize,Be,we,X*mt,X/ve.locationSize*Re*mt,ge)}}else if(Z!==void 0){const we=Z[Q];if(we!==void 0)switch(we.length){case 2:n.vertexAttrib2fv(ve.location,we);break;case 3:n.vertexAttrib3fv(ve.location,we);break;case 4:n.vertexAttrib4fv(ve.location,we);break;default:n.vertexAttrib1fv(ve.location,we)}}}}C()}function U(){H();for(const k in i){const Y=i[k];for(const ie in Y){const te=Y[ie];for(const le in te)m(te[le].object),delete te[le];delete Y[ie]}delete i[k]}}function L(k){if(i[k.id]===void 0)return;const Y=i[k.id];for(const ie in Y){const te=Y[ie];for(const le in te)m(te[le].object),delete te[le];delete Y[ie]}delete i[k.id]}function F(k){for(const Y in i){const ie=i[Y];if(ie[k.id]===void 0)continue;const te=ie[k.id];for(const le in te)m(te[le].object),delete te[le];delete ie[k.id]}}function H(){P(),o=!0,s!==r&&(s=r,p(s.object))}function P(){r.geometry=null,r.program=null,r.wireframe=!1}return{setup:u,reset:H,resetDefaultState:P,dispose:U,releaseStatesOfGeometry:L,releaseStatesOfProgram:F,initAttributes:A,enableAttribute:E,disableUnusedAttributes:C}}function rq(n,e,t){let i;function r(p){i=p}function s(p,m){n.drawArrays(i,p,m),t.update(m,i,1)}function o(p,m,v){v!==0&&(n.drawArraysInstanced(i,p,m,v),t.update(m,i,v))}function u(p,m,v){if(v===0)return;e.get("WEBGL_multi_draw").multiDrawArraysWEBGL(i,p,0,m,0,v);let x=0;for(let S=0;S<v;S++)x+=m[S];t.update(x,i,1)}function f(p,m,v,_){if(v===0)return;const x=e.get("WEBGL_multi_draw");if(x===null)for(let S=0;S<p.length;S++)o(p[S],m[S],_[S]);else{x.multiDrawArraysInstancedWEBGL(i,p,0,m,0,_,0,v);let S=0;for(let A=0;A<v;A++)S+=m[A]*_[A];t.update(S,i,1)}}this.setMode=r,this.render=s,this.renderInstances=o,this.renderMultiDraw=u,this.renderMultiDrawInstances=f}function sq(n,e,t,i){let r;function s(){if(r!==void 0)return r;if(e.has("EXT_texture_filter_anisotropic")===!0){const F=e.get("EXT_texture_filter_anisotropic");r=n.getParameter(F.MAX_TEXTURE_MAX_ANISOTROPY_EXT)}else r=0;return r}function o(F){return!(F!==pr&&i.convert(F)!==n.getParameter(n.IMPLEMENTATION_COLOR_READ_FORMAT))}function u(F){const H=F===ir&&(e.has("EXT_color_buffer_half_float")||e.has("EXT_color_buffer_float"));return!(F!==Gr&&i.convert(F)!==n.getParameter(n.IMPLEMENTATION_COLOR_READ_TYPE)&&F!==ki&&!H)}function f(F){if(F==="highp"){if(n.getShaderPrecisionFormat(n.VERTEX_SHADER,n.HIGH_FLOAT).precision>0&&n.getShaderPrecisionFormat(n.FRAGMENT_SHADER,n.HIGH_FLOAT).precision>0)return"highp";F="mediump"}return F==="mediump"&&n.getShaderPrecisionFormat(n.VERTEX_SHADER,n.MEDIUM_FLOAT).precision>0&&n.getShaderPrecisionFormat(n.FRAGMENT_SHADER,n.MEDIUM_FLOAT).precision>0?"mediump":"lowp"}let p=t.precision!==void 0?t.precision:"highp";const m=f(p);m!==p&&(At("WebGLRenderer:",p,"not supported, using",m,"instead."),p=m);const v=t.logarithmicDepthBuffer===!0,_=t.reversedDepthBuffer===!0&&e.has("EXT_clip_control"),x=n.getParameter(n.MAX_TEXTURE_IMAGE_UNITS),S=n.getParameter(n.MAX_VERTEX_TEXTURE_IMAGE_UNITS),A=n.getParameter(n.MAX_TEXTURE_SIZE),E=n.getParameter(n.MAX_CUBE_MAP_TEXTURE_SIZE),M=n.getParameter(n.MAX_VERTEX_ATTRIBS),C=n.getParameter(n.MAX_VERTEX_UNIFORM_VECTORS),N=n.getParameter(n.MAX_VARYING_VECTORS),I=n.getParameter(n.MAX_FRAGMENT_UNIFORM_VECTORS),U=n.getParameter(n.MAX_SAMPLES),L=n.getParameter(n.SAMPLES);return{isWebGL2:!0,getMaxAnisotropy:s,getMaxPrecision:f,textureFormatReadable:o,textureTypeReadable:u,precision:p,logarithmicDepthBuffer:v,reversedDepthBuffer:_,maxTextures:x,maxVertexTextures:S,maxTextureSize:A,maxCubemapSize:E,maxAttributes:M,maxVertexUniforms:C,maxVaryings:N,maxFragmentUniforms:I,maxSamples:U,samples:L}}function aq(n){const e=this;let t=null,i=0,r=!1,s=!1;const o=new Uu,u=new xn,f={value:null,needsUpdate:!1};this.uniform=f,this.numPlanes=0,this.numIntersection=0,this.init=function(v,_){const x=v.length!==0||_||i!==0||r;return r=_,i=v.length,x},this.beginShadows=function(){s=!0,m(null)},this.endShadows=function(){s=!1},this.setGlobalState=function(v,_){t=m(v,_,0)},this.setState=function(v,_,x){const S=v.clippingPlanes,A=v.clipIntersection,E=v.clipShadows,M=n.get(v);if(!r||S===null||S.length===0||s&&!E)s?m(null):p();else{const C=s?0:i,N=C*4;let I=M.clippingState||null;f.value=I,I=m(S,_,N,x);for(let U=0;U!==N;++U)I[U]=t[U];M.clippingState=I,this.numIntersection=A?this.numPlanes:0,this.numPlanes+=C}};function p(){f.value!==t&&(f.value=t,f.needsUpdate=i>0),e.numPlanes=i,e.numIntersection=0}function m(v,_,x,S){const A=v!==null?v.length:0;let E=null;if(A!==0){if(E=f.value,S!==!0||E===null){const M=x+A*4,C=_.matrixWorldInverse;u.getNormalMatrix(C),(E===null||E.length<M)&&(E=new Float32Array(M));for(let N=0,I=x;N!==A;++N,I+=4)o.copy(v[N]).applyMatrix4(C,u),o.normal.toArray(E,I),E[I+3]=o.constant}f.value=E,f.needsUpdate=!0}return e.numPlanes=A,e.numIntersection=0,E}}function oq(n){let e=new WeakMap;function t(o,u){return u===Pp?o.mapping=$o:u===N0&&(o.mapping=Xu),o}function i(o){if(o&&o.isTexture){const u=o.mapping;if(u===Pp||u===N0)if(e.has(o)){const f=e.get(o).texture;return t(f,o.mapping)}else{const f=o.image;if(f&&f.height>0){const p=new Zb(f.height);return p.fromEquirectangularTexture(n,o),e.set(o,p),o.addEventListener("dispose",r),t(p.texture,o.mapping)}else return null}}return o}function r(o){const u=o.target;u.removeEventListener("dispose",r);const f=e.get(u);f!==void 0&&(e.delete(u),f.dispose())}function s(){e=new WeakMap}return{get:i,dispose:s}}const Hu=4,B3=[.125,.215,.35,.446,.526,.582],cf=20,lq=256,Gg=new If,z3=new Ot;let xw=null,bw=0,Sw=0,ww=!1;const cq=new J;class UM{constructor(e){this._renderer=e,this._pingPongRenderTarget=null,this._lodMax=0,this._cubeSize=0,this._sizeLods=[],this._sigmas=[],this._lodMeshes=[],this._backgroundBox=null,this._cubemapMaterial=null,this._equirectMaterial=null,this._blurMaterial=null,this._ggxMaterial=null}fromScene(e,t=0,i=.1,r=100,s={}){const{size:o=256,position:u=cq}=s;xw=this._renderer.getRenderTarget(),bw=this._renderer.getActiveCubeFace(),Sw=this._renderer.getActiveMipmapLevel(),ww=this._renderer.xr.enabled,this._renderer.xr.enabled=!1,this._setSize(o);const f=this._allocateTargets();return f.depthBuffer=!0,this._sceneToCubeUV(e,i,r,f,u),t>0&&this._blur(f,0,0,t),this._applyPMREM(f),this._cleanup(f),f}fromEquirectangular(e,t=null){return this._fromTexture(e,t)}fromCubemap(e,t=null){return this._fromTexture(e,t)}compileCubemapShader(){this._cubemapMaterial===null&&(this._cubemapMaterial=H3(),this._compileMaterial(this._cubemapMaterial))}compileEquirectangularShader(){this._equirectMaterial===null&&(this._equirectMaterial=V3(),this._compileMaterial(this._equirectMaterial))}dispose(){this._dispose(),this._cubemapMaterial!==null&&this._cubemapMaterial.dispose(),this._equirectMaterial!==null&&this._equirectMaterial.dispose(),this._backgroundBox!==null&&(this._backgroundBox.geometry.dispose(),this._backgroundBox.material.dispose())}_setSize(e){this._lodMax=Math.floor(Math.log2(e)),this._cubeSize=Math.pow(2,this._lodMax)}_dispose(){this._blurMaterial!==null&&this._blurMaterial.dispose(),this._ggxMaterial!==null&&this._ggxMaterial.dispose(),this._pingPongRenderTarget!==null&&this._pingPongRenderTarget.dispose();for(let e=0;e<this._lodMeshes.length;e++)this._lodMeshes[e].geometry.dispose()}_cleanup(e){this._renderer.setRenderTarget(xw,bw,Sw),this._renderer.xr.enabled=ww,e.scissorTest=!1,hp(e,0,0,e.width,e.height)}_fromTexture(e,t){e.mapping===$o||e.mapping===Xu?this._setSize(e.image.length===0?16:e.image[0].width||e.image[0].image.width):this._setSize(e.image.width/4),xw=this._renderer.getRenderTarget(),bw=this._renderer.getActiveCubeFace(),Sw=this._renderer.getActiveMipmapLevel(),ww=this._renderer.xr.enabled,this._renderer.xr.enabled=!1;const i=t||this._allocateTargets();return this._textureToCubeUV(e,i),this._applyPMREM(i),this._cleanup(i),i}_allocateTargets(){const e=3*Math.max(this._cubeSize,112),t=4*this._cubeSize,i={magFilter:Wn,minFilter:Wn,generateMipmaps:!1,type:ir,format:pr,colorSpace:Yo,depthBuffer:!1},r=F3(e,t,i);if(this._pingPongRenderTarget===null||this._pingPongRenderTarget.width!==e||this._pingPongRenderTarget.height!==t){this._pingPongRenderTarget!==null&&this._dispose(),this._pingPongRenderTarget=F3(e,t,i);const{_lodMax:s}=this;({lodMeshes:this._lodMeshes,sizeLods:this._sizeLods,sigmas:this._sigmas}=uq(s)),this._blurMaterial=fq(s,e,t),this._ggxMaterial=hq(s,e,t)}return r}_compileMaterial(e){const t=new Xi(new vn,e);this._renderer.compile(t,Gg)}_sceneToCubeUV(e,t,i,r,s){const f=new Hr(90,1,t,i),p=[1,-1,1,1,1,1],m=[1,1,1,-1,-1,-1],v=this._renderer,_=v.autoClear,x=v.toneMapping;v.getClearColor(z3),v.toneMapping=lo,v.autoClear=!1,v.state.buffers.depth.getReversed()&&(v.setRenderTarget(r),v.clearDepth(),v.setRenderTarget(null)),this._backgroundBox===null&&(this._backgroundBox=new Xi(new Rf,new Lc({name:"PMREM.Background",side:Vs,depthWrite:!1,depthTest:!1})));const A=this._backgroundBox,E=A.material;let M=!1;const C=e.background;C?C.isColor&&(E.color.copy(C),e.background=null,M=!0):(E.color.copy(z3),M=!0);for(let N=0;N<6;N++){const I=N%3;I===0?(f.up.set(0,p[N],0),f.position.set(s.x,s.y,s.z),f.lookAt(s.x+m[N],s.y,s.z)):I===1?(f.up.set(0,0,p[N]),f.position.set(s.x,s.y,s.z),f.lookAt(s.x,s.y+m[N],s.z)):(f.up.set(0,p[N],0),f.position.set(s.x,s.y,s.z),f.lookAt(s.x,s.y,s.z+m[N]));const U=this._cubeSize;hp(r,I*U,N>2?U:0,U,U),v.setRenderTarget(r),M&&v.render(A,f),v.render(e,f)}v.toneMapping=x,v.autoClear=_,e.background=C}_textureToCubeUV(e,t){const i=this._renderer,r=e.mapping===$o||e.mapping===Xu;r?(this._cubemapMaterial===null&&(this._cubemapMaterial=H3()),this._cubemapMaterial.uniforms.flipEnvMap.value=e.isRenderTargetTexture===!1?-1:1):this._equirectMaterial===null&&(this._equirectMaterial=V3());const s=r?this._cubemapMaterial:this._equirectMaterial,o=this._lodMeshes[0];o.material=s;const u=s.uniforms;u.envMap.value=e;const f=this._cubeSize;hp(t,0,0,3*f,2*f),i.setRenderTarget(t),i.render(o,Gg)}_applyPMREM(e){const t=this._renderer,i=t.autoClear;t.autoClear=!1;const r=this._lodMeshes.length;for(let s=1;s<r;s++)this._applyGGXFilter(e,s-1,s);t.autoClear=i}_applyGGXFilter(e,t,i){const r=this._renderer,s=this._pingPongRenderTarget,o=this._ggxMaterial,u=this._lodMeshes[i];u.material=o;const f=o.uniforms,p=i/(this._lodMeshes.length-1),m=t/(this._lodMeshes.length-1),v=Math.sqrt(p*p-m*m),_=0+p*1.25,x=v*_,{_lodMax:S}=this,A=this._sizeLods[i],E=3*A*(i>S-Hu?i-S+Hu:0),M=4*(this._cubeSize-A);f.envMap.value=e.texture,f.roughness.value=x,f.mipInt.value=S-t,hp(s,E,M,3*A,2*A),r.setRenderTarget(s),r.render(u,Gg),f.envMap.value=s.texture,f.roughness.value=0,f.mipInt.value=S-i,hp(e,E,M,3*A,2*A),r.setRenderTarget(e),r.render(u,Gg)}_blur(e,t,i,r,s){const o=this._pingPongRenderTarget;this._halfBlur(e,o,t,i,r,"latitudinal",s),this._halfBlur(o,e,i,i,r,"longitudinal",s)}_halfBlur(e,t,i,r,s,o,u){const f=this._renderer,p=this._blurMaterial;o!=="latitudinal"&&o!=="longitudinal"&&Xt("blur direction must be either latitudinal or longitudinal!");const m=3,v=this._lodMeshes[r];v.material=p;const _=p.uniforms,x=this._sizeLods[i]-1,S=isFinite(s)?Math.PI/(2*x):2*Math.PI/(2*cf-1),A=s/S,E=isFinite(s)?1+Math.floor(m*A):cf;E>cf&&At(`sigmaRadians, ${s}, is too large and will clip, as it requested ${E} samples when the maximum is set to ${cf}`);const M=[];let C=0;for(let F=0;F<cf;++F){const H=F/A,P=Math.exp(-H*H/2);M.push(P),F===0?C+=P:F<E&&(C+=2*P)}for(let F=0;F<M.length;F++)M[F]=M[F]/C;_.envMap.value=e.texture,_.samples.value=E,_.weights.value=M,_.latitudinal.value=o==="latitudinal",u&&(_.poleAxis.value=u);const{_lodMax:N}=this;_.dTheta.value=S,_.mipInt.value=N-i;const I=this._sizeLods[r],U=3*I*(r>N-Hu?r-N+Hu:0),L=4*(this._cubeSize-I);hp(t,U,L,3*I,2*I),f.setRenderTarget(t),f.render(v,Gg)}}function uq(n){const e=[],t=[],i=[];let r=n;const s=n-Hu+1+B3.length;for(let o=0;o<s;o++){const u=Math.pow(2,r);e.push(u);let f=1/u;o>n-Hu?f=B3[o-n+Hu-1]:o===0&&(f=0),t.push(f);const p=1/(u-2),m=-p,v=1+p,_=[m,m,v,m,v,v,m,m,v,v,m,v],x=6,S=6,A=3,E=2,M=1,C=new Float32Array(A*S*x),N=new Float32Array(E*S*x),I=new Float32Array(M*S*x);for(let L=0;L<x;L++){const F=L%3*2/3-1,H=L>2?0:-1,P=[F,H,0,F+2/3,H,0,F+2/3,H+1,0,F,H,0,F+2/3,H+1,0,F,H+1,0];C.set(P,A*S*L),N.set(_,E*S*L);const k=[L,L,L,L,L,L];I.set(k,M*S*L)}const U=new vn;U.setAttribute("position",new fi(C,A)),U.setAttribute("uv",new fi(N,E)),U.setAttribute("faceIndex",new fi(I,M)),i.push(new Xi(U,null)),r>Hu&&r--}return{lodMeshes:i,sizeLods:e,sigmas:t}}function F3(n,e,t){const i=new Hs(n,e,t);return i.texture.mapping=Jp,i.texture.name="PMREM.cubeUv",i.scissorTest=!0,i}function hp(n,e,t,i,r){n.viewport.set(e,t,i,r),n.scissor.set(e,t,i,r)}function hq(n,e,t){return new Ss({name:"PMREMGGXConvolution",defines:{GGX_SAMPLES:lq,CUBEUV_TEXEL_WIDTH:1/e,CUBEUV_TEXEL_HEIGHT:1/t,CUBEUV_MAX_MIP:`${n}.0`},uniforms:{envMap:{value:null},roughness:{value:0},mipInt:{value:0}},vertexShader:vS(),fragmentShader:`

			precision highp float;
			precision highp int;

			varying vec3 vOutputDirection;

			uniform sampler2D envMap;
			uniform float roughness;
			uniform float mipInt;

			#define ENVMAP_TYPE_CUBE_UV
			#include <cube_uv_reflection_fragment>

			#define PI 3.14159265359

			// Van der Corput radical inverse
			float radicalInverse_VdC(uint bits) {
				bits = (bits << 16u) | (bits >> 16u);
				bits = ((bits & 0x55555555u) << 1u) | ((bits & 0xAAAAAAAAu) >> 1u);
				bits = ((bits & 0x33333333u) << 2u) | ((bits & 0xCCCCCCCCu) >> 2u);
				bits = ((bits & 0x0F0F0F0Fu) << 4u) | ((bits & 0xF0F0F0F0u) >> 4u);
				bits = ((bits & 0x00FF00FFu) << 8u) | ((bits & 0xFF00FF00u) >> 8u);
				return float(bits) * 2.3283064365386963e-10; // / 0x100000000
			}

			// Hammersley sequence
			vec2 hammersley(uint i, uint N) {
				return vec2(float(i) / float(N), radicalInverse_VdC(i));
			}

			// GGX VNDF importance sampling (Eric Heitz 2018)
			// "Sampling the GGX Distribution of Visible Normals"
			// https://jcgt.org/published/0007/04/01/
			vec3 importanceSampleGGX_VNDF(vec2 Xi, vec3 V, float roughness) {
				float alpha = roughness * roughness;

				// Section 3.2: Transform view direction to hemisphere configuration
				vec3 Vh = normalize(vec3(alpha * V.x, alpha * V.y, V.z));

				// Section 4.1: Orthonormal basis
				float lensq = Vh.x * Vh.x + Vh.y * Vh.y;
				vec3 T1 = lensq > 0.0 ? vec3(-Vh.y, Vh.x, 0.0) / sqrt(lensq) : vec3(1.0, 0.0, 0.0);
				vec3 T2 = cross(Vh, T1);

				// Section 4.2: Parameterization of projected area
				float r = sqrt(Xi.x);
				float phi = 2.0 * PI * Xi.y;
				float t1 = r * cos(phi);
				float t2 = r * sin(phi);
				float s = 0.5 * (1.0 + Vh.z);
				t2 = (1.0 - s) * sqrt(1.0 - t1 * t1) + s * t2;

				// Section 4.3: Reprojection onto hemisphere
				vec3 Nh = t1 * T1 + t2 * T2 + sqrt(max(0.0, 1.0 - t1 * t1 - t2 * t2)) * Vh;

				// Section 3.4: Transform back to ellipsoid configuration
				return normalize(vec3(alpha * Nh.x, alpha * Nh.y, max(0.0, Nh.z)));
			}

			void main() {
				vec3 N = normalize(vOutputDirection);
				vec3 V = N; // Assume view direction equals normal for pre-filtering

				vec3 prefilteredColor = vec3(0.0);
				float totalWeight = 0.0;

				// For very low roughness, just sample the environment directly
				if (roughness < 0.001) {
					gl_FragColor = vec4(bilinearCubeUV(envMap, N, mipInt), 1.0);
					return;
				}

				// Tangent space basis for VNDF sampling
				vec3 up = abs(N.z) < 0.999 ? vec3(0.0, 0.0, 1.0) : vec3(1.0, 0.0, 0.0);
				vec3 tangent = normalize(cross(up, N));
				vec3 bitangent = cross(N, tangent);

				for(uint i = 0u; i < uint(GGX_SAMPLES); i++) {
					vec2 Xi = hammersley(i, uint(GGX_SAMPLES));

					// For PMREM, V = N, so in tangent space V is always (0, 0, 1)
					vec3 H_tangent = importanceSampleGGX_VNDF(Xi, vec3(0.0, 0.0, 1.0), roughness);

					// Transform H back to world space
					vec3 H = normalize(tangent * H_tangent.x + bitangent * H_tangent.y + N * H_tangent.z);
					vec3 L = normalize(2.0 * dot(V, H) * H - V);

					float NdotL = max(dot(N, L), 0.0);

					if(NdotL > 0.0) {
						// Sample environment at fixed mip level
						// VNDF importance sampling handles the distribution filtering
						vec3 sampleColor = bilinearCubeUV(envMap, L, mipInt);

						// Weight by NdotL for the split-sum approximation
						// VNDF PDF naturally accounts for the visible microfacet distribution
						prefilteredColor += sampleColor * NdotL;
						totalWeight += NdotL;
					}
				}

				if (totalWeight > 0.0) {
					prefilteredColor = prefilteredColor / totalWeight;
				}

				gl_FragColor = vec4(prefilteredColor, 1.0);
			}
		`,blending:Xo,depthTest:!1,depthWrite:!1})}function fq(n,e,t){const i=new Float32Array(cf),r=new J(0,1,0);return new Ss({name:"SphericalGaussianBlur",defines:{n:cf,CUBEUV_TEXEL_WIDTH:1/e,CUBEUV_TEXEL_HEIGHT:1/t,CUBEUV_MAX_MIP:`${n}.0`},uniforms:{envMap:{value:null},samples:{value:1},weights:{value:i},latitudinal:{value:!1},dTheta:{value:0},mipInt:{value:0},poleAxis:{value:r}},vertexShader:vS(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			varying vec3 vOutputDirection;

			uniform sampler2D envMap;
			uniform int samples;
			uniform float weights[ n ];
			uniform bool latitudinal;
			uniform float dTheta;
			uniform float mipInt;
			uniform vec3 poleAxis;

			#define ENVMAP_TYPE_CUBE_UV
			#include <cube_uv_reflection_fragment>

			vec3 getSample( float theta, vec3 axis ) {

				float cosTheta = cos( theta );
				// Rodrigues' axis-angle rotation
				vec3 sampleDirection = vOutputDirection * cosTheta
					+ cross( axis, vOutputDirection ) * sin( theta )
					+ axis * dot( axis, vOutputDirection ) * ( 1.0 - cosTheta );

				return bilinearCubeUV( envMap, sampleDirection, mipInt );

			}

			void main() {

				vec3 axis = latitudinal ? poleAxis : cross( poleAxis, vOutputDirection );

				if ( all( equal( axis, vec3( 0.0 ) ) ) ) {

					axis = vec3( vOutputDirection.z, 0.0, - vOutputDirection.x );

				}

				axis = normalize( axis );

				gl_FragColor = vec4( 0.0, 0.0, 0.0, 1.0 );
				gl_FragColor.rgb += weights[ 0 ] * getSample( 0.0, axis );

				for ( int i = 1; i < n; i++ ) {

					if ( i >= samples ) {

						break;

					}

					float theta = dTheta * float( i );
					gl_FragColor.rgb += weights[ i ] * getSample( -1.0 * theta, axis );
					gl_FragColor.rgb += weights[ i ] * getSample( theta, axis );

				}

			}
		`,blending:Xo,depthTest:!1,depthWrite:!1})}function V3(){return new Ss({name:"EquirectangularToCubeUV",uniforms:{envMap:{value:null}},vertexShader:vS(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			varying vec3 vOutputDirection;

			uniform sampler2D envMap;

			#include <common>

			void main() {

				vec3 outputDirection = normalize( vOutputDirection );
				vec2 uv = equirectUv( outputDirection );

				gl_FragColor = vec4( texture2D ( envMap, uv ).rgb, 1.0 );

			}
		`,blending:Xo,depthTest:!1,depthWrite:!1})}function H3(){return new Ss({name:"CubemapToCubeUV",uniforms:{envMap:{value:null},flipEnvMap:{value:-1}},vertexShader:vS(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			uniform float flipEnvMap;

			varying vec3 vOutputDirection;

			uniform samplerCube envMap;

			void main() {

				gl_FragColor = textureCube( envMap, vec3( flipEnvMap * vOutputDirection.x, vOutputDirection.yz ) );

			}
		`,blending:Xo,depthTest:!1,depthWrite:!1})}function vS(){return`

		precision mediump float;
		precision mediump int;

		attribute float faceIndex;

		varying vec3 vOutputDirection;

		// RH coordinate system; PMREM face-indexing convention
		vec3 getDirection( vec2 uv, float face ) {

			uv = 2.0 * uv - 1.0;

			vec3 direction = vec3( uv, 1.0 );

			if ( face == 0.0 ) {

				direction = direction.zyx; // ( 1, v, u ) pos x

			} else if ( face == 1.0 ) {

				direction = direction.xzy;
				direction.xz *= -1.0; // ( -u, 1, -v ) pos y

			} else if ( face == 2.0 ) {

				direction.x *= -1.0; // ( -u, v, 1 ) pos z

			} else if ( face == 3.0 ) {

				direction = direction.zyx;
				direction.xz *= -1.0; // ( -1, v, -u ) neg x

			} else if ( face == 4.0 ) {

				direction = direction.xzy;
				direction.xy *= -1.0; // ( -u, -1, v ) neg y

			} else if ( face == 5.0 ) {

				direction.z *= -1.0; // ( u, v, -1 ) neg z

			}

			return direction;

		}

		void main() {

			vOutputDirection = getDirection( uv, faceIndex );
			gl_Position = vec4( position, 1.0 );

		}
	`}function dq(n){let e=new WeakMap,t=null;function i(u){if(u&&u.isTexture){const f=u.mapping,p=f===Pp||f===N0,m=f===$o||f===Xu;if(p||m){let v=e.get(u);const _=v!==void 0?v.texture.pmremVersion:0;if(u.isRenderTargetTexture&&u.pmremVersion!==_)return t===null&&(t=new UM(n)),v=p?t.fromEquirectangular(u,v):t.fromCubemap(u,v),v.texture.pmremVersion=u.pmremVersion,e.set(u,v),v.texture;if(v!==void 0)return v.texture;{const x=u.image;return p&&x&&x.height>0||m&&x&&r(x)?(t===null&&(t=new UM(n)),v=p?t.fromEquirectangular(u):t.fromCubemap(u),v.texture.pmremVersion=u.pmremVersion,e.set(u,v),u.addEventListener("dispose",s),v.texture):null}}}return u}function r(u){let f=0;const p=6;for(let m=0;m<p;m++)u[m]!==void 0&&f++;return f===p}function s(u){const f=u.target;f.removeEventListener("dispose",s);const p=e.get(f);p!==void 0&&(e.delete(f),p.dispose())}function o(){e=new WeakMap,t!==null&&(t.dispose(),t=null)}return{get:i,dispose:o}}function pq(n){const e={};function t(i){if(e[i]!==void 0)return e[i];const r=n.getExtension(i);return e[i]=r,r}return{has:function(i){return t(i)!==null},init:function(){t("EXT_color_buffer_float"),t("WEBGL_clip_cull_distance"),t("OES_texture_float_linear"),t("EXT_color_buffer_half_float"),t("WEBGL_multisampled_render_to_texture"),t("WEBGL_render_shared_exponent")},get:function(i){const r=t(i);return r===null&&kp("WebGLRenderer: "+i+" extension not supported."),r}}}function mq(n,e,t,i){const r={},s=new WeakMap;function o(v){const _=v.target;_.index!==null&&e.remove(_.index);for(const S in _.attributes)e.remove(_.attributes[S]);_.removeEventListener("dispose",o),delete r[_.id];const x=s.get(_);x&&(e.remove(x),s.delete(_)),i.releaseStatesOfGeometry(_),_.isInstancedBufferGeometry===!0&&delete _._maxInstanceCount,t.memory.geometries--}function u(v,_){return r[_.id]===!0||(_.addEventListener("dispose",o),r[_.id]=!0,t.memory.geometries++),_}function f(v){const _=v.attributes;for(const x in _)e.update(_[x],n.ARRAY_BUFFER)}function p(v){const _=[],x=v.index,S=v.attributes.position;let A=0;if(x!==null){const C=x.array;A=x.version;for(let N=0,I=C.length;N<I;N+=3){const U=C[N+0],L=C[N+1],F=C[N+2];_.push(U,L,L,F,F,U)}}else if(S!==void 0){const C=S.array;A=S.version;for(let N=0,I=C.length/3-1;N<I;N+=3){const U=N+0,L=N+1,F=N+2;_.push(U,L,L,F,F,U)}}else return;const E=new(jP(_)?KE:ZE)(_,1);E.version=A;const M=s.get(v);M&&e.remove(M),s.set(v,E)}function m(v){const _=s.get(v);if(_){const x=v.index;x!==null&&_.version<x.version&&p(v)}else p(v);return s.get(v)}return{get:u,update:f,getWireframeAttribute:m}}function gq(n,e,t){let i;function r(_){i=_}let s,o;function u(_){s=_.type,o=_.bytesPerElement}function f(_,x){n.drawElements(i,x,s,_*o),t.update(x,i,1)}function p(_,x,S){S!==0&&(n.drawElementsInstanced(i,x,s,_*o,S),t.update(x,i,S))}function m(_,x,S){if(S===0)return;e.get("WEBGL_multi_draw").multiDrawElementsWEBGL(i,x,0,s,_,0,S);let E=0;for(let M=0;M<S;M++)E+=x[M];t.update(E,i,1)}function v(_,x,S,A){if(S===0)return;const E=e.get("WEBGL_multi_draw");if(E===null)for(let M=0;M<_.length;M++)p(_[M]/o,x[M],A[M]);else{E.multiDrawElementsInstancedWEBGL(i,x,0,s,_,0,A,0,S);let M=0;for(let C=0;C<S;C++)M+=x[C]*A[C];t.update(M,i,1)}}this.setMode=r,this.setIndex=u,this.render=f,this.renderInstances=p,this.renderMultiDraw=m,this.renderMultiDrawInstances=v}function vq(n){const e={geometries:0,textures:0},t={frame:0,calls:0,triangles:0,points:0,lines:0};function i(s,o,u){switch(t.calls++,o){case n.TRIANGLES:t.triangles+=u*(s/3);break;case n.LINES:t.lines+=u*(s/2);break;case n.LINE_STRIP:t.lines+=u*(s-1);break;case n.LINE_LOOP:t.lines+=u*s;break;case n.POINTS:t.points+=u*s;break;default:Xt("WebGLInfo: Unknown draw mode:",o);break}}function r(){t.calls=0,t.triangles=0,t.points=0,t.lines=0}return{memory:e,render:t,programs:null,autoReset:!0,reset:r,update:i}}function yq(n,e,t){const i=new WeakMap,r=new mi;function s(o,u,f){const p=o.morphTargetInfluences,m=u.morphAttributes.position||u.morphAttributes.normal||u.morphAttributes.color,v=m!==void 0?m.length:0;let _=i.get(u);if(_===void 0||_.count!==v){let k=function(){H.dispose(),i.delete(u),u.removeEventListener("dispose",k)};var x=k;_!==void 0&&_.texture.dispose();const S=u.morphAttributes.position!==void 0,A=u.morphAttributes.normal!==void 0,E=u.morphAttributes.color!==void 0,M=u.morphAttributes.position||[],C=u.morphAttributes.normal||[],N=u.morphAttributes.color||[];let I=0;S===!0&&(I=1),A===!0&&(I=2),E===!0&&(I=3);let U=u.attributes.position.count*I,L=1;U>e.maxTextureSize&&(L=Math.ceil(U/e.maxTextureSize),U=e.maxTextureSize);const F=new Float32Array(U*L*4*v),H=new Xb(F,U,L,v);H.type=ki,H.needsUpdate=!0;const P=I*4;for(let Y=0;Y<v;Y++){const ie=M[Y],te=C[Y],le=N[Y],de=U*L*4*Y;for(let Z=0;Z<ie.count;Z++){const Q=Z*P;S===!0&&(r.fromBufferAttribute(ie,Z),F[de+Q+0]=r.x,F[de+Q+1]=r.y,F[de+Q+2]=r.z,F[de+Q+3]=0),A===!0&&(r.fromBufferAttribute(te,Z),F[de+Q+4]=r.x,F[de+Q+5]=r.y,F[de+Q+6]=r.z,F[de+Q+7]=0),E===!0&&(r.fromBufferAttribute(le,Z),F[de+Q+8]=r.x,F[de+Q+9]=r.y,F[de+Q+10]=r.z,F[de+Q+11]=le.itemSize===4?r.w:1)}}_={count:v,texture:H,size:new Ye(U,L)},i.set(u,_),u.addEventListener("dispose",k)}if(o.isInstancedMesh===!0&&o.morphTexture!==null)f.getUniforms().setValue(n,"morphTexture",o.morphTexture,t);else{let S=0;for(let E=0;E<p.length;E++)S+=p[E];const A=u.morphTargetsRelative?1:1-S;f.getUniforms().setValue(n,"morphTargetBaseInfluence",A),f.getUniforms().setValue(n,"morphTargetInfluences",p)}f.getUniforms().setValue(n,"morphTargetsTexture",_.texture,t),f.getUniforms().setValue(n,"morphTargetsTextureSize",_.size)}return{update:s}}function _q(n,e,t,i){let r=new WeakMap;function s(f){const p=i.render.frame,m=f.geometry,v=e.get(f,m);if(r.get(v)!==p&&(e.update(v),r.set(v,p)),f.isInstancedMesh&&(f.hasEventListener("dispose",u)===!1&&f.addEventListener("dispose",u),r.get(f)!==p&&(t.update(f.instanceMatrix,n.ARRAY_BUFFER),f.instanceColor!==null&&t.update(f.instanceColor,n.ARRAY_BUFFER),r.set(f,p))),f.isSkinnedMesh){const _=f.skeleton;r.get(_)!==p&&(_.update(),r.set(_,p))}return v}function o(){r=new WeakMap}function u(f){const p=f.target;p.removeEventListener("dispose",u),t.remove(p.instanceMatrix),p.instanceColor!==null&&t.remove(p.instanceColor)}return{update:s,dispose:o}}const xq={[UE]:"LINEAR_TONE_MAPPING",[kE]:"REINHARD_TONE_MAPPING",[BE]:"CINEON_TONE_MAPPING",[kb]:"ACES_FILMIC_TONE_MAPPING",[FE]:"AGX_TONE_MAPPING",[VE]:"NEUTRAL_TONE_MAPPING",[zE]:"CUSTOM_TONE_MAPPING"};function bq(n,e,t,i,r){const s=new Hs(e,t,{type:n,depthBuffer:i,stencilBuffer:r}),o=new Hs(e,t,{type:ir,depthBuffer:!1,stencilBuffer:!1}),u=new vn;u.setAttribute("position",new kt([-1,3,0,-1,-1,0,3,-1,0],3)),u.setAttribute("uv",new kt([0,2,0,0,2,0],2));const f=new lT({uniforms:{tDiffuse:{value:null}},vertexShader:`
			precision highp float;

			uniform mat4 modelViewMatrix;
			uniform mat4 projectionMatrix;

			attribute vec3 position;
			attribute vec2 uv;

			varying vec2 vUv;

			void main() {
				vUv = uv;
				gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );
			}`,fragmentShader:`
			precision highp float;

			uniform sampler2D tDiffuse;

			varying vec2 vUv;

			#include <tonemapping_pars_fragment>
			#include <colorspace_pars_fragment>

			void main() {
				gl_FragColor = texture2D( tDiffuse, vUv );

				#ifdef LINEAR_TONE_MAPPING
					gl_FragColor.rgb = LinearToneMapping( gl_FragColor.rgb );
				#elif defined( REINHARD_TONE_MAPPING )
					gl_FragColor.rgb = ReinhardToneMapping( gl_FragColor.rgb );
				#elif defined( CINEON_TONE_MAPPING )
					gl_FragColor.rgb = CineonToneMapping( gl_FragColor.rgb );
				#elif defined( ACES_FILMIC_TONE_MAPPING )
					gl_FragColor.rgb = ACESFilmicToneMapping( gl_FragColor.rgb );
				#elif defined( AGX_TONE_MAPPING )
					gl_FragColor.rgb = AgXToneMapping( gl_FragColor.rgb );
				#elif defined( NEUTRAL_TONE_MAPPING )
					gl_FragColor.rgb = NeutralToneMapping( gl_FragColor.rgb );
				#elif defined( CUSTOM_TONE_MAPPING )
					gl_FragColor.rgb = CustomToneMapping( gl_FragColor.rgb );
				#endif

				#ifdef SRGB_TRANSFER
					gl_FragColor = sRGBTransferOETF( gl_FragColor );
				#endif
			}`,depthTest:!1,depthWrite:!1}),p=new Xi(u,f),m=new If(-1,1,1,-1,0,1);let v=null,_=null,x=!1,S,A=null,E=[],M=!1;this.setSize=function(C,N){s.setSize(C,N),o.setSize(C,N);for(let I=0;I<E.length;I++){const U=E[I];U.setSize&&U.setSize(C,N)}},this.setEffects=function(C){E=C,M=E.length>0&&E[0].isRenderPass===!0;const N=s.width,I=s.height;for(let U=0;U<E.length;U++){const L=E[U];L.setSize&&L.setSize(N,I)}},this.begin=function(C,N){if(x||C.toneMapping===lo&&E.length===0)return!1;if(A=N,N!==null){const I=N.width,U=N.height;(s.width!==I||s.height!==U)&&this.setSize(I,U)}return M===!1&&C.setRenderTarget(s),S=C.toneMapping,C.toneMapping=lo,!0},this.hasRenderPass=function(){return M},this.end=function(C,N){C.toneMapping=S,x=!0;let I=s,U=o;for(let L=0;L<E.length;L++){const F=E[L];if(F.enabled!==!1&&(F.render(C,U,I,N),F.needsSwap!==!1)){const H=I;I=U,U=H}}if(v!==C.outputColorSpace||_!==C.toneMapping){v=C.outputColorSpace,_=C.toneMapping,f.defines={},Hn.getTransfer(v)===ri&&(f.defines.SRGB_TRANSFER="");const L=xq[_];L&&(f.defines[L]=""),f.needsUpdate=!0}f.uniforms.tDiffuse.value=I.texture,C.setRenderTarget(A),C.render(p,m),A=null,x=!1},this.isCompositing=function(){return x},this.dispose=function(){s.dispose(),o.dispose(),u.dispose(),f.dispose()}}const $O=new hi,kM=new Hp(1,1),YO=new Xb,ZO=new $b,KO=new lv,G3=[],j3=[],W3=new Float32Array(16),q3=new Float32Array(9),X3=new Float32Array(4);function tm(n,e,t){const i=n[0];if(i<=0||i>0)return n;const r=e*t;let s=G3[r];if(s===void 0&&(s=new Float32Array(r),G3[r]=s),e!==0){i.toArray(s,0);for(let o=1,u=0;o!==e;++o)u+=t,n[o].toArray(s,u)}return s}function Pr(n,e){if(n.length!==e.length)return!1;for(let t=0,i=n.length;t<i;t++)if(n[t]!==e[t])return!1;return!0}function Or(n,e){for(let t=0,i=e.length;t<i;t++)n[t]=e[t]}function yS(n,e){let t=j3[e];t===void 0&&(t=new Int32Array(e),j3[e]=t);for(let i=0;i!==e;++i)t[i]=n.allocateTextureUnit();return t}function Sq(n,e){const t=this.cache;t[0]!==e&&(n.uniform1f(this.addr,e),t[0]=e)}function wq(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y)&&(n.uniform2f(this.addr,e.x,e.y),t[0]=e.x,t[1]=e.y);else{if(Pr(t,e))return;n.uniform2fv(this.addr,e),Or(t,e)}}function Mq(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z)&&(n.uniform3f(this.addr,e.x,e.y,e.z),t[0]=e.x,t[1]=e.y,t[2]=e.z);else if(e.r!==void 0)(t[0]!==e.r||t[1]!==e.g||t[2]!==e.b)&&(n.uniform3f(this.addr,e.r,e.g,e.b),t[0]=e.r,t[1]=e.g,t[2]=e.b);else{if(Pr(t,e))return;n.uniform3fv(this.addr,e),Or(t,e)}}function Eq(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z||t[3]!==e.w)&&(n.uniform4f(this.addr,e.x,e.y,e.z,e.w),t[0]=e.x,t[1]=e.y,t[2]=e.z,t[3]=e.w);else{if(Pr(t,e))return;n.uniform4fv(this.addr,e),Or(t,e)}}function Tq(n,e){const t=this.cache,i=e.elements;if(i===void 0){if(Pr(t,e))return;n.uniformMatrix2fv(this.addr,!1,e),Or(t,e)}else{if(Pr(t,i))return;X3.set(i),n.uniformMatrix2fv(this.addr,!1,X3),Or(t,i)}}function Aq(n,e){const t=this.cache,i=e.elements;if(i===void 0){if(Pr(t,e))return;n.uniformMatrix3fv(this.addr,!1,e),Or(t,e)}else{if(Pr(t,i))return;q3.set(i),n.uniformMatrix3fv(this.addr,!1,q3),Or(t,i)}}function Cq(n,e){const t=this.cache,i=e.elements;if(i===void 0){if(Pr(t,e))return;n.uniformMatrix4fv(this.addr,!1,e),Or(t,e)}else{if(Pr(t,i))return;W3.set(i),n.uniformMatrix4fv(this.addr,!1,W3),Or(t,i)}}function Rq(n,e){const t=this.cache;t[0]!==e&&(n.uniform1i(this.addr,e),t[0]=e)}function Nq(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y)&&(n.uniform2i(this.addr,e.x,e.y),t[0]=e.x,t[1]=e.y);else{if(Pr(t,e))return;n.uniform2iv(this.addr,e),Or(t,e)}}function Dq(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z)&&(n.uniform3i(this.addr,e.x,e.y,e.z),t[0]=e.x,t[1]=e.y,t[2]=e.z);else{if(Pr(t,e))return;n.uniform3iv(this.addr,e),Or(t,e)}}function Iq(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z||t[3]!==e.w)&&(n.uniform4i(this.addr,e.x,e.y,e.z,e.w),t[0]=e.x,t[1]=e.y,t[2]=e.z,t[3]=e.w);else{if(Pr(t,e))return;n.uniform4iv(this.addr,e),Or(t,e)}}function Pq(n,e){const t=this.cache;t[0]!==e&&(n.uniform1ui(this.addr,e),t[0]=e)}function Oq(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y)&&(n.uniform2ui(this.addr,e.x,e.y),t[0]=e.x,t[1]=e.y);else{if(Pr(t,e))return;n.uniform2uiv(this.addr,e),Or(t,e)}}function Lq(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z)&&(n.uniform3ui(this.addr,e.x,e.y,e.z),t[0]=e.x,t[1]=e.y,t[2]=e.z);else{if(Pr(t,e))return;n.uniform3uiv(this.addr,e),Or(t,e)}}function Uq(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z||t[3]!==e.w)&&(n.uniform4ui(this.addr,e.x,e.y,e.z,e.w),t[0]=e.x,t[1]=e.y,t[2]=e.z,t[3]=e.w);else{if(Pr(t,e))return;n.uniform4uiv(this.addr,e),Or(t,e)}}function kq(n,e,t){const i=this.cache,r=t.allocateTextureUnit();i[0]!==r&&(n.uniform1i(this.addr,r),i[0]=r);let s;this.type===n.SAMPLER_2D_SHADOW?(kM.compareFunction=t.isReversedDepthBuffer()?qb:Wb,s=kM):s=$O,t.setTexture2D(e||s,r)}function Bq(n,e,t){const i=this.cache,r=t.allocateTextureUnit();i[0]!==r&&(n.uniform1i(this.addr,r),i[0]=r),t.setTexture3D(e||ZO,r)}function zq(n,e,t){const i=this.cache,r=t.allocateTextureUnit();i[0]!==r&&(n.uniform1i(this.addr,r),i[0]=r),t.setTextureCube(e||KO,r)}function Fq(n,e,t){const i=this.cache,r=t.allocateTextureUnit();i[0]!==r&&(n.uniform1i(this.addr,r),i[0]=r),t.setTexture2DArray(e||YO,r)}function Vq(n){switch(n){case 5126:return Sq;case 35664:return wq;case 35665:return Mq;case 35666:return Eq;case 35674:return Tq;case 35675:return Aq;case 35676:return Cq;case 5124:case 35670:return Rq;case 35667:case 35671:return Nq;case 35668:case 35672:return Dq;case 35669:case 35673:return Iq;case 5125:return Pq;case 36294:return Oq;case 36295:return Lq;case 36296:return Uq;case 35678:case 36198:case 36298:case 36306:case 35682:return kq;case 35679:case 36299:case 36307:return Bq;case 35680:case 36300:case 36308:case 36293:return zq;case 36289:case 36303:case 36311:case 36292:return Fq}}function Hq(n,e){n.uniform1fv(this.addr,e)}function Gq(n,e){const t=tm(e,this.size,2);n.uniform2fv(this.addr,t)}function jq(n,e){const t=tm(e,this.size,3);n.uniform3fv(this.addr,t)}function Wq(n,e){const t=tm(e,this.size,4);n.uniform4fv(this.addr,t)}function qq(n,e){const t=tm(e,this.size,4);n.uniformMatrix2fv(this.addr,!1,t)}function Xq(n,e){const t=tm(e,this.size,9);n.uniformMatrix3fv(this.addr,!1,t)}function $q(n,e){const t=tm(e,this.size,16);n.uniformMatrix4fv(this.addr,!1,t)}function Yq(n,e){n.uniform1iv(this.addr,e)}function Zq(n,e){n.uniform2iv(this.addr,e)}function Kq(n,e){n.uniform3iv(this.addr,e)}function Jq(n,e){n.uniform4iv(this.addr,e)}function Qq(n,e){n.uniform1uiv(this.addr,e)}function eX(n,e){n.uniform2uiv(this.addr,e)}function tX(n,e){n.uniform3uiv(this.addr,e)}function nX(n,e){n.uniform4uiv(this.addr,e)}function iX(n,e,t){const i=this.cache,r=e.length,s=yS(t,r);Pr(i,s)||(n.uniform1iv(this.addr,s),Or(i,s));let o;this.type===n.SAMPLER_2D_SHADOW?o=kM:o=$O;for(let u=0;u!==r;++u)t.setTexture2D(e[u]||o,s[u])}function rX(n,e,t){const i=this.cache,r=e.length,s=yS(t,r);Pr(i,s)||(n.uniform1iv(this.addr,s),Or(i,s));for(let o=0;o!==r;++o)t.setTexture3D(e[o]||ZO,s[o])}function sX(n,e,t){const i=this.cache,r=e.length,s=yS(t,r);Pr(i,s)||(n.uniform1iv(this.addr,s),Or(i,s));for(let o=0;o!==r;++o)t.setTextureCube(e[o]||KO,s[o])}function aX(n,e,t){const i=this.cache,r=e.length,s=yS(t,r);Pr(i,s)||(n.uniform1iv(this.addr,s),Or(i,s));for(let o=0;o!==r;++o)t.setTexture2DArray(e[o]||YO,s[o])}function oX(n){switch(n){case 5126:return Hq;case 35664:return Gq;case 35665:return jq;case 35666:return Wq;case 35674:return qq;case 35675:return Xq;case 35676:return $q;case 5124:case 35670:return Yq;case 35667:case 35671:return Zq;case 35668:case 35672:return Kq;case 35669:case 35673:return Jq;case 5125:return Qq;case 36294:return eX;case 36295:return tX;case 36296:return nX;case 35678:case 36198:case 36298:case 36306:case 35682:return iX;case 35679:case 36299:case 36307:return rX;case 35680:case 36300:case 36308:case 36293:return sX;case 36289:case 36303:case 36311:case 36292:return aX}}class lX{constructor(e,t,i){this.id=e,this.addr=i,this.cache=[],this.type=t.type,this.setValue=Vq(t.type)}}class cX{constructor(e,t,i){this.id=e,this.addr=i,this.cache=[],this.type=t.type,this.size=t.size,this.setValue=oX(t.type)}}class uX{constructor(e){this.id=e,this.seq=[],this.map={}}setValue(e,t,i){const r=this.seq;for(let s=0,o=r.length;s!==o;++s){const u=r[s];u.setValue(e,t[u.id],i)}}}const Mw=/(\w+)(\])?(\[|\.)?/g;function $3(n,e){n.seq.push(e),n.map[e.id]=e}function hX(n,e,t){const i=n.name,r=i.length;for(Mw.lastIndex=0;;){const s=Mw.exec(i),o=Mw.lastIndex;let u=s[1];const f=s[2]==="]",p=s[3];if(f&&(u=u|0),p===void 0||p==="["&&o+2===r){$3(t,p===void 0?new lX(u,n,e):new cX(u,n,e));break}else{let v=t.map[u];v===void 0&&(v=new uX(u),$3(t,v)),t=v}}}class px{constructor(e,t){this.seq=[],this.map={};const i=e.getProgramParameter(t,e.ACTIVE_UNIFORMS);for(let o=0;o<i;++o){const u=e.getActiveUniform(t,o),f=e.getUniformLocation(t,u.name);hX(u,f,this)}const r=[],s=[];for(const o of this.seq)o.type===e.SAMPLER_2D_SHADOW||o.type===e.SAMPLER_CUBE_SHADOW||o.type===e.SAMPLER_2D_ARRAY_SHADOW?r.push(o):s.push(o);r.length>0&&(this.seq=r.concat(s))}setValue(e,t,i,r){const s=this.map[t];s!==void 0&&s.setValue(e,i,r)}setOptional(e,t,i){const r=t[i];r!==void 0&&this.setValue(e,i,r)}static upload(e,t,i,r){for(let s=0,o=t.length;s!==o;++s){const u=t[s],f=i[u.id];f.needsUpdate!==!1&&u.setValue(e,f.value,r)}}static seqWithValue(e,t){const i=[];for(let r=0,s=e.length;r!==s;++r){const o=e[r];o.id in t&&i.push(o)}return i}}function Y3(n,e,t){const i=n.createShader(e);return n.shaderSource(i,t),n.compileShader(i),i}const fX=37297;let dX=0;function pX(n,e){const t=n.split(`
`),i=[],r=Math.max(e-6,0),s=Math.min(e+6,t.length);for(let o=r;o<s;o++){const u=o+1;i.push(`${u===e?">":" "} ${u}: ${t[o]}`)}return i.join(`
`)}const Z3=new xn;function mX(n){Hn._getMatrix(Z3,Hn.workingColorSpace,n);const e=`mat3( ${Z3.elements.map(t=>t.toFixed(4))} )`;switch(Hn.getTransfer(n)){case L0:return[e,"LinearTransferOETF"];case ri:return[e,"sRGBTransferOETF"];default:return At("WebGLProgram: Unsupported color space: ",n),[e,"LinearTransferOETF"]}}function K3(n,e,t){const i=n.getShaderParameter(e,n.COMPILE_STATUS),s=(n.getShaderInfoLog(e)||"").trim();if(i&&s==="")return"";const o=/ERROR: 0:(\d+)/.exec(s);if(o){const u=parseInt(o[1]);return t.toUpperCase()+`

`+s+`

`+pX(n.getShaderSource(e),u)}else return s}function gX(n,e){const t=mX(e);return[`vec4 ${n}( vec4 value ) {`,`	return ${t[1]}( vec4( value.rgb * ${t[0]}, value.a ) );`,"}"].join(`
`)}const vX={[UE]:"Linear",[kE]:"Reinhard",[BE]:"Cineon",[kb]:"ACESFilmic",[FE]:"AgX",[VE]:"Neutral",[zE]:"Custom"};function yX(n,e){const t=vX[e];return t===void 0?(At("WebGLProgram: Unsupported toneMapping:",e),"vec3 "+n+"( vec3 color ) { return LinearToneMapping( color ); }"):"vec3 "+n+"( vec3 color ) { return "+t+"ToneMapping( color ); }"}const tx=new J;function _X(){Hn.getLuminanceCoefficients(tx);const n=tx.x.toFixed(4),e=tx.y.toFixed(4),t=tx.z.toFixed(4);return["float luminance( const in vec3 rgb ) {",`	const vec3 weights = vec3( ${n}, ${e}, ${t} );`,"	return dot( weights, rgb );","}"].join(`
`)}function xX(n){return[n.extensionClipCullDistance?"#extension GL_ANGLE_clip_cull_distance : require":"",n.extensionMultiDraw?"#extension GL_ANGLE_multi_draw : require":""].filter(Qg).join(`
`)}function bX(n){const e=[];for(const t in n){const i=n[t];i!==!1&&e.push("#define "+t+" "+i)}return e.join(`
`)}function SX(n,e){const t={},i=n.getProgramParameter(e,n.ACTIVE_ATTRIBUTES);for(let r=0;r<i;r++){const s=n.getActiveAttrib(e,r),o=s.name;let u=1;s.type===n.FLOAT_MAT2&&(u=2),s.type===n.FLOAT_MAT3&&(u=3),s.type===n.FLOAT_MAT4&&(u=4),t[o]={type:s.type,location:n.getAttribLocation(e,o),locationSize:u}}return t}function Qg(n){return n!==""}function J3(n,e){const t=e.numSpotLightShadows+e.numSpotLightMaps-e.numSpotLightShadowsWithMaps;return n.replace(/NUM_DIR_LIGHTS/g,e.numDirLights).replace(/NUM_SPOT_LIGHTS/g,e.numSpotLights).replace(/NUM_SPOT_LIGHT_MAPS/g,e.numSpotLightMaps).replace(/NUM_SPOT_LIGHT_COORDS/g,t).replace(/NUM_RECT_AREA_LIGHTS/g,e.numRectAreaLights).replace(/NUM_POINT_LIGHTS/g,e.numPointLights).replace(/NUM_HEMI_LIGHTS/g,e.numHemiLights).replace(/NUM_DIR_LIGHT_SHADOWS/g,e.numDirLightShadows).replace(/NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS/g,e.numSpotLightShadowsWithMaps).replace(/NUM_SPOT_LIGHT_SHADOWS/g,e.numSpotLightShadows).replace(/NUM_POINT_LIGHT_SHADOWS/g,e.numPointLightShadows)}function Q3(n,e){return n.replace(/NUM_CLIPPING_PLANES/g,e.numClippingPlanes).replace(/UNION_CLIPPING_PLANES/g,e.numClippingPlanes-e.numClipIntersection)}const wX=/^[ \t]*#include +<([\w\d./]+)>/gm;function BM(n){return n.replace(wX,EX)}const MX=new Map;function EX(n,e){let t=Cn[e];if(t===void 0){const i=MX.get(e);if(i!==void 0)t=Cn[i],At('WebGLRenderer: Shader chunk "%s" has been deprecated. Use "%s" instead.',e,i);else throw new Error("Can not resolve #include <"+e+">")}return BM(t)}const TX=/#pragma unroll_loop_start\s+for\s*\(\s*int\s+i\s*=\s*(\d+)\s*;\s*i\s*<\s*(\d+)\s*;\s*i\s*\+\+\s*\)\s*{([\s\S]+?)}\s+#pragma unroll_loop_end/g;function eN(n){return n.replace(TX,AX)}function AX(n,e,t,i){let r="";for(let s=parseInt(e);s<parseInt(t);s++)r+=i.replace(/\[\s*i\s*\]/g,"[ "+s+" ]").replace(/UNROLLED_LOOP_INDEX/g,s);return r}function tN(n){let e=`precision ${n.precision} float;
	precision ${n.precision} int;
	precision ${n.precision} sampler2D;
	precision ${n.precision} samplerCube;
	precision ${n.precision} sampler3D;
	precision ${n.precision} sampler2DArray;
	precision ${n.precision} sampler2DShadow;
	precision ${n.precision} samplerCubeShadow;
	precision ${n.precision} sampler2DArrayShadow;
	precision ${n.precision} isampler2D;
	precision ${n.precision} isampler3D;
	precision ${n.precision} isamplerCube;
	precision ${n.precision} isampler2DArray;
	precision ${n.precision} usampler2D;
	precision ${n.precision} usampler3D;
	precision ${n.precision} usamplerCube;
	precision ${n.precision} usampler2DArray;
	`;return n.precision==="highp"?e+=`
#define HIGH_PRECISION`:n.precision==="mediump"?e+=`
#define MEDIUM_PRECISION`:n.precision==="lowp"&&(e+=`
#define LOW_PRECISION`),e}const CX={[Rp]:"SHADOWMAP_TYPE_PCF",[df]:"SHADOWMAP_TYPE_VSM"};function RX(n){return CX[n.shadowMapType]||"SHADOWMAP_TYPE_BASIC"}const NX={[$o]:"ENVMAP_TYPE_CUBE",[Xu]:"ENVMAP_TYPE_CUBE",[Jp]:"ENVMAP_TYPE_CUBE_UV"};function DX(n){return n.envMap===!1?"ENVMAP_TYPE_CUBE":NX[n.envMapMode]||"ENVMAP_TYPE_CUBE"}const IX={[Xu]:"ENVMAP_MODE_REFRACTION"};function PX(n){return n.envMap===!1?"ENVMAP_MODE_REFLECTION":IX[n.envMapMode]||"ENVMAP_MODE_REFLECTION"}const OX={[rv]:"ENVMAP_BLENDING_MULTIPLY",[NP]:"ENVMAP_BLENDING_MIX",[DP]:"ENVMAP_BLENDING_ADD"};function LX(n){return n.envMap===!1?"ENVMAP_BLENDING_NONE":OX[n.combine]||"ENVMAP_BLENDING_NONE"}function UX(n){const e=n.envMapCubeUVHeight;if(e===null)return null;const t=Math.log2(e)-2,i=1/e;return{texelWidth:1/(3*Math.max(Math.pow(2,t),112)),texelHeight:i,maxMip:t}}function kX(n,e,t,i){const r=n.getContext(),s=t.defines;let o=t.vertexShader,u=t.fragmentShader;const f=RX(t),p=DX(t),m=PX(t),v=LX(t),_=UX(t),x=xX(t),S=bX(s),A=r.createProgram();let E,M,C=t.glslVersion?"#version "+t.glslVersion+`
`:"";t.isRawShaderMaterial?(E=["#define SHADER_TYPE "+t.shaderType,"#define SHADER_NAME "+t.shaderName,S].filter(Qg).join(`
`),E.length>0&&(E+=`
`),M=["#define SHADER_TYPE "+t.shaderType,"#define SHADER_NAME "+t.shaderName,S].filter(Qg).join(`
`),M.length>0&&(M+=`
`)):(E=[tN(t),"#define SHADER_TYPE "+t.shaderType,"#define SHADER_NAME "+t.shaderName,S,t.extensionClipCullDistance?"#define USE_CLIP_DISTANCE":"",t.batching?"#define USE_BATCHING":"",t.batchingColor?"#define USE_BATCHING_COLOR":"",t.instancing?"#define USE_INSTANCING":"",t.instancingColor?"#define USE_INSTANCING_COLOR":"",t.instancingMorph?"#define USE_INSTANCING_MORPH":"",t.useFog&&t.fog?"#define USE_FOG":"",t.useFog&&t.fogExp2?"#define FOG_EXP2":"",t.map?"#define USE_MAP":"",t.envMap?"#define USE_ENVMAP":"",t.envMap?"#define "+m:"",t.lightMap?"#define USE_LIGHTMAP":"",t.aoMap?"#define USE_AOMAP":"",t.bumpMap?"#define USE_BUMPMAP":"",t.normalMap?"#define USE_NORMALMAP":"",t.normalMapObjectSpace?"#define USE_NORMALMAP_OBJECTSPACE":"",t.normalMapTangentSpace?"#define USE_NORMALMAP_TANGENTSPACE":"",t.displacementMap?"#define USE_DISPLACEMENTMAP":"",t.emissiveMap?"#define USE_EMISSIVEMAP":"",t.anisotropy?"#define USE_ANISOTROPY":"",t.anisotropyMap?"#define USE_ANISOTROPYMAP":"",t.clearcoatMap?"#define USE_CLEARCOATMAP":"",t.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",t.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",t.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",t.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",t.specularMap?"#define USE_SPECULARMAP":"",t.specularColorMap?"#define USE_SPECULAR_COLORMAP":"",t.specularIntensityMap?"#define USE_SPECULAR_INTENSITYMAP":"",t.roughnessMap?"#define USE_ROUGHNESSMAP":"",t.metalnessMap?"#define USE_METALNESSMAP":"",t.alphaMap?"#define USE_ALPHAMAP":"",t.alphaHash?"#define USE_ALPHAHASH":"",t.transmission?"#define USE_TRANSMISSION":"",t.transmissionMap?"#define USE_TRANSMISSIONMAP":"",t.thicknessMap?"#define USE_THICKNESSMAP":"",t.sheenColorMap?"#define USE_SHEEN_COLORMAP":"",t.sheenRoughnessMap?"#define USE_SHEEN_ROUGHNESSMAP":"",t.mapUv?"#define MAP_UV "+t.mapUv:"",t.alphaMapUv?"#define ALPHAMAP_UV "+t.alphaMapUv:"",t.lightMapUv?"#define LIGHTMAP_UV "+t.lightMapUv:"",t.aoMapUv?"#define AOMAP_UV "+t.aoMapUv:"",t.emissiveMapUv?"#define EMISSIVEMAP_UV "+t.emissiveMapUv:"",t.bumpMapUv?"#define BUMPMAP_UV "+t.bumpMapUv:"",t.normalMapUv?"#define NORMALMAP_UV "+t.normalMapUv:"",t.displacementMapUv?"#define DISPLACEMENTMAP_UV "+t.displacementMapUv:"",t.metalnessMapUv?"#define METALNESSMAP_UV "+t.metalnessMapUv:"",t.roughnessMapUv?"#define ROUGHNESSMAP_UV "+t.roughnessMapUv:"",t.anisotropyMapUv?"#define ANISOTROPYMAP_UV "+t.anisotropyMapUv:"",t.clearcoatMapUv?"#define CLEARCOATMAP_UV "+t.clearcoatMapUv:"",t.clearcoatNormalMapUv?"#define CLEARCOAT_NORMALMAP_UV "+t.clearcoatNormalMapUv:"",t.clearcoatRoughnessMapUv?"#define CLEARCOAT_ROUGHNESSMAP_UV "+t.clearcoatRoughnessMapUv:"",t.iridescenceMapUv?"#define IRIDESCENCEMAP_UV "+t.iridescenceMapUv:"",t.iridescenceThicknessMapUv?"#define IRIDESCENCE_THICKNESSMAP_UV "+t.iridescenceThicknessMapUv:"",t.sheenColorMapUv?"#define SHEEN_COLORMAP_UV "+t.sheenColorMapUv:"",t.sheenRoughnessMapUv?"#define SHEEN_ROUGHNESSMAP_UV "+t.sheenRoughnessMapUv:"",t.specularMapUv?"#define SPECULARMAP_UV "+t.specularMapUv:"",t.specularColorMapUv?"#define SPECULAR_COLORMAP_UV "+t.specularColorMapUv:"",t.specularIntensityMapUv?"#define SPECULAR_INTENSITYMAP_UV "+t.specularIntensityMapUv:"",t.transmissionMapUv?"#define TRANSMISSIONMAP_UV "+t.transmissionMapUv:"",t.thicknessMapUv?"#define THICKNESSMAP_UV "+t.thicknessMapUv:"",t.vertexTangents&&t.flatShading===!1?"#define USE_TANGENT":"",t.vertexColors?"#define USE_COLOR":"",t.vertexAlphas?"#define USE_COLOR_ALPHA":"",t.vertexUv1s?"#define USE_UV1":"",t.vertexUv2s?"#define USE_UV2":"",t.vertexUv3s?"#define USE_UV3":"",t.pointsUvs?"#define USE_POINTS_UV":"",t.flatShading?"#define FLAT_SHADED":"",t.skinning?"#define USE_SKINNING":"",t.morphTargets?"#define USE_MORPHTARGETS":"",t.morphNormals&&t.flatShading===!1?"#define USE_MORPHNORMALS":"",t.morphColors?"#define USE_MORPHCOLORS":"",t.morphTargetsCount>0?"#define MORPHTARGETS_TEXTURE_STRIDE "+t.morphTextureStride:"",t.morphTargetsCount>0?"#define MORPHTARGETS_COUNT "+t.morphTargetsCount:"",t.doubleSided?"#define DOUBLE_SIDED":"",t.flipSided?"#define FLIP_SIDED":"",t.shadowMapEnabled?"#define USE_SHADOWMAP":"",t.shadowMapEnabled?"#define "+f:"",t.sizeAttenuation?"#define USE_SIZEATTENUATION":"",t.numLightProbes>0?"#define USE_LIGHT_PROBES":"",t.logarithmicDepthBuffer?"#define USE_LOGARITHMIC_DEPTH_BUFFER":"",t.reversedDepthBuffer?"#define USE_REVERSED_DEPTH_BUFFER":"","uniform mat4 modelMatrix;","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform mat4 viewMatrix;","uniform mat3 normalMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;","#ifdef USE_INSTANCING","	attribute mat4 instanceMatrix;","#endif","#ifdef USE_INSTANCING_COLOR","	attribute vec3 instanceColor;","#endif","#ifdef USE_INSTANCING_MORPH","	uniform sampler2D morphTexture;","#endif","attribute vec3 position;","attribute vec3 normal;","attribute vec2 uv;","#ifdef USE_UV1","	attribute vec2 uv1;","#endif","#ifdef USE_UV2","	attribute vec2 uv2;","#endif","#ifdef USE_UV3","	attribute vec2 uv3;","#endif","#ifdef USE_TANGENT","	attribute vec4 tangent;","#endif","#if defined( USE_COLOR_ALPHA )","	attribute vec4 color;","#elif defined( USE_COLOR )","	attribute vec3 color;","#endif","#ifdef USE_SKINNING","	attribute vec4 skinIndex;","	attribute vec4 skinWeight;","#endif",`
`].filter(Qg).join(`
`),M=[tN(t),"#define SHADER_TYPE "+t.shaderType,"#define SHADER_NAME "+t.shaderName,S,t.useFog&&t.fog?"#define USE_FOG":"",t.useFog&&t.fogExp2?"#define FOG_EXP2":"",t.alphaToCoverage?"#define ALPHA_TO_COVERAGE":"",t.map?"#define USE_MAP":"",t.matcap?"#define USE_MATCAP":"",t.envMap?"#define USE_ENVMAP":"",t.envMap?"#define "+p:"",t.envMap?"#define "+m:"",t.envMap?"#define "+v:"",_?"#define CUBEUV_TEXEL_WIDTH "+_.texelWidth:"",_?"#define CUBEUV_TEXEL_HEIGHT "+_.texelHeight:"",_?"#define CUBEUV_MAX_MIP "+_.maxMip+".0":"",t.lightMap?"#define USE_LIGHTMAP":"",t.aoMap?"#define USE_AOMAP":"",t.bumpMap?"#define USE_BUMPMAP":"",t.normalMap?"#define USE_NORMALMAP":"",t.normalMapObjectSpace?"#define USE_NORMALMAP_OBJECTSPACE":"",t.normalMapTangentSpace?"#define USE_NORMALMAP_TANGENTSPACE":"",t.emissiveMap?"#define USE_EMISSIVEMAP":"",t.anisotropy?"#define USE_ANISOTROPY":"",t.anisotropyMap?"#define USE_ANISOTROPYMAP":"",t.clearcoat?"#define USE_CLEARCOAT":"",t.clearcoatMap?"#define USE_CLEARCOATMAP":"",t.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",t.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",t.dispersion?"#define USE_DISPERSION":"",t.iridescence?"#define USE_IRIDESCENCE":"",t.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",t.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",t.specularMap?"#define USE_SPECULARMAP":"",t.specularColorMap?"#define USE_SPECULAR_COLORMAP":"",t.specularIntensityMap?"#define USE_SPECULAR_INTENSITYMAP":"",t.roughnessMap?"#define USE_ROUGHNESSMAP":"",t.metalnessMap?"#define USE_METALNESSMAP":"",t.alphaMap?"#define USE_ALPHAMAP":"",t.alphaTest?"#define USE_ALPHATEST":"",t.alphaHash?"#define USE_ALPHAHASH":"",t.sheen?"#define USE_SHEEN":"",t.sheenColorMap?"#define USE_SHEEN_COLORMAP":"",t.sheenRoughnessMap?"#define USE_SHEEN_ROUGHNESSMAP":"",t.transmission?"#define USE_TRANSMISSION":"",t.transmissionMap?"#define USE_TRANSMISSIONMAP":"",t.thicknessMap?"#define USE_THICKNESSMAP":"",t.vertexTangents&&t.flatShading===!1?"#define USE_TANGENT":"",t.vertexColors||t.instancingColor||t.batchingColor?"#define USE_COLOR":"",t.vertexAlphas?"#define USE_COLOR_ALPHA":"",t.vertexUv1s?"#define USE_UV1":"",t.vertexUv2s?"#define USE_UV2":"",t.vertexUv3s?"#define USE_UV3":"",t.pointsUvs?"#define USE_POINTS_UV":"",t.gradientMap?"#define USE_GRADIENTMAP":"",t.flatShading?"#define FLAT_SHADED":"",t.doubleSided?"#define DOUBLE_SIDED":"",t.flipSided?"#define FLIP_SIDED":"",t.shadowMapEnabled?"#define USE_SHADOWMAP":"",t.shadowMapEnabled?"#define "+f:"",t.premultipliedAlpha?"#define PREMULTIPLIED_ALPHA":"",t.numLightProbes>0?"#define USE_LIGHT_PROBES":"",t.decodeVideoTexture?"#define DECODE_VIDEO_TEXTURE":"",t.decodeVideoTextureEmissive?"#define DECODE_VIDEO_TEXTURE_EMISSIVE":"",t.logarithmicDepthBuffer?"#define USE_LOGARITHMIC_DEPTH_BUFFER":"",t.reversedDepthBuffer?"#define USE_REVERSED_DEPTH_BUFFER":"","uniform mat4 viewMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;",t.toneMapping!==lo?"#define TONE_MAPPING":"",t.toneMapping!==lo?Cn.tonemapping_pars_fragment:"",t.toneMapping!==lo?yX("toneMapping",t.toneMapping):"",t.dithering?"#define DITHERING":"",t.opaque?"#define OPAQUE":"",Cn.colorspace_pars_fragment,gX("linearToOutputTexel",t.outputColorSpace),_X(),t.useDepthPacking?"#define DEPTH_PACKING "+t.depthPacking:"",`
`].filter(Qg).join(`
`)),o=BM(o),o=J3(o,t),o=Q3(o,t),u=BM(u),u=J3(u,t),u=Q3(u,t),o=eN(o),u=eN(u),t.isRawShaderMaterial!==!0&&(C=`#version 300 es
`,E=[x,"#define attribute in","#define varying out","#define texture2D texture"].join(`
`)+`
`+E,M=["#define varying in",t.glslVersion===CM?"":"layout(location = 0) out highp vec4 pc_fragColor;",t.glslVersion===CM?"":"#define gl_FragColor pc_fragColor","#define gl_FragDepthEXT gl_FragDepth","#define texture2D texture","#define textureCube texture","#define texture2DProj textureProj","#define texture2DLodEXT textureLod","#define texture2DProjLodEXT textureProjLod","#define textureCubeLodEXT textureLod","#define texture2DGradEXT textureGrad","#define texture2DProjGradEXT textureProjGrad","#define textureCubeGradEXT textureGrad"].join(`
`)+`
`+M);const N=C+E+o,I=C+M+u,U=Y3(r,r.VERTEX_SHADER,N),L=Y3(r,r.FRAGMENT_SHADER,I);r.attachShader(A,U),r.attachShader(A,L),t.index0AttributeName!==void 0?r.bindAttribLocation(A,0,t.index0AttributeName):t.morphTargets===!0&&r.bindAttribLocation(A,0,"position"),r.linkProgram(A);function F(Y){if(n.debug.checkShaderErrors){const ie=r.getProgramInfoLog(A)||"",te=r.getShaderInfoLog(U)||"",le=r.getShaderInfoLog(L)||"",de=ie.trim(),Z=te.trim(),Q=le.trim();let ve=!0,Te=!0;if(r.getProgramParameter(A,r.LINK_STATUS)===!1)if(ve=!1,typeof n.debug.onShaderError=="function")n.debug.onShaderError(r,A,U,L);else{const we=K3(r,U,"vertex"),X=K3(r,L,"fragment");Xt("THREE.WebGLProgram: Shader Error "+r.getError()+" - VALIDATE_STATUS "+r.getProgramParameter(A,r.VALIDATE_STATUS)+`

Material Name: `+Y.name+`
Material Type: `+Y.type+`

Program Info Log: `+de+`
`+we+`
`+X)}else de!==""?At("WebGLProgram: Program Info Log:",de):(Z===""||Q==="")&&(Te=!1);Te&&(Y.diagnostics={runnable:ve,programLog:de,vertexShader:{log:Z,prefix:E},fragmentShader:{log:Q,prefix:M}})}r.deleteShader(U),r.deleteShader(L),H=new px(r,A),P=SX(r,A)}let H;this.getUniforms=function(){return H===void 0&&F(this),H};let P;this.getAttributes=function(){return P===void 0&&F(this),P};let k=t.rendererExtensionParallelShaderCompile===!1;return this.isReady=function(){return k===!1&&(k=r.getProgramParameter(A,fX)),k},this.destroy=function(){i.releaseStatesOfProgram(this),r.deleteProgram(A),this.program=void 0},this.type=t.shaderType,this.name=t.shaderName,this.id=dX++,this.cacheKey=e,this.usedTimes=1,this.program=A,this.vertexShader=U,this.fragmentShader=L,this}let BX=0;class zX{constructor(){this.shaderCache=new Map,this.materialCache=new Map}update(e){const t=e.vertexShader,i=e.fragmentShader,r=this._getShaderStage(t),s=this._getShaderStage(i),o=this._getShaderCacheForMaterial(e);return o.has(r)===!1&&(o.add(r),r.usedTimes++),o.has(s)===!1&&(o.add(s),s.usedTimes++),this}remove(e){const t=this.materialCache.get(e);for(const i of t)i.usedTimes--,i.usedTimes===0&&this.shaderCache.delete(i.code);return this.materialCache.delete(e),this}getVertexShaderID(e){return this._getShaderStage(e.vertexShader).id}getFragmentShaderID(e){return this._getShaderStage(e.fragmentShader).id}dispose(){this.shaderCache.clear(),this.materialCache.clear()}_getShaderCacheForMaterial(e){const t=this.materialCache;let i=t.get(e);return i===void 0&&(i=new Set,t.set(e,i)),i}_getShaderStage(e){const t=this.shaderCache;let i=t.get(e);return i===void 0&&(i=new FX(e),t.set(e,i)),i}}class FX{constructor(e){this.id=BX++,this.code=e,this.usedTimes=0}}function VX(n,e,t,i,r,s,o){const u=new zp,f=new zX,p=new Set,m=[],v=new Map,_=r.logarithmicDepthBuffer;let x=r.precision;const S={MeshDepthMaterial:"depth",MeshDistanceMaterial:"distance",MeshNormalMaterial:"normal",MeshBasicMaterial:"basic",MeshLambertMaterial:"lambert",MeshPhongMaterial:"phong",MeshToonMaterial:"toon",MeshStandardMaterial:"physical",MeshPhysicalMaterial:"physical",MeshMatcapMaterial:"matcap",LineBasicMaterial:"basic",LineDashedMaterial:"dashed",PointsMaterial:"points",ShadowMaterial:"shadow",SpriteMaterial:"sprite"};function A(P){return p.add(P),P===0?"uv":`uv${P}`}function E(P,k,Y,ie,te){const le=ie.fog,de=te.geometry,Z=P.isMeshStandardMaterial?ie.environment:null,Q=(P.isMeshStandardMaterial?t:e).get(P.envMap||Z),ve=Q&&Q.mapping===Jp?Q.image.height:null,Te=S[P.type];P.precision!==null&&(x=r.getMaxPrecision(P.precision),x!==P.precision&&At("WebGLProgram.getParameters:",P.precision,"not supported, using",x,"instead."));const we=de.morphAttributes.position||de.morphAttributes.normal||de.morphAttributes.color,X=we!==void 0?we.length:0;let ce=0;de.morphAttributes.position!==void 0&&(ce=1),de.morphAttributes.normal!==void 0&&(ce=2),de.morphAttributes.color!==void 0&&(ce=3);let xe,Be,mt,ge;if(Te){const Ln=Go[Te];xe=Ln.vertexShader,Be=Ln.fragmentShader}else xe=P.vertexShader,Be=P.fragmentShader,f.update(P),mt=f.getVertexShaderID(P),ge=f.getFragmentShaderID(P);const Re=n.getRenderTarget(),rt=n.state.buffers.depth.getReversed(),xt=te.isInstancedMesh===!0,Rt=te.isBatchedMesh===!0,hn=!!P.map,En=!!P.matcap,$t=!!Q,ze=!!P.aoMap,Je=!!P.lightMap,He=!!P.bumpMap,yt=!!P.normalMap,ee=!!P.displacementMap,Ft=!!P.emissiveMap,St=!!P.metalnessMap,Vt=!!P.roughnessMap,ot=P.anisotropy>0,$=P.clearcoat>0,B=P.dispersion>0,fe=P.iridescence>0,Ie=P.sheen>0,Ge=P.transmission>0,De=ot&&!!P.anisotropyMap,Tt=$&&!!P.clearcoatMap,ht=$&&!!P.clearcoatNormalMap,Lt=$&&!!P.clearcoatRoughnessMap,Yt=fe&&!!P.iridescenceMap,Xe=fe&&!!P.iridescenceThicknessMap,$e=Ie&&!!P.sheenColorMap,Ct=Ie&&!!P.sheenRoughnessMap,wt=!!P.specularMap,st=!!P.specularColorMap,jt=!!P.specularIntensityMap,pe=Ge&&!!P.transmissionMap,Ce=Ge&&!!P.thicknessMap,et=!!P.gradientMap,Et=!!P.alphaMap,Qe=P.alphaTest>0,Fe=!!P.alphaHash,gt=!!P.extensions;let nn=lo;P.toneMapped&&(Re===null||Re.isXRRenderTarget===!0)&&(nn=n.toneMapping);const Dn={shaderID:Te,shaderType:P.type,shaderName:P.name,vertexShader:xe,fragmentShader:Be,defines:P.defines,customVertexShaderID:mt,customFragmentShaderID:ge,isRawShaderMaterial:P.isRawShaderMaterial===!0,glslVersion:P.glslVersion,precision:x,batching:Rt,batchingColor:Rt&&te._colorsTexture!==null,instancing:xt,instancingColor:xt&&te.instanceColor!==null,instancingMorph:xt&&te.morphTexture!==null,outputColorSpace:Re===null?n.outputColorSpace:Re.isXRRenderTarget===!0?Re.texture.colorSpace:Yo,alphaToCoverage:!!P.alphaToCoverage,map:hn,matcap:En,envMap:$t,envMapMode:$t&&Q.mapping,envMapCubeUVHeight:ve,aoMap:ze,lightMap:Je,bumpMap:He,normalMap:yt,displacementMap:ee,emissiveMap:Ft,normalMapObjectSpace:yt&&P.normalMapType===kP,normalMapTangentSpace:yt&&P.normalMapType===Ku,metalnessMap:St,roughnessMap:Vt,anisotropy:ot,anisotropyMap:De,clearcoat:$,clearcoatMap:Tt,clearcoatNormalMap:ht,clearcoatRoughnessMap:Lt,dispersion:B,iridescence:fe,iridescenceMap:Yt,iridescenceThicknessMap:Xe,sheen:Ie,sheenColorMap:$e,sheenRoughnessMap:Ct,specularMap:wt,specularColorMap:st,specularIntensityMap:jt,transmission:Ge,transmissionMap:pe,thicknessMap:Ce,gradientMap:et,opaque:P.transparent===!1&&P.blending===xf&&P.alphaToCoverage===!1,alphaMap:Et,alphaTest:Qe,alphaHash:Fe,combine:P.combine,mapUv:hn&&A(P.map.channel),aoMapUv:ze&&A(P.aoMap.channel),lightMapUv:Je&&A(P.lightMap.channel),bumpMapUv:He&&A(P.bumpMap.channel),normalMapUv:yt&&A(P.normalMap.channel),displacementMapUv:ee&&A(P.displacementMap.channel),emissiveMapUv:Ft&&A(P.emissiveMap.channel),metalnessMapUv:St&&A(P.metalnessMap.channel),roughnessMapUv:Vt&&A(P.roughnessMap.channel),anisotropyMapUv:De&&A(P.anisotropyMap.channel),clearcoatMapUv:Tt&&A(P.clearcoatMap.channel),clearcoatNormalMapUv:ht&&A(P.clearcoatNormalMap.channel),clearcoatRoughnessMapUv:Lt&&A(P.clearcoatRoughnessMap.channel),iridescenceMapUv:Yt&&A(P.iridescenceMap.channel),iridescenceThicknessMapUv:Xe&&A(P.iridescenceThicknessMap.channel),sheenColorMapUv:$e&&A(P.sheenColorMap.channel),sheenRoughnessMapUv:Ct&&A(P.sheenRoughnessMap.channel),specularMapUv:wt&&A(P.specularMap.channel),specularColorMapUv:st&&A(P.specularColorMap.channel),specularIntensityMapUv:jt&&A(P.specularIntensityMap.channel),transmissionMapUv:pe&&A(P.transmissionMap.channel),thicknessMapUv:Ce&&A(P.thicknessMap.channel),alphaMapUv:Et&&A(P.alphaMap.channel),vertexTangents:!!de.attributes.tangent&&(yt||ot),vertexColors:P.vertexColors,vertexAlphas:P.vertexColors===!0&&!!de.attributes.color&&de.attributes.color.itemSize===4,pointsUvs:te.isPoints===!0&&!!de.attributes.uv&&(hn||Et),fog:!!le,useFog:P.fog===!0,fogExp2:!!le&&le.isFogExp2,flatShading:P.flatShading===!0&&P.wireframe===!1,sizeAttenuation:P.sizeAttenuation===!0,logarithmicDepthBuffer:_,reversedDepthBuffer:rt,skinning:te.isSkinnedMesh===!0,morphTargets:de.morphAttributes.position!==void 0,morphNormals:de.morphAttributes.normal!==void 0,morphColors:de.morphAttributes.color!==void 0,morphTargetsCount:X,morphTextureStride:ce,numDirLights:k.directional.length,numPointLights:k.point.length,numSpotLights:k.spot.length,numSpotLightMaps:k.spotLightMap.length,numRectAreaLights:k.rectArea.length,numHemiLights:k.hemi.length,numDirLightShadows:k.directionalShadowMap.length,numPointLightShadows:k.pointShadowMap.length,numSpotLightShadows:k.spotShadowMap.length,numSpotLightShadowsWithMaps:k.numSpotLightShadowsWithMaps,numLightProbes:k.numLightProbes,numClippingPlanes:o.numPlanes,numClipIntersection:o.numIntersection,dithering:P.dithering,shadowMapEnabled:n.shadowMap.enabled&&Y.length>0,shadowMapType:n.shadowMap.type,toneMapping:nn,decodeVideoTexture:hn&&P.map.isVideoTexture===!0&&Hn.getTransfer(P.map.colorSpace)===ri,decodeVideoTextureEmissive:Ft&&P.emissiveMap.isVideoTexture===!0&&Hn.getTransfer(P.emissiveMap.colorSpace)===ri,premultipliedAlpha:P.premultipliedAlpha,doubleSided:P.side===jo,flipSided:P.side===Vs,useDepthPacking:P.depthPacking>=0,depthPacking:P.depthPacking||0,index0AttributeName:P.index0AttributeName,extensionClipCullDistance:gt&&P.extensions.clipCullDistance===!0&&i.has("WEBGL_clip_cull_distance"),extensionMultiDraw:(gt&&P.extensions.multiDraw===!0||Rt)&&i.has("WEBGL_multi_draw"),rendererExtensionParallelShaderCompile:i.has("KHR_parallel_shader_compile"),customProgramCacheKey:P.customProgramCacheKey()};return Dn.vertexUv1s=p.has(1),Dn.vertexUv2s=p.has(2),Dn.vertexUv3s=p.has(3),p.clear(),Dn}function M(P){const k=[];if(P.shaderID?k.push(P.shaderID):(k.push(P.customVertexShaderID),k.push(P.customFragmentShaderID)),P.defines!==void 0)for(const Y in P.defines)k.push(Y),k.push(P.defines[Y]);return P.isRawShaderMaterial===!1&&(C(k,P),N(k,P),k.push(n.outputColorSpace)),k.push(P.customProgramCacheKey),k.join()}function C(P,k){P.push(k.precision),P.push(k.outputColorSpace),P.push(k.envMapMode),P.push(k.envMapCubeUVHeight),P.push(k.mapUv),P.push(k.alphaMapUv),P.push(k.lightMapUv),P.push(k.aoMapUv),P.push(k.bumpMapUv),P.push(k.normalMapUv),P.push(k.displacementMapUv),P.push(k.emissiveMapUv),P.push(k.metalnessMapUv),P.push(k.roughnessMapUv),P.push(k.anisotropyMapUv),P.push(k.clearcoatMapUv),P.push(k.clearcoatNormalMapUv),P.push(k.clearcoatRoughnessMapUv),P.push(k.iridescenceMapUv),P.push(k.iridescenceThicknessMapUv),P.push(k.sheenColorMapUv),P.push(k.sheenRoughnessMapUv),P.push(k.specularMapUv),P.push(k.specularColorMapUv),P.push(k.specularIntensityMapUv),P.push(k.transmissionMapUv),P.push(k.thicknessMapUv),P.push(k.combine),P.push(k.fogExp2),P.push(k.sizeAttenuation),P.push(k.morphTargetsCount),P.push(k.morphAttributeCount),P.push(k.numDirLights),P.push(k.numPointLights),P.push(k.numSpotLights),P.push(k.numSpotLightMaps),P.push(k.numHemiLights),P.push(k.numRectAreaLights),P.push(k.numDirLightShadows),P.push(k.numPointLightShadows),P.push(k.numSpotLightShadows),P.push(k.numSpotLightShadowsWithMaps),P.push(k.numLightProbes),P.push(k.shadowMapType),P.push(k.toneMapping),P.push(k.numClippingPlanes),P.push(k.numClipIntersection),P.push(k.depthPacking)}function N(P,k){u.disableAll(),k.instancing&&u.enable(0),k.instancingColor&&u.enable(1),k.instancingMorph&&u.enable(2),k.matcap&&u.enable(3),k.envMap&&u.enable(4),k.normalMapObjectSpace&&u.enable(5),k.normalMapTangentSpace&&u.enable(6),k.clearcoat&&u.enable(7),k.iridescence&&u.enable(8),k.alphaTest&&u.enable(9),k.vertexColors&&u.enable(10),k.vertexAlphas&&u.enable(11),k.vertexUv1s&&u.enable(12),k.vertexUv2s&&u.enable(13),k.vertexUv3s&&u.enable(14),k.vertexTangents&&u.enable(15),k.anisotropy&&u.enable(16),k.alphaHash&&u.enable(17),k.batching&&u.enable(18),k.dispersion&&u.enable(19),k.batchingColor&&u.enable(20),k.gradientMap&&u.enable(21),P.push(u.mask),u.disableAll(),k.fog&&u.enable(0),k.useFog&&u.enable(1),k.flatShading&&u.enable(2),k.logarithmicDepthBuffer&&u.enable(3),k.reversedDepthBuffer&&u.enable(4),k.skinning&&u.enable(5),k.morphTargets&&u.enable(6),k.morphNormals&&u.enable(7),k.morphColors&&u.enable(8),k.premultipliedAlpha&&u.enable(9),k.shadowMapEnabled&&u.enable(10),k.doubleSided&&u.enable(11),k.flipSided&&u.enable(12),k.useDepthPacking&&u.enable(13),k.dithering&&u.enable(14),k.transmission&&u.enable(15),k.sheen&&u.enable(16),k.opaque&&u.enable(17),k.pointsUvs&&u.enable(18),k.decodeVideoTexture&&u.enable(19),k.decodeVideoTextureEmissive&&u.enable(20),k.alphaToCoverage&&u.enable(21),P.push(u.mask)}function I(P){const k=S[P.type];let Y;if(k){const ie=Go[k];Y=ZP.clone(ie.uniforms)}else Y=P.uniforms;return Y}function U(P,k){let Y=v.get(k);return Y!==void 0?++Y.usedTimes:(Y=new kX(n,k,P,s),m.push(Y),v.set(k,Y)),Y}function L(P){if(--P.usedTimes===0){const k=m.indexOf(P);m[k]=m[m.length-1],m.pop(),v.delete(P.cacheKey),P.destroy()}}function F(P){f.remove(P)}function H(){f.dispose()}return{getParameters:E,getProgramCacheKey:M,getUniforms:I,acquireProgram:U,releaseProgram:L,releaseShaderCache:F,programs:m,dispose:H}}function HX(){let n=new WeakMap;function e(o){return n.has(o)}function t(o){let u=n.get(o);return u===void 0&&(u={},n.set(o,u)),u}function i(o){n.delete(o)}function r(o,u,f){n.get(o)[u]=f}function s(){n=new WeakMap}return{has:e,get:t,remove:i,update:r,dispose:s}}function GX(n,e){return n.groupOrder!==e.groupOrder?n.groupOrder-e.groupOrder:n.renderOrder!==e.renderOrder?n.renderOrder-e.renderOrder:n.material.id!==e.material.id?n.material.id-e.material.id:n.z!==e.z?n.z-e.z:n.id-e.id}function nN(n,e){return n.groupOrder!==e.groupOrder?n.groupOrder-e.groupOrder:n.renderOrder!==e.renderOrder?n.renderOrder-e.renderOrder:n.z!==e.z?e.z-n.z:n.id-e.id}function iN(){const n=[];let e=0;const t=[],i=[],r=[];function s(){e=0,t.length=0,i.length=0,r.length=0}function o(v,_,x,S,A,E){let M=n[e];return M===void 0?(M={id:v.id,object:v,geometry:_,material:x,groupOrder:S,renderOrder:v.renderOrder,z:A,group:E},n[e]=M):(M.id=v.id,M.object=v,M.geometry=_,M.material=x,M.groupOrder=S,M.renderOrder=v.renderOrder,M.z=A,M.group=E),e++,M}function u(v,_,x,S,A,E){const M=o(v,_,x,S,A,E);x.transmission>0?i.push(M):x.transparent===!0?r.push(M):t.push(M)}function f(v,_,x,S,A,E){const M=o(v,_,x,S,A,E);x.transmission>0?i.unshift(M):x.transparent===!0?r.unshift(M):t.unshift(M)}function p(v,_){t.length>1&&t.sort(v||GX),i.length>1&&i.sort(_||nN),r.length>1&&r.sort(_||nN)}function m(){for(let v=e,_=n.length;v<_;v++){const x=n[v];if(x.id===null)break;x.id=null,x.object=null,x.geometry=null,x.material=null,x.group=null}}return{opaque:t,transmissive:i,transparent:r,init:s,push:u,unshift:f,finish:m,sort:p}}function jX(){let n=new WeakMap;function e(i,r){const s=n.get(i);let o;return s===void 0?(o=new iN,n.set(i,[o])):r>=s.length?(o=new iN,s.push(o)):o=s[r],o}function t(){n=new WeakMap}return{get:e,dispose:t}}function WX(){const n={};return{get:function(e){if(n[e.id]!==void 0)return n[e.id];let t;switch(e.type){case"DirectionalLight":t={direction:new J,color:new Ot};break;case"SpotLight":t={position:new J,direction:new J,color:new Ot,distance:0,coneCos:0,penumbraCos:0,decay:0};break;case"PointLight":t={position:new J,color:new Ot,distance:0,decay:0};break;case"HemisphereLight":t={direction:new J,skyColor:new Ot,groundColor:new Ot};break;case"RectAreaLight":t={color:new Ot,position:new J,halfWidth:new J,halfHeight:new J};break}return n[e.id]=t,t}}}function qX(){const n={};return{get:function(e){if(n[e.id]!==void 0)return n[e.id];let t;switch(e.type){case"DirectionalLight":t={shadowIntensity:1,shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new Ye};break;case"SpotLight":t={shadowIntensity:1,shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new Ye};break;case"PointLight":t={shadowIntensity:1,shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new Ye,shadowCameraNear:1,shadowCameraFar:1e3};break}return n[e.id]=t,t}}}let XX=0;function $X(n,e){return(e.castShadow?2:0)-(n.castShadow?2:0)+(e.map?1:0)-(n.map?1:0)}function YX(n){const e=new WX,t=qX(),i={version:0,hash:{directionalLength:-1,pointLength:-1,spotLength:-1,rectAreaLength:-1,hemiLength:-1,numDirectionalShadows:-1,numPointShadows:-1,numSpotShadows:-1,numSpotMaps:-1,numLightProbes:-1},ambient:[0,0,0],probe:[],directional:[],directionalShadow:[],directionalShadowMap:[],directionalShadowMatrix:[],spot:[],spotLightMap:[],spotShadow:[],spotShadowMap:[],spotLightMatrix:[],rectArea:[],rectAreaLTC1:null,rectAreaLTC2:null,point:[],pointShadow:[],pointShadowMap:[],pointShadowMatrix:[],hemi:[],numSpotLightShadowsWithMaps:0,numLightProbes:0};for(let p=0;p<9;p++)i.probe.push(new J);const r=new J,s=new un,o=new un;function u(p){let m=0,v=0,_=0;for(let P=0;P<9;P++)i.probe[P].set(0,0,0);let x=0,S=0,A=0,E=0,M=0,C=0,N=0,I=0,U=0,L=0,F=0;p.sort($X);for(let P=0,k=p.length;P<k;P++){const Y=p[P],ie=Y.color,te=Y.intensity,le=Y.distance;let de=null;if(Y.shadow&&Y.shadow.map&&(Y.shadow.map.texture.format===Mf?de=Y.shadow.map.texture:de=Y.shadow.map.depthTexture||Y.shadow.map.texture),Y.isAmbientLight)m+=ie.r*te,v+=ie.g*te,_+=ie.b*te;else if(Y.isLightProbe){for(let Z=0;Z<9;Z++)i.probe[Z].addScaledVector(Y.sh.coefficients[Z],te);F++}else if(Y.isDirectionalLight){const Z=e.get(Y);if(Z.color.copy(Y.color).multiplyScalar(Y.intensity),Y.castShadow){const Q=Y.shadow,ve=t.get(Y);ve.shadowIntensity=Q.intensity,ve.shadowBias=Q.bias,ve.shadowNormalBias=Q.normalBias,ve.shadowRadius=Q.radius,ve.shadowMapSize=Q.mapSize,i.directionalShadow[x]=ve,i.directionalShadowMap[x]=de,i.directionalShadowMatrix[x]=Y.shadow.matrix,C++}i.directional[x]=Z,x++}else if(Y.isSpotLight){const Z=e.get(Y);Z.position.setFromMatrixPosition(Y.matrixWorld),Z.color.copy(ie).multiplyScalar(te),Z.distance=le,Z.coneCos=Math.cos(Y.angle),Z.penumbraCos=Math.cos(Y.angle*(1-Y.penumbra)),Z.decay=Y.decay,i.spot[A]=Z;const Q=Y.shadow;if(Y.map&&(i.spotLightMap[U]=Y.map,U++,Q.updateMatrices(Y),Y.castShadow&&L++),i.spotLightMatrix[A]=Q.matrix,Y.castShadow){const ve=t.get(Y);ve.shadowIntensity=Q.intensity,ve.shadowBias=Q.bias,ve.shadowNormalBias=Q.normalBias,ve.shadowRadius=Q.radius,ve.shadowMapSize=Q.mapSize,i.spotShadow[A]=ve,i.spotShadowMap[A]=de,I++}A++}else if(Y.isRectAreaLight){const Z=e.get(Y);Z.color.copy(ie).multiplyScalar(te),Z.halfWidth.set(Y.width*.5,0,0),Z.halfHeight.set(0,Y.height*.5,0),i.rectArea[E]=Z,E++}else if(Y.isPointLight){const Z=e.get(Y);if(Z.color.copy(Y.color).multiplyScalar(Y.intensity),Z.distance=Y.distance,Z.decay=Y.decay,Y.castShadow){const Q=Y.shadow,ve=t.get(Y);ve.shadowIntensity=Q.intensity,ve.shadowBias=Q.bias,ve.shadowNormalBias=Q.normalBias,ve.shadowRadius=Q.radius,ve.shadowMapSize=Q.mapSize,ve.shadowCameraNear=Q.camera.near,ve.shadowCameraFar=Q.camera.far,i.pointShadow[S]=ve,i.pointShadowMap[S]=de,i.pointShadowMatrix[S]=Y.shadow.matrix,N++}i.point[S]=Z,S++}else if(Y.isHemisphereLight){const Z=e.get(Y);Z.skyColor.copy(Y.color).multiplyScalar(te),Z.groundColor.copy(Y.groundColor).multiplyScalar(te),i.hemi[M]=Z,M++}}E>0&&(n.has("OES_texture_float_linear")===!0?(i.rectAreaLTC1=Nt.LTC_FLOAT_1,i.rectAreaLTC2=Nt.LTC_FLOAT_2):(i.rectAreaLTC1=Nt.LTC_HALF_1,i.rectAreaLTC2=Nt.LTC_HALF_2)),i.ambient[0]=m,i.ambient[1]=v,i.ambient[2]=_;const H=i.hash;(H.directionalLength!==x||H.pointLength!==S||H.spotLength!==A||H.rectAreaLength!==E||H.hemiLength!==M||H.numDirectionalShadows!==C||H.numPointShadows!==N||H.numSpotShadows!==I||H.numSpotMaps!==U||H.numLightProbes!==F)&&(i.directional.length=x,i.spot.length=A,i.rectArea.length=E,i.point.length=S,i.hemi.length=M,i.directionalShadow.length=C,i.directionalShadowMap.length=C,i.pointShadow.length=N,i.pointShadowMap.length=N,i.spotShadow.length=I,i.spotShadowMap.length=I,i.directionalShadowMatrix.length=C,i.pointShadowMatrix.length=N,i.spotLightMatrix.length=I+U-L,i.spotLightMap.length=U,i.numSpotLightShadowsWithMaps=L,i.numLightProbes=F,H.directionalLength=x,H.pointLength=S,H.spotLength=A,H.rectAreaLength=E,H.hemiLength=M,H.numDirectionalShadows=C,H.numPointShadows=N,H.numSpotShadows=I,H.numSpotMaps=U,H.numLightProbes=F,i.version=XX++)}function f(p,m){let v=0,_=0,x=0,S=0,A=0;const E=m.matrixWorldInverse;for(let M=0,C=p.length;M<C;M++){const N=p[M];if(N.isDirectionalLight){const I=i.directional[v];I.direction.setFromMatrixPosition(N.matrixWorld),r.setFromMatrixPosition(N.target.matrixWorld),I.direction.sub(r),I.direction.transformDirection(E),v++}else if(N.isSpotLight){const I=i.spot[x];I.position.setFromMatrixPosition(N.matrixWorld),I.position.applyMatrix4(E),I.direction.setFromMatrixPosition(N.matrixWorld),r.setFromMatrixPosition(N.target.matrixWorld),I.direction.sub(r),I.direction.transformDirection(E),x++}else if(N.isRectAreaLight){const I=i.rectArea[S];I.position.setFromMatrixPosition(N.matrixWorld),I.position.applyMatrix4(E),o.identity(),s.copy(N.matrixWorld),s.premultiply(E),o.extractRotation(s),I.halfWidth.set(N.width*.5,0,0),I.halfHeight.set(0,N.height*.5,0),I.halfWidth.applyMatrix4(o),I.halfHeight.applyMatrix4(o),S++}else if(N.isPointLight){const I=i.point[_];I.position.setFromMatrixPosition(N.matrixWorld),I.position.applyMatrix4(E),_++}else if(N.isHemisphereLight){const I=i.hemi[A];I.direction.setFromMatrixPosition(N.matrixWorld),I.direction.transformDirection(E),A++}}}return{setup:u,setupView:f,state:i}}function rN(n){const e=new YX(n),t=[],i=[];function r(m){p.camera=m,t.length=0,i.length=0}function s(m){t.push(m)}function o(m){i.push(m)}function u(){e.setup(t)}function f(m){e.setupView(t,m)}const p={lightsArray:t,shadowsArray:i,camera:null,lights:e,transmissionRenderTarget:{}};return{init:r,state:p,setupLights:u,setupLightsView:f,pushLight:s,pushShadow:o}}function ZX(n){let e=new WeakMap;function t(r,s=0){const o=e.get(r);let u;return o===void 0?(u=new rN(n),e.set(r,[u])):s>=o.length?(u=new rN(n),o.push(u)):u=o[s],u}function i(){e=new WeakMap}return{get:t,dispose:i}}const KX=`void main() {
	gl_Position = vec4( position, 1.0 );
}`,JX=`uniform sampler2D shadow_pass;
uniform vec2 resolution;
uniform float radius;
void main() {
	const float samples = float( VSM_SAMPLES );
	float mean = 0.0;
	float squared_mean = 0.0;
	float uvStride = samples <= 1.0 ? 0.0 : 2.0 / ( samples - 1.0 );
	float uvStart = samples <= 1.0 ? 0.0 : - 1.0;
	for ( float i = 0.0; i < samples; i ++ ) {
		float uvOffset = uvStart + i * uvStride;
		#ifdef HORIZONTAL_PASS
			vec2 distribution = texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( uvOffset, 0.0 ) * radius ) / resolution ).rg;
			mean += distribution.x;
			squared_mean += distribution.y * distribution.y + distribution.x * distribution.x;
		#else
			float depth = texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( 0.0, uvOffset ) * radius ) / resolution ).r;
			mean += depth;
			squared_mean += depth * depth;
		#endif
	}
	mean = mean / samples;
	squared_mean = squared_mean / samples;
	float std_dev = sqrt( max( 0.0, squared_mean - mean * mean ) );
	gl_FragColor = vec4( mean, std_dev, 0.0, 1.0 );
}`,QX=[new J(1,0,0),new J(-1,0,0),new J(0,1,0),new J(0,-1,0),new J(0,0,1),new J(0,0,-1)],e$=[new J(0,-1,0),new J(0,-1,0),new J(0,0,1),new J(0,0,-1),new J(0,-1,0),new J(0,-1,0)],sN=new un,jg=new J,Ew=new J;function t$(n,e,t){let i=new em;const r=new Ye,s=new Ye,o=new mi,u=new uT,f=new hT,p={},m=t.maxTextureSize,v={[Pc]:Vs,[Vs]:Pc,[jo]:jo},_=new Ss({defines:{VSM_SAMPLES:8},uniforms:{shadow_pass:{value:null},resolution:{value:new Ye},radius:{value:4}},vertexShader:KX,fragmentShader:JX}),x=_.clone();x.defines.HORIZONTAL_PASS=1;const S=new vn;S.setAttribute("position",new fi(new Float32Array([-1,-1,.5,3,-1,.5,-1,3,.5]),3));const A=new Xi(S,_),E=this;this.enabled=!1,this.autoUpdate=!0,this.needsUpdate=!1,this.type=Rp;let M=this.type;this.render=function(L,F,H){if(E.enabled===!1||E.autoUpdate===!1&&E.needsUpdate===!1||L.length===0)return;L.type===a0&&(At("WebGLShadowMap: PCFSoftShadowMap has been deprecated. Using PCFShadowMap instead."),L.type=Rp);const P=n.getRenderTarget(),k=n.getActiveCubeFace(),Y=n.getActiveMipmapLevel(),ie=n.state;ie.setBlending(Xo),ie.buffers.depth.getReversed()===!0?ie.buffers.color.setClear(0,0,0,0):ie.buffers.color.setClear(1,1,1,1),ie.buffers.depth.setTest(!0),ie.setScissorTest(!1);const te=M!==this.type;te&&F.traverse(function(le){le.material&&(Array.isArray(le.material)?le.material.forEach(de=>de.needsUpdate=!0):le.material.needsUpdate=!0)});for(let le=0,de=L.length;le<de;le++){const Z=L[le],Q=Z.shadow;if(Q===void 0){At("WebGLShadowMap:",Z,"has no shadow.");continue}if(Q.autoUpdate===!1&&Q.needsUpdate===!1)continue;r.copy(Q.mapSize);const ve=Q.getFrameExtents();if(r.multiply(ve),s.copy(Q.mapSize),(r.x>m||r.y>m)&&(r.x>m&&(s.x=Math.floor(m/ve.x),r.x=s.x*ve.x,Q.mapSize.x=s.x),r.y>m&&(s.y=Math.floor(m/ve.y),r.y=s.y*ve.y,Q.mapSize.y=s.y)),Q.map===null||te===!0){if(Q.map!==null&&(Q.map.depthTexture!==null&&(Q.map.depthTexture.dispose(),Q.map.depthTexture=null),Q.map.dispose()),this.type===df){if(Z.isPointLight){At("WebGLShadowMap: VSM shadow maps are not supported for PointLights. Use PCF or BasicShadowMap instead.");continue}Q.map=new Hs(r.x,r.y,{format:Mf,type:ir,minFilter:Wn,magFilter:Wn,generateMipmaps:!1}),Q.map.texture.name=Z.name+".shadowMap",Q.map.depthTexture=new Hp(r.x,r.y,ki),Q.map.depthTexture.name=Z.name+".shadowMapDepth",Q.map.depthTexture.format=Bl,Q.map.depthTexture.compareFunction=null,Q.map.depthTexture.minFilter=dr,Q.map.depthTexture.magFilter=dr}else{Z.isPointLight?(Q.map=new Zb(r.x),Q.map.depthTexture=new oO(r.x,Aa)):(Q.map=new Hs(r.x,r.y),Q.map.depthTexture=new Hp(r.x,r.y,Aa)),Q.map.depthTexture.name=Z.name+".shadowMap",Q.map.depthTexture.format=Bl;const we=n.state.buffers.depth.getReversed();this.type===Rp?(Q.map.depthTexture.compareFunction=we?qb:Wb,Q.map.depthTexture.minFilter=Wn,Q.map.depthTexture.magFilter=Wn):(Q.map.depthTexture.compareFunction=null,Q.map.depthTexture.minFilter=dr,Q.map.depthTexture.magFilter=dr)}Q.camera.updateProjectionMatrix()}const Te=Q.map.isWebGLCubeRenderTarget?6:1;for(let we=0;we<Te;we++){if(Q.map.isWebGLCubeRenderTarget)n.setRenderTarget(Q.map,we),n.clear();else{we===0&&(n.setRenderTarget(Q.map),n.clear());const X=Q.getViewport(we);o.set(s.x*X.x,s.y*X.y,s.x*X.z,s.y*X.w),ie.viewport(o)}if(Z.isPointLight){const X=Q.camera,ce=Q.matrix,xe=Z.distance||X.far;xe!==X.far&&(X.far=xe,X.updateProjectionMatrix()),jg.setFromMatrixPosition(Z.matrixWorld),X.position.copy(jg),Ew.copy(X.position),Ew.add(QX[we]),X.up.copy(e$[we]),X.lookAt(Ew),X.updateMatrixWorld(),ce.makeTranslation(-jg.x,-jg.y,-jg.z),sN.multiplyMatrices(X.projectionMatrix,X.matrixWorldInverse),Q._frustum.setFromProjectionMatrix(sN,X.coordinateSystem,X.reversedDepth)}else Q.updateMatrices(Z);i=Q.getFrustum(),I(F,H,Q.camera,Z,this.type)}Q.isPointLightShadow!==!0&&this.type===df&&C(Q,H),Q.needsUpdate=!1}M=this.type,E.needsUpdate=!1,n.setRenderTarget(P,k,Y)};function C(L,F){const H=e.update(A);_.defines.VSM_SAMPLES!==L.blurSamples&&(_.defines.VSM_SAMPLES=L.blurSamples,x.defines.VSM_SAMPLES=L.blurSamples,_.needsUpdate=!0,x.needsUpdate=!0),L.mapPass===null&&(L.mapPass=new Hs(r.x,r.y,{format:Mf,type:ir})),_.uniforms.shadow_pass.value=L.map.depthTexture,_.uniforms.resolution.value=L.mapSize,_.uniforms.radius.value=L.radius,n.setRenderTarget(L.mapPass),n.clear(),n.renderBufferDirect(F,null,H,_,A,null),x.uniforms.shadow_pass.value=L.mapPass.texture,x.uniforms.resolution.value=L.mapSize,x.uniforms.radius.value=L.radius,n.setRenderTarget(L.map),n.clear(),n.renderBufferDirect(F,null,H,x,A,null)}function N(L,F,H,P){let k=null;const Y=H.isPointLight===!0?L.customDistanceMaterial:L.customDepthMaterial;if(Y!==void 0)k=Y;else if(k=H.isPointLight===!0?f:u,n.localClippingEnabled&&F.clipShadows===!0&&Array.isArray(F.clippingPlanes)&&F.clippingPlanes.length!==0||F.displacementMap&&F.displacementScale!==0||F.alphaMap&&F.alphaTest>0||F.map&&F.alphaTest>0||F.alphaToCoverage===!0){const ie=k.uuid,te=F.uuid;let le=p[ie];le===void 0&&(le={},p[ie]=le);let de=le[te];de===void 0&&(de=k.clone(),le[te]=de,F.addEventListener("dispose",U)),k=de}if(k.visible=F.visible,k.wireframe=F.wireframe,P===df?k.side=F.shadowSide!==null?F.shadowSide:F.side:k.side=F.shadowSide!==null?F.shadowSide:v[F.side],k.alphaMap=F.alphaMap,k.alphaTest=F.alphaToCoverage===!0?.5:F.alphaTest,k.map=F.map,k.clipShadows=F.clipShadows,k.clippingPlanes=F.clippingPlanes,k.clipIntersection=F.clipIntersection,k.displacementMap=F.displacementMap,k.displacementScale=F.displacementScale,k.displacementBias=F.displacementBias,k.wireframeLinewidth=F.wireframeLinewidth,k.linewidth=F.linewidth,H.isPointLight===!0&&k.isMeshDistanceMaterial===!0){const ie=n.properties.get(k);ie.light=H}return k}function I(L,F,H,P,k){if(L.visible===!1)return;if(L.layers.test(F.layers)&&(L.isMesh||L.isLine||L.isPoints)&&(L.castShadow||L.receiveShadow&&k===df)&&(!L.frustumCulled||i.intersectsObject(L))){L.modelViewMatrix.multiplyMatrices(H.matrixWorldInverse,L.matrixWorld);const te=e.update(L),le=L.material;if(Array.isArray(le)){const de=te.groups;for(let Z=0,Q=de.length;Z<Q;Z++){const ve=de[Z],Te=le[ve.materialIndex];if(Te&&Te.visible){const we=N(L,Te,P,k);L.onBeforeShadow(n,L,F,H,te,we,ve),n.renderBufferDirect(H,null,te,we,L,ve),L.onAfterShadow(n,L,F,H,te,we,ve)}}}else if(le.visible){const de=N(L,le,P,k);L.onBeforeShadow(n,L,F,H,te,de,null),n.renderBufferDirect(H,null,te,de,L,null),L.onAfterShadow(n,L,F,H,te,de,null)}}const ie=L.children;for(let te=0,le=ie.length;te<le;te++)I(ie[te],F,H,P,k)}function U(L){L.target.removeEventListener("dispose",U);for(const H in p){const P=p[H],k=L.target.uuid;k in P&&(P[k].dispose(),delete P[k])}}}const n$={[Nx]:Dx,[Ix]:Lx,[Px]:Ux,[wf]:Ox,[Dx]:Nx,[Lx]:Ix,[Ux]:Px,[Ox]:wf};function i$(n,e){function t(){let pe=!1;const Ce=new mi;let et=null;const Et=new mi(0,0,0,0);return{setMask:function(Qe){et!==Qe&&!pe&&(n.colorMask(Qe,Qe,Qe,Qe),et=Qe)},setLocked:function(Qe){pe=Qe},setClear:function(Qe,Fe,gt,nn,Dn){Dn===!0&&(Qe*=nn,Fe*=nn,gt*=nn),Ce.set(Qe,Fe,gt,nn),Et.equals(Ce)===!1&&(n.clearColor(Qe,Fe,gt,nn),Et.copy(Ce))},reset:function(){pe=!1,et=null,Et.set(-1,0,0,0)}}}function i(){let pe=!1,Ce=!1,et=null,Et=null,Qe=null;return{setReversed:function(Fe){if(Ce!==Fe){const gt=e.get("EXT_clip_control");Fe?gt.clipControlEXT(gt.LOWER_LEFT_EXT,gt.ZERO_TO_ONE_EXT):gt.clipControlEXT(gt.LOWER_LEFT_EXT,gt.NEGATIVE_ONE_TO_ONE_EXT),Ce=Fe;const nn=Qe;Qe=null,this.setClear(nn)}},getReversed:function(){return Ce},setTest:function(Fe){Fe?Re(n.DEPTH_TEST):rt(n.DEPTH_TEST)},setMask:function(Fe){et!==Fe&&!pe&&(n.depthMask(Fe),et=Fe)},setFunc:function(Fe){if(Ce&&(Fe=n$[Fe]),Et!==Fe){switch(Fe){case Nx:n.depthFunc(n.NEVER);break;case Dx:n.depthFunc(n.ALWAYS);break;case Ix:n.depthFunc(n.LESS);break;case wf:n.depthFunc(n.LEQUAL);break;case Px:n.depthFunc(n.EQUAL);break;case Ox:n.depthFunc(n.GEQUAL);break;case Lx:n.depthFunc(n.GREATER);break;case Ux:n.depthFunc(n.NOTEQUAL);break;default:n.depthFunc(n.LEQUAL)}Et=Fe}},setLocked:function(Fe){pe=Fe},setClear:function(Fe){Qe!==Fe&&(Ce&&(Fe=1-Fe),n.clearDepth(Fe),Qe=Fe)},reset:function(){pe=!1,et=null,Et=null,Qe=null,Ce=!1}}}function r(){let pe=!1,Ce=null,et=null,Et=null,Qe=null,Fe=null,gt=null,nn=null,Dn=null;return{setTest:function(Ln){pe||(Ln?Re(n.STENCIL_TEST):rt(n.STENCIL_TEST))},setMask:function(Ln){Ce!==Ln&&!pe&&(n.stencilMask(Ln),Ce=Ln)},setFunc:function(Ln,rr,Lr){(et!==Ln||Et!==rr||Qe!==Lr)&&(n.stencilFunc(Ln,rr,Lr),et=Ln,Et=rr,Qe=Lr)},setOp:function(Ln,rr,Lr){(Fe!==Ln||gt!==rr||nn!==Lr)&&(n.stencilOp(Ln,rr,Lr),Fe=Ln,gt=rr,nn=Lr)},setLocked:function(Ln){pe=Ln},setClear:function(Ln){Dn!==Ln&&(n.clearStencil(Ln),Dn=Ln)},reset:function(){pe=!1,Ce=null,et=null,Et=null,Qe=null,Fe=null,gt=null,nn=null,Dn=null}}}const s=new t,o=new i,u=new r,f=new WeakMap,p=new WeakMap;let m={},v={},_=new WeakMap,x=[],S=null,A=!1,E=null,M=null,C=null,N=null,I=null,U=null,L=null,F=new Ot(0,0,0),H=0,P=!1,k=null,Y=null,ie=null,te=null,le=null;const de=n.getParameter(n.MAX_COMBINED_TEXTURE_IMAGE_UNITS);let Z=!1,Q=0;const ve=n.getParameter(n.VERSION);ve.indexOf("WebGL")!==-1?(Q=parseFloat(/^WebGL (\d)/.exec(ve)[1]),Z=Q>=1):ve.indexOf("OpenGL ES")!==-1&&(Q=parseFloat(/^OpenGL ES (\d)/.exec(ve)[1]),Z=Q>=2);let Te=null,we={};const X=n.getParameter(n.SCISSOR_BOX),ce=n.getParameter(n.VIEWPORT),xe=new mi().fromArray(X),Be=new mi().fromArray(ce);function mt(pe,Ce,et,Et){const Qe=new Uint8Array(4),Fe=n.createTexture();n.bindTexture(pe,Fe),n.texParameteri(pe,n.TEXTURE_MIN_FILTER,n.NEAREST),n.texParameteri(pe,n.TEXTURE_MAG_FILTER,n.NEAREST);for(let gt=0;gt<et;gt++)pe===n.TEXTURE_3D||pe===n.TEXTURE_2D_ARRAY?n.texImage3D(Ce,0,n.RGBA,1,1,Et,0,n.RGBA,n.UNSIGNED_BYTE,Qe):n.texImage2D(Ce+gt,0,n.RGBA,1,1,0,n.RGBA,n.UNSIGNED_BYTE,Qe);return Fe}const ge={};ge[n.TEXTURE_2D]=mt(n.TEXTURE_2D,n.TEXTURE_2D,1),ge[n.TEXTURE_CUBE_MAP]=mt(n.TEXTURE_CUBE_MAP,n.TEXTURE_CUBE_MAP_POSITIVE_X,6),ge[n.TEXTURE_2D_ARRAY]=mt(n.TEXTURE_2D_ARRAY,n.TEXTURE_2D_ARRAY,1,1),ge[n.TEXTURE_3D]=mt(n.TEXTURE_3D,n.TEXTURE_3D,1,1),s.setClear(0,0,0,1),o.setClear(1),u.setClear(0),Re(n.DEPTH_TEST),o.setFunc(wf),He(!1),yt(SM),Re(n.CULL_FACE),ze(Xo);function Re(pe){m[pe]!==!0&&(n.enable(pe),m[pe]=!0)}function rt(pe){m[pe]!==!1&&(n.disable(pe),m[pe]=!1)}function xt(pe,Ce){return v[pe]!==Ce?(n.bindFramebuffer(pe,Ce),v[pe]=Ce,pe===n.DRAW_FRAMEBUFFER&&(v[n.FRAMEBUFFER]=Ce),pe===n.FRAMEBUFFER&&(v[n.DRAW_FRAMEBUFFER]=Ce),!0):!1}function Rt(pe,Ce){let et=x,Et=!1;if(pe){et=_.get(Ce),et===void 0&&(et=[],_.set(Ce,et));const Qe=pe.textures;if(et.length!==Qe.length||et[0]!==n.COLOR_ATTACHMENT0){for(let Fe=0,gt=Qe.length;Fe<gt;Fe++)et[Fe]=n.COLOR_ATTACHMENT0+Fe;et.length=Qe.length,Et=!0}}else et[0]!==n.BACK&&(et[0]=n.BACK,Et=!0);Et&&n.drawBuffers(et)}function hn(pe){return S!==pe?(n.useProgram(pe),S=pe,!0):!1}const En={[Bu]:n.FUNC_ADD,[dP]:n.FUNC_SUBTRACT,[pP]:n.FUNC_REVERSE_SUBTRACT};En[mP]=n.MIN,En[gP]=n.MAX;const $t={[vP]:n.ZERO,[yP]:n.ONE,[_P]:n.SRC_COLOR,[Cx]:n.SRC_ALPHA,[EP]:n.SRC_ALPHA_SATURATE,[wP]:n.DST_COLOR,[bP]:n.DST_ALPHA,[xP]:n.ONE_MINUS_SRC_COLOR,[Rx]:n.ONE_MINUS_SRC_ALPHA,[MP]:n.ONE_MINUS_DST_COLOR,[SP]:n.ONE_MINUS_DST_ALPHA,[TP]:n.CONSTANT_COLOR,[AP]:n.ONE_MINUS_CONSTANT_COLOR,[CP]:n.CONSTANT_ALPHA,[RP]:n.ONE_MINUS_CONSTANT_ALPHA};function ze(pe,Ce,et,Et,Qe,Fe,gt,nn,Dn,Ln){if(pe===Xo){A===!0&&(rt(n.BLEND),A=!1);return}if(A===!1&&(Re(n.BLEND),A=!0),pe!==fP){if(pe!==E||Ln!==P){if((M!==Bu||I!==Bu)&&(n.blendEquation(n.FUNC_ADD),M=Bu,I=Bu),Ln)switch(pe){case xf:n.blendFuncSeparate(n.ONE,n.ONE_MINUS_SRC_ALPHA,n.ONE,n.ONE_MINUS_SRC_ALPHA);break;case Ax:n.blendFunc(n.ONE,n.ONE);break;case wM:n.blendFuncSeparate(n.ZERO,n.ONE_MINUS_SRC_COLOR,n.ZERO,n.ONE);break;case MM:n.blendFuncSeparate(n.DST_COLOR,n.ONE_MINUS_SRC_ALPHA,n.ZERO,n.ONE);break;default:Xt("WebGLState: Invalid blending: ",pe);break}else switch(pe){case xf:n.blendFuncSeparate(n.SRC_ALPHA,n.ONE_MINUS_SRC_ALPHA,n.ONE,n.ONE_MINUS_SRC_ALPHA);break;case Ax:n.blendFuncSeparate(n.SRC_ALPHA,n.ONE,n.ONE,n.ONE);break;case wM:Xt("WebGLState: SubtractiveBlending requires material.premultipliedAlpha = true");break;case MM:Xt("WebGLState: MultiplyBlending requires material.premultipliedAlpha = true");break;default:Xt("WebGLState: Invalid blending: ",pe);break}C=null,N=null,U=null,L=null,F.set(0,0,0),H=0,E=pe,P=Ln}return}Qe=Qe||Ce,Fe=Fe||et,gt=gt||Et,(Ce!==M||Qe!==I)&&(n.blendEquationSeparate(En[Ce],En[Qe]),M=Ce,I=Qe),(et!==C||Et!==N||Fe!==U||gt!==L)&&(n.blendFuncSeparate($t[et],$t[Et],$t[Fe],$t[gt]),C=et,N=Et,U=Fe,L=gt),(nn.equals(F)===!1||Dn!==H)&&(n.blendColor(nn.r,nn.g,nn.b,Dn),F.copy(nn),H=Dn),E=pe,P=!1}function Je(pe,Ce){pe.side===jo?rt(n.CULL_FACE):Re(n.CULL_FACE);let et=pe.side===Vs;Ce&&(et=!et),He(et),pe.blending===xf&&pe.transparent===!1?ze(Xo):ze(pe.blending,pe.blendEquation,pe.blendSrc,pe.blendDst,pe.blendEquationAlpha,pe.blendSrcAlpha,pe.blendDstAlpha,pe.blendColor,pe.blendAlpha,pe.premultipliedAlpha),o.setFunc(pe.depthFunc),o.setTest(pe.depthTest),o.setMask(pe.depthWrite),s.setMask(pe.colorWrite);const Et=pe.stencilWrite;u.setTest(Et),Et&&(u.setMask(pe.stencilWriteMask),u.setFunc(pe.stencilFunc,pe.stencilRef,pe.stencilFuncMask),u.setOp(pe.stencilFail,pe.stencilZFail,pe.stencilZPass)),Ft(pe.polygonOffset,pe.polygonOffsetFactor,pe.polygonOffsetUnits),pe.alphaToCoverage===!0?Re(n.SAMPLE_ALPHA_TO_COVERAGE):rt(n.SAMPLE_ALPHA_TO_COVERAGE)}function He(pe){k!==pe&&(pe?n.frontFace(n.CW):n.frontFace(n.CCW),k=pe)}function yt(pe){pe!==cP?(Re(n.CULL_FACE),pe!==Y&&(pe===SM?n.cullFace(n.BACK):pe===uP?n.cullFace(n.FRONT):n.cullFace(n.FRONT_AND_BACK))):rt(n.CULL_FACE),Y=pe}function ee(pe){pe!==ie&&(Z&&n.lineWidth(pe),ie=pe)}function Ft(pe,Ce,et){pe?(Re(n.POLYGON_OFFSET_FILL),(te!==Ce||le!==et)&&(n.polygonOffset(Ce,et),te=Ce,le=et)):rt(n.POLYGON_OFFSET_FILL)}function St(pe){pe?Re(n.SCISSOR_TEST):rt(n.SCISSOR_TEST)}function Vt(pe){pe===void 0&&(pe=n.TEXTURE0+de-1),Te!==pe&&(n.activeTexture(pe),Te=pe)}function ot(pe,Ce,et){et===void 0&&(Te===null?et=n.TEXTURE0+de-1:et=Te);let Et=we[et];Et===void 0&&(Et={type:void 0,texture:void 0},we[et]=Et),(Et.type!==pe||Et.texture!==Ce)&&(Te!==et&&(n.activeTexture(et),Te=et),n.bindTexture(pe,Ce||ge[pe]),Et.type=pe,Et.texture=Ce)}function $(){const pe=we[Te];pe!==void 0&&pe.type!==void 0&&(n.bindTexture(pe.type,null),pe.type=void 0,pe.texture=void 0)}function B(){try{n.compressedTexImage2D(...arguments)}catch(pe){Xt("WebGLState:",pe)}}function fe(){try{n.compressedTexImage3D(...arguments)}catch(pe){Xt("WebGLState:",pe)}}function Ie(){try{n.texSubImage2D(...arguments)}catch(pe){Xt("WebGLState:",pe)}}function Ge(){try{n.texSubImage3D(...arguments)}catch(pe){Xt("WebGLState:",pe)}}function De(){try{n.compressedTexSubImage2D(...arguments)}catch(pe){Xt("WebGLState:",pe)}}function Tt(){try{n.compressedTexSubImage3D(...arguments)}catch(pe){Xt("WebGLState:",pe)}}function ht(){try{n.texStorage2D(...arguments)}catch(pe){Xt("WebGLState:",pe)}}function Lt(){try{n.texStorage3D(...arguments)}catch(pe){Xt("WebGLState:",pe)}}function Yt(){try{n.texImage2D(...arguments)}catch(pe){Xt("WebGLState:",pe)}}function Xe(){try{n.texImage3D(...arguments)}catch(pe){Xt("WebGLState:",pe)}}function $e(pe){xe.equals(pe)===!1&&(n.scissor(pe.x,pe.y,pe.z,pe.w),xe.copy(pe))}function Ct(pe){Be.equals(pe)===!1&&(n.viewport(pe.x,pe.y,pe.z,pe.w),Be.copy(pe))}function wt(pe,Ce){let et=p.get(Ce);et===void 0&&(et=new WeakMap,p.set(Ce,et));let Et=et.get(pe);Et===void 0&&(Et=n.getUniformBlockIndex(Ce,pe.name),et.set(pe,Et))}function st(pe,Ce){const Et=p.get(Ce).get(pe);f.get(Ce)!==Et&&(n.uniformBlockBinding(Ce,Et,pe.__bindingPointIndex),f.set(Ce,Et))}function jt(){n.disable(n.BLEND),n.disable(n.CULL_FACE),n.disable(n.DEPTH_TEST),n.disable(n.POLYGON_OFFSET_FILL),n.disable(n.SCISSOR_TEST),n.disable(n.STENCIL_TEST),n.disable(n.SAMPLE_ALPHA_TO_COVERAGE),n.blendEquation(n.FUNC_ADD),n.blendFunc(n.ONE,n.ZERO),n.blendFuncSeparate(n.ONE,n.ZERO,n.ONE,n.ZERO),n.blendColor(0,0,0,0),n.colorMask(!0,!0,!0,!0),n.clearColor(0,0,0,0),n.depthMask(!0),n.depthFunc(n.LESS),o.setReversed(!1),n.clearDepth(1),n.stencilMask(4294967295),n.stencilFunc(n.ALWAYS,0,4294967295),n.stencilOp(n.KEEP,n.KEEP,n.KEEP),n.clearStencil(0),n.cullFace(n.BACK),n.frontFace(n.CCW),n.polygonOffset(0,0),n.activeTexture(n.TEXTURE0),n.bindFramebuffer(n.FRAMEBUFFER,null),n.bindFramebuffer(n.DRAW_FRAMEBUFFER,null),n.bindFramebuffer(n.READ_FRAMEBUFFER,null),n.useProgram(null),n.lineWidth(1),n.scissor(0,0,n.canvas.width,n.canvas.height),n.viewport(0,0,n.canvas.width,n.canvas.height),m={},Te=null,we={},v={},_=new WeakMap,x=[],S=null,A=!1,E=null,M=null,C=null,N=null,I=null,U=null,L=null,F=new Ot(0,0,0),H=0,P=!1,k=null,Y=null,ie=null,te=null,le=null,xe.set(0,0,n.canvas.width,n.canvas.height),Be.set(0,0,n.canvas.width,n.canvas.height),s.reset(),o.reset(),u.reset()}return{buffers:{color:s,depth:o,stencil:u},enable:Re,disable:rt,bindFramebuffer:xt,drawBuffers:Rt,useProgram:hn,setBlending:ze,setMaterial:Je,setFlipSided:He,setCullFace:yt,setLineWidth:ee,setPolygonOffset:Ft,setScissorTest:St,activeTexture:Vt,bindTexture:ot,unbindTexture:$,compressedTexImage2D:B,compressedTexImage3D:fe,texImage2D:Yt,texImage3D:Xe,updateUBOMapping:wt,uniformBlockBinding:st,texStorage2D:ht,texStorage3D:Lt,texSubImage2D:Ie,texSubImage3D:Ge,compressedTexSubImage2D:De,compressedTexSubImage3D:Tt,scissor:$e,viewport:Ct,reset:jt}}function r$(n,e,t,i,r,s,o){const u=e.has("WEBGL_multisampled_render_to_texture")?e.get("WEBGL_multisampled_render_to_texture"):null,f=typeof navigator>"u"?!1:/OculusBrowser/g.test(navigator.userAgent),p=new Ye,m=new WeakMap;let v;const _=new WeakMap;let x=!1;try{x=typeof OffscreenCanvas<"u"&&new OffscreenCanvas(1,1).getContext("2d")!==null}catch{}function S($,B){return x?new OffscreenCanvas($,B):k0("canvas")}function A($,B,fe){let Ie=1;const Ge=ot($);if((Ge.width>fe||Ge.height>fe)&&(Ie=fe/Math.max(Ge.width,Ge.height)),Ie<1)if(typeof HTMLImageElement<"u"&&$ instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&$ instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&$ instanceof ImageBitmap||typeof VideoFrame<"u"&&$ instanceof VideoFrame){const De=Math.floor(Ie*Ge.width),Tt=Math.floor(Ie*Ge.height);v===void 0&&(v=S(De,Tt));const ht=B?S(De,Tt):v;return ht.width=De,ht.height=Tt,ht.getContext("2d").drawImage($,0,0,De,Tt),At("WebGLRenderer: Texture has been resized from ("+Ge.width+"x"+Ge.height+") to ("+De+"x"+Tt+")."),ht}else return"data"in $&&At("WebGLRenderer: Image in DataTexture is too big ("+Ge.width+"x"+Ge.height+")."),$;return $}function E($){return $.generateMipmaps}function M($){n.generateMipmap($)}function C($){return $.isWebGLCubeRenderTarget?n.TEXTURE_CUBE_MAP:$.isWebGL3DRenderTarget?n.TEXTURE_3D:$.isWebGLArrayRenderTarget||$.isCompressedArrayTexture?n.TEXTURE_2D_ARRAY:n.TEXTURE_2D}function N($,B,fe,Ie,Ge=!1){if($!==null){if(n[$]!==void 0)return n[$];At("WebGLRenderer: Attempt to use non-existing WebGL internal format '"+$+"'")}let De=B;if(B===n.RED&&(fe===n.FLOAT&&(De=n.R32F),fe===n.HALF_FLOAT&&(De=n.R16F),fe===n.UNSIGNED_BYTE&&(De=n.R8)),B===n.RED_INTEGER&&(fe===n.UNSIGNED_BYTE&&(De=n.R8UI),fe===n.UNSIGNED_SHORT&&(De=n.R16UI),fe===n.UNSIGNED_INT&&(De=n.R32UI),fe===n.BYTE&&(De=n.R8I),fe===n.SHORT&&(De=n.R16I),fe===n.INT&&(De=n.R32I)),B===n.RG&&(fe===n.FLOAT&&(De=n.RG32F),fe===n.HALF_FLOAT&&(De=n.RG16F),fe===n.UNSIGNED_BYTE&&(De=n.RG8)),B===n.RG_INTEGER&&(fe===n.UNSIGNED_BYTE&&(De=n.RG8UI),fe===n.UNSIGNED_SHORT&&(De=n.RG16UI),fe===n.UNSIGNED_INT&&(De=n.RG32UI),fe===n.BYTE&&(De=n.RG8I),fe===n.SHORT&&(De=n.RG16I),fe===n.INT&&(De=n.RG32I)),B===n.RGB_INTEGER&&(fe===n.UNSIGNED_BYTE&&(De=n.RGB8UI),fe===n.UNSIGNED_SHORT&&(De=n.RGB16UI),fe===n.UNSIGNED_INT&&(De=n.RGB32UI),fe===n.BYTE&&(De=n.RGB8I),fe===n.SHORT&&(De=n.RGB16I),fe===n.INT&&(De=n.RGB32I)),B===n.RGBA_INTEGER&&(fe===n.UNSIGNED_BYTE&&(De=n.RGBA8UI),fe===n.UNSIGNED_SHORT&&(De=n.RGBA16UI),fe===n.UNSIGNED_INT&&(De=n.RGBA32UI),fe===n.BYTE&&(De=n.RGBA8I),fe===n.SHORT&&(De=n.RGBA16I),fe===n.INT&&(De=n.RGBA32I)),B===n.RGB&&(fe===n.UNSIGNED_INT_5_9_9_9_REV&&(De=n.RGB9_E5),fe===n.UNSIGNED_INT_10F_11F_11F_REV&&(De=n.R11F_G11F_B10F)),B===n.RGBA){const Tt=Ge?L0:Hn.getTransfer(Ie);fe===n.FLOAT&&(De=n.RGBA32F),fe===n.HALF_FLOAT&&(De=n.RGBA16F),fe===n.UNSIGNED_BYTE&&(De=Tt===ri?n.SRGB8_ALPHA8:n.RGBA8),fe===n.UNSIGNED_SHORT_4_4_4_4&&(De=n.RGBA4),fe===n.UNSIGNED_SHORT_5_5_5_1&&(De=n.RGB5_A1)}return(De===n.R16F||De===n.R32F||De===n.RG16F||De===n.RG32F||De===n.RGBA16F||De===n.RGBA32F)&&e.get("EXT_color_buffer_float"),De}function I($,B){let fe;return $?B===null||B===Aa||B===Lp?fe=n.DEPTH24_STENCIL8:B===ki?fe=n.DEPTH32F_STENCIL8:B===Op&&(fe=n.DEPTH24_STENCIL8,At("DepthTexture: 16 bit depth attachment is not supported with stencil. Using 24-bit attachment.")):B===null||B===Aa||B===Lp?fe=n.DEPTH_COMPONENT24:B===ki?fe=n.DEPTH_COMPONENT32F:B===Op&&(fe=n.DEPTH_COMPONENT16),fe}function U($,B){return E($)===!0||$.isFramebufferTexture&&$.minFilter!==dr&&$.minFilter!==Wn?Math.log2(Math.max(B.width,B.height))+1:$.mipmaps!==void 0&&$.mipmaps.length>0?$.mipmaps.length:$.isCompressedTexture&&Array.isArray($.image)?B.mipmaps.length:1}function L($){const B=$.target;B.removeEventListener("dispose",L),H(B),B.isVideoTexture&&m.delete(B)}function F($){const B=$.target;B.removeEventListener("dispose",F),k(B)}function H($){const B=i.get($);if(B.__webglInit===void 0)return;const fe=$.source,Ie=_.get(fe);if(Ie){const Ge=Ie[B.__cacheKey];Ge.usedTimes--,Ge.usedTimes===0&&P($),Object.keys(Ie).length===0&&_.delete(fe)}i.remove($)}function P($){const B=i.get($);n.deleteTexture(B.__webglTexture);const fe=$.source,Ie=_.get(fe);delete Ie[B.__cacheKey],o.memory.textures--}function k($){const B=i.get($);if($.depthTexture&&($.depthTexture.dispose(),i.remove($.depthTexture)),$.isWebGLCubeRenderTarget)for(let Ie=0;Ie<6;Ie++){if(Array.isArray(B.__webglFramebuffer[Ie]))for(let Ge=0;Ge<B.__webglFramebuffer[Ie].length;Ge++)n.deleteFramebuffer(B.__webglFramebuffer[Ie][Ge]);else n.deleteFramebuffer(B.__webglFramebuffer[Ie]);B.__webglDepthbuffer&&n.deleteRenderbuffer(B.__webglDepthbuffer[Ie])}else{if(Array.isArray(B.__webglFramebuffer))for(let Ie=0;Ie<B.__webglFramebuffer.length;Ie++)n.deleteFramebuffer(B.__webglFramebuffer[Ie]);else n.deleteFramebuffer(B.__webglFramebuffer);if(B.__webglDepthbuffer&&n.deleteRenderbuffer(B.__webglDepthbuffer),B.__webglMultisampledFramebuffer&&n.deleteFramebuffer(B.__webglMultisampledFramebuffer),B.__webglColorRenderbuffer)for(let Ie=0;Ie<B.__webglColorRenderbuffer.length;Ie++)B.__webglColorRenderbuffer[Ie]&&n.deleteRenderbuffer(B.__webglColorRenderbuffer[Ie]);B.__webglDepthRenderbuffer&&n.deleteRenderbuffer(B.__webglDepthRenderbuffer)}const fe=$.textures;for(let Ie=0,Ge=fe.length;Ie<Ge;Ie++){const De=i.get(fe[Ie]);De.__webglTexture&&(n.deleteTexture(De.__webglTexture),o.memory.textures--),i.remove(fe[Ie])}i.remove($)}let Y=0;function ie(){Y=0}function te(){const $=Y;return $>=r.maxTextures&&At("WebGLTextures: Trying to use "+$+" texture units while this GPU supports only "+r.maxTextures),Y+=1,$}function le($){const B=[];return B.push($.wrapS),B.push($.wrapT),B.push($.wrapR||0),B.push($.magFilter),B.push($.minFilter),B.push($.anisotropy),B.push($.internalFormat),B.push($.format),B.push($.type),B.push($.generateMipmaps),B.push($.premultiplyAlpha),B.push($.flipY),B.push($.unpackAlignment),B.push($.colorSpace),B.join()}function de($,B){const fe=i.get($);if($.isVideoTexture&&St($),$.isRenderTargetTexture===!1&&$.isExternalTexture!==!0&&$.version>0&&fe.__version!==$.version){const Ie=$.image;if(Ie===null)At("WebGLRenderer: Texture marked for update but no image data found.");else if(Ie.complete===!1)At("WebGLRenderer: Texture marked for update but image is incomplete");else{ge(fe,$,B);return}}else $.isExternalTexture&&(fe.__webglTexture=$.sourceTexture?$.sourceTexture:null);t.bindTexture(n.TEXTURE_2D,fe.__webglTexture,n.TEXTURE0+B)}function Z($,B){const fe=i.get($);if($.isRenderTargetTexture===!1&&$.version>0&&fe.__version!==$.version){ge(fe,$,B);return}else $.isExternalTexture&&(fe.__webglTexture=$.sourceTexture?$.sourceTexture:null);t.bindTexture(n.TEXTURE_2D_ARRAY,fe.__webglTexture,n.TEXTURE0+B)}function Q($,B){const fe=i.get($);if($.isRenderTargetTexture===!1&&$.version>0&&fe.__version!==$.version){ge(fe,$,B);return}t.bindTexture(n.TEXTURE_3D,fe.__webglTexture,n.TEXTURE0+B)}function ve($,B){const fe=i.get($);if($.isCubeDepthTexture!==!0&&$.version>0&&fe.__version!==$.version){Re(fe,$,B);return}t.bindTexture(n.TEXTURE_CUBE_MAP,fe.__webglTexture,n.TEXTURE0+B)}const Te={[D0]:n.REPEAT,[nr]:n.CLAMP_TO_EDGE,[I0]:n.MIRRORED_REPEAT},we={[dr]:n.NEAREST,[HE]:n.NEAREST_MIPMAP_NEAREST,[wp]:n.NEAREST_MIPMAP_LINEAR,[Wn]:n.LINEAR,[o0]:n.LINEAR_MIPMAP_NEAREST,[Il]:n.LINEAR_MIPMAP_LINEAR},X={[BP]:n.NEVER,[GP]:n.ALWAYS,[zP]:n.LESS,[Wb]:n.LEQUAL,[FP]:n.EQUAL,[qb]:n.GEQUAL,[VP]:n.GREATER,[HP]:n.NOTEQUAL};function ce($,B){if(B.type===ki&&e.has("OES_texture_float_linear")===!1&&(B.magFilter===Wn||B.magFilter===o0||B.magFilter===wp||B.magFilter===Il||B.minFilter===Wn||B.minFilter===o0||B.minFilter===wp||B.minFilter===Il)&&At("WebGLRenderer: Unable to use linear filtering with floating point textures. OES_texture_float_linear not supported on this device."),n.texParameteri($,n.TEXTURE_WRAP_S,Te[B.wrapS]),n.texParameteri($,n.TEXTURE_WRAP_T,Te[B.wrapT]),($===n.TEXTURE_3D||$===n.TEXTURE_2D_ARRAY)&&n.texParameteri($,n.TEXTURE_WRAP_R,Te[B.wrapR]),n.texParameteri($,n.TEXTURE_MAG_FILTER,we[B.magFilter]),n.texParameteri($,n.TEXTURE_MIN_FILTER,we[B.minFilter]),B.compareFunction&&(n.texParameteri($,n.TEXTURE_COMPARE_MODE,n.COMPARE_REF_TO_TEXTURE),n.texParameteri($,n.TEXTURE_COMPARE_FUNC,X[B.compareFunction])),e.has("EXT_texture_filter_anisotropic")===!0){if(B.magFilter===dr||B.minFilter!==wp&&B.minFilter!==Il||B.type===ki&&e.has("OES_texture_float_linear")===!1)return;if(B.anisotropy>1||i.get(B).__currentAnisotropy){const fe=e.get("EXT_texture_filter_anisotropic");n.texParameterf($,fe.TEXTURE_MAX_ANISOTROPY_EXT,Math.min(B.anisotropy,r.getMaxAnisotropy())),i.get(B).__currentAnisotropy=B.anisotropy}}}function xe($,B){let fe=!1;$.__webglInit===void 0&&($.__webglInit=!0,B.addEventListener("dispose",L));const Ie=B.source;let Ge=_.get(Ie);Ge===void 0&&(Ge={},_.set(Ie,Ge));const De=le(B);if(De!==$.__cacheKey){Ge[De]===void 0&&(Ge[De]={texture:n.createTexture(),usedTimes:0},o.memory.textures++,fe=!0),Ge[De].usedTimes++;const Tt=Ge[$.__cacheKey];Tt!==void 0&&(Ge[$.__cacheKey].usedTimes--,Tt.usedTimes===0&&P(B)),$.__cacheKey=De,$.__webglTexture=Ge[De].texture}return fe}function Be($,B,fe){return Math.floor(Math.floor($/fe)/B)}function mt($,B,fe,Ie){const De=$.updateRanges;if(De.length===0)t.texSubImage2D(n.TEXTURE_2D,0,0,0,B.width,B.height,fe,Ie,B.data);else{De.sort((Xe,$e)=>Xe.start-$e.start);let Tt=0;for(let Xe=1;Xe<De.length;Xe++){const $e=De[Tt],Ct=De[Xe],wt=$e.start+$e.count,st=Be(Ct.start,B.width,4),jt=Be($e.start,B.width,4);Ct.start<=wt+1&&st===jt&&Be(Ct.start+Ct.count-1,B.width,4)===st?$e.count=Math.max($e.count,Ct.start+Ct.count-$e.start):(++Tt,De[Tt]=Ct)}De.length=Tt+1;const ht=n.getParameter(n.UNPACK_ROW_LENGTH),Lt=n.getParameter(n.UNPACK_SKIP_PIXELS),Yt=n.getParameter(n.UNPACK_SKIP_ROWS);n.pixelStorei(n.UNPACK_ROW_LENGTH,B.width);for(let Xe=0,$e=De.length;Xe<$e;Xe++){const Ct=De[Xe],wt=Math.floor(Ct.start/4),st=Math.ceil(Ct.count/4),jt=wt%B.width,pe=Math.floor(wt/B.width),Ce=st,et=1;n.pixelStorei(n.UNPACK_SKIP_PIXELS,jt),n.pixelStorei(n.UNPACK_SKIP_ROWS,pe),t.texSubImage2D(n.TEXTURE_2D,0,jt,pe,Ce,et,fe,Ie,B.data)}$.clearUpdateRanges(),n.pixelStorei(n.UNPACK_ROW_LENGTH,ht),n.pixelStorei(n.UNPACK_SKIP_PIXELS,Lt),n.pixelStorei(n.UNPACK_SKIP_ROWS,Yt)}}function ge($,B,fe){let Ie=n.TEXTURE_2D;(B.isDataArrayTexture||B.isCompressedArrayTexture)&&(Ie=n.TEXTURE_2D_ARRAY),B.isData3DTexture&&(Ie=n.TEXTURE_3D);const Ge=xe($,B),De=B.source;t.bindTexture(Ie,$.__webglTexture,n.TEXTURE0+fe);const Tt=i.get(De);if(De.version!==Tt.__version||Ge===!0){t.activeTexture(n.TEXTURE0+fe);const ht=Hn.getPrimaries(Hn.workingColorSpace),Lt=B.colorSpace===Ec?null:Hn.getPrimaries(B.colorSpace),Yt=B.colorSpace===Ec||ht===Lt?n.NONE:n.BROWSER_DEFAULT_WEBGL;n.pixelStorei(n.UNPACK_FLIP_Y_WEBGL,B.flipY),n.pixelStorei(n.UNPACK_PREMULTIPLY_ALPHA_WEBGL,B.premultiplyAlpha),n.pixelStorei(n.UNPACK_ALIGNMENT,B.unpackAlignment),n.pixelStorei(n.UNPACK_COLORSPACE_CONVERSION_WEBGL,Yt);let Xe=A(B.image,!1,r.maxTextureSize);Xe=Vt(B,Xe);const $e=s.convert(B.format,B.colorSpace),Ct=s.convert(B.type);let wt=N(B.internalFormat,$e,Ct,B.colorSpace,B.isVideoTexture);ce(Ie,B);let st;const jt=B.mipmaps,pe=B.isVideoTexture!==!0,Ce=Tt.__version===void 0||Ge===!0,et=De.dataReady,Et=U(B,Xe);if(B.isDepthTexture)wt=I(B.format===Fu,B.type),Ce&&(pe?t.texStorage2D(n.TEXTURE_2D,1,wt,Xe.width,Xe.height):t.texImage2D(n.TEXTURE_2D,0,wt,Xe.width,Xe.height,0,$e,Ct,null));else if(B.isDataTexture)if(jt.length>0){pe&&Ce&&t.texStorage2D(n.TEXTURE_2D,Et,wt,jt[0].width,jt[0].height);for(let Qe=0,Fe=jt.length;Qe<Fe;Qe++)st=jt[Qe],pe?et&&t.texSubImage2D(n.TEXTURE_2D,Qe,0,0,st.width,st.height,$e,Ct,st.data):t.texImage2D(n.TEXTURE_2D,Qe,wt,st.width,st.height,0,$e,Ct,st.data);B.generateMipmaps=!1}else pe?(Ce&&t.texStorage2D(n.TEXTURE_2D,Et,wt,Xe.width,Xe.height),et&&mt(B,Xe,$e,Ct)):t.texImage2D(n.TEXTURE_2D,0,wt,Xe.width,Xe.height,0,$e,Ct,Xe.data);else if(B.isCompressedTexture)if(B.isCompressedArrayTexture){pe&&Ce&&t.texStorage3D(n.TEXTURE_2D_ARRAY,Et,wt,jt[0].width,jt[0].height,Xe.depth);for(let Qe=0,Fe=jt.length;Qe<Fe;Qe++)if(st=jt[Qe],B.format!==pr)if($e!==null)if(pe){if(et)if(B.layerUpdates.size>0){const gt=LM(st.width,st.height,B.format,B.type);for(const nn of B.layerUpdates){const Dn=st.data.subarray(nn*gt/st.data.BYTES_PER_ELEMENT,(nn+1)*gt/st.data.BYTES_PER_ELEMENT);t.compressedTexSubImage3D(n.TEXTURE_2D_ARRAY,Qe,0,0,nn,st.width,st.height,1,$e,Dn)}B.clearLayerUpdates()}else t.compressedTexSubImage3D(n.TEXTURE_2D_ARRAY,Qe,0,0,0,st.width,st.height,Xe.depth,$e,st.data)}else t.compressedTexImage3D(n.TEXTURE_2D_ARRAY,Qe,wt,st.width,st.height,Xe.depth,0,st.data,0,0);else At("WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()");else pe?et&&t.texSubImage3D(n.TEXTURE_2D_ARRAY,Qe,0,0,0,st.width,st.height,Xe.depth,$e,Ct,st.data):t.texImage3D(n.TEXTURE_2D_ARRAY,Qe,wt,st.width,st.height,Xe.depth,0,$e,Ct,st.data)}else{pe&&Ce&&t.texStorage2D(n.TEXTURE_2D,Et,wt,jt[0].width,jt[0].height);for(let Qe=0,Fe=jt.length;Qe<Fe;Qe++)st=jt[Qe],B.format!==pr?$e!==null?pe?et&&t.compressedTexSubImage2D(n.TEXTURE_2D,Qe,0,0,st.width,st.height,$e,st.data):t.compressedTexImage2D(n.TEXTURE_2D,Qe,wt,st.width,st.height,0,st.data):At("WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):pe?et&&t.texSubImage2D(n.TEXTURE_2D,Qe,0,0,st.width,st.height,$e,Ct,st.data):t.texImage2D(n.TEXTURE_2D,Qe,wt,st.width,st.height,0,$e,Ct,st.data)}else if(B.isDataArrayTexture)if(pe){if(Ce&&t.texStorage3D(n.TEXTURE_2D_ARRAY,Et,wt,Xe.width,Xe.height,Xe.depth),et)if(B.layerUpdates.size>0){const Qe=LM(Xe.width,Xe.height,B.format,B.type);for(const Fe of B.layerUpdates){const gt=Xe.data.subarray(Fe*Qe/Xe.data.BYTES_PER_ELEMENT,(Fe+1)*Qe/Xe.data.BYTES_PER_ELEMENT);t.texSubImage3D(n.TEXTURE_2D_ARRAY,0,0,0,Fe,Xe.width,Xe.height,1,$e,Ct,gt)}B.clearLayerUpdates()}else t.texSubImage3D(n.TEXTURE_2D_ARRAY,0,0,0,0,Xe.width,Xe.height,Xe.depth,$e,Ct,Xe.data)}else t.texImage3D(n.TEXTURE_2D_ARRAY,0,wt,Xe.width,Xe.height,Xe.depth,0,$e,Ct,Xe.data);else if(B.isData3DTexture)pe?(Ce&&t.texStorage3D(n.TEXTURE_3D,Et,wt,Xe.width,Xe.height,Xe.depth),et&&t.texSubImage3D(n.TEXTURE_3D,0,0,0,0,Xe.width,Xe.height,Xe.depth,$e,Ct,Xe.data)):t.texImage3D(n.TEXTURE_3D,0,wt,Xe.width,Xe.height,Xe.depth,0,$e,Ct,Xe.data);else if(B.isFramebufferTexture){if(Ce)if(pe)t.texStorage2D(n.TEXTURE_2D,Et,wt,Xe.width,Xe.height);else{let Qe=Xe.width,Fe=Xe.height;for(let gt=0;gt<Et;gt++)t.texImage2D(n.TEXTURE_2D,gt,wt,Qe,Fe,0,$e,Ct,null),Qe>>=1,Fe>>=1}}else if(jt.length>0){if(pe&&Ce){const Qe=ot(jt[0]);t.texStorage2D(n.TEXTURE_2D,Et,wt,Qe.width,Qe.height)}for(let Qe=0,Fe=jt.length;Qe<Fe;Qe++)st=jt[Qe],pe?et&&t.texSubImage2D(n.TEXTURE_2D,Qe,0,0,$e,Ct,st):t.texImage2D(n.TEXTURE_2D,Qe,wt,$e,Ct,st);B.generateMipmaps=!1}else if(pe){if(Ce){const Qe=ot(Xe);t.texStorage2D(n.TEXTURE_2D,Et,wt,Qe.width,Qe.height)}et&&t.texSubImage2D(n.TEXTURE_2D,0,0,0,$e,Ct,Xe)}else t.texImage2D(n.TEXTURE_2D,0,wt,$e,Ct,Xe);E(B)&&M(Ie),Tt.__version=De.version,B.onUpdate&&B.onUpdate(B)}$.__version=B.version}function Re($,B,fe){if(B.image.length!==6)return;const Ie=xe($,B),Ge=B.source;t.bindTexture(n.TEXTURE_CUBE_MAP,$.__webglTexture,n.TEXTURE0+fe);const De=i.get(Ge);if(Ge.version!==De.__version||Ie===!0){t.activeTexture(n.TEXTURE0+fe);const Tt=Hn.getPrimaries(Hn.workingColorSpace),ht=B.colorSpace===Ec?null:Hn.getPrimaries(B.colorSpace),Lt=B.colorSpace===Ec||Tt===ht?n.NONE:n.BROWSER_DEFAULT_WEBGL;n.pixelStorei(n.UNPACK_FLIP_Y_WEBGL,B.flipY),n.pixelStorei(n.UNPACK_PREMULTIPLY_ALPHA_WEBGL,B.premultiplyAlpha),n.pixelStorei(n.UNPACK_ALIGNMENT,B.unpackAlignment),n.pixelStorei(n.UNPACK_COLORSPACE_CONVERSION_WEBGL,Lt);const Yt=B.isCompressedTexture||B.image[0].isCompressedTexture,Xe=B.image[0]&&B.image[0].isDataTexture,$e=[];for(let Fe=0;Fe<6;Fe++)!Yt&&!Xe?$e[Fe]=A(B.image[Fe],!0,r.maxCubemapSize):$e[Fe]=Xe?B.image[Fe].image:B.image[Fe],$e[Fe]=Vt(B,$e[Fe]);const Ct=$e[0],wt=s.convert(B.format,B.colorSpace),st=s.convert(B.type),jt=N(B.internalFormat,wt,st,B.colorSpace),pe=B.isVideoTexture!==!0,Ce=De.__version===void 0||Ie===!0,et=Ge.dataReady;let Et=U(B,Ct);ce(n.TEXTURE_CUBE_MAP,B);let Qe;if(Yt){pe&&Ce&&t.texStorage2D(n.TEXTURE_CUBE_MAP,Et,jt,Ct.width,Ct.height);for(let Fe=0;Fe<6;Fe++){Qe=$e[Fe].mipmaps;for(let gt=0;gt<Qe.length;gt++){const nn=Qe[gt];B.format!==pr?wt!==null?pe?et&&t.compressedTexSubImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+Fe,gt,0,0,nn.width,nn.height,wt,nn.data):t.compressedTexImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+Fe,gt,jt,nn.width,nn.height,0,nn.data):At("WebGLRenderer: Attempt to load unsupported compressed texture format in .setTextureCube()"):pe?et&&t.texSubImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+Fe,gt,0,0,nn.width,nn.height,wt,st,nn.data):t.texImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+Fe,gt,jt,nn.width,nn.height,0,wt,st,nn.data)}}}else{if(Qe=B.mipmaps,pe&&Ce){Qe.length>0&&Et++;const Fe=ot($e[0]);t.texStorage2D(n.TEXTURE_CUBE_MAP,Et,jt,Fe.width,Fe.height)}for(let Fe=0;Fe<6;Fe++)if(Xe){pe?et&&t.texSubImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+Fe,0,0,0,$e[Fe].width,$e[Fe].height,wt,st,$e[Fe].data):t.texImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+Fe,0,jt,$e[Fe].width,$e[Fe].height,0,wt,st,$e[Fe].data);for(let gt=0;gt<Qe.length;gt++){const Dn=Qe[gt].image[Fe].image;pe?et&&t.texSubImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+Fe,gt+1,0,0,Dn.width,Dn.height,wt,st,Dn.data):t.texImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+Fe,gt+1,jt,Dn.width,Dn.height,0,wt,st,Dn.data)}}else{pe?et&&t.texSubImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+Fe,0,0,0,wt,st,$e[Fe]):t.texImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+Fe,0,jt,wt,st,$e[Fe]);for(let gt=0;gt<Qe.length;gt++){const nn=Qe[gt];pe?et&&t.texSubImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+Fe,gt+1,0,0,wt,st,nn.image[Fe]):t.texImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+Fe,gt+1,jt,wt,st,nn.image[Fe])}}}E(B)&&M(n.TEXTURE_CUBE_MAP),De.__version=Ge.version,B.onUpdate&&B.onUpdate(B)}$.__version=B.version}function rt($,B,fe,Ie,Ge,De){const Tt=s.convert(fe.format,fe.colorSpace),ht=s.convert(fe.type),Lt=N(fe.internalFormat,Tt,ht,fe.colorSpace),Yt=i.get(B),Xe=i.get(fe);if(Xe.__renderTarget=B,!Yt.__hasExternalTextures){const $e=Math.max(1,B.width>>De),Ct=Math.max(1,B.height>>De);Ge===n.TEXTURE_3D||Ge===n.TEXTURE_2D_ARRAY?t.texImage3D(Ge,De,Lt,$e,Ct,B.depth,0,Tt,ht,null):t.texImage2D(Ge,De,Lt,$e,Ct,0,Tt,ht,null)}t.bindFramebuffer(n.FRAMEBUFFER,$),Ft(B)?u.framebufferTexture2DMultisampleEXT(n.FRAMEBUFFER,Ie,Ge,Xe.__webglTexture,0,ee(B)):(Ge===n.TEXTURE_2D||Ge>=n.TEXTURE_CUBE_MAP_POSITIVE_X&&Ge<=n.TEXTURE_CUBE_MAP_NEGATIVE_Z)&&n.framebufferTexture2D(n.FRAMEBUFFER,Ie,Ge,Xe.__webglTexture,De),t.bindFramebuffer(n.FRAMEBUFFER,null)}function xt($,B,fe){if(n.bindRenderbuffer(n.RENDERBUFFER,$),B.depthBuffer){const Ie=B.depthTexture,Ge=Ie&&Ie.isDepthTexture?Ie.type:null,De=I(B.stencilBuffer,Ge),Tt=B.stencilBuffer?n.DEPTH_STENCIL_ATTACHMENT:n.DEPTH_ATTACHMENT;Ft(B)?u.renderbufferStorageMultisampleEXT(n.RENDERBUFFER,ee(B),De,B.width,B.height):fe?n.renderbufferStorageMultisample(n.RENDERBUFFER,ee(B),De,B.width,B.height):n.renderbufferStorage(n.RENDERBUFFER,De,B.width,B.height),n.framebufferRenderbuffer(n.FRAMEBUFFER,Tt,n.RENDERBUFFER,$)}else{const Ie=B.textures;for(let Ge=0;Ge<Ie.length;Ge++){const De=Ie[Ge],Tt=s.convert(De.format,De.colorSpace),ht=s.convert(De.type),Lt=N(De.internalFormat,Tt,ht,De.colorSpace);Ft(B)?u.renderbufferStorageMultisampleEXT(n.RENDERBUFFER,ee(B),Lt,B.width,B.height):fe?n.renderbufferStorageMultisample(n.RENDERBUFFER,ee(B),Lt,B.width,B.height):n.renderbufferStorage(n.RENDERBUFFER,Lt,B.width,B.height)}}n.bindRenderbuffer(n.RENDERBUFFER,null)}function Rt($,B,fe){const Ie=B.isWebGLCubeRenderTarget===!0;if(t.bindFramebuffer(n.FRAMEBUFFER,$),!(B.depthTexture&&B.depthTexture.isDepthTexture))throw new Error("renderTarget.depthTexture must be an instance of THREE.DepthTexture");const Ge=i.get(B.depthTexture);if(Ge.__renderTarget=B,(!Ge.__webglTexture||B.depthTexture.image.width!==B.width||B.depthTexture.image.height!==B.height)&&(B.depthTexture.image.width=B.width,B.depthTexture.image.height=B.height,B.depthTexture.needsUpdate=!0),Ie){if(Ge.__webglInit===void 0&&(Ge.__webglInit=!0,B.depthTexture.addEventListener("dispose",L)),Ge.__webglTexture===void 0){Ge.__webglTexture=n.createTexture(),t.bindTexture(n.TEXTURE_CUBE_MAP,Ge.__webglTexture),ce(n.TEXTURE_CUBE_MAP,B.depthTexture);const Yt=s.convert(B.depthTexture.format),Xe=s.convert(B.depthTexture.type);let $e;B.depthTexture.format===Bl?$e=n.DEPTH_COMPONENT24:B.depthTexture.format===Fu&&($e=n.DEPTH24_STENCIL8);for(let Ct=0;Ct<6;Ct++)n.texImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+Ct,0,$e,B.width,B.height,0,Yt,Xe,null)}}else de(B.depthTexture,0);const De=Ge.__webglTexture,Tt=ee(B),ht=Ie?n.TEXTURE_CUBE_MAP_POSITIVE_X+fe:n.TEXTURE_2D,Lt=B.depthTexture.format===Fu?n.DEPTH_STENCIL_ATTACHMENT:n.DEPTH_ATTACHMENT;if(B.depthTexture.format===Bl)Ft(B)?u.framebufferTexture2DMultisampleEXT(n.FRAMEBUFFER,Lt,ht,De,0,Tt):n.framebufferTexture2D(n.FRAMEBUFFER,Lt,ht,De,0);else if(B.depthTexture.format===Fu)Ft(B)?u.framebufferTexture2DMultisampleEXT(n.FRAMEBUFFER,Lt,ht,De,0,Tt):n.framebufferTexture2D(n.FRAMEBUFFER,Lt,ht,De,0);else throw new Error("Unknown depthTexture format")}function hn($){const B=i.get($),fe=$.isWebGLCubeRenderTarget===!0;if(B.__boundDepthTexture!==$.depthTexture){const Ie=$.depthTexture;if(B.__depthDisposeCallback&&B.__depthDisposeCallback(),Ie){const Ge=()=>{delete B.__boundDepthTexture,delete B.__depthDisposeCallback,Ie.removeEventListener("dispose",Ge)};Ie.addEventListener("dispose",Ge),B.__depthDisposeCallback=Ge}B.__boundDepthTexture=Ie}if($.depthTexture&&!B.__autoAllocateDepthBuffer)if(fe)for(let Ie=0;Ie<6;Ie++)Rt(B.__webglFramebuffer[Ie],$,Ie);else{const Ie=$.texture.mipmaps;Ie&&Ie.length>0?Rt(B.__webglFramebuffer[0],$,0):Rt(B.__webglFramebuffer,$,0)}else if(fe){B.__webglDepthbuffer=[];for(let Ie=0;Ie<6;Ie++)if(t.bindFramebuffer(n.FRAMEBUFFER,B.__webglFramebuffer[Ie]),B.__webglDepthbuffer[Ie]===void 0)B.__webglDepthbuffer[Ie]=n.createRenderbuffer(),xt(B.__webglDepthbuffer[Ie],$,!1);else{const Ge=$.stencilBuffer?n.DEPTH_STENCIL_ATTACHMENT:n.DEPTH_ATTACHMENT,De=B.__webglDepthbuffer[Ie];n.bindRenderbuffer(n.RENDERBUFFER,De),n.framebufferRenderbuffer(n.FRAMEBUFFER,Ge,n.RENDERBUFFER,De)}}else{const Ie=$.texture.mipmaps;if(Ie&&Ie.length>0?t.bindFramebuffer(n.FRAMEBUFFER,B.__webglFramebuffer[0]):t.bindFramebuffer(n.FRAMEBUFFER,B.__webglFramebuffer),B.__webglDepthbuffer===void 0)B.__webglDepthbuffer=n.createRenderbuffer(),xt(B.__webglDepthbuffer,$,!1);else{const Ge=$.stencilBuffer?n.DEPTH_STENCIL_ATTACHMENT:n.DEPTH_ATTACHMENT,De=B.__webglDepthbuffer;n.bindRenderbuffer(n.RENDERBUFFER,De),n.framebufferRenderbuffer(n.FRAMEBUFFER,Ge,n.RENDERBUFFER,De)}}t.bindFramebuffer(n.FRAMEBUFFER,null)}function En($,B,fe){const Ie=i.get($);B!==void 0&&rt(Ie.__webglFramebuffer,$,$.texture,n.COLOR_ATTACHMENT0,n.TEXTURE_2D,0),fe!==void 0&&hn($)}function $t($){const B=$.texture,fe=i.get($),Ie=i.get(B);$.addEventListener("dispose",F);const Ge=$.textures,De=$.isWebGLCubeRenderTarget===!0,Tt=Ge.length>1;if(Tt||(Ie.__webglTexture===void 0&&(Ie.__webglTexture=n.createTexture()),Ie.__version=B.version,o.memory.textures++),De){fe.__webglFramebuffer=[];for(let ht=0;ht<6;ht++)if(B.mipmaps&&B.mipmaps.length>0){fe.__webglFramebuffer[ht]=[];for(let Lt=0;Lt<B.mipmaps.length;Lt++)fe.__webglFramebuffer[ht][Lt]=n.createFramebuffer()}else fe.__webglFramebuffer[ht]=n.createFramebuffer()}else{if(B.mipmaps&&B.mipmaps.length>0){fe.__webglFramebuffer=[];for(let ht=0;ht<B.mipmaps.length;ht++)fe.__webglFramebuffer[ht]=n.createFramebuffer()}else fe.__webglFramebuffer=n.createFramebuffer();if(Tt)for(let ht=0,Lt=Ge.length;ht<Lt;ht++){const Yt=i.get(Ge[ht]);Yt.__webglTexture===void 0&&(Yt.__webglTexture=n.createTexture(),o.memory.textures++)}if($.samples>0&&Ft($)===!1){fe.__webglMultisampledFramebuffer=n.createFramebuffer(),fe.__webglColorRenderbuffer=[],t.bindFramebuffer(n.FRAMEBUFFER,fe.__webglMultisampledFramebuffer);for(let ht=0;ht<Ge.length;ht++){const Lt=Ge[ht];fe.__webglColorRenderbuffer[ht]=n.createRenderbuffer(),n.bindRenderbuffer(n.RENDERBUFFER,fe.__webglColorRenderbuffer[ht]);const Yt=s.convert(Lt.format,Lt.colorSpace),Xe=s.convert(Lt.type),$e=N(Lt.internalFormat,Yt,Xe,Lt.colorSpace,$.isXRRenderTarget===!0),Ct=ee($);n.renderbufferStorageMultisample(n.RENDERBUFFER,Ct,$e,$.width,$.height),n.framebufferRenderbuffer(n.FRAMEBUFFER,n.COLOR_ATTACHMENT0+ht,n.RENDERBUFFER,fe.__webglColorRenderbuffer[ht])}n.bindRenderbuffer(n.RENDERBUFFER,null),$.depthBuffer&&(fe.__webglDepthRenderbuffer=n.createRenderbuffer(),xt(fe.__webglDepthRenderbuffer,$,!0)),t.bindFramebuffer(n.FRAMEBUFFER,null)}}if(De){t.bindTexture(n.TEXTURE_CUBE_MAP,Ie.__webglTexture),ce(n.TEXTURE_CUBE_MAP,B);for(let ht=0;ht<6;ht++)if(B.mipmaps&&B.mipmaps.length>0)for(let Lt=0;Lt<B.mipmaps.length;Lt++)rt(fe.__webglFramebuffer[ht][Lt],$,B,n.COLOR_ATTACHMENT0,n.TEXTURE_CUBE_MAP_POSITIVE_X+ht,Lt);else rt(fe.__webglFramebuffer[ht],$,B,n.COLOR_ATTACHMENT0,n.TEXTURE_CUBE_MAP_POSITIVE_X+ht,0);E(B)&&M(n.TEXTURE_CUBE_MAP),t.unbindTexture()}else if(Tt){for(let ht=0,Lt=Ge.length;ht<Lt;ht++){const Yt=Ge[ht],Xe=i.get(Yt);let $e=n.TEXTURE_2D;($.isWebGL3DRenderTarget||$.isWebGLArrayRenderTarget)&&($e=$.isWebGL3DRenderTarget?n.TEXTURE_3D:n.TEXTURE_2D_ARRAY),t.bindTexture($e,Xe.__webglTexture),ce($e,Yt),rt(fe.__webglFramebuffer,$,Yt,n.COLOR_ATTACHMENT0+ht,$e,0),E(Yt)&&M($e)}t.unbindTexture()}else{let ht=n.TEXTURE_2D;if(($.isWebGL3DRenderTarget||$.isWebGLArrayRenderTarget)&&(ht=$.isWebGL3DRenderTarget?n.TEXTURE_3D:n.TEXTURE_2D_ARRAY),t.bindTexture(ht,Ie.__webglTexture),ce(ht,B),B.mipmaps&&B.mipmaps.length>0)for(let Lt=0;Lt<B.mipmaps.length;Lt++)rt(fe.__webglFramebuffer[Lt],$,B,n.COLOR_ATTACHMENT0,ht,Lt);else rt(fe.__webglFramebuffer,$,B,n.COLOR_ATTACHMENT0,ht,0);E(B)&&M(ht),t.unbindTexture()}$.depthBuffer&&hn($)}function ze($){const B=$.textures;for(let fe=0,Ie=B.length;fe<Ie;fe++){const Ge=B[fe];if(E(Ge)){const De=C($),Tt=i.get(Ge).__webglTexture;t.bindTexture(De,Tt),M(De),t.unbindTexture()}}}const Je=[],He=[];function yt($){if($.samples>0){if(Ft($)===!1){const B=$.textures,fe=$.width,Ie=$.height;let Ge=n.COLOR_BUFFER_BIT;const De=$.stencilBuffer?n.DEPTH_STENCIL_ATTACHMENT:n.DEPTH_ATTACHMENT,Tt=i.get($),ht=B.length>1;if(ht)for(let Yt=0;Yt<B.length;Yt++)t.bindFramebuffer(n.FRAMEBUFFER,Tt.__webglMultisampledFramebuffer),n.framebufferRenderbuffer(n.FRAMEBUFFER,n.COLOR_ATTACHMENT0+Yt,n.RENDERBUFFER,null),t.bindFramebuffer(n.FRAMEBUFFER,Tt.__webglFramebuffer),n.framebufferTexture2D(n.DRAW_FRAMEBUFFER,n.COLOR_ATTACHMENT0+Yt,n.TEXTURE_2D,null,0);t.bindFramebuffer(n.READ_FRAMEBUFFER,Tt.__webglMultisampledFramebuffer);const Lt=$.texture.mipmaps;Lt&&Lt.length>0?t.bindFramebuffer(n.DRAW_FRAMEBUFFER,Tt.__webglFramebuffer[0]):t.bindFramebuffer(n.DRAW_FRAMEBUFFER,Tt.__webglFramebuffer);for(let Yt=0;Yt<B.length;Yt++){if($.resolveDepthBuffer&&($.depthBuffer&&(Ge|=n.DEPTH_BUFFER_BIT),$.stencilBuffer&&$.resolveStencilBuffer&&(Ge|=n.STENCIL_BUFFER_BIT)),ht){n.framebufferRenderbuffer(n.READ_FRAMEBUFFER,n.COLOR_ATTACHMENT0,n.RENDERBUFFER,Tt.__webglColorRenderbuffer[Yt]);const Xe=i.get(B[Yt]).__webglTexture;n.framebufferTexture2D(n.DRAW_FRAMEBUFFER,n.COLOR_ATTACHMENT0,n.TEXTURE_2D,Xe,0)}n.blitFramebuffer(0,0,fe,Ie,0,0,fe,Ie,Ge,n.NEAREST),f===!0&&(Je.length=0,He.length=0,Je.push(n.COLOR_ATTACHMENT0+Yt),$.depthBuffer&&$.resolveDepthBuffer===!1&&(Je.push(De),He.push(De),n.invalidateFramebuffer(n.DRAW_FRAMEBUFFER,He)),n.invalidateFramebuffer(n.READ_FRAMEBUFFER,Je))}if(t.bindFramebuffer(n.READ_FRAMEBUFFER,null),t.bindFramebuffer(n.DRAW_FRAMEBUFFER,null),ht)for(let Yt=0;Yt<B.length;Yt++){t.bindFramebuffer(n.FRAMEBUFFER,Tt.__webglMultisampledFramebuffer),n.framebufferRenderbuffer(n.FRAMEBUFFER,n.COLOR_ATTACHMENT0+Yt,n.RENDERBUFFER,Tt.__webglColorRenderbuffer[Yt]);const Xe=i.get(B[Yt]).__webglTexture;t.bindFramebuffer(n.FRAMEBUFFER,Tt.__webglFramebuffer),n.framebufferTexture2D(n.DRAW_FRAMEBUFFER,n.COLOR_ATTACHMENT0+Yt,n.TEXTURE_2D,Xe,0)}t.bindFramebuffer(n.DRAW_FRAMEBUFFER,Tt.__webglMultisampledFramebuffer)}else if($.depthBuffer&&$.resolveDepthBuffer===!1&&f){const B=$.stencilBuffer?n.DEPTH_STENCIL_ATTACHMENT:n.DEPTH_ATTACHMENT;n.invalidateFramebuffer(n.DRAW_FRAMEBUFFER,[B])}}}function ee($){return Math.min(r.maxSamples,$.samples)}function Ft($){const B=i.get($);return $.samples>0&&e.has("WEBGL_multisampled_render_to_texture")===!0&&B.__useRenderToTexture!==!1}function St($){const B=o.render.frame;m.get($)!==B&&(m.set($,B),$.update())}function Vt($,B){const fe=$.colorSpace,Ie=$.format,Ge=$.type;return $.isCompressedTexture===!0||$.isVideoTexture===!0||fe!==Yo&&fe!==Ec&&(Hn.getTransfer(fe)===ri?(Ie!==pr||Ge!==Gr)&&At("WebGLTextures: sRGB encoded textures have to use RGBAFormat and UnsignedByteType."):Xt("WebGLTextures: Unsupported texture color space:",fe)),B}function ot($){return typeof HTMLImageElement<"u"&&$ instanceof HTMLImageElement?(p.width=$.naturalWidth||$.width,p.height=$.naturalHeight||$.height):typeof VideoFrame<"u"&&$ instanceof VideoFrame?(p.width=$.displayWidth,p.height=$.displayHeight):(p.width=$.width,p.height=$.height),p}this.allocateTextureUnit=te,this.resetTextureUnits=ie,this.setTexture2D=de,this.setTexture2DArray=Z,this.setTexture3D=Q,this.setTextureCube=ve,this.rebindTextures=En,this.setupRenderTarget=$t,this.updateRenderTargetMipmap=ze,this.updateMultisampleRenderTarget=yt,this.setupDepthRenderbuffer=hn,this.setupFrameBufferTexture=rt,this.useMultisampledRTT=Ft,this.isReversedDepthBuffer=function(){return t.buffers.depth.getReversed()}}function JO(n,e){function t(i,r=Ec){let s;const o=Hn.getTransfer(r);if(i===Gr)return n.UNSIGNED_BYTE;if(i===Fb)return n.UNSIGNED_SHORT_4_4_4_4;if(i===Vb)return n.UNSIGNED_SHORT_5_5_5_1;if(i===GE)return n.UNSIGNED_INT_5_9_9_9_REV;if(i===jE)return n.UNSIGNED_INT_10F_11F_11F_REV;if(i===Bb)return n.BYTE;if(i===zb)return n.SHORT;if(i===Op)return n.UNSIGNED_SHORT;if(i===sv)return n.INT;if(i===Aa)return n.UNSIGNED_INT;if(i===ki)return n.FLOAT;if(i===ir)return n.HALF_FLOAT;if(i===WE)return n.ALPHA;if(i===qE)return n.RGB;if(i===pr)return n.RGBA;if(i===Bl)return n.DEPTH_COMPONENT;if(i===Fu)return n.DEPTH_STENCIL;if(i===av)return n.RED;if(i===ov)return n.RED_INTEGER;if(i===Mf)return n.RG;if(i===Hb)return n.RG_INTEGER;if(i===Gb)return n.RGBA_INTEGER;if(i===l0||i===c0||i===u0||i===h0)if(o===ri)if(s=e.get("WEBGL_compressed_texture_s3tc_srgb"),s!==null){if(i===l0)return s.COMPRESSED_SRGB_S3TC_DXT1_EXT;if(i===c0)return s.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT;if(i===u0)return s.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT;if(i===h0)return s.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT}else return null;else if(s=e.get("WEBGL_compressed_texture_s3tc"),s!==null){if(i===l0)return s.COMPRESSED_RGB_S3TC_DXT1_EXT;if(i===c0)return s.COMPRESSED_RGBA_S3TC_DXT1_EXT;if(i===u0)return s.COMPRESSED_RGBA_S3TC_DXT3_EXT;if(i===h0)return s.COMPRESSED_RGBA_S3TC_DXT5_EXT}else return null;if(i===kx||i===Bx||i===zx||i===Fx)if(s=e.get("WEBGL_compressed_texture_pvrtc"),s!==null){if(i===kx)return s.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;if(i===Bx)return s.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;if(i===zx)return s.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;if(i===Fx)return s.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG}else return null;if(i===Vx||i===Hx||i===Gx||i===jx||i===Wx||i===qx||i===Xx)if(s=e.get("WEBGL_compressed_texture_etc"),s!==null){if(i===Vx||i===Hx)return o===ri?s.COMPRESSED_SRGB8_ETC2:s.COMPRESSED_RGB8_ETC2;if(i===Gx)return o===ri?s.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC:s.COMPRESSED_RGBA8_ETC2_EAC;if(i===jx)return s.COMPRESSED_R11_EAC;if(i===Wx)return s.COMPRESSED_SIGNED_R11_EAC;if(i===qx)return s.COMPRESSED_RG11_EAC;if(i===Xx)return s.COMPRESSED_SIGNED_RG11_EAC}else return null;if(i===$x||i===Yx||i===Zx||i===Kx||i===Jx||i===Qx||i===eb||i===tb||i===nb||i===ib||i===rb||i===sb||i===ab||i===ob)if(s=e.get("WEBGL_compressed_texture_astc"),s!==null){if(i===$x)return o===ri?s.COMPRESSED_SRGB8_ALPHA8_ASTC_4x4_KHR:s.COMPRESSED_RGBA_ASTC_4x4_KHR;if(i===Yx)return o===ri?s.COMPRESSED_SRGB8_ALPHA8_ASTC_5x4_KHR:s.COMPRESSED_RGBA_ASTC_5x4_KHR;if(i===Zx)return o===ri?s.COMPRESSED_SRGB8_ALPHA8_ASTC_5x5_KHR:s.COMPRESSED_RGBA_ASTC_5x5_KHR;if(i===Kx)return o===ri?s.COMPRESSED_SRGB8_ALPHA8_ASTC_6x5_KHR:s.COMPRESSED_RGBA_ASTC_6x5_KHR;if(i===Jx)return o===ri?s.COMPRESSED_SRGB8_ALPHA8_ASTC_6x6_KHR:s.COMPRESSED_RGBA_ASTC_6x6_KHR;if(i===Qx)return o===ri?s.COMPRESSED_SRGB8_ALPHA8_ASTC_8x5_KHR:s.COMPRESSED_RGBA_ASTC_8x5_KHR;if(i===eb)return o===ri?s.COMPRESSED_SRGB8_ALPHA8_ASTC_8x6_KHR:s.COMPRESSED_RGBA_ASTC_8x6_KHR;if(i===tb)return o===ri?s.COMPRESSED_SRGB8_ALPHA8_ASTC_8x8_KHR:s.COMPRESSED_RGBA_ASTC_8x8_KHR;if(i===nb)return o===ri?s.COMPRESSED_SRGB8_ALPHA8_ASTC_10x5_KHR:s.COMPRESSED_RGBA_ASTC_10x5_KHR;if(i===ib)return o===ri?s.COMPRESSED_SRGB8_ALPHA8_ASTC_10x6_KHR:s.COMPRESSED_RGBA_ASTC_10x6_KHR;if(i===rb)return o===ri?s.COMPRESSED_SRGB8_ALPHA8_ASTC_10x8_KHR:s.COMPRESSED_RGBA_ASTC_10x8_KHR;if(i===sb)return o===ri?s.COMPRESSED_SRGB8_ALPHA8_ASTC_10x10_KHR:s.COMPRESSED_RGBA_ASTC_10x10_KHR;if(i===ab)return o===ri?s.COMPRESSED_SRGB8_ALPHA8_ASTC_12x10_KHR:s.COMPRESSED_RGBA_ASTC_12x10_KHR;if(i===ob)return o===ri?s.COMPRESSED_SRGB8_ALPHA8_ASTC_12x12_KHR:s.COMPRESSED_RGBA_ASTC_12x12_KHR}else return null;if(i===lb||i===cb||i===ub)if(s=e.get("EXT_texture_compression_bptc"),s!==null){if(i===lb)return o===ri?s.COMPRESSED_SRGB_ALPHA_BPTC_UNORM_EXT:s.COMPRESSED_RGBA_BPTC_UNORM_EXT;if(i===cb)return s.COMPRESSED_RGB_BPTC_SIGNED_FLOAT_EXT;if(i===ub)return s.COMPRESSED_RGB_BPTC_UNSIGNED_FLOAT_EXT}else return null;if(i===hb||i===fb||i===db||i===pb)if(s=e.get("EXT_texture_compression_rgtc"),s!==null){if(i===hb)return s.COMPRESSED_RED_RGTC1_EXT;if(i===fb)return s.COMPRESSED_SIGNED_RED_RGTC1_EXT;if(i===db)return s.COMPRESSED_RED_GREEN_RGTC2_EXT;if(i===pb)return s.COMPRESSED_SIGNED_RED_GREEN_RGTC2_EXT}else return null;return i===Lp?n.UNSIGNED_INT_24_8:n[i]!==void 0?n[i]:null}return{convert:t}}const s$=`
void main() {

	gl_Position = vec4( position, 1.0 );

}`,a$=`
uniform sampler2DArray depthColor;
uniform float depthWidth;
uniform float depthHeight;

void main() {

	vec2 coord = vec2( gl_FragCoord.x / depthWidth, gl_FragCoord.y / depthHeight );

	if ( coord.x >= 1.0 ) {

		gl_FragDepth = texture( depthColor, vec3( coord.x - 1.0, coord.y, 1 ) ).r;

	} else {

		gl_FragDepth = texture( depthColor, vec3( coord.x, coord.y, 0 ) ).r;

	}

}`;class o${constructor(){this.texture=null,this.mesh=null,this.depthNear=0,this.depthFar=0}init(e,t){if(this.texture===null){const i=new tT(e.texture);(e.depthNear!==t.depthNear||e.depthFar!==t.depthFar)&&(this.depthNear=e.depthNear,this.depthFar=e.depthFar),this.texture=i}}getMesh(e){if(this.texture!==null&&this.mesh===null){const t=e.cameras[0].viewport,i=new Ss({vertexShader:s$,fragmentShader:a$,uniforms:{depthColor:{value:this.texture},depthWidth:{value:t.z},depthHeight:{value:t.w}}});this.mesh=new Xi(new Qu(20,20),i)}return this.mesh}reset(){this.texture=null,this.mesh=null}getDepthTexture(){return this.texture}}class l$ extends Fl{constructor(e,t){super();const i=this;let r=null,s=1,o=null,u="local-floor",f=1,p=null,m=null,v=null,_=null,x=null,S=null;const A=typeof XRWebGLBinding<"u",E=new o$,M={},C=t.getContextAttributes();let N=null,I=null;const U=[],L=[],F=new Ye;let H=null;const P=new Hr;P.viewport=new mi;const k=new Hr;k.viewport=new mi;const Y=[P,k],ie=new VO;let te=null,le=null;this.cameraAutoUpdate=!0,this.enabled=!1,this.isPresenting=!1,this.getController=function(ge){let Re=U[ge];return Re===void 0&&(Re=new dx,U[ge]=Re),Re.getTargetRaySpace()},this.getControllerGrip=function(ge){let Re=U[ge];return Re===void 0&&(Re=new dx,U[ge]=Re),Re.getGripSpace()},this.getHand=function(ge){let Re=U[ge];return Re===void 0&&(Re=new dx,U[ge]=Re),Re.getHandSpace()};function de(ge){const Re=L.indexOf(ge.inputSource);if(Re===-1)return;const rt=U[Re];rt!==void 0&&(rt.update(ge.inputSource,ge.frame,p||o),rt.dispatchEvent({type:ge.type,data:ge.inputSource}))}function Z(){r.removeEventListener("select",de),r.removeEventListener("selectstart",de),r.removeEventListener("selectend",de),r.removeEventListener("squeeze",de),r.removeEventListener("squeezestart",de),r.removeEventListener("squeezeend",de),r.removeEventListener("end",Z),r.removeEventListener("inputsourceschange",Q);for(let ge=0;ge<U.length;ge++){const Re=L[ge];Re!==null&&(L[ge]=null,U[ge].disconnect(Re))}te=null,le=null,E.reset();for(const ge in M)delete M[ge];e.setRenderTarget(N),x=null,_=null,v=null,r=null,I=null,mt.stop(),i.isPresenting=!1,e.setPixelRatio(H),e.setSize(F.width,F.height,!1),i.dispatchEvent({type:"sessionend"})}this.setFramebufferScaleFactor=function(ge){s=ge,i.isPresenting===!0&&At("WebXRManager: Cannot change framebuffer scale while presenting.")},this.setReferenceSpaceType=function(ge){u=ge,i.isPresenting===!0&&At("WebXRManager: Cannot change reference space type while presenting.")},this.getReferenceSpace=function(){return p||o},this.setReferenceSpace=function(ge){p=ge},this.getBaseLayer=function(){return _!==null?_:x},this.getBinding=function(){return v===null&&A&&(v=new XRWebGLBinding(r,t)),v},this.getFrame=function(){return S},this.getSession=function(){return r},this.setSession=async function(ge){if(r=ge,r!==null){if(N=e.getRenderTarget(),r.addEventListener("select",de),r.addEventListener("selectstart",de),r.addEventListener("selectend",de),r.addEventListener("squeeze",de),r.addEventListener("squeezestart",de),r.addEventListener("squeezeend",de),r.addEventListener("end",Z),r.addEventListener("inputsourceschange",Q),C.xrCompatible!==!0&&await t.makeXRCompatible(),H=e.getPixelRatio(),e.getSize(F),A&&"createProjectionLayer"in XRWebGLBinding.prototype){let rt=null,xt=null,Rt=null;C.depth&&(Rt=C.stencil?t.DEPTH24_STENCIL8:t.DEPTH_COMPONENT24,rt=C.stencil?Fu:Bl,xt=C.stencil?Lp:Aa);const hn={colorFormat:t.RGBA8,depthFormat:Rt,scaleFactor:s};v=this.getBinding(),_=v.createProjectionLayer(hn),r.updateRenderState({layers:[_]}),e.setPixelRatio(1),e.setSize(_.textureWidth,_.textureHeight,!1),I=new Hs(_.textureWidth,_.textureHeight,{format:pr,type:Gr,depthTexture:new Hp(_.textureWidth,_.textureHeight,xt,void 0,void 0,void 0,void 0,void 0,void 0,rt),stencilBuffer:C.stencil,colorSpace:e.outputColorSpace,samples:C.antialias?4:0,resolveDepthBuffer:_.ignoreDepthValues===!1,resolveStencilBuffer:_.ignoreDepthValues===!1})}else{const rt={antialias:C.antialias,alpha:!0,depth:C.depth,stencil:C.stencil,framebufferScaleFactor:s};x=new XRWebGLLayer(r,t,rt),r.updateRenderState({baseLayer:x}),e.setPixelRatio(1),e.setSize(x.framebufferWidth,x.framebufferHeight,!1),I=new Hs(x.framebufferWidth,x.framebufferHeight,{format:pr,type:Gr,colorSpace:e.outputColorSpace,stencilBuffer:C.stencil,resolveDepthBuffer:x.ignoreDepthValues===!1,resolveStencilBuffer:x.ignoreDepthValues===!1})}I.isXRRenderTarget=!0,this.setFoveation(f),p=null,o=await r.requestReferenceSpace(u),mt.setContext(r),mt.start(),i.isPresenting=!0,i.dispatchEvent({type:"sessionstart"})}},this.getEnvironmentBlendMode=function(){if(r!==null)return r.environmentBlendMode},this.getDepthTexture=function(){return E.getDepthTexture()};function Q(ge){for(let Re=0;Re<ge.removed.length;Re++){const rt=ge.removed[Re],xt=L.indexOf(rt);xt>=0&&(L[xt]=null,U[xt].disconnect(rt))}for(let Re=0;Re<ge.added.length;Re++){const rt=ge.added[Re];let xt=L.indexOf(rt);if(xt===-1){for(let hn=0;hn<U.length;hn++)if(hn>=L.length){L.push(rt),xt=hn;break}else if(L[hn]===null){L[hn]=rt,xt=hn;break}if(xt===-1)break}const Rt=U[xt];Rt&&Rt.connect(rt)}}const ve=new J,Te=new J;function we(ge,Re,rt){ve.setFromMatrixPosition(Re.matrixWorld),Te.setFromMatrixPosition(rt.matrixWorld);const xt=ve.distanceTo(Te),Rt=Re.projectionMatrix.elements,hn=rt.projectionMatrix.elements,En=Rt[14]/(Rt[10]-1),$t=Rt[14]/(Rt[10]+1),ze=(Rt[9]+1)/Rt[5],Je=(Rt[9]-1)/Rt[5],He=(Rt[8]-1)/Rt[0],yt=(hn[8]+1)/hn[0],ee=En*He,Ft=En*yt,St=xt/(-He+yt),Vt=St*-He;if(Re.matrixWorld.decompose(ge.position,ge.quaternion,ge.scale),ge.translateX(Vt),ge.translateZ(St),ge.matrixWorld.compose(ge.position,ge.quaternion,ge.scale),ge.matrixWorldInverse.copy(ge.matrixWorld).invert(),Rt[10]===-1)ge.projectionMatrix.copy(Re.projectionMatrix),ge.projectionMatrixInverse.copy(Re.projectionMatrixInverse);else{const ot=En+St,$=$t+St,B=ee-Vt,fe=Ft+(xt-Vt),Ie=ze*$t/$*ot,Ge=Je*$t/$*ot;ge.projectionMatrix.makePerspective(B,fe,Ie,Ge,ot,$),ge.projectionMatrixInverse.copy(ge.projectionMatrix).invert()}}function X(ge,Re){Re===null?ge.matrixWorld.copy(ge.matrix):ge.matrixWorld.multiplyMatrices(Re.matrixWorld,ge.matrix),ge.matrixWorldInverse.copy(ge.matrixWorld).invert()}this.updateCamera=function(ge){if(r===null)return;let Re=ge.near,rt=ge.far;E.texture!==null&&(E.depthNear>0&&(Re=E.depthNear),E.depthFar>0&&(rt=E.depthFar)),ie.near=k.near=P.near=Re,ie.far=k.far=P.far=rt,(te!==ie.near||le!==ie.far)&&(r.updateRenderState({depthNear:ie.near,depthFar:ie.far}),te=ie.near,le=ie.far),ie.layers.mask=ge.layers.mask|6,P.layers.mask=ie.layers.mask&3,k.layers.mask=ie.layers.mask&5;const xt=ge.parent,Rt=ie.cameras;X(ie,xt);for(let hn=0;hn<Rt.length;hn++)X(Rt[hn],xt);Rt.length===2?we(ie,P,k):ie.projectionMatrix.copy(P.projectionMatrix),ce(ge,ie,xt)};function ce(ge,Re,rt){rt===null?ge.matrix.copy(Re.matrixWorld):(ge.matrix.copy(rt.matrixWorld),ge.matrix.invert(),ge.matrix.multiply(Re.matrixWorld)),ge.matrix.decompose(ge.position,ge.quaternion,ge.scale),ge.updateMatrixWorld(!0),ge.projectionMatrix.copy(Re.projectionMatrix),ge.projectionMatrixInverse.copy(Re.projectionMatrixInverse),ge.isPerspectiveCamera&&(ge.fov=Bp*2*Math.atan(1/ge.projectionMatrix.elements[5]),ge.zoom=1)}this.getCamera=function(){return ie},this.getFoveation=function(){if(!(_===null&&x===null))return f},this.setFoveation=function(ge){f=ge,_!==null&&(_.fixedFoveation=ge),x!==null&&x.fixedFoveation!==void 0&&(x.fixedFoveation=ge)},this.hasDepthSensing=function(){return E.texture!==null},this.getDepthSensingMesh=function(){return E.getMesh(ie)},this.getCameraTexture=function(ge){return M[ge]};let xe=null;function Be(ge,Re){if(m=Re.getViewerPose(p||o),S=Re,m!==null){const rt=m.views;x!==null&&(e.setRenderTargetFramebuffer(I,x.framebuffer),e.setRenderTarget(I));let xt=!1;rt.length!==ie.cameras.length&&(ie.cameras.length=0,xt=!0);for(let $t=0;$t<rt.length;$t++){const ze=rt[$t];let Je=null;if(x!==null)Je=x.getViewport(ze);else{const yt=v.getViewSubImage(_,ze);Je=yt.viewport,$t===0&&(e.setRenderTargetTextures(I,yt.colorTexture,yt.depthStencilTexture),e.setRenderTarget(I))}let He=Y[$t];He===void 0&&(He=new Hr,He.layers.enable($t),He.viewport=new mi,Y[$t]=He),He.matrix.fromArray(ze.transform.matrix),He.matrix.decompose(He.position,He.quaternion,He.scale),He.projectionMatrix.fromArray(ze.projectionMatrix),He.projectionMatrixInverse.copy(He.projectionMatrix).invert(),He.viewport.set(Je.x,Je.y,Je.width,Je.height),$t===0&&(ie.matrix.copy(He.matrix),ie.matrix.decompose(ie.position,ie.quaternion,ie.scale)),xt===!0&&ie.cameras.push(He)}const Rt=r.enabledFeatures;if(Rt&&Rt.includes("depth-sensing")&&r.depthUsage=="gpu-optimized"&&A){v=i.getBinding();const $t=v.getDepthInformation(rt[0]);$t&&$t.isValid&&$t.texture&&E.init($t,r.renderState)}if(Rt&&Rt.includes("camera-access")&&A){e.state.unbindTexture(),v=i.getBinding();for(let $t=0;$t<rt.length;$t++){const ze=rt[$t].camera;if(ze){let Je=M[ze];Je||(Je=new tT,M[ze]=Je);const He=v.getCameraImage(ze);Je.sourceTexture=He}}}}for(let rt=0;rt<U.length;rt++){const xt=L[rt],Rt=U[rt];xt!==null&&Rt!==void 0&&Rt.update(xt,Re,p||o)}xe&&xe(ge,Re),Re.detectedPlanes&&i.dispatchEvent({type:"planesdetected",data:Re}),S=null}const mt=new XO;mt.setAnimationLoop(Be),this.setAnimationLoop=function(ge){xe=ge},this.dispose=function(){}}}const nf=new Ca,c$=new un;function u$(n,e){function t(E,M){E.matrixAutoUpdate===!0&&E.updateMatrix(),M.value.copy(E.matrix)}function i(E,M){M.color.getRGB(E.fogColor.value,YP(n)),M.isFog?(E.fogNear.value=M.near,E.fogFar.value=M.far):M.isFogExp2&&(E.fogDensity.value=M.density)}function r(E,M,C,N,I){M.isMeshBasicMaterial||M.isMeshLambertMaterial?s(E,M):M.isMeshToonMaterial?(s(E,M),v(E,M)):M.isMeshPhongMaterial?(s(E,M),m(E,M)):M.isMeshStandardMaterial?(s(E,M),_(E,M),M.isMeshPhysicalMaterial&&x(E,M,I)):M.isMeshMatcapMaterial?(s(E,M),S(E,M)):M.isMeshDepthMaterial?s(E,M):M.isMeshDistanceMaterial?(s(E,M),A(E,M)):M.isMeshNormalMaterial?s(E,M):M.isLineBasicMaterial?(o(E,M),M.isLineDashedMaterial&&u(E,M)):M.isPointsMaterial?f(E,M,C,N):M.isSpriteMaterial?p(E,M):M.isShadowMaterial?(E.color.value.copy(M.color),E.opacity.value=M.opacity):M.isShaderMaterial&&(M.uniformsNeedUpdate=!1)}function s(E,M){E.opacity.value=M.opacity,M.color&&E.diffuse.value.copy(M.color),M.emissive&&E.emissive.value.copy(M.emissive).multiplyScalar(M.emissiveIntensity),M.map&&(E.map.value=M.map,t(M.map,E.mapTransform)),M.alphaMap&&(E.alphaMap.value=M.alphaMap,t(M.alphaMap,E.alphaMapTransform)),M.bumpMap&&(E.bumpMap.value=M.bumpMap,t(M.bumpMap,E.bumpMapTransform),E.bumpScale.value=M.bumpScale,M.side===Vs&&(E.bumpScale.value*=-1)),M.normalMap&&(E.normalMap.value=M.normalMap,t(M.normalMap,E.normalMapTransform),E.normalScale.value.copy(M.normalScale),M.side===Vs&&E.normalScale.value.negate()),M.displacementMap&&(E.displacementMap.value=M.displacementMap,t(M.displacementMap,E.displacementMapTransform),E.displacementScale.value=M.displacementScale,E.displacementBias.value=M.displacementBias),M.emissiveMap&&(E.emissiveMap.value=M.emissiveMap,t(M.emissiveMap,E.emissiveMapTransform)),M.specularMap&&(E.specularMap.value=M.specularMap,t(M.specularMap,E.specularMapTransform)),M.alphaTest>0&&(E.alphaTest.value=M.alphaTest);const C=e.get(M),N=C.envMap,I=C.envMapRotation;N&&(E.envMap.value=N,nf.copy(I),nf.x*=-1,nf.y*=-1,nf.z*=-1,N.isCubeTexture&&N.isRenderTargetTexture===!1&&(nf.y*=-1,nf.z*=-1),E.envMapRotation.value.setFromMatrix4(c$.makeRotationFromEuler(nf)),E.flipEnvMap.value=N.isCubeTexture&&N.isRenderTargetTexture===!1?-1:1,E.reflectivity.value=M.reflectivity,E.ior.value=M.ior,E.refractionRatio.value=M.refractionRatio),M.lightMap&&(E.lightMap.value=M.lightMap,E.lightMapIntensity.value=M.lightMapIntensity,t(M.lightMap,E.lightMapTransform)),M.aoMap&&(E.aoMap.value=M.aoMap,E.aoMapIntensity.value=M.aoMapIntensity,t(M.aoMap,E.aoMapTransform))}function o(E,M){E.diffuse.value.copy(M.color),E.opacity.value=M.opacity,M.map&&(E.map.value=M.map,t(M.map,E.mapTransform))}function u(E,M){E.dashSize.value=M.dashSize,E.totalSize.value=M.dashSize+M.gapSize,E.scale.value=M.scale}function f(E,M,C,N){E.diffuse.value.copy(M.color),E.opacity.value=M.opacity,E.size.value=M.size*C,E.scale.value=N*.5,M.map&&(E.map.value=M.map,t(M.map,E.uvTransform)),M.alphaMap&&(E.alphaMap.value=M.alphaMap,t(M.alphaMap,E.alphaMapTransform)),M.alphaTest>0&&(E.alphaTest.value=M.alphaTest)}function p(E,M){E.diffuse.value.copy(M.color),E.opacity.value=M.opacity,E.rotation.value=M.rotation,M.map&&(E.map.value=M.map,t(M.map,E.mapTransform)),M.alphaMap&&(E.alphaMap.value=M.alphaMap,t(M.alphaMap,E.alphaMapTransform)),M.alphaTest>0&&(E.alphaTest.value=M.alphaTest)}function m(E,M){E.specular.value.copy(M.specular),E.shininess.value=Math.max(M.shininess,1e-4)}function v(E,M){M.gradientMap&&(E.gradientMap.value=M.gradientMap)}function _(E,M){E.metalness.value=M.metalness,M.metalnessMap&&(E.metalnessMap.value=M.metalnessMap,t(M.metalnessMap,E.metalnessMapTransform)),E.roughness.value=M.roughness,M.roughnessMap&&(E.roughnessMap.value=M.roughnessMap,t(M.roughnessMap,E.roughnessMapTransform)),M.envMap&&(E.envMapIntensity.value=M.envMapIntensity)}function x(E,M,C){E.ior.value=M.ior,M.sheen>0&&(E.sheenColor.value.copy(M.sheenColor).multiplyScalar(M.sheen),E.sheenRoughness.value=M.sheenRoughness,M.sheenColorMap&&(E.sheenColorMap.value=M.sheenColorMap,t(M.sheenColorMap,E.sheenColorMapTransform)),M.sheenRoughnessMap&&(E.sheenRoughnessMap.value=M.sheenRoughnessMap,t(M.sheenRoughnessMap,E.sheenRoughnessMapTransform))),M.clearcoat>0&&(E.clearcoat.value=M.clearcoat,E.clearcoatRoughness.value=M.clearcoatRoughness,M.clearcoatMap&&(E.clearcoatMap.value=M.clearcoatMap,t(M.clearcoatMap,E.clearcoatMapTransform)),M.clearcoatRoughnessMap&&(E.clearcoatRoughnessMap.value=M.clearcoatRoughnessMap,t(M.clearcoatRoughnessMap,E.clearcoatRoughnessMapTransform)),M.clearcoatNormalMap&&(E.clearcoatNormalMap.value=M.clearcoatNormalMap,t(M.clearcoatNormalMap,E.clearcoatNormalMapTransform),E.clearcoatNormalScale.value.copy(M.clearcoatNormalScale),M.side===Vs&&E.clearcoatNormalScale.value.negate())),M.dispersion>0&&(E.dispersion.value=M.dispersion),M.iridescence>0&&(E.iridescence.value=M.iridescence,E.iridescenceIOR.value=M.iridescenceIOR,E.iridescenceThicknessMinimum.value=M.iridescenceThicknessRange[0],E.iridescenceThicknessMaximum.value=M.iridescenceThicknessRange[1],M.iridescenceMap&&(E.iridescenceMap.value=M.iridescenceMap,t(M.iridescenceMap,E.iridescenceMapTransform)),M.iridescenceThicknessMap&&(E.iridescenceThicknessMap.value=M.iridescenceThicknessMap,t(M.iridescenceThicknessMap,E.iridescenceThicknessMapTransform))),M.transmission>0&&(E.transmission.value=M.transmission,E.transmissionSamplerMap.value=C.texture,E.transmissionSamplerSize.value.set(C.width,C.height),M.transmissionMap&&(E.transmissionMap.value=M.transmissionMap,t(M.transmissionMap,E.transmissionMapTransform)),E.thickness.value=M.thickness,M.thicknessMap&&(E.thicknessMap.value=M.thicknessMap,t(M.thicknessMap,E.thicknessMapTransform)),E.attenuationDistance.value=M.attenuationDistance,E.attenuationColor.value.copy(M.attenuationColor)),M.anisotropy>0&&(E.anisotropyVector.value.set(M.anisotropy*Math.cos(M.anisotropyRotation),M.anisotropy*Math.sin(M.anisotropyRotation)),M.anisotropyMap&&(E.anisotropyMap.value=M.anisotropyMap,t(M.anisotropyMap,E.anisotropyMapTransform))),E.specularIntensity.value=M.specularIntensity,E.specularColor.value.copy(M.specularColor),M.specularColorMap&&(E.specularColorMap.value=M.specularColorMap,t(M.specularColorMap,E.specularColorMapTransform)),M.specularIntensityMap&&(E.specularIntensityMap.value=M.specularIntensityMap,t(M.specularIntensityMap,E.specularIntensityMapTransform))}function S(E,M){M.matcap&&(E.matcap.value=M.matcap)}function A(E,M){const C=e.get(M).light;E.referencePosition.value.setFromMatrixPosition(C.matrixWorld),E.nearDistance.value=C.shadow.camera.near,E.farDistance.value=C.shadow.camera.far}return{refreshFogUniforms:i,refreshMaterialUniforms:r}}function h$(n,e,t,i){let r={},s={},o=[];const u=n.getParameter(n.MAX_UNIFORM_BUFFER_BINDINGS);function f(C,N){const I=N.program;i.uniformBlockBinding(C,I)}function p(C,N){let I=r[C.id];I===void 0&&(S(C),I=m(C),r[C.id]=I,C.addEventListener("dispose",E));const U=N.program;i.updateUBOMapping(C,U);const L=e.render.frame;s[C.id]!==L&&(_(C),s[C.id]=L)}function m(C){const N=v();C.__bindingPointIndex=N;const I=n.createBuffer(),U=C.__size,L=C.usage;return n.bindBuffer(n.UNIFORM_BUFFER,I),n.bufferData(n.UNIFORM_BUFFER,U,L),n.bindBuffer(n.UNIFORM_BUFFER,null),n.bindBufferBase(n.UNIFORM_BUFFER,N,I),I}function v(){for(let C=0;C<u;C++)if(o.indexOf(C)===-1)return o.push(C),C;return Xt("WebGLRenderer: Maximum number of simultaneously usable uniforms groups reached."),0}function _(C){const N=r[C.id],I=C.uniforms,U=C.__cache;n.bindBuffer(n.UNIFORM_BUFFER,N);for(let L=0,F=I.length;L<F;L++){const H=Array.isArray(I[L])?I[L]:[I[L]];for(let P=0,k=H.length;P<k;P++){const Y=H[P];if(x(Y,L,P,U)===!0){const ie=Y.__offset,te=Array.isArray(Y.value)?Y.value:[Y.value];let le=0;for(let de=0;de<te.length;de++){const Z=te[de],Q=A(Z);typeof Z=="number"||typeof Z=="boolean"?(Y.__data[0]=Z,n.bufferSubData(n.UNIFORM_BUFFER,ie+le,Y.__data)):Z.isMatrix3?(Y.__data[0]=Z.elements[0],Y.__data[1]=Z.elements[1],Y.__data[2]=Z.elements[2],Y.__data[3]=0,Y.__data[4]=Z.elements[3],Y.__data[5]=Z.elements[4],Y.__data[6]=Z.elements[5],Y.__data[7]=0,Y.__data[8]=Z.elements[6],Y.__data[9]=Z.elements[7],Y.__data[10]=Z.elements[8],Y.__data[11]=0):(Z.toArray(Y.__data,le),le+=Q.storage/Float32Array.BYTES_PER_ELEMENT)}n.bufferSubData(n.UNIFORM_BUFFER,ie,Y.__data)}}}n.bindBuffer(n.UNIFORM_BUFFER,null)}function x(C,N,I,U){const L=C.value,F=N+"_"+I;if(U[F]===void 0)return typeof L=="number"||typeof L=="boolean"?U[F]=L:U[F]=L.clone(),!0;{const H=U[F];if(typeof L=="number"||typeof L=="boolean"){if(H!==L)return U[F]=L,!0}else if(H.equals(L)===!1)return H.copy(L),!0}return!1}function S(C){const N=C.uniforms;let I=0;const U=16;for(let F=0,H=N.length;F<H;F++){const P=Array.isArray(N[F])?N[F]:[N[F]];for(let k=0,Y=P.length;k<Y;k++){const ie=P[k],te=Array.isArray(ie.value)?ie.value:[ie.value];for(let le=0,de=te.length;le<de;le++){const Z=te[le],Q=A(Z),ve=I%U,Te=ve%Q.boundary,we=ve+Te;I+=Te,we!==0&&U-we<Q.storage&&(I+=U-we),ie.__data=new Float32Array(Q.storage/Float32Array.BYTES_PER_ELEMENT),ie.__offset=I,I+=Q.storage}}}const L=I%U;return L>0&&(I+=U-L),C.__size=I,C.__cache={},this}function A(C){const N={boundary:0,storage:0};return typeof C=="number"||typeof C=="boolean"?(N.boundary=4,N.storage=4):C.isVector2?(N.boundary=8,N.storage=8):C.isVector3||C.isColor?(N.boundary=16,N.storage=12):C.isVector4?(N.boundary=16,N.storage=16):C.isMatrix3?(N.boundary=48,N.storage=48):C.isMatrix4?(N.boundary=64,N.storage=64):C.isTexture?At("WebGLRenderer: Texture samplers can not be part of an uniforms group."):At("WebGLRenderer: Unsupported uniform value type.",C),N}function E(C){const N=C.target;N.removeEventListener("dispose",E);const I=o.indexOf(N.__bindingPointIndex);o.splice(I,1),n.deleteBuffer(r[N.id]),delete r[N.id],delete s[N.id]}function M(){for(const C in r)n.deleteBuffer(r[C]);o=[],r={},s={}}return{bind:f,update:p,dispose:M}}const f$=new Uint16Array([12469,15057,12620,14925,13266,14620,13807,14376,14323,13990,14545,13625,14713,13328,14840,12882,14931,12528,14996,12233,15039,11829,15066,11525,15080,11295,15085,10976,15082,10705,15073,10495,13880,14564,13898,14542,13977,14430,14158,14124,14393,13732,14556,13410,14702,12996,14814,12596,14891,12291,14937,11834,14957,11489,14958,11194,14943,10803,14921,10506,14893,10278,14858,9960,14484,14039,14487,14025,14499,13941,14524,13740,14574,13468,14654,13106,14743,12678,14818,12344,14867,11893,14889,11509,14893,11180,14881,10751,14852,10428,14812,10128,14765,9754,14712,9466,14764,13480,14764,13475,14766,13440,14766,13347,14769,13070,14786,12713,14816,12387,14844,11957,14860,11549,14868,11215,14855,10751,14825,10403,14782,10044,14729,9651,14666,9352,14599,9029,14967,12835,14966,12831,14963,12804,14954,12723,14936,12564,14917,12347,14900,11958,14886,11569,14878,11247,14859,10765,14828,10401,14784,10011,14727,9600,14660,9289,14586,8893,14508,8533,15111,12234,15110,12234,15104,12216,15092,12156,15067,12010,15028,11776,14981,11500,14942,11205,14902,10752,14861,10393,14812,9991,14752,9570,14682,9252,14603,8808,14519,8445,14431,8145,15209,11449,15208,11451,15202,11451,15190,11438,15163,11384,15117,11274,15055,10979,14994,10648,14932,10343,14871,9936,14803,9532,14729,9218,14645,8742,14556,8381,14461,8020,14365,7603,15273,10603,15272,10607,15267,10619,15256,10631,15231,10614,15182,10535,15118,10389,15042,10167,14963,9787,14883,9447,14800,9115,14710,8665,14615,8318,14514,7911,14411,7507,14279,7198,15314,9675,15313,9683,15309,9712,15298,9759,15277,9797,15229,9773,15166,9668,15084,9487,14995,9274,14898,8910,14800,8539,14697,8234,14590,7790,14479,7409,14367,7067,14178,6621,15337,8619,15337,8631,15333,8677,15325,8769,15305,8871,15264,8940,15202,8909,15119,8775,15022,8565,14916,8328,14804,8009,14688,7614,14569,7287,14448,6888,14321,6483,14088,6171,15350,7402,15350,7419,15347,7480,15340,7613,15322,7804,15287,7973,15229,8057,15148,8012,15046,7846,14933,7611,14810,7357,14682,7069,14552,6656,14421,6316,14251,5948,14007,5528,15356,5942,15356,5977,15353,6119,15348,6294,15332,6551,15302,6824,15249,7044,15171,7122,15070,7050,14949,6861,14818,6611,14679,6349,14538,6067,14398,5651,14189,5311,13935,4958,15359,4123,15359,4153,15356,4296,15353,4646,15338,5160,15311,5508,15263,5829,15188,6042,15088,6094,14966,6001,14826,5796,14678,5543,14527,5287,14377,4985,14133,4586,13869,4257,15360,1563,15360,1642,15358,2076,15354,2636,15341,3350,15317,4019,15273,4429,15203,4732,15105,4911,14981,4932,14836,4818,14679,4621,14517,4386,14359,4156,14083,3795,13808,3437,15360,122,15360,137,15358,285,15355,636,15344,1274,15322,2177,15281,2765,15215,3223,15120,3451,14995,3569,14846,3567,14681,3466,14511,3305,14344,3121,14037,2800,13753,2467,15360,0,15360,1,15359,21,15355,89,15346,253,15325,479,15287,796,15225,1148,15133,1492,15008,1749,14856,1882,14685,1886,14506,1783,14324,1608,13996,1398,13702,1183]);let Cl=null;function d$(){return Cl===null&&(Cl=new co(f$,16,16,Mf,ir),Cl.name="DFG_LUT",Cl.minFilter=Wn,Cl.magFilter=Wn,Cl.wrapS=nr,Cl.wrapT=nr,Cl.generateMipmaps=!1,Cl.needsUpdate=!0),Cl}class ET{constructor(e={}){const{canvas:t=qP(),context:i=null,depth:r=!0,stencil:s=!1,alpha:o=!1,antialias:u=!1,premultipliedAlpha:f=!0,preserveDrawingBuffer:p=!1,powerPreference:m="default",failIfMajorPerformanceCaveat:v=!1,reversedDepthBuffer:_=!1,outputBufferType:x=Gr}=e;this.isWebGLRenderer=!0;let S;if(i!==null){if(typeof WebGLRenderingContext<"u"&&i instanceof WebGLRenderingContext)throw new Error("THREE.WebGLRenderer: WebGL 1 is not supported since r163.");S=i.getContextAttributes().alpha}else S=o;const A=x,E=new Set([Gb,Hb,ov]),M=new Set([Gr,Aa,Op,Lp,Fb,Vb]),C=new Uint32Array(4),N=new Int32Array(4);let I=null,U=null;const L=[],F=[];let H=null;this.domElement=t,this.debug={checkShaderErrors:!0,onShaderError:null},this.autoClear=!0,this.autoClearColor=!0,this.autoClearDepth=!0,this.autoClearStencil=!0,this.sortObjects=!0,this.clippingPlanes=[],this.localClippingEnabled=!1,this.toneMapping=lo,this.toneMappingExposure=1,this.transmissionResolutionScale=1;const P=this;let k=!1;this._outputColorSpace=rs;let Y=0,ie=0,te=null,le=-1,de=null;const Z=new mi,Q=new mi;let ve=null;const Te=new Ot(0);let we=0,X=t.width,ce=t.height,xe=1,Be=null,mt=null;const ge=new mi(0,0,X,ce),Re=new mi(0,0,X,ce);let rt=!1;const xt=new em;let Rt=!1,hn=!1;const En=new un,$t=new J,ze=new mi,Je={background:null,fog:null,environment:null,overrideMaterial:null,isScene:!0};let He=!1;function yt(){return te===null?xe:1}let ee=i;function Ft(G,ne){return t.getContext(G,ne)}try{const G={alpha:!0,depth:r,stencil:s,antialias:u,premultipliedAlpha:f,preserveDrawingBuffer:p,powerPreference:m,failIfMajorPerformanceCaveat:v};if("setAttribute"in t&&t.setAttribute("data-engine",`three.js r${Kp}`),t.addEventListener("webglcontextlost",nn,!1),t.addEventListener("webglcontextrestored",Dn,!1),t.addEventListener("webglcontextcreationerror",Ln,!1),ee===null){const ne="webgl2";if(ee=Ft(ne,G),ee===null)throw Ft(ne)?new Error("Error creating WebGL context with your selected attributes."):new Error("Error creating WebGL context.")}}catch(G){throw Xt("WebGLRenderer: "+G.message),G}let St,Vt,ot,$,B,fe,Ie,Ge,De,Tt,ht,Lt,Yt,Xe,$e,Ct,wt,st,jt,pe,Ce,et,Et,Qe;function Fe(){St=new pq(ee),St.init(),et=new JO(ee,St),Vt=new sq(ee,St,e,et),ot=new i$(ee,St),Vt.reversedDepthBuffer&&_&&ot.buffers.depth.setReversed(!0),$=new vq(ee),B=new HX,fe=new r$(ee,St,ot,B,Vt,et,$),Ie=new oq(P),Ge=new dq(P),De=new b9(ee),Et=new iq(ee,De),Tt=new mq(ee,De,$,Et),ht=new _q(ee,Tt,De,$),jt=new yq(ee,Vt,fe),Ct=new aq(B),Lt=new VX(P,Ie,Ge,St,Vt,Et,Ct),Yt=new u$(P,B),Xe=new jX,$e=new ZX(St),st=new nq(P,Ie,Ge,ot,ht,S,f),wt=new t$(P,ht,Vt),Qe=new h$(ee,$,Vt,ot),pe=new rq(ee,St,$),Ce=new gq(ee,St,$),$.programs=Lt.programs,P.capabilities=Vt,P.extensions=St,P.properties=B,P.renderLists=Xe,P.shadowMap=wt,P.state=ot,P.info=$}Fe(),A!==Gr&&(H=new bq(A,t.width,t.height,r,s));const gt=new l$(P,ee);this.xr=gt,this.getContext=function(){return ee},this.getContextAttributes=function(){return ee.getContextAttributes()},this.forceContextLoss=function(){const G=St.get("WEBGL_lose_context");G&&G.loseContext()},this.forceContextRestore=function(){const G=St.get("WEBGL_lose_context");G&&G.restoreContext()},this.getPixelRatio=function(){return xe},this.setPixelRatio=function(G){G!==void 0&&(xe=G,this.setSize(X,ce,!1))},this.getSize=function(G){return G.set(X,ce)},this.setSize=function(G,ne,he=!0){if(gt.isPresenting){At("WebGLRenderer: Can't change size while VR device is presenting.");return}X=G,ce=ne,t.width=Math.floor(G*xe),t.height=Math.floor(ne*xe),he===!0&&(t.style.width=G+"px",t.style.height=ne+"px"),H!==null&&H.setSize(t.width,t.height),this.setViewport(0,0,G,ne)},this.getDrawingBufferSize=function(G){return G.set(X*xe,ce*xe).floor()},this.setDrawingBufferSize=function(G,ne,he){X=G,ce=ne,xe=he,t.width=Math.floor(G*he),t.height=Math.floor(ne*he),this.setViewport(0,0,G,ne)},this.setEffects=function(G){if(A===Gr){console.error("THREE.WebGLRenderer: setEffects() requires outputBufferType set to HalfFloatType or FloatType.");return}if(G){for(let ne=0;ne<G.length;ne++)if(G[ne].isOutputPass===!0){console.warn("THREE.WebGLRenderer: OutputPass is not needed in setEffects(). Tone mapping and color space conversion are applied automatically.");break}}H.setEffects(G||[])},this.getCurrentViewport=function(G){return G.copy(Z)},this.getViewport=function(G){return G.copy(ge)},this.setViewport=function(G,ne,he,me){G.isVector4?ge.set(G.x,G.y,G.z,G.w):ge.set(G,ne,he,me),ot.viewport(Z.copy(ge).multiplyScalar(xe).round())},this.getScissor=function(G){return G.copy(Re)},this.setScissor=function(G,ne,he,me){G.isVector4?Re.set(G.x,G.y,G.z,G.w):Re.set(G,ne,he,me),ot.scissor(Q.copy(Re).multiplyScalar(xe).round())},this.getScissorTest=function(){return rt},this.setScissorTest=function(G){ot.setScissorTest(rt=G)},this.setOpaqueSort=function(G){Be=G},this.setTransparentSort=function(G){mt=G},this.getClearColor=function(G){return G.copy(st.getClearColor())},this.setClearColor=function(){st.setClearColor(...arguments)},this.getClearAlpha=function(){return st.getClearAlpha()},this.setClearAlpha=function(){st.setClearAlpha(...arguments)},this.clear=function(G=!0,ne=!0,he=!0){let me=0;if(G){let oe=!1;if(te!==null){const Ve=te.texture.format;oe=E.has(Ve)}if(oe){const Ve=te.texture.type,nt=M.has(Ve),je=st.getClearColor(),bt=st.getClearAlpha(),ut=je.r,Ut=je.g,pt=je.b;nt?(C[0]=ut,C[1]=Ut,C[2]=pt,C[3]=bt,ee.clearBufferuiv(ee.COLOR,0,C)):(N[0]=ut,N[1]=Ut,N[2]=pt,N[3]=bt,ee.clearBufferiv(ee.COLOR,0,N))}else me|=ee.COLOR_BUFFER_BIT}ne&&(me|=ee.DEPTH_BUFFER_BIT),he&&(me|=ee.STENCIL_BUFFER_BIT,this.state.buffers.stencil.setMask(4294967295)),ee.clear(me)},this.clearColor=function(){this.clear(!0,!1,!1)},this.clearDepth=function(){this.clear(!1,!0,!1)},this.clearStencil=function(){this.clear(!1,!1,!0)},this.dispose=function(){t.removeEventListener("webglcontextlost",nn,!1),t.removeEventListener("webglcontextrestored",Dn,!1),t.removeEventListener("webglcontextcreationerror",Ln,!1),st.dispose(),Xe.dispose(),$e.dispose(),B.dispose(),Ie.dispose(),Ge.dispose(),ht.dispose(),Et.dispose(),Qe.dispose(),Lt.dispose(),gt.dispose(),gt.removeEventListener("sessionstart",jr),gt.removeEventListener("sessionend",Ms),Qt.stop()};function nn(G){G.preventDefault(),B0("WebGLRenderer: Context Lost."),k=!0}function Dn(){B0("WebGLRenderer: Context Restored."),k=!1;const G=$.autoReset,ne=wt.enabled,he=wt.autoUpdate,me=wt.needsUpdate,oe=wt.type;Fe(),$.autoReset=G,wt.enabled=ne,wt.autoUpdate=he,wt.needsUpdate=me,wt.type=oe}function Ln(G){Xt("WebGLRenderer: A WebGL context could not be created. Reason: ",G.statusMessage)}function rr(G){const ne=G.target;ne.removeEventListener("dispose",rr),Lr(ne)}function Lr(G){Ra(G),B.remove(G)}function Ra(G){const ne=B.get(G).programs;ne!==void 0&&(ne.forEach(function(he){Lt.releaseProgram(he)}),G.isShaderMaterial&&Lt.releaseShaderCache(G))}this.renderBufferDirect=function(G,ne,he,me,oe,Ve){ne===null&&(ne=Je);const nt=oe.isMesh&&oe.matrixWorld.determinant()<0,je=tt(G,ne,he,me,oe);ot.setMaterial(me,nt);let bt=he.index,ut=1;if(me.wireframe===!0){if(bt=Tt.getWireframeAttribute(he),bt===void 0)return;ut=2}const Ut=he.drawRange,pt=he.attributes.position;let Pt=Ut.start*ut,fn=(Ut.start+Ut.count)*ut;Ve!==null&&(Pt=Math.max(Pt,Ve.start*ut),fn=Math.min(fn,(Ve.start+Ve.count)*ut)),bt!==null?(Pt=Math.max(Pt,0),fn=Math.min(fn,bt.count)):pt!=null&&(Pt=Math.max(Pt,0),fn=Math.min(fn,pt.count));const qn=fn-Pt;if(qn<0||qn===1/0)return;Et.setup(oe,me,je,he,bt);let yn,Dt=pe;if(bt!==null&&(yn=De.get(bt),Dt=Ce,Dt.setIndex(yn)),oe.isMesh)me.wireframe===!0?(ot.setLineWidth(me.wireframeLinewidth*yt()),Dt.setMode(ee.LINES)):Dt.setMode(ee.TRIANGLES);else if(oe.isLine){let at=me.linewidth;at===void 0&&(at=1),ot.setLineWidth(at*yt()),oe.isLineSegments?Dt.setMode(ee.LINES):oe.isLineLoop?Dt.setMode(ee.LINE_LOOP):Dt.setMode(ee.LINE_STRIP)}else oe.isPoints?Dt.setMode(ee.POINTS):oe.isSprite&&Dt.setMode(ee.TRIANGLES);if(oe.isBatchedMesh)if(oe._multiDrawInstances!==null)kp("WebGLRenderer: renderMultiDrawInstances has been deprecated and will be removed in r184. Append to renderMultiDraw arguments and use indirection."),Dt.renderMultiDrawInstances(oe._multiDrawStarts,oe._multiDrawCounts,oe._multiDrawCount,oe._multiDrawInstances);else if(St.get("WEBGL_multi_draw"))Dt.renderMultiDraw(oe._multiDrawStarts,oe._multiDrawCounts,oe._multiDrawCount);else{const at=oe._multiDrawStarts,Ht=oe._multiDrawCounts,Mt=oe._multiDrawCount,Gn=bt?De.get(bt).bytesPerElement:1,sr=B.get(me).currentProgram.getUniforms();for(let Tn=0;Tn<Mt;Tn++)sr.setValue(ee,"_gl_DrawID",Tn),Dt.render(at[Tn]/Gn,Ht[Tn])}else if(oe.isInstancedMesh)Dt.renderInstances(Pt,qn,oe.count);else if(he.isInstancedBufferGeometry){const at=he._maxInstanceCount!==void 0?he._maxInstanceCount:1/0,Ht=Math.min(he.instanceCount,at);Dt.renderInstances(Pt,qn,Ht)}else Dt.render(Pt,qn)};function Na(G,ne,he){G.transparent===!0&&G.side===jo&&G.forceSinglePass===!1?(G.side=Vs,G.needsUpdate=!0,be(G,ne,he),G.side=Pc,G.needsUpdate=!0,be(G,ne,he),G.side=jo):be(G,ne,he)}this.compile=function(G,ne,he=null){he===null&&(he=G),U=$e.get(he),U.init(ne),F.push(U),he.traverseVisible(function(oe){oe.isLight&&oe.layers.test(ne.layers)&&(U.pushLight(oe),oe.castShadow&&U.pushShadow(oe))}),G!==he&&G.traverseVisible(function(oe){oe.isLight&&oe.layers.test(ne.layers)&&(U.pushLight(oe),oe.castShadow&&U.pushShadow(oe))}),U.setupLights();const me=new Set;return G.traverse(function(oe){if(!(oe.isMesh||oe.isPoints||oe.isLine||oe.isSprite))return;const Ve=oe.material;if(Ve)if(Array.isArray(Ve))for(let nt=0;nt<Ve.length;nt++){const je=Ve[nt];Na(je,he,oe),me.add(je)}else Na(Ve,he,oe),me.add(Ve)}),U=F.pop(),me},this.compileAsync=function(G,ne,he=null){const me=this.compile(G,ne,he);return new Promise(oe=>{function Ve(){if(me.forEach(function(nt){B.get(nt).currentProgram.isReady()&&me.delete(nt)}),me.size===0){oe(G);return}setTimeout(Ve,10)}St.get("KHR_parallel_shader_compile")!==null?Ve():setTimeout(Ve,10)})};let Ws=null;function Da(G){Ws&&Ws(G)}function jr(){Qt.stop()}function Ms(){Qt.start()}const Qt=new XO;Qt.setAnimationLoop(Da),typeof self<"u"&&Qt.setContext(self),this.setAnimationLoop=function(G){Ws=G,gt.setAnimationLoop(G),G===null?Qt.stop():Qt.start()},gt.addEventListener("sessionstart",jr),gt.addEventListener("sessionend",Ms),this.render=function(G,ne){if(ne!==void 0&&ne.isCamera!==!0){Xt("WebGLRenderer.render: camera is not an instance of THREE.Camera.");return}if(k===!0)return;const he=gt.enabled===!0&&gt.isPresenting===!0,me=H!==null&&(te===null||he)&&H.begin(P,te);if(G.matrixWorldAutoUpdate===!0&&G.updateMatrixWorld(),ne.parent===null&&ne.matrixWorldAutoUpdate===!0&&ne.updateMatrixWorld(),gt.enabled===!0&&gt.isPresenting===!0&&(H===null||H.isCompositing()===!1)&&(gt.cameraAutoUpdate===!0&&gt.updateCamera(ne),ne=gt.getCamera()),G.isScene===!0&&G.onBeforeRender(P,G,ne,te),U=$e.get(G,F.length),U.init(ne),F.push(U),En.multiplyMatrices(ne.projectionMatrix,ne.matrixWorldInverse),xt.setFromProjectionMatrix(En,Ma,ne.reversedDepth),hn=this.localClippingEnabled,Rt=Ct.init(this.clippingPlanes,hn),I=Xe.get(G,L.length),I.init(),L.push(I),gt.enabled===!0&&gt.isPresenting===!0){const nt=P.xr.getDepthSensingMesh();nt!==null&&Ur(nt,ne,-1/0,P.sortObjects)}Ur(G,ne,0,P.sortObjects),I.finish(),P.sortObjects===!0&&I.sort(Be,mt),He=gt.enabled===!1||gt.isPresenting===!1||gt.hasDepthSensing()===!1,He&&st.addToRenderList(I,G),this.info.render.frame++,Rt===!0&&Ct.beginShadows();const oe=U.state.shadowsArray;if(wt.render(oe,G,ne),Rt===!0&&Ct.endShadows(),this.info.autoReset===!0&&this.info.reset(),(me&&H.hasRenderPass())===!1){const nt=I.opaque,je=I.transmissive;if(U.setupLights(),ne.isArrayCamera){const bt=ne.cameras;if(je.length>0)for(let ut=0,Ut=bt.length;ut<Ut;ut++){const pt=bt[ut];z(nt,je,G,pt)}He&&st.render(G);for(let ut=0,Ut=bt.length;ut<Ut;ut++){const pt=bt[ut];di(I,G,pt,pt.viewport)}}else je.length>0&&z(nt,je,G,ne),He&&st.render(G),di(I,G,ne)}te!==null&&ie===0&&(fe.updateMultisampleRenderTarget(te),fe.updateRenderTargetMipmap(te)),me&&H.end(P),G.isScene===!0&&G.onAfterRender(P,G,ne),Et.resetDefaultState(),le=-1,de=null,F.pop(),F.length>0?(U=F[F.length-1],Rt===!0&&Ct.setGlobalState(P.clippingPlanes,U.state.camera)):U=null,L.pop(),L.length>0?I=L[L.length-1]:I=null};function Ur(G,ne,he,me){if(G.visible===!1)return;if(G.layers.test(ne.layers)){if(G.isGroup)he=G.renderOrder;else if(G.isLOD)G.autoUpdate===!0&&G.update(ne);else if(G.isLight)U.pushLight(G),G.castShadow&&U.pushShadow(G);else if(G.isSprite){if(!G.frustumCulled||xt.intersectsSprite(G)){me&&ze.setFromMatrixPosition(G.matrixWorld).applyMatrix4(En);const nt=ht.update(G),je=G.material;je.visible&&I.push(G,nt,je,he,ze.z,null)}}else if((G.isMesh||G.isLine||G.isPoints)&&(!G.frustumCulled||xt.intersectsObject(G))){const nt=ht.update(G),je=G.material;if(me&&(G.boundingSphere!==void 0?(G.boundingSphere===null&&G.computeBoundingSphere(),ze.copy(G.boundingSphere.center)):(nt.boundingSphere===null&&nt.computeBoundingSphere(),ze.copy(nt.boundingSphere.center)),ze.applyMatrix4(G.matrixWorld).applyMatrix4(En)),Array.isArray(je)){const bt=nt.groups;for(let ut=0,Ut=bt.length;ut<Ut;ut++){const pt=bt[ut],Pt=je[pt.materialIndex];Pt&&Pt.visible&&I.push(G,nt,Pt,he,ze.z,pt)}}else je.visible&&I.push(G,nt,je,he,ze.z,null)}}const Ve=G.children;for(let nt=0,je=Ve.length;nt<je;nt++)Ur(Ve[nt],ne,he,me)}function di(G,ne,he,me){const{opaque:oe,transmissive:Ve,transparent:nt}=G;U.setupLightsView(he),Rt===!0&&Ct.setGlobalState(P.clippingPlanes,he),me&&ot.viewport(Z.copy(me)),oe.length>0&&q(oe,ne,he),Ve.length>0&&q(Ve,ne,he),nt.length>0&&q(nt,ne,he),ot.buffers.depth.setTest(!0),ot.buffers.depth.setMask(!0),ot.buffers.color.setMask(!0),ot.setPolygonOffset(!1)}function z(G,ne,he,me){if((he.isScene===!0?he.overrideMaterial:null)!==null)return;if(U.state.transmissionRenderTarget[me.id]===void 0){const Pt=St.has("EXT_color_buffer_half_float")||St.has("EXT_color_buffer_float");U.state.transmissionRenderTarget[me.id]=new Hs(1,1,{generateMipmaps:!0,type:Pt?ir:Gr,minFilter:Il,samples:Vt.samples,stencilBuffer:s,resolveDepthBuffer:!1,resolveStencilBuffer:!1,colorSpace:Hn.workingColorSpace})}const Ve=U.state.transmissionRenderTarget[me.id],nt=me.viewport||Z;Ve.setSize(nt.z*P.transmissionResolutionScale,nt.w*P.transmissionResolutionScale);const je=P.getRenderTarget(),bt=P.getActiveCubeFace(),ut=P.getActiveMipmapLevel();P.setRenderTarget(Ve),P.getClearColor(Te),we=P.getClearAlpha(),we<1&&P.setClearColor(16777215,.5),P.clear(),He&&st.render(he);const Ut=P.toneMapping;P.toneMapping=lo;const pt=me.viewport;if(me.viewport!==void 0&&(me.viewport=void 0),U.setupLightsView(me),Rt===!0&&Ct.setGlobalState(P.clippingPlanes,me),q(G,he,me),fe.updateMultisampleRenderTarget(Ve),fe.updateRenderTargetMipmap(Ve),St.has("WEBGL_multisampled_render_to_texture")===!1){let Pt=!1;for(let fn=0,qn=ne.length;fn<qn;fn++){const yn=ne[fn],{object:Dt,geometry:at,material:Ht,group:Mt}=yn;if(Ht.side===jo&&Dt.layers.test(me.layers)){const Gn=Ht.side;Ht.side=Vs,Ht.needsUpdate=!0,se(Dt,he,me,at,Ht,Mt),Ht.side=Gn,Ht.needsUpdate=!0,Pt=!0}}Pt===!0&&(fe.updateMultisampleRenderTarget(Ve),fe.updateRenderTargetMipmap(Ve))}P.setRenderTarget(je,bt,ut),P.setClearColor(Te,we),pt!==void 0&&(me.viewport=pt),P.toneMapping=Ut}function q(G,ne,he){const me=ne.isScene===!0?ne.overrideMaterial:null;for(let oe=0,Ve=G.length;oe<Ve;oe++){const nt=G[oe],{object:je,geometry:bt,group:ut}=nt;let Ut=nt.material;Ut.allowOverride===!0&&me!==null&&(Ut=me),je.layers.test(he.layers)&&se(je,ne,he,bt,Ut,ut)}}function se(G,ne,he,me,oe,Ve){G.onBeforeRender(P,ne,he,me,oe,Ve),G.modelViewMatrix.multiplyMatrices(he.matrixWorldInverse,G.matrixWorld),G.normalMatrix.getNormalMatrix(G.modelViewMatrix),oe.onBeforeRender(P,ne,he,me,G,Ve),oe.transparent===!0&&oe.side===jo&&oe.forceSinglePass===!1?(oe.side=Vs,oe.needsUpdate=!0,P.renderBufferDirect(he,ne,me,oe,G,Ve),oe.side=Pc,oe.needsUpdate=!0,P.renderBufferDirect(he,ne,me,oe,G,Ve),oe.side=jo):P.renderBufferDirect(he,ne,me,oe,G,Ve),G.onAfterRender(P,ne,he,me,oe,Ve)}function be(G,ne,he){ne.isScene!==!0&&(ne=Je);const me=B.get(G),oe=U.state.lights,Ve=U.state.shadowsArray,nt=oe.state.version,je=Lt.getParameters(G,oe.state,Ve,ne,he),bt=Lt.getProgramCacheKey(je);let ut=me.programs;me.environment=G.isMeshStandardMaterial?ne.environment:null,me.fog=ne.fog,me.envMap=(G.isMeshStandardMaterial?Ge:Ie).get(G.envMap||me.environment),me.envMapRotation=me.environment!==null&&G.envMap===null?ne.environmentRotation:G.envMapRotation,ut===void 0&&(G.addEventListener("dispose",rr),ut=new Map,me.programs=ut);let Ut=ut.get(bt);if(Ut!==void 0){if(me.currentProgram===Ut&&me.lightsStateVersion===nt)return Ue(G,je),Ut}else je.uniforms=Lt.getUniforms(G),G.onBeforeCompile(je,P),Ut=Lt.acquireProgram(je,bt),ut.set(bt,Ut),me.uniforms=je.uniforms;const pt=me.uniforms;return(!G.isShaderMaterial&&!G.isRawShaderMaterial||G.clipping===!0)&&(pt.clippingPlanes=Ct.uniform),Ue(G,je),me.needsLights=ft(G),me.lightsStateVersion=nt,me.needsLights&&(pt.ambientLightColor.value=oe.state.ambient,pt.lightProbe.value=oe.state.probe,pt.directionalLights.value=oe.state.directional,pt.directionalLightShadows.value=oe.state.directionalShadow,pt.spotLights.value=oe.state.spot,pt.spotLightShadows.value=oe.state.spotShadow,pt.rectAreaLights.value=oe.state.rectArea,pt.ltc_1.value=oe.state.rectAreaLTC1,pt.ltc_2.value=oe.state.rectAreaLTC2,pt.pointLights.value=oe.state.point,pt.pointLightShadows.value=oe.state.pointShadow,pt.hemisphereLights.value=oe.state.hemi,pt.directionalShadowMap.value=oe.state.directionalShadowMap,pt.directionalShadowMatrix.value=oe.state.directionalShadowMatrix,pt.spotShadowMap.value=oe.state.spotShadowMap,pt.spotLightMatrix.value=oe.state.spotLightMatrix,pt.spotLightMap.value=oe.state.spotLightMap,pt.pointShadowMap.value=oe.state.pointShadowMap,pt.pointShadowMatrix.value=oe.state.pointShadowMatrix),me.currentProgram=Ut,me.uniformsList=null,Ut}function Oe(G){if(G.uniformsList===null){const ne=G.currentProgram.getUniforms();G.uniformsList=px.seqWithValue(ne.seq,G.uniforms)}return G.uniformsList}function Ue(G,ne){const he=B.get(G);he.outputColorSpace=ne.outputColorSpace,he.batching=ne.batching,he.batchingColor=ne.batchingColor,he.instancing=ne.instancing,he.instancingColor=ne.instancingColor,he.instancingMorph=ne.instancingMorph,he.skinning=ne.skinning,he.morphTargets=ne.morphTargets,he.morphNormals=ne.morphNormals,he.morphColors=ne.morphColors,he.morphTargetsCount=ne.morphTargetsCount,he.numClippingPlanes=ne.numClippingPlanes,he.numIntersection=ne.numClipIntersection,he.vertexAlphas=ne.vertexAlphas,he.vertexTangents=ne.vertexTangents,he.toneMapping=ne.toneMapping}function tt(G,ne,he,me,oe){ne.isScene!==!0&&(ne=Je),fe.resetTextureUnits();const Ve=ne.fog,nt=me.isMeshStandardMaterial?ne.environment:null,je=te===null?P.outputColorSpace:te.isXRRenderTarget===!0?te.texture.colorSpace:Yo,bt=(me.isMeshStandardMaterial?Ge:Ie).get(me.envMap||nt),ut=me.vertexColors===!0&&!!he.attributes.color&&he.attributes.color.itemSize===4,Ut=!!he.attributes.tangent&&(!!me.normalMap||me.anisotropy>0),pt=!!he.morphAttributes.position,Pt=!!he.morphAttributes.normal,fn=!!he.morphAttributes.color;let qn=lo;me.toneMapped&&(te===null||te.isXRRenderTarget===!0)&&(qn=P.toneMapping);const yn=he.morphAttributes.position||he.morphAttributes.normal||he.morphAttributes.color,Dt=yn!==void 0?yn.length:0,at=B.get(me),Ht=U.state.lights;if(Rt===!0&&(hn===!0||G!==de)){const mr=G===de&&me.id===le;Ct.setState(me,G,mr)}let Mt=!1;me.version===at.__version?(at.needsLights&&at.lightsStateVersion!==Ht.state.version||at.outputColorSpace!==je||oe.isBatchedMesh&&at.batching===!1||!oe.isBatchedMesh&&at.batching===!0||oe.isBatchedMesh&&at.batchingColor===!0&&oe.colorTexture===null||oe.isBatchedMesh&&at.batchingColor===!1&&oe.colorTexture!==null||oe.isInstancedMesh&&at.instancing===!1||!oe.isInstancedMesh&&at.instancing===!0||oe.isSkinnedMesh&&at.skinning===!1||!oe.isSkinnedMesh&&at.skinning===!0||oe.isInstancedMesh&&at.instancingColor===!0&&oe.instanceColor===null||oe.isInstancedMesh&&at.instancingColor===!1&&oe.instanceColor!==null||oe.isInstancedMesh&&at.instancingMorph===!0&&oe.morphTexture===null||oe.isInstancedMesh&&at.instancingMorph===!1&&oe.morphTexture!==null||at.envMap!==bt||me.fog===!0&&at.fog!==Ve||at.numClippingPlanes!==void 0&&(at.numClippingPlanes!==Ct.numPlanes||at.numIntersection!==Ct.numIntersection)||at.vertexAlphas!==ut||at.vertexTangents!==Ut||at.morphTargets!==pt||at.morphNormals!==Pt||at.morphColors!==fn||at.toneMapping!==qn||at.morphTargetsCount!==Dt)&&(Mt=!0):(Mt=!0,at.__version=me.version);let Gn=at.currentProgram;Mt===!0&&(Gn=be(me,ne,oe));let sr=!1,Tn=!1,vi=!1;const $n=Gn.getUniforms(),ar=at.uniforms;if(ot.useProgram(Gn.program)&&(sr=!0,Tn=!0,vi=!0),me.id!==le&&(le=me.id,Tn=!0),sr||de!==G){ot.buffers.depth.getReversed()&&G.reversedDepth!==!0&&(G._reversedDepth=!0,G.updateProjectionMatrix()),$n.setValue(ee,"projectionMatrix",G.projectionMatrix),$n.setValue(ee,"viewMatrix",G.matrixWorldInverse);const gr=$n.map.cameraPosition;gr!==void 0&&gr.setValue(ee,$t.setFromMatrixPosition(G.matrixWorld)),Vt.logarithmicDepthBuffer&&$n.setValue(ee,"logDepthBufFC",2/(Math.log(G.far+1)/Math.LN2)),(me.isMeshPhongMaterial||me.isMeshToonMaterial||me.isMeshLambertMaterial||me.isMeshBasicMaterial||me.isMeshStandardMaterial||me.isShaderMaterial)&&$n.setValue(ee,"isOrthographic",G.isOrthographicCamera===!0),de!==G&&(de=G,Tn=!0,vi=!0)}if(at.needsLights&&(Ht.state.directionalShadowMap.length>0&&$n.setValue(ee,"directionalShadowMap",Ht.state.directionalShadowMap,fe),Ht.state.spotShadowMap.length>0&&$n.setValue(ee,"spotShadowMap",Ht.state.spotShadowMap,fe),Ht.state.pointShadowMap.length>0&&$n.setValue(ee,"pointShadowMap",Ht.state.pointShadowMap,fe)),oe.isSkinnedMesh){$n.setOptional(ee,oe,"bindMatrix"),$n.setOptional(ee,oe,"bindMatrixInverse");const mr=oe.skeleton;mr&&(mr.boneTexture===null&&mr.computeBoneTexture(),$n.setValue(ee,"boneTexture",mr.boneTexture,fe))}oe.isBatchedMesh&&($n.setOptional(ee,oe,"batchingTexture"),$n.setValue(ee,"batchingTexture",oe._matricesTexture,fe),$n.setOptional(ee,oe,"batchingIdTexture"),$n.setValue(ee,"batchingIdTexture",oe._indirectTexture,fe),$n.setOptional(ee,oe,"batchingColorTexture"),oe._colorsTexture!==null&&$n.setValue(ee,"batchingColorTexture",oe._colorsTexture,fe));const $i=he.morphAttributes;if(($i.position!==void 0||$i.normal!==void 0||$i.color!==void 0)&&jt.update(oe,he,Gn),(Tn||at.receiveShadow!==oe.receiveShadow)&&(at.receiveShadow=oe.receiveShadow,$n.setValue(ee,"receiveShadow",oe.receiveShadow)),me.isMeshGouraudMaterial&&me.envMap!==null&&(ar.envMap.value=bt,ar.flipEnvMap.value=bt.isCubeTexture&&bt.isRenderTargetTexture===!1?-1:1),me.isMeshStandardMaterial&&me.envMap===null&&ne.environment!==null&&(ar.envMapIntensity.value=ne.environmentIntensity),ar.dfgLUT!==void 0&&(ar.dfgLUT.value=d$()),Tn&&($n.setValue(ee,"toneMappingExposure",P.toneMappingExposure),at.needsLights&&Ze(ar,vi),Ve&&me.fog===!0&&Yt.refreshFogUniforms(ar,Ve),Yt.refreshMaterialUniforms(ar,me,xe,ce,U.state.transmissionRenderTarget[G.id]),px.upload(ee,Oe(at),ar,fe)),me.isShaderMaterial&&me.uniformsNeedUpdate===!0&&(px.upload(ee,Oe(at),ar,fe),me.uniformsNeedUpdate=!1),me.isSpriteMaterial&&$n.setValue(ee,"center",oe.center),$n.setValue(ee,"modelViewMatrix",oe.modelViewMatrix),$n.setValue(ee,"normalMatrix",oe.normalMatrix),$n.setValue(ee,"modelMatrix",oe.matrixWorld),me.isShaderMaterial||me.isRawShaderMaterial){const mr=me.uniformsGroups;for(let gr=0,Hl=mr.length;gr<Hl;gr++){const qs=mr[gr];Qe.update(qs,Gn),Qe.bind(qs,Gn)}}return Gn}function Ze(G,ne){G.ambientLightColor.needsUpdate=ne,G.lightProbe.needsUpdate=ne,G.directionalLights.needsUpdate=ne,G.directionalLightShadows.needsUpdate=ne,G.pointLights.needsUpdate=ne,G.pointLightShadows.needsUpdate=ne,G.spotLights.needsUpdate=ne,G.spotLightShadows.needsUpdate=ne,G.rectAreaLights.needsUpdate=ne,G.hemisphereLights.needsUpdate=ne}function ft(G){return G.isMeshLambertMaterial||G.isMeshToonMaterial||G.isMeshPhongMaterial||G.isMeshStandardMaterial||G.isShadowMaterial||G.isShaderMaterial&&G.lights===!0}this.getActiveCubeFace=function(){return Y},this.getActiveMipmapLevel=function(){return ie},this.getRenderTarget=function(){return te},this.setRenderTargetTextures=function(G,ne,he){const me=B.get(G);me.__autoAllocateDepthBuffer=G.resolveDepthBuffer===!1,me.__autoAllocateDepthBuffer===!1&&(me.__useRenderToTexture=!1),B.get(G.texture).__webglTexture=ne,B.get(G.depthTexture).__webglTexture=me.__autoAllocateDepthBuffer?void 0:he,me.__hasExternalTextures=!0},this.setRenderTargetFramebuffer=function(G,ne){const he=B.get(G);he.__webglFramebuffer=ne,he.__useDefaultFramebuffer=ne===void 0};const ct=ee.createFramebuffer();this.setRenderTarget=function(G,ne=0,he=0){te=G,Y=ne,ie=he;let me=null,oe=!1,Ve=!1;if(G){const je=B.get(G);if(je.__useDefaultFramebuffer!==void 0){ot.bindFramebuffer(ee.FRAMEBUFFER,je.__webglFramebuffer),Z.copy(G.viewport),Q.copy(G.scissor),ve=G.scissorTest,ot.viewport(Z),ot.scissor(Q),ot.setScissorTest(ve),le=-1;return}else if(je.__webglFramebuffer===void 0)fe.setupRenderTarget(G);else if(je.__hasExternalTextures)fe.rebindTextures(G,B.get(G.texture).__webglTexture,B.get(G.depthTexture).__webglTexture);else if(G.depthBuffer){const Ut=G.depthTexture;if(je.__boundDepthTexture!==Ut){if(Ut!==null&&B.has(Ut)&&(G.width!==Ut.image.width||G.height!==Ut.image.height))throw new Error("WebGLRenderTarget: Attached DepthTexture is initialized to the incorrect size.");fe.setupDepthRenderbuffer(G)}}const bt=G.texture;(bt.isData3DTexture||bt.isDataArrayTexture||bt.isCompressedArrayTexture)&&(Ve=!0);const ut=B.get(G).__webglFramebuffer;G.isWebGLCubeRenderTarget?(Array.isArray(ut[ne])?me=ut[ne][he]:me=ut[ne],oe=!0):G.samples>0&&fe.useMultisampledRTT(G)===!1?me=B.get(G).__webglMultisampledFramebuffer:Array.isArray(ut)?me=ut[he]:me=ut,Z.copy(G.viewport),Q.copy(G.scissor),ve=G.scissorTest}else Z.copy(ge).multiplyScalar(xe).floor(),Q.copy(Re).multiplyScalar(xe).floor(),ve=rt;if(he!==0&&(me=ct),ot.bindFramebuffer(ee.FRAMEBUFFER,me)&&ot.drawBuffers(G,me),ot.viewport(Z),ot.scissor(Q),ot.setScissorTest(ve),oe){const je=B.get(G.texture);ee.framebufferTexture2D(ee.FRAMEBUFFER,ee.COLOR_ATTACHMENT0,ee.TEXTURE_CUBE_MAP_POSITIVE_X+ne,je.__webglTexture,he)}else if(Ve){const je=ne;for(let bt=0;bt<G.textures.length;bt++){const ut=B.get(G.textures[bt]);ee.framebufferTextureLayer(ee.FRAMEBUFFER,ee.COLOR_ATTACHMENT0+bt,ut.__webglTexture,he,je)}}else if(G!==null&&he!==0){const je=B.get(G.texture);ee.framebufferTexture2D(ee.FRAMEBUFFER,ee.COLOR_ATTACHMENT0,ee.TEXTURE_2D,je.__webglTexture,he)}le=-1},this.readRenderTargetPixels=function(G,ne,he,me,oe,Ve,nt,je=0){if(!(G&&G.isWebGLRenderTarget)){Xt("WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.");return}let bt=B.get(G).__webglFramebuffer;if(G.isWebGLCubeRenderTarget&&nt!==void 0&&(bt=bt[nt]),bt){ot.bindFramebuffer(ee.FRAMEBUFFER,bt);try{const ut=G.textures[je],Ut=ut.format,pt=ut.type;if(!Vt.textureFormatReadable(Ut)){Xt("WebGLRenderer.readRenderTargetPixels: renderTarget is not in RGBA or implementation defined format.");return}if(!Vt.textureTypeReadable(pt)){Xt("WebGLRenderer.readRenderTargetPixels: renderTarget is not in UnsignedByteType or implementation defined type.");return}ne>=0&&ne<=G.width-me&&he>=0&&he<=G.height-oe&&(G.textures.length>1&&ee.readBuffer(ee.COLOR_ATTACHMENT0+je),ee.readPixels(ne,he,me,oe,et.convert(Ut),et.convert(pt),Ve))}finally{const ut=te!==null?B.get(te).__webglFramebuffer:null;ot.bindFramebuffer(ee.FRAMEBUFFER,ut)}}},this.readRenderTargetPixelsAsync=async function(G,ne,he,me,oe,Ve,nt,je=0){if(!(G&&G.isWebGLRenderTarget))throw new Error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.");let bt=B.get(G).__webglFramebuffer;if(G.isWebGLCubeRenderTarget&&nt!==void 0&&(bt=bt[nt]),bt)if(ne>=0&&ne<=G.width-me&&he>=0&&he<=G.height-oe){ot.bindFramebuffer(ee.FRAMEBUFFER,bt);const ut=G.textures[je],Ut=ut.format,pt=ut.type;if(!Vt.textureFormatReadable(Ut))throw new Error("THREE.WebGLRenderer.readRenderTargetPixelsAsync: renderTarget is not in RGBA or implementation defined format.");if(!Vt.textureTypeReadable(pt))throw new Error("THREE.WebGLRenderer.readRenderTargetPixelsAsync: renderTarget is not in UnsignedByteType or implementation defined type.");const Pt=ee.createBuffer();ee.bindBuffer(ee.PIXEL_PACK_BUFFER,Pt),ee.bufferData(ee.PIXEL_PACK_BUFFER,Ve.byteLength,ee.STREAM_READ),G.textures.length>1&&ee.readBuffer(ee.COLOR_ATTACHMENT0+je),ee.readPixels(ne,he,me,oe,et.convert(Ut),et.convert(pt),0);const fn=te!==null?B.get(te).__webglFramebuffer:null;ot.bindFramebuffer(ee.FRAMEBUFFER,fn);const qn=ee.fenceSync(ee.SYNC_GPU_COMMANDS_COMPLETE,0);return ee.flush(),await EG(ee,qn,4),ee.bindBuffer(ee.PIXEL_PACK_BUFFER,Pt),ee.getBufferSubData(ee.PIXEL_PACK_BUFFER,0,Ve),ee.deleteBuffer(Pt),ee.deleteSync(qn),Ve}else throw new Error("THREE.WebGLRenderer.readRenderTargetPixelsAsync: requested read bounds are out of range.")},this.copyFramebufferToTexture=function(G,ne=null,he=0){const me=Math.pow(2,-he),oe=Math.floor(G.image.width*me),Ve=Math.floor(G.image.height*me),nt=ne!==null?ne.x:0,je=ne!==null?ne.y:0;fe.setTexture2D(G,0),ee.copyTexSubImage2D(ee.TEXTURE_2D,he,0,0,nt,je,oe,Ve),ot.unbindTexture()};const vt=ee.createFramebuffer(),lt=ee.createFramebuffer();this.copyTextureToTexture=function(G,ne,he=null,me=null,oe=0,Ve=null){Ve===null&&(oe!==0?(kp("WebGLRenderer: copyTextureToTexture function signature has changed to support src and dst mipmap levels."),Ve=oe,oe=0):Ve=0);let nt,je,bt,ut,Ut,pt,Pt,fn,qn;const yn=G.isCompressedTexture?G.mipmaps[Ve]:G.image;if(he!==null)nt=he.max.x-he.min.x,je=he.max.y-he.min.y,bt=he.isBox3?he.max.z-he.min.z:1,ut=he.min.x,Ut=he.min.y,pt=he.isBox3?he.min.z:0;else{const $i=Math.pow(2,-oe);nt=Math.floor(yn.width*$i),je=Math.floor(yn.height*$i),G.isDataArrayTexture?bt=yn.depth:G.isData3DTexture?bt=Math.floor(yn.depth*$i):bt=1,ut=0,Ut=0,pt=0}me!==null?(Pt=me.x,fn=me.y,qn=me.z):(Pt=0,fn=0,qn=0);const Dt=et.convert(ne.format),at=et.convert(ne.type);let Ht;ne.isData3DTexture?(fe.setTexture3D(ne,0),Ht=ee.TEXTURE_3D):ne.isDataArrayTexture||ne.isCompressedArrayTexture?(fe.setTexture2DArray(ne,0),Ht=ee.TEXTURE_2D_ARRAY):(fe.setTexture2D(ne,0),Ht=ee.TEXTURE_2D),ee.pixelStorei(ee.UNPACK_FLIP_Y_WEBGL,ne.flipY),ee.pixelStorei(ee.UNPACK_PREMULTIPLY_ALPHA_WEBGL,ne.premultiplyAlpha),ee.pixelStorei(ee.UNPACK_ALIGNMENT,ne.unpackAlignment);const Mt=ee.getParameter(ee.UNPACK_ROW_LENGTH),Gn=ee.getParameter(ee.UNPACK_IMAGE_HEIGHT),sr=ee.getParameter(ee.UNPACK_SKIP_PIXELS),Tn=ee.getParameter(ee.UNPACK_SKIP_ROWS),vi=ee.getParameter(ee.UNPACK_SKIP_IMAGES);ee.pixelStorei(ee.UNPACK_ROW_LENGTH,yn.width),ee.pixelStorei(ee.UNPACK_IMAGE_HEIGHT,yn.height),ee.pixelStorei(ee.UNPACK_SKIP_PIXELS,ut),ee.pixelStorei(ee.UNPACK_SKIP_ROWS,Ut),ee.pixelStorei(ee.UNPACK_SKIP_IMAGES,pt);const $n=G.isDataArrayTexture||G.isData3DTexture,ar=ne.isDataArrayTexture||ne.isData3DTexture;if(G.isDepthTexture){const $i=B.get(G),mr=B.get(ne),gr=B.get($i.__renderTarget),Hl=B.get(mr.__renderTarget);ot.bindFramebuffer(ee.READ_FRAMEBUFFER,gr.__webglFramebuffer),ot.bindFramebuffer(ee.DRAW_FRAMEBUFFER,Hl.__webglFramebuffer);for(let qs=0;qs<bt;qs++)$n&&(ee.framebufferTextureLayer(ee.READ_FRAMEBUFFER,ee.COLOR_ATTACHMENT0,B.get(G).__webglTexture,oe,pt+qs),ee.framebufferTextureLayer(ee.DRAW_FRAMEBUFFER,ee.COLOR_ATTACHMENT0,B.get(ne).__webglTexture,Ve,qn+qs)),ee.blitFramebuffer(ut,Ut,nt,je,Pt,fn,nt,je,ee.DEPTH_BUFFER_BIT,ee.NEAREST);ot.bindFramebuffer(ee.READ_FRAMEBUFFER,null),ot.bindFramebuffer(ee.DRAW_FRAMEBUFFER,null)}else if(oe!==0||G.isRenderTargetTexture||B.has(G)){const $i=B.get(G),mr=B.get(ne);ot.bindFramebuffer(ee.READ_FRAMEBUFFER,vt),ot.bindFramebuffer(ee.DRAW_FRAMEBUFFER,lt);for(let gr=0;gr<bt;gr++)$n?ee.framebufferTextureLayer(ee.READ_FRAMEBUFFER,ee.COLOR_ATTACHMENT0,$i.__webglTexture,oe,pt+gr):ee.framebufferTexture2D(ee.READ_FRAMEBUFFER,ee.COLOR_ATTACHMENT0,ee.TEXTURE_2D,$i.__webglTexture,oe),ar?ee.framebufferTextureLayer(ee.DRAW_FRAMEBUFFER,ee.COLOR_ATTACHMENT0,mr.__webglTexture,Ve,qn+gr):ee.framebufferTexture2D(ee.DRAW_FRAMEBUFFER,ee.COLOR_ATTACHMENT0,ee.TEXTURE_2D,mr.__webglTexture,Ve),oe!==0?ee.blitFramebuffer(ut,Ut,nt,je,Pt,fn,nt,je,ee.COLOR_BUFFER_BIT,ee.NEAREST):ar?ee.copyTexSubImage3D(Ht,Ve,Pt,fn,qn+gr,ut,Ut,nt,je):ee.copyTexSubImage2D(Ht,Ve,Pt,fn,ut,Ut,nt,je);ot.bindFramebuffer(ee.READ_FRAMEBUFFER,null),ot.bindFramebuffer(ee.DRAW_FRAMEBUFFER,null)}else ar?G.isDataTexture||G.isData3DTexture?ee.texSubImage3D(Ht,Ve,Pt,fn,qn,nt,je,bt,Dt,at,yn.data):ne.isCompressedArrayTexture?ee.compressedTexSubImage3D(Ht,Ve,Pt,fn,qn,nt,je,bt,Dt,yn.data):ee.texSubImage3D(Ht,Ve,Pt,fn,qn,nt,je,bt,Dt,at,yn):G.isDataTexture?ee.texSubImage2D(ee.TEXTURE_2D,Ve,Pt,fn,nt,je,Dt,at,yn.data):G.isCompressedTexture?ee.compressedTexSubImage2D(ee.TEXTURE_2D,Ve,Pt,fn,yn.width,yn.height,Dt,yn.data):ee.texSubImage2D(ee.TEXTURE_2D,Ve,Pt,fn,nt,je,Dt,at,yn);ee.pixelStorei(ee.UNPACK_ROW_LENGTH,Mt),ee.pixelStorei(ee.UNPACK_IMAGE_HEIGHT,Gn),ee.pixelStorei(ee.UNPACK_SKIP_PIXELS,sr),ee.pixelStorei(ee.UNPACK_SKIP_ROWS,Tn),ee.pixelStorei(ee.UNPACK_SKIP_IMAGES,vi),Ve===0&&ne.generateMipmaps&&ee.generateMipmap(Ht),ot.unbindTexture()},this.initRenderTarget=function(G){B.get(G).__webglFramebuffer===void 0&&fe.setupRenderTarget(G)},this.initTexture=function(G){G.isCubeTexture?fe.setTextureCube(G,0):G.isData3DTexture?fe.setTexture3D(G,0):G.isDataArrayTexture||G.isCompressedArrayTexture?fe.setTexture2DArray(G,0):fe.setTexture2D(G,0),ot.unbindTexture()},this.resetState=function(){Y=0,ie=0,te=null,ot.reset(),Et.reset()},typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}get coordinateSystem(){return Ma}get outputColorSpace(){return this._outputColorSpace}set outputColorSpace(e){this._outputColorSpace=e;const t=this.getContext();t.drawingBufferColorSpace=Hn._getDrawingBufferColorSpace(e),t.unpackColorSpace=Hn._getUnpackColorSpace()}}const p$=Object.freeze(Object.defineProperty({__proto__:null,ACESFilmicToneMapping:kb,AddEquation:Bu,AddOperation:DP,AdditiveAnimationBlendMode:XE,AdditiveBlending:Ax,AgXToneMapping:FE,AlphaFormat:WE,AlwaysCompare:GP,AlwaysDepth:Dx,AlwaysStencilFunc:AM,AmbientLight:UO,AnimationAction:jO,AnimationClip:j0,AnimationLoader:pj,AnimationMixer:Vj,AnimationObjectGroup:zj,AnimationUtils:uj,ArcCurve:cO,ArrayCamera:VO,ArrowHelper:f9,AttachedBindMode:EM,Audio:HO,AudioAnalyser:Rj,AudioContext:yT,AudioListener:Tj,AudioLoader:wj,AxesHelper:d9,BackSide:Vs,BasicDepthPacking:UP,BasicShadowMap:hP,BatchedMesh:iO,Bone:QE,BooleanKeyframeTrack:Nf,Box2:Zj,Box3:bs,Box3Helper:u9,BoxGeometry:Rf,BoxHelper:c9,BufferAttribute:fi,BufferGeometry:vn,BufferGeometryLoader:FO,ByteType:Bb,Cache:Pl,Camera:Yb,CameraHelper:l9,CanvasTexture:P2,CapsuleGeometry:iS,CatmullRomCurve3:uO,CineonToneMapping:BE,CircleGeometry:rS,ClampToEdgeWrapping:nr,Clock:_T,Color:Ot,ColorKeyframeTrack:pT,ColorManagement:Hn,CompressedArrayTexture:D2,CompressedCubeTexture:I2,CompressedTexture:nS,CompressedTextureLoader:mj,ConeGeometry:hv,ConstantAlphaFactor:CP,ConstantColorFactor:TP,Controls:m9,CubeCamera:KP,CubeDepthTexture:oO,CubeReflectionMapping:$o,CubeRefractionMapping:Xu,CubeTexture:lv,CubeTextureLoader:DO,CubeUVReflectionMapping:Jp,CubicBezierCurve:iT,CubicBezierCurve3:hO,CubicInterpolant:CO,CullFaceBack:SM,CullFaceFront:uP,CullFaceFrontBack:UH,CullFaceNone:cP,Curve:Ko,CurvePath:dO,CustomBlending:fP,CustomToneMapping:zE,CylinderGeometry:uv,Cylindrical:Yj,Data3DTexture:$b,DataArrayTexture:Xb,DataTexture:co,DataTextureLoader:mT,DataUtils:gf,DecrementStencilOp:QH,DecrementWrapStencilOp:tG,DefaultLoadingManager:Tp,DepthFormat:Bl,DepthStencilFormat:Fu,DepthTexture:Hp,DetachedBindMode:IP,DirectionalLight:LO,DirectionalLightHelper:o9,DiscreteInterpolant:RO,DodecahedronGeometry:sS,DoubleSide:jo,DstAlphaFactor:bP,DstColorFactor:wP,DynamicCopyUsage:gG,DynamicDrawUsage:uG,DynamicReadUsage:dG,EdgesGeometry:lO,EllipseCurve:aS,EqualCompare:FP,EqualDepth:Px,EqualStencilFunc:sG,EquirectangularReflectionMapping:Pp,EquirectangularRefractionMapping:N0,Euler:Ca,EventDispatcher:Fl,ExternalTexture:tT,ExtrudeGeometry:oS,FileLoader:Ta,Float16BufferAttribute:c2,Float32BufferAttribute:kt,FloatType:ki,Fog:Jb,FogExp2:Kb,FramebufferTexture:N2,FrontSide:Pc,Frustum:em,FrustumArray:tS,GLBufferAttribute:qj,GLSL1:yG,GLSL3:CM,GreaterCompare:VP,GreaterDepth:Lx,GreaterEqualCompare:qb,GreaterEqualDepth:Ox,GreaterEqualStencilFunc:cG,GreaterStencilFunc:oG,GridHelper:s9,Group:Ep,HalfFloatType:ir,HemisphereLight:IO,HemisphereLightHelper:r9,IcosahedronGeometry:fv,ImageBitmapLoader:Sj,ImageLoader:W0,ImageUtils:XP,IncrementStencilOp:JH,IncrementWrapStencilOp:eG,InstancedBufferAttribute:Vp,InstancedBufferGeometry:zO,InstancedInterleavedBuffer:Wj,InstancedMesh:nO,Int16BufferAttribute:o2,Int32BufferAttribute:l2,Int8BufferAttribute:r2,IntType:sv,InterleavedBuffer:Qb,InterleavedBufferAttribute:Ef,Interpolant:mv,InterpolateDiscrete:P0,InterpolateLinear:mb,InterpolateSmooth:fx,InterpolationSamplingMode:bG,InterpolationSamplingType:xG,InvertStencilOp:nG,KeepStencilOp:af,KeyframeTrack:po,LOD:eO,LatheGeometry:lS,Layers:zp,LessCompare:zP,LessDepth:Ix,LessEqualCompare:Wb,LessEqualDepth:wf,LessEqualStencilFunc:aG,LessStencilFunc:rG,Light:eh,LightProbe:BO,Line:Yu,Line3:Qj,LineBasicMaterial:Gs,LineCurve:rT,LineCurve3:fO,LineDashedMaterial:TO,LineLoop:rO,LineSegments:Vl,LinearFilter:Wn,LinearInterpolant:dT,LinearMipMapLinearFilter:TM,LinearMipMapNearestFilter:zH,LinearMipmapLinearFilter:Il,LinearMipmapNearestFilter:o0,LinearSRGBColorSpace:Yo,LinearToneMapping:UE,LinearTransfer:L0,Loader:js,LoaderUtils:PM,LoadingManager:mS,LoopOnce:PP,LoopPingPong:LP,LoopRepeat:OP,MOUSE:OH,Material:ws,MaterialLoader:gS,MathUtils:HG,Matrix2:MT,Matrix3:xn,Matrix4:un,MaxEquation:gP,Mesh:Xi,MeshBasicMaterial:Lc,MeshDepthMaterial:uT,MeshDistanceMaterial:hT,MeshLambertMaterial:MO,MeshMatcapMaterial:EO,MeshNormalMaterial:wO,MeshPhongMaterial:bO,MeshPhysicalMaterial:xO,MeshStandardMaterial:cT,MeshToonMaterial:SO,MinEquation:mP,MirroredRepeatWrapping:I0,MixOperation:NP,MultiplyBlending:MM,MultiplyOperation:rv,NearestFilter:dr,NearestMipMapLinearFilter:BH,NearestMipMapNearestFilter:kH,NearestMipmapLinearFilter:wp,NearestMipmapNearestFilter:HE,NeutralToneMapping:VE,NeverCompare:BP,NeverDepth:Nx,NeverStencilFunc:iG,NoBlending:Xo,NoColorSpace:Ec,NoNormalPacking:XH,NoToneMapping:lo,NormalAnimationBlendMode:jb,NormalBlending:xf,NormalGAPacking:YH,NormalRGPacking:$H,NotEqualCompare:HP,NotEqualDepth:Ux,NotEqualStencilFunc:lG,NumberKeyframeTrack:H0,Object3D:Zn,ObjectLoader:xj,ObjectSpaceNormalMap:kP,OctahedronGeometry:dv,OneFactor:yP,OneMinusConstantAlphaFactor:RP,OneMinusConstantColorFactor:AP,OneMinusDstAlphaFactor:SP,OneMinusDstColorFactor:MP,OneMinusSrcAlphaFactor:Rx,OneMinusSrcColorFactor:xP,OrthographicCamera:If,PCFShadowMap:Rp,PCFSoftShadowMap:a0,PMREMGenerator:UM,Path:_b,PerspectiveCamera:Hr,Plane:Uu,PlaneGeometry:Qu,PlaneHelper:h9,PointLight:OO,PointLightHelper:n9,Points:sO,PointsMaterial:eT,PolarGridHelper:a9,PolyhedronGeometry:Ju,PositionalAudio:Cj,PropertyBinding:Yn,PropertyMixer:GO,QuadraticBezierCurve:sT,QuadraticBezierCurve3:aT,Quaternion:pa,QuaternionKeyframeTrack:gv,QuaternionLinearInterpolant:NO,R11_EAC_Format:jx,RED_GREEN_RGTC2_Format:db,RED_RGTC1_Format:hb,REVISION:Kp,RG11_EAC_Format:qx,RGBADepthPacking:jH,RGBAFormat:pr,RGBAIntegerFormat:Gb,RGBA_ASTC_10x10_Format:sb,RGBA_ASTC_10x5_Format:nb,RGBA_ASTC_10x6_Format:ib,RGBA_ASTC_10x8_Format:rb,RGBA_ASTC_12x10_Format:ab,RGBA_ASTC_12x12_Format:ob,RGBA_ASTC_4x4_Format:$x,RGBA_ASTC_5x4_Format:Yx,RGBA_ASTC_5x5_Format:Zx,RGBA_ASTC_6x5_Format:Kx,RGBA_ASTC_6x6_Format:Jx,RGBA_ASTC_8x5_Format:Qx,RGBA_ASTC_8x6_Format:eb,RGBA_ASTC_8x8_Format:tb,RGBA_BPTC_Format:lb,RGBA_ETC2_EAC_Format:Gx,RGBA_PVRTC_2BPPV1_Format:Fx,RGBA_PVRTC_4BPPV1_Format:zx,RGBA_S3TC_DXT1_Format:c0,RGBA_S3TC_DXT3_Format:u0,RGBA_S3TC_DXT5_Format:h0,RGBDepthPacking:WH,RGBFormat:qE,RGBIntegerFormat:FH,RGB_BPTC_SIGNED_Format:cb,RGB_BPTC_UNSIGNED_Format:ub,RGB_ETC1_Format:Vx,RGB_ETC2_Format:Hx,RGB_PVRTC_2BPPV1_Format:Bx,RGB_PVRTC_4BPPV1_Format:kx,RGB_S3TC_DXT1_Format:l0,RGDepthPacking:qH,RGFormat:Mf,RGIntegerFormat:Hb,RawShaderMaterial:lT,Ray:Qp,Raycaster:wT,RectAreaLight:kO,RedFormat:av,RedIntegerFormat:ov,ReinhardToneMapping:kE,RenderTarget:YE,RenderTarget3D:Hj,RepeatWrapping:D0,ReplaceStencilOp:KH,ReverseSubtractEquation:pP,RingGeometry:cS,SIGNED_R11_EAC_Format:Wx,SIGNED_RED_GREEN_RGTC2_Format:pb,SIGNED_RED_RGTC1_Format:fb,SIGNED_RG11_EAC_Format:Xx,SRGBColorSpace:rs,SRGBTransfer:ri,Scene:cv,ShaderChunk:Cn,ShaderLib:Go,ShaderMaterial:Ss,ShadowMaterial:_O,Shape:Sf,ShapeGeometry:uS,ShapePath:p9,ShapeUtils:qo,ShortType:zb,Skeleton:eS,SkeletonHelper:t9,SkinnedMesh:tO,Source:Vu,Sphere:ss,SphereGeometry:pv,Spherical:WO,SphericalHarmonics3:vT,SplineCurve:oT,SpotLight:PO,SpotLightHelper:e9,Sprite:QP,SpriteMaterial:JE,SrcAlphaFactor:Cx,SrcAlphaSaturateFactor:EP,SrcColorFactor:_P,StaticCopyUsage:mG,StaticDrawUsage:U0,StaticReadUsage:fG,StereoCamera:Mj,StreamCopyUsage:vG,StreamDrawUsage:hG,StreamReadUsage:pG,StringKeyframeTrack:Df,SubtractEquation:dP,SubtractiveBlending:wM,TOUCH:LH,TangentSpaceNormalMap:Ku,TetrahedronGeometry:hS,Texture:hi,TextureLoader:gj,TextureUtils:x9,Timer:Xj,TimestampQuery:_G,TorusGeometry:fS,TorusKnotGeometry:dS,Triangle:da,TriangleFanDrawMode:GH,TriangleStripDrawMode:HH,TrianglesDrawMode:VH,TubeGeometry:pS,UVMapping:qu,Uint16BufferAttribute:ZE,Uint32BufferAttribute:KE,Uint8BufferAttribute:s2,Uint8ClampedBufferAttribute:a2,Uniform:ST,UniformsGroup:jj,UniformsLib:Nt,UniformsUtils:ZP,UnsignedByteType:Gr,UnsignedInt101111Type:jE,UnsignedInt248Type:Lp,UnsignedInt5999Type:GE,UnsignedIntType:Aa,UnsignedShort4444Type:Fb,UnsignedShort5551Type:Vb,UnsignedShortType:Op,VSMShadowMap:df,Vector2:Ye,Vector3:J,Vector4:mi,VectorKeyframeTrack:G0,VideoFrameTexture:R2,VideoTexture:aO,WebGL3DRenderTarget:XG,WebGLArrayRenderTarget:qG,WebGLCoordinateSystem:Ma,WebGLCubeRenderTarget:Zb,WebGLRenderTarget:Hs,WebGLRenderer:ET,WebGLUtils:JO,WebGPUCoordinateSystem:Up,WebXRController:dx,WireframeGeometry:yO,WrapAroundEnding:O0,ZeroCurvatureEnding:pf,ZeroFactor:vP,ZeroSlopeEnding:mf,ZeroStencilOp:ZH,createCanvasElement:qP,error:Xt,getConsoleFunction:MG,log:B0,setConsoleFunction:wG,warn:At,warnOnce:kp},Symbol.toStringTag,{value:"Module"}));var Tw={exports:{}},Aw={},Cw={exports:{}},Rw={};var aN;function m$(){if(aN)return Rw;aN=1;var n=Y0();function e(v,_){return v===_&&(v!==0||1/v===1/_)||v!==v&&_!==_}var t=typeof Object.is=="function"?Object.is:e,i=n.useState,r=n.useEffect,s=n.useLayoutEffect,o=n.useDebugValue;function u(v,_){var x=_(),S=i({inst:{value:x,getSnapshot:_}}),A=S[0].inst,E=S[1];return s(function(){A.value=x,A.getSnapshot=_,f(A)&&E({inst:A})},[v,x,_]),r(function(){return f(A)&&E({inst:A}),v(function(){f(A)&&E({inst:A})})},[v]),o(x),x}function f(v){var _=v.getSnapshot;v=v.value;try{var x=_();return!t(v,x)}catch{return!0}}function p(v,_){return _()}var m=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?p:u;return Rw.useSyncExternalStore=n.useSyncExternalStore!==void 0?n.useSyncExternalStore:m,Rw}var oN;function g$(){return oN||(oN=1,Cw.exports=m$()),Cw.exports}var lN;function v$(){if(lN)return Aw;lN=1;var n=Y0(),e=g$();function t(p,m){return p===m&&(p!==0||1/p===1/m)||p!==p&&m!==m}var i=typeof Object.is=="function"?Object.is:t,r=e.useSyncExternalStore,s=n.useRef,o=n.useEffect,u=n.useMemo,f=n.useDebugValue;return Aw.useSyncExternalStoreWithSelector=function(p,m,v,_,x){var S=s(null);if(S.current===null){var A={hasValue:!1,value:null};S.current=A}else A=S.current;S=u(function(){function M(L){if(!C){if(C=!0,N=L,L=_(L),x!==void 0&&A.hasValue){var F=A.value;if(x(F,L))return I=F}return I=L}if(F=I,i(N,L))return F;var H=_(L);return x!==void 0&&x(F,H)?(N=L,F):(N=L,I=H)}var C=!1,N,I,U=v===void 0?null:v;return[function(){return M(m())},U===null?void 0:function(){return M(U())}]},[m,v,_,x]);var E=r(p,S[0],S[1]);return o(function(){A.hasValue=!0,A.value=E},[E]),f(E),E},Aw}var cN;function y$(){return cN||(cN=1,Tw.exports=v$()),Tw.exports}var _$=y$();const x$=Tb(_$),uN=n=>{let e;const t=new Set,i=(p,m)=>{const v=typeof p=="function"?p(e):p;if(!Object.is(v,e)){const _=e;e=m??(typeof v!="object"||v===null)?v:Object.assign({},e,v),t.forEach(x=>x(e,_))}},r=()=>e,u={setState:i,getState:r,getInitialState:()=>f,subscribe:p=>(t.add(p),()=>t.delete(p))},f=e=n(i,r,u);return u},QO=(n=>n?uN(n):uN),{useSyncExternalStoreWithSelector:b$}=x$,S$=n=>n;function w$(n,e=S$,t){const i=b$(n.subscribe,n.getState,n.getInitialState,e,t);return so.useDebugValue(i),i}const hN=(n,e)=>{const t=QO(n),i=(r,s=e)=>w$(t,r,s);return Object.assign(i,t),i},eL=((n,e)=>n?hN(n,e):hN),M$=n=>typeof n=="object"&&typeof n.then=="function",yf=[];function tL(n,e,t=(i,r)=>i===r){if(n===e)return!0;if(!n||!e)return!1;const i=n.length;if(e.length!==i)return!1;for(let r=0;r<i;r++)if(!t(n[r],e[r]))return!1;return!0}function nL(n,e=null,t=!1,i={}){e===null&&(e=[n]);for(const s of yf)if(tL(e,s.keys,s.equal)){if(t)return;if(Object.prototype.hasOwnProperty.call(s,"error"))throw s.error;if(Object.prototype.hasOwnProperty.call(s,"response"))return i.lifespan&&i.lifespan>0&&(s.timeout&&clearTimeout(s.timeout),s.timeout=setTimeout(s.remove,i.lifespan)),s.response;if(!t)throw s.promise}const r={keys:e,equal:i.equal,remove:()=>{const s=yf.indexOf(r);s!==-1&&yf.splice(s,1)},promise:(M$(n)?n:n(...e)).then(s=>{r.response=s,i.lifespan&&i.lifespan>0&&(r.timeout=setTimeout(r.remove,i.lifespan))}).catch(s=>r.error=s)};if(yf.push(r),!t)throw r.promise}const E$=(n,e,t)=>nL(n,e,!1,t),T$=(n,e,t)=>{nL(n,e,!0,t)},A$=n=>{if(n===void 0||n.length===0)yf.splice(0,yf.length);else{const e=yf.find(t=>tL(n,t.keys,t.equal));e&&e.remove()}};var zM=ON();const C$=Tb(zM);function TT(n,e,t){if(!n)return;if(t(n)===!0)return n;let i=e?n.return:n.child;for(;i;){const r=TT(i,e,t);if(r)return r;i=e?null:i.sibling}}function iL(n){try{return Object.defineProperties(n,{_currentRenderer:{get(){return null},set(){}},_currentRenderer2:{get(){return null},set(){}}})}catch{return n}}const AT=iL(K.createContext(null));class rL extends K.Component{render(){return K.createElement(AT.Provider,{value:this._reactInternals},this.props.children)}}function sL(){const n=K.useContext(AT);if(n===null)throw new Error("its-fine: useFiber must be called within a <FiberProvider />!");const e=K.useId();return K.useMemo(()=>{for(const t of[n,n?.alternate]){if(!t)continue;const i=TT(t,!1,r=>{let s=r.memoizedState;for(;s;){if(s.memoizedState===e)return!0;s=s.next}});if(i)return i}},[n,e])}const R$=Symbol.for("react.context"),N$=n=>n!==null&&typeof n=="object"&&"$$typeof"in n&&n.$$typeof===R$;function D$(){const n=sL(),[e]=K.useState(()=>new Map);e.clear();let t=n;for(;t;){const i=t.type;N$(i)&&i!==AT&&!e.has(i)&&e.set(i,K.use(iL(i))),t=t.return}return e}function I$(){const n=D$();return K.useMemo(()=>Array.from(n.keys()).reduce((e,t)=>i=>K.createElement(e,null,K.createElement(t.Provider,{...i,value:n.get(t)})),e=>K.createElement(rL,{...e})),[n])}function aL(n){let e=n.root;for(;e.getState().previousRoot;)e=e.getState().previousRoot;return e}const oL=n=>n&&n.isOrthographicCamera,P$=n=>n&&n.hasOwnProperty("current"),O$=n=>n!=null&&(typeof n=="string"||typeof n=="number"||n.isColor),vv=((n,e)=>typeof window<"u"&&(((n=window.document)==null?void 0:n.createElement)||((e=window.navigator)==null?void 0:e.product)==="ReactNative"))()?K.useLayoutEffect:K.useEffect;function CT(n){const e=K.useRef(n);return vv(()=>{e.current=n},[n]),e}function L$(){const n=sL(),e=I$();return K.useMemo(()=>({children:t})=>{const r=!!TT(n,!0,s=>s.type===K.StrictMode)?K.StrictMode:K.Fragment;return V.jsx(r,{children:V.jsx(e,{children:t})})},[n,e])}function U$({set:n}){return vv(()=>(n(new Promise(()=>null)),()=>n(!1)),[n]),null}const k$=(n=>(n=class extends K.Component{constructor(...t){super(...t),this.state={error:!1}}componentDidCatch(t){this.props.set(t)}render(){return this.state.error?null:this.props.children}},n.getDerivedStateFromError=()=>({error:!0}),n))();function lL(n){var e;const t=typeof window<"u"?(e=window.devicePixelRatio)!=null?e:2:1;return Array.isArray(n)?Math.min(Math.max(n[0],t),n[1]):n}function fp(n){var e;return(e=n.__r3f)==null?void 0:e.root.getState()}const Ui={obj:n=>n===Object(n)&&!Ui.arr(n)&&typeof n!="function",fun:n=>typeof n=="function",str:n=>typeof n=="string",num:n=>typeof n=="number",boo:n=>typeof n=="boolean",und:n=>n===void 0,nul:n=>n===null,arr:n=>Array.isArray(n),equ(n,e,{arrays:t="shallow",objects:i="reference",strict:r=!0}={}){if(typeof n!=typeof e||!!n!=!!e)return!1;if(Ui.str(n)||Ui.num(n)||Ui.boo(n))return n===e;const s=Ui.obj(n);if(s&&i==="reference")return n===e;const o=Ui.arr(n);if(o&&t==="reference")return n===e;if((o||s)&&n===e)return!0;let u;for(u in n)if(!(u in e))return!1;if(s&&t==="shallow"&&i==="shallow"){for(u in r?e:n)if(!Ui.equ(n[u],e[u],{strict:r,objects:"reference"}))return!1}else for(u in r?e:n)if(n[u]!==e[u])return!1;if(Ui.und(u)){if(o&&n.length===0&&e.length===0||s&&Object.keys(n).length===0&&Object.keys(e).length===0)return!0;if(n!==e)return!1}return!0}};function B$(n){const e={nodes:{},materials:{},meshes:{}};return n&&n.traverse(t=>{t.name&&(e.nodes[t.name]=t),t.material&&!e.materials[t.material.name]&&(e.materials[t.material.name]=t.material),t.isMesh&&!e.meshes[t.name]&&(e.meshes[t.name]=t)}),e}function z$(n){n.type!=="Scene"&&(n.dispose==null||n.dispose());for(const e in n){const t=n[e];t?.type!=="Scene"&&(t==null||t.dispose==null||t.dispose())}}const cL=["children","key","ref"];function F$(n){const e={};for(const t in n)cL.includes(t)||(e[t]=n[t]);return e}function xb(n,e,t,i){const r=n;let s=r?.__r3f;return s||(s={root:e,type:t,parent:null,children:[],props:F$(i),object:r,eventCount:0,handlers:{},isHidden:!1},r&&(r.__r3f=s)),s}function q0(n,e){if(!e.includes("-"))return{root:n,key:e,target:n[e]};if(e in n)return{root:n,key:e,target:n[e]};let t=n;const i=e.split("-");for(const r of i){if(typeof t!="object"||t===null){if(t!==void 0){const s=i.slice(i.indexOf(r)).join("-");return{root:t,key:s,target:void 0}}return{root:n,key:e,target:void 0}}e=r,n=t,t=t[e]}return{root:n,key:e,target:t}}const fN=/-\d+$/;function bb(n,e){if(Ui.str(e.props.attach)){if(fN.test(e.props.attach)){const r=e.props.attach.replace(fN,""),{root:s,key:o}=q0(n.object,r);Array.isArray(s[o])||(s[o]=[])}const{root:t,key:i}=q0(n.object,e.props.attach);e.previousAttach=t[i],t[i]=e.object}else Ui.fun(e.props.attach)&&(e.previousAttach=e.props.attach(n.object,e.object))}function Sb(n,e){if(Ui.str(e.props.attach)){const{root:t,key:i}=q0(n.object,e.props.attach),r=e.previousAttach;r===void 0?delete t[i]:t[i]=r}else e.previousAttach==null||e.previousAttach(n.object,e.object);delete e.previousAttach}const FM=[...cL,"args","dispose","attach","object","onUpdate","dispose"],dN=new Map;function V$(n){let e=dN.get(n.constructor);try{e||(e=new n.constructor,dN.set(n.constructor,e))}catch{}return e}function H$(n,e){const t={};for(const i in e)if(!FM.includes(i)&&!Ui.equ(e[i],n.props[i])){t[i]=e[i];for(const r in e)r.startsWith(`${i}-`)&&(t[r]=e[r])}for(const i in n.props){if(FM.includes(i)||e.hasOwnProperty(i))continue;const{root:r,key:s}=q0(n.object,i);if(r.constructor&&r.constructor.length===0){const o=V$(r);Ui.und(o)||(t[s]=o[s])}else t[s]=0}return t}const G$=["map","emissiveMap","sheenColorMap","specularColorMap","envMap"],j$=/^on(Pointer|Click|DoubleClick|ContextMenu|Wheel)/;function Nl(n,e){var t;const i=n.__r3f,r=i&&aL(i).getState(),s=i?.eventCount;for(const u in e){let f=e[u];if(FM.includes(u))continue;if(i&&j$.test(u)){typeof f=="function"?i.handlers[u]=f:delete i.handlers[u],i.eventCount=Object.keys(i.handlers).length;continue}if(f===void 0)continue;let{root:p,key:m,target:v}=q0(n,u);if(v===void 0&&(typeof p!="object"||p===null))throw Error(`R3F: Cannot set "${u}". Ensure it is an object before setting "${m}".`);if(v instanceof zp&&f instanceof zp)v.mask=f.mask;else if(v instanceof Ot&&O$(f))v.set(f);else if(v!==null&&typeof v=="object"&&typeof v.set=="function"&&typeof v.copy=="function"&&f!=null&&f.constructor&&v.constructor===f.constructor)v.copy(f);else if(v!==null&&typeof v=="object"&&typeof v.set=="function"&&Array.isArray(f))typeof v.fromArray=="function"?v.fromArray(f):v.set(...f);else if(v!==null&&typeof v=="object"&&typeof v.set=="function"&&typeof f=="number")typeof v.setScalar=="function"?v.setScalar(f):v.set(f);else{var o;p[m]=f,r&&!r.linear&&G$.includes(m)&&(o=p[m])!=null&&o.isTexture&&p[m].format===pr&&p[m].type===Gr&&(p[m].colorSpace=rs)}}if(i!=null&&i.parent&&r!=null&&r.internal&&(t=i.object)!=null&&t.isObject3D&&s!==i.eventCount){const u=i.object,f=r.internal.interaction.indexOf(u);f>-1&&r.internal.interaction.splice(f,1),i.eventCount&&u.raycast!==null&&r.internal.interaction.push(u)}return i&&i.props.attach===void 0&&(i.object.isBufferGeometry?i.props.attach="geometry":i.object.isMaterial&&(i.props.attach="material")),i&&nm(i),n}function nm(n){var e;if(!n.parent)return;n.props.onUpdate==null||n.props.onUpdate(n.object);const t=(e=n.root)==null||e.getState==null?void 0:e.getState();t&&t.internal.frames===0&&t.invalidate()}function uL(n,e){n.manual||(oL(n)?(n.left=e.width/-2,n.right=e.width/2,n.top=e.height/2,n.bottom=e.height/-2):n.aspect=e.width/e.height,n.updateProjectionMatrix())}const ks=n=>n?.isObject3D;function nx(n){return(n.eventObject||n.object).uuid+"/"+n.index+n.instanceId}function hL(n,e,t,i){const r=t.get(e);r&&(t.delete(e),t.size===0&&(n.delete(i),r.target.releasePointerCapture(i)))}function W$(n,e){const{internal:t}=n.getState();t.interaction=t.interaction.filter(i=>i!==e),t.initialHits=t.initialHits.filter(i=>i!==e),t.hovered.forEach((i,r)=>{(i.eventObject===e||i.object===e)&&t.hovered.delete(r)}),t.capturedMap.forEach((i,r)=>{hL(t.capturedMap,e,i,r)})}function q$(n){function e(f){const{internal:p}=n.getState(),m=f.offsetX-p.initialClick[0],v=f.offsetY-p.initialClick[1];return Math.round(Math.sqrt(m*m+v*v))}function t(f){return f.filter(p=>["Move","Over","Enter","Out","Leave"].some(m=>{var v;return(v=p.__r3f)==null?void 0:v.handlers["onPointer"+m]}))}function i(f,p){const m=n.getState(),v=new Set,_=[],x=p?p(m.internal.interaction):m.internal.interaction;for(let M=0;M<x.length;M++){const C=fp(x[M]);C&&(C.raycaster.camera=void 0)}m.previousRoot||m.events.compute==null||m.events.compute(f,m);function S(M){const C=fp(M);if(!C||!C.events.enabled||C.raycaster.camera===null)return[];if(C.raycaster.camera===void 0){var N;C.events.compute==null||C.events.compute(f,C,(N=C.previousRoot)==null?void 0:N.getState()),C.raycaster.camera===void 0&&(C.raycaster.camera=null)}return C.raycaster.camera?C.raycaster.intersectObject(M,!0):[]}let A=x.flatMap(S).sort((M,C)=>{const N=fp(M.object),I=fp(C.object);return!N||!I?M.distance-C.distance:I.events.priority-N.events.priority||M.distance-C.distance}).filter(M=>{const C=nx(M);return v.has(C)?!1:(v.add(C),!0)});m.events.filter&&(A=m.events.filter(A,m));for(const M of A){let C=M.object;for(;C;){var E;(E=C.__r3f)!=null&&E.eventCount&&_.push({...M,eventObject:C}),C=C.parent}}if("pointerId"in f&&m.internal.capturedMap.has(f.pointerId))for(let M of m.internal.capturedMap.get(f.pointerId).values())v.has(nx(M.intersection))||_.push(M.intersection);return _}function r(f,p,m,v){if(f.length){const _={stopped:!1};for(const x of f){let S=fp(x.object);if(S||x.object.traverseAncestors(A=>{const E=fp(A);if(E)return S=E,!1}),S){const{raycaster:A,pointer:E,camera:M,internal:C}=S,N=new J(E.x,E.y,0).unproject(M),I=P=>{var k,Y;return(k=(Y=C.capturedMap.get(P))==null?void 0:Y.has(x.eventObject))!=null?k:!1},U=P=>{const k={intersection:x,target:p.target};C.capturedMap.has(P)?C.capturedMap.get(P).set(x.eventObject,k):C.capturedMap.set(P,new Map([[x.eventObject,k]])),p.target.setPointerCapture(P)},L=P=>{const k=C.capturedMap.get(P);k&&hL(C.capturedMap,x.eventObject,k,P)};let F={};for(let P in p){let k=p[P];typeof k!="function"&&(F[P]=k)}let H={...x,...F,pointer:E,intersections:f,stopped:_.stopped,delta:m,unprojectedPoint:N,ray:A.ray,camera:M,stopPropagation(){const P="pointerId"in p&&C.capturedMap.get(p.pointerId);if((!P||P.has(x.eventObject))&&(H.stopped=_.stopped=!0,C.hovered.size&&Array.from(C.hovered.values()).find(k=>k.eventObject===x.eventObject))){const k=f.slice(0,f.indexOf(x));s([...k,x])}},target:{hasPointerCapture:I,setPointerCapture:U,releasePointerCapture:L},currentTarget:{hasPointerCapture:I,setPointerCapture:U,releasePointerCapture:L},nativeEvent:p};if(v(H),_.stopped===!0)break}}}return f}function s(f){const{internal:p}=n.getState();for(const m of p.hovered.values())if(!f.length||!f.find(v=>v.object===m.object&&v.index===m.index&&v.instanceId===m.instanceId)){const _=m.eventObject.__r3f;if(p.hovered.delete(nx(m)),_!=null&&_.eventCount){const x=_.handlers,S={...m,intersections:f};x.onPointerOut==null||x.onPointerOut(S),x.onPointerLeave==null||x.onPointerLeave(S)}}}function o(f,p){for(let m=0;m<p.length;m++){const v=p[m].__r3f;v==null||v.handlers.onPointerMissed==null||v.handlers.onPointerMissed(f)}}function u(f){switch(f){case"onPointerLeave":case"onPointerCancel":return()=>s([]);case"onLostPointerCapture":return p=>{const{internal:m}=n.getState();"pointerId"in p&&m.capturedMap.has(p.pointerId)&&requestAnimationFrame(()=>{m.capturedMap.has(p.pointerId)&&(m.capturedMap.delete(p.pointerId),s([]))})}}return function(m){const{onPointerMissed:v,internal:_}=n.getState();_.lastEvent.current=m;const x=f==="onPointerMove",S=f==="onClick"||f==="onContextMenu"||f==="onDoubleClick",E=i(m,x?t:void 0),M=S?e(m):0;f==="onPointerDown"&&(_.initialClick=[m.offsetX,m.offsetY],_.initialHits=E.map(N=>N.eventObject)),S&&!E.length&&M<=2&&(o(m,_.interaction),v&&v(m)),x&&s(E);function C(N){const I=N.eventObject,U=I.__r3f;if(!(U!=null&&U.eventCount))return;const L=U.handlers;if(x){if(L.onPointerOver||L.onPointerEnter||L.onPointerOut||L.onPointerLeave){const F=nx(N),H=_.hovered.get(F);H?H.stopped&&N.stopPropagation():(_.hovered.set(F,N),L.onPointerOver==null||L.onPointerOver(N),L.onPointerEnter==null||L.onPointerEnter(N))}L.onPointerMove==null||L.onPointerMove(N)}else{const F=L[f];F?(!S||_.initialHits.includes(I))&&(o(m,_.interaction.filter(H=>!_.initialHits.includes(H))),F(N)):S&&_.initialHits.includes(I)&&o(m,_.interaction.filter(H=>!_.initialHits.includes(H)))}}r(E,m,M,C)}}return{handlePointer:u}}const pN=n=>!!(n!=null&&n.render),RT=K.createContext(null),X$=(n,e)=>{const t=eL((u,f)=>{const p=new J,m=new J,v=new J;function _(M=f().camera,C=m,N=f().size){const{width:I,height:U,top:L,left:F}=N,H=I/U;C.isVector3?v.copy(C):v.set(...C);const P=M.getWorldPosition(p).distanceTo(v);if(oL(M))return{width:I/M.zoom,height:U/M.zoom,top:L,left:F,factor:1,distance:P,aspect:H};{const k=M.fov*Math.PI/180,Y=2*Math.tan(k/2)*P,ie=Y*(I/U);return{width:ie,height:Y,top:L,left:F,factor:I/ie,distance:P,aspect:H}}}let x;const S=M=>u(C=>({performance:{...C.performance,current:M}})),A=new Ye;return{set:u,get:f,gl:null,camera:null,raycaster:null,events:{priority:1,enabled:!0,connected:!1},scene:null,xr:null,invalidate:(M=1)=>n(f(),M),advance:(M,C)=>e(M,C,f()),legacy:!1,linear:!1,flat:!1,controls:null,clock:new _T,pointer:A,mouse:A,frameloop:"always",onPointerMissed:void 0,performance:{current:1,min:.5,max:1,debounce:200,regress:()=>{const M=f();x&&clearTimeout(x),M.performance.current!==M.performance.min&&S(M.performance.min),x=setTimeout(()=>S(f().performance.max),M.performance.debounce)}},size:{width:0,height:0,top:0,left:0},viewport:{initialDpr:0,dpr:0,width:0,height:0,top:0,left:0,aspect:0,distance:0,factor:0,getCurrentViewport:_},setEvents:M=>u(C=>({...C,events:{...C.events,...M}})),setSize:(M,C,N=0,I=0)=>{const U=f().camera,L={width:M,height:C,top:N,left:I};u(F=>({size:L,viewport:{...F.viewport,..._(U,m,L)}}))},setDpr:M=>u(C=>{const N=lL(M);return{viewport:{...C.viewport,dpr:N,initialDpr:C.viewport.initialDpr||N}}}),setFrameloop:(M="always")=>{const C=f().clock;C.stop(),C.elapsedTime=0,M!=="never"&&(C.start(),C.elapsedTime=0),u(()=>({frameloop:M}))},previousRoot:void 0,internal:{interaction:[],hovered:new Map,subscribers:[],initialClick:[0,0],initialHits:[],capturedMap:new Map,lastEvent:K.createRef(),active:!1,frames:0,priority:0,subscribe:(M,C,N)=>{const I=f().internal;return I.priority=I.priority+(C>0?1:0),I.subscribers.push({ref:M,priority:C,store:N}),I.subscribers=I.subscribers.sort((U,L)=>U.priority-L.priority),()=>{const U=f().internal;U!=null&&U.subscribers&&(U.priority=U.priority-(C>0?1:0),U.subscribers=U.subscribers.filter(L=>L.ref!==M))}}}}}),i=t.getState();let r=i.size,s=i.viewport.dpr,o=i.camera;return t.subscribe(()=>{const{camera:u,size:f,viewport:p,gl:m,set:v}=t.getState();if(f.width!==r.width||f.height!==r.height||p.dpr!==s){r=f,s=p.dpr,uL(u,f),p.dpr>0&&m.setPixelRatio(p.dpr);const _=typeof HTMLCanvasElement<"u"&&m.domElement instanceof HTMLCanvasElement;m.setSize(f.width,f.height,_)}u!==o&&(o=u,v(_=>({viewport:{..._.viewport,..._.viewport.getCurrentViewport(u)}})))}),t.subscribe(u=>n(u)),t};function NT(){const n=K.useContext(RT);if(!n)throw new Error("R3F: Hooks can only be used within the Canvas component!");return n}function X0(n=t=>t,e){return NT()(n,e)}function _S(n,e=0){const t=NT(),i=t.getState().internal.subscribe,r=CT(n);return vv(()=>i(r,e,t),[e,i,t]),null}const mN=new WeakMap,$$=n=>{var e;return typeof n=="function"&&(n==null||(e=n.prototype)==null?void 0:e.constructor)===n};function fL(n,e){return function(t,...i){let r;return $$(t)?(r=mN.get(t),r||(r=new t,mN.set(t,r))):r=t,n&&n(r),Promise.all(i.map(s=>new Promise((o,u)=>r.load(s,f=>{ks(f?.scene)&&Object.assign(f,B$(f.scene)),o(f)},e,f=>u(new Error(`Could not load ${s}: ${f?.message}`))))))}}function jp(n,e,t,i){const r=Array.isArray(e)?e:[e],s=E$(fL(t,i),[n,...r],{equal:Ui.equ});return Array.isArray(e)?s:s[0]}jp.preload=function(n,e,t){const i=Array.isArray(e)?e:[e];return T$(fL(t),[n,...i])};jp.clear=function(n,e){const t=Array.isArray(e)?e:[e];return A$([n,...t])};const Y$=1,Z$=8,K$=32,J$=2;var Q$={version:"9.5.0"};function eY(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}var gN={exports:{}},vN={exports:{}},yN;function tY(){return yN||(yN=1,(function(n){n.exports=function(e){function t(c,h,y,b){return new Am(c,h,y,b)}function i(){}function r(c){var h="https://react.dev/errors/"+c;if(1<arguments.length){h+="?args[]="+encodeURIComponent(arguments[1]);for(var y=2;y<arguments.length;y++)h+="&args[]="+encodeURIComponent(arguments[y])}return"Minified React error #"+c+"; visit "+h+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function s(c){var h=c,y=c;if(c.alternate)for(;h.return;)h=h.return;else{c=h;do h=c,(h.flags&4098)!==0&&(y=h.return),c=h.return;while(c)}return h.tag===3?y:null}function o(c){if(s(c)!==c)throw Error(r(188))}function u(c){var h=c.alternate;if(!h){if(h=s(c),h===null)throw Error(r(188));return h!==c?null:c}for(var y=c,b=h;;){var R=y.return;if(R===null)break;var D=R.alternate;if(D===null){if(b=R.return,b!==null){y=b;continue}break}if(R.child===D.child){for(D=R.child;D;){if(D===y)return o(R),c;if(D===b)return o(R),h;D=D.sibling}throw Error(r(188))}if(y.return!==b.return)y=R,b=D;else{for(var j=!1,ae=R.child;ae;){if(ae===y){j=!0,y=R,b=D;break}if(ae===b){j=!0,b=R,y=D;break}ae=ae.sibling}if(!j){for(ae=D.child;ae;){if(ae===y){j=!0,y=D,b=R;break}if(ae===b){j=!0,b=D,y=R;break}ae=ae.sibling}if(!j)throw Error(r(189))}}if(y.alternate!==b)throw Error(r(190))}if(y.tag!==3)throw Error(r(188));return y.stateNode.current===y?c:h}function f(c){var h=c.tag;if(h===5||h===26||h===27||h===6)return c;for(c=c.child;c!==null;){if(h=f(c),h!==null)return h;c=c.sibling}return null}function p(c){var h=c.tag;if(h===5||h===26||h===27||h===6)return c;for(c=c.child;c!==null;){if(c.tag!==4&&(h=p(c),h!==null))return h;c=c.sibling}return null}function m(c){return c===null||typeof c!="object"?null:(c=wo&&c[wo]||c["@@iterator"],typeof c=="function"?c:null)}function v(c){if(c==null)return null;if(typeof c=="function")return c.$$typeof===ul?null:c.displayName||c.name||null;if(typeof c=="string")return c;switch(c){case ec:return"Fragment";case nc:return"Profiler";case tc:return"StrictMode";case od:return"Suspense";case So:return"SuspenseList";case bh:return"Activity"}if(typeof c=="object")switch(c.$$typeof){case Ql:return"Portal";case Qs:return c.displayName||"Context";case xh:return(c._context.displayName||"Context")+".Consumer";case nu:var h=c.render;return c=c.displayName,c||(c=h.displayName||h.name||"",c=c!==""?"ForwardRef("+c+")":"ForwardRef"),c;case ld:return h=c.displayName||null,h!==null?h:v(c.type)||"Memo";case $r:h=c._payload,c=c._init;try{return v(c(h))}catch{}}return null}function _(c){return{current:c}}function x(c){0>oc||(c.current=bd[oc],bd[oc]=null,oc--)}function S(c,h){oc++,bd[oc]=c.current,c.current=h}function A(c){return c>>>=0,c===0?32:31-(Sd(c)/Ly|0)|0}function E(c){var h=c&42;if(h!==0)return h;switch(c&-c){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return c&261888;case 262144:case 524288:case 1048576:case 2097152:return c&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return c&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return c}}function M(c,h,y){var b=c.pendingLanes;if(b===0)return 0;var R=0,D=c.suspendedLanes,j=c.pingedLanes;c=c.warmLanes;var ae=b&134217727;return ae!==0?(b=ae&~D,b!==0?R=E(b):(j&=ae,j!==0?R=E(j):y||(y=ae&~c,y!==0&&(R=E(y))))):(ae=b&~D,ae!==0?R=E(ae):j!==0?R=E(j):y||(y=b&~c,y!==0&&(R=E(y)))),R===0?0:h!==0&&h!==R&&(h&D)===0&&(D=R&-R,y=h&-h,D>=y||D===32&&(y&4194048)!==0)?h:R}function C(c,h){return(c.pendingLanes&~(c.suspendedLanes&~c.pingedLanes)&h)===0}function N(c,h){switch(c){case 1:case 2:case 4:case 8:case 64:return h+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return h+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function I(){var c=cu;return cu<<=1,(cu&62914560)===0&&(cu=4194304),c}function U(c){for(var h=[],y=0;31>y;y++)h.push(c);return h}function L(c,h){c.pendingLanes|=h,h!==268435456&&(c.suspendedLanes=0,c.pingedLanes=0,c.warmLanes=0)}function F(c,h,y,b,R,D){var j=c.pendingLanes;c.pendingLanes=y,c.suspendedLanes=0,c.pingedLanes=0,c.warmLanes=0,c.expiredLanes&=y,c.entangledLanes&=y,c.errorRecoveryDisabledLanes&=y,c.shellSuspendCounter=0;var ae=c.entanglements,Pe=c.expirationTimes,Ke=c.hiddenUpdates;for(y=j&~y;0<y;){var _t=31-hs(y),it=1<<_t;ae[_t]=0,Pe[_t]=-1;var It=Ke[_t];if(It!==null)for(Ke[_t]=null,_t=0;_t<It.length;_t++){var dn=It[_t];dn!==null&&(dn.lane&=-536870913)}y&=~it}b!==0&&H(c,b,0),D!==0&&R===0&&c.tag!==0&&(c.suspendedLanes|=D&~(j&~h))}function H(c,h,y){c.pendingLanes|=h,c.suspendedLanes&=~h;var b=31-hs(h);c.entangledLanes|=h,c.entanglements[b]=c.entanglements[b]|1073741824|y&261930}function P(c,h){var y=c.entangledLanes|=h;for(c=c.entanglements;y;){var b=31-hs(y),R=1<<b;R&h|c[b]&h&&(c[b]|=h),y&=~R}}function k(c,h){var y=h&-h;return y=(y&42)!==0?1:Y(y),(y&(c.suspendedLanes|h))!==0?0:y}function Y(c){switch(c){case 2:c=1;break;case 8:c=4;break;case 32:c=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:c=128;break;case 268435456:c=134217728;break;default:c=0}return c}function ie(c){return c&=-c,2<c?8<c?(c&134217727)!==0?32:268435456:8:2}function te(c){if(typeof fg=="function"&&By(c),fs&&typeof fs.setStrictMode=="function")try{fs.setStrictMode(cc,c)}catch{}}function le(c,h){return c===h&&(c!==0||1/c===1/h)||c!==c&&h!==h}function de(c){if(Cd===void 0)try{throw Error()}catch(y){var h=y.stack.trim().match(/\n( *(at )?)/);Cd=h&&h[1]||"",qa=-1<y.stack.indexOf(`
    at`)?" (<anonymous>)":-1<y.stack.indexOf("@")?"@unknown:0:0":""}return`
`+Cd+c+qa}function Z(c,h){if(!c||Nh)return"";Nh=!0;var y=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var b={DetermineComponentFrameRoot:function(){try{if(h){var it=function(){throw Error()};if(Object.defineProperty(it.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(it,[])}catch(dn){var It=dn}Reflect.construct(c,[],it)}else{try{it.call()}catch(dn){It=dn}c.call(it.prototype)}}else{try{throw Error()}catch(dn){It=dn}(it=c())&&typeof it.catch=="function"&&it.catch(function(){})}}catch(dn){if(dn&&It&&typeof dn.stack=="string")return[dn.stack,It.stack]}return[null,null]}};b.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var R=Object.getOwnPropertyDescriptor(b.DetermineComponentFrameRoot,"name");R&&R.configurable&&Object.defineProperty(b.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var D=b.DetermineComponentFrameRoot(),j=D[0],ae=D[1];if(j&&ae){var Pe=j.split(`
`),Ke=ae.split(`
`);for(R=b=0;b<Pe.length&&!Pe[b].includes("DetermineComponentFrameRoot");)b++;for(;R<Ke.length&&!Ke[R].includes("DetermineComponentFrameRoot");)R++;if(b===Pe.length||R===Ke.length)for(b=Pe.length-1,R=Ke.length-1;1<=b&&0<=R&&Pe[b]!==Ke[R];)R--;for(;1<=b&&0<=R;b--,R--)if(Pe[b]!==Ke[R]){if(b!==1||R!==1)do if(b--,R--,0>R||Pe[b]!==Ke[R]){var _t=`
`+Pe[b].replace(" at new "," at ");return c.displayName&&_t.includes("<anonymous>")&&(_t=_t.replace("<anonymous>",c.displayName)),_t}while(1<=b&&0<=R);break}}}finally{Nh=!1,Error.prepareStackTrace=y}return(y=c?c.displayName||c.name:"")?de(y):""}function Q(c,h){switch(c.tag){case 26:case 27:case 5:return de(c.type);case 16:return de("Lazy");case 13:return c.child!==h&&h!==null?de("Suspense Fallback"):de("Suspense");case 19:return de("SuspenseList");case 0:case 15:return Z(c.type,!1);case 11:return Z(c.type.render,!1);case 1:return Z(c.type,!0);case 31:return de("Activity");default:return""}}function ve(c){try{var h="",y=null;do h+=Q(c,y),y=c,c=c.return;while(c);return h}catch(b){return`
Error generating stack: `+b.message+`
`+b.stack}}function Te(c,h){if(typeof c=="object"&&c!==null){var y=dg.get(c);return y!==void 0?y:(h={value:c,source:h,stack:ve(h)},dg.set(c,h),h)}return{value:c,source:h,stack:ve(h)}}function we(c,h){To[Xa++]=Dh,To[Xa++]=ii,ii=c,Dh=h}function X(c,h,y){na[Ns++]=Ar,na[Ns++]=ga,na[Ns++]=ia,ia=c;var b=Ar;c=ga;var R=32-hs(b)-1;b&=~(1<<R),y+=1;var D=32-hs(h)+R;if(30<D){var j=R-R%5;D=(b&(1<<j)-1).toString(32),b>>=j,R-=j,Ar=1<<32-hs(h)+R|y<<R|b,ga=D+c}else Ar=1<<D|y<<R|b,ga=c}function ce(c){c.return!==null&&(we(c,1),X(c,1,0))}function xe(c){for(;c===ii;)ii=To[--Xa],To[Xa]=null,Dh=To[--Xa],To[Xa]=null;for(;c===ia;)ia=na[--Ns],na[Ns]=null,ga=na[--Ns],na[Ns]=null,Ar=na[--Ns],na[Ns]=null}function Be(c,h){na[Ns++]=Ar,na[Ns++]=ga,na[Ns++]=ia,Ar=h.id,ga=h.overflow,ia=c}function mt(c,h){S(Cr,h),S(Ao,c),S(xr,null),c=Kv(h),x(xr),S(xr,c)}function ge(){x(xr),x(Ao),x(Cr)}function Re(c){c.memoizedState!==null&&S(Ih,c);var h=xr.current,y=su(h,c.type);h!==y&&(S(Ao,c),S(xr,y))}function rt(c){Ao.current===c&&(x(xr),x(Ao)),Ih.current===c&&(x(Ih),Bi?sc._currentValue=rc:sc._currentValue2=rc)}function xt(c){var h=Error(r(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw Je(Te(h,c)),Rd}function Rt(c,h){if(!_i)throw Error(r(175));wy(c.stateNode,c.type,c.memoizedProps,h,c)||xt(c,!0)}function hn(c){for(cr=c.return;cr;)switch(cr.tag){case 5:case 31:case 13:Zr=!1;return;case 27:case 3:Zr=!0;return;default:cr=cr.return}}function En(c){if(!_i||c!==cr)return!1;if(!Pn)return hn(c),Pn=!0,!1;var h=c.tag;if(lr?h!==3&&h!==27&&(h!==5||lu(c.type)&&!Yr(c.type,c.memoizedProps))&&xi&&xt(c):h!==3&&(h!==5||lu(c.type)&&!Yr(c.type,c.memoizedProps))&&xi&&xt(c),hn(c),h===13){if(!_i)throw Error(r(316));if(c=c.memoizedState,c=c!==null?c.dehydrated:null,!c)throw Error(r(317));xi=tg(c)}else if(h===31){if(c=c.memoizedState,c=c!==null?c.dehydrated:null,!c)throw Error(r(317));xi=Ey(c)}else xi=lr&&h===27?my(c.type,xi):cr?py(c.stateNode):null;return!0}function $t(){_i&&(xi=cr=null,Pn=!1)}function ze(){var c=$a;return c!==null&&(ms===null?ms=c:ms.push.apply(ms,c),$a=null),c}function Je(c){$a===null?$a=[c]:$a.push(c)}function He(c,h,y){Bi?(S(ra,h._currentValue),h._currentValue=y):(S(ra,h._currentValue2),h._currentValue2=y)}function yt(c){var h=ra.current;Bi?c._currentValue=h:c._currentValue2=h,x(ra)}function ee(c,h,y){for(;c!==null;){var b=c.alternate;if((c.childLanes&h)!==h?(c.childLanes|=h,b!==null&&(b.childLanes|=h)):b!==null&&(b.childLanes&h)!==h&&(b.childLanes|=h),c===y)break;c=c.return}}function Ft(c,h,y,b){var R=c.child;for(R!==null&&(R.return=c);R!==null;){var D=R.dependencies;if(D!==null){var j=R.child;D=D.firstContext;e:for(;D!==null;){var ae=D;D=R;for(var Pe=0;Pe<h.length;Pe++)if(ae.context===h[Pe]){D.lanes|=y,ae=D.alternate,ae!==null&&(ae.lanes|=y),ee(D.return,y,c),b||(j=null);break e}D=ae.next}}else if(R.tag===18){if(j=R.return,j===null)throw Error(r(341));j.lanes|=y,D=j.alternate,D!==null&&(D.lanes|=y),ee(j,y,c),j=null}else j=R.child;if(j!==null)j.return=R;else for(j=R;j!==null;){if(j===c){j=null;break}if(R=j.sibling,R!==null){R.return=j.return,j=R;break}j=j.return}R=j}}function St(c,h,y,b){c=null;for(var R=h,D=!1;R!==null;){if(!D){if((R.flags&524288)!==0)D=!0;else if((R.flags&262144)!==0)break}if(R.tag===10){var j=R.alternate;if(j===null)throw Error(r(387));if(j=j.memoizedProps,j!==null){var ae=R.type;Fi(R.pendingProps.value,j.value)||(c!==null?c.push(ae):c=[ae])}}else if(R===Ih.current){if(j=R.alternate,j===null)throw Error(r(387));j.memoizedState.memoizedState!==R.memoizedState.memoizedState&&(c!==null?c.push(sc):c=[sc])}R=R.return}c!==null&&Ft(h,c,y,b),h.flags|=262144}function Vt(c){for(c=c.firstContext;c!==null;){var h=c.context;if(!Fi(Bi?h._currentValue:h._currentValue2,c.memoizedValue))return!0;c=c.next}return!1}function ot(c){li=c,va=null,c=c.dependencies,c!==null&&(c.firstContext=null)}function $(c){return fe(li,c)}function B(c,h){return li===null&&ot(c),fe(c,h)}function fe(c,h){var y=Bi?h._currentValue:h._currentValue2;if(h={context:h,memoizedValue:y,next:null},va===null){if(c===null)throw Error(r(308));va=h,c.dependencies={lanes:0,firstContext:h},c.flags|=524288}else va=va.next=h;return y}function Ie(){return{controller:new zy,data:new Map,refCount:0}}function Ge(c){c.refCount--,c.refCount===0&&br(US,function(){c.controller.abort()})}function De(){}function Tt(c){c!==Qn&&c.next===null&&(Qn===null?Ph=Qn=c:Qn=Qn.next=c),sa=!0,zr||(zr=!0,wt())}function ht(c,h){if(!Nd&&sa){Nd=!0;do for(var y=!1,b=Ph;b!==null;){if(c!==0){var R=b.pendingLanes;if(R===0)var D=0;else{var j=b.suspendedLanes,ae=b.pingedLanes;D=(1<<31-hs(42|c)+1)-1,D&=R&~(j&~ae),D=D&201326741?D&201326741|1:D?D|2:0}D!==0&&(y=!0,Ct(b,D))}else D=On,D=M(b,b===wn?D:0,b.cancelPendingCommit!==null||b.timeoutHandle!==us),(D&3)===0||C(b,D)||(y=!0,Ct(b,D));b=b.next}while(y);Nd=!1}}function Lt(){Yt()}function Yt(){sa=zr=!1;var c=0;ml!==0&&ic()&&(c=ml);for(var h=Br(),y=null,b=Ph;b!==null;){var R=b.next,D=Xe(b,h);D===0?(b.next=null,y===null?Ph=R:y.next=R,R===null&&(Qn=y)):(y=b,(c!==0||(D&3)!==0)&&(sa=!0)),b=R}Ji!==0&&Ji!==5||ht(c),ml!==0&&(ml=0)}function Xe(c,h){for(var y=c.suspendedLanes,b=c.pingedLanes,R=c.expirationTimes,D=c.pendingLanes&-62914561;0<D;){var j=31-hs(D),ae=1<<j,Pe=R[j];Pe===-1?((ae&y)===0||(ae&b)!==0)&&(R[j]=N(ae,h)):Pe<=h&&(c.expiredLanes|=ae),D&=~ae}if(h=wn,y=On,y=M(c,c===h?y:0,c.cancelPendingCommit!==null||c.timeoutHandle!==us),b=c.callbackNode,y===0||c===h&&(ti===2||ti===9)||c.cancelPendingCommit!==null)return b!==null&&b!==null&&Md(b),c.callbackNode=null,c.callbackPriority=0;if((y&3)===0||C(c,y)){if(h=y&-y,h===c.callbackPriority)return h;switch(b!==null&&Md(b),ie(y)){case 2:case 8:y=ky;break;case 32:y=Rh;break;case 268435456:y=Td;break;default:y=Rh}return b=$e.bind(null,c),y=Ch(y,b),c.callbackPriority=h,c.callbackNode=y,h}return b!==null&&b!==null&&Md(b),c.callbackPriority=2,c.callbackNode=null,2}function $e(c,h){if(Ji!==0&&Ji!==5)return c.callbackNode=null,c.callbackPriority=0,null;var y=c.callbackNode;if(Ga()&&c.callbackNode!==y)return null;var b=On;return b=M(c,c===wn?b:0,c.cancelPendingCommit!==null||c.timeoutHandle!==us),b===0?null:(ma(c,b,h),Xe(c,Br()),c.callbackNode!=null&&c.callbackNode===y?$e.bind(null,c):null)}function Ct(c,h){if(Ga())return null;ma(c,h,!0)}function wt(){zm?Fm(function(){(Rn&6)!==0?Ch(Ed,Lt):Yt()}):Ch(Ed,Lt)}function st(){if(ml===0){var c=Co;c===0&&(c=wd,wd<<=1,(wd&261888)===0&&(wd=256)),ml=c}return ml}function jt(c,h){if(uu===null){var y=uu=[];pg=0,Co=st(),ur={status:"pending",value:void 0,then:function(b){y.push(b)}}}return pg++,h.then(pe,pe),h}function pe(){if(--pg===0&&uu!==null){ur!==null&&(ur.status="fulfilled");var c=uu;uu=null,Co=0,ur=null;for(var h=0;h<c.length;h++)(0,c[h])()}}function Ce(c,h){var y=[],b={status:"pending",value:null,reason:null,then:function(R){y.push(R)}};return c.then(function(){b.status="fulfilled",b.value=h;for(var R=0;R<y.length;R++)(0,y[R])(h)},function(R){for(b.status="rejected",b.reason=R,R=0;R<y.length;R++)(0,y[R])(void 0)}),b}function et(){var c=gl.current;return c!==null?c:wn.pooledCache}function Et(c,h){h===null?S(gl,gl.current):S(gl,h.pool)}function Qe(){var c=et();return c===null?null:{parent:Bi?bi._currentValue:bi._currentValue2,pool:c}}function Fe(c,h){if(Fi(c,h))return!0;if(typeof c!="object"||c===null||typeof h!="object"||h===null)return!1;var y=Object.keys(c),b=Object.keys(h);if(y.length!==b.length)return!1;for(b=0;b<y.length;b++){var R=y[b];if(!LS.call(h,R)||!Fi(c[R],h[R]))return!1}return!0}function gt(c){return c=c.status,c==="fulfilled"||c==="rejected"}function nn(c,h,y){switch(y=c[y],y===void 0?c.push(h):y!==h&&(h.then(De,De),h=y),h.status){case"fulfilled":return h.value;case"rejected":throw c=h.reason,rr(c),c;default:if(typeof h.status=="string")h.then(De,De);else{if(c=wn,c!==null&&100<c.shellSuspendCounter)throw Error(r(482));c=h,c.status="pending",c.then(function(b){if(h.status==="pending"){var R=h;R.status="fulfilled",R.value=b}},function(b){if(h.status==="pending"){var R=h;R.status="rejected",R.reason=b}})}switch(h.status){case"fulfilled":return h.value;case"rejected":throw c=h.reason,rr(c),c}throw Kr=h,hr}}function Dn(c){try{var h=c._init;return h(c._payload)}catch(y){throw y!==null&&typeof y=="object"&&typeof y.then=="function"?(Kr=y,hr):y}}function Ln(){if(Kr===null)throw Error(r(459));var c=Kr;return Kr=null,c}function rr(c){if(c===hr||c===oa)throw Error(r(483))}function Lr(c){var h=uc;return uc+=1,vl===null&&(vl=[]),nn(vl,c,h)}function Ra(c,h){h=h.props.ref,c.ref=h!==void 0?h:null}function Na(c,h){throw h.$$typeof===Jl?Error(r(525)):(c=Object.prototype.toString.call(h),Error(r(31,c==="[object Object]"?"object with keys {"+Object.keys(h).join(", ")+"}":c)))}function Ws(c){function h(Ee,_e){if(c){var Ne=Ee.deletions;Ne===null?(Ee.deletions=[_e],Ee.flags|=16):Ne.push(_e)}}function y(Ee,_e){if(!c)return null;for(;_e!==null;)h(Ee,_e),_e=_e.sibling;return null}function b(Ee){for(var _e=new Map;Ee!==null;)Ee.key!==null?_e.set(Ee.key,Ee):_e.set(Ee.index,Ee),Ee=Ee.sibling;return _e}function R(Ee,_e){return Ee=Cs(Ee,_e),Ee.index=0,Ee.sibling=null,Ee}function D(Ee,_e,Ne){return Ee.index=Ne,c?(Ne=Ee.alternate,Ne!==null?(Ne=Ne.index,Ne<_e?(Ee.flags|=67108866,_e):Ne):(Ee.flags|=67108866,_e)):(Ee.flags|=1048576,_e)}function j(Ee){return c&&Ee.alternate===null&&(Ee.flags|=67108866),Ee}function ae(Ee,_e,Ne,dt){return _e===null||_e.tag!==6?(_e=Cm(Ne,Ee.mode,dt),_e.return=Ee,_e):(_e=R(_e,Ne),_e.return=Ee,_e)}function Pe(Ee,_e,Ne,dt){var en=Ne.type;return en===ec?_t(Ee,_e,Ne.props.children,dt,Ne.key):_e!==null&&(_e.elementType===en||typeof en=="object"&&en!==null&&en.$$typeof===$r&&Dn(en)===_e.type)?(_e=R(_e,Ne.props),Ra(_e,Ne),_e.return=Ee,_e):(_e=bo(Ne.type,Ne.key,Ne.props,null,Ee.mode,dt),Ra(_e,Ne),_e.return=Ee,_e)}function Ke(Ee,_e,Ne,dt){return _e===null||_e.tag!==4||_e.stateNode.containerInfo!==Ne.containerInfo||_e.stateNode.implementation!==Ne.implementation?(_e=Nm(Ne,Ee.mode,dt),_e.return=Ee,_e):(_e=R(_e,Ne.children||[]),_e.return=Ee,_e)}function _t(Ee,_e,Ne,dt,en){return _e===null||_e.tag!==7?(_e=Js(Ne,Ee.mode,dt,en),_e.return=Ee,_e):(_e=R(_e,Ne),_e.return=Ee,_e)}function it(Ee,_e,Ne){if(typeof _e=="string"&&_e!==""||typeof _e=="number"||typeof _e=="bigint")return _e=Cm(""+_e,Ee.mode,Ne),_e.return=Ee,_e;if(typeof _e=="object"&&_e!==null){switch(_e.$$typeof){case ja:return Ne=bo(_e.type,_e.key,_e.props,null,Ee.mode,Ne),Ra(Ne,_e),Ne.return=Ee,Ne;case Ql:return _e=Nm(_e,Ee.mode,Ne),_e.return=Ee,_e;case $r:return _e=Dn(_e),it(Ee,_e,Ne)}if(hl(_e)||m(_e))return _e=Js(_e,Ee.mode,Ne,null),_e.return=Ee,_e;if(typeof _e.then=="function")return it(Ee,Lr(_e),Ne);if(_e.$$typeof===Qs)return it(Ee,B(Ee,_e),Ne);Na(Ee,_e)}return null}function It(Ee,_e,Ne,dt){var en=_e!==null?_e.key:null;if(typeof Ne=="string"&&Ne!==""||typeof Ne=="number"||typeof Ne=="bigint")return en!==null?null:ae(Ee,_e,""+Ne,dt);if(typeof Ne=="object"&&Ne!==null){switch(Ne.$$typeof){case ja:return Ne.key===en?Pe(Ee,_e,Ne,dt):null;case Ql:return Ne.key===en?Ke(Ee,_e,Ne,dt):null;case $r:return Ne=Dn(Ne),It(Ee,_e,Ne,dt)}if(hl(Ne)||m(Ne))return en!==null?null:_t(Ee,_e,Ne,dt,null);if(typeof Ne.then=="function")return It(Ee,_e,Lr(Ne),dt);if(Ne.$$typeof===Qs)return It(Ee,_e,B(Ee,Ne),dt);Na(Ee,Ne)}return null}function dn(Ee,_e,Ne,dt,en){if(typeof dt=="string"&&dt!==""||typeof dt=="number"||typeof dt=="bigint")return Ee=Ee.get(Ne)||null,ae(_e,Ee,""+dt,en);if(typeof dt=="object"&&dt!==null){switch(dt.$$typeof){case ja:return Ee=Ee.get(dt.key===null?Ne:dt.key)||null,Pe(_e,Ee,dt,en);case Ql:return Ee=Ee.get(dt.key===null?Ne:dt.key)||null,Ke(_e,Ee,dt,en);case $r:return dt=Dn(dt),dn(Ee,_e,Ne,dt,en)}if(hl(dt)||m(dt))return Ee=Ee.get(Ne)||null,_t(_e,Ee,dt,en,null);if(typeof dt.then=="function")return dn(Ee,_e,Ne,Lr(dt),en);if(dt.$$typeof===Qs)return dn(Ee,_e,Ne,B(_e,dt),en);Na(_e,dt)}return null}function Gi(Ee,_e,Ne,dt){for(var en=null,Ri=null,tn=_e,Fn=_e=0,Sr=null;tn!==null&&Fn<Ne.length;Fn++){tn.index>Fn?(Sr=tn,tn=null):Sr=tn.sibling;var Xn=It(Ee,tn,Ne[Fn],dt);if(Xn===null){tn===null&&(tn=Sr);break}c&&tn&&Xn.alternate===null&&h(Ee,tn),_e=D(Xn,_e,Fn),Ri===null?en=Xn:Ri.sibling=Xn,Ri=Xn,tn=Sr}if(Fn===Ne.length)return y(Ee,tn),Pn&&we(Ee,Fn),en;if(tn===null){for(;Fn<Ne.length;Fn++)tn=it(Ee,Ne[Fn],dt),tn!==null&&(_e=D(tn,_e,Fn),Ri===null?en=tn:Ri.sibling=tn,Ri=tn);return Pn&&we(Ee,Fn),en}for(tn=b(tn);Fn<Ne.length;Fn++)Sr=dn(tn,Ee,Fn,Ne[Fn],dt),Sr!==null&&(c&&Sr.alternate!==null&&tn.delete(Sr.key===null?Fn:Sr.key),_e=D(Sr,_e,Fn),Ri===null?en=Sr:Ri.sibling=Sr,Ri=Sr);return c&&tn.forEach(function(ua){return h(Ee,ua)}),Pn&&we(Ee,Fn),en}function yu(Ee,_e,Ne,dt){if(Ne==null)throw Error(r(151));for(var en=null,Ri=null,tn=_e,Fn=_e=0,Sr=null,Xn=Ne.next();tn!==null&&!Xn.done;Fn++,Xn=Ne.next()){tn.index>Fn?(Sr=tn,tn=null):Sr=tn.sibling;var ua=It(Ee,tn,Xn.value,dt);if(ua===null){tn===null&&(tn=Sr);break}c&&tn&&ua.alternate===null&&h(Ee,tn),_e=D(ua,_e,Fn),Ri===null?en=ua:Ri.sibling=ua,Ri=ua,tn=Sr}if(Xn.done)return y(Ee,tn),Pn&&we(Ee,Fn),en;if(tn===null){for(;!Xn.done;Fn++,Xn=Ne.next())Xn=it(Ee,Xn.value,dt),Xn!==null&&(_e=D(Xn,_e,Fn),Ri===null?en=Xn:Ri.sibling=Xn,Ri=Xn);return Pn&&we(Ee,Fn),en}for(tn=b(tn);!Xn.done;Fn++,Xn=Ne.next())Xn=dn(tn,Ee,Fn,Xn.value,dt),Xn!==null&&(c&&Xn.alternate!==null&&tn.delete(Xn.key===null?Fn:Xn.key),_e=D(Xn,_e,Fn),Ri===null?en=Xn:Ri.sibling=Xn,Ri=Xn);return c&&tn.forEach(function(kS){return h(Ee,kS)}),Pn&&we(Ee,Fn),en}function El(Ee,_e,Ne,dt){if(typeof Ne=="object"&&Ne!==null&&Ne.type===ec&&Ne.key===null&&(Ne=Ne.props.children),typeof Ne=="object"&&Ne!==null){switch(Ne.$$typeof){case ja:e:{for(var en=Ne.key;_e!==null;){if(_e.key===en){if(en=Ne.type,en===ec){if(_e.tag===7){y(Ee,_e.sibling),dt=R(_e,Ne.props.children),dt.return=Ee,Ee=dt;break e}}else if(_e.elementType===en||typeof en=="object"&&en!==null&&en.$$typeof===$r&&Dn(en)===_e.type){y(Ee,_e.sibling),dt=R(_e,Ne.props),Ra(dt,Ne),dt.return=Ee,Ee=dt;break e}y(Ee,_e);break}else h(Ee,_e);_e=_e.sibling}Ne.type===ec?(dt=Js(Ne.props.children,Ee.mode,dt,Ne.key),dt.return=Ee,Ee=dt):(dt=bo(Ne.type,Ne.key,Ne.props,null,Ee.mode,dt),Ra(dt,Ne),dt.return=Ee,Ee=dt)}return j(Ee);case Ql:e:{for(en=Ne.key;_e!==null;){if(_e.key===en)if(_e.tag===4&&_e.stateNode.containerInfo===Ne.containerInfo&&_e.stateNode.implementation===Ne.implementation){y(Ee,_e.sibling),dt=R(_e,Ne.children||[]),dt.return=Ee,Ee=dt;break e}else{y(Ee,_e);break}else h(Ee,_e);_e=_e.sibling}dt=Nm(Ne,Ee.mode,dt),dt.return=Ee,Ee=dt}return j(Ee);case $r:return Ne=Dn(Ne),El(Ee,_e,Ne,dt)}if(hl(Ne))return Gi(Ee,_e,Ne,dt);if(m(Ne)){if(en=m(Ne),typeof en!="function")throw Error(r(150));return Ne=en.call(Ne),yu(Ee,_e,Ne,dt)}if(typeof Ne.then=="function")return El(Ee,_e,Lr(Ne),dt);if(Ne.$$typeof===Qs)return El(Ee,_e,B(Ee,Ne),dt);Na(Ee,Ne)}return typeof Ne=="string"&&Ne!==""||typeof Ne=="number"||typeof Ne=="bigint"?(Ne=""+Ne,_e!==null&&_e.tag===6?(y(Ee,_e.sibling),dt=R(_e,Ne),dt.return=Ee,Ee=dt):(y(Ee,_e),dt=Cm(Ne,Ee.mode,dt),dt.return=Ee,Ee=dt),j(Ee)):y(Ee,_e)}return function(Ee,_e,Ne,dt){try{uc=0;var en=El(Ee,_e,Ne,dt);return vl=null,en}catch(tn){if(tn===hr||tn===oa)throw tn;var Ri=t(29,tn,null,Ee.mode);return Ri.lanes=dt,Ri.return=Ee,Ri}}}function Da(){for(var c=Za,h=hc=Za=0;h<c;){var y=Nr[h];Nr[h++]=null;var b=Nr[h];Nr[h++]=null;var R=Nr[h];Nr[h++]=null;var D=Nr[h];if(Nr[h++]=null,b!==null&&R!==null){var j=b.pending;j===null?R.next=R:(R.next=j.next,j.next=R),b.pending=R}D!==0&&Ur(y,R,D)}}function jr(c,h,y,b){Nr[Za++]=c,Nr[Za++]=h,Nr[Za++]=y,Nr[Za++]=b,hc|=b,c.lanes|=b,c=c.alternate,c!==null&&(c.lanes|=b)}function Ms(c,h,y,b){return jr(c,h,y,b),di(c)}function Qt(c,h){return jr(c,null,null,h),di(c)}function Ur(c,h,y){c.lanes|=y;var b=c.alternate;b!==null&&(b.lanes|=y);for(var R=!1,D=c.return;D!==null;)D.childLanes|=y,b=D.alternate,b!==null&&(b.childLanes|=y),D.tag===22&&(c=D.stateNode,c===null||c._visibility&1||(R=!0)),c=D,D=D.return;return c.tag===3?(D=c.stateNode,R&&h!==null&&(R=31-hs(y),c=D.hiddenUpdates,b=c[R],b===null?c[R]=[h]:b.push(h),h.lane=y|536870912),D):null}function di(c){if(50<jn)throw jn=0,zh=null,Error(r(185));for(var h=c.return;h!==null;)c=h,h=c.return;return c.tag===3?c.stateNode:null}function z(c){c.updateQueue={baseState:c.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function q(c,h){c=c.updateQueue,h.updateQueue===c&&(h.updateQueue={baseState:c.baseState,firstBaseUpdate:c.firstBaseUpdate,lastBaseUpdate:c.lastBaseUpdate,shared:c.shared,callbacks:null})}function se(c){return{lane:c,tag:0,payload:null,callback:null,next:null}}function be(c,h,y){var b=c.updateQueue;if(b===null)return null;if(b=b.shared,(Rn&2)!==0){var R=b.pending;return R===null?h.next=h:(h.next=R.next,R.next=h),b.pending=h,h=di(c),Ur(c,null,y),h}return jr(c,b,h,y),di(c)}function Oe(c,h,y){if(h=h.updateQueue,h!==null&&(h=h.shared,(y&4194048)!==0)){var b=h.lanes;b&=c.pendingLanes,y|=b,h.lanes=y,P(c,y)}}function Ue(c,h){var y=c.updateQueue,b=c.alternate;if(b!==null&&(b=b.updateQueue,y===b)){var R=null,D=null;if(y=y.firstBaseUpdate,y!==null){do{var j={lane:y.lane,tag:y.tag,payload:y.payload,callback:null,next:null};D===null?R=D=j:D=D.next=j,y=y.next}while(y!==null);D===null?R=D=h:D=D.next=h}else R=D=h;y={baseState:b.baseState,firstBaseUpdate:R,lastBaseUpdate:D,shared:b.shared,callbacks:b.callbacks},c.updateQueue=y;return}c=y.lastBaseUpdate,c===null?y.firstBaseUpdate=h:c.next=h,y.lastBaseUpdate=h}function tt(){if(Id){var c=ur;if(c!==null)throw c}}function Ze(c,h,y,b){Id=!1;var R=c.updateQueue;Ds=!1;var D=R.firstBaseUpdate,j=R.lastBaseUpdate,ae=R.shared.pending;if(ae!==null){R.shared.pending=null;var Pe=ae,Ke=Pe.next;Pe.next=null,j===null?D=Ke:j.next=Ke,j=Pe;var _t=c.alternate;_t!==null&&(_t=_t.updateQueue,ae=_t.lastBaseUpdate,ae!==j&&(ae===null?_t.firstBaseUpdate=Ke:ae.next=Ke,_t.lastBaseUpdate=Pe))}if(D!==null){var it=R.baseState;j=0,_t=Ke=Pe=null,ae=D;do{var It=ae.lane&-536870913,dn=It!==ae.lane;if(dn?(On&It)===It:(b&It)===It){It!==0&&It===Co&&(Id=!0),_t!==null&&(_t=_t.next={lane:0,tag:ae.tag,payload:ae.payload,callback:null,next:null});e:{var Gi=c,yu=ae;It=h;var El=y;switch(yu.tag){case 1:if(Gi=yu.payload,typeof Gi=="function"){it=Gi.call(El,it,It);break e}it=Gi;break e;case 3:Gi.flags=Gi.flags&-65537|128;case 0:if(Gi=yu.payload,It=typeof Gi=="function"?Gi.call(El,it,It):Gi,It==null)break e;it=ad({},it,It);break e;case 2:Ds=!0}}It=ae.callback,It!==null&&(c.flags|=64,dn&&(c.flags|=8192),dn=R.callbacks,dn===null?R.callbacks=[It]:dn.push(It))}else dn={lane:It,tag:ae.tag,payload:ae.payload,callback:ae.callback,next:null},_t===null?(Ke=_t=dn,Pe=it):_t=_t.next=dn,j|=It;if(ae=ae.next,ae===null){if(ae=R.shared.pending,ae===null)break;dn=ae,ae=dn.next,dn.next=null,R.lastBaseUpdate=dn,R.shared.pending=null}}while(!0);_t===null&&(Pe=it),R.baseState=Pe,R.firstBaseUpdate=Ke,R.lastBaseUpdate=_t,D===null&&(R.shared.lanes=0),No|=j,c.lanes=j,c.memoizedState=it}}function ft(c,h){if(typeof c!="function")throw Error(r(191,c));c.call(h)}function ct(c,h){var y=c.callbacks;if(y!==null)for(c.callbacks=null,c=0;c<y.length;c++)ft(y[c],h)}function vt(c,h){c=Ja,S(yl,c),S(fc,h),Ja=c|h.baseLanes}function lt(){S(yl,Ja),S(fc,fc.current)}function G(){Ja=yl.current,x(fc),x(yl)}function ne(c){var h=c.alternate;S(Pi,Pi.current&1),S(ds,c),ps===null&&(h===null||fc.current!==null||h.memoizedState!==null)&&(ps=c)}function he(c){S(Pi,Pi.current),S(ds,c),ps===null&&(ps=c)}function me(c){c.tag===22?(S(Pi,Pi.current),S(ds,c),ps===null&&(ps=c)):oe()}function oe(){S(Pi,Pi.current),S(ds,ds.current)}function Ve(c){x(ds),ps===c&&(ps=null),x(Pi)}function nt(c){for(var h=c;h!==null;){if(h.tag===13){var y=h.memoizedState;if(y!==null&&(y=y.dehydrated,y===null||dl(y)||pd(y)))return h}else if(h.tag===19&&(h.memoizedProps.revealOrder==="forwards"||h.memoizedProps.revealOrder==="backwards"||h.memoizedProps.revealOrder==="unstable_legacy-backwards"||h.memoizedProps.revealOrder==="together")){if((h.flags&128)!==0)return h}else if(h.child!==null){h.child.return=h,h=h.child;continue}if(h===c)break;for(;h.sibling===null;){if(h.return===null||h.return===c)return null;h=h.return}h.sibling.return=h.return,h=h.sibling}return null}function je(){throw Error(r(321))}function bt(c,h){if(h===null)return!1;for(var y=0;y<h.length&&y<c.length;y++)if(!Fi(c[y],h[y]))return!1;return!0}function ut(c,h,y,b,R,D){return Ro=D,mn=h,h.memoizedState=null,h.updateQueue=null,h.lanes=0,Zt.H=c===null||c.memoizedState===null?Ti:Ka,Bn=!1,D=y(b,R),Bn=!1,_n&&(D=pt(h,y,b,R)),Ut(c),D}function Ut(c){Zt.H=Is;var h=Wt!==null&&Wt.next!==null;if(Ro=0,cn=Wt=mn=null,Sn=!1,la=0,ya=null,h)throw Error(r(300));c===null||pi||(c=c.dependencies,c!==null&&Vt(c)&&(pi=!0))}function pt(c,h,y,b){mn=c;var R=0;do{if(_n&&(ya=null),la=0,_n=!1,25<=R)throw Error(r(301));if(R+=1,cn=Wt=null,c.updateQueue!=null){var D=c.updateQueue;D.lastEffect=null,D.events=null,D.stores=null,D.memoCache!=null&&(D.memoCache.index=0)}Zt.H=_l,D=h(y,b)}while(_n);return D}function Pt(){var c=Zt.H,h=c.useState()[0];return h=typeof h.then=="function"?Mt(h):h,c=c.useState()[0],(Wt!==null?Wt.memoizedState:null)!==c&&(mn.flags|=1024),h}function fn(){var c=Fr!==0;return Fr=0,c}function qn(c,h,y){h.updateQueue=c.updateQueue,h.flags&=-2053,c.lanes&=~y}function yn(c){if(Sn){for(c=c.memoizedState;c!==null;){var h=c.queue;h!==null&&(h.pending=null),c=c.next}Sn=!1}Ro=0,cn=Wt=mn=null,_n=!1,la=Fr=0,ya=null}function Dt(){var c={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return cn===null?mn.memoizedState=cn=c:cn=cn.next=c,cn}function at(){if(Wt===null){var c=mn.alternate;c=c!==null?c.memoizedState:null}else c=Wt.next;var h=cn===null?mn.memoizedState:cn.next;if(h!==null)cn=h,Wt=c;else{if(c===null)throw mn.alternate===null?Error(r(467)):Error(r(310));Wt=c,c={memoizedState:Wt.memoizedState,baseState:Wt.baseState,baseQueue:Wt.baseQueue,queue:Wt.queue,next:null},cn===null?mn.memoizedState=cn=c:cn=cn.next=c}return cn}function Ht(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function Mt(c){var h=la;return la+=1,ya===null&&(ya=[]),c=nn(ya,c,h),h=mn,(cn===null?h.memoizedState:cn.next)===null&&(h=h.alternate,Zt.H=h===null||h.memoizedState===null?Ti:Ka),c}function Gn(c){if(c!==null&&typeof c=="object"){if(typeof c.then=="function")return Mt(c);if(c.$$typeof===Qs)return $(c)}throw Error(r(438,String(c)))}function sr(c){var h=null,y=mn.updateQueue;if(y!==null&&(h=y.memoCache),h==null){var b=mn.alternate;b!==null&&(b=b.updateQueue,b!==null&&(b=b.memoCache,b!=null&&(h={data:b.data.map(function(R){return R.slice()}),index:0})))}if(h==null&&(h={data:[],index:0}),y===null&&(y=Ht(),mn.updateQueue=y),y.memoCache=h,y=h.data[h.index],y===void 0)for(y=h.data[h.index]=Array(c),b=0;b<c;b++)y[b]=Im;return h.index++,y}function Tn(c,h){return typeof h=="function"?h(c):h}function vi(c){var h=at();return $n(h,Wt,c)}function $n(c,h,y){var b=c.queue;if(b===null)throw Error(r(311));b.lastRenderedReducer=y;var R=c.baseQueue,D=b.pending;if(D!==null){if(R!==null){var j=R.next;R.next=D.next,D.next=j}h.baseQueue=R=D,b.pending=null}if(D=c.baseState,R===null)c.memoizedState=D;else{h=R.next;var ae=j=null,Pe=null,Ke=h,_t=!1;do{var it=Ke.lane&-536870913;if(it!==Ke.lane?(On&it)===it:(Ro&it)===it){var It=Ke.revertLane;if(It===0)Pe!==null&&(Pe=Pe.next={lane:0,revertLane:0,gesture:null,action:Ke.action,hasEagerState:Ke.hasEagerState,eagerState:Ke.eagerState,next:null}),it===Co&&(_t=!0);else if((Ro&It)===It){Ke=Ke.next,It===Co&&(_t=!0);continue}else it={lane:0,revertLane:Ke.revertLane,gesture:null,action:Ke.action,hasEagerState:Ke.hasEagerState,eagerState:Ke.eagerState,next:null},Pe===null?(ae=Pe=it,j=D):Pe=Pe.next=it,mn.lanes|=It,No|=It;it=Ke.action,Bn&&y(D,it),D=Ke.hasEagerState?Ke.eagerState:y(D,it)}else It={lane:it,revertLane:Ke.revertLane,gesture:Ke.gesture,action:Ke.action,hasEagerState:Ke.hasEagerState,eagerState:Ke.eagerState,next:null},Pe===null?(ae=Pe=It,j=D):Pe=Pe.next=It,mn.lanes|=it,No|=it;Ke=Ke.next}while(Ke!==null&&Ke!==h);if(Pe===null?j=D:Pe.next=ae,!Fi(D,c.memoizedState)&&(pi=!0,_t&&(y=ur,y!==null)))throw y;c.memoizedState=D,c.baseState=j,c.baseQueue=Pe,b.lastRenderedState=D}return R===null&&(b.lanes=0),[c.memoizedState,b.dispatch]}function ar(c){var h=at(),y=h.queue;if(y===null)throw Error(r(311));y.lastRenderedReducer=c;var b=y.dispatch,R=y.pending,D=h.memoizedState;if(R!==null){y.pending=null;var j=R=R.next;do D=c(D,j.action),j=j.next;while(j!==R);Fi(D,h.memoizedState)||(pi=!0),h.memoizedState=D,h.baseQueue===null&&(h.baseState=D),y.lastRenderedState=D}return[D,b]}function $i(c,h,y){var b=mn,R=at(),D=Pn;if(D){if(y===void 0)throw Error(r(407));y=y()}else y=h();var j=!Fi((Wt||R).memoizedState,y);if(j&&(R.memoizedState=y,pi=!0),R=R.queue,Bc(Hl.bind(null,b,R,c),[c]),R.getSnapshot!==h||j||cn!==null&&cn.memoizedState.tag&1){if(b.flags|=2048,Es(9,{destroy:void 0},gr.bind(null,b,R,y,h),null),wn===null)throw Error(r(349));D||(Ro&127)!==0||mr(b,h,y)}return y}function mr(c,h,y){c.flags|=16384,c={getSnapshot:h,value:y},h=mn.updateQueue,h===null?(h=Ht(),mn.updateQueue=h,h.stores=[c]):(y=h.stores,y===null?h.stores=[c]:y.push(c))}function gr(c,h,y,b){h.value=y,h.getSnapshot=b,qs(h)&&_v(c)}function Hl(c,h,y){return y(function(){qs(h)&&_v(c)})}function qs(c){var h=c.getSnapshot;c=c.value;try{var y=h();return!Fi(c,y)}catch{return!0}}function _v(c){var h=Qt(c,2);h!==null&&Mi(h,c,2)}function im(c){var h=Dt();if(typeof c=="function"){var y=c;if(c=y(),Bn){te(!0);try{y()}finally{te(!1)}}}return h.memoizedState=h.baseState=c,h.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Tn,lastRenderedState:c},h}function th(c,h,y,b){return c.baseState=y,$n(c,Wt,typeof b=="function"?b:Tn)}function mo(c,h,y,b,R){if(Ff(c))throw Error(r(485));if(c=h.action,c!==null){var D={payload:R,action:c,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(j){D.listeners.push(j)}};Zt.T!==null?y(!0):D.isTransition=!1,b(D),y=h.pending,y===null?(D.next=h.pending=D,Pf(h,D)):(D.next=y.next,h.pending=y.next=D)}}function Pf(c,h){var y=h.action,b=h.payload,R=c.state;if(h.isTransition){var D=Zt.T,j={};Zt.T=j;try{var ae=y(R,b),Pe=Zt.S;Pe!==null&&Pe(j,ae),Of(c,h,ae)}catch(Ke){Jo(c,h,Ke)}finally{D!==null&&j.types!==null&&(D.types=j.types),Zt.T=D}}else try{D=y(R,b),Of(c,h,D)}catch(Ke){Jo(c,h,Ke)}}function Of(c,h,y){y!==null&&typeof y=="object"&&typeof y.then=="function"?y.then(function(b){Gl(c,h,b)},function(b){return Jo(c,h,b)}):Gl(c,h,y)}function Gl(c,h,y){h.status="fulfilled",h.value=y,rm(h),c.state=y,h=c.pending,h!==null&&(y=h.next,y===h?c.pending=null:(y=y.next,h.next=y,Pf(c,y)))}function Jo(c,h,y){var b=c.pending;if(c.pending=null,b!==null){b=b.next;do h.status="rejected",h.reason=y,rm(h),h=h.next;while(h!==b)}c.action=null}function rm(c){c=c.listeners;for(var h=0;h<c.length;h++)(0,c[h])()}function Lf(c,h){return h}function sm(c,h){if(Pn){var y=wn.formState;if(y!==null){e:{var b=mn;if(Pn){if(xi){var R=dy(xi,Zr);if(R){xi=py(R),b=Km(R);break e}}xt(b)}b=!1}b&&(h=y[0])}}y=Dt(),y.memoizedState=y.baseState=h,b={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Lf,lastRenderedState:h},y.queue=b,y=Ev.bind(null,mn,b),b.dispatch=y,b=im(!1);var D=zf.bind(null,mn,!1,b.queue);return b=Dt(),R={state:h,dispatch:null,action:c,pending:null},b.queue=R,y=mo.bind(null,mn,R,D,y),R.dispatch=y,b.memoizedState=c,[h,y,!1]}function Uc(c){var h=at();return Ia(h,Wt,c)}function Ia(c,h,y){if(h=$n(c,h,Lf)[0],c=vi(Tn)[0],typeof h=="object"&&h!==null&&typeof h.then=="function")try{var b=Mt(h)}catch(j){throw j===hr?oa:j}else b=h;h=at();var R=h.queue,D=R.dispatch;return y!==h.memoizedState&&(mn.flags|=2048,Es(9,{destroy:void 0},am.bind(null,R,y),null)),[b,D,c]}function am(c,h){c.action=h}function kc(c){var h=at(),y=Wt;if(y!==null)return Ia(h,y,c);at(),h=h.memoizedState,y=at();var b=y.queue.dispatch;return y.memoizedState=c,[h,b,!1]}function Es(c,h,y,b){return c={tag:c,create:y,deps:b,inst:h,next:null},h=mn.updateQueue,h===null&&(h=Ht(),mn.updateQueue=h),y=h.lastEffect,y===null?h.lastEffect=c.next=c:(b=y.next,y.next=c,c.next=b,h.lastEffect=c),c}function Uf(){return at().memoizedState}function jl(c,h,y,b){var R=Dt();mn.flags|=c,R.memoizedState=Es(1|h,{destroy:void 0},y,b===void 0?null:b)}function nh(c,h,y,b){var R=at();b=b===void 0?null:b;var D=R.memoizedState.inst;Wt!==null&&b!==null&&bt(b,Wt.memoizedState.deps)?R.memoizedState=Es(h,D,y,b):(mn.flags|=c,R.memoizedState=Es(1|h,D,y,b))}function ih(c,h){jl(8390656,8,c,h)}function Bc(c,h){nh(2048,8,c,h)}function xv(c){mn.flags|=4;var h=mn.updateQueue;if(h===null)h=Ht(),mn.updateQueue=h,h.events=[c];else{var y=h.events;y===null?h.events=[c]:y.push(c)}}function Wr(c){var h=at().memoizedState;return xv({ref:h,nextImpl:c}),function(){if((Rn&2)!==0)throw Error(r(440));return h.impl.apply(void 0,arguments)}}function Qo(c,h){return nh(4,2,c,h)}function rh(c,h){return nh(4,4,c,h)}function zc(c,h){if(typeof h=="function"){c=c();var y=h(c);return function(){typeof y=="function"?y():h(null)}}if(h!=null)return c=c(),h.current=c,function(){h.current=null}}function bv(c,h,y){y=y!=null?y.concat([c]):null,nh(4,4,zc.bind(null,h,c),y)}function sh(){}function kf(c,h){var y=at();h=h===void 0?null:h;var b=y.memoizedState;return h!==null&&bt(h,b[1])?b[0]:(y.memoizedState=[c,h],c)}function Fc(c,h){var y=at();h=h===void 0?null:h;var b=y.memoizedState;if(h!==null&&bt(h,b[1]))return b[0];if(b=c(),Bn){te(!0);try{c()}finally{te(!1)}}return y.memoizedState=[b,h],b}function Vc(c,h,y){return y===void 0||(Ro&1073741824)!==0&&(On&261930)===0?c.memoizedState=h:(c.memoizedState=y,c=yo(),mn.lanes|=c,No|=c,y)}function om(c,h,y,b){return Fi(y,h)?y:fc.current!==null?(c=Vc(c,y,b),Fi(c,h)||(pi=!0),c):(Ro&42)===0||(Ro&1073741824)!==0&&(On&261930)===0?(pi=!0,c.memoizedState=y):(c=yo(),mn.lanes|=c,No|=c,h)}function Sv(c,h,y,b,R){var D=ea();In(D!==0&&8>D?D:8);var j=Zt.T,ae={};Zt.T=ae,zf(c,!1,h,y);try{var Pe=R(),Ke=Zt.S;if(Ke!==null&&Ke(ae,Pe),Pe!==null&&typeof Pe=="object"&&typeof Pe.then=="function"){var _t=Ce(Pe,b);ah(c,h,_t,yi(c))}else ah(c,h,b,yi(c))}catch(it){ah(c,h,{then:function(){},status:"rejected",reason:it},yi())}finally{In(D),j!==null&&ae.types!==null&&(j.types=ae.types),Zt.T=j}}function wv(c){var h=c.memoizedState;if(h!==null)return h;h={memoizedState:rc,baseState:rc,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Tn,lastRenderedState:rc},next:null};var y={};return h.next={memoizedState:y,baseState:y,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Tn,lastRenderedState:y},next:null},c.memoizedState=h,c=c.alternate,c!==null&&(c.memoizedState=h),h}function lm(){return $(sc)}function Bf(){return at().memoizedState}function Mv(){return at().memoizedState}function ES(c){for(var h=c.return;h!==null;){switch(h.tag){case 24:case 3:var y=yi();c=se(y);var b=be(h,c,y);b!==null&&(Mi(b,h,y),Oe(b,h,y)),h={cache:Ie()},c.payload=h;return}h=h.return}}function TS(c,h,y){var b=yi();y={lane:b,revertLane:0,gesture:null,action:y,hasEagerState:!1,eagerState:null,next:null},Ff(c)?Tv(h,y):(y=Ms(c,h,y,b),y!==null&&(Mi(y,c,b),Av(y,h,b)))}function Ev(c,h,y){var b=yi();ah(c,h,y,b)}function ah(c,h,y,b){var R={lane:b,revertLane:0,gesture:null,action:y,hasEagerState:!1,eagerState:null,next:null};if(Ff(c))Tv(h,R);else{var D=c.alternate;if(c.lanes===0&&(D===null||D.lanes===0)&&(D=h.lastRenderedReducer,D!==null))try{var j=h.lastRenderedState,ae=D(j,y);if(R.hasEagerState=!0,R.eagerState=ae,Fi(ae,j))return jr(c,h,R,0),wn===null&&Da(),!1}catch{}if(y=Ms(c,h,R,b),y!==null)return Mi(y,c,b),Av(y,h,b),!0}return!1}function zf(c,h,y,b){if(b={lane:2,revertLane:st(),gesture:null,action:b,hasEagerState:!1,eagerState:null,next:null},Ff(c)){if(h)throw Error(r(479))}else h=Ms(c,y,b,2),h!==null&&Mi(h,c,2)}function Ff(c){var h=c.alternate;return c===mn||h!==null&&h===mn}function Tv(c,h){_n=Sn=!0;var y=c.pending;y===null?h.next=h:(h.next=y.next,y.next=h),c.pending=h}function Av(c,h,y){if((y&4194048)!==0){var b=h.lanes;b&=c.pendingLanes,y|=b,h.lanes=y,P(c,y)}}function cm(c,h,y,b){h=c.memoizedState,y=y(b,h),y=y==null?h:ad({},h,y),c.memoizedState=y,c.lanes===0&&(c.updateQueue.baseState=y)}function Vf(c,h,y,b,R,D,j){return c=c.stateNode,typeof c.shouldComponentUpdate=="function"?c.shouldComponentUpdate(b,D,j):h.prototype&&h.prototype.isPureReactComponent?!Fe(y,b)||!Fe(R,D):!0}function Cv(c,h,y,b){c=h.state,typeof h.componentWillReceiveProps=="function"&&h.componentWillReceiveProps(y,b),typeof h.UNSAFE_componentWillReceiveProps=="function"&&h.UNSAFE_componentWillReceiveProps(y,b),h.state!==c&&Oh.enqueueReplaceState(h,h.state,null)}function Wl(c,h){var y=h;if("ref"in h){y={};for(var b in h)b!=="ref"&&(y[b]=h[b])}if(c=c.defaultProps){y===h&&(y=ad({},y));for(var R in c)y[R]===void 0&&(y[R]=c[R])}return y}function Hf(c,h){try{var y=c.onUncaughtError;y(h.value,{componentStack:h.stack})}catch(b){setTimeout(function(){throw b})}}function um(c,h,y){try{var b=c.onCaughtError;b(y.value,{componentStack:y.stack,errorBoundary:h.tag===1?h.stateNode:null})}catch(R){setTimeout(function(){throw R})}}function hm(c,h,y){return y=se(y),y.tag=3,y.payload={element:null},y.callback=function(){Hf(c,h)},y}function Rv(c){return c=se(c),c.tag=3,c}function Nv(c,h,y,b){var R=y.type.getDerivedStateFromError;if(typeof R=="function"){var D=b.value;c.payload=function(){return R(D)},c.callback=function(){um(h,y,b)}}var j=y.stateNode;j!==null&&typeof j.componentDidCatch=="function"&&(c.callback=function(){um(h,y,b),typeof R!="function"&&(Do===null?Do=new Set([this]):Do.add(this));var ae=b.stack;this.componentDidCatch(b.value,{componentStack:ae!==null?ae:""})})}function AS(c,h,y,b,R){if(y.flags|=32768,b!==null&&typeof b=="object"&&typeof b.then=="function"){if(h=y.alternate,h!==null&&St(h,y,R,!0),y=ds.current,y!==null){switch(y.tag){case 31:case 13:return ps===null?Jc():y.alternate===null&&Ci===0&&(Ci=3),y.flags&=-257,y.flags|=65536,y.lanes=R,b===Ya?y.flags|=16384:(h=y.updateQueue,h===null?y.updateQueue=new Set([b]):h.add(b),tu(c,b,R)),!1;case 22:return y.flags|=65536,b===Ya?y.flags|=16384:(h=y.updateQueue,h===null?(h={transitions:null,markerInstances:null,retryQueue:new Set([b])},y.updateQueue=h):(y=h.retryQueue,y===null?h.retryQueue=new Set([b]):y.add(b)),tu(c,b,R)),!1}throw Error(r(435,y.tag))}return tu(c,b,R),Jc(),!1}if(Pn)return h=ds.current,h!==null?((h.flags&65536)===0&&(h.flags|=256),h.flags|=65536,h.lanes=R,b!==Rd&&(c=Error(r(422),{cause:b}),Je(Te(c,y)))):(b!==Rd&&(h=Error(r(423),{cause:b}),Je(Te(h,y))),c=c.current.alternate,c.flags|=65536,R&=-R,c.lanes|=R,b=Te(b,y),R=hm(c.stateNode,b,R),Ue(c,R),Ci!==4&&(Ci=2)),!1;var D=Error(r(520),{cause:b});if(D=Te(D,y),Uh===null?Uh=[D]:Uh.push(D),Ci!==4&&(Ci=2),h===null)return!0;b=Te(b,y),y=h;do{switch(y.tag){case 3:return y.flags|=65536,c=R&-R,y.lanes|=c,c=hm(y.stateNode,b,c),Ue(y,c),!1;case 1:if(h=y.type,D=y.stateNode,(y.flags&128)===0&&(typeof h.getDerivedStateFromError=="function"||D!==null&&typeof D.componentDidCatch=="function"&&(Do===null||!Do.has(D))))return y.flags|=65536,R&=-R,y.lanes|=R,R=Rv(R),Nv(R,c,y,b),Ue(y,R),!1}y=y.return}while(y!==null);return!1}function Tr(c,h,y,b){h.child=c===null?mg(h,null,y,b):Rr(h,c.child,y,b)}function Dv(c,h,y,b,R){y=y.render;var D=h.ref;if("ref"in b){var j={};for(var ae in b)ae!=="ref"&&(j[ae]=b[ae])}else j=b;return ot(h),b=ut(c,h,y,j,D,R),ae=fn(),c!==null&&!pi?(qn(c,h,R),Pa(c,h,R)):(Pn&&ae&&ce(h),h.flags|=1,Tr(c,h,b,R),h.child)}function Iv(c,h,y,b,R){if(c===null){var D=y.type;return typeof D=="function"&&!Zl(D)&&D.defaultProps===void 0&&y.compare===null?(h.tag=15,h.type=D,Pv(c,h,D,b,R)):(c=bo(y.type,null,b,h,h.mode,R),c.ref=h.ref,c.return=h,h.child=c)}if(D=c.child,!lh(c,R)){var j=D.memoizedProps;if(y=y.compare,y=y!==null?y:Fe,y(j,b)&&c.ref===h.ref)return Pa(c,h,R)}return h.flags|=1,c=Cs(D,b),c.ref=h.ref,c.return=h,h.child=c}function Pv(c,h,y,b,R){if(c!==null){var D=c.memoizedProps;if(Fe(D,b)&&c.ref===h.ref)if(pi=!1,h.pendingProps=b=D,lh(c,R))(c.flags&131072)!==0&&(pi=!0);else return h.lanes=c.lanes,Pa(c,h,R)}return jf(c,h,y,b,R)}function Ov(c,h,y,b){var R=b.children,D=c!==null?c.memoizedState:null;if(c===null&&h.stateNode===null&&(h.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),b.mode==="hidden"){if((h.flags&128)!==0){if(D=D!==null?D.baseLanes|y:y,c!==null){for(b=h.child=c.child,R=0;b!==null;)R=R|b.lanes|b.childLanes,b=b.sibling;b=R&~D}else b=0,h.child=null;return Hc(c,h,D,y,b)}if((y&536870912)!==0)h.memoizedState={baseLanes:0,cachePool:null},c!==null&&Et(h,D!==null?D.cachePool:null),D!==null?vt(h,D):lt(),me(h);else return b=h.lanes=536870912,Hc(c,h,D!==null?D.baseLanes|y:y,y,b)}else D!==null?(Et(h,D.cachePool),vt(h,D),oe(),h.memoizedState=null):(c!==null&&Et(h,null),lt(),oe());return Tr(c,h,R,y),h.child}function ql(c,h){return c!==null&&c.tag===22||h.stateNode!==null||(h.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),h.sibling}function Hc(c,h,y,b,R){var D=et();return D=D===null?null:{parent:Bi?bi._currentValue:bi._currentValue2,pool:D},h.memoizedState={baseLanes:y,cachePool:D},c!==null&&Et(h,null),lt(),me(h),c!==null&&St(c,h,b,!0),h.childLanes=R,null}function Gf(c,h){return h=el({mode:h.mode,children:h.children},c.mode),h.ref=c.ref,c.child=h,h.return=c,h}function fm(c,h,y){return Rr(h,c.child,null,y),c=Gf(h,h.pendingProps),c.flags|=2,Ve(h),h.memoizedState=null,c}function Lv(c,h,y){var b=h.pendingProps,R=(h.flags&128)!==0;if(h.flags&=-129,c===null){if(Pn){if(b.mode==="hidden")return c=Gf(h,b),h.lanes=536870912,ql(null,c);if(he(h),(c=xi)?(c=Qm(c,Zr),c!==null&&(h.memoizedState={dehydrated:c,treeContext:ia!==null?{id:Ar,overflow:ga}:null,retryLane:536870912,hydrationErrors:null},y=Rm(c),y.return=h,h.child=y,cr=h,xi=null)):c=null,c===null)throw xt(h);return h.lanes=536870912,null}return Gf(h,b)}var D=c.memoizedState;if(D!==null){var j=D.dehydrated;if(he(h),R)if(h.flags&256)h.flags&=-257,h=fm(c,h,y);else if(h.memoizedState!==null)h.child=c.child,h.flags|=128,h=null;else throw Error(r(558));else if(pi||St(c,h,y,!1),R=(y&c.childLanes)!==0,pi||R){if(b=wn,b!==null&&(j=k(b,y),j!==0&&j!==D.retryLane))throw D.retryLane=j,Qt(c,j),Mi(b,c,j),Jr;Jc(),h=fm(c,h,y)}else c=D.treeContext,_i&&(xi=yy(j),cr=h,Pn=!0,$a=null,Zr=!1,c!==null&&Be(h,c)),h=Gf(h,b),h.flags|=4096;return h}return c=Cs(c.child,{mode:b.mode,children:b.children}),c.ref=h.ref,h.child=c,c.return=h,c}function oh(c,h){var y=h.ref;if(y===null)c!==null&&c.ref!==null&&(h.flags|=4194816);else{if(typeof y!="function"&&typeof y!="object")throw Error(r(284));(c===null||c.ref!==y)&&(h.flags|=4194816)}}function jf(c,h,y,b,R){return ot(h),y=ut(c,h,y,b,void 0,R),b=fn(),c!==null&&!pi?(qn(c,h,R),Pa(c,h,R)):(Pn&&b&&ce(h),h.flags|=1,Tr(c,h,y,R),h.child)}function dm(c,h,y,b,R,D){return ot(h),h.updateQueue=null,y=pt(h,b,y,R),Ut(c),b=fn(),c!==null&&!pi?(qn(c,h,D),Pa(c,h,D)):(Pn&&b&&ce(h),h.flags|=1,Tr(c,h,y,D),h.child)}function Xl(c,h,y,b,R){if(ot(h),h.stateNode===null){var D=Wa,j=y.contextType;typeof j=="object"&&j!==null&&(D=$(j)),D=new y(b,D),h.memoizedState=D.state!==null&&D.state!==void 0?D.state:null,D.updater=Oh,h.stateNode=D,D._reactInternals=h,D=h.stateNode,D.props=b,D.state=h.memoizedState,D.refs={},z(h),j=y.contextType,D.context=typeof j=="object"&&j!==null?$(j):Wa,D.state=h.memoizedState,j=y.getDerivedStateFromProps,typeof j=="function"&&(cm(h,y,j,b),D.state=h.memoizedState),typeof y.getDerivedStateFromProps=="function"||typeof D.getSnapshotBeforeUpdate=="function"||typeof D.UNSAFE_componentWillMount!="function"&&typeof D.componentWillMount!="function"||(j=D.state,typeof D.componentWillMount=="function"&&D.componentWillMount(),typeof D.UNSAFE_componentWillMount=="function"&&D.UNSAFE_componentWillMount(),j!==D.state&&Oh.enqueueReplaceState(D,D.state,null),Ze(h,b,D,R),tt(),D.state=h.memoizedState),typeof D.componentDidMount=="function"&&(h.flags|=4194308),b=!0}else if(c===null){D=h.stateNode;var ae=h.memoizedProps,Pe=Wl(y,ae);D.props=Pe;var Ke=D.context,_t=y.contextType;j=Wa,typeof _t=="object"&&_t!==null&&(j=$(_t));var it=y.getDerivedStateFromProps;_t=typeof it=="function"||typeof D.getSnapshotBeforeUpdate=="function",ae=h.pendingProps!==ae,_t||typeof D.UNSAFE_componentWillReceiveProps!="function"&&typeof D.componentWillReceiveProps!="function"||(ae||Ke!==j)&&Cv(h,D,b,j),Ds=!1;var It=h.memoizedState;D.state=It,Ze(h,b,D,R),tt(),Ke=h.memoizedState,ae||It!==Ke||Ds?(typeof it=="function"&&(cm(h,y,it,b),Ke=h.memoizedState),(Pe=Ds||Vf(h,y,Pe,b,It,Ke,j))?(_t||typeof D.UNSAFE_componentWillMount!="function"&&typeof D.componentWillMount!="function"||(typeof D.componentWillMount=="function"&&D.componentWillMount(),typeof D.UNSAFE_componentWillMount=="function"&&D.UNSAFE_componentWillMount()),typeof D.componentDidMount=="function"&&(h.flags|=4194308)):(typeof D.componentDidMount=="function"&&(h.flags|=4194308),h.memoizedProps=b,h.memoizedState=Ke),D.props=b,D.state=Ke,D.context=j,b=Pe):(typeof D.componentDidMount=="function"&&(h.flags|=4194308),b=!1)}else{D=h.stateNode,q(c,h),j=h.memoizedProps,_t=Wl(y,j),D.props=_t,it=h.pendingProps,It=D.context,Ke=y.contextType,Pe=Wa,typeof Ke=="object"&&Ke!==null&&(Pe=$(Ke)),ae=y.getDerivedStateFromProps,(Ke=typeof ae=="function"||typeof D.getSnapshotBeforeUpdate=="function")||typeof D.UNSAFE_componentWillReceiveProps!="function"&&typeof D.componentWillReceiveProps!="function"||(j!==it||It!==Pe)&&Cv(h,D,b,Pe),Ds=!1,It=h.memoizedState,D.state=It,Ze(h,b,D,R),tt();var dn=h.memoizedState;j!==it||It!==dn||Ds||c!==null&&c.dependencies!==null&&Vt(c.dependencies)?(typeof ae=="function"&&(cm(h,y,ae,b),dn=h.memoizedState),(_t=Ds||Vf(h,y,_t,b,It,dn,Pe)||c!==null&&c.dependencies!==null&&Vt(c.dependencies))?(Ke||typeof D.UNSAFE_componentWillUpdate!="function"&&typeof D.componentWillUpdate!="function"||(typeof D.componentWillUpdate=="function"&&D.componentWillUpdate(b,dn,Pe),typeof D.UNSAFE_componentWillUpdate=="function"&&D.UNSAFE_componentWillUpdate(b,dn,Pe)),typeof D.componentDidUpdate=="function"&&(h.flags|=4),typeof D.getSnapshotBeforeUpdate=="function"&&(h.flags|=1024)):(typeof D.componentDidUpdate!="function"||j===c.memoizedProps&&It===c.memoizedState||(h.flags|=4),typeof D.getSnapshotBeforeUpdate!="function"||j===c.memoizedProps&&It===c.memoizedState||(h.flags|=1024),h.memoizedProps=b,h.memoizedState=dn),D.props=b,D.state=dn,D.context=Pe,b=_t):(typeof D.componentDidUpdate!="function"||j===c.memoizedProps&&It===c.memoizedState||(h.flags|=4),typeof D.getSnapshotBeforeUpdate!="function"||j===c.memoizedProps&&It===c.memoizedState||(h.flags|=1024),b=!1)}return D=b,oh(c,h),b=(h.flags&128)!==0,D||b?(D=h.stateNode,y=b&&typeof y.getDerivedStateFromError!="function"?null:D.render(),h.flags|=1,c!==null&&b?(h.child=Rr(h,c.child,null,R),h.child=Rr(h,null,y,R)):Tr(c,h,y,R),h.memoizedState=D.state,c=h.child):c=Pa(c,h,R),c}function Uv(c,h,y,b){return $t(),h.flags|=256,Tr(c,h,y,b),h.child}function pm(c){return{baseLanes:c,cachePool:Qe()}}function mm(c,h,y){return c=c!==null?c.childLanes&~y:0,h&&(c|=Qr),c}function gm(c,h,y){var b=h.pendingProps,R=!1,D=(h.flags&128)!==0,j;if((j=D)||(j=c!==null&&c.memoizedState===null?!1:(Pi.current&2)!==0),j&&(R=!0,h.flags&=-129),j=(h.flags&32)!==0,h.flags&=-33,c===null){if(Pn){if(R?ne(h):oe(),(c=xi)?(c=Sy(c,Zr),c!==null&&(h.memoizedState={dehydrated:c,treeContext:ia!==null?{id:Ar,overflow:ga}:null,retryLane:536870912,hydrationErrors:null},y=Rm(c),y.return=h,h.child=y,cr=h,xi=null)):c=null,c===null)throw xt(h);return pd(c)?h.lanes=32:h.lanes=536870912,null}var ae=b.children;return b=b.fallback,R?(oe(),R=h.mode,ae=el({mode:"hidden",children:ae},R),b=Js(b,R,y,null),ae.return=h,b.return=h,ae.sibling=b,h.child=ae,b=h.child,b.memoizedState=pm(y),b.childLanes=mm(c,j,y),h.memoizedState=dc,ql(null,b)):(ne(h),Wf(h,ae))}var Pe=c.memoizedState;if(Pe!==null&&(ae=Pe.dehydrated,ae!==null)){if(D)h.flags&256?(ne(h),h.flags&=-257,h=$l(c,h,y)):h.memoizedState!==null?(oe(),h.child=c.child,h.flags|=128,h=null):(oe(),ae=b.fallback,R=h.mode,b=el({mode:"visible",children:b.children},R),ae=Js(ae,R,y,null),ae.flags|=2,b.return=h,ae.return=h,b.sibling=ae,h.child=b,Rr(h,c.child,null,y),b=h.child,b.memoizedState=pm(y),b.childLanes=mm(c,j,y),h.memoizedState=dc,h=ql(null,b));else if(ne(h),pd(ae))j=md(ae).digest,b=Error(r(419)),b.stack="",b.digest=j,Je({value:b,source:null,stack:null}),h=$l(c,h,y);else if(pi||St(c,h,y,!1),j=(y&c.childLanes)!==0,pi||j){if(j=wn,j!==null&&(b=k(j,y),b!==0&&b!==Pe.retryLane))throw Pe.retryLane=b,Qt(c,b),Mi(j,c,b),Jr;dl(ae)||Jc(),h=$l(c,h,y)}else dl(ae)?(h.flags|=192,h.child=c.child,h=null):(c=Pe.treeContext,_i&&(xi=_y(ae),cr=h,Pn=!0,$a=null,Zr=!1,c!==null&&Be(h,c)),h=Wf(h,b.children),h.flags|=4096);return h}return R?(oe(),ae=b.fallback,R=h.mode,Pe=c.child,D=Pe.sibling,b=Cs(Pe,{mode:"hidden",children:b.children}),b.subtreeFlags=Pe.subtreeFlags&65011712,D!==null?ae=Cs(D,ae):(ae=Js(ae,R,y,null),ae.flags|=2),ae.return=h,b.return=h,b.sibling=ae,h.child=b,ql(null,b),b=h.child,ae=c.child.memoizedState,ae===null?ae=pm(y):(R=ae.cachePool,R!==null?(Pe=Bi?bi._currentValue:bi._currentValue2,R=R.parent!==Pe?{parent:Pe,pool:Pe}:R):R=Qe(),ae={baseLanes:ae.baseLanes|y,cachePool:R}),b.memoizedState=ae,b.childLanes=mm(c,j,y),h.memoizedState=dc,ql(c.child,b)):(ne(h),y=c.child,c=y.sibling,y=Cs(y,{mode:"visible",children:b.children}),y.return=h,y.sibling=null,c!==null&&(j=h.deletions,j===null?(h.deletions=[c],h.flags|=16):j.push(c)),h.child=y,h.memoizedState=null,y)}function Wf(c,h){return h=el({mode:"visible",children:h},c.mode),h.return=c,c.child=h}function el(c,h){return c=t(22,c,null,h),c.lanes=0,c}function $l(c,h,y){return Rr(h,c.child,null,y),c=Wf(h,h.pendingProps.children),c.flags|=2,h.memoizedState=null,c}function kv(c,h,y){c.lanes|=h;var b=c.alternate;b!==null&&(b.lanes|=h),ee(c.return,h,y)}function Gc(c,h,y,b,R,D){var j=c.memoizedState;j===null?c.memoizedState={isBackwards:h,rendering:null,renderingStartTime:0,last:b,tail:y,tailMode:R,treeForkCount:D}:(j.isBackwards=h,j.rendering=null,j.renderingStartTime=0,j.last=b,j.tail=y,j.tailMode=R,j.treeForkCount=D)}function vm(c,h,y){var b=h.pendingProps,R=b.revealOrder,D=b.tail;b=b.children;var j=Pi.current,ae=(j&2)!==0;if(ae?(j=j&1|2,h.flags|=128):j&=1,S(Pi,j),Tr(c,h,b,y),b=Pn?Dh:0,!ae&&c!==null&&(c.flags&128)!==0)e:for(c=h.child;c!==null;){if(c.tag===13)c.memoizedState!==null&&kv(c,y,h);else if(c.tag===19)kv(c,y,h);else if(c.child!==null){c.child.return=c,c=c.child;continue}if(c===h)break e;for(;c.sibling===null;){if(c.return===null||c.return===h)break e;c=c.return}c.sibling.return=c.return,c=c.sibling}switch(R){case"forwards":for(y=h.child,R=null;y!==null;)c=y.alternate,c!==null&&nt(c)===null&&(R=y),y=y.sibling;y=R,y===null?(R=h.child,h.child=null):(R=y.sibling,y.sibling=null),Gc(h,!1,R,y,D,b);break;case"backwards":case"unstable_legacy-backwards":for(y=null,R=h.child,h.child=null;R!==null;){if(c=R.alternate,c!==null&&nt(c)===null){h.child=R;break}c=R.sibling,R.sibling=y,y=R,R=c}Gc(h,!0,y,null,D,b);break;case"together":Gc(h,!1,null,null,void 0,b);break;default:h.memoizedState=null}return h.child}function Pa(c,h,y){if(c!==null&&(h.dependencies=c.dependencies),No|=h.lanes,(y&h.childLanes)===0)if(c!==null){if(St(c,h,y,!1),(y&h.childLanes)===0)return null}else return null;if(c!==null&&h.child!==c.child)throw Error(r(153));if(h.child!==null){for(c=h.child,y=Cs(c,c.pendingProps),h.child=y,y.return=h;c.sibling!==null;)c=c.sibling,y=y.sibling=Cs(c,c.pendingProps),y.return=h;y.sibling=null}return h.child}function lh(c,h){return(c.lanes&h)!==0?!0:(c=c.dependencies,!!(c!==null&&Vt(c)))}function ym(c,h,y){switch(h.tag){case 3:mt(h,h.stateNode.containerInfo),He(h,bi,c.memoizedState.cache),$t();break;case 27:case 5:Re(h);break;case 4:mt(h,h.stateNode.containerInfo);break;case 10:He(h,h.type,h.memoizedProps.value);break;case 31:if(h.memoizedState!==null)return h.flags|=128,he(h),null;break;case 13:var b=h.memoizedState;if(b!==null)return b.dehydrated!==null?(ne(h),h.flags|=128,null):(y&h.child.childLanes)!==0?gm(c,h,y):(ne(h),c=Pa(c,h,y),c!==null?c.sibling:null);ne(h);break;case 19:var R=(c.flags&128)!==0;if(b=(y&h.childLanes)!==0,b||(St(c,h,y,!1),b=(y&h.childLanes)!==0),R){if(b)return vm(c,h,y);h.flags|=128}if(R=h.memoizedState,R!==null&&(R.rendering=null,R.tail=null,R.lastEffect=null),S(Pi,Pi.current),b)break;return null;case 22:return h.lanes=0,Ov(c,h,y,h.pendingProps);case 24:He(h,bi,c.memoizedState.cache)}return Pa(c,h,y)}function _m(c,h,y){if(c!==null)if(c.memoizedProps!==h.pendingProps)pi=!0;else{if(!lh(c,y)&&(h.flags&128)===0)return pi=!1,ym(c,h,y);pi=(c.flags&131072)!==0}else pi=!1,Pn&&(h.flags&1048576)!==0&&X(h,Dh,h.index);switch(h.lanes=0,h.tag){case 16:e:{var b=h.pendingProps;if(c=Dn(h.elementType),h.type=c,typeof c=="function")Zl(c)?(b=Wl(c,b),h.tag=1,h=Xl(null,h,c,b,y)):(h.tag=0,h=jf(null,h,c,b,y));else{if(c!=null){var R=c.$$typeof;if(R===nu){h.tag=11,h=Dv(null,h,c,b,y);break e}else if(R===ld){h.tag=14,h=Iv(null,h,c,b,y);break e}}throw h=v(c)||c,Error(r(306,h,""))}}return h;case 0:return jf(c,h,h.type,h.pendingProps,y);case 1:return b=h.type,R=Wl(b,h.pendingProps),Xl(c,h,b,R,y);case 3:e:{if(mt(h,h.stateNode.containerInfo),c===null)throw Error(r(387));var D=h.pendingProps;R=h.memoizedState,b=R.element,q(c,h),Ze(h,D,null,y);var j=h.memoizedState;if(D=j.cache,He(h,bi,D),D!==R.cache&&Ft(h,[bi],y,!0),tt(),D=j.element,_i&&R.isDehydrated)if(R={element:D,isDehydrated:!1,cache:j.cache},h.updateQueue.baseState=R,h.memoizedState=R,h.flags&256){h=Uv(c,h,D,y);break e}else if(D!==b){b=Te(Error(r(424)),h),Je(b),h=Uv(c,h,D,y);break e}else for(_i&&(xi=vy(h.stateNode.containerInfo),cr=h,Pn=!0,$a=null,Zr=!0),y=mg(h,null,D,y),h.child=y;y;)y.flags=y.flags&-3|4096,y=y.sibling;else{if($t(),D===b){h=Pa(c,h,y);break e}Tr(c,h,D,y)}h=h.child}return h;case 26:if(ta)return oh(c,h),c===null?(y=rg(h.type,null,h.pendingProps,null))?h.memoizedState=y:Pn||(h.stateNode=_d(h.type,h.pendingProps,Cr.current,h)):h.memoizedState=rg(h.type,c.memoizedProps,h.pendingProps,c.memoizedState),null;case 27:if(lr)return Re(h),c===null&&lr&&Pn&&(b=h.stateNode=xd(h.type,h.pendingProps,Cr.current,xr.current,!1),cr=h,Zr=!0,xi=Jm(h.type,b,xi)),Tr(c,h,h.pendingProps.children,y),oh(c,h),c===null&&(h.flags|=4194304),h.child;case 5:return c===null&&Pn&&(Dy(h.type,h.pendingProps,xr.current),(R=b=xi)&&(b=xy(b,h.type,h.pendingProps,Zr),b!==null?(h.stateNode=b,cr=h,xi=gy(b),Zr=!1,R=!0):R=!1),R||xt(h)),Re(h),R=h.type,D=h.pendingProps,j=c!==null?c.memoizedProps:null,b=D.children,Yr(R,D)?b=null:j!==null&&Yr(R,j)&&(h.flags|=32),h.memoizedState!==null&&(R=ut(c,h,Pt,null,null,y),Bi?sc._currentValue=R:sc._currentValue2=R),oh(c,h),Tr(c,h,b,y),h.child;case 6:return c===null&&Pn&&(ig(h.pendingProps,xr.current),(c=y=xi)&&(y=by(y,h.pendingProps,Zr),y!==null?(h.stateNode=y,cr=h,xi=null,c=!0):c=!1),c||xt(h)),null;case 13:return gm(c,h,y);case 4:return mt(h,h.stateNode.containerInfo),b=h.pendingProps,c===null?h.child=Rr(h,null,b,y):Tr(c,h,b,y),h.child;case 11:return Dv(c,h,h.type,h.pendingProps,y);case 7:return Tr(c,h,h.pendingProps,y),h.child;case 8:return Tr(c,h,h.pendingProps.children,y),h.child;case 12:return Tr(c,h,h.pendingProps.children,y),h.child;case 10:return b=h.pendingProps,He(h,h.type,b.value),Tr(c,h,b.children,y),h.child;case 9:return R=h.type._context,b=h.pendingProps.children,ot(h),R=$(R),b=b(R),h.flags|=1,Tr(c,h,b,y),h.child;case 14:return Iv(c,h,h.type,h.pendingProps,y);case 15:return Pv(c,h,h.type,h.pendingProps,y);case 19:return vm(c,h,y);case 31:return Lv(c,h,y);case 22:return Ov(c,h,y,h.pendingProps);case 24:return ot(h),b=$(bi),c===null?(R=et(),R===null&&(R=wn,D=Ie(),R.pooledCache=D,D.refCount++,D!==null&&(R.pooledCacheLanes|=y),R=D),h.memoizedState={parent:b,cache:R},z(h),He(h,bi,R)):((c.lanes&y)!==0&&(q(c,h),Ze(h,null,null,y),tt()),R=c.memoizedState,D=h.memoizedState,R.parent!==b?(R={parent:b,cache:b},h.memoizedState=R,h.lanes===0&&(h.memoizedState=h.updateQueue.baseState=R),He(h,bi,b)):(b=D.cache,He(h,bi,b),b!==R.cache&&Ft(h,[bi],y,!0))),Tr(c,h,h.pendingProps.children,y),h.child;case 29:throw h.pendingProps}throw Error(r(156,h.tag))}function Xs(c){c.flags|=4}function ch(c){Rs&&(c.flags|=8)}function Bv(c,h){if(c!==null&&c.child===h.child)return!1;if((h.flags&16)!==0)return!0;for(c=h.child;c!==null;){if((c.flags&8218)!==0||(c.subtreeFlags&8218)!==0)return!0;c=c.sibling}return!1}function xm(c,h,y,b){if(kn)for(y=h.child;y!==null;){if(y.tag===5||y.tag===6)wh(c,y.stateNode);else if(!(y.tag===4||lr&&y.tag===27)&&y.child!==null){y.child.return=y,y=y.child;continue}if(y===h)break;for(;y.sibling===null;){if(y.return===null||y.return===h)return;y=y.return}y.sibling.return=y.return,y=y.sibling}else if(Rs)for(var R=h.child;R!==null;){if(R.tag===5){var D=R.stateNode;y&&b&&(D=fy(D,R.type,R.memoizedProps)),wh(c,D)}else if(R.tag===6)D=R.stateNode,y&&b&&(D=Zm(D,R.memoizedProps)),wh(c,D);else if(R.tag!==4){if(R.tag===22&&R.memoizedState!==null)D=R.child,D!==null&&(D.return=R),xm(c,R,!0,!0);else if(R.child!==null){R.child.return=R,R=R.child;continue}}if(R===h)break;for(;R.sibling===null;){if(R.return===null||R.return===h)return;R=R.return}R.sibling.return=R.return,R=R.sibling}}function zv(c,h,y,b){var R=!1;if(Rs)for(var D=h.child;D!==null;){if(D.tag===5){var j=D.stateNode;y&&b&&(j=fy(j,D.type,D.memoizedProps)),$m(c,j)}else if(D.tag===6)j=D.stateNode,y&&b&&(j=Zm(j,D.memoizedProps)),$m(c,j);else if(D.tag!==4){if(D.tag===22&&D.memoizedState!==null)R=D.child,R!==null&&(R.return=D),zv(c,D,!0,!0),R=!0;else if(D.child!==null){D.child.return=D,D=D.child;continue}}if(D===h)break;for(;D.sibling===null;){if(D.return===null||D.return===h)return R;D=D.return}D.sibling.return=D.return,D=D.sibling}return R}function Fv(c,h){if(Rs&&Bv(c,h)){c=h.stateNode;var y=c.containerInfo,b=Xm();zv(b,h,!1,!1),c.pendingChildren=b,Xs(h),hy(y,b)}}function bm(c,h,y,b){if(kn)c.memoizedProps!==b&&Xs(h);else if(Rs){var R=c.stateNode,D=c.memoizedProps;if((c=Bv(c,h))||D!==b){var j=xr.current;D=uy(R,y,D,b,!c,null),D===R?h.stateNode=R:(ch(h),cs(D,y,b,j)&&Xs(h),h.stateNode=D,c&&xm(D,h,!1,!1))}else h.stateNode=R}}function qr(c,h,y,b,R){if((c.mode&32)!==0&&(y===null?Mh(h,b):ou(h,y,b))){if(c.flags|=16777216,(R&335544128)===R||Um(h,b))if(Ei(c.stateNode,h,b))c.flags|=8192;else if(Un())c.flags|=8192;else throw Kr=Ya,Dd}else c.flags&=-16777217}function jc(c,h){if(lg(h)){if(c.flags|=16777216,!cg(h))if(Un())c.flags|=8192;else throw Kr=Ya,Dd}else c.flags&=-16777217}function uh(c,h){h!==null&&(c.flags|=4),c.flags&16384&&(h=c.tag!==22?I():536870912,c.lanes|=h,gu|=h)}function Wc(c,h){if(!Pn)switch(c.tailMode){case"hidden":h=c.tail;for(var y=null;h!==null;)h.alternate!==null&&(y=h),h=h.sibling;y===null?c.tail=null:y.sibling=null;break;case"collapsed":y=c.tail;for(var b=null;y!==null;)y.alternate!==null&&(b=y),y=y.sibling;b===null?h||c.tail===null?c.tail=null:c.tail.sibling=null:b.sibling=null}}function ai(c){var h=c.alternate!==null&&c.alternate.child===c.child,y=0,b=0;if(h)for(var R=c.child;R!==null;)y|=R.lanes|R.childLanes,b|=R.subtreeFlags&65011712,b|=R.flags&65011712,R.return=c,R=R.sibling;else for(R=c.child;R!==null;)y|=R.lanes|R.childLanes,b|=R.subtreeFlags,b|=R.flags,R.return=c,R=R.sibling;return c.subtreeFlags|=b,c.childLanes=y,h}function Vv(c,h,y){var b=h.pendingProps;switch(xe(h),h.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return ai(h),null;case 1:return ai(h),null;case 3:return y=h.stateNode,b=null,c!==null&&(b=c.memoizedState.cache),h.memoizedState.cache!==b&&(h.flags|=2048),yt(bi),ge(),y.pendingContext&&(y.context=y.pendingContext,y.pendingContext=null),(c===null||c.child===null)&&(En(h)?Xs(h):c===null||c.memoizedState.isDehydrated&&(h.flags&256)===0||(h.flags|=1024,ze())),Fv(c,h),ai(h),null;case 26:if(ta){var R=h.type,D=h.memoizedState;return c===null?(Xs(h),D!==null?(ai(h),jc(h,D)):(ai(h),qr(h,R,null,b,y))):D?D!==c.memoizedState?(Xs(h),ai(h),jc(h,D)):(ai(h),h.flags&=-16777217):(D=c.memoizedProps,kn?D!==b&&Xs(h):bm(c,h,R,b),ai(h),qr(h,R,D,b,y)),null}case 27:if(lr){if(rt(h),y=Cr.current,R=h.type,c!==null&&h.stateNode!=null)kn?c.memoizedProps!==b&&Xs(h):bm(c,h,R,b);else{if(!b){if(h.stateNode===null)throw Error(r(166));return ai(h),null}c=xr.current,En(h)?Rt(h,c):(c=xd(R,b,y,c,!0),h.stateNode=c,Xs(h))}return ai(h),null}case 5:if(rt(h),R=h.type,c!==null&&h.stateNode!=null)bm(c,h,R,b);else{if(!b){if(h.stateNode===null)throw Error(r(166));return ai(h),null}if(D=xr.current,En(h))Rt(h,D),Cy(h.stateNode,R,b,D)&&(h.flags|=64);else{var j=Om(R,b,Cr.current,D,h);ch(h),xm(j,h,!1,!1),h.stateNode=j,cs(j,R,b,D)&&Xs(h)}}return ai(h),qr(h,h.type,c===null?null:c.memoizedProps,h.pendingProps,y),null;case 6:if(c&&h.stateNode!=null)y=c.memoizedProps,kn?y!==b&&Xs(h):Rs&&(y!==b?(c=Cr.current,y=xr.current,ch(h),h.stateNode=Mo(b,c,y,h)):h.stateNode=c.stateNode);else{if(typeof b!="string"&&h.stateNode===null)throw Error(r(166));if(c=Cr.current,y=xr.current,En(h)){if(!_i)throw Error(r(176));if(c=h.stateNode,y=h.memoizedProps,b=null,R=cr,R!==null)switch(R.tag){case 27:case 5:b=R.memoizedProps}IS(c,y,h,b)||xt(h,!0)}else ch(h),h.stateNode=Mo(b,c,y,h)}return ai(h),null;case 31:if(y=h.memoizedState,c===null||c.memoizedState!==null){if(b=En(h),y!==null){if(c===null){if(!b)throw Error(r(318));if(!_i)throw Error(r(556));if(c=h.memoizedState,c=c!==null?c.dehydrated:null,!c)throw Error(r(557));eg(c,h)}else $t(),(h.flags&128)===0&&(h.memoizedState=null),h.flags|=4;ai(h),c=!1}else y=ze(),c!==null&&c.memoizedState!==null&&(c.memoizedState.hydrationErrors=y),c=!0;if(!c)return h.flags&256?(Ve(h),h):(Ve(h),null);if((h.flags&128)!==0)throw Error(r(558))}return ai(h),null;case 13:if(b=h.memoizedState,c===null||c.memoizedState!==null&&c.memoizedState.dehydrated!==null){if(R=En(h),b!==null&&b.dehydrated!==null){if(c===null){if(!R)throw Error(r(318));if(!_i)throw Error(r(344));if(R=h.memoizedState,R=R!==null?R.dehydrated:null,!R)throw Error(r(317));My(R,h)}else $t(),(h.flags&128)===0&&(h.memoizedState=null),h.flags|=4;ai(h),R=!1}else R=ze(),c!==null&&c.memoizedState!==null&&(c.memoizedState.hydrationErrors=R),R=!0;if(!R)return h.flags&256?(Ve(h),h):(Ve(h),null)}return Ve(h),(h.flags&128)!==0?(h.lanes=y,h):(y=b!==null,c=c!==null&&c.memoizedState!==null,y&&(b=h.child,R=null,b.alternate!==null&&b.alternate.memoizedState!==null&&b.alternate.memoizedState.cachePool!==null&&(R=b.alternate.memoizedState.cachePool.pool),D=null,b.memoizedState!==null&&b.memoizedState.cachePool!==null&&(D=b.memoizedState.cachePool.pool),D!==R&&(b.flags|=2048)),y!==c&&y&&(h.child.flags|=8192),uh(h,h.updateQueue),ai(h),null);case 4:return ge(),Fv(c,h),c===null&&ni(h.stateNode.containerInfo),ai(h),null;case 10:return yt(h.type),ai(h),null;case 19:if(x(Pi),b=h.memoizedState,b===null)return ai(h),null;if(R=(h.flags&128)!==0,D=b.rendering,D===null)if(R)Wc(b,!1);else{if(Ci!==0||c!==null&&(c.flags&128)!==0)for(c=h.child;c!==null;){if(D=nt(c),D!==null){for(h.flags|=128,Wc(b,!1),c=D.updateQueue,h.updateQueue=c,uh(h,c),h.subtreeFlags=0,c=y,y=h.child;y!==null;)id(y,c),y=y.sibling;return S(Pi,Pi.current&1|2),Pn&&we(h,b.treeForkCount),h.child}c=c.sibling}b.tail!==null&&Br()>Ml&&(h.flags|=128,R=!0,Wc(b,!1),h.lanes=4194304)}else{if(!R)if(c=nt(D),c!==null){if(h.flags|=128,R=!0,c=c.updateQueue,h.updateQueue=c,uh(h,c),Wc(b,!0),b.tail===null&&b.tailMode==="hidden"&&!D.alternate&&!Pn)return ai(h),null}else 2*Br()-b.renderingStartTime>Ml&&y!==536870912&&(h.flags|=128,R=!0,Wc(b,!1),h.lanes=4194304);b.isBackwards?(D.sibling=h.child,h.child=D):(c=b.last,c!==null?c.sibling=D:h.child=D,b.last=D)}return b.tail!==null?(c=b.tail,b.rendering=c,b.tail=c.sibling,b.renderingStartTime=Br(),c.sibling=null,y=Pi.current,S(Pi,R?y&1|2:y&1),Pn&&we(h,b.treeForkCount),c):(ai(h),null);case 22:case 23:return Ve(h),G(),b=h.memoizedState!==null,c!==null?c.memoizedState!==null!==b&&(h.flags|=8192):b&&(h.flags|=8192),b?(y&536870912)!==0&&(h.flags&128)===0&&(ai(h),h.subtreeFlags&6&&(h.flags|=8192)):ai(h),y=h.updateQueue,y!==null&&uh(h,y.retryQueue),y=null,c!==null&&c.memoizedState!==null&&c.memoizedState.cachePool!==null&&(y=c.memoizedState.cachePool.pool),b=null,h.memoizedState!==null&&h.memoizedState.cachePool!==null&&(b=h.memoizedState.cachePool.pool),b!==y&&(h.flags|=2048),c!==null&&x(gl),null;case 24:return y=null,c!==null&&(y=c.memoizedState.cache),h.memoizedState.cache!==y&&(h.flags|=2048),yt(bi),ai(h),null;case 25:return null;case 30:return null}throw Error(r(156,h.tag))}function Sm(c,h){switch(xe(h),h.tag){case 1:return c=h.flags,c&65536?(h.flags=c&-65537|128,h):null;case 3:return yt(bi),ge(),c=h.flags,(c&65536)!==0&&(c&128)===0?(h.flags=c&-65537|128,h):null;case 26:case 27:case 5:return rt(h),null;case 31:if(h.memoizedState!==null){if(Ve(h),h.alternate===null)throw Error(r(340));$t()}return c=h.flags,c&65536?(h.flags=c&-65537|128,h):null;case 13:if(Ve(h),c=h.memoizedState,c!==null&&c.dehydrated!==null){if(h.alternate===null)throw Error(r(340));$t()}return c=h.flags,c&65536?(h.flags=c&-65537|128,h):null;case 19:return x(Pi),null;case 4:return ge(),null;case 10:return yt(h.type),null;case 22:case 23:return Ve(h),G(),c!==null&&x(gl),c=h.flags,c&65536?(h.flags=c&-65537|128,h):null;case 24:return yt(bi),null;case 25:return null;default:return null}}function Hv(c,h){switch(xe(h),h.tag){case 3:yt(bi),ge();break;case 26:case 27:case 5:rt(h);break;case 4:ge();break;case 31:h.memoizedState!==null&&Ve(h);break;case 13:Ve(h);break;case 19:x(Pi);break;case 10:yt(h.type);break;case 22:case 23:Ve(h),G(),c!==null&&x(gl);break;case 24:yt(bi)}}function Oa(c,h){try{var y=h.updateQueue,b=y!==null?y.lastEffect:null;if(b!==null){var R=b.next;y=R;do{if((y.tag&c)===c){b=void 0;var D=y.create,j=y.inst;b=D(),j.destroy=b}y=y.next}while(y!==R)}}catch(ae){sn(h,h.return,ae)}}function La(c,h,y){try{var b=h.updateQueue,R=b!==null?b.lastEffect:null;if(R!==null){var D=R.next;b=D;do{if((b.tag&c)===c){var j=b.inst,ae=j.destroy;if(ae!==void 0){j.destroy=void 0,R=h;var Pe=y,Ke=ae;try{Ke()}catch(_t){sn(R,Pe,_t)}}}b=b.next}while(b!==D)}}catch(_t){sn(h,h.return,_t)}}function qc(c){var h=c.updateQueue;if(h!==null){var y=c.stateNode;try{ct(h,y)}catch(b){sn(c,c.return,b)}}}function qf(c,h,y){y.props=Wl(c.type,c.memoizedProps),y.state=c.memoizedState;try{y.componentWillUnmount()}catch(b){sn(c,h,b)}}function Xc(c,h){try{var y=c.ref;if(y!==null){switch(c.tag){case 26:case 27:case 5:var b=ru(c.stateNode);break;case 30:b=c.stateNode;break;default:b=c.stateNode}typeof y=="function"?c.refCleanup=y(b):y.current=b}}catch(R){sn(c,h,R)}}function kr(c,h){var y=c.ref,b=c.refCleanup;if(y!==null)if(typeof b=="function")try{b()}catch(R){sn(c,h,R)}finally{c.refCleanup=null,c=c.alternate,c!=null&&(c.refCleanup=null)}else if(typeof y=="function")try{y(null)}catch(R){sn(c,h,R)}else y.current=null}function Yl(c){var h=c.type,y=c.memoizedProps,b=c.stateNode;try{ny(b,h,y,c)}catch(R){sn(c,c.return,R)}}function hh(c,h,y){try{iy(c.stateNode,c.type,y,h,c)}catch(b){sn(c,c.return,b)}}function wm(c){return c.tag===5||c.tag===3||(ta?c.tag===26:!1)||(lr?c.tag===27&&ac(c.type):!1)||c.tag===4}function go(c){e:for(;;){for(;c.sibling===null;){if(c.return===null||wm(c.return))return null;c=c.return}for(c.sibling.return=c.return,c=c.sibling;c.tag!==5&&c.tag!==6&&c.tag!==18;){if(lr&&c.tag===27&&ac(c.type)||c.flags&2||c.child===null||c.tag===4)continue e;c.child.return=c,c=c.child}if(!(c.flags&2))return c.stateNode}}function Xf(c,h,y){var b=c.tag;if(b===5||b===6)c=c.stateNode,h?sy(y,c,h):Gm(y,c);else if(b!==4&&(lr&&b===27&&ac(c.type)&&(y=c.stateNode,h=null),c=c.child,c!==null))for(Xf(c,h,y),c=c.sibling;c!==null;)Xf(c,h,y),c=c.sibling}function fh(c,h,y){var b=c.tag;if(b===5||b===6)c=c.stateNode,h?ry(y,c,h):Hm(y,c);else if(b!==4&&(lr&&b===27&&ac(c.type)&&(y=c.stateNode),c=c.child,c!==null))for(fh(c,h,y),c=c.sibling;c!==null;)fh(c,h,y),c=c.sibling}function Mm(c,h,y){c=c.containerInfo;try{Ym(c,y)}catch(b){sn(h,h.return,b)}}function Gv(c){var h=c.stateNode,y=c.memoizedProps;try{Zi(c.type,y,h,c)}catch(b){sn(c,c.return,b)}}function CS(c,h){for(cd(c.containerInfo),Vi=h;Vi!==null;)if(c=Vi,h=c.child,(c.subtreeFlags&1028)!==0&&h!==null)h.return=c,Vi=h;else for(;Vi!==null;){c=Vi;var y=c.alternate;switch(h=c.flags,c.tag){case 0:if((h&4)!==0&&(h=c.updateQueue,h=h!==null?h.events:null,h!==null))for(var b=0;b<h.length;b++){var R=h[b];R.ref.impl=R.nextImpl}break;case 11:case 15:break;case 1:if((h&1024)!==0&&y!==null){h=void 0,b=c,R=y.memoizedProps,y=y.memoizedState;var D=b.stateNode;try{var j=Wl(b.type,R);h=D.getSnapshotBeforeUpdate(j,y),D.__reactInternalSnapshotBeforeUpdate=h}catch(ae){sn(b,b.return,ae)}}break;case 3:(h&1024)!==0&&kn&&qm(c.stateNode.containerInfo);break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((h&1024)!==0)throw Error(r(163))}if(h=c.sibling,h!==null){h.return=c.return,Vi=h;break}Vi=c.return}}function jv(c,h,y){var b=y.flags;switch(y.tag){case 0:case 11:case 15:Xr(c,y),b&4&&Oa(5,y);break;case 1:if(Xr(c,y),b&4)if(c=y.stateNode,h===null)try{c.componentDidMount()}catch(j){sn(y,y.return,j)}else{var R=Wl(y.type,h.memoizedProps);h=h.memoizedState;try{c.componentDidUpdate(R,h,c.__reactInternalSnapshotBeforeUpdate)}catch(j){sn(y,y.return,j)}}b&64&&qc(y),b&512&&Xc(y,y.return);break;case 3:if(Xr(c,y),b&64&&(b=y.updateQueue,b!==null)){if(c=null,y.child!==null)switch(y.child.tag){case 27:case 5:c=ru(y.child.stateNode);break;case 1:c=y.child.stateNode}try{ct(b,c)}catch(j){sn(y,y.return,j)}}break;case 27:lr&&h===null&&b&4&&Gv(y);case 26:case 5:if(Xr(c,y),h===null){if(b&4)Yl(y);else if(b&64){c=y.type,h=y.memoizedProps,R=y.stateNode;try{Ty(R,c,h,y)}catch(j){sn(y,y.return,j)}}}b&512&&Xc(y,y.return);break;case 12:Xr(c,y);break;case 31:Xr(c,y),b&4&&Ys(c,y);break;case 13:Xr(c,y),b&4&&ph(c,y),b&64&&(b=y.memoizedState,b!==null&&(b=b.dehydrated,b!==null&&(y=RS.bind(null,y),gd(b,y))));break;case 22:if(b=y.memoizedState!==null||Oi,!b){h=h!==null&&h.memoizedState!==null||Li,R=Oi;var D=Li;Oi=b,(Li=h)&&!D?Ks(c,y,(y.subtreeFlags&8772)!==0):Xr(c,y),Oi=R,Li=D}break;case 30:break;default:Xr(c,y)}}function Em(c){var h=c.alternate;h!==null&&(c.alternate=null,Em(h)),c.child=null,c.deletions=null,c.sibling=null,c.tag===5&&(h=c.stateNode,h!==null&&ud(h)),c.stateNode=null,c.return=null,c.dependencies=null,c.memoizedProps=null,c.memoizedState=null,c.pendingProps=null,c.stateNode=null,c.updateQueue=null}function $s(c,h,y){for(y=y.child;y!==null;)dh(c,h,y),y=y.sibling}function dh(c,h,y){if(fs&&typeof fs.onCommitFiberUnmount=="function")try{fs.onCommitFiberUnmount(cc,y)}catch{}switch(y.tag){case 26:if(ta){Li||kr(y,h),$s(c,h,y),y.memoizedState?pl(y.memoizedState):y.stateNode&&og(y.stateNode);break}case 27:if(lr){Li||kr(y,h);var b=Ai,R=Hi;ac(y.type)&&(Ai=y.stateNode,Hi=!1),$s(c,h,y),_r(y.stateNode),Ai=b,Hi=R;break}case 5:Li||kr(y,h);case 6:if(kn){if(b=Ai,R=Hi,Ai=null,$s(c,h,y),Ai=b,Hi=R,Ai!==null)if(Hi)try{jm(Ai,y.stateNode)}catch(D){sn(y,h,D)}else try{ay(Ai,y.stateNode)}catch(D){sn(y,h,D)}}else $s(c,h,y);break;case 18:kn&&Ai!==null&&(Hi?vd(Ai,y.stateNode):ng(Ai,y.stateNode));break;case 4:kn?(b=Ai,R=Hi,Ai=y.stateNode.containerInfo,Hi=!0,$s(c,h,y),Ai=b,Hi=R):(Rs&&Mm(y.stateNode,y,Xm()),$s(c,h,y));break;case 0:case 11:case 14:case 15:La(2,y,h),Li||La(4,y,h),$s(c,h,y);break;case 1:Li||(kr(y,h),b=y.stateNode,typeof b.componentWillUnmount=="function"&&qf(y,h,b)),$s(c,h,y);break;case 21:$s(c,h,y);break;case 22:Li=(b=Li)||y.memoizedState!==null,$s(c,h,y),Li=b;break;default:$s(c,h,y)}}function Ys(c,h){if(_i&&h.memoizedState===null&&(c=h.alternate,c!==null&&(c=c.memoizedState,c!==null))){c=c.dehydrated;try{PS(c)}catch(y){sn(h,h.return,y)}}}function ph(c,h){if(_i&&h.memoizedState===null&&(c=h.alternate,c!==null&&(c=c.memoizedState,c!==null&&(c=c.dehydrated,c!==null))))try{OS(c)}catch(y){sn(h,h.return,y)}}function Zs(c){switch(c.tag){case 31:case 13:case 19:var h=c.stateNode;return h===null&&(h=c.stateNode=new vg),h;case 22:return c=c.stateNode,h=c._retryCache,h===null&&(h=c._retryCache=new vg),h;default:throw Error(r(435,c.tag))}}function vo(c,h){var y=Zs(c);h.forEach(function(b){if(!y.has(b)){y.add(b);var R=NS.bind(null,c,b);b.then(R,R)}})}function vr(c,h){var y=h.deletions;if(y!==null)for(var b=0;b<y.length;b++){var R=y[b],D=c,j=h;if(kn){var ae=j;e:for(;ae!==null;){switch(ae.tag){case 27:if(lr){if(ac(ae.type)){Ai=ae.stateNode,Hi=!1;break e}break}case 5:Ai=ae.stateNode,Hi=!1;break e;case 3:case 4:Ai=ae.stateNode.containerInfo,Hi=!0;break e}ae=ae.return}if(Ai===null)throw Error(r(160));dh(D,j,R),Ai=null,Hi=!1}else dh(D,j,R);D=R.alternate,D!==null&&(D.return=null),R.return=null}if(h.subtreeFlags&13886)for(h=h.child;h!==null;)mh(h,c),h=h.sibling}function mh(c,h){var y=c.alternate,b=c.flags;switch(c.tag){case 0:case 11:case 14:case 15:vr(h,c),yr(c),b&4&&(La(3,c,c.return),Oa(3,c),La(5,c,c.return));break;case 1:vr(h,c),yr(c),b&512&&(Li||y===null||kr(y,y.return)),b&64&&Oi&&(c=c.updateQueue,c!==null&&(b=c.callbacks,b!==null&&(y=c.shared.hiddenCallbacks,c.shared.hiddenCallbacks=y===null?b:y.concat(b))));break;case 26:if(ta){var R=ei;if(vr(h,c),yr(c),b&512&&(Li||y===null||kr(y,y.return)),b&4){b=y!==null?y.memoizedState:null;var D=c.memoizedState;y===null?D===null?c.stateNode===null?c.stateNode=Iy(R,c.type,c.memoizedProps,c):ag(R,c.type,c.stateNode):c.stateNode=sg(R,D,c.memoizedProps):b!==D?(b===null?y.stateNode!==null&&og(y.stateNode):pl(b),D===null?ag(R,c.type,c.stateNode):sg(R,D,c.memoizedProps)):D===null&&c.stateNode!==null&&hh(c,c.memoizedProps,y.memoizedProps)}break}case 27:if(lr){vr(h,c),yr(c),b&512&&(Li||y===null||kr(y,y.return)),y!==null&&b&4&&hh(c,c.memoizedProps,y.memoizedProps);break}case 5:if(vr(h,c),yr(c),b&512&&(Li||y===null||kr(y,y.return)),kn){if(c.flags&32){R=c.stateNode;try{Wm(R)}catch(it){sn(c,c.return,it)}}b&4&&c.stateNode!=null&&(R=c.memoizedProps,hh(c,R,y!==null?y.memoizedProps:R)),b&1024&&(hu=!0)}else Rs&&c.alternate!==null&&(c.alternate.stateNode=c.stateNode);break;case 6:if(vr(h,c),yr(c),b&4&&kn){if(c.stateNode===null)throw Error(r(162));b=c.memoizedProps,y=y!==null?y.memoizedProps:b,R=c.stateNode;try{ty(R,y,b)}catch(it){sn(c,c.return,it)}}break;case 3:if(ta?(Py(),R=ei,ei=Ah(h.containerInfo),vr(h,c),ei=R):vr(h,c),yr(c),b&4){if(kn&&_i&&y!==null&&y.memoizedState.isDehydrated)try{Ay(h.containerInfo)}catch(it){sn(c,c.return,it)}if(Rs){b=h.containerInfo,y=h.pendingChildren;try{Ym(b,y)}catch(it){sn(c,c.return,it)}}}hu&&(hu=!1,$f(c));break;case 4:ta?(y=ei,ei=Ah(c.stateNode.containerInfo),vr(h,c),yr(c),ei=y):(vr(h,c),yr(c)),b&4&&Rs&&Mm(c.stateNode,c,c.stateNode.pendingChildren);break;case 12:vr(h,c),yr(c);break;case 31:vr(h,c),yr(c),b&4&&(b=c.updateQueue,b!==null&&(c.updateQueue=null,vo(c,b)));break;case 13:vr(h,c),yr(c),c.child.flags&8192&&c.memoizedState!==null!=(y!==null&&y.memoizedState!==null)&&(kh=Br()),b&4&&(b=c.updateQueue,b!==null&&(c.updateQueue=null,vo(c,b)));break;case 22:R=c.memoizedState!==null;var j=y!==null&&y.memoizedState!==null,ae=Oi,Pe=Li;if(Oi=ae||R,Li=Pe||j,vr(h,c),Li=Pe,Oi=ae,yr(c),b&8192&&(h=c.stateNode,h._visibility=R?h._visibility&-2:h._visibility|1,R&&(y===null||j||Oi||Li||tl(c)),kn)){e:if(y=null,kn)for(h=c;;){if(h.tag===5||ta&&h.tag===26){if(y===null){j=y=h;try{D=j.stateNode,R?DS(D):ly(j.stateNode,j.memoizedProps)}catch(it){sn(j,j.return,it)}}}else if(h.tag===6){if(y===null){j=h;try{var Ke=j.stateNode;R?oy(Ke):cy(Ke,j.memoizedProps)}catch(it){sn(j,j.return,it)}}}else if(h.tag===18){if(y===null){j=h;try{var _t=j.stateNode;R?Ry(_t):Ny(j.stateNode)}catch(it){sn(j,j.return,it)}}}else if((h.tag!==22&&h.tag!==23||h.memoizedState===null||h===c)&&h.child!==null){h.child.return=h,h=h.child;continue}if(h===c)break e;for(;h.sibling===null;){if(h.return===null||h.return===c)break e;y===h&&(y=null),h=h.return}y===h&&(y=null),h.sibling.return=h.return,h=h.sibling}}b&4&&(b=c.updateQueue,b!==null&&(y=b.retryQueue,y!==null&&(b.retryQueue=null,vo(c,y))));break;case 19:vr(h,c),yr(c),b&4&&(b=c.updateQueue,b!==null&&(c.updateQueue=null,vo(c,b)));break;case 30:break;case 21:break;default:vr(h,c),yr(c)}}function yr(c){var h=c.flags;if(h&2){try{for(var y,b=c.return;b!==null;){if(wm(b)){y=b;break}b=b.return}if(kn){if(y==null)throw Error(r(160));switch(y.tag){case 27:if(lr){var R=y.stateNode,D=go(c);fh(c,D,R);break}case 5:var j=y.stateNode;y.flags&32&&(Wm(j),y.flags&=-33);var ae=go(c);fh(c,ae,j);break;case 3:case 4:var Pe=y.stateNode.containerInfo,Ke=go(c);Xf(c,Ke,Pe);break;default:throw Error(r(161))}}}catch(_t){sn(c,c.return,_t)}c.flags&=-3}h&4096&&(c.flags&=-4097)}function $f(c){if(c.subtreeFlags&1024)for(c=c.child;c!==null;){var h=c;$f(h),h.tag===5&&h.flags&1024&&Bm(h.stateNode),c=c.sibling}}function Xr(c,h){if(h.subtreeFlags&8772)for(h=h.child;h!==null;)jv(c,h.alternate,h),h=h.sibling}function tl(c){for(c=c.child;c!==null;){var h=c;switch(h.tag){case 0:case 11:case 14:case 15:La(4,h,h.return),tl(h);break;case 1:kr(h,h.return);var y=h.stateNode;typeof y.componentWillUnmount=="function"&&qf(h,h.return,y),tl(h);break;case 27:lr&&_r(h.stateNode);case 26:case 5:kr(h,h.return),tl(h);break;case 22:h.memoizedState===null&&tl(h);break;case 30:tl(h);break;default:tl(h)}c=c.sibling}}function Ks(c,h,y){for(y=y&&(h.subtreeFlags&8772)!==0,h=h.child;h!==null;){var b=h.alternate,R=c,D=h,j=D.flags;switch(D.tag){case 0:case 11:case 15:Ks(R,D,y),Oa(4,D);break;case 1:if(Ks(R,D,y),b=D,R=b.stateNode,typeof R.componentDidMount=="function")try{R.componentDidMount()}catch(Ke){sn(b,b.return,Ke)}if(b=D,R=b.updateQueue,R!==null){var ae=b.stateNode;try{var Pe=R.shared.hiddenCallbacks;if(Pe!==null)for(R.shared.hiddenCallbacks=null,R=0;R<Pe.length;R++)ft(Pe[R],ae)}catch(Ke){sn(b,b.return,Ke)}}y&&j&64&&qc(D),Xc(D,D.return);break;case 27:lr&&Gv(D);case 26:case 5:Ks(R,D,y),y&&b===null&&j&4&&Yl(D),Xc(D,D.return);break;case 12:Ks(R,D,y);break;case 31:Ks(R,D,y),y&&j&4&&Ys(R,D);break;case 13:Ks(R,D,y),y&&j&4&&ph(R,D);break;case 22:D.memoizedState===null&&Ks(R,D,y),Xc(D,D.return);break;case 30:break;default:Ks(R,D,y)}h=h.sibling}}function nl(c,h){var y=null;c!==null&&c.memoizedState!==null&&c.memoizedState.cachePool!==null&&(y=c.memoizedState.cachePool.pool),c=null,h.memoizedState!==null&&h.memoizedState.cachePool!==null&&(c=h.memoizedState.cachePool.pool),c!==y&&(c!=null&&c.refCount++,y!=null&&Ge(y))}function Tm(c,h){c=null,h.alternate!==null&&(c=h.alternate.memoizedState.cache),h=h.memoizedState.cache,h!==c&&(h.refCount++,c!=null&&Ge(c))}function wi(c,h,y,b){if(h.subtreeFlags&10256)for(h=h.child;h!==null;)Yf(c,h,y,b),h=h.sibling}function Yf(c,h,y,b){var R=h.flags;switch(h.tag){case 0:case 11:case 15:wi(c,h,y,b),R&2048&&Oa(9,h);break;case 1:wi(c,h,y,b);break;case 3:wi(c,h,y,b),R&2048&&(c=null,h.alternate!==null&&(c=h.alternate.memoizedState.cache),h=h.memoizedState.cache,h!==c&&(h.refCount++,c!=null&&Ge(c)));break;case 12:if(R&2048){wi(c,h,y,b),c=h.stateNode;try{var D=h.memoizedProps,j=D.id,ae=D.onPostCommit;typeof ae=="function"&&ae(j,h.alternate===null?"mount":"update",c.passiveEffectDuration,-0)}catch(Pe){sn(h,h.return,Pe)}}else wi(c,h,y,b);break;case 31:wi(c,h,y,b);break;case 13:wi(c,h,y,b);break;case 23:break;case 22:D=h.stateNode,j=h.alternate,h.memoizedState!==null?D._visibility&2?wi(c,h,y,b):$c(c,h):D._visibility&2?wi(c,h,y,b):(D._visibility|=2,as(c,h,y,b,(h.subtreeFlags&10256)!==0||!1)),R&2048&&nl(j,h);break;case 24:wi(c,h,y,b),R&2048&&Tm(h.alternate,h);break;default:wi(c,h,y,b)}}function as(c,h,y,b,R){for(R=R&&((h.subtreeFlags&10256)!==0||!1),h=h.child;h!==null;){var D=c,j=h,ae=y,Pe=b,Ke=j.flags;switch(j.tag){case 0:case 11:case 15:as(D,j,ae,Pe,R),Oa(8,j);break;case 23:break;case 22:var _t=j.stateNode;j.memoizedState!==null?_t._visibility&2?as(D,j,ae,Pe,R):$c(D,j):(_t._visibility|=2,as(D,j,ae,Pe,R)),R&&Ke&2048&&nl(j.alternate,j);break;case 24:as(D,j,ae,Pe,R),R&&Ke&2048&&Tm(j.alternate,j);break;default:as(D,j,ae,Pe,R)}h=h.sibling}}function $c(c,h){if(h.subtreeFlags&10256)for(h=h.child;h!==null;){var y=c,b=h,R=b.flags;switch(b.tag){case 22:$c(y,b),R&2048&&nl(b.alternate,b);break;case 24:$c(y,b),R&2048&&Tm(b.alternate,b);break;default:$c(y,b)}h=h.sibling}}function Ua(c,h,y){if(c.subtreeFlags&Ps)for(c=c.child;c!==null;)il(c,h,y),c=c.sibling}function il(c,h,y){switch(c.tag){case 26:if(Ua(c,h,y),c.flags&Ps)if(c.memoizedState!==null)Oy(y,ei,c.memoizedState,c.memoizedProps);else{var b=c.stateNode,R=c.type;c=c.memoizedProps,((h&335544128)===h||Um(R,c))&&hd(y,b,R,c)}break;case 5:Ua(c,h,y),c.flags&Ps&&(b=c.stateNode,R=c.type,c=c.memoizedProps,((h&335544128)===h||Um(R,c))&&hd(y,b,R,c));break;case 3:case 4:ta?(b=ei,ei=Ah(c.stateNode.containerInfo),Ua(c,h,y),ei=b):Ua(c,h,y);break;case 22:c.memoizedState===null&&(b=c.alternate,b!==null&&b.memoizedState!==null?(b=Ps,Ps=16777216,Ua(c,h,y),Ps=b):Ua(c,h,y));break;default:Ua(c,h,y)}}function Zf(c){var h=c.alternate;if(h!==null&&(c=h.child,c!==null)){h.child=null;do h=c.sibling,c.sibling=null,c=h;while(c!==null)}}function Yc(c){var h=c.deletions;if((c.flags&16)!==0){if(h!==null)for(var y=0;y<h.length;y++){var b=h[y];Vi=b,Ts(b,c)}Zf(c)}if(c.subtreeFlags&10256)for(c=c.child;c!==null;)Kf(c),c=c.sibling}function Kf(c){switch(c.tag){case 0:case 11:case 15:Yc(c),c.flags&2048&&La(9,c,c.return);break;case 3:Yc(c);break;case 12:Yc(c);break;case 22:var h=c.stateNode;c.memoizedState!==null&&h._visibility&2&&(c.return===null||c.return.tag!==13)?(h._visibility&=-3,gh(c)):Yc(c);break;default:Yc(c)}}function gh(c){var h=c.deletions;if((c.flags&16)!==0){if(h!==null)for(var y=0;y<h.length;y++){var b=h[y];Vi=b,Ts(b,c)}Zf(c)}for(c=c.child;c!==null;){switch(h=c,h.tag){case 0:case 11:case 15:La(8,h,h.return),gh(h);break;case 22:y=h.stateNode,y._visibility&2&&(y._visibility&=-3,gh(h));break;default:gh(h)}c=c.sibling}}function Ts(c,h){for(;Vi!==null;){var y=Vi;switch(y.tag){case 0:case 11:case 15:La(8,y,h);break;case 23:case 22:if(y.memoizedState!==null&&y.memoizedState.cachePool!==null){var b=y.memoizedState.cachePool.pool;b!=null&&b.refCount++}break;case 24:Ge(y.memoizedState.cache)}if(b=y.child,b!==null)b.return=y,Vi=b;else e:for(y=c;Vi!==null;){b=Vi;var R=b.sibling,D=b.return;if(Em(b),b===y){Vi=null;break e}if(R!==null){R.return=D,Vi=R;break e}Vi=D}}}function rl(c){var h=pn(c);if(h!=null){if(typeof h.memoizedProps["data-testname"]!="string")throw Error(r(364));return h}if(c=zi(c),c===null)throw Error(r(362));return c.stateNode.current}function sl(c,h){var y=c.tag;switch(h.$$typeof){case ca:if(c.type===h.value)return!0;break;case du:e:{for(h=h.value,c=[c,0],y=0;y<c.length;){var b=c[y++],R=b.tag,D=c[y++],j=h[D];if(R!==5&&R!==26&&R!==27||!fl(b)){for(;j!=null&&sl(b,j);)D++,j=h[D];if(D===h.length){h=!0;break e}else for(b=b.child;b!==null;)c.push(b,D),b=b.sibling}}h=!1}return h;case pu:if((y===5||y===26||y===27)&&Vm(c.stateNode,h.value))return!0;break;case xl:if((y===5||y===6||y===26||y===27)&&(c=Eh(c),c!==null&&0<=c.indexOf(h.value)))return!0;break;case Lh:if((y===5||y===26||y===27)&&(c=c.memoizedProps["data-testname"],typeof c=="string"&&c.toLowerCase()===h.value.toLowerCase()))return!0;break;default:throw Error(r(365))}return!1}function Zc(c){switch(c.$$typeof){case ca:return"<"+(v(c.value)||"Unknown")+">";case du:return":has("+(Zc(c)||"")+")";case pu:return'[role="'+c.value+'"]';case xl:return'"'+c.value+'"';case Lh:return'[data-testname="'+c.value+'"]';default:throw Error(r(365))}}function Kc(c,h){var y=[];c=[c,0];for(var b=0;b<c.length;){var R=c[b++],D=R.tag,j=c[b++],ae=h[j];if(D!==5&&D!==26&&D!==27||!fl(R)){for(;ae!=null&&sl(R,ae);)j++,ae=h[j];if(j===h.length)y.push(R);else for(R=R.child;R!==null;)c.push(R,j),R=R.sibling}}return y}function os(c,h){if(!or)throw Error(r(363));c=rl(c),c=Kc(c,h),h=[],c=Array.from(c);for(var y=0;y<c.length;){var b=c[y++],R=b.tag;if(R===5||R===26||R===27)fl(b)||h.push(b.stateNode);else for(b=b.child;b!==null;)c.push(b),b=b.sibling}return h}function yi(){return(Rn&2)!==0&&On!==0?On&-On:Zt.T!==null?st():au()}function yo(){if(Qr===0)if((On&536870912)===0||Pn){var c=lc;lc<<=1,(lc&3932160)===0&&(lc=262144),Qr=c}else Qr=536870912;return c=ds.current,c!==null&&(c.flags|=32),Qr}function Mi(c,h,y){(c===wn&&(ti===2||ti===9)||c.cancelPendingCommit!==null)&&(Ii(c,0),Ba(c,On,Qr,!1)),L(c,y),((Rn&2)===0||c!==wn)&&(c===wn&&((Rn&2)===0&&(wl|=y),Ci===4&&Ba(c,On,Qr,!1)),Tt(c))}function ma(c,h,y){if((Rn&6)!==0)throw Error(r(327));var b=!y&&(h&127)===0&&(h&c.expiredLanes)===0||C(c,h),R=b?Xv(c,h):za(c,h,!0),D=b;do{if(R===0){bl&&!b&&Ba(c,h,0,!1);break}else{if(y=c.current.alternate,D&&!Wv(y)){R=za(c,h,!1),D=!1;continue}if(R===2){if(D=h,c.errorRecoveryDisabledLanes&D)var j=0;else j=c.pendingLanes&-536870913,j=j!==0?j:j&536870912?536870912:0;if(j!==0){h=j;e:{var ae=c;R=Uh;var Pe=_i&&ae.current.memoizedState.isDehydrated;if(Pe&&(Ii(ae,j).flags|=256),j=za(ae,j,!1),j!==2){if(Sl&&!Pe){ae.errorRecoveryDisabledLanes|=D,wl|=D,R=4;break e}D=ms,ms=R,D!==null&&(ms===null?ms=D:ms.push.apply(ms,D))}R=j}if(D=!1,R!==2)continue}}if(R===1){Ii(c,0),Ba(c,h,0,!0);break}e:{switch(b=c,D=R,D){case 0:case 1:throw Error(r(345));case 4:if((h&4194048)!==h)break;case 6:Ba(b,h,Qr,!_a);break e;case 2:ms=null;break;case 3:case 5:break;default:throw Error(r(329))}if((h&62914560)===h&&(R=kh+300-Br(),10<R)){if(Ba(b,h,Qr,!_a),M(b,0,!0)!==0)break e;Qa=h,b.timeoutHandle=Lm(ka.bind(null,b,y,ms,Bh,Pd,h,Qr,wl,gu,_a,D,"Throttled",-0,0),R);break e}ka(b,y,ms,Bh,Pd,h,Qr,wl,gu,_a,D,null,-0,0)}}break}while(!0);Tt(c)}function ka(c,h,y,b,R,D,j,ae,Pe,Ke,_t,it,It,dn){if(c.timeoutHandle=us,it=h.subtreeFlags,it&8192||(it&16785408)===16785408){it=km(),il(h,D,it);var Gi=(D&62914560)===D?kh-Br():(D&4194048)===D?mc-Br():0;if(Gi=ey(it,Gi),Gi!==null){Qa=D,c.cancelPendingCommit=Gi(Va.bind(null,c,h,D,y,b,R,j,ae,Pe,_t,it,null,It,dn)),Ba(c,D,j,!Ke);return}}Va(c,h,D,y,b,R,j,ae,Pe)}function Wv(c){for(var h=c;;){var y=h.tag;if((y===0||y===11||y===15)&&h.flags&16384&&(y=h.updateQueue,y!==null&&(y=y.stores,y!==null)))for(var b=0;b<y.length;b++){var R=y[b],D=R.getSnapshot;R=R.value;try{if(!Fi(D(),R))return!1}catch{return!1}}if(y=h.child,h.subtreeFlags&16384&&y!==null)y.return=h,h=y;else{if(h===c)break;for(;h.sibling===null;){if(h.return===null||h.return===c)return!0;h=h.return}h.sibling.return=h.return,h=h.sibling}}return!0}function Ba(c,h,y,b){h&=~mu,h&=~wl,c.suspendedLanes|=h,c.pingedLanes&=~h,b&&(c.warmLanes|=h),b=c.expirationTimes;for(var R=h;0<R;){var D=31-hs(R),j=1<<D;b[D]=-1,R&=~j}y!==0&&H(c,y,h)}function Jf(){return(Rn&6)===0?(ht(0),!1):!0}function Qf(){if(Nn!==null){if(ti===0)var c=Nn.return;else c=Nn,va=li=null,yn(c),vl=null,uc=0,c=Nn;for(;c!==null;)Hv(c.alternate,c),c=c.return;Nn=null}}function Ii(c,h){var y=c.timeoutHandle;y!==us&&(c.timeoutHandle=us,Qv(y)),y=c.cancelPendingCommit,y!==null&&(c.cancelPendingCommit=null,y()),Qa=0,Qf(),wn=c,Nn=y=Cs(c.current,null),On=h,ti=0,Ki=null,_a=!1,bl=C(c,h),Sl=!1,gu=Qr=mu=wl=No=Ci=0,ms=Uh=null,Pd=!1,(h&8)!==0&&(h|=h&32);var b=c.entangledLanes;if(b!==0)for(c=c.entanglements,b&=h;0<b;){var R=31-hs(b),D=1<<R;h|=c[R],b&=~D}return Ja=h,Da(),y}function oi(c,h){mn=null,Zt.H=Is,h===hr||h===oa?(h=Ln(),ti=3):h===Dd?(h=Ln(),ti=4):ti=h===Jr?8:h!==null&&typeof h=="object"&&typeof h.then=="function"?6:1,Ki=h,Nn===null&&(Ci=1,Hf(c,Te(h,c.current)))}function Un(){var c=ds.current;return c===null?!0:(On&4194048)===On?ps===null:(On&62914560)===On||(On&536870912)!==0?c===ps:!1}function _o(){var c=Zt.H;return Zt.H=Is,c===null?Is:c}function As(){var c=Zt.A;return Zt.A=fu,c}function Jc(){Ci=4,_a||(On&4194048)!==On&&ds.current!==null||(bl=!0),(No&134217727)===0&&(wl&134217727)===0||wn===null||Ba(wn,On,Qr,!1)}function za(c,h,y){var b=Rn;Rn|=2;var R=_o(),D=As();(wn!==c||On!==h)&&(Bh=null,Ii(c,h)),h=!1;var j=Ci;e:do try{if(ti!==0&&Nn!==null){var ae=Nn,Pe=Ki;switch(ti){case 8:Qf(),j=6;break e;case 3:case 2:case 9:case 6:ds.current===null&&(h=!0);var Ke=ti;if(ti=0,Ki=null,Fa(c,ae,Pe,Ke),y&&bl){j=0;break e}break;default:Ke=ti,ti=0,Ki=null,Fa(c,ae,Pe,Ke)}}qv(),j=Ci;break}catch(_t){oi(c,_t)}while(!0);return h&&c.shellSuspendCounter++,va=li=null,Rn=b,Zt.H=R,Zt.A=D,Nn===null&&(wn=null,On=0,Da()),j}function qv(){for(;Nn!==null;)al(Nn)}function Xv(c,h){var y=Rn;Rn|=2;var b=_o(),R=As();wn!==c||On!==h?(Bh=null,Ml=Br()+500,Ii(c,h)):bl=C(c,h);e:do try{if(ti!==0&&Nn!==null){h=Nn;var D=Ki;t:switch(ti){case 1:ti=0,Ki=null,Fa(c,h,D,1);break;case 2:case 9:if(gt(D)){ti=0,Ki=null,ed(h);break}h=function(){ti!==2&&ti!==9||wn!==c||(ti=7),Tt(c)},D.then(h,h);break e;case 3:ti=7;break e;case 4:ti=5;break e;case 7:gt(D)?(ti=0,Ki=null,ed(h)):(ti=0,Ki=null,Fa(c,h,D,7));break;case 5:var j=null;switch(Nn.tag){case 26:j=Nn.memoizedState;case 5:case 27:var ae=Nn,Pe=ae.type,Ke=ae.pendingProps;if(j?cg(j):Ei(ae.stateNode,Pe,Ke)){ti=0,Ki=null;var _t=ae.sibling;if(_t!==null)Nn=_t;else{var it=ae.return;it!==null?(Nn=it,eu(it)):Nn=null}break t}}ti=0,Ki=null,Fa(c,h,D,5);break;case 6:ti=0,Ki=null,Fa(c,h,D,6);break;case 8:Qf(),Ci=6;break e;default:throw Error(r(462))}}Qc();break}catch(It){oi(c,It)}while(!0);return va=li=null,Zt.H=b,Zt.A=R,Rn=y,Nn!==null?0:(wn=null,On=0,Da(),Ci)}function Qc(){for(;Nn!==null&&!Uy();)al(Nn)}function al(c){var h=_m(c.alternate,c,Ja);c.memoizedProps=c.pendingProps,h===null?eu(c):Nn=h}function ed(c){var h=c,y=h.alternate;switch(h.tag){case 15:case 0:h=dm(y,h,h.pendingProps,h.type,void 0,On);break;case 11:h=dm(y,h,h.pendingProps,h.type.render,h.ref,On);break;case 5:yn(h);default:Hv(y,h),h=Nn=id(h,Ja),h=_m(y,h,Ja)}c.memoizedProps=c.pendingProps,h===null?eu(c):Nn=h}function Fa(c,h,y,b){va=li=null,yn(h),vl=null,uc=0;var R=h.return;try{if(AS(c,R,h,y,On)){Ci=1,Hf(c,Te(y,c.current)),Nn=null;return}}catch(D){if(R!==null)throw Nn=R,D;Ci=1,Hf(c,Te(y,c.current)),Nn=null;return}h.flags&32768?(Pn||b===1?c=!0:bl||(On&536870912)!==0?c=!1:(_a=c=!0,(b===2||b===9||b===3||b===6)&&(b=ds.current,b!==null&&b.tag===13&&(b.flags|=16384))),ol(h,c)):eu(h)}function eu(c){var h=c;do{if((h.flags&32768)!==0){ol(h,_a);return}c=h.return;var y=Vv(h.alternate,h,Ja);if(y!==null){Nn=y;return}if(h=h.sibling,h!==null){Nn=h;return}Nn=h=c}while(h!==null);Ci===0&&(Ci=5)}function ol(c,h){do{var y=Sm(c.alternate,c);if(y!==null){y.flags&=32767,Nn=y;return}if(y=c.return,y!==null&&(y.flags|=32768,y.subtreeFlags=0,y.deletions=null),!h&&(c=c.sibling,c!==null)){Nn=c;return}Nn=c=y}while(c!==null);Ci=6,Nn=null}function Va(c,h,y,b,R,D,j,ae,Pe){c.cancelPendingCommit=null;do Ga();while(Ji!==0);if((Rn&6)!==0)throw Error(r(327));if(h!==null){if(h===c.current)throw Error(r(177));if(D=h.lanes|h.childLanes,D|=hc,F(c,y,D,j,ae,Pe),c===wn&&(Nn=wn=null,On=0),gc=h,Io=c,Qa=y,vu=D,Od=R,yg=b,(h.subtreeFlags&10256)!==0||(h.flags&10256)!==0?(c.callbackNode=null,c.callbackPriority=0,Yi(Rh,function(){return vh(),null})):(c.callbackNode=null,c.callbackPriority=0),b=(h.flags&13878)!==0,(h.subtreeFlags&13878)!==0||b){b=Zt.T,Zt.T=null,R=ea(),In(2),j=Rn,Rn|=4;try{CS(c,h,y)}finally{Rn=j,In(R),Zt.T=b}}Ji=1,xo(),Ha(),td()}}function xo(){if(Ji===1){Ji=0;var c=Io,h=gc,y=(h.flags&13878)!==0;if((h.subtreeFlags&13878)!==0||y){y=Zt.T,Zt.T=null;var b=ea();In(2);var R=Rn;Rn|=4;try{mh(h,c),Jv(c.containerInfo)}finally{Rn=R,In(b),Zt.T=y}}c.current=h,Ji=2}}function Ha(){if(Ji===2){Ji=0;var c=Io,h=gc,y=(h.flags&8772)!==0;if((h.subtreeFlags&8772)!==0||y){y=Zt.T,Zt.T=null;var b=ea();In(2);var R=Rn;Rn|=4;try{jv(c,h.alternate,h)}finally{Rn=R,In(b),Zt.T=y}}Ji=3}}function td(){if(Ji===4||Ji===3){Ji=0,hg();var c=Io,h=gc,y=Qa,b=yg;(h.subtreeFlags&10256)!==0||(h.flags&10256)!==0?Ji=5:(Ji=0,gc=Io=null,nd(c,c.pendingLanes));var R=c.pendingLanes;if(R===0&&(Do=null),ie(y),h=h.stateNode,fs&&typeof fs.onCommitFiberRoot=="function")try{fs.onCommitFiberRoot(cc,h,void 0,(h.current.flags&128)===128)}catch{}if(b!==null){h=Zt.T,R=ea(),In(2),Zt.T=null;try{for(var D=c.onRecoverableError,j=0;j<b.length;j++){var ae=b[j];D(ae.value,{componentStack:ae.stack})}}finally{Zt.T=h,In(R)}}(Qa&3)!==0&&Ga(),Tt(c),R=c.pendingLanes,(y&261930)!==0&&(R&42)!==0?c===zh?jn++:(jn=0,zh=c):jn=0,_i&&Th(),ht(0)}}function nd(c,h){(c.pooledCacheLanes&=h)===0&&(h=c.pooledCache,h!=null&&(c.pooledCache=null,Ge(h)))}function Ga(){return xo(),Ha(),td(),vh()}function vh(){if(Ji!==5)return!1;var c=Io,h=vu;vu=0;var y=ie(Qa),b=32>y?32:y;y=Zt.T;var R=ea();try{In(b),Zt.T=null,b=Od,Od=null;var D=Io,j=Qa;if(Ji=0,gc=Io=null,Qa=0,(Rn&6)!==0)throw Error(r(331));var ae=Rn;if(Rn|=4,Kf(D.current),Yf(D,D.current,j,b),Rn=ae,ht(0,!1),fs&&typeof fs.onPostCommitFiberRoot=="function")try{fs.onPostCommitFiberRoot(cc,D)}catch{}return!0}finally{In(R),Zt.T=y,nd(c,h)}}function ll(c,h,y){h=Te(y,h),h=hm(c.stateNode,h,2),c=be(c,h,2),c!==null&&(L(c,2),Tt(c))}function sn(c,h,y){if(c.tag===3)ll(c,c,y);else for(;h!==null;){if(h.tag===3){ll(h,c,y);break}else if(h.tag===1){var b=h.stateNode;if(typeof h.type.getDerivedStateFromError=="function"||typeof b.componentDidCatch=="function"&&(Do===null||!Do.has(b))){c=Te(y,c),y=Rv(2),b=be(h,y,2),b!==null&&(Nv(y,b,h,c),L(b,2),Tt(b));break}}h=h.return}}function tu(c,h,y){var b=c.pingCache;if(b===null){b=c.pingCache=new Os;var R=new Set;b.set(h,R)}else R=b.get(h),R===void 0&&(R=new Set,b.set(h,R));R.has(y)||(Sl=!0,R.add(y),c=$v.bind(null,c,h,y),h.then(c,c))}function $v(c,h,y){var b=c.pingCache;b!==null&&b.delete(h),c.pingedLanes|=c.suspendedLanes&y,c.warmLanes&=~y,wn===c&&(On&y)===y&&(Ci===4||Ci===3&&(On&62914560)===On&&300>Br()-kh?(Rn&2)===0&&Ii(c,0):mu|=y,gu===On&&(gu=0)),Tt(c)}function Yv(c,h){h===0&&(h=I()),c=Qt(c,h),c!==null&&(L(c,h),Tt(c))}function RS(c){var h=c.memoizedState,y=0;h!==null&&(y=h.retryLane),Yv(c,y)}function NS(c,h){var y=0;switch(c.tag){case 31:case 13:var b=c.stateNode,R=c.memoizedState;R!==null&&(y=R.retryLane);break;case 19:b=c.stateNode;break;case 22:b=c.stateNode._retryCache;break;default:throw Error(r(314))}b!==null&&b.delete(h),Yv(c,y)}function Yi(c,h){return Ch(c,h)}function Am(c,h,y,b){this.tag=c,this.key=y,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=h,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=b,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Zl(c){return c=c.prototype,!(!c||!c.isReactComponent)}function Cs(c,h){var y=c.alternate;return y===null?(y=t(c.tag,h,c.key,c.mode),y.elementType=c.elementType,y.type=c.type,y.stateNode=c.stateNode,y.alternate=c,c.alternate=y):(y.pendingProps=h,y.type=c.type,y.flags=0,y.subtreeFlags=0,y.deletions=null),y.flags=c.flags&65011712,y.childLanes=c.childLanes,y.lanes=c.lanes,y.child=c.child,y.memoizedProps=c.memoizedProps,y.memoizedState=c.memoizedState,y.updateQueue=c.updateQueue,h=c.dependencies,y.dependencies=h===null?null:{lanes:h.lanes,firstContext:h.firstContext},y.sibling=c.sibling,y.index=c.index,y.ref=c.ref,y.refCleanup=c.refCleanup,y}function id(c,h){c.flags&=65011714;var y=c.alternate;return y===null?(c.childLanes=0,c.lanes=h,c.child=null,c.subtreeFlags=0,c.memoizedProps=null,c.memoizedState=null,c.updateQueue=null,c.dependencies=null,c.stateNode=null):(c.childLanes=y.childLanes,c.lanes=y.lanes,c.child=y.child,c.subtreeFlags=0,c.deletions=null,c.memoizedProps=y.memoizedProps,c.memoizedState=y.memoizedState,c.updateQueue=y.updateQueue,c.type=y.type,h=y.dependencies,c.dependencies=h===null?null:{lanes:h.lanes,firstContext:h.firstContext}),c}function bo(c,h,y,b,R,D){var j=0;if(b=c,typeof c=="function")Zl(c)&&(j=1);else if(typeof c=="string")j=ta&&lr?yd(c,y,xr.current)?26:ug(c)?27:5:ta?yd(c,y,xr.current)?26:5:lr&&ug(c)?27:5;else e:switch(c){case bh:return c=t(31,y,h,R),c.elementType=bh,c.lanes=D,c;case ec:return Js(y.children,R,D,h);case tc:j=8,R|=24;break;case nc:return c=t(12,y,h,R|2),c.elementType=nc,c.lanes=D,c;case od:return c=t(13,y,h,R),c.elementType=od,c.lanes=D,c;case So:return c=t(19,y,h,R),c.elementType=So,c.lanes=D,c;default:if(typeof c=="object"&&c!==null)switch(c.$$typeof){case Qs:j=10;break e;case xh:j=9;break e;case nu:j=11;break e;case ld:j=14;break e;case $r:j=16,b=null;break e}j=29,y=Error(r(130,c===null?"null":typeof c,"")),b=null}return h=t(j,y,h,R),h.elementType=c,h.type=b,h.lanes=D,h}function Js(c,h,y,b){return c=t(7,c,b,h),c.lanes=y,c}function Cm(c,h,y){return c=t(6,c,null,h),c.lanes=y,c}function Rm(c){var h=t(18,null,null,0);return h.stateNode=c,h}function Nm(c,h,y){return h=t(4,c.children!==null?c.children:[],c.key,h),h.lanes=y,h.stateNode={containerInfo:c.containerInfo,pendingChildren:null,implementation:c.implementation},h}function Zv(c,h,y,b,R,D,j,ae,Pe){this.tag=1,this.containerInfo=c,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=us,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=U(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=U(0),this.hiddenUpdates=U(null),this.identifierPrefix=b,this.onUncaughtError=R,this.onCaughtError=D,this.onRecoverableError=j,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=Pe,this.incompleteTransitions=new Map}function cl(c,h,y,b,R,D,j,ae,Pe,Ke,_t,it){return c=new Zv(c,h,y,j,Pe,Ke,_t,it,ae),h=1,D===!0&&(h|=24),D=t(3,null,null,h),c.current=D,D.stateNode=c,h=Ie(),h.refCount++,c.pooledCache=h,h.refCount++,D.memoizedState={element:b,isDehydrated:y,cache:h},z(D),c}function rd(c){return c?(c=Wa,c):Wa}function yh(c){var h=c._reactInternals;if(h===void 0)throw typeof c.render=="function"?Error(r(188)):(c=Object.keys(c).join(","),Error(r(268,c)));return c=u(h),c=c!==null?f(c):null,c===null?null:ru(c.stateNode)}function Dm(c,h,y,b,R,D){R=rd(R),b.context===null?b.context=R:b.pendingContext=R,b=se(h),b.payload={element:y},D=D===void 0?null:D,D!==null&&(b.callback=D),y=be(c,b,h),y!==null&&(Mi(y,c,h),Oe(y,c,h))}function Kl(c,h){if(c=c.memoizedState,c!==null&&c.dehydrated!==null){var y=c.retryLane;c.retryLane=y!==0&&y<h?y:h}}function _h(c,h){Kl(c,h),(c=c.alternate)&&Kl(c,h)}var bn={},sd=so,ls=C$,ad=Object.assign,Jl=Symbol.for("react.element"),ja=Symbol.for("react.transitional.element"),Ql=Symbol.for("react.portal"),ec=Symbol.for("react.fragment"),tc=Symbol.for("react.strict_mode"),nc=Symbol.for("react.profiler"),xh=Symbol.for("react.consumer"),Qs=Symbol.for("react.context"),nu=Symbol.for("react.forward_ref"),od=Symbol.for("react.suspense"),So=Symbol.for("react.suspense_list"),ld=Symbol.for("react.memo"),$r=Symbol.for("react.lazy"),bh=Symbol.for("react.activity"),Im=Symbol.for("react.memo_cache_sentinel"),wo=Symbol.iterator,ul=Symbol.for("react.client.reference"),hl=Array.isArray,Zt=sd.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,Pm=e.rendererVersion,Sh=e.rendererPackageName,iu=e.extraDevToolsConfig,ru=e.getPublicInstance,Kv=e.getRootHostContext,su=e.getChildHostContext,cd=e.prepareForCommit,Jv=e.resetAfterCommit,Om=e.createInstance;e.cloneMutableInstance;var wh=e.appendInitialChild,cs=e.finalizeInitialChildren,Yr=e.shouldSetTextContent,Mo=e.createTextInstance;e.cloneMutableTextInstance;var Lm=e.scheduleTimeout,Qv=e.cancelTimeout,us=e.noTimeout,Bi=e.isPrimaryRenderer;e.warnsIfNotActing;var kn=e.supportsMutation,Rs=e.supportsPersistence,_i=e.supportsHydration,pn=e.getInstanceFromNode;e.beforeActiveInstanceBlur;var ni=e.preparePortalMount;e.prepareScopeUpdate,e.getInstanceFromScope;var In=e.setCurrentUpdatePriority,ea=e.getCurrentUpdatePriority,au=e.resolveUpdatePriority;e.trackSchedulerEvent,e.resolveEventType,e.resolveEventTimeStamp;var ic=e.shouldAttemptEagerTransition,ud=e.detachDeletedInstance;e.requestPostPaintCallback;var Mh=e.maySuspendCommit,ou=e.maySuspendCommitOnUpdate,Um=e.maySuspendCommitInSyncRender,Ei=e.preloadInstance,km=e.startSuspendingCommit,hd=e.suspendInstance;e.suspendOnActiveViewTransition;var ey=e.waitForCommitToBeReady;e.getSuspendedCommitReason;var rc=e.NotPendingTransition,sc=e.HostTransitionContext,Bm=e.resetFormInstance;e.bindToConsole;var zm=e.supportsMicrotasks,Fm=e.scheduleMicrotask,or=e.supportsTestSelectors,zi=e.findFiberRoot,fd=e.getBoundingRect,Eh=e.getTextContent,fl=e.isHiddenSubtree,Vm=e.matchAccessibilityRole,Eo=e.setFocusIfFocusable,dd=e.setupIntersectionObserver,Hm=e.appendChild,Gm=e.appendChildToContainer,ty=e.commitTextUpdate,ny=e.commitMount,iy=e.commitUpdate,ry=e.insertBefore,sy=e.insertInContainerBefore,ay=e.removeChild,jm=e.removeChildFromContainer,Wm=e.resetTextContent,DS=e.hideInstance,oy=e.hideTextInstance,ly=e.unhideInstance,cy=e.unhideTextInstance;e.cancelViewTransitionName,e.cancelRootViewTransitionName,e.restoreRootViewTransitionName,e.cloneRootViewTransitionContainer,e.removeRootViewTransitionClone,e.measureClonedInstance,e.hasInstanceChanged,e.hasInstanceAffectedParent,e.startViewTransition,e.startGestureTransition,e.stopViewTransition,e.getCurrentGestureOffset,e.createViewTransitionInstance;var qm=e.clearContainer;e.createFragmentInstance,e.updateFragmentInstanceFiber,e.commitNewChildToFragmentInstance,e.deleteChildFromFragmentInstance;var uy=e.cloneInstance,Xm=e.createContainerChildSet,$m=e.appendChildToContainerChildSet,hy=e.finalizeContainerChildren,Ym=e.replaceContainerChildren,fy=e.cloneHiddenInstance,Zm=e.cloneHiddenTextInstance,dl=e.isSuspenseInstancePending,pd=e.isSuspenseInstanceFallback,md=e.getSuspenseInstanceFallbackErrorDetails,gd=e.registerSuspenseInstanceRetry,dy=e.canHydrateFormStateMarker,Km=e.isFormStateMarkerMatching,py=e.getNextHydratableSibling,my=e.getNextHydratableSiblingAfterSingleton,gy=e.getFirstHydratableChild,vy=e.getFirstHydratableChildWithinContainer,yy=e.getFirstHydratableChildWithinActivityInstance,_y=e.getFirstHydratableChildWithinSuspenseInstance,Jm=e.getFirstHydratableChildWithinSingleton,xy=e.canHydrateInstance,by=e.canHydrateTextInstance,Qm=e.canHydrateActivityInstance,Sy=e.canHydrateSuspenseInstance,wy=e.hydrateInstance,IS=e.hydrateTextInstance,eg=e.hydrateActivityInstance,My=e.hydrateSuspenseInstance,Ey=e.getNextHydratableInstanceAfterActivityInstance,tg=e.getNextHydratableInstanceAfterSuspenseInstance,Ty=e.commitHydratedInstance,Ay=e.commitHydratedContainer,PS=e.commitHydratedActivityInstance,OS=e.commitHydratedSuspenseInstance,Cy=e.finalizeHydratedChildren,Th=e.flushHydrationEvents;e.clearActivityBoundary;var ng=e.clearSuspenseBoundary;e.clearActivityBoundaryFromContainer;var vd=e.clearSuspenseBoundaryFromContainer,Ry=e.hideDehydratedBoundary,Ny=e.unhideDehydratedBoundary,lu=e.shouldDeleteUnhydratedTailInstances;e.diffHydratedPropsForDevWarnings,e.diffHydratedTextForDevWarnings,e.describeHydratableInstanceForDevWarnings;var Dy=e.validateHydratableInstance,ig=e.validateHydratableTextInstance,ta=e.supportsResources,yd=e.isHostHoistableType,Ah=e.getHoistableRoot,rg=e.getResource,sg=e.acquireResource,pl=e.releaseResource,Iy=e.hydrateHoistable,ag=e.mountHoistable,og=e.unmountHoistable,_d=e.createHoistableInstance,Py=e.prepareToCommitHoistables,lg=e.mayResourceSuspendCommit,cg=e.preloadResource,Oy=e.suspendResource,lr=e.supportsSingletons,xd=e.resolveSingletonInstance,Zi=e.acquireSingletonInstance,_r=e.releaseSingletonInstance,ug=e.isHostSingletonType,ac=e.isSingletonScope,bd=[],oc=-1,Wa={},hs=Math.clz32?Math.clz32:A,Sd=Math.log,Ly=Math.LN2,wd=256,lc=262144,cu=4194304,Ch=ls.unstable_scheduleCallback,Md=ls.unstable_cancelCallback,Uy=ls.unstable_shouldYield,hg=ls.unstable_requestPaint,Br=ls.unstable_now,Ed=ls.unstable_ImmediatePriority,ky=ls.unstable_UserBlockingPriority,Rh=ls.unstable_NormalPriority,Td=ls.unstable_IdlePriority,fg=ls.log,By=ls.unstable_setDisableYieldValue,cc=null,fs=null,Fi=typeof Object.is=="function"?Object.is:le,Ad=typeof reportError=="function"?reportError:function(c){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var h=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof c=="object"&&c!==null&&typeof c.message=="string"?String(c.message):String(c),error:c});if(!window.dispatchEvent(h))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",c);return}console.error(c)},LS=Object.prototype.hasOwnProperty,Cd,qa,Nh=!1,dg=new WeakMap,To=[],Xa=0,ii=null,Dh=0,na=[],Ns=0,ia=null,Ar=1,ga="",xr=_(null),Ao=_(null),Cr=_(null),Ih=_(null),cr=null,xi=null,Pn=!1,$a=null,Zr=!1,Rd=Error(r(519)),ra=_(null),li=null,va=null,zy=typeof AbortController<"u"?AbortController:function(){var c=[],h=this.signal={aborted:!1,addEventListener:function(y,b){c.push(b)}};this.abort=function(){h.aborted=!0,c.forEach(function(y){return y()})}},br=ls.unstable_scheduleCallback,US=ls.unstable_NormalPriority,bi={$$typeof:Qs,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0},Ph=null,Qn=null,zr=!1,sa=!1,Nd=!1,ml=0,uu=null,pg=0,Co=0,ur=null,aa=Zt.S;Zt.S=function(c,h){mc=Br(),typeof h=="object"&&h!==null&&typeof h.then=="function"&&jt(c,h),aa!==null&&aa(c,h)};var gl=_(null),hr=Error(r(460)),Dd=Error(r(474)),oa=Error(r(542)),Ya={then:function(){}},Kr=null,vl=null,uc=0,Rr=Ws(!0),mg=Ws(!1),Nr=[],Za=0,hc=0,Ds=!1,Id=!1,fc=_(null),yl=_(0),ds=_(null),ps=null,Pi=_(0),Ro=0,mn=null,Wt=null,cn=null,Sn=!1,_n=!1,Bn=!1,Fr=0,la=0,ya=null,gg=0,Is={readContext:$,use:Gn,useCallback:je,useContext:je,useEffect:je,useImperativeHandle:je,useLayoutEffect:je,useInsertionEffect:je,useMemo:je,useReducer:je,useRef:je,useState:je,useDebugValue:je,useDeferredValue:je,useTransition:je,useSyncExternalStore:je,useId:je,useHostTransitionStatus:je,useFormState:je,useActionState:je,useOptimistic:je,useMemoCache:je,useCacheRefresh:je};Is.useEffectEvent=je;var Ti={readContext:$,use:Gn,useCallback:function(c,h){return Dt().memoizedState=[c,h===void 0?null:h],c},useContext:$,useEffect:ih,useImperativeHandle:function(c,h,y){y=y!=null?y.concat([c]):null,jl(4194308,4,zc.bind(null,h,c),y)},useLayoutEffect:function(c,h){return jl(4194308,4,c,h)},useInsertionEffect:function(c,h){jl(4,2,c,h)},useMemo:function(c,h){var y=Dt();h=h===void 0?null:h;var b=c();if(Bn){te(!0);try{c()}finally{te(!1)}}return y.memoizedState=[b,h],b},useReducer:function(c,h,y){var b=Dt();if(y!==void 0){var R=y(h);if(Bn){te(!0);try{y(h)}finally{te(!1)}}}else R=h;return b.memoizedState=b.baseState=R,c={pending:null,lanes:0,dispatch:null,lastRenderedReducer:c,lastRenderedState:R},b.queue=c,c=c.dispatch=TS.bind(null,mn,c),[b.memoizedState,c]},useRef:function(c){var h=Dt();return c={current:c},h.memoizedState=c},useState:function(c){c=im(c);var h=c.queue,y=Ev.bind(null,mn,h);return h.dispatch=y,[c.memoizedState,y]},useDebugValue:sh,useDeferredValue:function(c,h){var y=Dt();return Vc(y,c,h)},useTransition:function(){var c=im(!1);return c=Sv.bind(null,mn,c.queue,!0,!1),Dt().memoizedState=c,[!1,c]},useSyncExternalStore:function(c,h,y){var b=mn,R=Dt();if(Pn){if(y===void 0)throw Error(r(407));y=y()}else{if(y=h(),wn===null)throw Error(r(349));(On&127)!==0||mr(b,h,y)}R.memoizedState=y;var D={value:y,getSnapshot:h};return R.queue=D,ih(Hl.bind(null,b,D,c),[c]),b.flags|=2048,Es(9,{destroy:void 0},gr.bind(null,b,D,y,h),null),y},useId:function(){var c=Dt(),h=wn.identifierPrefix;if(Pn){var y=ga,b=Ar;y=(b&~(1<<32-hs(b)-1)).toString(32)+y,h="_"+h+"R_"+y,y=Fr++,0<y&&(h+="H"+y.toString(32)),h+="_"}else y=gg++,h="_"+h+"r_"+y.toString(32)+"_";return c.memoizedState=h},useHostTransitionStatus:lm,useFormState:sm,useActionState:sm,useOptimistic:function(c){var h=Dt();h.memoizedState=h.baseState=c;var y={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return h.queue=y,h=zf.bind(null,mn,!0,y),y.dispatch=h,[c,h]},useMemoCache:sr,useCacheRefresh:function(){return Dt().memoizedState=ES.bind(null,mn)},useEffectEvent:function(c){var h=Dt(),y={impl:c};return h.memoizedState=y,function(){if((Rn&2)!==0)throw Error(r(440));return y.impl.apply(void 0,arguments)}}},Ka={readContext:$,use:Gn,useCallback:kf,useContext:$,useEffect:Bc,useImperativeHandle:bv,useInsertionEffect:Qo,useLayoutEffect:rh,useMemo:Fc,useReducer:vi,useRef:Uf,useState:function(){return vi(Tn)},useDebugValue:sh,useDeferredValue:function(c,h){var y=at();return om(y,Wt.memoizedState,c,h)},useTransition:function(){var c=vi(Tn)[0],h=at().memoizedState;return[typeof c=="boolean"?c:Mt(c),h]},useSyncExternalStore:$i,useId:Bf,useHostTransitionStatus:lm,useFormState:Uc,useActionState:Uc,useOptimistic:function(c,h){var y=at();return th(y,Wt,c,h)},useMemoCache:sr,useCacheRefresh:Mv};Ka.useEffectEvent=Wr;var _l={readContext:$,use:Gn,useCallback:kf,useContext:$,useEffect:Bc,useImperativeHandle:bv,useInsertionEffect:Qo,useLayoutEffect:rh,useMemo:Fc,useReducer:ar,useRef:Uf,useState:function(){return ar(Tn)},useDebugValue:sh,useDeferredValue:function(c,h){var y=at();return Wt===null?Vc(y,c,h):om(y,Wt.memoizedState,c,h)},useTransition:function(){var c=ar(Tn)[0],h=at().memoizedState;return[typeof c=="boolean"?c:Mt(c),h]},useSyncExternalStore:$i,useId:Bf,useHostTransitionStatus:lm,useFormState:kc,useActionState:kc,useOptimistic:function(c,h){var y=at();return Wt!==null?th(y,Wt,c,h):(y.baseState=c,[c,y.queue.dispatch])},useMemoCache:sr,useCacheRefresh:Mv};_l.useEffectEvent=Wr;var Oh={enqueueSetState:function(c,h,y){c=c._reactInternals;var b=yi(),R=se(b);R.payload=h,y!=null&&(R.callback=y),h=be(c,R,b),h!==null&&(Mi(h,c,b),Oe(h,c,b))},enqueueReplaceState:function(c,h,y){c=c._reactInternals;var b=yi(),R=se(b);R.tag=1,R.payload=h,y!=null&&(R.callback=y),h=be(c,R,b),h!==null&&(Mi(h,c,b),Oe(h,c,b))},enqueueForceUpdate:function(c,h){c=c._reactInternals;var y=yi(),b=se(y);b.tag=2,h!=null&&(b.callback=h),h=be(c,b,y),h!==null&&(Mi(h,c,y),Oe(h,c,y))}},Jr=Error(r(461)),pi=!1,dc={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null},Oi=!1,Li=!1,hu=!1,vg=typeof WeakSet=="function"?WeakSet:Set,Vi=null,Ai=null,Hi=!1,ei=null,Ps=8192,fu={getCacheForType:function(c){var h=$(bi),y=h.data.get(c);return y===void 0&&(y=c(),h.data.set(c,y)),y},cacheSignal:function(){return $(bi).controller.signal}},ca=0,du=1,pu=2,Lh=3,xl=4;if(typeof Symbol=="function"&&Symbol.for){var pc=Symbol.for;ca=pc("selector.component"),du=pc("selector.has_pseudo_class"),pu=pc("selector.role"),Lh=pc("selector.test_id"),xl=pc("selector.text")}var Os=typeof WeakMap=="function"?WeakMap:Map,Rn=0,wn=null,Nn=null,On=0,ti=0,Ki=null,_a=!1,bl=!1,Sl=!1,Ja=0,Ci=0,No=0,wl=0,mu=0,Qr=0,gu=0,Uh=null,ms=null,Pd=!1,kh=0,mc=0,Ml=1/0,Bh=null,Do=null,Ji=0,Io=null,gc=null,Qa=0,vu=0,Od=null,yg=null,jn=0,zh=null;return bn.attemptContinuousHydration=function(c){if(c.tag===13||c.tag===31){var h=Qt(c,67108864);h!==null&&Mi(h,c,67108864),_h(c,67108864)}},bn.attemptHydrationAtCurrentPriority=function(c){if(c.tag===13||c.tag===31){var h=yi();h=Y(h);var y=Qt(c,h);y!==null&&Mi(y,c,h),_h(c,h)}},bn.attemptSynchronousHydration=function(c){switch(c.tag){case 3:if(c=c.stateNode,c.current.memoizedState.isDehydrated){var h=E(c.pendingLanes);if(h!==0){for(c.pendingLanes|=2,c.entangledLanes|=2;h;){var y=1<<31-hs(h);c.entanglements[1]|=y,h&=~y}Tt(c),(Rn&6)===0&&(Ml=Br()+500,ht(0))}}break;case 31:case 13:h=Qt(c,2),h!==null&&Mi(h,c,2),Jf(),_h(c,2)}},bn.batchedUpdates=function(c,h){return c(h)},bn.createComponentSelector=function(c){return{$$typeof:ca,value:c}},bn.createContainer=function(c,h,y,b,R,D,j,ae,Pe,Ke){return cl(c,h,!1,null,y,b,D,null,j,ae,Pe,Ke)},bn.createHasPseudoClassSelector=function(c){return{$$typeof:du,value:c}},bn.createHydrationContainer=function(c,h,y,b,R,D,j,ae,Pe,Ke,_t,it,It,dn){var Gi;return c=cl(y,b,!0,c,R,D,ae,dn,Pe,Ke,_t,it),c.context=rd(null),y=c.current,b=yi(),b=Y(b),R=se(b),R.callback=(Gi=h)!=null?Gi:null,be(y,R,b),h=b,c.current.lanes=h,L(c,h),Tt(c),c},bn.createPortal=function(c,h,y){var b=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Ql,key:b==null?null:""+b,children:c,containerInfo:h,implementation:y}},bn.createRoleSelector=function(c){return{$$typeof:pu,value:c}},bn.createTestNameSelector=function(c){return{$$typeof:Lh,value:c}},bn.createTextSelector=function(c){return{$$typeof:xl,value:c}},bn.defaultOnCaughtError=function(c){console.error(c)},bn.defaultOnRecoverableError=function(c){Ad(c)},bn.defaultOnUncaughtError=function(c){Ad(c)},bn.deferredUpdates=function(c){var h=Zt.T,y=ea();try{return In(32),Zt.T=null,c()}finally{In(y),Zt.T=h}},bn.discreteUpdates=function(c,h,y,b,R){var D=Zt.T,j=ea();try{return In(2),Zt.T=null,c(h,y,b,R)}finally{In(j),Zt.T=D,Rn===0&&(Ml=Br()+500)}},bn.findAllNodes=os,bn.findBoundingRects=function(c,h){if(!or)throw Error(r(363));h=os(c,h),c=[];for(var y=0;y<h.length;y++)c.push(fd(h[y]));for(h=c.length-1;0<h;h--){y=c[h];for(var b=y.x,R=b+y.width,D=y.y,j=D+y.height,ae=h-1;0<=ae;ae--)if(h!==ae){var Pe=c[ae],Ke=Pe.x,_t=Ke+Pe.width,it=Pe.y,It=it+Pe.height;if(b>=Ke&&D>=it&&R<=_t&&j<=It){c.splice(h,1);break}else if(b!==Ke||y.width!==Pe.width||It<D||it>j){if(!(D!==it||y.height!==Pe.height||_t<b||Ke>R)){Ke>b&&(Pe.width+=Ke-b,Pe.x=b),_t<R&&(Pe.width=R-Ke),c.splice(h,1);break}}else{it>D&&(Pe.height+=it-D,Pe.y=D),It<j&&(Pe.height=j-it),c.splice(h,1);break}}}return c},bn.findHostInstance=yh,bn.findHostInstanceWithNoPortals=function(c){return c=u(c),c=c!==null?p(c):null,c===null?null:ru(c.stateNode)},bn.findHostInstanceWithWarning=function(c){return yh(c)},bn.flushPassiveEffects=Ga,bn.flushSyncFromReconciler=function(c){var h=Rn;Rn|=1;var y=Zt.T,b=ea();try{if(In(2),Zt.T=null,c)return c()}finally{In(b),Zt.T=y,Rn=h,(Rn&6)===0&&ht(0)}},bn.flushSyncWork=Jf,bn.focusWithin=function(c,h){if(!or)throw Error(r(363));for(c=rl(c),h=Kc(c,h),h=Array.from(h),c=0;c<h.length;){var y=h[c++],b=y.tag;if(!fl(y)){if((b===5||b===26||b===27)&&Eo(y.stateNode))return!0;for(y=y.child;y!==null;)h.push(y),y=y.sibling}}return!1},bn.getFindAllNodesFailureDescription=function(c,h){if(!or)throw Error(r(363));var y=0,b=[];c=[rl(c),0];for(var R=0;R<c.length;){var D=c[R++],j=D.tag,ae=c[R++],Pe=h[ae];if((j!==5&&j!==26&&j!==27||!fl(D))&&(sl(D,Pe)&&(b.push(Zc(Pe)),ae++,ae>y&&(y=ae)),ae<h.length))for(D=D.child;D!==null;)c.push(D,ae),D=D.sibling}if(y<h.length){for(c=[];y<h.length;y++)c.push(Zc(h[y]));return`findAllNodes was able to match part of the selector:
  `+(b.join(" > ")+`

No matching component was found for:
  `)+c.join(" > ")}return null},bn.getPublicRootInstance=function(c){if(c=c.current,!c.child)return null;switch(c.child.tag){case 27:case 5:return ru(c.child.stateNode);default:return c.child.stateNode}},bn.injectIntoDevTools=function(){var c={bundleType:0,version:Pm,rendererPackageName:Sh,currentDispatcherRef:Zt,reconcilerVersion:"19.2.0"};if(iu!==null&&(c.rendererConfig=iu),typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u")c=!1;else{var h=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(h.isDisabled||!h.supportsFiber)c=!0;else{try{cc=h.inject(c),fs=h}catch{}c=!!h.checkDCE}}return c},bn.isAlreadyRendering=function(){return(Rn&6)!==0},bn.observeVisibleRects=function(c,h,y,b){if(!or)throw Error(r(363));c=os(c,h);var R=dd(c,y,b).disconnect;return{disconnect:function(){R()}}},bn.shouldError=function(){return null},bn.shouldSuspend=function(){return!1},bn.startHostTransition=function(c,h,y,b){if(c.tag!==5)throw Error(r(476));var R=wv(c).queue;Sv(c,R,h,rc,y===null?i:function(){var D=wv(c);return D.next===null&&(D=c.alternate.memoizedState),ah(c,D.next.queue,{},yi()),y(b)})},bn.updateContainer=function(c,h,y,b){var R=h.current,D=yi();return Dm(R,D,c,h,y,b),D},bn.updateContainerSync=function(c,h,y,b){return Dm(h.current,2,c,h,y,b),2},bn},n.exports.default=n.exports,Object.defineProperty(n.exports,"__esModule",{value:!0})})(vN)),vN.exports}var _N;function nY(){return _N||(_N=1,gN.exports=tY()),gN.exports}var iY=nY();const rY=eY(iY);function sY(n){const e=rY(n);return e.injectIntoDevTools(),e}const dL=0,Wp={},aY=/^three(?=[A-Z])/,xS=n=>`${n[0].toUpperCase()}${n.slice(1)}`;let oY=0;const lY=n=>typeof n=="function";function pL(n){if(lY(n)){const e=`${oY++}`;return Wp[e]=n,e}else Object.assign(Wp,n)}function mL(n,e){const t=xS(n),i=Wp[t];if(n!=="primitive"&&!i)throw new Error(`R3F: ${t} is not part of the THREE namespace! Did you forget to extend? See: https://docs.pmnd.rs/react-three-fiber/api/objects#using-3rd-party-objects-declaratively`);if(n==="primitive"&&!e.object)throw new Error("R3F: Primitives without 'object' are invalid!");if(e.args!==void 0&&!Array.isArray(e.args))throw new Error("R3F: The args prop must be an array!")}function cY(n,e,t){var i;return n=xS(n)in Wp?n:n.replace(aY,""),mL(n,e),n==="primitive"&&(i=e.object)!=null&&i.__r3f&&delete e.object.__r3f,xb(e.object,t,n,e)}function uY(n){if(!n.isHidden){var e;n.props.attach&&(e=n.parent)!=null&&e.object?Sb(n.parent,n):ks(n.object)&&(n.object.visible=!1),n.isHidden=!0,nm(n)}}function gL(n){if(n.isHidden){var e;n.props.attach&&(e=n.parent)!=null&&e.object?bb(n.parent,n):ks(n.object)&&n.props.visible!==!1&&(n.object.visible=!0),n.isHidden=!1,nm(n)}}function DT(n,e,t){const i=e.root.getState();if(!(!n.parent&&n.object!==i.scene)){if(!e.object){var r,s;const o=Wp[xS(e.type)];e.object=(r=e.props.object)!=null?r:new o(...(s=e.props.args)!=null?s:[]),e.object.__r3f=e}if(Nl(e.object,e.props),e.props.attach)bb(n,e);else if(ks(e.object)&&ks(n.object)){const o=n.object.children.indexOf(t?.object);if(t&&o!==-1){const u=n.object.children.indexOf(e.object);if(u!==-1){n.object.children.splice(u,1);const f=u<o?o-1:o;n.object.children.splice(f,0,e.object)}else e.object.parent=n.object,n.object.children.splice(o,0,e.object),e.object.dispatchEvent({type:"added"}),n.object.dispatchEvent({type:"childadded",child:e.object})}else n.object.add(e.object)}for(const o of e.children)DT(e,o);nm(e)}}function Nw(n,e){e&&(e.parent=n,n.children.push(e),DT(n,e))}function xN(n,e,t){if(!e||!t)return;e.parent=n;const i=n.children.indexOf(t);i!==-1?n.children.splice(i,0,e):n.children.push(e),DT(n,e,t)}function vL(n){if(typeof n.dispose=="function"){const e=()=>{try{n.dispose()}catch{}};typeof IS_REACT_ACT_ENVIRONMENT<"u"?e():zM.unstable_scheduleCallback(zM.unstable_IdlePriority,e)}}function VM(n,e,t){if(!e)return;e.parent=null;const i=n.children.indexOf(e);i!==-1&&n.children.splice(i,1),e.props.attach?Sb(n,e):ks(e.object)&&ks(n.object)&&(n.object.remove(e.object),W$(aL(e),e.object));const r=e.props.dispose!==null&&t!==!1;for(let s=e.children.length-1;s>=0;s--){const o=e.children[s];VM(e,o,r)}e.children.length=0,delete e.object.__r3f,r&&e.type!=="primitive"&&e.object.type!=="Scene"&&vL(e.object),t===void 0&&nm(e)}function hY(n,e){for(const t of[n,n.alternate])if(t!==null)if(typeof t.ref=="function"){t.refCleanup==null||t.refCleanup();const i=t.ref(e);typeof i=="function"&&(t.refCleanup=i)}else t.ref&&(t.ref.current=e)}const mx=[];function fY(){for(const[t]of mx){const i=t.parent;if(i){t.props.attach?Sb(i,t):ks(t.object)&&ks(i.object)&&i.object.remove(t.object);for(const r of t.children)r.props.attach?Sb(t,r):ks(r.object)&&ks(t.object)&&t.object.remove(r.object)}t.isHidden&&gL(t),t.object.__r3f&&delete t.object.__r3f,t.type!=="primitive"&&vL(t.object)}for(const[t,i,r]of mx){t.props=i;const s=t.parent;if(s){var n,e;const o=Wp[xS(t.type)];t.object=(n=t.props.object)!=null?n:new o(...(e=t.props.args)!=null?e:[]),t.object.__r3f=t,hY(r,t.object),Nl(t.object,t.props),t.props.attach?bb(s,t):ks(t.object)&&ks(s.object)&&s.object.add(t.object);for(const u of t.children)u.props.attach?bb(t,u):ks(u.object)&&ks(t.object)&&t.object.add(u.object);nm(t)}}mx.length=0}const Dw=()=>{},bN={};let ix=dL;const dY=0,pY=4,wb=sY({isPrimaryRenderer:!1,warnsIfNotActing:!1,supportsMutation:!0,supportsPersistence:!1,supportsHydration:!1,createInstance:cY,removeChild:VM,appendChild:Nw,appendInitialChild:Nw,insertBefore:xN,appendChildToContainer(n,e){const t=n.getState().scene.__r3f;!e||!t||Nw(t,e)},removeChildFromContainer(n,e){const t=n.getState().scene.__r3f;!e||!t||VM(t,e)},insertInContainerBefore(n,e,t){const i=n.getState().scene.__r3f;!e||!t||!i||xN(i,e,t)},getRootHostContext:()=>bN,getChildHostContext:()=>bN,commitUpdate(n,e,t,i,r){var s,o,u;mL(e,i);let f=!1;if((n.type==="primitive"&&t.object!==i.object||((s=i.args)==null?void 0:s.length)!==((o=t.args)==null?void 0:o.length)||(u=i.args)!=null&&u.some((m,v)=>{var _;return m!==((_=t.args)==null?void 0:_[v])}))&&(f=!0),f)mx.push([n,{...i},r]);else{const m=H$(n,i);Object.keys(m).length&&(Object.assign(n.props,m),Nl(n.object,m))}(r.sibling===null||(r.flags&pY)===dY)&&fY()},finalizeInitialChildren:()=>!1,commitMount(){},getPublicInstance:n=>n?.object,prepareForCommit:()=>null,preparePortalMount:n=>xb(n.getState().scene,n,"",{}),resetAfterCommit:()=>{},shouldSetTextContent:()=>!1,clearContainer:()=>!1,hideInstance:uY,unhideInstance:gL,createTextInstance:Dw,hideTextInstance:Dw,unhideTextInstance:Dw,scheduleTimeout:typeof setTimeout=="function"?setTimeout:void 0,cancelTimeout:typeof clearTimeout=="function"?clearTimeout:void 0,noTimeout:-1,getInstanceFromNode:()=>null,beforeActiveInstanceBlur(){},afterActiveInstanceBlur(){},detachDeletedInstance(){},prepareScopeUpdate(){},getInstanceFromScope:()=>null,shouldAttemptEagerTransition:()=>!1,trackSchedulerEvent:()=>{},resolveEventType:()=>null,resolveEventTimeStamp:()=>-1.1,requestPostPaintCallback(){},maySuspendCommit:()=>!1,preloadInstance:()=>!0,suspendInstance(){},waitForCommitToBeReady:()=>null,NotPendingTransition:null,HostTransitionContext:K.createContext(null),setCurrentUpdatePriority(n){ix=n},getCurrentUpdatePriority(){return ix},resolveUpdatePriority(){var n;if(ix!==dL)return ix;switch(typeof window<"u"&&((n=window.event)==null?void 0:n.type)){case"click":case"contextmenu":case"dblclick":case"pointercancel":case"pointerdown":case"pointerup":return J$;case"pointermove":case"pointerout":case"pointerover":case"pointerenter":case"pointerleave":case"wheel":return Z$;default:return K$}},resetFormInstance(){},rendererPackageName:"@react-three/fiber",rendererVersion:Q$.version,applyViewTransitionName(n,e,t){},restoreViewTransitionName(n,e){},cancelViewTransitionName(n,e,t){},cancelRootViewTransitionName(n){},restoreRootViewTransitionName(n){},InstanceMeasurement:null,measureInstance:n=>null,wasInstanceInViewport:n=>!0,hasInstanceChanged:(n,e)=>!1,hasInstanceAffectedParent:(n,e)=>!1,suspendOnActiveViewTransition(n,e){},startGestureTransition:()=>null,startViewTransition:()=>null,stopViewTransition(n){},createViewTransitionInstance:n=>null,getCurrentGestureOffset(n){throw new Error("startGestureTransition is not yet supported in react-three-fiber.")},cloneMutableInstance(n,e){return n},cloneMutableTextInstance(n){return n},cloneRootViewTransitionContainer(n){throw new Error("Not implemented.")},removeRootViewTransitionClone(n,e){throw new Error("Not implemented.")},createFragmentInstance:n=>null,updateFragmentInstanceFiber(n,e){},commitNewChildToFragmentInstance(n,e){},deleteChildFromFragmentInstance(n,e){},measureClonedInstance:n=>null,maySuspendCommitOnUpdate:(n,e,t)=>!1,maySuspendCommitInSyncRender:(n,e)=>!1,startSuspendingCommit:()=>null,getSuspendedCommitReason:(n,e)=>null}),Af=new Map,dp={objects:"shallow",strict:!1};function mY(n,e){if(!e&&typeof HTMLCanvasElement<"u"&&n instanceof HTMLCanvasElement&&n.parentElement){const{width:t,height:i,top:r,left:s}=n.parentElement.getBoundingClientRect();return{width:t,height:i,top:r,left:s}}else if(!e&&typeof OffscreenCanvas<"u"&&n instanceof OffscreenCanvas)return{width:n.width,height:n.height,top:0,left:0};return{width:0,height:0,top:0,left:0,...e}}function gY(n){const e=Af.get(n),t=e?.fiber,i=e?.store;e&&console.warn("R3F.createRoot should only be called once!");const r=typeof reportError=="function"?reportError:console.error,s=i||X$(jM,wN),o=t||wb.createContainer(s,Y$,null,!1,null,"",r,r,r,null);e||Af.set(n,{fiber:o,store:s});let u,f,p=!1,m=null;return{async configure(v={}){let _;m=new Promise(X=>_=X);let{gl:x,size:S,scene:A,events:E,onCreated:M,shadows:C=!1,linear:N=!1,flat:I=!1,legacy:U=!1,orthographic:L=!1,frameloop:F="always",dpr:H=[1,2],performance:P,raycaster:k,camera:Y,onPointerMissed:ie}=v,te=s.getState(),le=te.gl;if(!te.gl){const X={canvas:n,powerPreference:"high-performance",antialias:!0,alpha:!0},ce=typeof x=="function"?await x(X):x;pN(ce)?le=ce:le=new ET({...X,...x}),te.set({gl:le})}let de=te.raycaster;de||te.set({raycaster:de=new wT});const{params:Z,...Q}=k||{};if(Ui.equ(Q,de,dp)||Nl(de,{...Q}),Ui.equ(Z,de.params,dp)||Nl(de,{params:{...de.params,...Z}}),!te.camera||te.camera===f&&!Ui.equ(f,Y,dp)){f=Y;const X=Y?.isCamera,ce=X?Y:L?new If(0,0,0,0,.1,1e3):new Hr(75,0,.1,1e3);X||(ce.position.z=5,Y&&(Nl(ce,Y),ce.manual||("aspect"in Y||"left"in Y||"right"in Y||"bottom"in Y||"top"in Y)&&(ce.manual=!0,ce.updateProjectionMatrix())),!te.camera&&!(Y!=null&&Y.rotation)&&ce.lookAt(0,0,0)),te.set({camera:ce}),de.camera=ce}if(!te.scene){let X;A!=null&&A.isScene?(X=A,xb(X,s,"",{})):(X=new cv,xb(X,s,"",{}),A&&Nl(X,A)),te.set({scene:X})}E&&!te.events.handlers&&te.set({events:E(s)});const ve=mY(n,S);if(Ui.equ(ve,te.size,dp)||te.setSize(ve.width,ve.height,ve.top,ve.left),H&&te.viewport.dpr!==lL(H)&&te.setDpr(H),te.frameloop!==F&&te.setFrameloop(F),te.onPointerMissed||te.set({onPointerMissed:ie}),P&&!Ui.equ(P,te.performance,dp)&&te.set(X=>({performance:{...X.performance,...P}})),!te.xr){var Te;const X=(Be,mt)=>{const ge=s.getState();ge.frameloop!=="never"&&wN(Be,!0,ge,mt)},ce=()=>{const Be=s.getState();Be.gl.xr.enabled=Be.gl.xr.isPresenting,Be.gl.xr.setAnimationLoop(Be.gl.xr.isPresenting?X:null),Be.gl.xr.isPresenting||jM(Be)},xe={connect(){const Be=s.getState().gl;Be.xr.addEventListener("sessionstart",ce),Be.xr.addEventListener("sessionend",ce)},disconnect(){const Be=s.getState().gl;Be.xr.removeEventListener("sessionstart",ce),Be.xr.removeEventListener("sessionend",ce)}};typeof((Te=le.xr)==null?void 0:Te.addEventListener)=="function"&&xe.connect(),te.set({xr:xe})}if(le.shadowMap){const X=le.shadowMap.enabled,ce=le.shadowMap.type;if(le.shadowMap.enabled=!!C,Ui.boo(C))le.shadowMap.type=a0;else if(Ui.str(C)){var we;const xe={basic:hP,percentage:Rp,soft:a0,variance:df};le.shadowMap.type=(we=xe[C])!=null?we:a0}else Ui.obj(C)&&Object.assign(le.shadowMap,C);(X!==le.shadowMap.enabled||ce!==le.shadowMap.type)&&(le.shadowMap.needsUpdate=!0)}return Hn.enabled=!U,p||(le.outputColorSpace=N?Yo:rs,le.toneMapping=I?lo:kb),te.legacy!==U&&te.set(()=>({legacy:U})),te.linear!==N&&te.set(()=>({linear:N})),te.flat!==I&&te.set(()=>({flat:I})),x&&!Ui.fun(x)&&!pN(x)&&!Ui.equ(x,le,dp)&&Nl(le,x),u=M,p=!0,_(),this},render(v){return!p&&!m&&this.configure(),m.then(()=>{wb.updateContainer(V.jsx(vY,{store:s,children:v,onCreated:u,rootElement:n}),o,null,()=>{})}),s},unmount(){yL(n)}}}function vY({store:n,children:e,onCreated:t,rootElement:i}){return vv(()=>{const r=n.getState();r.set(s=>({internal:{...s.internal,active:!0}})),t&&t(r),n.getState().events.connected||r.events.connect==null||r.events.connect(i)},[]),V.jsx(RT.Provider,{value:n,children:e})}function yL(n,e){const t=Af.get(n),i=t?.fiber;if(i){const r=t?.store.getState();r&&(r.internal.active=!1),wb.updateContainer(null,i,null,()=>{r&&setTimeout(()=>{try{var s,o,u,f;r.events.disconnect==null||r.events.disconnect(),(s=r.gl)==null||(o=s.renderLists)==null||o.dispose==null||o.dispose(),(u=r.gl)==null||u.forceContextLoss==null||u.forceContextLoss(),(f=r.gl)!=null&&f.xr&&r.xr.disconnect(),z$(r.scene),Af.delete(n)}catch{}},500)})}}function yY(n,e,t){return V.jsx(_Y,{children:n,container:e,state:t})}function _Y({state:n={},children:e,container:t}){const{events:i,size:r,...s}=n,o=NT(),[u]=K.useState(()=>new wT),[f]=K.useState(()=>new Ye),p=CT((v,_)=>{let x;if(_.camera&&r){const S=_.camera;x=v.viewport.getCurrentViewport(S,new J,r),S!==v.camera&&uL(S,r)}return{...v,..._,scene:t,raycaster:u,pointer:f,mouse:f,previousRoot:o,events:{...v.events,..._.events,...i},size:{...v.size,...r},viewport:{...v.viewport,...x},setEvents:S=>_.set(A=>({...A,events:{...A.events,...S}}))}}),m=K.useMemo(()=>{const v=eL((x,S)=>({...s,set:x,get:S})),_=x=>v.setState(S=>p.current(x,S));return _(o.getState()),o.subscribe(_),v},[o,t]);return V.jsx(V.Fragment,{children:wb.createPortal(V.jsx(RT.Provider,{value:m,children:e}),m,null)})}const xY=new Set,bY=new Set,SY=new Set;function Iw(n,e){if(n.size)for(const{callback:t}of n.values())t(e)}function m0(n,e){switch(n){case"before":return Iw(xY,e);case"after":return Iw(bY,e);case"tail":return Iw(SY,e)}}let Pw,Ow;function HM(n,e,t){let i=e.clock.getDelta();e.frameloop==="never"&&typeof n=="number"&&(i=n-e.clock.elapsedTime,e.clock.oldTime=e.clock.elapsedTime,e.clock.elapsedTime=n),Pw=e.internal.subscribers;for(let r=0;r<Pw.length;r++)Ow=Pw[r],Ow.ref.current(Ow.store.getState(),i,t);return!e.internal.priority&&e.gl.render&&e.gl.render(e.scene,e.camera),e.internal.frames=Math.max(0,e.internal.frames-1),e.frameloop==="always"?1:e.internal.frames}let Mb=!1,GM=!1,Lw,SN,pp;function _L(n){SN=requestAnimationFrame(_L),Mb=!0,Lw=0,m0("before",n),GM=!0;for(const t of Af.values()){var e;pp=t.store.getState(),pp.internal.active&&(pp.frameloop==="always"||pp.internal.frames>0)&&!((e=pp.gl.xr)!=null&&e.isPresenting)&&(Lw+=HM(n,pp))}if(GM=!1,m0("after",n),Lw===0)return m0("tail",n),Mb=!1,cancelAnimationFrame(SN)}function jM(n,e=1){var t;if(!n)return Af.forEach(i=>jM(i.store.getState(),e));(t=n.gl.xr)!=null&&t.isPresenting||!n.internal.active||n.frameloop==="never"||(e>1?n.internal.frames=Math.min(60,n.internal.frames+e):GM?n.internal.frames=2:n.internal.frames=1,Mb||(Mb=!0,requestAnimationFrame(_L)))}function wN(n,e=!0,t,i){if(e&&m0("before",n),t)HM(n,t,i);else for(const r of Af.values())HM(n,r.store.getState());e&&m0("after",n)}const Uw={onClick:["click",!1],onContextMenu:["contextmenu",!1],onDoubleClick:["dblclick",!1],onWheel:["wheel",!0],onPointerDown:["pointerdown",!0],onPointerUp:["pointerup",!0],onPointerLeave:["pointerleave",!0],onPointerMove:["pointermove",!0],onPointerCancel:["pointercancel",!0],onLostPointerCapture:["lostpointercapture",!0]};function wY(n){const{handlePointer:e}=q$(n);return{priority:1,enabled:!0,compute(t,i,r){i.pointer.set(t.offsetX/i.size.width*2-1,-(t.offsetY/i.size.height)*2+1),i.raycaster.setFromCamera(i.pointer,i.camera)},connected:void 0,handlers:Object.keys(Uw).reduce((t,i)=>({...t,[i]:e(i)}),{}),update:()=>{var t;const{events:i,internal:r}=n.getState();(t=r.lastEvent)!=null&&t.current&&i.handlers&&i.handlers.onPointerMove(r.lastEvent.current)},connect:t=>{const{set:i,events:r}=n.getState();if(r.disconnect==null||r.disconnect(),i(s=>({events:{...s.events,connected:t}})),r.handlers)for(const s in r.handlers){const o=r.handlers[s],[u,f]=Uw[s];t.addEventListener(u,o,{passive:f})}},disconnect:()=>{const{set:t,events:i}=n.getState();if(i.connected){if(i.handlers)for(const r in i.handlers){const s=i.handlers[r],[o]=Uw[r];i.connected.removeEventListener(o,s)}t(r=>({events:{...r.events,connected:void 0}}))}}}}function MN(n,e){let t;return(...i)=>{window.clearTimeout(t),t=window.setTimeout(()=>n(...i),e)}}function MY({debounce:n,scroll:e,polyfill:t,offsetSize:i}={debounce:0,scroll:!1,offsetSize:!1}){const r=t||(typeof window>"u"?class{}:window.ResizeObserver);if(!r)throw new Error("This browser does not support ResizeObserver out of the box. See: https://github.com/react-spring/react-use-measure/#resize-observer-polyfills");const[s,o]=K.useState({left:0,top:0,width:0,height:0,bottom:0,right:0,x:0,y:0}),u=K.useRef({element:null,scrollContainers:null,resizeObserver:null,lastBounds:s,orientationHandler:null}),f=n?typeof n=="number"?n:n.scroll:null,p=n?typeof n=="number"?n:n.resize:null,m=K.useRef(!1);K.useEffect(()=>(m.current=!0,()=>{m.current=!1}));const[v,_,x]=K.useMemo(()=>{const M=()=>{if(!u.current.element)return;const{left:C,top:N,width:I,height:U,bottom:L,right:F,x:H,y:P}=u.current.element.getBoundingClientRect(),k={left:C,top:N,width:I,height:U,bottom:L,right:F,x:H,y:P};u.current.element instanceof HTMLElement&&i&&(k.height=u.current.element.offsetHeight,k.width=u.current.element.offsetWidth),Object.freeze(k),m.current&&!CY(u.current.lastBounds,k)&&o(u.current.lastBounds=k)};return[M,p?MN(M,p):M,f?MN(M,f):M]},[o,i,f,p]);function S(){u.current.scrollContainers&&(u.current.scrollContainers.forEach(M=>M.removeEventListener("scroll",x,!0)),u.current.scrollContainers=null),u.current.resizeObserver&&(u.current.resizeObserver.disconnect(),u.current.resizeObserver=null),u.current.orientationHandler&&("orientation"in screen&&"removeEventListener"in screen.orientation?screen.orientation.removeEventListener("change",u.current.orientationHandler):"onorientationchange"in window&&window.removeEventListener("orientationchange",u.current.orientationHandler))}function A(){u.current.element&&(u.current.resizeObserver=new r(x),u.current.resizeObserver.observe(u.current.element),e&&u.current.scrollContainers&&u.current.scrollContainers.forEach(M=>M.addEventListener("scroll",x,{capture:!0,passive:!0})),u.current.orientationHandler=()=>{x()},"orientation"in screen&&"addEventListener"in screen.orientation?screen.orientation.addEventListener("change",u.current.orientationHandler):"onorientationchange"in window&&window.addEventListener("orientationchange",u.current.orientationHandler))}const E=M=>{!M||M===u.current.element||(S(),u.current.element=M,u.current.scrollContainers=xL(M),A())};return TY(x,!!e),EY(_),K.useEffect(()=>{S(),A()},[e,x,_]),K.useEffect(()=>S,[]),[E,s,v]}function EY(n){K.useEffect(()=>{const e=n;return window.addEventListener("resize",e),()=>{window.removeEventListener("resize",e)}},[n])}function TY(n,e){K.useEffect(()=>{if(e){const t=n;return window.addEventListener("scroll",t,{capture:!0,passive:!0}),()=>{window.removeEventListener("scroll",t,!0)}}},[n,e])}function xL(n){const e=[];if(!n||n===document.body)return e;const{overflow:t,overflowX:i,overflowY:r}=window.getComputedStyle(n);return[t,i,r].some(s=>s==="auto"||s==="scroll")&&e.push(n),[...e,...xL(n.parentElement)]}const AY=["x","y","top","bottom","left","right","width","height"],CY=(n,e)=>AY.every(t=>n[t]===e[t]);function RY({ref:n,children:e,fallback:t,resize:i,style:r,gl:s,events:o=wY,eventSource:u,eventPrefix:f,shadows:p,linear:m,flat:v,legacy:_,orthographic:x,frameloop:S,dpr:A,performance:E,raycaster:M,camera:C,scene:N,onPointerMissed:I,onCreated:U,...L}){K.useMemo(()=>pL(p$),[]);const F=L$(),[H,P]=MY({scroll:!0,debounce:{scroll:50,resize:0},...i}),k=K.useRef(null),Y=K.useRef(null);K.useImperativeHandle(n,()=>k.current);const ie=CT(I),[te,le]=K.useState(!1),[de,Z]=K.useState(!1);if(te)throw te;if(de)throw de;const Q=K.useRef(null);vv(()=>{const Te=k.current;if(P.width>0&&P.height>0&&Te){Q.current||(Q.current=gY(Te));async function we(){await Q.current.configure({gl:s,scene:N,events:o,shadows:p,linear:m,flat:v,legacy:_,orthographic:x,frameloop:S,dpr:A,performance:E,raycaster:M,camera:C,size:P,onPointerMissed:(...X)=>ie.current==null?void 0:ie.current(...X),onCreated:X=>{X.events.connect==null||X.events.connect(u?P$(u)?u.current:u:Y.current),f&&X.setEvents({compute:(ce,xe)=>{const Be=ce[f+"X"],mt=ce[f+"Y"];xe.pointer.set(Be/xe.size.width*2-1,-(mt/xe.size.height)*2+1),xe.raycaster.setFromCamera(xe.pointer,xe.camera)}}),U?.(X)}}),Q.current.render(V.jsx(F,{children:V.jsx(k$,{set:Z,children:V.jsx(K.Suspense,{fallback:V.jsx(U$,{set:le}),children:e??null})})}))}we()}}),K.useEffect(()=>{const Te=k.current;if(Te)return()=>yL(Te)},[]);const ve=u?"none":"auto";return V.jsx("div",{ref:Y,style:{position:"relative",width:"100%",height:"100%",overflow:"hidden",pointerEvents:ve,...r},...L,children:V.jsx("div",{ref:H,style:{width:"100%",height:"100%"},children:V.jsx("canvas",{ref:k,style:{display:"block"},children:t})})})}function NY(n){return V.jsx(rL,{children:V.jsx(RY,{...n})})}const DY=n=>n;function IY(n,e=DY){const t=so.useSyncExternalStore(n.subscribe,so.useCallback(()=>e(n.getState()),[n,e]),so.useCallback(()=>e(n.getInitialState()),[n,e]));return so.useDebugValue(t),t}const EN=n=>{const e=QO(n),t=i=>IY(e,i);return Object.assign(t,e),t},PY=(n=>n?EN(n):EN);let Wg=0;const OY=PY(n=>(Tp.onStart=(e,t,i)=>{n({active:!0,item:e,loaded:t,total:i,progress:(t-Wg)/(i-Wg)*100})},Tp.onLoad=()=>{n({active:!1})},Tp.onError=e=>n(t=>({errors:[...t.errors,e]})),Tp.onProgress=(e,t,i)=>{t===i&&(Wg=i),n({active:!0,item:e,loaded:t,total:i,progress:(t-Wg)/(i-Wg)*100||100})},{errors:[],active:!1,progress:0,item:"",loaded:0,total:0})),bL=parseInt(Kp.replace(/\D+/g,""));var ro=Uint8Array,Gu=Uint16Array,WM=Uint32Array,SL=new ro([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),wL=new ro([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),LY=new ro([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),ML=function(n,e){for(var t=new Gu(31),i=0;i<31;++i)t[i]=e+=1<<n[i-1];for(var r=new WM(t[30]),i=1;i<30;++i)for(var s=t[i];s<t[i+1];++s)r[s]=s-t[i]<<5|i;return[t,r]},EL=ML(SL,2),TL=EL[0],UY=EL[1];TL[28]=258,UY[258]=28;var kY=ML(wL,0),BY=kY[0],qM=new Gu(32768);for(var Ni=0;Ni<32768;++Ni){var Iu=(Ni&43690)>>>1|(Ni&21845)<<1;Iu=(Iu&52428)>>>2|(Iu&13107)<<2,Iu=(Iu&61680)>>>4|(Iu&3855)<<4,qM[Ni]=((Iu&65280)>>>8|(Iu&255)<<8)>>>1}var g0=(function(n,e,t){for(var i=n.length,r=0,s=new Gu(e);r<i;++r)++s[n[r]-1];var o=new Gu(e);for(r=0;r<e;++r)o[r]=o[r-1]+s[r-1]<<1;var u;if(t){u=new Gu(1<<e);var f=15-e;for(r=0;r<i;++r)if(n[r])for(var p=r<<4|n[r],m=e-n[r],v=o[n[r]-1]++<<m,_=v|(1<<m)-1;v<=_;++v)u[qM[v]>>>f]=p}else for(u=new Gu(i),r=0;r<i;++r)n[r]&&(u[r]=qM[o[n[r]-1]++]>>>15-n[r]);return u}),yv=new ro(288);for(var Ni=0;Ni<144;++Ni)yv[Ni]=8;for(var Ni=144;Ni<256;++Ni)yv[Ni]=9;for(var Ni=256;Ni<280;++Ni)yv[Ni]=7;for(var Ni=280;Ni<288;++Ni)yv[Ni]=8;var AL=new ro(32);for(var Ni=0;Ni<32;++Ni)AL[Ni]=5;var zY=g0(yv,9,1),FY=g0(AL,5,1),kw=function(n){for(var e=n[0],t=1;t<n.length;++t)n[t]>e&&(e=n[t]);return e},ko=function(n,e,t){var i=e/8|0;return(n[i]|n[i+1]<<8)>>(e&7)&t},Bw=function(n,e){var t=e/8|0;return(n[t]|n[t+1]<<8|n[t+2]<<16)>>(e&7)},VY=function(n){return(n/8|0)+(n&7&&1)},HY=function(n,e,t){(t==null||t>n.length)&&(t=n.length);var i=new(n instanceof Gu?Gu:n instanceof WM?WM:ro)(t-e);return i.set(n.subarray(e,t)),i},GY=function(n,e,t){var i=n.length;if(!i||t&&!t.l&&i<5)return e||new ro(0);var r=!e||t,s=!t||t.i;t||(t={}),e||(e=new ro(i*3));var o=function(ge){var Re=e.length;if(ge>Re){var rt=new ro(Math.max(Re*2,ge));rt.set(e),e=rt}},u=t.f||0,f=t.p||0,p=t.b||0,m=t.l,v=t.d,_=t.m,x=t.n,S=i*8;do{if(!m){t.f=u=ko(n,f,1);var A=ko(n,f+1,3);if(f+=3,A)if(A==1)m=zY,v=FY,_=9,x=5;else if(A==2){var N=ko(n,f,31)+257,I=ko(n,f+10,15)+4,U=N+ko(n,f+5,31)+1;f+=14;for(var L=new ro(U),F=new ro(19),H=0;H<I;++H)F[LY[H]]=ko(n,f+H*3,7);f+=I*3;for(var P=kw(F),k=(1<<P)-1,Y=g0(F,P,1),H=0;H<U;){var ie=Y[ko(n,f,k)];f+=ie&15;var E=ie>>>4;if(E<16)L[H++]=E;else{var te=0,le=0;for(E==16?(le=3+ko(n,f,3),f+=2,te=L[H-1]):E==17?(le=3+ko(n,f,7),f+=3):E==18&&(le=11+ko(n,f,127),f+=7);le--;)L[H++]=te}}var de=L.subarray(0,N),Z=L.subarray(N);_=kw(de),x=kw(Z),m=g0(de,_,1),v=g0(Z,x,1)}else throw"invalid block type";else{var E=VY(f)+4,M=n[E-4]|n[E-3]<<8,C=E+M;if(C>i){if(s)throw"unexpected EOF";break}r&&o(p+M),e.set(n.subarray(E,C),p),t.b=p+=M,t.p=f=C*8;continue}if(f>S){if(s)throw"unexpected EOF";break}}r&&o(p+131072);for(var Q=(1<<_)-1,ve=(1<<x)-1,Te=f;;Te=f){var te=m[Bw(n,f)&Q],we=te>>>4;if(f+=te&15,f>S){if(s)throw"unexpected EOF";break}if(!te)throw"invalid length/literal";if(we<256)e[p++]=we;else if(we==256){Te=f,m=null;break}else{var X=we-254;if(we>264){var H=we-257,ce=SL[H];X=ko(n,f,(1<<ce)-1)+TL[H],f+=ce}var xe=v[Bw(n,f)&ve],Be=xe>>>4;if(!xe)throw"invalid distance";f+=xe&15;var Z=BY[Be];if(Be>3){var ce=wL[Be];Z+=Bw(n,f)&(1<<ce)-1,f+=ce}if(f>S){if(s)throw"unexpected EOF";break}r&&o(p+131072);for(var mt=p+X;p<mt;p+=4)e[p]=e[p-Z],e[p+1]=e[p+1-Z],e[p+2]=e[p+2-Z],e[p+3]=e[p+3-Z];p=mt}}t.l=m,t.p=Te,t.b=p,m&&(u=1,t.m=_,t.d=v,t.n=x)}while(!u);return p==e.length?e:HY(e,0,p)},jY=new ro(0),WY=function(n){if((n[0]&15)!=8||n[0]>>>4>7||(n[0]<<8|n[1])%31)throw"invalid zlib data";if(n[1]&32)throw"invalid zlib data: preset dictionaries not supported"};function rx(n,e){return GY((WY(n),n.subarray(2,-4)),e)}var qY=typeof TextDecoder<"u"&&new TextDecoder,XY=0;try{qY.decode(jY,{stream:!0}),XY=1}catch{}const $Y=n=>n&&n.isCubeTexture;class YY extends Xi{constructor(e,t){var i,r;const s=$Y(e),u=((r=s?(i=e.image[0])==null?void 0:i.width:e.image.width)!=null?r:1024)/4,f=Math.floor(Math.log2(u)),p=Math.pow(2,f),m=3*Math.max(p,112),v=4*p,_=[s?"#define ENVMAP_TYPE_CUBE":"",`#define CUBEUV_TEXEL_WIDTH ${1/m}`,`#define CUBEUV_TEXEL_HEIGHT ${1/v}`,`#define CUBEUV_MAX_MIP ${f}.0`],x=`
        varying vec3 vWorldPosition;
        void main() 
        {
            vec4 worldPosition = ( modelMatrix * vec4( position, 1.0 ) );
            vWorldPosition = worldPosition.xyz;
            
            gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );
        }
        `,S=_.join(`
`)+`
        #define ENVMAP_TYPE_CUBE_UV
        varying vec3 vWorldPosition;
        uniform float radius;
        uniform float height;
        uniform float angle;
        #ifdef ENVMAP_TYPE_CUBE
            uniform samplerCube map;
        #else
            uniform sampler2D map;
        #endif
        // From: https://www.shadertoy.com/view/4tsBD7
        float diskIntersectWithBackFaceCulling( vec3 ro, vec3 rd, vec3 c, vec3 n, float r ) 
        {
            float d = dot ( rd, n );
            
            if( d > 0.0 ) { return 1e6; }
            
            vec3  o = ro - c;
            float t = - dot( n, o ) / d;
            vec3  q = o + rd * t;
            
            return ( dot( q, q ) < r * r ) ? t : 1e6;
        }
        // From: https://www.iquilezles.org/www/articles/intersectors/intersectors.htm
        float sphereIntersect( vec3 ro, vec3 rd, vec3 ce, float ra ) 
        {
            vec3 oc = ro - ce;
            float b = dot( oc, rd );
            float c = dot( oc, oc ) - ra * ra;
            float h = b * b - c;
            
            if( h < 0.0 ) { return -1.0; }
            
            h = sqrt( h );
            
            return - b + h;
        }
        vec3 project() 
        {
            vec3 p = normalize( vWorldPosition );
            vec3 camPos = cameraPosition;
            camPos.y -= height;
            float intersection = sphereIntersect( camPos, p, vec3( 0.0 ), radius );
            if( intersection > 0.0 ) {
                
                vec3 h = vec3( 0.0, - height, 0.0 );
                float intersection2 = diskIntersectWithBackFaceCulling( camPos, p, h, vec3( 0.0, 1.0, 0.0 ), radius );
                p = ( camPos + min( intersection, intersection2 ) * p ) / radius;
            } else {
                p = vec3( 0.0, 1.0, 0.0 );
            }
            return p;
        }
        #include <common>
        #include <cube_uv_reflection_fragment>
        void main() 
        {
            vec3 projectedWorldPosition = project();
            
            #ifdef ENVMAP_TYPE_CUBE
                vec3 outcolor = textureCube( map, projectedWorldPosition ).rgb;
            #else
                vec3 direction = normalize( projectedWorldPosition );
                vec2 uv = equirectUv( direction );
                vec3 outcolor = texture2D( map, uv ).rgb;
            #endif
            gl_FragColor = vec4( outcolor, 1.0 );
            #include <tonemapping_fragment>
            #include <${bL>=154?"colorspace_fragment":"encodings_fragment"}>
        }
        `,A={map:{value:e},height:{value:t?.height||15},radius:{value:t?.radius||100}},E=new fv(1,16),M=new Ss({uniforms:A,fragmentShader:S,vertexShader:x,side:jo});super(E,M)}set radius(e){this.material.uniforms.radius.value=e}get radius(){return this.material.uniforms.radius.value}set height(e){this.material.uniforms.height.value=e}get height(){return this.material.uniforms.height.value}}class ZY extends mT{constructor(e){super(e),this.type=ir}parse(e){const o=function(H,P){switch(H){case 1:throw new Error("THREE.RGBELoader: Read Error: "+(P||""));case 2:throw new Error("THREE.RGBELoader: Write Error: "+(P||""));case 3:throw new Error("THREE.RGBELoader: Bad File Format: "+(P||""));default:case 4:throw new Error("THREE.RGBELoader: Memory Error: "+(P||""))}},v=function(H,P,k){P=P||1024;let ie=H.pos,te=-1,le=0,de="",Z=String.fromCharCode.apply(null,new Uint16Array(H.subarray(ie,ie+128)));for(;0>(te=Z.indexOf(`
`))&&le<P&&ie<H.byteLength;)de+=Z,le+=Z.length,ie+=128,Z+=String.fromCharCode.apply(null,new Uint16Array(H.subarray(ie,ie+128)));return-1<te?(H.pos+=le+te+1,de+Z.slice(0,te)):!1},_=function(H){const P=/^#\?(\S+)/,k=/^\s*GAMMA\s*=\s*(\d+(\.\d+)?)\s*$/,Y=/^\s*EXPOSURE\s*=\s*(\d+(\.\d+)?)\s*$/,ie=/^\s*FORMAT=(\S+)\s*$/,te=/^\s*\-Y\s+(\d+)\s+\+X\s+(\d+)\s*$/,le={valid:0,string:"",comments:"",programtype:"RGBE",format:"",gamma:1,exposure:1,width:0,height:0};let de,Z;for((H.pos>=H.byteLength||!(de=v(H)))&&o(1,"no header found"),(Z=de.match(P))||o(3,"bad initial token"),le.valid|=1,le.programtype=Z[1],le.string+=de+`
`;de=v(H),de!==!1;){if(le.string+=de+`
`,de.charAt(0)==="#"){le.comments+=de+`
`;continue}if((Z=de.match(k))&&(le.gamma=parseFloat(Z[1])),(Z=de.match(Y))&&(le.exposure=parseFloat(Z[1])),(Z=de.match(ie))&&(le.valid|=2,le.format=Z[1]),(Z=de.match(te))&&(le.valid|=4,le.height=parseInt(Z[1],10),le.width=parseInt(Z[2],10)),le.valid&2&&le.valid&4)break}return le.valid&2||o(3,"missing format specifier"),le.valid&4||o(3,"missing image size specifier"),le},x=function(H,P,k){const Y=P;if(Y<8||Y>32767||H[0]!==2||H[1]!==2||H[2]&128)return new Uint8Array(H);Y!==(H[2]<<8|H[3])&&o(3,"wrong scanline width");const ie=new Uint8Array(4*P*k);ie.length||o(4,"unable to allocate buffer space");let te=0,le=0;const de=4*Y,Z=new Uint8Array(4),Q=new Uint8Array(de);let ve=k;for(;ve>0&&le<H.byteLength;){le+4>H.byteLength&&o(1),Z[0]=H[le++],Z[1]=H[le++],Z[2]=H[le++],Z[3]=H[le++],(Z[0]!=2||Z[1]!=2||(Z[2]<<8|Z[3])!=Y)&&o(3,"bad rgbe scanline format");let Te=0,we;for(;Te<de&&le<H.byteLength;){we=H[le++];const ce=we>128;if(ce&&(we-=128),(we===0||Te+we>de)&&o(3,"bad scanline data"),ce){const xe=H[le++];for(let Be=0;Be<we;Be++)Q[Te++]=xe}else Q.set(H.subarray(le,le+we),Te),Te+=we,le+=we}const X=Y;for(let ce=0;ce<X;ce++){let xe=0;ie[te]=Q[ce+xe],xe+=Y,ie[te+1]=Q[ce+xe],xe+=Y,ie[te+2]=Q[ce+xe],xe+=Y,ie[te+3]=Q[ce+xe],te+=4}ve--}return ie},S=function(H,P,k,Y){const ie=H[P+3],te=Math.pow(2,ie-128)/255;k[Y+0]=H[P+0]*te,k[Y+1]=H[P+1]*te,k[Y+2]=H[P+2]*te,k[Y+3]=1},A=function(H,P,k,Y){const ie=H[P+3],te=Math.pow(2,ie-128)/255;k[Y+0]=gf.toHalfFloat(Math.min(H[P+0]*te,65504)),k[Y+1]=gf.toHalfFloat(Math.min(H[P+1]*te,65504)),k[Y+2]=gf.toHalfFloat(Math.min(H[P+2]*te,65504)),k[Y+3]=gf.toHalfFloat(1)},E=new Uint8Array(e);E.pos=0;const M=_(E),C=M.width,N=M.height,I=x(E.subarray(E.pos),C,N);let U,L,F;switch(this.type){case ki:F=I.length/4;const H=new Float32Array(F*4);for(let k=0;k<F;k++)S(I,k*4,H,k*4);U=H,L=ki;break;case ir:F=I.length/4;const P=new Uint16Array(F*4);for(let k=0;k<F;k++)A(I,k*4,P,k*4);U=P,L=ir;break;default:throw new Error("THREE.RGBELoader: Unsupported type: "+this.type)}return{width:C,height:N,data:U,header:M.string,gamma:M.gamma,exposure:M.exposure,type:L}}setDataType(e){return this.type=e,this}load(e,t,i,r){function s(o,u){switch(o.type){case ki:case ir:"colorSpace"in o?o.colorSpace="srgb-linear":o.encoding=3e3,o.minFilter=Wn,o.magFilter=Wn,o.generateMipmaps=!1,o.flipY=!0;break}t&&t(o,u)}return super.load(e,s,i,r)}}const qg=bL>=152;class KY extends mT{constructor(e){super(e),this.type=ir}parse(e){const P=Math.pow(2.7182818,2.2);function k(z,q){for(var se=0,be=0;be<65536;++be)(be==0||z[be>>3]&1<<(be&7))&&(q[se++]=be);for(var Oe=se-1;se<65536;)q[se++]=0;return Oe}function Y(z){for(var q=0;q<16384;q++)z[q]={},z[q].len=0,z[q].lit=0,z[q].p=null}const ie={l:0,c:0,lc:0};function te(z,q,se,be,Oe){for(;se<z;)q=q<<8|Ct(be,Oe),se+=8;se-=z,ie.l=q>>se&(1<<z)-1,ie.c=q,ie.lc=se}const le=new Array(59);function de(z){for(var q=0;q<=58;++q)le[q]=0;for(var q=0;q<65537;++q)le[z[q]]+=1;for(var se=0,q=58;q>0;--q){var be=se+le[q]>>1;le[q]=se,se=be}for(var q=0;q<65537;++q){var Oe=z[q];Oe>0&&(z[q]=Oe|le[Oe]++<<6)}}function Z(z,q,se,be,Oe,Ue,tt){for(var Ze=se,ft=0,ct=0;Oe<=Ue;Oe++){if(Ze.value-se.value>be)return!1;te(6,ft,ct,z,Ze);var vt=ie.l;if(ft=ie.c,ct=ie.lc,tt[Oe]=vt,vt==63){if(Ze.value-se.value>be)throw"Something wrong with hufUnpackEncTable";te(8,ft,ct,z,Ze);var lt=ie.l+6;if(ft=ie.c,ct=ie.lc,Oe+lt>Ue+1)throw"Something wrong with hufUnpackEncTable";for(;lt--;)tt[Oe++]=0;Oe--}else if(vt>=59){var lt=vt-59+2;if(Oe+lt>Ue+1)throw"Something wrong with hufUnpackEncTable";for(;lt--;)tt[Oe++]=0;Oe--}}de(tt)}function Q(z){return z&63}function ve(z){return z>>6}function Te(z,q,se,be){for(;q<=se;q++){var Oe=ve(z[q]),Ue=Q(z[q]);if(Oe>>Ue)throw"Invalid table entry";if(Ue>14){var tt=be[Oe>>Ue-14];if(tt.len)throw"Invalid table entry";if(tt.lit++,tt.p){var Ze=tt.p;tt.p=new Array(tt.lit);for(var ft=0;ft<tt.lit-1;++ft)tt.p[ft]=Ze[ft]}else tt.p=new Array(1);tt.p[tt.lit-1]=q}else if(Ue)for(var ct=0,ft=1<<14-Ue;ft>0;ft--){var tt=be[(Oe<<14-Ue)+ct];if(tt.len||tt.p)throw"Invalid table entry";tt.len=Ue,tt.lit=q,ct++}}return!0}const we={c:0,lc:0};function X(z,q,se,be){z=z<<8|Ct(se,be),q+=8,we.c=z,we.lc=q}const ce={c:0,lc:0};function xe(z,q,se,be,Oe,Ue,tt,Ze,ft,ct){if(z==q){be<8&&(X(se,be,Oe,tt),se=we.c,be=we.lc),be-=8;var vt=se>>be,vt=new Uint8Array([vt])[0];if(ft.value+vt>ct)return!1;for(var lt=Ze[ft.value-1];vt-- >0;)Ze[ft.value++]=lt}else if(ft.value<ct)Ze[ft.value++]=z;else return!1;ce.c=se,ce.lc=be}function Be(z){return z&65535}function mt(z){var q=Be(z);return q>32767?q-65536:q}const ge={a:0,b:0};function Re(z,q){var se=mt(z),be=mt(q),Oe=be,Ue=se+(Oe&1)+(Oe>>1),tt=Ue,Ze=Ue-Oe;ge.a=tt,ge.b=Ze}function rt(z,q){var se=Be(z),be=Be(q),Oe=se-(be>>1)&65535,Ue=be+Oe-32768&65535;ge.a=Ue,ge.b=Oe}function xt(z,q,se,be,Oe,Ue,tt){for(var Ze=tt<16384,ft=se>Oe?Oe:se,ct=1,vt;ct<=ft;)ct<<=1;for(ct>>=1,vt=ct,ct>>=1;ct>=1;){for(var lt=0,G=lt+Ue*(Oe-vt),ne=Ue*ct,he=Ue*vt,me=be*ct,oe=be*vt,Ve,nt,je,bt;lt<=G;lt+=he){for(var ut=lt,Ut=lt+be*(se-vt);ut<=Ut;ut+=oe){var pt=ut+me,Pt=ut+ne,fn=Pt+me;Ze?(Re(z[ut+q],z[Pt+q]),Ve=ge.a,je=ge.b,Re(z[pt+q],z[fn+q]),nt=ge.a,bt=ge.b,Re(Ve,nt),z[ut+q]=ge.a,z[pt+q]=ge.b,Re(je,bt),z[Pt+q]=ge.a,z[fn+q]=ge.b):(rt(z[ut+q],z[Pt+q]),Ve=ge.a,je=ge.b,rt(z[pt+q],z[fn+q]),nt=ge.a,bt=ge.b,rt(Ve,nt),z[ut+q]=ge.a,z[pt+q]=ge.b,rt(je,bt),z[Pt+q]=ge.a,z[fn+q]=ge.b)}if(se&ct){var Pt=ut+ne;Ze?Re(z[ut+q],z[Pt+q]):rt(z[ut+q],z[Pt+q]),Ve=ge.a,z[Pt+q]=ge.b,z[ut+q]=Ve}}if(Oe&ct)for(var ut=lt,Ut=lt+be*(se-vt);ut<=Ut;ut+=oe){var pt=ut+me;Ze?Re(z[ut+q],z[pt+q]):rt(z[ut+q],z[pt+q]),Ve=ge.a,z[pt+q]=ge.b,z[ut+q]=Ve}vt=ct,ct>>=1}return lt}function Rt(z,q,se,be,Oe,Ue,tt,Ze,ft,ct){for(var vt=0,lt=0,G=Ze,ne=Math.trunc(Oe.value+(Ue+7)/8);Oe.value<ne;)for(X(vt,lt,se,Oe),vt=we.c,lt=we.lc;lt>=14;){var he=vt>>lt-14&16383,me=q[he];if(me.len)lt-=me.len,xe(me.lit,tt,vt,lt,se,be,Oe,ft,ct,G),vt=ce.c,lt=ce.lc;else{if(!me.p)throw"hufDecode issues";var oe;for(oe=0;oe<me.lit;oe++){for(var Ve=Q(z[me.p[oe]]);lt<Ve&&Oe.value<ne;)X(vt,lt,se,Oe),vt=we.c,lt=we.lc;if(lt>=Ve&&ve(z[me.p[oe]])==(vt>>lt-Ve&(1<<Ve)-1)){lt-=Ve,xe(me.p[oe],tt,vt,lt,se,be,Oe,ft,ct,G),vt=ce.c,lt=ce.lc;break}}if(oe==me.lit)throw"hufDecode issues"}}var nt=8-Ue&7;for(vt>>=nt,lt-=nt;lt>0;){var me=q[vt<<14-lt&16383];if(me.len)lt-=me.len,xe(me.lit,tt,vt,lt,se,be,Oe,ft,ct,G),vt=ce.c,lt=ce.lc;else throw"hufDecode issues"}return!0}function hn(z,q,se,be,Oe,Ue){var tt={value:0},Ze=se.value,ft=$e(q,se),ct=$e(q,se);se.value+=4;var vt=$e(q,se);if(se.value+=4,ft<0||ft>=65537||ct<0||ct>=65537)throw"Something wrong with HUF_ENCSIZE";var lt=new Array(65537),G=new Array(16384);Y(G);var ne=be-(se.value-Ze);if(Z(z,q,se,ne,ft,ct,lt),vt>8*(be-(se.value-Ze)))throw"Something wrong with hufUncompress";Te(lt,ft,ct,G),Rt(lt,G,z,q,se,vt,ct,Ue,Oe,tt)}function En(z,q,se){for(var be=0;be<se;++be)q[be]=z[q[be]]}function $t(z){for(var q=1;q<z.length;q++){var se=z[q-1]+z[q]-128;z[q]=se}}function ze(z,q){for(var se=0,be=Math.floor((z.length+1)/2),Oe=0,Ue=z.length-1;!(Oe>Ue||(q[Oe++]=z[se++],Oe>Ue));)q[Oe++]=z[be++]}function Je(z){for(var q=z.byteLength,se=new Array,be=0,Oe=new DataView(z);q>0;){var Ue=Oe.getInt8(be++);if(Ue<0){var tt=-Ue;q-=tt+1;for(var Ze=0;Ze<tt;Ze++)se.push(Oe.getUint8(be++))}else{var tt=Ue;q-=2;for(var ft=Oe.getUint8(be++),Ze=0;Ze<tt+1;Ze++)se.push(ft)}}return se}function He(z,q,se,be,Oe,Ue){var pt=new DataView(Ue.buffer),tt=se[z.idx[0]].width,Ze=se[z.idx[0]].height,ft=3,ct=Math.floor(tt/8),vt=Math.ceil(tt/8),lt=Math.ceil(Ze/8),G=tt-(vt-1)*8,ne=Ze-(lt-1)*8,he={value:0},me=new Array(ft),oe=new Array(ft),Ve=new Array(ft),nt=new Array(ft),je=new Array(ft);for(let Dt=0;Dt<ft;++Dt)je[Dt]=q[z.idx[Dt]],me[Dt]=Dt<1?0:me[Dt-1]+vt*lt,oe[Dt]=new Float32Array(64),Ve[Dt]=new Uint16Array(64),nt[Dt]=new Uint16Array(vt*64);for(let Dt=0;Dt<lt;++Dt){var bt=8;Dt==lt-1&&(bt=ne);var ut=8;for(let Ht=0;Ht<vt;++Ht){Ht==vt-1&&(ut=G);for(let Mt=0;Mt<ft;++Mt)Ve[Mt].fill(0),Ve[Mt][0]=Oe[me[Mt]++],yt(he,be,Ve[Mt]),ee(Ve[Mt],oe[Mt]),Ft(oe[Mt]);St(oe);for(let Mt=0;Mt<ft;++Mt)Vt(oe[Mt],nt[Mt],Ht*64)}let at=0;for(let Ht=0;Ht<ft;++Ht){const Mt=se[z.idx[Ht]].type;for(let Gn=8*Dt;Gn<8*Dt+bt;++Gn){at=je[Ht][Gn];for(let sr=0;sr<ct;++sr){const Tn=sr*64+(Gn&7)*8;pt.setUint16(at+0*Mt,nt[Ht][Tn+0],!0),pt.setUint16(at+2*Mt,nt[Ht][Tn+1],!0),pt.setUint16(at+4*Mt,nt[Ht][Tn+2],!0),pt.setUint16(at+6*Mt,nt[Ht][Tn+3],!0),pt.setUint16(at+8*Mt,nt[Ht][Tn+4],!0),pt.setUint16(at+10*Mt,nt[Ht][Tn+5],!0),pt.setUint16(at+12*Mt,nt[Ht][Tn+6],!0),pt.setUint16(at+14*Mt,nt[Ht][Tn+7],!0),at+=16*Mt}}if(ct!=vt)for(let Gn=8*Dt;Gn<8*Dt+bt;++Gn){const sr=je[Ht][Gn]+8*ct*2*Mt,Tn=ct*64+(Gn&7)*8;for(let vi=0;vi<ut;++vi)pt.setUint16(sr+vi*2*Mt,nt[Ht][Tn+vi],!0)}}}for(var Ut=new Uint16Array(tt),pt=new DataView(Ue.buffer),Pt=0;Pt<ft;++Pt){se[z.idx[Pt]].decoded=!0;var fn=se[z.idx[Pt]].type;if(se[Pt].type==2)for(var qn=0;qn<Ze;++qn){const Dt=je[Pt][qn];for(var yn=0;yn<tt;++yn)Ut[yn]=pt.getUint16(Dt+yn*2*fn,!0);for(var yn=0;yn<tt;++yn)pt.setFloat32(Dt+yn*2*fn,Ce(Ut[yn]),!0)}}}function yt(z,q,se){for(var be,Oe=1;Oe<64;)be=q[z.value],be==65280?Oe=64:be>>8==255?Oe+=be&255:(se[Oe]=be,Oe++),z.value++}function ee(z,q){q[0]=Ce(z[0]),q[1]=Ce(z[1]),q[2]=Ce(z[5]),q[3]=Ce(z[6]),q[4]=Ce(z[14]),q[5]=Ce(z[15]),q[6]=Ce(z[27]),q[7]=Ce(z[28]),q[8]=Ce(z[2]),q[9]=Ce(z[4]),q[10]=Ce(z[7]),q[11]=Ce(z[13]),q[12]=Ce(z[16]),q[13]=Ce(z[26]),q[14]=Ce(z[29]),q[15]=Ce(z[42]),q[16]=Ce(z[3]),q[17]=Ce(z[8]),q[18]=Ce(z[12]),q[19]=Ce(z[17]),q[20]=Ce(z[25]),q[21]=Ce(z[30]),q[22]=Ce(z[41]),q[23]=Ce(z[43]),q[24]=Ce(z[9]),q[25]=Ce(z[11]),q[26]=Ce(z[18]),q[27]=Ce(z[24]),q[28]=Ce(z[31]),q[29]=Ce(z[40]),q[30]=Ce(z[44]),q[31]=Ce(z[53]),q[32]=Ce(z[10]),q[33]=Ce(z[19]),q[34]=Ce(z[23]),q[35]=Ce(z[32]),q[36]=Ce(z[39]),q[37]=Ce(z[45]),q[38]=Ce(z[52]),q[39]=Ce(z[54]),q[40]=Ce(z[20]),q[41]=Ce(z[22]),q[42]=Ce(z[33]),q[43]=Ce(z[38]),q[44]=Ce(z[46]),q[45]=Ce(z[51]),q[46]=Ce(z[55]),q[47]=Ce(z[60]),q[48]=Ce(z[21]),q[49]=Ce(z[34]),q[50]=Ce(z[37]),q[51]=Ce(z[47]),q[52]=Ce(z[50]),q[53]=Ce(z[56]),q[54]=Ce(z[59]),q[55]=Ce(z[61]),q[56]=Ce(z[35]),q[57]=Ce(z[36]),q[58]=Ce(z[48]),q[59]=Ce(z[49]),q[60]=Ce(z[57]),q[61]=Ce(z[58]),q[62]=Ce(z[62]),q[63]=Ce(z[63])}function Ft(z){const q=.5*Math.cos(.7853975),se=.5*Math.cos(3.14159/16),be=.5*Math.cos(3.14159/8),Oe=.5*Math.cos(3*3.14159/16),Ue=.5*Math.cos(5*3.14159/16),tt=.5*Math.cos(3*3.14159/8),Ze=.5*Math.cos(7*3.14159/16);for(var ft=new Array(4),ct=new Array(4),vt=new Array(4),lt=new Array(4),G=0;G<8;++G){var ne=G*8;ft[0]=be*z[ne+2],ft[1]=tt*z[ne+2],ft[2]=be*z[ne+6],ft[3]=tt*z[ne+6],ct[0]=se*z[ne+1]+Oe*z[ne+3]+Ue*z[ne+5]+Ze*z[ne+7],ct[1]=Oe*z[ne+1]-Ze*z[ne+3]-se*z[ne+5]-Ue*z[ne+7],ct[2]=Ue*z[ne+1]-se*z[ne+3]+Ze*z[ne+5]+Oe*z[ne+7],ct[3]=Ze*z[ne+1]-Ue*z[ne+3]+Oe*z[ne+5]-se*z[ne+7],vt[0]=q*(z[ne+0]+z[ne+4]),vt[3]=q*(z[ne+0]-z[ne+4]),vt[1]=ft[0]+ft[3],vt[2]=ft[1]-ft[2],lt[0]=vt[0]+vt[1],lt[1]=vt[3]+vt[2],lt[2]=vt[3]-vt[2],lt[3]=vt[0]-vt[1],z[ne+0]=lt[0]+ct[0],z[ne+1]=lt[1]+ct[1],z[ne+2]=lt[2]+ct[2],z[ne+3]=lt[3]+ct[3],z[ne+4]=lt[3]-ct[3],z[ne+5]=lt[2]-ct[2],z[ne+6]=lt[1]-ct[1],z[ne+7]=lt[0]-ct[0]}for(var he=0;he<8;++he)ft[0]=be*z[16+he],ft[1]=tt*z[16+he],ft[2]=be*z[48+he],ft[3]=tt*z[48+he],ct[0]=se*z[8+he]+Oe*z[24+he]+Ue*z[40+he]+Ze*z[56+he],ct[1]=Oe*z[8+he]-Ze*z[24+he]-se*z[40+he]-Ue*z[56+he],ct[2]=Ue*z[8+he]-se*z[24+he]+Ze*z[40+he]+Oe*z[56+he],ct[3]=Ze*z[8+he]-Ue*z[24+he]+Oe*z[40+he]-se*z[56+he],vt[0]=q*(z[he]+z[32+he]),vt[3]=q*(z[he]-z[32+he]),vt[1]=ft[0]+ft[3],vt[2]=ft[1]-ft[2],lt[0]=vt[0]+vt[1],lt[1]=vt[3]+vt[2],lt[2]=vt[3]-vt[2],lt[3]=vt[0]-vt[1],z[0+he]=lt[0]+ct[0],z[8+he]=lt[1]+ct[1],z[16+he]=lt[2]+ct[2],z[24+he]=lt[3]+ct[3],z[32+he]=lt[3]-ct[3],z[40+he]=lt[2]-ct[2],z[48+he]=lt[1]-ct[1],z[56+he]=lt[0]-ct[0]}function St(z){for(var q=0;q<64;++q){var se=z[0][q],be=z[1][q],Oe=z[2][q];z[0][q]=se+1.5747*Oe,z[1][q]=se-.1873*be-.4682*Oe,z[2][q]=se+1.8556*be}}function Vt(z,q,se){for(var be=0;be<64;++be)q[se+be]=gf.toHalfFloat(ot(z[be]))}function ot(z){return z<=1?Math.sign(z)*Math.pow(Math.abs(z),2.2):Math.sign(z)*Math.pow(P,Math.abs(z)-1)}function $(z){return new DataView(z.array.buffer,z.offset.value,z.size)}function B(z){var q=z.viewer.buffer.slice(z.offset.value,z.offset.value+z.size),se=new Uint8Array(Je(q)),be=new Uint8Array(se.length);return $t(se),ze(se,be),new DataView(be.buffer)}function fe(z){var q=z.array.slice(z.offset.value,z.offset.value+z.size),se=rx(q),be=new Uint8Array(se.length);return $t(se),ze(se,be),new DataView(be.buffer)}function Ie(z){for(var q=z.viewer,se={value:z.offset.value},be=new Uint16Array(z.width*z.scanlineBlockSize*(z.channels*z.type)),Oe=new Uint8Array(8192),Ue=0,tt=new Array(z.channels),Ze=0;Ze<z.channels;Ze++)tt[Ze]={},tt[Ze].start=Ue,tt[Ze].end=tt[Ze].start,tt[Ze].nx=z.width,tt[Ze].ny=z.lines,tt[Ze].size=z.type,Ue+=tt[Ze].nx*tt[Ze].ny*tt[Ze].size;var ft=et(q,se),ct=et(q,se);if(ct>=8192)throw"Something is wrong with PIZ_COMPRESSION BITMAP_SIZE";if(ft<=ct)for(var Ze=0;Ze<ct-ft+1;Ze++)Oe[Ze+ft]=wt(q,se);var vt=new Uint16Array(65536),lt=k(Oe,vt),G=$e(q,se);hn(z.array,q,se,G,be,Ue);for(var Ze=0;Ze<z.channels;++Ze)for(var ne=tt[Ze],he=0;he<tt[Ze].size;++he)xt(be,ne.start+he,ne.nx,ne.size,ne.ny,ne.nx*ne.size,lt);En(vt,be,Ue);for(var me=0,oe=new Uint8Array(be.buffer.byteLength),Ve=0;Ve<z.lines;Ve++)for(var nt=0;nt<z.channels;nt++){var ne=tt[nt],je=ne.nx*ne.size,bt=new Uint8Array(be.buffer,ne.end*2,je*2);oe.set(bt,me),me+=je*2,ne.end+=je}return new DataView(oe.buffer)}function Ge(z){var q=z.array.slice(z.offset.value,z.offset.value+z.size),se=rx(q);const be=z.lines*z.channels*z.width,Oe=z.type==1?new Uint16Array(be):new Uint32Array(be);let Ue=0,tt=0;const Ze=new Array(4);for(let ft=0;ft<z.lines;ft++)for(let ct=0;ct<z.channels;ct++){let vt=0;switch(z.type){case 1:Ze[0]=Ue,Ze[1]=Ze[0]+z.width,Ue=Ze[1]+z.width;for(let lt=0;lt<z.width;++lt){const G=se[Ze[0]++]<<8|se[Ze[1]++];vt+=G,Oe[tt]=vt,tt++}break;case 2:Ze[0]=Ue,Ze[1]=Ze[0]+z.width,Ze[2]=Ze[1]+z.width,Ue=Ze[2]+z.width;for(let lt=0;lt<z.width;++lt){const G=se[Ze[0]++]<<24|se[Ze[1]++]<<16|se[Ze[2]++]<<8;vt+=G,Oe[tt]=vt,tt++}break}}return new DataView(Oe.buffer)}function De(z){var q=z.viewer,se={value:z.offset.value},be=new Uint8Array(z.width*z.lines*(z.channels*z.type*2)),Oe={version:st(q,se),unknownUncompressedSize:st(q,se),unknownCompressedSize:st(q,se),acCompressedSize:st(q,se),dcCompressedSize:st(q,se),rleCompressedSize:st(q,se),rleUncompressedSize:st(q,se),rleRawSize:st(q,se),totalAcUncompressedCount:st(q,se),totalDcUncompressedCount:st(q,se),acCompression:st(q,se)};if(Oe.version<2)throw"EXRLoader.parse: "+Ms.compression+" version "+Oe.version+" is unsupported";for(var Ue=new Array,tt=et(q,se)-2;tt>0;){var Ze=Tt(q.buffer,se),ft=wt(q,se),ct=ft>>2&3,vt=(ft>>4)-1,lt=new Int8Array([vt])[0],G=wt(q,se);Ue.push({name:Ze,index:lt,type:G,compression:ct}),tt-=Ze.length+3}for(var ne=Ms.channels,he=new Array(z.channels),me=0;me<z.channels;++me){var oe=he[me]={},Ve=ne[me];oe.name=Ve.name,oe.compression=0,oe.decoded=!1,oe.type=Ve.pixelType,oe.pLinear=Ve.pLinear,oe.width=z.width,oe.height=z.lines}for(var nt={idx:new Array(3)},je=0;je<z.channels;++je)for(var oe=he[je],me=0;me<Ue.length;++me){var bt=Ue[me];oe.name==bt.name&&(oe.compression=bt.compression,bt.index>=0&&(nt.idx[bt.index]=je),oe.offset=je)}if(Oe.acCompressedSize>0)switch(Oe.acCompression){case 0:var pt=new Uint16Array(Oe.totalAcUncompressedCount);hn(z.array,q,se,Oe.acCompressedSize,pt,Oe.totalAcUncompressedCount);break;case 1:var ut=z.array.slice(se.value,se.value+Oe.totalAcUncompressedCount),Ut=rx(ut),pt=new Uint16Array(Ut.buffer);se.value+=Oe.totalAcUncompressedCount;break}if(Oe.dcCompressedSize>0){var Pt={array:z.array,offset:se,size:Oe.dcCompressedSize},fn=new Uint16Array(fe(Pt).buffer);se.value+=Oe.dcCompressedSize}if(Oe.rleRawSize>0){var ut=z.array.slice(se.value,se.value+Oe.rleCompressedSize),Ut=rx(ut),qn=Je(Ut.buffer);se.value+=Oe.rleCompressedSize}for(var yn=0,Dt=new Array(he.length),me=0;me<Dt.length;++me)Dt[me]=new Array;for(var at=0;at<z.lines;++at)for(var Ht=0;Ht<he.length;++Ht)Dt[Ht].push(yn),yn+=he[Ht].width*z.type*2;He(nt,Dt,he,pt,fn,be);for(var me=0;me<he.length;++me){var oe=he[me];if(!oe.decoded)switch(oe.compression){case 2:for(var Mt=0,Gn=0,at=0;at<z.lines;++at){for(var sr=Dt[me][Mt],Tn=0;Tn<oe.width;++Tn){for(var vi=0;vi<2*oe.type;++vi)be[sr++]=qn[Gn+vi*oe.width*oe.height];Gn++}Mt++}break;default:throw"EXRLoader.parse: unsupported channel compression"}}return new DataView(be.buffer)}function Tt(z,q){for(var se=new Uint8Array(z),be=0;se[q.value+be]!=0;)be+=1;var Oe=new TextDecoder().decode(se.slice(q.value,q.value+be));return q.value=q.value+be+1,Oe}function ht(z,q,se){var be=new TextDecoder().decode(new Uint8Array(z).slice(q.value,q.value+se));return q.value=q.value+se,be}function Lt(z,q){var se=Xe(z,q),be=$e(z,q);return[se,be]}function Yt(z,q){var se=$e(z,q),be=$e(z,q);return[se,be]}function Xe(z,q){var se=z.getInt32(q.value,!0);return q.value=q.value+4,se}function $e(z,q){var se=z.getUint32(q.value,!0);return q.value=q.value+4,se}function Ct(z,q){var se=z[q.value];return q.value=q.value+1,se}function wt(z,q){var se=z.getUint8(q.value);return q.value=q.value+1,se}const st=function(z,q){let se;return"getBigInt64"in DataView.prototype?se=Number(z.getBigInt64(q.value,!0)):se=z.getUint32(q.value+4,!0)+Number(z.getUint32(q.value,!0)<<32),q.value+=8,se};function jt(z,q){var se=z.getFloat32(q.value,!0);return q.value+=4,se}function pe(z,q){return gf.toHalfFloat(jt(z,q))}function Ce(z){var q=(z&31744)>>10,se=z&1023;return(z>>15?-1:1)*(q?q===31?se?NaN:1/0:Math.pow(2,q-15)*(1+se/1024):6103515625e-14*(se/1024))}function et(z,q){var se=z.getUint16(q.value,!0);return q.value+=2,se}function Et(z,q){return Ce(et(z,q))}function Qe(z,q,se,be){for(var Oe=se.value,Ue=[];se.value<Oe+be-1;){var tt=Tt(q,se),Ze=Xe(z,se),ft=wt(z,se);se.value+=3;var ct=Xe(z,se),vt=Xe(z,se);Ue.push({name:tt,pixelType:Ze,pLinear:ft,xSampling:ct,ySampling:vt})}return se.value+=1,Ue}function Fe(z,q){var se=jt(z,q),be=jt(z,q),Oe=jt(z,q),Ue=jt(z,q),tt=jt(z,q),Ze=jt(z,q),ft=jt(z,q),ct=jt(z,q);return{redX:se,redY:be,greenX:Oe,greenY:Ue,blueX:tt,blueY:Ze,whiteX:ft,whiteY:ct}}function gt(z,q){var se=["NO_COMPRESSION","RLE_COMPRESSION","ZIPS_COMPRESSION","ZIP_COMPRESSION","PIZ_COMPRESSION","PXR24_COMPRESSION","B44_COMPRESSION","B44A_COMPRESSION","DWAA_COMPRESSION","DWAB_COMPRESSION"],be=wt(z,q);return se[be]}function nn(z,q){var se=$e(z,q),be=$e(z,q),Oe=$e(z,q),Ue=$e(z,q);return{xMin:se,yMin:be,xMax:Oe,yMax:Ue}}function Dn(z,q){var se=["INCREASING_Y"],be=wt(z,q);return se[be]}function Ln(z,q){var se=jt(z,q),be=jt(z,q);return[se,be]}function rr(z,q){var se=jt(z,q),be=jt(z,q),Oe=jt(z,q);return[se,be,Oe]}function Lr(z,q,se,be,Oe){if(be==="string"||be==="stringvector"||be==="iccProfile")return ht(q,se,Oe);if(be==="chlist")return Qe(z,q,se,Oe);if(be==="chromaticities")return Fe(z,se);if(be==="compression")return gt(z,se);if(be==="box2i")return nn(z,se);if(be==="lineOrder")return Dn(z,se);if(be==="float")return jt(z,se);if(be==="v2f")return Ln(z,se);if(be==="v3f")return rr(z,se);if(be==="int")return Xe(z,se);if(be==="rational")return Lt(z,se);if(be==="timecode")return Yt(z,se);if(be==="preview")return se.value+=Oe,"skipped";se.value+=Oe}function Ra(z,q,se){const be={};if(z.getUint32(0,!0)!=20000630)throw"THREE.EXRLoader: provided file doesn't appear to be in OpenEXR format.";be.version=z.getUint8(4);const Oe=z.getUint8(5);be.spec={singleTile:!!(Oe&2),longName:!!(Oe&4),deepFormat:!!(Oe&8),multiPart:!!(Oe&16)},se.value=8;for(var Ue=!0;Ue;){var tt=Tt(q,se);if(tt==0)Ue=!1;else{var Ze=Tt(q,se),ft=$e(z,se),ct=Lr(z,q,se,Ze,ft);ct===void 0?console.warn(`EXRLoader.parse: skipped unknown header attribute type '${Ze}'.`):be[tt]=ct}}if((Oe&-5)!=0)throw console.error("EXRHeader:",be),"THREE.EXRLoader: provided file is currently unsupported.";return be}function Na(z,q,se,be,Oe){const Ue={size:0,viewer:q,array:se,offset:be,width:z.dataWindow.xMax-z.dataWindow.xMin+1,height:z.dataWindow.yMax-z.dataWindow.yMin+1,channels:z.channels.length,bytesPerLine:null,lines:null,inputSize:null,type:z.channels[0].pixelType,uncompress:null,getter:null,format:null,[qg?"colorSpace":"encoding"]:null};switch(z.compression){case"NO_COMPRESSION":Ue.lines=1,Ue.uncompress=$;break;case"RLE_COMPRESSION":Ue.lines=1,Ue.uncompress=B;break;case"ZIPS_COMPRESSION":Ue.lines=1,Ue.uncompress=fe;break;case"ZIP_COMPRESSION":Ue.lines=16,Ue.uncompress=fe;break;case"PIZ_COMPRESSION":Ue.lines=32,Ue.uncompress=Ie;break;case"PXR24_COMPRESSION":Ue.lines=16,Ue.uncompress=Ge;break;case"DWAA_COMPRESSION":Ue.lines=32,Ue.uncompress=De;break;case"DWAB_COMPRESSION":Ue.lines=256,Ue.uncompress=De;break;default:throw"EXRLoader.parse: "+z.compression+" is unsupported"}if(Ue.scanlineBlockSize=Ue.lines,Ue.type==1)switch(Oe){case ki:Ue.getter=Et,Ue.inputSize=2;break;case ir:Ue.getter=et,Ue.inputSize=2;break}else if(Ue.type==2)switch(Oe){case ki:Ue.getter=jt,Ue.inputSize=4;break;case ir:Ue.getter=pe,Ue.inputSize=4}else throw"EXRLoader.parse: unsupported pixelType "+Ue.type+" for "+z.compression+".";Ue.blockCount=(z.dataWindow.yMax+1)/Ue.scanlineBlockSize;for(var tt=0;tt<Ue.blockCount;tt++)st(q,be);Ue.outputChannels=Ue.channels==3?4:Ue.channels;const Ze=Ue.width*Ue.height*Ue.outputChannels;switch(Oe){case ki:Ue.byteArray=new Float32Array(Ze),Ue.channels<Ue.outputChannels&&Ue.byteArray.fill(1,0,Ze);break;case ir:Ue.byteArray=new Uint16Array(Ze),Ue.channels<Ue.outputChannels&&Ue.byteArray.fill(15360,0,Ze);break;default:console.error("THREE.EXRLoader: unsupported type: ",Oe);break}return Ue.bytesPerLine=Ue.width*Ue.inputSize*Ue.channels,Ue.outputChannels==4?Ue.format=pr:Ue.format=av,qg?Ue.colorSpace="srgb-linear":Ue.encoding=3e3,Ue}const Ws=new DataView(e),Da=new Uint8Array(e),jr={value:0},Ms=Ra(Ws,e,jr),Qt=Na(Ms,Ws,Da,jr,this.type),Ur={value:0},di={R:0,G:1,B:2,A:3,Y:0};for(let z=0;z<Qt.height/Qt.scanlineBlockSize;z++){const q=$e(Ws,jr);Qt.size=$e(Ws,jr),Qt.lines=q+Qt.scanlineBlockSize>Qt.height?Qt.height-q:Qt.scanlineBlockSize;const be=Qt.size<Qt.lines*Qt.bytesPerLine?Qt.uncompress(Qt):$(Qt);jr.value+=Qt.size;for(let Oe=0;Oe<Qt.scanlineBlockSize;Oe++){const Ue=Oe+z*Qt.scanlineBlockSize;if(Ue>=Qt.height)break;for(let tt=0;tt<Qt.channels;tt++){const Ze=di[Ms.channels[tt].name];for(let ft=0;ft<Qt.width;ft++){Ur.value=(Oe*(Qt.channels*Qt.width)+tt*Qt.width+ft)*Qt.inputSize;const ct=(Qt.height-1-Ue)*(Qt.width*Qt.outputChannels)+ft*Qt.outputChannels+Ze;Qt.byteArray[ct]=Qt.getter(be,Ur)}}}}return{header:Ms,width:Qt.width,height:Qt.height,data:Qt.byteArray,format:Qt.format,[qg?"colorSpace":"encoding"]:Qt[qg?"colorSpace":"encoding"],type:this.type}}setDataType(e){return this.type=e,this}load(e,t,i,r){function s(o,u){qg?o.colorSpace=u.colorSpace:o.encoding=u.encoding,o.minFilter=Wn,o.magFilter=Wn,o.generateMipmaps=!1,o.flipY=!1,t&&t(o,u)}return super.load(e,s,i,r)}}const JY=()=>parseInt(Kp.replace(/\D+/g,"")),QY=JY(),CL=(n,e,t)=>{let i;switch(n){case Gr:i=new Uint8ClampedArray(e*t*4);break;case ir:i=new Uint16Array(e*t*4);break;case Aa:i=new Uint32Array(e*t*4);break;case Bb:i=new Int8Array(e*t*4);break;case zb:i=new Int16Array(e*t*4);break;case sv:i=new Int32Array(e*t*4);break;case ki:i=new Float32Array(e*t*4);break;default:throw new Error("Unsupported data type")}return i};let sx;const eZ=(n,e,t,i)=>{if(sx!==void 0)return sx;const r=new Hs(1,1,i);e.setRenderTarget(r);const s=new Xi(new Qu,new Lc({color:16777215}));e.render(s,t),e.setRenderTarget(null);const o=CL(n,r.width,r.height);return e.readRenderTargetPixels(r,0,0,r.width,r.height,o),r.dispose(),s.geometry.dispose(),s.material.dispose(),sx=o[0]!==0,sx};class IT{_renderer;_rendererIsDisposable=!1;_material;_scene;_camera;_quad;_renderTarget;_width;_height;_type;_colorSpace;_supportsReadPixels=!0;constructor(e){this._width=e.width,this._height=e.height,this._type=e.type,this._colorSpace=e.colorSpace;const t={format:pr,depthBuffer:!1,stencilBuffer:!1,type:this._type,colorSpace:this._colorSpace,anisotropy:e.renderTargetOptions?.anisotropy!==void 0?e.renderTargetOptions?.anisotropy:1,generateMipmaps:e.renderTargetOptions?.generateMipmaps!==void 0?e.renderTargetOptions?.generateMipmaps:!1,magFilter:e.renderTargetOptions?.magFilter!==void 0?e.renderTargetOptions?.magFilter:Wn,minFilter:e.renderTargetOptions?.minFilter!==void 0?e.renderTargetOptions?.minFilter:Wn,samples:e.renderTargetOptions?.samples!==void 0?e.renderTargetOptions?.samples:void 0,wrapS:e.renderTargetOptions?.wrapS!==void 0?e.renderTargetOptions?.wrapS:nr,wrapT:e.renderTargetOptions?.wrapT!==void 0?e.renderTargetOptions?.wrapT:nr};if(this._material=e.material,e.renderer?this._renderer=e.renderer:(this._renderer=IT.instantiateRenderer(),this._rendererIsDisposable=!0),this._scene=new cv,this._camera=new If,this._camera.position.set(0,0,10),this._camera.left=-.5,this._camera.right=.5,this._camera.top=.5,this._camera.bottom=-.5,this._camera.updateProjectionMatrix(),!eZ(this._type,this._renderer,this._camera,t)){let i;this._type===ir&&(i=this._renderer.extensions.has("EXT_color_buffer_float")?ki:void 0),i!==void 0?(console.warn(`This browser does not support reading pixels from ${this._type} RenderTargets, switching to ${ki}`),this._type=i):(this._supportsReadPixels=!1,console.warn("This browser dos not support toArray or toDataTexture, calls to those methods will result in an error thrown"))}this._quad=new Xi(new Qu,this._material),this._quad.geometry.computeBoundingBox(),this._scene.add(this._quad),this._renderTarget=new Hs(this.width,this.height,t),this._renderTarget.texture.mapping=e.renderTargetOptions?.mapping!==void 0?e.renderTargetOptions?.mapping:qu}static instantiateRenderer(){const e=new ET;return e.setSize(128,128),e}render=()=>{this._renderer.setRenderTarget(this._renderTarget);try{this._renderer.render(this._scene,this._camera)}catch(e){throw this._renderer.setRenderTarget(null),e}this._renderer.setRenderTarget(null)};toArray(){if(!this._supportsReadPixels)throw new Error("Can't read pixels in this browser");const e=CL(this._type,this._width,this._height);return this._renderer.readRenderTargetPixels(this._renderTarget,0,0,this._width,this._height,e),e}toDataTexture(e){const t=new co(this.toArray(),this.width,this.height,pr,this._type,e?.mapping||qu,e?.wrapS||nr,e?.wrapT||nr,e?.magFilter||Wn,e?.minFilter||Wn,e?.anisotropy||1,Yo);return t.generateMipmaps=e?.generateMipmaps!==void 0?e?.generateMipmaps:!1,t}disposeOnDemandRenderer(){this._renderer.setRenderTarget(null),this._rendererIsDisposable&&(this._renderer.dispose(),this._renderer.forceContextLoss())}dispose(e){this.disposeOnDemandRenderer(),e&&this.renderTarget.dispose(),this.material instanceof Ss&&Object.values(this.material.uniforms).forEach(t=>{t.value instanceof hi&&t.value.dispose()}),Object.values(this.material).forEach(t=>{t instanceof hi&&t.dispose()}),this.material.dispose(),this._quad.geometry.dispose()}get width(){return this._width}set width(e){this._width=e,this._renderTarget.setSize(this._width,this._height)}get height(){return this._height}set height(e){this._height=e,this._renderTarget.setSize(this._width,this._height)}get renderer(){return this._renderer}get renderTarget(){return this._renderTarget}set renderTarget(e){this._renderTarget=e,this._width=e.width,this._height=e.height}get material(){return this._material}get type(){return this._type}get colorSpace(){return this._colorSpace}}class RL extends Error{}class NL extends Error{}const Xg=(n,e,t)=>{const i=new RegExp(`${e}="([^"]*)"`,"i").exec(n);if(i)return i[1];const r=new RegExp(`<${e}[^>]*>([\\s\\S]*?)</${e}>`,"i").exec(n);if(r){const s=r[1].match(/<rdf:li>([^<]*)<\/rdf:li>/g);return s&&s.length===3?s.map(o=>o.replace(/<\/?rdf:li>/g,"")):r[1].trim()}if(t!==void 0)return t;throw new Error(`Can't find ${e} in gainmap metadata`)},tZ=n=>{let e;typeof TextDecoder<"u"?e=new TextDecoder().decode(n):e=n.toString();let t=e.indexOf("<x:xmpmeta");for(;t!==-1;){const i=e.indexOf("x:xmpmeta>",t),r=e.slice(t,i+10);try{const s=Xg(r,"hdrgm:GainMapMin","0"),o=Xg(r,"hdrgm:GainMapMax"),u=Xg(r,"hdrgm:Gamma","1"),f=Xg(r,"hdrgm:OffsetSDR","0.015625"),p=Xg(r,"hdrgm:OffsetHDR","0.015625"),m=/hdrgm:HDRCapacityMin="([^"]*)"/.exec(r),v=m?m[1]:"0",_=/hdrgm:HDRCapacityMax="([^"]*)"/.exec(r);if(!_)throw new Error("Incomplete gainmap metadata");const x=_[1];return{gainMapMin:Array.isArray(s)?s.map(S=>parseFloat(S)):[parseFloat(s),parseFloat(s),parseFloat(s)],gainMapMax:Array.isArray(o)?o.map(S=>parseFloat(S)):[parseFloat(o),parseFloat(o),parseFloat(o)],gamma:Array.isArray(u)?u.map(S=>parseFloat(S)):[parseFloat(u),parseFloat(u),parseFloat(u)],offsetSdr:Array.isArray(f)?f.map(S=>parseFloat(S)):[parseFloat(f),parseFloat(f),parseFloat(f)],offsetHdr:Array.isArray(p)?p.map(S=>parseFloat(S)):[parseFloat(p),parseFloat(p),parseFloat(p)],hdrCapacityMin:parseFloat(v),hdrCapacityMax:parseFloat(x)}}catch{}t=e.indexOf("<x:xmpmeta",i)}};class nZ{options;constructor(e){this.options={debug:e&&e.debug!==void 0?e.debug:!1,extractFII:e&&e.extractFII!==void 0?e.extractFII:!0,extractNonFII:e&&e.extractNonFII!==void 0?e.extractNonFII:!0}}extract(e){return new Promise((t,i)=>{const r=this.options.debug,s=new DataView(e.buffer);if(s.getUint16(0)!==65496){i(new Error("Not a valid jpeg"));return}const o=s.byteLength;let u=2,f=0,p;for(;u<o;){if(++f>250){i(new Error(`Found no marker after ${f} loops `));return}if(s.getUint8(u)!==255){i(new Error(`Not a valid marker at offset 0x${u.toString(16)}, found: 0x${s.getUint8(u).toString(16)}`));return}if(p=s.getUint8(u+1),r&&console.log(`Marker: ${p.toString(16)}`),p===226){r&&console.log("Found APP2 marker (0xffe2)");const m=u+4;if(s.getUint32(m)===1297106432){const v=m+4;let _;if(s.getUint16(v)===18761)_=!1;else if(s.getUint16(v)===19789)_=!0;else{i(new Error("No valid endianness marker found in TIFF header"));return}if(s.getUint16(v+2,!_)!==42){i(new Error("Not valid TIFF data! (no 0x002A marker)"));return}const x=s.getUint32(v+4,!_);if(x<8){i(new Error("Not valid TIFF data! (First offset less than 8)"));return}const S=v+x,A=s.getUint16(S,!_),E=S+2;let M=0;for(let U=E;U<E+12*A;U+=12)s.getUint16(U,!_)===45057&&(M=s.getUint32(U+8,!_));const N=S+2+A*12+4,I=[];for(let U=N;U<N+M*16;U+=16){const L={MPType:s.getUint32(U,!_),size:s.getUint32(U+4,!_),dataOffset:s.getUint32(U+8,!_),dependantImages:s.getUint32(U+12,!_),start:-1,end:-1,isFII:!1};L.dataOffset?(L.start=v+L.dataOffset,L.isFII=!1):(L.start=0,L.isFII=!0),L.end=L.start+L.size,I.push(L)}if(this.options.extractNonFII&&I.length){const U=new Blob([s]),L=[];for(const F of I){if(F.isFII&&!this.options.extractFII)continue;const H=U.slice(F.start,F.end+1,"image/jpeg");L.push(H)}t(L)}}}u+=2+s.getUint16(u+2)}})}}const iZ=async n=>{const e=tZ(n);if(!e)throw new NL("Gain map XMP metadata not found");const i=await new nZ({extractFII:!0,extractNonFII:!0}).extract(n);if(i.length!==2)throw new RL("Gain map recovery image not found");return{sdr:new Uint8Array(await i[0].arrayBuffer()),gainMap:new Uint8Array(await i[1].arrayBuffer()),metadata:e}},TN=n=>new Promise((e,t)=>{const i=document.createElement("img");i.onload=()=>{e(i)},i.onerror=r=>{t(r)},i.src=URL.createObjectURL(n)});class rZ extends js{_renderer;_renderTargetOptions;_internalLoadingManager;_config;constructor(e,t){super(t),this._config=e,e.renderer&&(this._renderer=e.renderer),this._internalLoadingManager=new mS}setRenderer(e){return this._renderer=e,this}setRenderTargetOptions(e){return this._renderTargetOptions=e,this}prepareQuadRenderer(){this._renderer||console.warn("WARNING: A Renderer was not passed to this Loader constructor or in setRenderer, the result of this Loader will need to be converted to a Data Texture with toDataTexture() before you can use it in your renderer.");const e=this._config.createMaterial({gainMapMax:[1,1,1],gainMapMin:[0,0,0],gamma:[1,1,1],offsetHdr:[1,1,1],offsetSdr:[1,1,1],hdrCapacityMax:1,hdrCapacityMin:0,maxDisplayBoost:1,gainMap:new hi,sdr:new hi});return this._config.createQuadRenderer({width:16,height:16,type:ir,colorSpace:Yo,material:e,renderer:this._renderer,renderTargetOptions:this._renderTargetOptions})}async processImages(e,t,i){const r=t?new Blob([t],{type:"image/jpeg"}):void 0,s=new Blob([e],{type:"image/jpeg"});let o,u,f=!1;if(typeof createImageBitmap>"u"){const p=await Promise.all([r?TN(r):Promise.resolve(void 0),TN(s)]);u=p[0],o=p[1],f=i==="flipY"}else{const p=await Promise.all([r?createImageBitmap(r,{imageOrientation:i||"flipY"}):Promise.resolve(void 0),createImageBitmap(s,{imageOrientation:i||"flipY"})]);u=p[0],o=p[1]}return{sdrImage:o,gainMapImage:u,needsFlip:f}}createTextures(e,t,i){const r=new hi(t||new ImageData(2,2),qu,nr,nr,Wn,TM,pr,Gr,1,Yo);r.flipY=i,r.needsUpdate=!0;const s=new hi(e,qu,nr,nr,Wn,TM,pr,Gr,1,rs);return s.flipY=i,s.needsUpdate=!0,{gainMap:r,sdr:s}}updateQuadRenderer(e,t,i,r,s){e.width=t.width,e.height=t.height,e.material.gainMap=i,e.material.sdr=r,e.material.gainMapMin=s.gainMapMin,e.material.gainMapMax=s.gainMapMax,e.material.offsetHdr=s.offsetHdr,e.material.offsetSdr=s.offsetSdr,e.material.gamma=s.gamma,e.material.hdrCapacityMin=s.hdrCapacityMin,e.material.hdrCapacityMax=s.hdrCapacityMax,e.material.maxDisplayBoost=Math.pow(2,s.hdrCapacityMax),e.material.needsUpdate=!0}}const sZ=`
varying vec2 vUv;

void main() {
  vUv = uv;
  gl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0);
}
`,aZ=`
// min half float value
#define HALF_FLOAT_MIN vec3( -65504, -65504, -65504 )
// max half float value
#define HALF_FLOAT_MAX vec3( 65504, 65504, 65504 )

uniform sampler2D sdr;
uniform sampler2D gainMap;
uniform vec3 gamma;
uniform vec3 offsetHdr;
uniform vec3 offsetSdr;
uniform vec3 gainMapMin;
uniform vec3 gainMapMax;
uniform float weightFactor;

varying vec2 vUv;

void main() {
  vec3 rgb = texture2D( sdr, vUv ).rgb;
  vec3 recovery = texture2D( gainMap, vUv ).rgb;
  vec3 logRecovery = pow( recovery, gamma );
  vec3 logBoost = gainMapMin * ( 1.0 - logRecovery ) + gainMapMax * logRecovery;
  vec3 hdrColor = (rgb + offsetSdr) * exp2( logBoost * weightFactor ) - offsetHdr;
  vec3 clampedHdrColor = max( HALF_FLOAT_MIN, min( HALF_FLOAT_MAX, hdrColor ));
  gl_FragColor = vec4( clampedHdrColor , 1.0 );
}
`;class oZ extends Ss{_maxDisplayBoost;_hdrCapacityMin;_hdrCapacityMax;constructor({gamma:e,offsetHdr:t,offsetSdr:i,gainMapMin:r,gainMapMax:s,maxDisplayBoost:o,hdrCapacityMin:u,hdrCapacityMax:f,sdr:p,gainMap:m}){super({name:"GainMapDecoderMaterial",vertexShader:sZ,fragmentShader:aZ,uniforms:{sdr:{value:p},gainMap:{value:m},gamma:{value:new J(1/e[0],1/e[1],1/e[2])},offsetHdr:{value:new J().fromArray(t)},offsetSdr:{value:new J().fromArray(i)},gainMapMin:{value:new J().fromArray(r)},gainMapMax:{value:new J().fromArray(s)},weightFactor:{value:(Math.log2(o)-u)/(f-u)}},blending:Xo,depthTest:!1,depthWrite:!1}),this._maxDisplayBoost=o,this._hdrCapacityMin=u,this._hdrCapacityMax=f,this.needsUpdate=!0,this.uniformsNeedUpdate=!0}get sdr(){return this.uniforms.sdr.value}set sdr(e){this.uniforms.sdr.value=e}get gainMap(){return this.uniforms.gainMap.value}set gainMap(e){this.uniforms.gainMap.value=e}get offsetHdr(){return this.uniforms.offsetHdr.value.toArray()}set offsetHdr(e){this.uniforms.offsetHdr.value.fromArray(e)}get offsetSdr(){return this.uniforms.offsetSdr.value.toArray()}set offsetSdr(e){this.uniforms.offsetSdr.value.fromArray(e)}get gainMapMin(){return this.uniforms.gainMapMin.value.toArray()}set gainMapMin(e){this.uniforms.gainMapMin.value.fromArray(e)}get gainMapMax(){return this.uniforms.gainMapMax.value.toArray()}set gainMapMax(e){this.uniforms.gainMapMax.value.fromArray(e)}get gamma(){const e=this.uniforms.gamma.value;return[1/e.x,1/e.y,1/e.z]}set gamma(e){const t=this.uniforms.gamma.value;t.x=1/e[0],t.y=1/e[1],t.z=1/e[2]}get hdrCapacityMin(){return this._hdrCapacityMin}set hdrCapacityMin(e){this._hdrCapacityMin=e,this.calculateWeight()}get hdrCapacityMax(){return this._hdrCapacityMax}set hdrCapacityMax(e){this._hdrCapacityMax=e,this.calculateWeight()}get maxDisplayBoost(){return this._maxDisplayBoost}set maxDisplayBoost(e){this._maxDisplayBoost=Math.max(1,Math.min(65504,e)),this.calculateWeight()}calculateWeight(){const e=(Math.log2(this._maxDisplayBoost)-this._hdrCapacityMin)/(this._hdrCapacityMax-this._hdrCapacityMin);this.uniforms.weightFactor.value=Math.max(0,Math.min(1,e))}}class DL extends rZ{constructor(e,t){super({renderer:e,createMaterial:i=>new oZ(i),createQuadRenderer:i=>new IT(i)},t)}async render(e,t,i,r){const{sdrImage:s,gainMapImage:o,needsFlip:u}=await this.processImages(i,r,"flipY"),{gainMap:f,sdr:p}=this.createTextures(s,o,u);this.updateQuadRenderer(e,s,f,p,t),e.render()}}class lZ extends DL{load([e,t,i],r,s,o){const u=this.prepareQuadRenderer();let f,p,m;const v=async()=>{if(f&&p&&m){try{await this.render(u,m,f,p)}catch(P){this.manager.itemError(e),this.manager.itemError(t),this.manager.itemError(i),typeof o=="function"&&o(P),u.disposeOnDemandRenderer();return}typeof r=="function"&&r(u),this.manager.itemEnd(e),this.manager.itemEnd(t),this.manager.itemEnd(i),u.disposeOnDemandRenderer()}};let _=!0,x=0,S=0,A=!0,E=0,M=0,C=!0,N=0,I=0;const U=()=>{if(typeof s=="function"){const P=x+E+N,k=S+M+I,Y=_&&A&&C;s(new ProgressEvent("progress",{lengthComputable:Y,loaded:k,total:P}))}};this.manager.itemStart(e),this.manager.itemStart(t),this.manager.itemStart(i);const L=new Ta(this._internalLoadingManager);L.setResponseType("arraybuffer"),L.setRequestHeader(this.requestHeader),L.setPath(this.path),L.setWithCredentials(this.withCredentials),L.load(e,async P=>{if(typeof P=="string")throw new Error("Invalid sdr buffer");f=P,await v()},P=>{_=P.lengthComputable,S=P.loaded,x=P.total,U()},P=>{this.manager.itemError(e),typeof o=="function"&&o(P)});const F=new Ta(this._internalLoadingManager);F.setResponseType("arraybuffer"),F.setRequestHeader(this.requestHeader),F.setPath(this.path),F.setWithCredentials(this.withCredentials),F.load(t,async P=>{if(typeof P=="string")throw new Error("Invalid gainmap buffer");p=P,await v()},P=>{A=P.lengthComputable,M=P.loaded,E=P.total,U()},P=>{this.manager.itemError(t),typeof o=="function"&&o(P)});const H=new Ta(this._internalLoadingManager);return H.setRequestHeader(this.requestHeader),H.setPath(this.path),H.setWithCredentials(this.withCredentials),H.load(i,async P=>{if(typeof P!="string")throw new Error("Invalid metadata string");m=JSON.parse(P),await v()},P=>{C=P.lengthComputable,I=P.loaded,N=P.total,U()},P=>{this.manager.itemError(i),typeof o=="function"&&o(P)}),u}}class cZ extends DL{load(e,t,i,r){const s=this.prepareQuadRenderer(),o=new Ta(this._internalLoadingManager);return o.setResponseType("arraybuffer"),o.setRequestHeader(this.requestHeader),o.setPath(this.path),o.setWithCredentials(this.withCredentials),this.manager.itemStart(e),o.load(e,async u=>{if(typeof u=="string")throw new Error("Invalid buffer, received [string], was expecting [ArrayBuffer]");const f=new Uint8Array(u);let p,m,v;try{const _=await iZ(f);p=_.sdr,m=_.gainMap,v=_.metadata}catch(_){if(_ instanceof NL||_ instanceof RL)console.warn(`Failure to reconstruct an HDR image from ${e}: Gain map metadata not found in the file, HDRJPGLoader will render the SDR jpeg`),v={gainMapMin:[0,0,0],gainMapMax:[1,1,1],gamma:[1,1,1],hdrCapacityMin:0,hdrCapacityMax:1,offsetHdr:[0,0,0],offsetSdr:[0,0,0]},p=f;else throw _}try{await this.render(s,v,p.buffer,m?.buffer)}catch(_){this.manager.itemError(e),typeof r=="function"&&r(_),s.disposeOnDemandRenderer();return}typeof t=="function"&&t(s),this.manager.itemEnd(e),s.disposeOnDemandRenderer()},i,u=>{this.manager.itemError(e),typeof r=="function"&&r(u)}),s}}const $0={apartment:"lebombo_1k.hdr",city:"potsdamer_platz_1k.hdr",dawn:"kiara_1_dawn_1k.hdr",forest:"forest_slope_1k.hdr",lobby:"st_fagans_interior_1k.hdr",night:"dikhololo_night_1k.hdr",park:"rooitou_park_1k.hdr",studio:"studio_small_03_1k.hdr",sunset:"venice_sunset_1k.hdr",warehouse:"empty_warehouse_01_1k.hdr"},IL="https://raw.githack.com/pmndrs/drei-assets/456060a26bbeb8fdf79326f224b6d99b8bcce736/hdri/",Dp=n=>Array.isArray(n),PT=["/px.png","/nx.png","/py.png","/ny.png","/pz.png","/nz.png"];function bS({files:n=PT,path:e="",preset:t=void 0,colorSpace:i=void 0,extensions:r}={}){t&&(OT(t),n=$0[t],e=IL);const s=Dp(n),{extension:o,isCubemap:u}=LT(n),f=UT(o);if(!f)throw new Error("useEnvironment: Unrecognized file extension: "+n);const p=X0(x=>x.gl);K.useLayoutEffect(()=>{if(o!=="webp"&&o!=="jpg"&&o!=="jpeg")return;function x(){jp.clear(f,s?[n]:n)}p.domElement.addEventListener("webglcontextlost",x,{once:!0})},[n,p.domElement]);const m=jp(f,s?[n]:n,x=>{(o==="webp"||o==="jpg"||o==="jpeg")&&x.setRenderer(p),x.setPath==null||x.setPath(e),r&&r(x)});let v=s?m[0]:m;if(o==="jpg"||o==="jpeg"||o==="webp"){var _;v=(_=v.renderTarget)==null?void 0:_.texture}return v.mapping=u?$o:Pp,v.colorSpace=i??(u?"srgb":"srgb-linear"),v}const uZ={files:PT,path:"",preset:void 0,extensions:void 0};bS.preload=n=>{const e={...uZ,...n};let{files:t,path:i=""}=e;const{preset:r,extensions:s}=e;r&&(OT(r),t=$0[r],i=IL);const{extension:o}=LT(t);if(o==="webp"||o==="jpg"||o==="jpeg")throw new Error("useEnvironment: Preloading gainmaps is not supported");const u=UT(o);if(!u)throw new Error("useEnvironment: Unrecognized file extension: "+t);jp.preload(u,Dp(t)?[t]:t,f=>{f.setPath==null||f.setPath(i),s&&s(f)})};const hZ={files:PT,preset:void 0};bS.clear=n=>{const e={...hZ,...n};let{files:t}=e;const{preset:i}=e;i&&(OT(i),t=$0[i]);const{extension:r}=LT(t),s=UT(r);if(!s)throw new Error("useEnvironment: Unrecognized file extension: "+t);jp.clear(s,Dp(t)?[t]:t)};function OT(n){if(!(n in $0))throw new Error("Preset must be one of: "+Object.keys($0).join(", "))}function LT(n){var e;const t=Dp(n)&&n.length===6,i=Dp(n)&&n.length===3&&n.some(o=>o.endsWith("json")),r=Dp(n)?n[0]:n;return{extension:t?"cube":i?"webp":r.startsWith("data:application/exr")?"exr":r.startsWith("data:application/hdr")?"hdr":r.startsWith("data:image/jpeg")?"jpg":(e=r.split(".").pop())==null||(e=e.split("?"))==null||(e=e.shift())==null?void 0:e.toLowerCase(),isCubemap:t,isGainmap:i}}function UT(n){return n==="cube"?DO:n==="hdr"?ZY:n==="exr"?KY:n==="jpg"||n==="jpeg"?cZ:n==="webp"?lZ:null}const fZ=n=>n.current&&n.current.isScene,dZ=n=>fZ(n)?n.current:n;function kT(n,e,t,i,r={}){var s,o,u,f;r={backgroundBlurriness:0,backgroundIntensity:1,backgroundRotation:[0,0,0],environmentIntensity:1,environmentRotation:[0,0,0],...r};const p=dZ(e||t),m=p.background,v=p.environment,_={backgroundBlurriness:p.backgroundBlurriness,backgroundIntensity:p.backgroundIntensity,backgroundRotation:(s=(o=p.backgroundRotation)==null||o.clone==null?void 0:o.clone())!==null&&s!==void 0?s:[0,0,0],environmentIntensity:p.environmentIntensity,environmentRotation:(u=(f=p.environmentRotation)==null||f.clone==null?void 0:f.clone())!==null&&u!==void 0?u:[0,0,0]};return n!=="only"&&(p.environment=i),n&&(p.background=i),Nl(p,r),()=>{n!=="only"&&(p.environment=v),n&&(p.background=m),Nl(p,_)}}function BT({scene:n,background:e=!1,map:t,...i}){const r=X0(s=>s.scene);return K.useLayoutEffect(()=>{if(t)return kT(e,n,r,t,i)}),null}function PL({background:n=!1,scene:e,blur:t,backgroundBlurriness:i,backgroundIntensity:r,backgroundRotation:s,environmentIntensity:o,environmentRotation:u,...f}){const p=bS(f),m=X0(v=>v.scene);return K.useLayoutEffect(()=>kT(n,e,m,p,{backgroundBlurriness:t??i,backgroundIntensity:r,backgroundRotation:s,environmentIntensity:o,environmentRotation:u})),K.useEffect(()=>()=>{p.dispose()},[p]),null}function pZ({children:n,near:e=.1,far:t=1e3,resolution:i=256,frames:r=1,map:s,background:o=!1,blur:u,backgroundBlurriness:f,backgroundIntensity:p,backgroundRotation:m,environmentIntensity:v,environmentRotation:_,scene:x,files:S,path:A,preset:E=void 0,extensions:M}){const C=X0(H=>H.gl),N=X0(H=>H.scene),I=K.useRef(null),[U]=K.useState(()=>new cv),L=K.useMemo(()=>{const H=new Zb(i);return H.texture.type=ir,H},[i]);K.useEffect(()=>()=>{L.dispose()},[L]),K.useLayoutEffect(()=>{if(r===1){const H=C.autoClear;C.autoClear=!0,I.current.update(C,U),C.autoClear=H}return kT(o,x,N,L.texture,{backgroundBlurriness:u??f,backgroundIntensity:p,backgroundRotation:m,environmentIntensity:v,environmentRotation:_})},[n,U,L.texture,x,N,o,r,C]);let F=1;return _S(()=>{if(r===1/0||F<r){const H=C.autoClear;C.autoClear=!0,I.current.update(C,U),C.autoClear=H,F++}}),K.createElement(K.Fragment,null,yY(K.createElement(K.Fragment,null,n,K.createElement("cubeCamera",{ref:I,args:[e,t,L]}),S||E?K.createElement(PL,{background:!0,files:S,preset:E,path:A,extensions:M}):s?K.createElement(BT,{background:!0,map:s,extensions:M}):null),U))}function mZ(n){var e,t,i,r;const s=bS(n),o=n.map||s;K.useMemo(()=>pL({GroundProjectedEnvImpl:YY}),[]),K.useEffect(()=>()=>{s.dispose()},[s]);const u=K.useMemo(()=>[o],[o]),f=(e=n.ground)==null?void 0:e.height,p=(t=n.ground)==null?void 0:t.radius,m=(i=(r=n.ground)==null?void 0:r.scale)!==null&&i!==void 0?i:1e3;return K.createElement(K.Fragment,null,K.createElement(BT,bM({},n,{map:o})),K.createElement("groundProjectedEnvImpl",{args:u,scale:m,height:f,radius:p}))}function gZ(n){return n.ground?K.createElement(mZ,n):n.map?K.createElement(BT,n):n.children?K.createElement(pZ,n):K.createElement(PL,n)}class vZ extends Ss{constructor(){super({uniforms:{time:{value:0},fade:{value:1}},vertexShader:`
      uniform float time;
      attribute float size;
      varying vec3 vColor;
      void main() {
        vColor = color;
        vec4 mvPosition = modelViewMatrix * vec4(position, 0.5);
        gl_PointSize = size * (30.0 / -mvPosition.z) * (3.0 + sin(time + 100.0));
        gl_Position = projectionMatrix * mvPosition;
      }`,fragmentShader:`
      uniform sampler2D pointTexture;
      uniform float fade;
      varying vec3 vColor;
      void main() {
        float opacity = 1.0;
        if (fade == 1.0) {
          float d = distance(gl_PointCoord, vec2(0.5, 0.5));
          opacity = 1.0 / (1.0 + exp(16.0 * (d - 0.25)));
        }
        gl_FragColor = vec4(vColor, opacity);

        #include <tonemapping_fragment>
	      #include <${QY>=154?"colorspace_fragment":"encodings_fragment"}>
      }`})}}const yZ=n=>new J().setFromSpherical(new WO(n,Math.acos(1-Math.random()*2),Math.random()*2*Math.PI)),_Z=K.forwardRef(({radius:n=100,depth:e=50,count:t=5e3,saturation:i=0,factor:r=4,fade:s=!1,speed:o=1},u)=>{const f=K.useRef(null),[p,m,v]=K.useMemo(()=>{const x=[],S=[],A=Array.from({length:t},()=>(.5+.5*Math.random())*r),E=new Ot;let M=n+e;const C=e/t;for(let N=0;N<t;N++)M-=C*Math.random(),x.push(...yZ(M).toArray()),E.setHSL(N/t,i,.9),S.push(E.r,E.g,E.b);return[new Float32Array(x),new Float32Array(S),new Float32Array(A)]},[t,e,r,n,i]);_S(x=>f.current&&(f.current.uniforms.time.value=x.clock.elapsedTime*o));const[_]=K.useState(()=>new vZ);return K.createElement("points",{ref:u},K.createElement("bufferGeometry",null,K.createElement("bufferAttribute",{attach:"attributes-position",args:[p,3]}),K.createElement("bufferAttribute",{attach:"attributes-color",args:[m,3]}),K.createElement("bufferAttribute",{attach:"attributes-size",args:[v,1]})),K.createElement("primitive",{ref:f,object:_,attach:"material",blending:Ax,"uniforms-fade-value":s,depthWrite:!1,transparent:!0,vertexColors:!0}))}),AN=["Finishing the prompt...","Stuck in traffic...","Uploading the assignment...","Wearing ID card...","Taking the fish for a walk...","Mass bunking...","Eating ice cream...","ICA farming..."],xZ=()=>{const{active:n,progress:e}=OY(),[t,i]=K.useState(!0),[r,s]=K.useState([]),[o,u]=K.useState(0),[f,p]=K.useState(!1);return K.useEffect(()=>{const m=[...AN];for(let v=m.length-1;v>0;v--){const _=Math.floor(Math.random()*(v+1));[m[v],m[_]]=[m[_],m[v]]}s(m),u(Math.floor(Math.random()*m.length))},[]),K.useEffect(()=>{if(!t)return;const m=setInterval(()=>{u(v=>(v+1)%AN.length)},1500);return()=>clearInterval(m)},[t]),K.useEffect(()=>{const m=setTimeout(()=>{t&&(console.warn("Preloader timed out, forcing display."),p(!0),setTimeout(()=>i(!1),500))},2e3);return()=>clearTimeout(m)},[]),K.useEffect(()=>{const v=Date.now();if(e===100&&!n){const _=Date.now()-v,x=Math.max(0,2500-_),S=setTimeout(()=>{p(!0),setTimeout(()=>i(!1),500)},x);return()=>clearTimeout(S)}},[e,n]),t?V.jsxs("div",{className:`fixed inset-0 z-[10000] bg-black flex flex-col items-center justify-center transition-opacity duration-500 ${f?"opacity-0":"opacity-100"}`,children:[V.jsx("div",{className:"text-white text-4xl font-display font-bold mb-4 tracking-widest animate-pulse",children:"CAMPUS NODES"}),V.jsx("div",{className:"text-zinc-400 font-mono text-sm h-6",children:r.length>0?r[o]:"Loading..."}),V.jsx("div",{className:"w-64 h-1 bg-zinc-800 mt-8 rounded-full overflow-hidden",children:V.jsx("div",{className:"h-full bg-white transition-all duration-300 ease-out",style:{width:`${e}%`}})})]}):null},Zo=({children:n,variant:e="primary",onClick:t,className:i="",type:r="button",fullWidth:s=!1,to:o,href:u,withDoodles:f=!0})=>{const p=K.useRef(null),[m,v]=K.useState(!1),_=I=>{v(!0),setTimeout(()=>v(!1),700),t&&t(I)},x="relative group/btn font-display font-bold uppercase tracking-widest text-xs px-8 py-4 transition-all duration-300 transform active:scale-95 disabled:opacity-50 disabled:cursor-none flex items-center justify-center gap-2",S={primary:"bg-white text-black border border-transparent hover:bg-zinc-200",outline:"border border-white/20 text-white hover:border-white hover:bg-white/5",ghost:"text-gray-400 hover:text-white hover:bg-white/5",accent:"bg-accent text-white border border-transparent hover:bg-accent/90"},A=s?"w-full":"",E=`${x} ${S[e]} ${A} ${i}`,M=(I,U,L)=>m?`opacity-0 ${L} transition-all duration-700 ease-out z-50`:`opacity-0 group-hover/btn:opacity-100 ${U} transition-all duration-300 ease-out ${I}`,C=()=>V.jsxs("span",{className:"absolute inset-0 pointer-events-none overflow-visible",children:[V.jsx("span",{className:`absolute left-1/2 -translate-x-1/2 ${M("-top-12","-top-8","-translate-y-[80vh]")} delay-75 text-white`,children:V.jsx(KF,{size:20,fill:"currentColor"})}),V.jsx("span",{className:`absolute left-0 ${M("-top-10","-top-6","-translate-y-[80vh] -translate-x-[20vw]")} delay-0 text-white -rotate-12`,children:V.jsx(yC,{size:20,strokeWidth:3})}),V.jsx("span",{className:`absolute right-0 ${M("-top-10","-top-6","-translate-y-[80vh] translate-x-[20vw]")} delay-100 text-white rotate-12`,children:V.jsx(rE,{size:16,fill:"currentColor"})}),V.jsx("span",{className:`absolute left-1/2 -translate-x-1/2 ${M("-bottom-12","-bottom-8","translate-y-[80vh]")} delay-75 text-white`,children:V.jsx(bF,{size:18,strokeWidth:3})}),V.jsx("span",{className:`absolute left-0 ${M("-bottom-10","-bottom-6","translate-y-[80vh] -translate-x-[20vw]")} delay-0 text-white rotate-12`,children:V.jsx(TD,{size:16,strokeWidth:4})}),V.jsx("span",{className:`absolute right-0 ${M("-bottom-10","-bottom-6","translate-y-[80vh] translate-x-[20vw]")} delay-100 text-white -rotate-12`,children:V.jsx(yC,{size:20,strokeWidth:3,className:"rotate-180"})}),V.jsx("span",{className:`absolute top-1/2 -translate-y-1/2 ${M("-left-12","-left-8","-translate-x-[80vw]")} delay-50 text-white`,children:V.jsx(bD,{size:20,strokeWidth:3})}),V.jsx("span",{className:`absolute top-0 ${M("-left-8","-left-5","-translate-x-[80vw] -translate-y-[20vh]")} delay-100 text-white`,children:V.jsx(UF,{size:16,fill:"currentColor"})}),V.jsx("span",{className:`absolute top-1/2 -translate-y-1/2 ${M("-right-12","-right-8","translate-x-[80vw]")} delay-50 text-white`,children:V.jsx(xD,{size:20,strokeWidth:3})}),V.jsx("span",{className:`absolute bottom-0 ${M("-right-8","-right-5","translate-x-[80vw] translate-y-[20vh]")} delay-100 text-white rotate-45`,children:V.jsx(VF,{size:16,fill:"currentColor"})})]}),N=V.jsxs(V.Fragment,{children:[V.jsx("span",{className:"relative z-10",children:n}),f&&V.jsx(C,{})]});return o?V.jsx(Dl,{to:o,className:E,ref:p,onClick:_,children:N}):u?V.jsx("a",{href:u,className:E,target:"_blank",rel:"noopener noreferrer",ref:p,onClick:_,children:N}):V.jsx("button",{ref:p,type:r,className:E,onClick:_,children:N})},bZ=()=>{const{user:n}=JM();return V.jsxs("section",{className:"relative w-full h-screen flex flex-col justify-center items-center overflow-hidden bg-transparent",children:[V.jsx("div",{className:"absolute inset-0 bg-grid-white/[0.02] -z-10"}),V.jsx("div",{className:"absolute top-1/4 -left-20 w-96 h-96 bg-accent/10 rounded-full blur-[100px] pointer-events-none"}),V.jsxs("div",{className:"z-10 text-center px-4 max-w-5xl mx-auto pointer-events-none",children:[V.jsx("h1",{className:"text-6xl md:text-9xl font-bold font-display tracking-tighter text-white mb-6 animate-fade-in pointer-events-auto",children:"CAMPUS NODES"}),V.jsxs("p",{className:"text-gray-400 text-lg md:text-2xl max-w-2xl mx-auto font-light tracking-wide mb-12 animate-fade-in pointer-events-auto",style:{animationDelay:"200ms"},children:["The decentralized marketplace for everything on campus.",V.jsx("br",{}),"Trade gears, find mentors, build your network."]}),V.jsxs("div",{className:"flex flex-col md:flex-row gap-6 justify-center items-center animate-fade-in pointer-events-auto",style:{animationDelay:"400ms"},children:[V.jsx(xM,{children:V.jsxs(Zo,{to:n?"/market":"/signup",variant:"primary",className:"px-8 py-4 text-sm",children:[n?"Go to Market":"Start Trading"," ",V.jsx(bD,{size:18,className:"inline ml-2"})]})}),V.jsx(xM,{children:V.jsx(Zo,{to:"/services",variant:"outline",className:"px-8 py-4 text-sm",children:"Explore Services"})})]})]})]})},Pu=8,CN=1.5,SZ=({color:n,index:e,registerRef:t})=>{const i=K.useRef(),r=K.useRef(),s=K.useRef(),[o,u]=K.useState(!1),f=K.useRef({x:(Math.random()-.5)*.01,y:(Math.random()-.5)*.01});return K.useEffect(()=>{i.current&&(t(e,i.current),i.current.rotation.set(Math.random()*Math.PI*2,Math.random()*Math.PI*2,Math.random()*Math.PI*2))},[e,t]),_S(()=>{r.current&&s.current&&(r.current.rotation.x+=f.current.x,r.current.rotation.y+=f.current.y,s.current.rotation.x-=f.current.x*.5,s.current.rotation.y-=f.current.y*.5)}),V.jsxs("group",{ref:i,children:[V.jsxs("mesh",{visible:!1,onPointerOver:p=>{p.stopPropagation(),u(!0),document.body.style.cursor="none"},onPointerOut:p=>{u(!1),document.body.style.cursor="none"},children:[V.jsx("icosahedronGeometry",{args:[1.5,0]})," ",V.jsx("meshBasicMaterial",{transparent:!0,opacity:0})]}),V.jsxs("mesh",{ref:r,children:[V.jsx("icosahedronGeometry",{args:[1.3,0]}),V.jsx("meshStandardMaterial",{color:n,wireframe:!0,transparent:!0,opacity:1,emissive:n,emissiveIntensity:o?100:30})]}),V.jsxs("mesh",{ref:s,children:[V.jsx("icosahedronGeometry",{args:[1.5,0]}),V.jsx("meshStandardMaterial",{color:n,wireframe:!0,transparent:!0,opacity:.5,emissive:n,emissiveIntensity:o?50:10})]})]})},wZ=()=>{const n=K.useRef({positions:new Array(Pu).fill().map(()=>new J((Math.random()-.5)*10,(Math.random()-.5)*6,0)),velocities:new Array(Pu).fill().map(()=>new J((Math.random()-.5)*2,(Math.random()-.5)*2,0)),meshes:new Array(Pu).fill(null)}),e=(i,r)=>{n.current.meshes[i]=r};_S((i,r)=>{const{width:s,height:o}=i.viewport,u=Math.min(r,.05),f=n.current.positions,p=n.current.velocities;for(let m=0;m<Pu;m++){const v=f[m],_=p[m];v.addScaledVector(_,u),(isNaN(v.x)||isNaN(v.y))&&v.set(0,0,0);const x=CN;v.x>s/2-x&&(v.x=s/2-x,_.x*=-1),v.x<-s/2+x&&(v.x=-s/2+x,_.x*=-1),v.y>o/2-x&&(v.y=o/2-x,_.y*=-1),v.y<-o/2+x&&(v.y=-o/2+x,_.y*=-1);const S=i.pointer.x*s/2,A=i.pointer.y*o/2;if(Math.sqrt((v.x-S)**2+(v.y-A)**2)<5){const N=new J(v.x-S,v.y-A,0).normalize();_.addScaledVector(N,15*u)}const M=_.length();M<1.5?_.multiplyScalar(1.02):M>5&&_.multiplyScalar(.95)}for(let m=0;m<Pu;m++)for(let v=m+1;v<Pu;v++){const _=f[m],x=f[v],S=_.distanceToSquared(x),A=CN*2;if(S<A*A){const E=Math.sqrt(S),M=E>0?_.clone().sub(x).normalize():new J(1,0,0),C=A-E,N=M.clone().multiplyScalar(C*.5);_.add(N),x.sub(N);const I=p[m],U=p[v],F=I.clone().sub(U).dot(M);if(F<0){const H=M.multiplyScalar(F);I.sub(H),U.add(H),I.add(new J((Math.random()-.5)*.5,(Math.random()-.5)*.5,0))}}}for(let m=0;m<Pu;m++){const v=n.current.meshes[m];v&&v.position.copy(f[m])}});const t=["#3b82f6","#6366f1","#ec4899","#14b8a6","#8b5cf6","#ffffff"];return V.jsx("group",{children:new Array(Pu).fill().map((i,r)=>V.jsx(SZ,{index:r,color:t[r%t.length],registerRef:e},r))})},MZ=()=>V.jsx("div",{className:"absolute inset-0 z-0 pointer-events-auto",children:V.jsxs(NY,{camera:{position:[0,0,10],fov:60},gl:{alpha:!0,antialias:!0},children:[V.jsx("ambientLight",{intensity:1}),V.jsx("pointLight",{position:[10,10,10],intensity:1,color:"#3b82f6"}),V.jsx("pointLight",{position:[-10,-10,-10],intensity:.5,color:"#ec4899"}),V.jsx(_Z,{radius:100,depth:50,count:5e3,factor:4,saturation:0,fade:!0,speed:1}),V.jsx(wZ,{}),V.jsx(K.Suspense,{fallback:null,children:V.jsx(gZ,{preset:"city"})})]})});var OL={update:null,begin:null,loopBegin:null,changeBegin:null,change:null,changeComplete:null,loopComplete:null,complete:null,loop:1,direction:"normal",autoplay:!0,timelineOffset:0},zT={duration:1e3,delay:0,endDelay:0,easing:"easeOutElastic(1, .5)",round:0},EZ=["translateX","translateY","translateZ","rotate","rotateX","rotateY","rotateZ","scale","scaleX","scaleY","scaleZ","skew","skewX","skewY","perspective","matrix","matrix3d"],Eb={CSS:{},springs:{}};function Ol(n,e,t){return Math.min(Math.max(n,e),t)}function v0(n,e){return n.indexOf(e)>-1}function zw(n,e){return n.apply(null,e)}var Jt={arr:function(n){return Array.isArray(n)},obj:function(n){return v0(Object.prototype.toString.call(n),"Object")},pth:function(n){return Jt.obj(n)&&n.hasOwnProperty("totalLength")},svg:function(n){return n instanceof SVGElement},inp:function(n){return n instanceof HTMLInputElement},dom:function(n){return n.nodeType||Jt.svg(n)},str:function(n){return typeof n=="string"},fnc:function(n){return typeof n=="function"},und:function(n){return typeof n>"u"},nil:function(n){return Jt.und(n)||n===null},hex:function(n){return/(^#[0-9A-F]{6}$)|(^#[0-9A-F]{3}$)/i.test(n)},rgb:function(n){return/^rgb/.test(n)},hsl:function(n){return/^hsl/.test(n)},col:function(n){return Jt.hex(n)||Jt.rgb(n)||Jt.hsl(n)},key:function(n){return!OL.hasOwnProperty(n)&&!zT.hasOwnProperty(n)&&n!=="targets"&&n!=="keyframes"}};function LL(n){var e=/\(([^)]+)\)/.exec(n);return e?e[1].split(",").map(function(t){return parseFloat(t)}):[]}function UL(n,e){var t=LL(n),i=Ol(Jt.und(t[0])?1:t[0],.1,100),r=Ol(Jt.und(t[1])?100:t[1],.1,100),s=Ol(Jt.und(t[2])?10:t[2],.1,100),o=Ol(Jt.und(t[3])?0:t[3],.1,100),u=Math.sqrt(r/i),f=s/(2*Math.sqrt(r*i)),p=f<1?u*Math.sqrt(1-f*f):0,m=1,v=f<1?(f*u+-o)/p:-o+u;function _(S){var A=e?e*S/1e3:S;return f<1?A=Math.exp(-A*f*u)*(m*Math.cos(p*A)+v*Math.sin(p*A)):A=(m+v*A)*Math.exp(-A*u),S===0||S===1?S:1-A}function x(){var S=Eb.springs[n];if(S)return S;for(var A=1/6,E=0,M=0;;)if(E+=A,_(E)===1){if(M++,M>=16)break}else M=0;var C=E*A*1e3;return Eb.springs[n]=C,C}return e?_:x}function TZ(n){return n===void 0&&(n=10),function(e){return Math.ceil(Ol(e,1e-6,1)*n)*(1/n)}}var AZ=(function(){var n=11,e=1/(n-1);function t(m,v){return 1-3*v+3*m}function i(m,v){return 3*v-6*m}function r(m){return 3*m}function s(m,v,_){return((t(v,_)*m+i(v,_))*m+r(v))*m}function o(m,v,_){return 3*t(v,_)*m*m+2*i(v,_)*m+r(v)}function u(m,v,_,x,S){var A,E,M=0;do E=v+(_-v)/2,A=s(E,x,S)-m,A>0?_=E:v=E;while(Math.abs(A)>1e-7&&++M<10);return E}function f(m,v,_,x){for(var S=0;S<4;++S){var A=o(v,_,x);if(A===0)return v;var E=s(v,_,x)-m;v-=E/A}return v}function p(m,v,_,x){if(!(0<=m&&m<=1&&0<=_&&_<=1))return;var S=new Float32Array(n);if(m!==v||_!==x)for(var A=0;A<n;++A)S[A]=s(A*e,m,_);function E(M){for(var C=0,N=1,I=n-1;N!==I&&S[N]<=M;++N)C+=e;--N;var U=(M-S[N])/(S[N+1]-S[N]),L=C+U*e,F=o(L,m,_);return F>=.001?f(M,L,m,_):F===0?L:u(M,C,C+e,m,_)}return function(M){return m===v&&_===x||M===0||M===1?M:s(E(M),v,x)}}return p})(),kL=(function(){var n={linear:function(){return function(i){return i}}},e={Sine:function(){return function(i){return 1-Math.cos(i*Math.PI/2)}},Expo:function(){return function(i){return i?Math.pow(2,10*i-10):0}},Circ:function(){return function(i){return 1-Math.sqrt(1-i*i)}},Back:function(){return function(i){return i*i*(3*i-2)}},Bounce:function(){return function(i){for(var r,s=4;i<((r=Math.pow(2,--s))-1)/11;);return 1/Math.pow(4,3-s)-7.5625*Math.pow((r*3-2)/22-i,2)}},Elastic:function(i,r){i===void 0&&(i=1),r===void 0&&(r=.5);var s=Ol(i,1,10),o=Ol(r,.1,2);return function(u){return u===0||u===1?u:-s*Math.pow(2,10*(u-1))*Math.sin((u-1-o/(Math.PI*2)*Math.asin(1/s))*(Math.PI*2)/o)}}},t=["Quad","Cubic","Quart","Quint"];return t.forEach(function(i,r){e[i]=function(){return function(s){return Math.pow(s,r+2)}}}),Object.keys(e).forEach(function(i){var r=e[i];n["easeIn"+i]=r,n["easeOut"+i]=function(s,o){return function(u){return 1-r(s,o)(1-u)}},n["easeInOut"+i]=function(s,o){return function(u){return u<.5?r(s,o)(u*2)/2:1-r(s,o)(u*-2+2)/2}},n["easeOutIn"+i]=function(s,o){return function(u){return u<.5?(1-r(s,o)(1-u*2))/2:(r(s,o)(u*2-1)+1)/2}}}),n})();function FT(n,e){if(Jt.fnc(n))return n;var t=n.split("(")[0],i=kL[t],r=LL(n);switch(t){case"spring":return UL(n,e);case"cubicBezier":return zw(AZ,r);case"steps":return zw(TZ,r);default:return zw(i,r)}}function BL(n){try{var e=document.querySelectorAll(n);return e}catch{return}}function SS(n,e){for(var t=n.length,i=arguments.length>=2?arguments[1]:void 0,r=[],s=0;s<t;s++)if(s in n){var o=n[s];e.call(i,o,s,n)&&r.push(o)}return r}function wS(n){return n.reduce(function(e,t){return e.concat(Jt.arr(t)?wS(t):t)},[])}function RN(n){return Jt.arr(n)?n:(Jt.str(n)&&(n=BL(n)||n),n instanceof NodeList||n instanceof HTMLCollection?[].slice.call(n):[n])}function VT(n,e){return n.some(function(t){return t===e})}function HT(n){var e={};for(var t in n)e[t]=n[t];return e}function XM(n,e){var t=HT(n);for(var i in n)t[i]=e.hasOwnProperty(i)?e[i]:n[i];return t}function MS(n,e){var t=HT(n);for(var i in e)t[i]=Jt.und(n[i])?e[i]:n[i];return t}function CZ(n){var e=/rgb\((\d+,\s*[\d]+,\s*[\d]+)\)/g.exec(n);return e?"rgba("+e[1]+",1)":n}function RZ(n){var e=/^#?([a-f\d])([a-f\d])([a-f\d])$/i,t=n.replace(e,function(u,f,p,m){return f+f+p+p+m+m}),i=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(t),r=parseInt(i[1],16),s=parseInt(i[2],16),o=parseInt(i[3],16);return"rgba("+r+","+s+","+o+",1)"}function NZ(n){var e=/hsl\((\d+),\s*([\d.]+)%,\s*([\d.]+)%\)/g.exec(n)||/hsla\((\d+),\s*([\d.]+)%,\s*([\d.]+)%,\s*([\d.]+)\)/g.exec(n),t=parseInt(e[1],10)/360,i=parseInt(e[2],10)/100,r=parseInt(e[3],10)/100,s=e[4]||1;function o(_,x,S){return S<0&&(S+=1),S>1&&(S-=1),S<1/6?_+(x-_)*6*S:S<1/2?x:S<2/3?_+(x-_)*(2/3-S)*6:_}var u,f,p;if(i==0)u=f=p=r;else{var m=r<.5?r*(1+i):r+i-r*i,v=2*r-m;u=o(v,m,t+1/3),f=o(v,m,t),p=o(v,m,t-1/3)}return"rgba("+u*255+","+f*255+","+p*255+","+s+")"}function DZ(n){if(Jt.rgb(n))return CZ(n);if(Jt.hex(n))return RZ(n);if(Jt.hsl(n))return NZ(n)}function Nc(n){var e=/[+-]?\d*\.?\d+(?:\.\d+)?(?:[eE][+-]?\d+)?(%|px|pt|em|rem|in|cm|mm|ex|ch|pc|vw|vh|vmin|vmax|deg|rad|turn)?$/.exec(n);if(e)return e[1]}function IZ(n){if(v0(n,"translate")||n==="perspective")return"px";if(v0(n,"rotate")||v0(n,"skew"))return"deg"}function $M(n,e){return Jt.fnc(n)?n(e.target,e.id,e.total):n}function Ll(n,e){return n.getAttribute(e)}function GT(n,e,t){var i=Nc(e);if(VT([t,"deg","rad","turn"],i))return e;var r=Eb.CSS[e+t];if(!Jt.und(r))return r;var s=100,o=document.createElement(n.tagName),u=n.parentNode&&n.parentNode!==document?n.parentNode:document.body;u.appendChild(o),o.style.position="absolute",o.style.width=s+t;var f=s/o.offsetWidth;u.removeChild(o);var p=f*parseFloat(e);return Eb.CSS[e+t]=p,p}function zL(n,e,t){if(e in n.style){var i=e.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase(),r=n.style[e]||getComputedStyle(n).getPropertyValue(i)||"0";return t?GT(n,r,t):r}}function jT(n,e){if(Jt.dom(n)&&!Jt.inp(n)&&(!Jt.nil(Ll(n,e))||Jt.svg(n)&&n[e]))return"attribute";if(Jt.dom(n)&&VT(EZ,e))return"transform";if(Jt.dom(n)&&e!=="transform"&&zL(n,e))return"css";if(n[e]!=null)return"object"}function FL(n){if(Jt.dom(n)){for(var e=n.style.transform||"",t=/(\w+)\(([^)]*)\)/g,i=new Map,r;r=t.exec(e);)i.set(r[1],r[2]);return i}}function PZ(n,e,t,i){var r=v0(e,"scale")?1:0+IZ(e),s=FL(n).get(e)||r;return t&&(t.transforms.list.set(e,s),t.transforms.last=e),i?GT(n,s,i):s}function WT(n,e,t,i){switch(jT(n,e)){case"transform":return PZ(n,e,i,t);case"css":return zL(n,e,t);case"attribute":return Ll(n,e);default:return n[e]||0}}function qT(n,e){var t=/^(\*=|\+=|-=)/.exec(n);if(!t)return n;var i=Nc(n)||0,r=parseFloat(e),s=parseFloat(n.replace(t[0],""));switch(t[0][0]){case"+":return r+s+i;case"-":return r-s+i;case"*":return r*s+i}}function VL(n,e){if(Jt.col(n))return DZ(n);if(/\s/g.test(n))return n;var t=Nc(n),i=t?n.substr(0,n.length-t.length):n;return e?i+e:i}function XT(n,e){return Math.sqrt(Math.pow(e.x-n.x,2)+Math.pow(e.y-n.y,2))}function OZ(n){return Math.PI*2*Ll(n,"r")}function LZ(n){return Ll(n,"width")*2+Ll(n,"height")*2}function UZ(n){return XT({x:Ll(n,"x1"),y:Ll(n,"y1")},{x:Ll(n,"x2"),y:Ll(n,"y2")})}function HL(n){for(var e=n.points,t=0,i,r=0;r<e.numberOfItems;r++){var s=e.getItem(r);r>0&&(t+=XT(i,s)),i=s}return t}function kZ(n){var e=n.points;return HL(n)+XT(e.getItem(e.numberOfItems-1),e.getItem(0))}function GL(n){if(n.getTotalLength)return n.getTotalLength();switch(n.tagName.toLowerCase()){case"circle":return OZ(n);case"rect":return LZ(n);case"line":return UZ(n);case"polyline":return HL(n);case"polygon":return kZ(n)}}function BZ(n){var e=GL(n);return n.setAttribute("stroke-dasharray",e),e}function zZ(n){for(var e=n.parentNode;Jt.svg(e)&&Jt.svg(e.parentNode);)e=e.parentNode;return e}function jL(n,e){var t=e||{},i=t.el||zZ(n),r=i.getBoundingClientRect(),s=Ll(i,"viewBox"),o=r.width,u=r.height,f=t.viewBox||(s?s.split(" "):[0,0,o,u]);return{el:i,viewBox:f,x:f[0]/1,y:f[1]/1,w:o,h:u,vW:f[2],vH:f[3]}}function FZ(n,e){var t=Jt.str(n)?BL(n)[0]:n,i=e||100;return function(r){return{property:r,el:t,svg:jL(t),totalLength:GL(t)*(i/100)}}}function VZ(n,e,t){function i(m){m===void 0&&(m=0);var v=e+m>=1?e+m:0;return n.el.getPointAtLength(v)}var r=jL(n.el,n.svg),s=i(),o=i(-1),u=i(1),f=t?1:r.w/r.vW,p=t?1:r.h/r.vH;switch(n.property){case"x":return(s.x-r.x)*f;case"y":return(s.y-r.y)*p;case"angle":return Math.atan2(u.y-o.y,u.x-o.x)*180/Math.PI}}function NN(n,e){var t=/[+-]?\d*\.?\d+(?:\.\d+)?(?:[eE][+-]?\d+)?/g,i=VL(Jt.pth(n)?n.totalLength:n,e)+"";return{original:i,numbers:i.match(t)?i.match(t).map(Number):[0],strings:Jt.str(n)||e?i.split(t):[]}}function $T(n){var e=n?wS(Jt.arr(n)?n.map(RN):RN(n)):[];return SS(e,function(t,i,r){return r.indexOf(t)===i})}function WL(n){var e=$T(n);return e.map(function(t,i){return{target:t,id:i,total:e.length,transforms:{list:FL(t)}}})}function HZ(n,e){var t=HT(e);if(/^spring/.test(t.easing)&&(t.duration=UL(t.easing)),Jt.arr(n)){var i=n.length,r=i===2&&!Jt.obj(n[0]);r?n={value:n}:Jt.fnc(e.duration)||(t.duration=e.duration/i)}var s=Jt.arr(n)?n:[n];return s.map(function(o,u){var f=Jt.obj(o)&&!Jt.pth(o)?o:{value:o};return Jt.und(f.delay)&&(f.delay=u?0:e.delay),Jt.und(f.endDelay)&&(f.endDelay=u===s.length-1?e.endDelay:0),f}).map(function(o){return MS(o,t)})}function GZ(n){for(var e=SS(wS(n.map(function(s){return Object.keys(s)})),function(s){return Jt.key(s)}).reduce(function(s,o){return s.indexOf(o)<0&&s.push(o),s},[]),t={},i=function(s){var o=e[s];t[o]=n.map(function(u){var f={};for(var p in u)Jt.key(p)?p==o&&(f.value=u[p]):f[p]=u[p];return f})},r=0;r<e.length;r++)i(r);return t}function jZ(n,e){var t=[],i=e.keyframes;i&&(e=MS(GZ(i),e));for(var r in e)Jt.key(r)&&t.push({name:r,tweens:HZ(e[r],n)});return t}function WZ(n,e){var t={};for(var i in n){var r=$M(n[i],e);Jt.arr(r)&&(r=r.map(function(s){return $M(s,e)}),r.length===1&&(r=r[0])),t[i]=r}return t.duration=parseFloat(t.duration),t.delay=parseFloat(t.delay),t}function qZ(n,e){var t;return n.tweens.map(function(i){var r=WZ(i,e),s=r.value,o=Jt.arr(s)?s[1]:s,u=Nc(o),f=WT(e.target,n.name,u,e),p=t?t.to.original:f,m=Jt.arr(s)?s[0]:p,v=Nc(m)||Nc(f),_=u||v;return Jt.und(o)&&(o=p),r.from=NN(m,_),r.to=NN(qT(o,m),_),r.start=t?t.end:0,r.end=r.start+r.delay+r.duration+r.endDelay,r.easing=FT(r.easing,r.duration),r.isPath=Jt.pth(s),r.isPathTargetInsideSVG=r.isPath&&Jt.svg(e.target),r.isColor=Jt.col(r.from.original),r.isColor&&(r.round=1),t=r,r})}var qL={css:function(n,e,t){return n.style[e]=t},attribute:function(n,e,t){return n.setAttribute(e,t)},object:function(n,e,t){return n[e]=t},transform:function(n,e,t,i,r){if(i.list.set(e,t),e===i.last||r){var s="";i.list.forEach(function(o,u){s+=u+"("+o+") "}),n.style.transform=s}}};function XL(n,e){var t=WL(n);t.forEach(function(i){for(var r in e){var s=$M(e[r],i),o=i.target,u=Nc(s),f=WT(o,r,u,i),p=u||Nc(f),m=qT(VL(s,p),f),v=jT(o,r);qL[v](o,r,m,i.transforms,!0)}})}function XZ(n,e){var t=jT(n.target,e.name);if(t){var i=qZ(e,n),r=i[i.length-1];return{type:t,property:e.name,animatable:n,tweens:i,duration:r.end,delay:i[0].delay,endDelay:r.endDelay}}}function $Z(n,e){return SS(wS(n.map(function(t){return e.map(function(i){return XZ(t,i)})})),function(t){return!Jt.und(t)})}function $L(n,e){var t=n.length,i=function(s){return s.timelineOffset?s.timelineOffset:0},r={};return r.duration=t?Math.max.apply(Math,n.map(function(s){return i(s)+s.duration})):e.duration,r.delay=t?Math.min.apply(Math,n.map(function(s){return i(s)+s.delay})):e.delay,r.endDelay=t?r.duration-Math.max.apply(Math,n.map(function(s){return i(s)+s.duration-s.endDelay})):e.endDelay,r}var DN=0;function YZ(n){var e=XM(OL,n),t=XM(zT,n),i=jZ(t,n),r=WL(n.targets),s=$Z(r,i),o=$L(s,t),u=DN;return DN++,MS(e,{id:u,children:[],animatables:r,animations:s,duration:o.duration,delay:o.delay,endDelay:o.endDelay})}var Wo=[],YL=(function(){var n;function e(){!n&&(!IN()||!gi.suspendWhenDocumentHidden)&&Wo.length>0&&(n=requestAnimationFrame(t))}function t(r){for(var s=Wo.length,o=0;o<s;){var u=Wo[o];u.paused?(Wo.splice(o,1),s--):(u.tick(r),o++)}n=o>0?requestAnimationFrame(t):void 0}function i(){gi.suspendWhenDocumentHidden&&(IN()?n=cancelAnimationFrame(n):(Wo.forEach(function(r){return r._onDocumentVisibility()}),YL()))}return typeof document<"u"&&document.addEventListener("visibilitychange",i),e})();function IN(){return!!document&&document.hidden}function gi(n){n===void 0&&(n={});var e=0,t=0,i=0,r,s=0,o=null;function u(C){var N=window.Promise&&new Promise(function(I){return o=I});return C.finished=N,N}var f=YZ(n);u(f);function p(){var C=f.direction;C!=="alternate"&&(f.direction=C!=="normal"?"normal":"reverse"),f.reversed=!f.reversed,r.forEach(function(N){return N.reversed=f.reversed})}function m(C){return f.reversed?f.duration-C:C}function v(){e=0,t=m(f.currentTime)*(1/gi.speed)}function _(C,N){N&&N.seek(C-N.timelineOffset)}function x(C){if(f.reversePlayback)for(var I=s;I--;)_(C,r[I]);else for(var N=0;N<s;N++)_(C,r[N])}function S(C){for(var N=0,I=f.animations,U=I.length;N<U;){var L=I[N],F=L.animatable,H=L.tweens,P=H.length-1,k=H[P];P&&(k=SS(H,function(ge){return C<ge.end})[0]||k);for(var Y=Ol(C-k.start-k.delay,0,k.duration)/k.duration,ie=isNaN(Y)?1:k.easing(Y),te=k.to.strings,le=k.round,de=[],Z=k.to.numbers.length,Q=void 0,ve=0;ve<Z;ve++){var Te=void 0,we=k.to.numbers[ve],X=k.from.numbers[ve]||0;k.isPath?Te=VZ(k.value,ie*we,k.isPathTargetInsideSVG):Te=X+ie*(we-X),le&&(k.isColor&&ve>2||(Te=Math.round(Te*le)/le)),de.push(Te)}var ce=te.length;if(!ce)Q=de[0];else{Q=te[0];for(var xe=0;xe<ce;xe++){te[xe];var Be=te[xe+1],mt=de[xe];isNaN(mt)||(Be?Q+=mt+Be:Q+=mt+" ")}}qL[L.type](F.target,L.property,Q,F.transforms),L.currentValue=Q,N++}}function A(C){f[C]&&!f.passThrough&&f[C](f)}function E(){f.remaining&&f.remaining!==!0&&f.remaining--}function M(C){var N=f.duration,I=f.delay,U=N-f.endDelay,L=m(C);f.progress=Ol(L/N*100,0,100),f.reversePlayback=L<f.currentTime,r&&x(L),!f.began&&f.currentTime>0&&(f.began=!0,A("begin")),!f.loopBegan&&f.currentTime>0&&(f.loopBegan=!0,A("loopBegin")),L<=I&&f.currentTime!==0&&S(0),(L>=U&&f.currentTime!==N||!N)&&S(N),L>I&&L<U?(f.changeBegan||(f.changeBegan=!0,f.changeCompleted=!1,A("changeBegin")),A("change"),S(L)):f.changeBegan&&(f.changeCompleted=!0,f.changeBegan=!1,A("changeComplete")),f.currentTime=Ol(L,0,N),f.began&&A("update"),C>=N&&(t=0,E(),f.remaining?(e=i,A("loopComplete"),f.loopBegan=!1,f.direction==="alternate"&&p()):(f.paused=!0,f.completed||(f.completed=!0,A("loopComplete"),A("complete"),!f.passThrough&&"Promise"in window&&(o(),u(f)))))}return f.reset=function(){var C=f.direction;f.passThrough=!1,f.currentTime=0,f.progress=0,f.paused=!0,f.began=!1,f.loopBegan=!1,f.changeBegan=!1,f.completed=!1,f.changeCompleted=!1,f.reversePlayback=!1,f.reversed=C==="reverse",f.remaining=f.loop,r=f.children,s=r.length;for(var N=s;N--;)f.children[N].reset();(f.reversed&&f.loop!==!0||C==="alternate"&&f.loop===1)&&f.remaining++,S(f.reversed?f.duration:0)},f._onDocumentVisibility=v,f.set=function(C,N){return XL(C,N),f},f.tick=function(C){i=C,e||(e=i),M((i+(t-e))*gi.speed)},f.seek=function(C){M(m(C))},f.pause=function(){f.paused=!0,v()},f.play=function(){f.paused&&(f.completed&&f.reset(),f.paused=!1,Wo.push(f),v(),YL())},f.reverse=function(){p(),f.completed=!f.reversed,v()},f.restart=function(){f.reset(),f.play()},f.remove=function(C){var N=$T(C);ZL(N,f)},f.reset(),f.autoplay&&f.play(),f}function PN(n,e){for(var t=e.length;t--;)VT(n,e[t].animatable.target)&&e.splice(t,1)}function ZL(n,e){var t=e.animations,i=e.children;PN(n,t);for(var r=i.length;r--;){var s=i[r],o=s.animations;PN(n,o),!o.length&&!s.children.length&&i.splice(r,1)}!t.length&&!i.length&&e.pause()}function ZZ(n){for(var e=$T(n),t=Wo.length;t--;){var i=Wo[t];ZL(e,i)}}function KZ(n,e){e===void 0&&(e={});var t=e.direction||"normal",i=e.easing?FT(e.easing):null,r=e.grid,s=e.axis,o=e.from||0,u=o==="first",f=o==="center",p=o==="last",m=Jt.arr(n),v=parseFloat(m?n[0]:n),_=m?parseFloat(n[1]):0,x=Nc(m?n[1]:n)||0,S=e.start||0+(m?v:0),A=[],E=0;return function(M,C,N){if(u&&(o=0),f&&(o=(N-1)/2),p&&(o=N-1),!A.length){for(var I=0;I<N;I++){if(!r)A.push(Math.abs(o-I));else{var U=f?(r[0]-1)/2:o%r[0],L=f?(r[1]-1)/2:Math.floor(o/r[0]),F=I%r[0],H=Math.floor(I/r[0]),P=U-F,k=L-H,Y=Math.sqrt(P*P+k*k);s==="x"&&(Y=-P),s==="y"&&(Y=-k),A.push(Y)}E=Math.max.apply(Math,A)}i&&(A=A.map(function(te){return i(te/E)*E})),t==="reverse"&&(A=A.map(function(te){return s?te<0?te*-1:-te:Math.abs(E-te)}))}var ie=m?(_-v)/E:v;return S+ie*(Math.round(A[C]*100)/100)+x}}function JZ(n){n===void 0&&(n={});var e=gi(n);return e.duration=0,e.add=function(t,i){var r=Wo.indexOf(e),s=e.children;r>-1&&Wo.splice(r,1);function o(_){_.passThrough=!0}for(var u=0;u<s.length;u++)o(s[u]);var f=MS(t,XM(zT,n));f.targets=f.targets||n.targets;var p=e.duration;f.autoplay=!1,f.direction=e.direction,f.timelineOffset=Jt.und(i)?p:qT(i,p),o(e),e.seek(f.timelineOffset);var m=gi(f);o(m),s.push(m);var v=$L(s,n);return e.delay=v.delay,e.endDelay=v.endDelay,e.duration=v.duration,e.seek(0),e.reset(),e.autoplay&&e.play(),e},e}gi.version="3.2.1";gi.speed=1;gi.suspendWhenDocumentHidden=!0;gi.running=Wo;gi.remove=ZZ;gi.get=WT;gi.set=XL;gi.convertPx=GT;gi.path=FZ;gi.setDashoffset=BZ;gi.stagger=KZ;gi.timeline=JZ;gi.easing=FT;gi.penner=kL;gi.random=function(n,e){return Math.floor(Math.random()*(e-n+1))+n};const YM=[{id:1,title:"Casio FX-991EX Classwiz (Used)",category:"Stationary",price:"600",images:["https://plus.unsplash.com/premium_vector-1723120469380-a153f3528814?auto=format&fit=crop&q=80&w=1000","https://plus.unsplash.com/premium_vector-1723390521527-08101b4d0ee3?auto=format&fit=crop&q=80&w=1000","https://images.unsplash.com/photo-1611186871348-b1ce696e52c9?auto=format&fit=crop&q=80&w=1000"],seller:"Aarya Nadiger",trustScore:95,description:"Used for 1 semester. Perfect condition. Includes original sliding cover. Essential for engineering exams."},{id:2,title:"Engineering Drafter & Roller Scale",category:"Stationary",price:"450",images:["https://plus.unsplash.com/premium_vector-1723390521527-08101b4d0ee3?auto=format&fit=crop&q=80&w=1000","https://images.unsplash.com/photo-1581093450021-4a7360e9a6b5?auto=format&fit=crop&q=80&w=1000","https://plus.unsplash.com/premium_vector-1723120469380-a153f3528814?auto=format&fit=crop&q=80&w=1000"],seller:"Rushi Shah",trustScore:98,description:"Mini drafter suitable for ED/EGD labs. Roller scale included. Brand: Omega."},{id:3,title:"Arduino Uno Starter Kit",category:"Tech",price:"850",images:["https://images.unsplash.com/photo-1555664424-778a1e5e1b48?auto=format&fit=crop&q=80&w=1000","https://plus.unsplash.com/premium_vector-1723120469380-a153f3528814?auto=format&fit=crop&q=80&w=1000","https://images.unsplash.com/photo-1553406830-ef2513450d76?auto=format&fit=crop&q=80&w=1000"],seller:"Meemoh Shukla",trustScore:90,description:"Includes Uno board, breadboard, jumper wires, LEDs, resistors, and sensors. Great for First Year projects."},{id:4,title:"Electric Kettle (1.5L)",category:"Essentials",price:"500",images:["https://plus.unsplash.com/premium_vector-1723390521527-08101b4d0ee3?auto=format&fit=crop&q=80&w=1000","https://images.unsplash.com/photo-1520986606214-8b456906c813?auto=format&fit=crop&q=80&w=1000","https://plus.unsplash.com/premium_vector-1723120469380-a153f3528814?auto=format&fit=crop&q=80&w=1000"],seller:"Prithish Gurbani",trustScore:85,description:"Prestige 1.5L Kettle. Works perfectly. Boils water in 2 mins. Cable included."},{id:5,title:"Lab Coat (Size M) + Goggles",category:"Essentials",price:"200",images:["https://plus.unsplash.com/premium_vector-1723120469380-a153f3528814?auto=format&fit=crop&q=80&w=1000","https://images.unsplash.com/photo-1576091160399-112ba8d25d1d?auto=format&fit=crop&q=80&w=1000","https://plus.unsplash.com/premium_vector-1723390521527-08101b4d0ee3?auto=format&fit=crop&q=80&w=1000"],seller:"Tanish Parekh",trustScore:100,description:"Cotton lab coat, Size M. Hardly used. Safety goggles included for Chem lab."},{id:6,title:"Hercules Cycle (Black)",category:"Transport",price:"2,500",images:["https://plus.unsplash.com/premium_vector-1723390521527-08101b4d0ee3?auto=format&fit=crop&q=80&w=1000","https://images.unsplash.com/photo-1485965120184-e220f721d03e?auto=format&fit=crop&q=80&w=1000","https://plus.unsplash.com/premium_vector-1723120469380-a153f3528814?auto=format&fit=crop&q=80&w=1000"],seller:"Sarvesh Nimbalkar",trustScore:92,description:"Single speed Hercules cycle. Tyres replaced recently. Good condition for campus commuting."},{id:7,title:"Engineering Math (K.A. Stroud)",category:"Textbooks",price:"350",images:["https://plus.unsplash.com/premium_vector-1723120469380-a153f3528814?auto=format&fit=crop&q=80&w=1000","https://images.unsplash.com/photo-1544716278-ca5e3f4abd8c?auto=format&fit=crop&q=80&w=1000","https://plus.unsplash.com/premium_vector-1723390521527-08101b4d0ee3?auto=format&fit=crop&q=80&w=1000"],seller:"Arjun Shetty",trustScore:97,description:"Fifth Edition. No highlighting/markings inside. Essential for first year calculus."},{id:8,title:"Extension Board (4 Socket)",category:"Essentials",price:"300",images:["https://plus.unsplash.com/premium_vector-1723390521527-08101b4d0ee3?auto=format&fit=crop&q=80&w=1000","https://images.unsplash.com/photo-1628859940176-02a4bf746b45?auto=format&fit=crop&q=80&w=1000","https://plus.unsplash.com/premium_vector-1723120469380-a153f3528814?auto=format&fit=crop&q=80&w=1000"],seller:"Viyomm",trustScore:88,description:"Belkin 4-socket surge protector. 1.5m wire length. Must have for hostel rooms."}],QZ=({item:n})=>{const e=so.useRef(null),t=i=>{if(e.current){const{clientWidth:r}=e.current,s=i==="left"?-r:r;e.current.scrollBy({left:s,behavior:"smooth"})}};return V.jsxs("div",{className:"group relative bg-surface border border-white/5 hover:border-white/20 hover:z-[50] transition-colors duration-300",children:[V.jsxs("div",{className:"relative aspect-[4/3] overflow-hidden",children:[V.jsx("div",{ref:e,className:"w-full h-full overflow-x-auto flex snap-x snap-mandatory scrollbar-hide",children:n.images.map((i,r)=>V.jsx("img",{src:i,alt:`${n.title} ${r+1}`,className:"w-full h-full object-cover shrink-0 snap-center"},r))}),V.jsx("button",{onClick:i=>{i.preventDefault(),t("left")},className:"absolute left-2 top-1/2 -translate-y-1/2 bg-black/50 text-white p-1 rounded-full opacity-0 group-hover:opacity-100 transition-opacity hover:bg-black/70 z-10",children:V.jsx(cF,{size:20})}),V.jsx("button",{onClick:i=>{i.preventDefault(),t("right")},className:"absolute right-2 top-1/2 -translate-y-1/2 bg-black/50 text-white p-1 rounded-full opacity-0 group-hover:opacity-100 transition-opacity hover:bg-black/70 z-10",children:V.jsx(hF,{size:20})})]}),V.jsxs("div",{className:"p-4",children:[V.jsxs("div",{className:"flex justify-between items-start mb-2",children:[V.jsx("span",{className:"text-xs font-bold text-accent uppercase tracking-wider",children:n.category}),V.jsxs("div",{className:"flex items-center gap-1 text-xs text-gray-400",children:[V.jsx(rE,{size:12,className:"text-yellow-500 fill-current"})," ",n.trustScore]})]}),V.jsx("h3",{className:"text-white font-medium truncate mb-1",children:n.title}),V.jsx("p",{className:"text-lg font-bold text-white",children:n.price}),V.jsxs("div",{className:"mt-4 pt-4 border-t border-white/10 flex justify-between items-center text-sm text-gray-400",children:[V.jsxs("span",{children:["@",n.seller]}),V.jsx(Zo,{to:`/market/${n.id}`,variant:"primary",className:"px-4 py-2 text-xs",children:"View"})]})]})]})},eK=()=>{const[n,e]=K.useState("All"),t=["All","Stationary","Tech","Essentials","Transport","Textbooks"],i=n==="All"?YM:YM.filter(r=>r.category===n);return K.useEffect(()=>{gi({targets:".market-card",opacity:[0,1],translateY:[20,0],delay:gi.stagger(100),easing:"easeOutExpo"})},[n]),V.jsx("div",{className:"min-h-screen bg-background pt-24 pb-20 px-6 md:px-12",children:V.jsxs("div",{className:"max-w-7xl mx-auto",children:[V.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-center mb-12",children:[V.jsx("h1",{className:"text-5xl font-display font-bold text-white mb-6 md:mb-0",children:"Marketplace"}),V.jsx("div",{className:"flex gap-2 overflow-x-auto pb-2 md:pb-0 w-full md:w-auto p-1",children:t.map(r=>V.jsx("button",{onClick:()=>e(r),className:`px-4 py-2 text-sm font-medium border transition-all duration-300 whitespace-nowrap
                  ${n===r?"bg-white text-black border-white":"text-gray-400 border-white/10 hover:border-white/50 hover:text-white"}`,children:r},r))})]}),V.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:i.map((r,s)=>V.jsx("div",{className:"market-card opacity-0",children:V.jsx(QZ,{item:r})},r.id))})]})})},tK=[{id:"tutoring",title:"Peer Tutoring",description:"Ace your mid-terms with help from seniors who topped the class.",icon:V.jsx(SD,{size:40}),availableCount:42,provider:"Aarya Nadiger"},{id:"printing",title:"Print & Bind",description:"Fast, cheap printing delivered to your hostel room. Assignments & theses.",icon:V.jsx(AF,{size:40}),availableCount:8,provider:"Rushi Shah"},{id:"repair",title:"Tech Repair",description:"Broken laptop screen or phone issues? Student-run reliable fixes.",icon:V.jsx(ED,{size:40}),availableCount:12,provider:"Meemoh Shukla"},{id:"coding",title:"Coding Mentorship",description:"Debug help for C++, Python, and Java semester projects.",icon:V.jsx(vF,{size:40}),availableCount:25,provider:"Prithish Gurbani"},{id:"photography",title:"Event Media",description:"Hire photographers and videographers for your club events.",icon:V.jsx(wD,{size:40}),availableCount:5,provider:"Tanish Parekh"},{id:"events",title:"Committee Events",description:"Find committees recruiting new members or hosting workshops.",icon:V.jsx(aF,{size:40}),availableCount:7,provider:"Sarvesh Nimbalkar"}],nK=({service:n,index:e})=>V.jsxs("div",{className:"service-card group relative p-8 bg-surface border border-white/5 hover:border-white/20 hover:z-[50] transition-all duration-500 min-h-[300px] flex flex-col justify-end",children:[V.jsx("div",{className:"absolute top-8 right-8 text-gray-700 group-hover:text-accent transition-colors duration-500",children:n.icon}),V.jsxs("div",{className:"relative z-10",children:[V.jsx("h3",{className:"text-3xl font-display font-bold text-white mb-4 group-hover:translate-x-2 transition-transform duration-300",children:n.title}),V.jsx("p",{className:"text-gray-400 max-w-sm mb-6 opacity-80 group-hover:opacity-100 transition-opacity",children:n.description}),V.jsxs("div",{className:"flex items-center gap-4",children:[V.jsxs("div",{className:"flex flex-col",children:[V.jsxs("span",{className:"text-xs font-bold uppercase tracking-wider text-accent mb-1",children:[n.availableCount," Active Listed"]}),V.jsxs("span",{className:"text-[10px] uppercase tracking-widest text-gray-500",children:["Head: ",n.provider]})]}),V.jsx(Zo,{variant:"outline",className:"px-6 py-2 ml-auto",children:"View"})]})]}),V.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black/80 to-transparent opacity-0 group-hover:opacity-100 transition-opacity duration-500 pointer-events-none"})]}),iK=()=>V.jsx("div",{className:"min-h-screen bg-background pt-32 pb-20 px-6 md:px-12",children:V.jsxs("div",{className:"max-w-7xl mx-auto",children:[V.jsxs("div",{className:"mb-16 animate-fade-in",children:[V.jsx("span",{className:"text-accent text-sm font-bold uppercase tracking-widest mb-2 block",children:"Our Ecosystem"}),V.jsx("h1",{className:"text-5xl md:text-7xl font-display font-bold text-white mb-8",children:"Campus Services"}),V.jsx("p",{className:"text-xl text-gray-400 max-w-2xl font-light",children:"Everything you need to survive and thrive on campus. From academic support to logistical solutions."})]}),V.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:tK.map((n,e)=>V.jsx("div",{style:{animationDelay:`${e*150}ms`},className:"opacity-0 animate-fade-in fill-mode-forwards",children:V.jsx(nK,{service:n,index:e})},n.id))}),V.jsxs("div",{className:"mt-20 p-12 bg-zinc-900 border border-white/5 relative overflow-hidden text-center opacity-0 animate-fade-in fill-mode-forwards",style:{animationDelay:"600ms"},children:[V.jsx("h2",{className:"text-3xl font-display font-bold text-white mb-6",children:"Need a custom service?"}),V.jsx("p",{className:"text-gray-400 mb-8 max-w-xl mx-auto",children:"Post a request for tasks, tutoring, or help. The community is here to support you."}),V.jsx(Zo,{variant:"primary",className:"px-8 py-3",children:"Post Request"})]})]})}),rK=()=>(K.useEffect(()=>{gi({targets:".trust-score-counter",innerHTML:[0,0],round:1,easing:"easeInOutExpo",duration:2e3});const e=283,t=e-e*0/100;gi({targets:".trust-ring-path",strokeDashoffset:[e,t],easing:"easeInOutExpo",duration:2500,delay:500})},[0]),V.jsxs("div",{className:"min-h-screen bg-background pt-32 pb-20 px-6 md:px-12 relative overflow-hidden",children:[V.jsx("div",{className:"absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 w-[600px] h-[600px] bg-accent/5 rounded-full blur-[120px] pointer-events-none"}),V.jsxs("div",{className:"max-w-6xl mx-auto grid grid-cols-1 lg:grid-cols-2 gap-16 items-center",children:[V.jsxs("div",{className:"relative",children:[V.jsxs("div",{className:"relative w-80 h-80 mx-auto lg:mx-0 flex items-center justify-center",children:[V.jsxs("svg",{className:"absolute inset-0 w-full h-full rotate-[-90deg]",viewBox:"0 0 100 100",children:[V.jsx("circle",{cx:"50",cy:"50",r:"45",fill:"none",stroke:"#222",strokeWidth:"2"}),V.jsx("circle",{className:"trust-ring-path",cx:"50",cy:"50",r:"45",fill:"none",stroke:"#fff",strokeWidth:"2",strokeDasharray:"283",strokeDashoffset:"283",strokeLinecap:"round"})]}),V.jsxs("div",{className:"text-center z-10 px-6 flex flex-col items-center justify-center w-full h-full absolute inset-0",children:[V.jsx("span",{className:"block text-gray-400 text-xs tracking-widest uppercase mb-1",children:"Your Trust Score"}),V.jsx("span",{className:"trust-score-counter text-7xl font-display font-bold text-white mb-2",children:"0"}),V.jsx("span",{className:"block text-accent text-[10px] uppercase font-bold tracking-wider max-w-[180px] leading-tight",children:"Complete an order to increase score"})]})]}),V.jsxs("div",{className:"mt-12 space-y-4",children:[V.jsxs("div",{className:"p-4 bg-white/5 border border-white/10 flex items-center gap-4 hover:bg-white/10 transition-colors cursor-pointer",children:[V.jsx("div",{className:"w-10 h-10 bg-accent/20 flex items-center justify-center text-accent rounded-full",children:V.jsx(MD,{size:20})}),V.jsxs("div",{children:[V.jsx("h4",{className:"text-white font-bold",children:"Verified NMIMS Student"}),V.jsx("p",{className:"text-gray-400 text-xs",children:"Email Verification Complete"})]})]}),V.jsxs("div",{className:"p-4 bg-white/5 border border-white/10 flex items-center gap-4 hover:bg-white/10 transition-colors cursor-pointer",children:[V.jsx("div",{className:"w-10 h-10 bg-green-500/20 flex items-center justify-center text-green-500 rounded-full",children:V.jsx(GF,{size:20})}),V.jsxs("div",{children:[V.jsx("h4",{className:"text-white font-bold",children:"Top Seller Badge"}),V.jsx("p",{className:"text-gray-400 text-xs",children:"Based on 15+ successful trades"})]})]})]})]}),V.jsxs("div",{className:"text-center lg:text-left",children:[V.jsxs("h1",{className:"text-5xl md:text-6xl font-display font-bold text-white mb-6",children:["Build meaningful ",V.jsx("br",{}),V.jsx("span",{className:"text-gray-500",children:"connections."})]}),V.jsx("p",{className:"text-xl text-gray-400 mb-10 leading-relaxed max-w-lg mx-auto lg:mx-0",children:"A community built on trust. Verify your college ID to unlock exclusive trading privileges, mentorship opportunities, and committee events."}),V.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 justify-center lg:justify-start",children:[V.jsx(Zo,{variant:"primary",className:"px-8 py-4",children:"Connect ID Card"}),V.jsx(Zo,{variant:"outline",className:"px-8 py-4",children:"Join Community Design"})]}),V.jsxs("div",{className:"mt-16 grid grid-cols-3 gap-8 border-t border-white/10 pt-8",children:[V.jsxs("div",{children:[V.jsx("h3",{className:"text-3xl font-bold text-white mb-1",children:"2.5k+"}),V.jsx("p",{className:"text-gray-500 text-xs uppercase tracking-wider",children:"Verified Students"})]}),V.jsxs("div",{children:[V.jsx("h3",{className:"text-3xl font-bold text-white mb-1",children:"500+"}),V.jsx("p",{className:"text-gray-500 text-xs uppercase tracking-wider",children:"Daily Trades"})]}),V.jsxs("div",{children:[V.jsx("h3",{className:"text-3xl font-bold text-white mb-1",children:"50+"}),V.jsx("p",{className:"text-gray-500 text-xs uppercase tracking-wider",children:"Active Events"})]})]})]})]})]})),sK=()=>{const n=K.useRef(null),e=Ib(),[t,i]=K.useState(!1),[r,s]=K.useState(null),[o,u]=K.useState(""),[f,p]=K.useState("");K.useEffect(()=>{gi({targets:n.current,translateY:[20,0],opacity:[0,1],easing:"easeOutExpo",duration:800})},[]);const m=async v=>{v.preventDefault(),i(!0),s(null);try{const{data:_,error:x}=await Rl.auth.signInWithPassword({email:o,password:f});if(x)throw x;e("/")}catch(_){s(_.message)}finally{i(!1)}};return V.jsxs("div",{className:"min-h-screen flex items-center justify-center bg-background relative overflow-hidden px-4",children:[V.jsx("div",{className:"absolute top-0 right-0 w-96 h-96 bg-accent/5 rounded-full blur-[100px] pointer-events-none"}),V.jsx("div",{className:"absolute bottom-0 left-0 w-64 h-64 bg-white/5 rounded-full blur-[80px] pointer-events-none"}),V.jsxs("div",{ref:n,className:"w-full max-w-md bg-surface/50 backdrop-blur-md border border-white/10 p-8 md:p-12 relative z-10 opacity-0 rounded-sm shadow-2xl",children:[V.jsxs("div",{className:"mb-8 text-center",children:[V.jsx("h1",{className:"text-3xl font-display font-bold text-white mb-2",children:"Welcome Back"}),V.jsx("p",{className:"text-gray-400 text-sm",children:"Sign in to access your dashboard"})]}),r&&V.jsx("div",{className:"mb-4 p-3 bg-red-500/10 border border-red-500/50 text-red-500 text-xs rounded-sm",children:r}),V.jsxs("form",{onSubmit:m,className:"space-y-6",children:[V.jsxs("div",{children:[V.jsx("label",{className:"block text-xs uppercase tracking-wider text-gray-500 mb-2 font-bold",children:"Email or NMIMS ID"}),V.jsx("input",{type:"email",value:o,onChange:v=>u(v.target.value),className:"w-full bg-black/20 border border-white/10 p-3 text-white focus:outline-none focus:border-accent transition-colors text-sm",placeholder:"student@nmims.edu",required:!0})]}),V.jsxs("div",{children:[V.jsxs("div",{className:"flex justify-between mb-2",children:[V.jsx("label",{className:"block text-xs uppercase tracking-wider text-gray-500 font-bold",children:"Password"}),V.jsx(Dl,{to:"/forgot-password",class:"text-xs text-accent hover:text-white transition-colors",children:"Forgot?"})]}),V.jsx("input",{type:"password",value:f,onChange:v=>p(v.target.value),className:"w-full bg-black/20 border border-white/10 p-3 text-white focus:outline-none focus:border-accent transition-colors text-sm",placeholder:"",required:!0})]}),V.jsx(Zo,{type:"submit",variant:"accent",fullWidth:!0,disabled:t,children:t?"Signing In...":"Sign In"})]}),V.jsxs("div",{className:"mt-8 text-center text-sm text-gray-400",children:["Don't have an account? ",V.jsx(Dl,{to:"/signup",className:"text-white hover:text-accent font-bold transition-colors",children:"Sign Up"})]})]})]})},aK=()=>{const n=K.useRef(null),e=Ib(),[t,i]=so.useState(!1),[r,s]=so.useState(null),[o,u]=so.useState({firstName:"",lastName:"",email:"",password:""});K.useEffect(()=>{gi({targets:n.current,translateY:[20,0],opacity:[0,1],easing:"easeOutExpo",duration:800})},[]);const f=m=>{u({...o,[m.target.name]:m.target.value})},p=async m=>{m.preventDefault(),i(!0),s(null);try{const{data:v,error:_}=await Rl.auth.signUp({email:o.email,password:o.password,options:{data:{first_name:o.firstName,last_name:o.lastName}}});if(_)throw _;alert("Signup successful! Check your email for verification link."),e("/login")}catch(v){s(v.message)}finally{i(!1)}};return V.jsxs("div",{className:"min-h-screen flex items-center justify-center bg-background relative overflow-hidden px-4 py-20",children:[V.jsx("div",{className:"absolute top-0 left-0 w-96 h-96 bg-accent/5 rounded-full blur-[100px] pointer-events-none"}),V.jsxs("div",{ref:n,className:"w-full max-w-md bg-surface/50 backdrop-blur-md border border-white/10 p-8 md:p-12 relative z-10 opacity-0 rounded-sm shadow-2xl",children:[V.jsxs("div",{className:"mb-8 text-center",children:[V.jsx("h1",{className:"text-3xl font-display font-bold text-white mb-2",children:"Join Campus Nodes"}),V.jsx("p",{className:"text-gray-400 text-sm",children:"Create an account to start trading & connecting"})]}),r&&V.jsx("div",{className:"mb-4 p-3 bg-red-500/10 border border-red-500/50 text-red-500 text-xs rounded-sm",children:r}),V.jsxs("form",{onSubmit:p,className:"space-y-5",children:[V.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[V.jsxs("div",{children:[V.jsx("label",{className:"block text-xs uppercase tracking-wider text-gray-500 mb-2 font-bold",children:"First Name"}),V.jsx("input",{type:"text",name:"firstName",value:o.firstName,onChange:f,className:"w-full bg-black/20 border border-white/10 p-3 text-white focus:outline-none focus:border-accent transition-colors text-sm",placeholder:"Rohan",required:!0})]}),V.jsxs("div",{children:[V.jsx("label",{className:"block text-xs uppercase tracking-wider text-gray-500 mb-2 font-bold",children:"Last Name"}),V.jsx("input",{type:"text",name:"lastName",value:o.lastName,onChange:f,className:"w-full bg-black/20 border border-white/10 p-3 text-white focus:outline-none focus:border-accent transition-colors text-sm",placeholder:"Sharma",required:!0})]})]}),V.jsxs("div",{children:[V.jsx("label",{className:"block text-xs uppercase tracking-wider text-gray-500 mb-2 font-bold",children:"Student Email"}),V.jsx("input",{type:"email",name:"email",value:o.email,onChange:f,className:"w-full bg-black/20 border border-white/10 p-3 text-white focus:outline-none focus:border-accent transition-colors text-sm",placeholder:"firstname.lastname@nmims.edu",required:!0}),V.jsx("p",{className:"text-[10px] text-gray-500 mt-1",children:"We'll need this to verify your student status later."})]}),V.jsxs("div",{children:[V.jsx("label",{className:"block text-xs uppercase tracking-wider text-gray-500 mb-2 font-bold",children:"Create Password"}),V.jsx("input",{type:"password",name:"password",value:o.password,onChange:f,className:"w-full bg-black/20 border border-white/10 p-3 text-white focus:outline-none focus:border-accent transition-colors text-sm",placeholder:"",required:!0})]}),V.jsxs("div",{className:"pt-2",children:[V.jsxs("div",{className:"flex items-start gap-2 mb-4",children:[V.jsx("input",{type:"checkbox",className:"mt-1 bg-black border-white/20 accent-accent",required:!0}),V.jsxs("span",{className:"text-xs text-gray-400 leading-tight",children:["I agree to the ",V.jsx("a",{href:"#",className:"text-white hover:underline",children:"Terms of Service"})," and ",V.jsx("a",{href:"#",className:"text-white hover:underline",children:"Privacy Policy"}),"."]})]}),V.jsx(Zo,{type:"submit",variant:"primary",fullWidth:!0,disabled:t,children:t?"Creating Account...":"Create Account"})]})]}),V.jsxs("div",{className:"mt-8 text-center text-sm text-gray-400",children:["Already have an account? ",V.jsx(Dl,{to:"/login",className:"text-white hover:text-accent font-bold transition-colors",children:"Sign In"})]})]})]})},oK=()=>{const{user:n}=JM(),[e,t]=K.useState(!1),[i,r]=K.useState(!1),[s,o]=K.useState(!1),u=K.useRef(null),[f,p]=K.useState({firstName:n?.user_metadata?.first_name||"",lastName:n?.user_metadata?.last_name||"",bio:n?.user_metadata?.bio||""});if(!n)return V.jsx("div",{className:"pt-32 px-12 text-white",children:"Please log in to view profile."});const m=n.user_metadata?.first_name?n.user_metadata.first_name[0]:n.email[0].toUpperCase(),v=n.user_metadata?.avatar_url,_=async A=>{A.preventDefault(),r(!0);const{error:E}=await Rl.auth.updateUser({data:{first_name:f.firstName,last_name:f.lastName,bio:f.bio}});r(!1),E||t(!1)},x=async A=>{try{o(!0);const E=A.target.files[0];if(!E)return;const M=E.name.split(".").pop(),N=`${`${n.id}/${Date.now()}.${M}`}`,{error:I}=await Rl.storage.from("avatars").upload(N,E);if(I)throw I;const{data:{publicUrl:U}}=Rl.storage.from("avatars").getPublicUrl(N),{error:L}=await Rl.auth.updateUser({data:{avatar_url:U}});if(L)throw L}catch(E){console.error("Error uploading avatar:",E.message),alert(`Error: ${E.message}`)}finally{o(!1)}},S=async()=>{try{o(!0);const{error:A}=await Rl.auth.updateUser({data:{avatar_url:null}});if(A)throw A}catch(A){console.error("Error removing avatar:",A.message)}finally{o(!1)}};return V.jsx("div",{className:"min-h-screen bg-background pt-32 pb-20 px-6 md:px-12",children:V.jsxs("div",{className:"max-w-4xl mx-auto",children:[V.jsxs("div",{className:"flex flex-col md:flex-row gap-8 items-start mb-12 relative group/profile",children:[!e&&V.jsx("button",{onClick:A=>{A.preventDefault(),t(!0)},className:"absolute top-0 right-0 p-3 text-gray-400 hover:text-white border border-white/10 rounded-full hover:bg-white/10 transition-colors z-50 cursor-pointer",children:V.jsx(EF,{size:20})}),V.jsxs("div",{className:"relative group w-32 h-32 shrink-0",children:[V.jsx("div",{className:"w-full h-full rounded-full bg-gradient-to-br from-gray-800 to-black border-2 border-white/20 flex items-center justify-center text-4xl font-bold text-white shadow-2xl overflow-hidden relative",children:s?V.jsx(wF,{className:"animate-spin text-white",size:32}):v?V.jsx("img",{src:v,alt:"Profile",className:"w-full h-full object-cover"}):m}),V.jsxs("div",{className:"absolute inset-0 bg-black/60 rounded-full opacity-0 group-hover:opacity-100 transition-opacity duration-300 flex items-center justify-center gap-2 backdrop-blur-sm z-10",children:[V.jsx("button",{onClick:()=>u.current.click(),className:"p-2 bg-white/10 rounded-full hover:bg-white/20 text-white transition-colors",title:"Upload Photo",children:V.jsx(wD,{size:18})}),v&&V.jsx("button",{onClick:S,className:"p-2 bg-red-500/20 rounded-full hover:bg-red-500/40 text-red-500 transition-colors",title:"Remove Photo",children:V.jsx(zF,{size:18})})]}),V.jsx("input",{type:"file",ref:u,onChange:x,className:"hidden",accept:"image/*"})]}),V.jsx("div",{className:"flex-1 w-full relative",children:e?V.jsxs("form",{onSubmit:_,className:"bg-white/5 border border-white/10 p-6 rounded-lg space-y-4 animate-fade-in relative",children:[V.jsx("button",{type:"button",onClick:()=>t(!1),className:"absolute top-4 right-4 text-gray-400 hover:text-white",children:V.jsx(TD,{size:20})}),V.jsx("h3",{className:"text-xl font-bold text-white mb-4",children:"Edit Profile"}),V.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[V.jsxs("div",{children:[V.jsx("label",{className:"block text-xs uppercase tracking-wider text-gray-500 mb-1",children:"First Name"}),V.jsx("input",{type:"text",value:f.firstName,onChange:A=>p({...f,firstName:A.target.value}),className:"w-full bg-black border border-white/20 p-2 text-white focus:border-accent outline-none rounded"})]}),V.jsxs("div",{children:[V.jsx("label",{className:"block text-xs uppercase tracking-wider text-gray-500 mb-1",children:"Last Name"}),V.jsx("input",{type:"text",value:f.lastName,onChange:A=>p({...f,lastName:A.target.value}),className:"w-full bg-black border border-white/20 p-2 text-white focus:border-accent outline-none rounded"})]})]}),V.jsxs("div",{children:[V.jsx("label",{className:"block text-xs uppercase tracking-wider text-gray-500 mb-1",children:"Bio"}),V.jsx("textarea",{rows:"3",value:f.bio,onChange:A=>p({...f,bio:A.target.value}),className:"w-full bg-black border border-white/20 p-2 text-white focus:border-accent outline-none rounded"})]}),V.jsxs("button",{type:"submit",disabled:i,className:"px-6 py-2 bg-white text-black font-bold uppercase tracking-widest hover:bg-gray-200 transition-colors rounded flex items-center gap-2",children:[V.jsx(RF,{size:16})," ",i?"Saving...":"Save Changes"]})]}):V.jsxs("div",{className:"animate-fade-in",children:[V.jsxs("h1",{className:"text-4xl font-display font-bold text-white mb-2",children:[n.user_metadata?.first_name||"Student"," ",n.user_metadata?.last_name||""]}),V.jsx("p",{className:"text-gray-400 mb-4",children:n.email}),V.jsx("p",{className:"text-gray-300 italic mb-6 max-w-xl",children:n.user_metadata?.bio||"No bio yet."}),V.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[V.jsxs("div",{className:"p-4 bg-white/5 border border-white/10 rounded flex items-center gap-3",children:[V.jsx(MD,{className:"text-accent",size:20}),V.jsxs("div",{children:[V.jsx("p",{className:"text-xs text-gray-500 uppercase tracking-wider",children:"Trust Score"}),V.jsx("p",{className:"text-xl font-bold text-white",children:"0"})]})]}),V.jsxs("div",{className:"p-4 bg-white/5 border border-white/10 rounded flex items-center gap-3",children:[V.jsx(SD,{className:"text-blue-400",size:20}),V.jsxs("div",{children:[V.jsx("p",{className:"text-xs text-gray-500 uppercase tracking-wider",children:"Major"}),V.jsx("p",{className:"text-white",children:"Computer Engineering"})]})]})]})]})})]}),V.jsxs("div",{className:"mt-8 border-t border-white/10 pt-8",children:[V.jsx("h2",{className:"text-2xl font-bold text-white mb-6",children:"Recent Activity"}),V.jsx("div",{className:"p-12 text-center border border-dashed border-white/10 rounded-lg text-gray-500",children:"No recent trades or services."})]})]})})},lK=()=>V.jsxs("div",{className:"min-h-screen bg-background flex flex-col justify-center items-center",children:[V.jsx(sE,{className:"w-20 h-20 mb-8 opacity-50"}),V.jsx("h1",{className:"text-2xl font-display font-bold text-white tracking-widest",children:"SETTINGS"}),V.jsx("p",{className:"text-gray-500 mt-2",children:"Nothing to see here yet."})]}),cK=()=>V.jsxs("div",{className:"min-h-screen bg-background flex flex-col justify-center items-center",children:[V.jsx(sE,{className:"w-16 h-16 mb-8"}),V.jsxs("h1",{className:"text-3xl font-display font-bold text-white tracking-widest uppercase text-center max-w-lg leading-relaxed",children:["Payment Gateway ",V.jsx("br",{})," Integration Pending"]}),V.jsx("p",{className:"text-gray-500 mt-4 text-sm",children:"This is a secure checkout placeholder."})]}),uK=()=>{const{id:n}=tz(),e=Ib(),{addToCart:t}=y4(),i=YM.find(o=>o.id===parseInt(n)),[r,s]=K.useState(0);return i?V.jsx("div",{className:"min-h-screen bg-background pt-24 pb-20 px-6 md:px-12",children:V.jsxs("div",{className:"max-w-7xl mx-auto",children:[V.jsxs("button",{onClick:()=>e(-1),className:"flex items-center gap-2 text-gray-400 hover:text-white mb-8 transition-colors",children:[V.jsx(xD,{size:20})," Back to Market"]}),V.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-12",children:[V.jsxs("div",{className:"space-y-4",children:[V.jsx("div",{className:"aspect-[4/3] bg-surface border border-white/10 rounded-lg overflow-hidden",children:V.jsx("img",{src:i.images[r],alt:i.title,className:"w-full h-full object-cover"})}),V.jsx("div",{className:"flex gap-4 overflow-x-auto pb-2",children:i.images.map((o,u)=>V.jsx("button",{onClick:()=>s(u),className:`w-24 h-24 shrink-0 rounded-lg overflow-hidden border-2 transition-all ${r===u?"border-accent":"border-transparent opacity-50 hover:opacity-100"}`,children:V.jsx("img",{src:o,alt:"",className:"w-full h-full object-cover"})},u))})]}),V.jsxs("div",{children:[V.jsxs("div",{className:"flex justify-between items-start mb-4",children:[V.jsx("span",{className:"text-accent font-bold uppercase tracking-wider text-sm",children:i.category}),V.jsxs("div",{className:"flex items-center gap-1 text-yellow-500",children:[V.jsx(rE,{size:16,fill:"currentColor"}),V.jsx("span",{className:"text-white font-bold",children:i.trustScore})]})]}),V.jsx("h1",{className:"text-4xl md:text-5xl font-display font-bold text-white mb-4",children:i.title}),V.jsx("p",{className:"text-3xl text-white font-light mb-8",children:i.price}),V.jsxs("div",{className:"bg-surface border border-white/5 p-6 rounded-lg mb-8",children:[V.jsx("p",{className:"text-gray-300 leading-relaxed mb-4",children:i.description||"No description provided."}),V.jsxs("p",{className:"text-sm text-gray-500",children:["Sold by ",V.jsxs("span",{className:"text-white font-bold",children:["@",i.seller]})]})]}),V.jsxs("div",{className:"flex flex-col gap-4",children:[V.jsxs(Zo,{onClick:()=>e("/payment"),variant:"primary",fullWidth:!0,className:"flex items-center justify-center gap-2",children:[V.jsx(_F,{size:18})," Buy Now"]}),V.jsxs(Zo,{onClick:()=>t(i),variant:"outline",fullWidth:!0,className:"flex items-center justify-center gap-2",children:[V.jsx(OF,{size:18})," Add to Cart"]})]})]})]})]})}):V.jsx("div",{className:"text-white pt-32 text-center",children:"Product not found"})},hK=()=>{const{pathname:n}=fo();return K.useEffect(()=>{window.scrollTo(0,0)},[n]),null},fK=()=>{const n=fo(),e=n.pathname==="/"||n.pathname==="/campusnodes/"||n.pathname==="/CampusNodes/";return K.useEffect(()=>{console.log("Current Path:",n.pathname,"Is Home:",e)},[n.pathname]),V.jsx("div",{className:`fixed inset-0 z-0 transition-opacity duration-1000 ${e?"opacity-100 pointer-events-auto":"opacity-10 pointer-events-none"}`,children:V.jsx(MZ,{})})},dK=({children:n})=>{const e=fo(),t=e.pathname==="/"||e.pathname==="/campusnodes/"||e.pathname==="/CampusNodes/";return V.jsxs("div",{className:`min-h-screen text-white font-sans selection:bg-accent selection:text-white pl-20 cursor-none relative z-10 transition-colors duration-500 ${t?"bg-transparent":"bg-background"}`,children:[V.jsx(PH,{}),V.jsx(IH,{}),n]})},pK=()=>V.jsx(g4,{children:V.jsx(v4,{children:V.jsxs(Fz,{children:[V.jsx(xZ,{}),V.jsx(hK,{}),V.jsx(fK,{}),V.jsx(dK,{children:V.jsxs(gz,{children:[V.jsx(zo,{path:"/",element:V.jsx(bZ,{})}),V.jsx(zo,{path:"/market",element:V.jsx(eK,{})}),V.jsx(zo,{path:"/services",element:V.jsx(iK,{})}),V.jsx(zo,{path:"/connections",element:V.jsx(rK,{})}),V.jsx(zo,{path:"/login",element:V.jsx(sK,{})}),V.jsx(zo,{path:"/signup",element:V.jsx(aK,{})}),V.jsx(zo,{path:"/profile",element:V.jsx(oK,{})}),V.jsx(zo,{path:"/settings",element:V.jsx(lK,{})}),V.jsx(zo,{path:"/payment",element:V.jsx(cK,{})}),V.jsx(zo,{path:"/market/:id",element:V.jsx(uK,{})})]})})]})})});class mK extends so.Component{constructor(e){super(e),this.state={hasError:!1,error:null,errorInfo:null}}static getDerivedStateFromError(e){return{hasError:!0,error:e}}componentDidCatch(e,t){console.error("Uncaught error:",e,t),this.setState({errorInfo:t})}render(){return this.state.hasError?V.jsxs("div",{className:"min-h-screen bg-black text-red-500 p-8 font-mono overflow-auto",children:[V.jsx("h1",{className:"text-2xl font-bold mb-4",children:"Something went wrong."}),V.jsxs("div",{className:"bg-gray-900 p-4 rounded border border-red-900",children:[V.jsx("h2",{className:"font-bold text-white",children:"Error Message:"}),V.jsx("pre",{className:"whitespace-pre-wrap",children:this.state.error&&this.state.error.toString()}),V.jsx("br",{}),V.jsx("h2",{className:"font-bold text-white",children:"Stack Trace:"}),V.jsx("pre",{className:"text-xs text-gray-400 whitespace-pre-wrap",children:this.state.errorInfo&&this.state.errorInfo.componentStack})]})]}):this.props.children}}FU.createRoot(document.getElementById("root")).render(V.jsx(so.StrictMode,{children:V.jsx(mK,{children:V.jsx(pK,{})})}));
